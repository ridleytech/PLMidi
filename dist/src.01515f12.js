parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"aDEZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NON_SUSTAINED_NOTE_DURATION=exports.SUSTAINED_NOTE_DURATION=void 0;var N=1.5;exports.SUSTAINED_NOTE_DURATION=N;var e=.75;exports.NON_SUSTAINED_NOTE_DURATION=e;
},{}],"qSSr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FancyPiano=void 0;var e=require("../utils/constants");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var i=88,a=21,r=function(){function s(e){t(this,s),this.keys=new Array(i),this.isSustainPedalPressed=!1,this.setKey=this.setKey.bind(this),this.svg=e.getElementById("piano-keyboard"),this.svg3=e.getElementById("sustain-pedal2")}return n(s,[{key:"repaintKeys",value:function(){console.log("FIRST_KEY_NOTE_NUMBER: "+a+" PIANO_KEYS_COUNT: "+i);for(var e=21;e<a+i;e++);}},{key:"paintPressedKey",value:function(e){this.svg.getElementById(e).classList.add("pressed")}},{key:"paintPressedKey2",value:function(){this.svg3.classList.add("pressed2")}},{key:"paintReleasedKey",value:function(e){try{this.svg.getElementById(e).removeAttribute("style"),this.svg.getElementById(e).classList.remove("pressed")}catch(t){console.error("Could not repaint key "+e)}}},{key:"paintReleasedKey2",value:function(e){try{this.svg3.classList.remove("pressed2")}catch(t){console.error("Could not repaint key "+e)}}},{key:"setKey",value:function(e,t){this.keys[e]=t,this.paintPressedKey(e)}},{key:"stopKey",value:function(e){return this.paintReleasedKey(e),this.isSustainPedalPressed?null:this.keys[e]}},{key:"setSustainPedal",value:function(e){this.isSustainPedalPressed=e>=64}},{key:"getSustainedKeys",value:function(){return this.keys.filter(function(t){return t.duration===e.SUSTAINED_NOTE_DURATION})}}]),s}();exports.FancyPiano=r;
},{"../utils/constants":"aDEZ"}],"rlaE":[function(require,module,exports) {
"use strict";function e(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}function r(r,t){for(var n,o,c=r.replace(/[^A-Za-z0-9\+\/]/g,""),a=c.length,i=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,u=new Uint8Array(i),f=0,d=0,l=0;l<a;l++)if(o=3&l,f|=e(c.charCodeAt(l))<<18-6*o,3===o||a-l==1){for(n=0;n<3&&d<i;n++,d++)u[d]=f>>>(16>>>n&24)&255;f=0}return u}module.exports={decode:r};
},{}],"P6lI":[function(require,module,exports) {
"use strict";module.exports=function(r,e){return new Promise(function(o,n){var t=new XMLHttpRequest;e&&(t.responseType=e),t.open("GET",r),t.onload=function(){200===t.status?o(t.response):n(Error(t.statusText))},t.onerror=function(){n(Error("Network Error"))},t.send()})};
},{}],"BEzE":[function(require,module,exports) {
"use strict";var n=require("./base64"),r=require("./fetch");function t(n){return function(r){return"string"==typeof r&&n.test(r)}}function e(n,r){return"string"==typeof n?n+r:"function"==typeof n?n(r):r}function o(n,r,t,e){var o=u(r)?f:i(r)?c:a(r)?d:s(r)?l:v(r)?m:p(r)?y:h(r)?x:O(r)?j:null;return o?o(n,r,t||{}):e?Promise.resolve(e):Promise.reject("Source not valid ("+r+")")}function u(n){return n instanceof ArrayBuffer}function f(n,r,t){return new Promise(function(t,e){n.decodeAudioData(r,function(n){t(n)},function(){e("Can't decode audio data ("+r.slice(0,30)+"...)")})})}o.fetch=r;var i=t(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"arraybuffer"),t)}function a(n){return n&&"function"==typeof n.then}function d(n,r,t){return r.then(function(r){return o(n,r,t)})}var s=Array.isArray;function l(n,r,t){return Promise.all(r.map(function(r){return o(n,r,t,r)}))}function v(n){return n&&"object"==typeof n}function m(n,r,t){var e={},u=Object.keys(r).map(function(u){if(t.only&&-1===t.only.indexOf(u))return null;var f=r[u];return o(n,f,t,f).then(function(n){e[u]=n})});return Promise.all(u).then(function(){return e})}var p=t(/\.json(\?.*)?$/i);function y(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(JSON.parse),t)}var h=t(/^data:audio/);function x(r,t,e){var u=t.indexOf(",");return o(r,n.decode(t.slice(u+1)).buffer,e)}var O=t(/\.js(\?.*)?$/i);function j(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(w),t)}function w(n){var r=n.indexOf("MIDI.Soundfont.");if(r<0)throw Error("Invalid MIDI.js Soundfont format");r=n.indexOf("=",r)+2;var t=n.lastIndexOf(",");return JSON.parse(n.slice(r,t)+"}")}"object"==typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof window&&(window.loadAudio=o);
},{"./base64":"rlaE","./fetch":"P6lI"}],"rstg":[function(require,module,exports) {
function e(e){var a=e.createGain(),r=a._voltage=i(e),l=n(r),s=n(r),u=n(r);return a._startAmount=n(s),a._endAmount=n(u),a._multiplier=n(l),a._multiplier.connect(a),a._startAmount.connect(a),a._endAmount.connect(a),a.value=l.gain,a.startValue=s.gain,a.endValue=u.gain,a.startValue.value=0,a.endValue.value=0,Object.defineProperties(a,t),a}module.exports=e;var t={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,a=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var n=this.sustain;t.cancelScheduledValues(e),a.cancelScheduledValues(e),i.cancelScheduledValues(e),i.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),a.setValueAtTime(1,e),a.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),a.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(n,this._decayFrom,r(this.decay))}},stop:{value:function(e,t){t&&(e-=this.release);var a=e+this.release;if(this.release){var i=this._multiplier.gain,n=this._startAmount.gain,s=this._endAmount.gain;i.cancelScheduledValues(e),n.cancelScheduledValues(e),s.cancelScheduledValues(e);var u=r(this.release);if(this.attack&&e<this._decayFrom){var c=l(0,1,this._startedAt,this._decayFrom,e);i.linearRampToValueAtTime(c,e),n.linearRampToValueAtTime(1-c,e),n.setTargetAtTime(0,e,u)}s.setTargetAtTime(1,e,u),i.setTargetAtTime(0,e,u)}return this._voltage.stop(a),a}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},a=new Float32Array([1,1]);function i(e){var t=e.createBufferSource(),i=e.createBuffer(1,2,e.sampleRate);return i.getChannelData(0).set(a),t.buffer=i,t.loop=!0,t}function n(e){var t=e.context.createGain();return e.connect(t),t}function r(e){return Math.log(e+1)/Math.log(100)}function l(e,t,a,i,n){var r=e+(n-a)/(i-a)*(t-e);return r<=e&&(r=e),r>=t&&(r=t),r}
},{}],"Q4VF":[function(require,module,exports) {
"use strict";var n=require("adsr"),e={},t={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function r(n,r,o){var a=!1,i=0,s={},f=n.createGain();f.gain.value=1;var l=Object.assign({},t,o),d={context:n,out:f,opts:l};return r instanceof AudioBuffer?d.buffer=r:d.buffers=r,d.start=function(t,r,o){if(d.buffer&&null!==t)return d.start(null,t,r);var u=t?d.buffers[t]:d.buffer;if(u){if(a){var c=o||e;r=Math.max(n.currentTime,r||0),d.emit("start",r,t,c);var f=p(t,u,c);return f.id=function(e,t){return t.id=i++,s[t.id]=t,t.source.onended=function(){var e=n.currentTime;t.source.disconnect(),t.env.disconnect(),t.disconnect(),d.emit("ended",e,t.id,t)},t.id}(0,f),f.env.start(r),f.source.start(r),d.emit("started",r,f.id,f),c.duration&&f.stop(r+c.duration),f}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+t+" not found.")},d.play=function(n,e,t){return d.start(n,e,t)},d.stop=function(n,e){var t;return(e=e||Object.keys(s)).map(function(e){return(t=s[e])?(t.stop(n),t.id):null})},d.connect=function(n){return a=!0,f.connect(n),d},d.emit=function(n,e,t,r){d.onevent&&d.onevent(n,e,t,r);var o=d["on"+n];o&&o(e,t,r)},d;function p(e,t,r){var o=n.createGain();return o.gain.value=0,o.connect(f),o.env=u(n,r,l),o.env.connect(o.gain),o.source=n.createBufferSource(),o.source.buffer=t,o.source.connect(o),o.source.loop=r.loop||l.loop,o.source.playbackRate.value=c(r.cents||l.cents),o.source.loopStart=r.loopStart||l.loopStart,o.source.loopEnd=r.loopEnd||l.loopEnd,o.stop=function(t){var r=t||n.currentTime;d.emit("stop",r,e);var a=o.env.stop(r);o.source.stop(a)},o}}function o(n){return"number"==typeof n}var a=["attack","decay","sustain","release"];function u(e,t,r){var u=n(e),c=t.adsr||r.adsr;return a.forEach(function(n,e){u[n]=c?c[e]:t[n]||r[n]}),u.value.value=o(t.gain)?t.gain:o(r.gain)?r.gain:1,u}function c(n){return n?Math.pow(2,n/1200):1}module.exports=r;
},{"adsr":"rstg"}],"QkT9":[function(require,module,exports) {
function n(n,t){return function(o,e,r,u){n(o,e,r,u),t(o,e,r,u)}}module.exports=function(t){return t.on=function(o,e){if(1===arguments.length&&"function"==typeof o)return t.on("event",o);var r="on"+o,u=t[r];return t[r]=u?n(u,e):e,t},t};
},{}],"u8RT":[function(require,module,exports) {
"use strict";var t=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function r(){return t}var e=[0,2,4,5,7,9,11];function c(r,c,n){if("string"!=typeof r)return null;var o=t.exec(r);if(!o||!c&&o[4])return null;var i={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length,i.chroma=e[i.step]+i.alt,o[3]&&(i.oct=+o[3],i.midi=i.chroma+12*(i.oct+1),i.freq=a(i.midi,n)),c&&(i.tonicOf=o[4]),i}function a(t,r){return Math.pow(2,(t-69)/12)*(r||440)}var n={parse:c,regex:r,midiToFreq:a},o=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];o.forEach(function(t){n[t]=function(r){var e=c(r);return e&&void 0!==e[t]?e[t]:null}}),module.exports=n;
},{}],"C6ze":[function(require,module,exports) {
"use strict";var r=require("note-parser"),t=function(r){return null!==r&&r!==[]&&r>=0&&r<129},n=function(n){return t(n)?+n:r.midi(n)};function e(r,t){return Object.keys(r).reduce(function(n,e){return n[t(e)]=r[e],n},{})}module.exports=function(r){if(r.buffers){var t=r.opts.map,u="function"==typeof t?t:n,f=function(r){return r?u(r)||r:null};r.buffers=e(r.buffers,f);var o=r.start;r.start=function(r,t,n){var e=f(r),u=e%1;return u&&(e=Math.floor(e),n=Object.assign(n||{},{cents:Math.floor(100*u)})),o(e,t,n)}}return r};
},{"note-parser":"u8RT"}],"wS1d":[function(require,module,exports) {
"use strict";var e=Array.isArray,t=function(e){return e&&"object"==typeof e},r={};module.exports=function(n){return n.schedule=function(u,i){var c,o,a,l,m=n.context.currentTime,s=u<m?m:u;return n.emit("schedule",s,i),i.map(function(u){return u?(e(u)?(c=u[0],o=u[1]):(c=u.time,o=u),t(o)?(a=o.name||o.key||o.note||o.midi||null,l=o):(a=o,l=r),n.start(a,s+(c||0),l)):null})},n};
},{}],"qcIM":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(s){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=s();else if("function"==typeof e&&e.amd)e([],s);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).midimessage=s()}}(function(){return function e(t,s,o){function a(n,i){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=s[n]={exports:{}};t[n][0].call(c.exports,function(e){var s=t[n][1][e];return a(s||e)},c,c.exports,e,t,s,o)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)a(o[n]);return a}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){return new function(e){if(this._event=e,this._data=e.data,this.receivedTime=e.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&e.data[0],this.channel=15&e.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 144:this.messageType="noteon",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 160:this.messageType="keypressure",this.key=127&e.data[1],this.pressure=127&e.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&e.data[1],this.controllerValue=127&e.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=e.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&e.data[1];break;case 224:this.messageType="pitchbendchange";var t=127&e.data[2],s=127&e.data[1];this.pitchBend=(t<<8)+s}}(e)},t.exports=s.default},{}]},{},[1])(1)});
},{}],"oPaO":[function(require,module,exports) {
var e=require("midimessage");module.exports=function(n){return n.listenToMidi=function(o,a){var i={},s=a||{},t=s.gain||function(e){return e/127};return o.onmidimessage=function(o){var a=o.messageType?o:e(o);if("noteon"===a.messageType&&0===a.velocity&&(a.messageType="noteoff"),!s.channel||a.channel===s.channel)switch(a.messageType){case"noteon":i[a.key]=n.play(a.key,0,{gain:t(a.velocity)});break;case"noteoff":i[a.key]&&(i[a.key].stop(),delete i[a.key])}},n},n};
},{"midimessage":"qcIM"}],"Q0YG":[function(require,module,exports) {
"use strict";var e=require("./player"),r=require("./events"),u=require("./notes"),i=require("./scheduler"),o=require("./midi");function t(t,d,n){return o(i(u(r(e(t,d,n)))))}"object"==typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&(window.SamplePlayer=t);
},{"./player":"Q4VF","./events":"QkT9","./notes":"C6ze","./scheduler":"wS1d","./midi":"oPaO"}],"POYY":[function(require,module,exports) {
"use strict";function t(t,r){return Array(r+1).join(t)}function r(t){return"number"==typeof t}function e(t){return"string"==typeof t}function n(t){return void 0!==t}function u(t,r){return Math.pow(2,(t-69)/12)*(r||440)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.regex=o,exports.parse=a,exports.build=s,exports.midi=x,exports.freq=d,exports.letter=v,exports.acc=m,exports.pc=h,exports.step=g,exports.alt=b,exports.chroma=y,exports.oct=A;var c=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function o(){return c}var i=[0,2,4,5,7,9,11];function a(t,r,e){if("string"!=typeof t)return null;var n=c.exec(t);if(!n||!r&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var a=i[o.step]+o.alt;return o.chroma=a<0?12+a:a%12,n[3]&&(o.oct=+n[3],o.midi=a+12*(o.oct+1),o.freq=u(o.midi,e)),r&&(o.tonicOf=n[4]),o}var l="CDEFGAB";function p(e){return r(e)?e<0?t("b",-e):t("#",e):""}function f(t){return r(t)?""+t:""}function s(t,r,e){return null==t?null:t.step?s(t.step,t.alt,t.oct):t<0||t>6?null:l.charAt(t)+p(r)+f(e)}function x(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var u=a(t);return u&&n(u.midi)?u.midi:null}function d(t,r){var e=x(t);return null===e?null:u(e,r)}function v(t){return(a(t)||{}).letter}function m(t){return(a(t)||{}).acc}function h(t){return(a(t)||{}).pc}function g(t){return(a(t)||{}).step}function b(t){return(a(t)||{}).alt}function y(t){return(a(t)||{}).chroma}function A(t){return(a(t)||{}).oct}
},{}],"iESr":[function(require,module,exports) {
"use strict";var n=require("note-parser");function e(n,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(n);this.nameToUrl=t||e.nameToUrl,this.ctx=n,this.instruments={},this.promises=[]}function t(n,t,o){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(n,t,o).then(function(n){return n.buffers})}function o(e,t){return t=t||{},function(o,s,r,i){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var u=o>0&&o<129?+o:n.midi(o),a=u?n.midiToFreq(u,440):null;if(a){r=r||.2;var d=(i=i||{}).destination||t.destination||e.destination,l=i.vcoType||t.vcoType||"sine",c=i.gain||t.gain||.4,f=e.createOscillator();f.type=l,f.frequency.value=a;var m=e.createGain();return m.gain.value=c,f.connect(m),m.connect(d),f.start(s),r>0&&f.stop(s+r),f}}}e.prototype.onready=function(n){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(n)},e.prototype.instrument=function(n,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var s=this.ctx;if((n=n||"default")in this.instruments)return this.instruments[n];var r={name:n,play:o(s,t)};if(this.instruments[n]=r,"default"!==n){var i=e.instrument(s,n,t).then(function(n){return r.play=n.play,r});this.promises.push(i),r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),i.then(n)}}else r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),n()};return r},e.loadBuffers=t,e.noteToMidi=n.midi,module.exports=e;
},{"note-parser":"POYY"}],"vFmg":[function(require,module,exports) {
"use strict";var n=require("audio-loader"),t=require("sample-player");function e(i,u,s){if(1===arguments.length)return function(n,t){return e(i,n,t)};var d=s||{},a=d.isSoundfontURL||o,l=d.nameToUrl||r,f=a(u)?u:l(u,d.soundfont,d.format);return n(i,f,{only:d.only||d.notes}).then(function(n){var e=t(i,n,d).connect(d.destination?d.destination:i.destination);return e.url=f,e.name=u,e})}function o(n){return/\.js(\?.*)?$/i.test(n)}function r(n,t,e){return"https://gleitz.github.io/midi-js-soundfonts/"+(t="FluidR3_GM"===t?t:"MusyngKite")+"/"+n+"-"+(e="ogg"===e?e:"mp3")+".js"}var i=require("./legacy");i.instrument=e,i.nameToUrl=r,"object"==typeof module&&module.exports&&(module.exports=i),"undefined"!=typeof window&&(window.Soundfont=i);
},{"audio-loader":"BEzE","sample-player":"Q0YG","./legacy":"iESr"}],"sC8V":[function(require,module,exports) {

},{}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"irSE":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}for(var s={VERSION:"2.0.13",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},r=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],h=0,u=function(t){r.forEach(function(e){e.forEach(function(e){return s.NOTES[h]=e+t}),h++})},o=-1;o<=9;o++)u(o);var l=function(){function e(){a(this,e)}return n(e,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var a=[];return t.forEach(function(t){return a.push(e.byteToHex(t))}),a.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return e.hexToNumber(e.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var e=[];return t.forEach(function(t){return e.push(String.fromCharCode(t))}),e.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var e=t[0],a=1;e>=128;)e=t[a],a++;return a}},{key:"readVarInt",value:function(t){var e=0;return t.forEach(function(t){128&t?(e+=127&t,e<<=7):e+=t}),e}},{key:"atob",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return"function"==typeof atob?atob(e):new t(e,"base64").toString("binary")})}]),e}(),c=function(){function t(e,i){a(this,t),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=i,this.delta=0,this.runningDelta=0,this.events=[];var n=this.data.subarray(this.data.length-3,this.data.length);if(255!==n[0]||47!==n[1]||0!==n[2])throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return n(t,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){for(var e in t=t||0,this.events)if(this.events[e].tick>=t)return this.eventIndex=e,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return l.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return l.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,e){if(e=e||!1){var a=t-this.lastTick>=this.getDelta();if(this.pointer<this.data.length&&(e||a)){var i=this.parseEvent();if(this.enabled)return i}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var e=l.getVarIntLength(this.data.subarray(t+2)),a=l.readVarInt(this.data.subarray(t+2,t+2+e));return l.bytesToLetters(this.data.subarray(t+2+e,t+2+e+a))}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),e={},a=this.getDeltaByteCount();if(e.track=this.index+1,e.delta=this.getDelta(),this.lastTick=this.lastTick+e.delta,this.runningDelta+=e.delta,e.tick=this.runningDelta,e.byteIndex=this.pointer,255==this.data[t]){switch(this.data[t+1]){case 0:e.name="Sequence Number";break;case 1:e.name="Text Event",e.string=this.getStringData(t);break;case 2:e.name="Copyright Notice";break;case 3:e.name="Sequence/Track Name",e.string=this.getStringData(t);break;case 4:e.name="Instrument Name",e.string=this.getStringData(t);break;case 5:e.name="Lyric",e.string=this.getStringData(t);break;case 6:e.name="Marker";break;case 7:e.name="Cue Point",e.string=this.getStringData(t);break;case 9:e.name="Device Name",e.string=this.getStringData(t);break;case 32:e.name="MIDI Channel Prefix";break;case 33:e.name="MIDI Port",e.data=l.bytesToNumber([this.data[t+3]]);break;case 47:e.name="End of Track";break;case 81:e.name="Set Tempo",e.data=Math.round(6e7/l.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=e.data;break;case 84:e.name="SMTPE Offset";break;case 88:e.name="Time Signature",e.data=this.data.subarray(t+3,t+7),e.timeSignature=e.data[0]+"/"+Math.pow(2,e.data[1]);break;case 89:e.name="Key Signature",e.data=this.data.subarray(t+3,t+5),e.data[0]>=0?e.keySignature=s.CIRCLE_OF_FIFTHS[e.data[0]]:e.data[0]<0&&(e.keySignature=s.CIRCLE_OF_FOURTHS[Math.abs(e.data[0])]),0==e.data[1]?e.keySignature+=" Major":1==e.data[1]&&(e.keySignature+=" Minor");break;case 127:e.name="Sequencer-Specific Meta-event";break;default:e.name="Unknown: "+this.data[t+1].toString(16)}var i=l.getVarIntLength(this.data.subarray(t+2)),n=l.readVarInt(this.data.subarray(t+2,t+2+i));this.pointer+=a+3+n}else if(240===this.data[t]){e.name="Sysex";var r=l.getVarIntLength(this.data.subarray(t+1)),h=l.readVarInt(this.data.subarray(t+1,t+1+r));e.data=this.data.subarray(t+1+r,t+1+r+h),this.pointer+=a+1+r+h}else if(247===this.data[t]){e.name="Sysex (escape)";var u=l.getVarIntLength(this.data.subarray(t+1)),o=l.readVarInt(this.data.subarray(t+1,t+1+u));e.data=this.data.subarray(t+1+u,t+1+u+o),this.pointer+=a+1+u+o}else if(this.data[t]<128)if(e.running=!0,e.noteNumber=this.data[t],e.noteName=s.NOTES[this.data[t]],e.velocity=this.data[t+1],this.lastStatus<=143)e.name="Note off",e.channel=this.lastStatus-128+1,this.pointer+=a+2;else if(this.lastStatus<=159)e.name="Note on",e.channel=this.lastStatus-144+1,this.pointer+=a+2;else if(this.lastStatus<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=s.NOTES[this.data[t+1]],e.pressure=event[1],this.pointer+=a+2;else if(this.lastStatus<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=a+2;else if(this.lastStatus<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=a+1;else if(this.lastStatus<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=a+1;else{if(!(this.lastStatus<=239))throw"Unknown event (running): ".concat(this.lastStatus);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=a+2}else if(this.lastStatus=this.data[t],this.data[t]<=143)e.name="Note off",e.channel=this.lastStatus-128+1,e.noteNumber=this.data[t+1],e.noteName=s.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=a+3;else if(this.data[t]<=159)e.name="Note on",e.channel=this.lastStatus-144+1,e.noteNumber=this.data[t+1],e.noteName=s.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=a+3;else if(this.data[t]<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=s.NOTES[this.data[t+1]],e.pressure=event[2],this.pointer+=a+3;else if(this.data[t]<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=a+3;else if(this.data[t]<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=a+2;else if(this.data[t]<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=a+2;else{if(!(this.data[t]<=239))throw"Unknown event: ".concat(this.data[t]);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=a+3}return this.delta+=e.delta,this.events.push(e),e}},{key:"endOfTrack",value:function(){return 255==this.data[this.pointer+1]&&47==this.data[this.pointer+2]&&0==this.data[this.pointer+3]}}]),t}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var f=function(){function t(e,i){a(this,t),this.sampleRate=5,this.startTime=0,this.buffer=i||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},"function"==typeof e&&this.on("midiEvent",e)}return n(t,[{key:"loadFile",value:function(t){var e=require("fs");return console.log("cc path: "+t),this.buffer=e.readFileSync(t),this.fileLoaded()}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var e=l.atob(t.split(",")[1]),a=new Uint8Array(e.length),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);return this.buffer=a,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return"MThd"===l.bytesToLetters(this.buffer.subarray(0,4))}},{key:"getFormat",value:function(){return this.format=l.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if("MTrk"==l.bytesToLetters(this.buffer.subarray(t,t+4))){var e=l.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new c(this.tracks.length,this.buffer.subarray(t+8,t+8+e)))}t+=l.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var a=0;return this.tracks.forEach(function(t){a+=8+t.data.length}),this.midiChunksByteLength=s.HEADER_CHUNK_LENGTH+a,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=l.bytesToNumber(this.buffer.subarray(12,s.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(e,a){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var i=e.handleEvent(this.tick,t);t&&i?(i.hasOwnProperty("name")&&"Set Tempo"===i.name&&(this.defaultTempo=i.data,this.setTempo(i.data)),i.hasOwnProperty("name")&&"Program Change"===i.name&&(this.instruments.includes(i.value)||this.instruments.push(i.value))):i&&(i.hasOwnProperty("name")&&"Set Tempo"===i.name&&(this.setTempo(i.data),this.isPlaying()&&this.pause().play()),this.emitEvent(i))}},this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=(new Date).getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach(function(e){e.setEventIndexByTick(t)}),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var e=this.getSongTime();if(t<0||t>e)throw t+" seconds not within song time of "+e;return this.skipToPercent(t/e*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||"object"===e(this.setIntervalId)}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(t){return t.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(t){return t.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(t){return t.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(t,e){return{events:{length:t.events.length+e.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return s.HEADER_CHUNK_LENGTH+8*this.tracks.length+this.tracks.reduce(function(t,e){return{pointer:t.pointer+e.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(t,e){return{eventIndex:t.eventIndex+e.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return!this.startTime&&this.tick?this.startTick:this.startTime?Math.round(((new Date).getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:0}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,e){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),this}},{key:"triggerPlayerEvent",value:function(t,e){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach(function(t){return t(e||{})}),this}}]),t}(),d={Player:f,Utils:l,Constants:s};module.exports=d;
},{"fs":"sC8V","buffer":"aMB2"}],"KA2S":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(F){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return T()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(F){return{type:"throw",arg:F}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function g(){}function d(){}function m(){}var w={};u(w,i,function(){return this});var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:r,done:!0}}return d.prototype=m,u(b,"constructor",m),u(m,"constructor",d),d.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,function(){return this}),t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}
},{}],"Fink":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={extend:function(r){function n(e){function r(e,r){var n,o=e.charCodeAt(r);return r<e.length&&(o>=65&&o<=90?n=o-65:o>=97&&o<=122?n=o-71:o>=48&&o<=57?n=o+4:43===o?n=62:47===o?n=63:61!==o&&console.log("base64 encountered unexpected character code: "+o)),n}if(!(0===e.length||e.length%4>0)){for(var n,o=e.match(/[=]*$/)[0].length,t=3*e.length/4-o,a=new ArrayBuffer(t),c=new Uint8Array(a),s=[],u=0,f=0;u<t;){for(n=0;n<4;n+=1)s[n]=r(e,f),f+=1;c[u]=4*s[0]+Math.floor(s[1]/16),(u+=1)<t&&(c[u]=s[1]%16*16+Math.floor(s[2]/4),u+=1),u<t&&(c[u]=s[2]%4*64+s[3],u+=1)}return a}console.log("base64 encountered unexpected length: "+e.length)}function o(e,n,o){r.decodeAudioData(n,function(r){e.buffer=r,"function"==typeof o&&null!==r&&o(e)},function(e){console.log("Could not decode audio data: "+e)})}r.createReverbFromBase64=function(e,t){var a=r.createConvolver();return o(a,n(e),t),a},r.createSourceFromBase64=function(e,t){var a=r.createBufferSource();return o(a,n(e),t),a},r.createReverbFromUrl=function(n,t){var a=r.createConvolver(),c=new XMLHttpRequest;return c.open("GET",n,!0),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&o(a,c.response,t)},c.onerror=function(r){console.log("There was an error receiving the response: "+r),e.networkError=r},c.responseType="arraybuffer",c.send(),a},r.createSourceFromUrl=function(n,t){var a=r.createBufferSource(),c=new XMLHttpRequest;return c.open("GET",n,!0),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&o(a,c.response,t)},c.onerror=function(r){console.log("There was an error receiving the response: "+r),e.networkError=r},c.responseType="arraybuffer",c.send(),a},r.createReverbFromBase64Url=function(t,a){var c=r.createConvolver(),s=new XMLHttpRequest;return s.open("GET",t,!0),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&o(c,n(s.response),a)},s.onerror=function(r){console.log("There was an error receiving the response: "+r),e.networkError=r},s.send(),c},r.createSourceFromBase64Url=function(t,a){var c=r.createBufferSource(),s=new XMLHttpRequest;return s.open("GET",t,!0),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&o(c,n(s.response),a)},s.onerror=function(r){console.log("There was an error receiving the response: "+r),e.networkError=r},s.send(),c}}};var r=e;exports.default=r;
},{}],"bTgq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var m=[["1P 3M 5P","major","M "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69"],["1P 3M 5P 7M 11A","lydian","maj#4 Δ#4 Δ#11"],["1P 3M 6m 7M","major seventh b6","M7b6"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 6M","minor sixth","m6"],["1P 3m 5P 7m 9M","minor ninth","m9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant b9","7b9"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended 4th","sus4"],["1P 2M 5P","suspended 2nd","sus2"],["1P 4P 5P 7m","suspended 4th seventh","7sus4"],["1P 5P 7m 9M 11P","eleventh","11 sus Bb/C for C11"],["1P 4P 5P 7m 9m","suspended 4th b9","b9sus phryg"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5"],["1P 3M 5P 7M 9M 11A","major #11 (lydian)","maj9#11 Δ9#11"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 2M 4P 5P",null,"sus24 sus4add9"],["1P 3M 13m",null,"Mb6"],["1P 3M 5A 7M 9M",null,"maj9#5 Maj9#5"],["1P 3M 5A 7m",null,"7#5 +7 7aug aug7"],["1P 3M 5A 7m 9A",null,"7#5#9 7alt 7#5#9_ 7#9b13_"],["1P 3M 5A 7m 9M",null,"9#5 9+"],["1P 3M 5A 7m 9M 11A",null,"9#5#11"],["1P 3M 5A 7m 9m",null,"7#5b9"],["1P 3M 5A 7m 9m 11A",null,"7#5b9#11"],["1P 3M 5A 9A",null,"+add#9"],["1P 3M 5A 9M",null,"M#5add9 +add9"],["1P 3M 5P 6M 11A",null,"M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M",null,"M7add13"],["1P 3M 5P 6M 9M 11A",null,"69#11"],["1P 3M 5P 6m 7m",null,"7b6"],["1P 3M 5P 7M 9A 11A",null,"maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M",null,"M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m",null,"M7b9"],["1P 3M 5P 7m 11A 13m",null,"7#11b13 7b5b13"],["1P 3M 5P 7m 13M",null,"7add6 67 7add13"],["1P 3M 5P 7m 9A 11A",null,"7#9#11 7b5#9"],["1P 3M 5P 7m 9A 11A 13M",null,"13#9#11"],["1P 3M 5P 7m 9A 11A 13m",null,"7#9#11b13"],["1P 3M 5P 7m 9A 13M",null,"13#9 13#9_"],["1P 3M 5P 7m 9A 13m",null,"7#9b13"],["1P 3M 5P 7m 9M 11A",null,"9#11 9+4 9#4 9#11_ 9#4_"],["1P 3M 5P 7m 9M 11A 13M",null,"13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m",null,"9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A",null,"7b9#11 7b5b9"],["1P 3M 5P 7m 9m 11A 13M",null,"13b9#11"],["1P 3M 5P 7m 9m 11A 13m",null,"7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M",null,"13b9"],["1P 3M 5P 7m 9m 13m",null,"7b9b13"],["1P 3M 5P 7m 9m 9A",null,"7b9#9"],["1P 3M 5P 9M",null,"Madd9 2 add9 add2"],["1P 3M 5P 9m",null,"Maddb9"],["1P 3M 5d",null,"Mb5"],["1P 3M 5d 6M 7m 9M",null,"13b5"],["1P 3M 5d 7M",null,"M7b5"],["1P 3M 5d 7M 9M",null,"M9b5"],["1P 3M 5d 7m",null,"7b5"],["1P 3M 5d 7m 9M",null,"9b5"],["1P 3M 7m",null,"7no5"],["1P 3M 7m 13m",null,"7b13"],["1P 3M 7m 9M",null,"9no5"],["1P 3M 7m 9M 13M",null,"13no5"],["1P 3M 7m 9M 13m",null,"9b13"],["1P 3m 4P 5P",null,"madd4"],["1P 3m 5A",null,"m#5 m+ mb6"],["1P 3m 5P 6M 9M",null,"m69 _69"],["1P 3m 5P 6m 7M",null,"mMaj7b6"],["1P 3m 5P 6m 7M 9M",null,"mMaj9b6"],["1P 3m 5P 7M 9M",null,"mMaj9 -Maj9"],["1P 3m 5P 7m 11P",null,"m7add11 m7add4"],["1P 3m 5P 9M",null,"madd9"],["1P 3m 5d 6M 7M",null,"o7M7"],["1P 3m 5d 7M",null,"oM7"],["1P 3m 5d 7m",null,"m7b5 half-diminished h7 _7b5"],["1P 3m 6m 7M",null,"mb6M7"],["1P 3m 6m 7m",null,"m7#5"],["1P 3m 6m 7m 9M",null,"m9#5"],["1P 3m 6m 7m 9M 11P",null,"m11A"],["1P 3m 6m 9m",null,"mb6b9"],["1P 3m 7m 12d 2M",null,"m9b5 h9 -9b5"],["1P 3m 7m 12d 2M 4P",null,"m11b5 h11 _11b5"],["1P 4P 5A 7M",null,"M7#5sus4"],["1P 4P 5A 7M 9M",null,"M9#5sus4"],["1P 4P 5A 7m",null,"7#5sus4"],["1P 4P 5P 7M",null,"M7sus4"],["1P 4P 5P 7M 9M",null,"M9sus4"],["1P 4P 5P 7m 9M",null,"9sus4 9sus"],["1P 4P 5P 7m 9M 13M",null,"13sus4 13sus"],["1P 4P 5P 7m 9m 13m",null,"7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m",null,"4 quartal"],["1P 5P 7m 9m 11P",null,"11b9"]];exports.default=m;
},{}],"OiKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=r,exports.tokenize=s,exports.props=a,exports.name=f,exports.pc=m,exports.midi=d,exports.freq=b,exports.freqToMidi=y,exports.chroma=A,exports.oct=q,exports.stepToLetter=C,exports.altToAcc=G,exports.fromProps=v,exports.fromMidi=z,exports.simplify=D,exports.enharmonic=O,exports.midiToFreq=exports.default=void 0;var t={tokenize:s,props:a,name:f,names:r,pc:m,oct:q,chroma:A,midi:d,freq:b,fromMidi:z,freqToMidi:y,altToAcc:G,stepToLetter:C,fromProps:v,simplify:D,enharmonic:O};exports.default=t;const e="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" ");function r(t={}){return e.filter(e=>!1!==t.unaltered&&void 0===e[1]||!0===t.flats&&"b"===e[1]||!0===t.sharps&&"#"===e[1])}const n=r({sharps:!0}),o=r({flats:!0}),c=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function s(t){"string"!=typeof t&&(t="");const e=c.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:null}const l=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),u=[0,2,4,5,7,9,11],i=t=>{const e=s(t);if(""===e[0]||""!==e[3])return l;const[r,n,o]=e,c={letter:r,acc:n,octStr:o};return c.pc=c.letter+c.acc,c.name=c.pc+o,c.step=(c.letter.charCodeAt(0)+3)%7,c.alt="b"===c.acc[0]?-c.acc.length:c.acc.length,c.oct=o.length?+o:null,c.chroma=(u[c.step]+c.alt+120)%12,c.midi=null!==c.oct?u[c.step]+c.alt+12*(c.oct+1):null,c.freq=x(c.midi),Object.freeze(c)};let p={};function a(t){return p[t]||(p[t]=i(t))}function f(t){return a(t).name}function m(t){return a(t).pc}const h=t=>t>=0&&t<=127;function d(t){if("number"!=typeof t&&"string"!=typeof t)return null;const e=a(t).midi,r=e||0===e?e:+t;return h(r)?r:null}const x=(t,e=440)=>"number"==typeof t?Math.pow(2,(t-69)/12)*e:null;function b(t){return a(t).freq||x(t)}exports.midiToFreq=x;const M=Math.log(2),g=Math.log(440);function y(t){const e=12*(Math.log(t)-g)/M+69;return Math.round(100*e)/100}function A(t){return a(t).chroma}function q(t){return a(t).oct}const T="CDEFGAB";function C(t){return T[t]}const j=(t,e)=>Array(e+1).join(t),F=(t,e)=>"number"!=typeof t?"":e(t);function G(t){return F(t,t=>t<0?j("b",-t):j("#",t))}function v(t={},e=null){const{step:r,alt:n,oct:o}=e?Object.assign({},a(e),t):t,c=C(r);if(!c)return null;const s=c+G(n);return o||0===o?s+o:s}function z(t,e={}){t=Math.round(t);const r=(!0===e.sharps?n:o)[t%12];return e.pitchClass?r:r+(Math.floor(t/12)-1)}function D(t,e={}){const{alt:r,chroma:n,midi:o}=a(t);return null===n?null:z(o||n,{sharps:!1===e.sameAccType?r<0:r>0,pitchClass:null===o})}function O(t){return D(t,!1)}
},{}],"V9PQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=i,exports.tokenize=m,exports.props=x,exports.num=h,exports.name=y,exports.semitones=v,exports.chroma=b,exports.ic=g,exports.fromProps=A,exports.simplify=q,exports.invert=j,exports.fromSemitones=$,exports.default=void 0;var t={tokenize:m,props:x,simplify:q,invert:j,names:i,num:h,name:y,fromProps:A,chroma:b,ic:g,semitones:v,fromSemitones:$};exports.default=t;const e="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",n="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+e+"|"+n+"$"),o=[0,2,4,5,7,9,11],s="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],l="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" ");function i(t){return"string"!=typeof t?l.slice():l.filter(e=>-1!==t.indexOf(e[1]))}function m(t){const e=r.exec(t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]}const p=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),c=(t,e)=>Array(Math.abs(e)+1).join(t),a=(t,e)=>"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null,f=(t,e)=>0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?c("A",e):e<0?c("d","P"===t?e:e+1):null,M=t=>(Math.abs(t)-1)%7,d=t=>{const e=m(t);if(null===e)return p;const n={num:+e[0],q:e[1]};return n.step=M(n.num),n.type=s[n.step],"M"===n.type&&"P"===n.q?p:(n.name=""+n.num+n.q,n.dir=n.num<0?-1:1,n.simple=8===n.num||-8===n.num?n.num:n.dir*(n.step+1),n.alt=a(n.type,n.q),n.oct=Math.floor((Math.abs(n.num)-1)/7),n.semitones=n.dir*(o[n.step]+n.alt+12*n.oct),n.chroma=(n.dir*(o[n.step]+n.alt)%12+12)%12,Object.freeze(n))},P={};function x(t){return"string"!=typeof t?p:P[t]||(P[t]=d(t))}function h(t){return x(t).num}function y(t){return x(t).name}function v(t){return x(t).semitones}function b(t){return x(t).chroma}function g(t){return"string"==typeof t&&(t=x(t).chroma),"number"==typeof t?u[t%12]:null}function A({num:t,step:e,alt:n,oct:r=1,dir:o}={}){if(void 0!==e&&(t=e+1+7*r),void 0===t)return null;const u=o<0?"-":"",l=s[M(t)];return u+t+f(l,n)}function q(t){const e=x(t);return e===p?null:e.simple+e.q}function j(t){const e=x(t);return e===p?null:A({step:(7-e.step)%7,alt:"P"===e.type?-e.alt:-(e.alt+1),oct:e.oct,dir:e.dir})}var z=[1,2,2,3,3,4,5,5,6,6,7,7],O="P m M m M P d P m M m M".split(" ");function $(t){var e=t<0?-1:1,n=Math.abs(t),r=n%12,o=Math.floor(n/12);return e*(z[r]+7*o)+O[r]}
},{}],"GVuH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=s,exports.range=u,exports.rotate=c,exports.compact=i,exports.sort=f,exports.sortedUniq=l,exports.shuffle=p,exports.permutations=d,exports.default=void 0;var t=require("../note");const r=Array.isArray;var e={range:u,rotate:c,compact:i,sort:f,sortedUniq:l,shuffle:p,permutations:d};function n(t,r){const e=[];for(;r--;e[r]=r+t);return e}function o(t,r){const e=[];for(;r--;e[r]=t-r);return e}function s(t,e="Must be an array."){if(!r(t))throw Error(e+" Was: "+t)}function u(t,r){return null===t||null===r?[]:t<r?n(t,r-t+1):o(t,t-r+1)}function c(t,r){const e=r.length,n=(t%e+e)%e;return r.slice(n,e).concat(r.slice(0,n))}function i(t){return t.filter(t=>0===t||t)}exports.default=e;const a=r=>{const e=(0,t.props)(r).midi;return null!==e?e:(0,t.props)(r+"-100").midi};function f(r){return i(r.map(t.name)).sort((t,r)=>a(t)>a(r))}function l(t){return f(t).filter((t,r,e)=>0===r||t!==e[r-1])}function p(t,r=Math.random){let e,n,o=t.length;for(;o;)e=r()*o--|0,n=t[o],t[o]=t[e],t[e]=n;return t}function d(t){return 0===t.length?[[]]:d(t.slice(1)).reduce(function(r,e){return r.concat(t.map(function(r,n){const o=e.slice();return o.splice(n,0,t[0]),o}))},[])}
},{"../note":"OiKs"}],"tV8k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=s,exports.chromas=l,exports.modes=c,exports.isChroma=f,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=d,exports.includes=g,exports.filter=v,exports.default=void 0;var t=require("../note"),e=require("../interval"),r=require("../array"),n={chroma:s,chromas:l,isChroma:f,intervals:m,isSubsetOf:x,isSupersetOf:d,isEqual:h,modes:c,includes:g,filter:v};exports.default=n;const o=t=>parseInt(s(t),2),u=t=>t.replace(/0/g,"").length;function s(n){if(f(n))return n;let o,u;(0,r.assert)(n);const s=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<n.length;r++){if(u=n[r],null===(o=(0,t.chroma)(u))&&(o=(0,e.chroma)(n[r])),null===o)return null;s[o]=1}return s.join("")}let i=null;function l(t){return i=i||(0,r.range)(2048,4095).map(t=>t.toString(2)),"number"==typeof t?i.filter(e=>u(e)===t):i.slice()}function c(t,e){e=!1!==e;const n=(s(t)||"").split("");return(0,r.compact)(n.map(function(t,o){const u=(0,r.rotate)(o,n);return e&&"0"===u[0]?null:u.join("")}))}const a=/^[01]{12}$/;function f(t){return a.test(t)}const p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(t){return f(t)?(0,r.compact)(t.split("").map(function(t,e){return"1"===t?p[e]:null})):[]}function h(t,e){return 1===arguments.length?e=>h(t,e):s(t)===s(e)}function x(t,e){return arguments.length>1?x(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e&t)===e})}function d(t,e){return arguments.length>1?d(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e|t)===e})}function g(e,r){return arguments.length>1?g(e)(r):(e=s(e),r=>"1"===e[(0,t.chroma)(r)])}function v(t,e){return 1===arguments.length?e=>v(t,e):e.filter(g(t))}
},{"../note":"OiKs","../interval":"V9PQ","../array":"GVuH"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"JJDz":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.asap=xt,exports.all=Q,exports.allSettled=tt,exports.race=et,exports.hash=it,exports.hashSettled=at,exports.rethrow=lt,exports.defer=ft,exports.denodeify=z,exports.configure=i,exports.on=Lt,exports.off=Wt,exports.resolve=vt,exports.reject=dt,exports.map=_t,exports.filter=jt,exports.async=exports.EventTarget=exports.Promise=exports.cast=exports.default=void 0;var n={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var n=r(this),o=n[t];o||(o=n[t]=[]),-1===o.indexOf(e)&&o.push(e)},off:function(t,e){var n=r(this);if(e){var o=n[t],i=o.indexOf(e);-1!==i&&o.splice(i,1)}else n[t]=[]},trigger:function(t,e,n){var o=r(this)[t];if(o)for(var i=0;i<o.length;i++)(0,o[i])(e,n)}};exports.EventTarget=n;var o={instrument:!1};function i(t,e){if(2!==arguments.length)return o[t];o[t]=e}n.mixin(o);var s=[];function u(){setTimeout(function(){for(var t=0;t<s.length;t++){var e=s[t],r=e.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),o.trigger(e.name,e.payload)}s.length=0},50)}function c(t,e,r){1===s.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:Date.now(),error:o["instrument-with-stack"]?new Error(e._label):null}})&&u()}function a(t,r){if(t&&"object"===e(t)&&t.constructor===this)return t;var n=new this(h,r);return O(n,t),n}function l(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){var r=e(t);return null!==t&&("object"===r||"function"===r)}function h(){}var p=void 0,y=1,_=2,v={error:null};function d(t){try{return t.then}catch(e){return v.error=e,v}}var m=void 0;function b(){try{var t=m;return m=null,t.apply(this,arguments)}catch(e){return v.error=e,v}}function w(t){return m=t,b}function g(t,e,r){o.async(function(t){var n=!1,o=w(r).call(e,function(r){n||(n=!0,e===r?A(t,r):O(t,r))},function(e){n||(n=!0,T(t,e))},"Settle: "+(t._label||" unknown promise"));if(!n&&o===v){n=!0;var i=v.error;v.error=null,T(t,i)}},t)}function j(t,e){e._state===y?A(t,e._result):e._state===_?(e._onError=null,T(t,e._result)):S(e,void 0,function(r){e===r?A(t,r):O(t,r)},function(e){return T(t,e)})}function E(t,e,r){if(e.constructor===t.constructor&&r===M&&t.constructor.resolve===a)j(t,e);else if(r===v){var n=v.error;v.error=null,T(t,n)}else"function"==typeof r?g(t,e,r):A(t,e)}function O(t,e){t===e?A(t,e):f(e)?E(t,e,d(e)):A(t,e)}function x(t){t._onError&&t._onError(t._result),P(t)}function A(t,e){t._state===p&&(t._result=e,t._state=y,0===t._subscribers.length?o.instrument&&c("fulfilled",t):o.async(P,t))}function T(t,e){t._state===p&&(t._state=_,t._result=e,o.async(x,t))}function S(t,e,r,n){var i=t._subscribers,s=i.length;t._onError=null,i[s]=e,i[s+y]=r,i[s+_]=n,0===s&&t._state&&o.async(P,t)}function P(t){var e=t._subscribers,r=t._state;if(o.instrument&&c(r===y?"fulfilled":"rejected",t),0!==e.length){for(var n=void 0,i=void 0,s=t._result,u=0;u<e.length;u+=3)n=e[u],i=e[u+r],n?R(r,n,i,s):i(s);t._subscribers.length=0}}function R(t,e,r,n){var o="function"==typeof r,i=void 0;if(i=o?w(r)(n):n,e._state!==p);else if(i===e)T(e,l());else if(i===v){var s=v.error;v.error=null,T(e,s)}else o?O(e,i):t===y?A(e,i):t===_&&T(e,i)}function k(t,e){var r=!1;try{e(function(e){r||(r=!0,O(t,e))},function(e){r||(r=!0,T(t,e))})}catch(n){T(t,n)}}function M(t,e,r){var n=this._state;if(n===y&&!t||n===_&&!e)return o.instrument&&c("chained",this,this),this;this._onError=null;var i=new this.constructor(h,r),s=this._result;if(o.instrument&&c("chained",this,i),n===p)S(this,i,t,e);else{var u=n===y?t:e;o.async(function(){return R(n,i,u,s)})}return i}var C=function(){function t(t,e,r,n){this._instanceConstructor=t,this.promise=new t(h,n),this._abortOnReject=r,this._isUsingOwnPromise=t===L,this._isUsingOwnResolve=t.resolve===a,this._init.apply(this,arguments)}return t.prototype._init=function(t,e){var r=e.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(e)},t.prototype._enumerate=function(t){for(var e=this.length,r=this.promise,n=0;r._state===p&&n<e;n++)this._eachEntry(t[n],n,!0);this._checkFullfillment()},t.prototype._checkFullfillment=function(){if(0===this._remaining){var t=this._result;A(this.promise,t),this._result=null}},t.prototype._settleMaybeThenable=function(t,e,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var o=d(t);if(o===M&&t._state!==p)t._onError=null,this._settledAt(t._state,e,t._result,r);else if("function"!=typeof o)this._settledAt(y,e,t,r);else if(this._isUsingOwnPromise){var i=new n(h);E(i,t,o),this._willSettleAt(i,e,r)}else this._willSettleAt(new n(function(e){return e(t)}),e,r)}else this._willSettleAt(n.resolve(t),e,r)},t.prototype._eachEntry=function(t,r,n){null!==t&&"object"===e(t)?this._settleMaybeThenable(t,r,n):this._setResultAt(y,r,t,n)},t.prototype._settledAt=function(t,e,r,n){var o=this.promise;o._state===p&&(this._abortOnReject&&t===_?T(o,r):(this._setResultAt(t,e,r,n),this._checkFullfillment()))},t.prototype._setResultAt=function(t,e,r,n){this._remaining--,this._result[e]=r},t.prototype._willSettleAt=function(t,e,r){var n=this;S(t,void 0,function(t){return n._settledAt(y,e,t,r)},function(t){return n._settledAt(_,e,t,r)})},t}();function F(t,e,r){this._remaining--,this._result[e]=t===y?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function I(t,e){return Array.isArray(t)?new C(this,t,!0,e).promise:this.reject(new TypeError("Promise.all must be called with an array"),e)}function N(t,e){var r=new this(h,e);if(!Array.isArray(t))return T(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===p&&n<t.length;n++)S(this.resolve(t[n]),void 0,function(t){return O(r,t)},function(t){return T(r,t)});return r}function U(t,e){var r=new this(h,e);return T(r,t),r}var q="rsvp_"+Date.now()+"-",D=0;function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var L=function(){function t(e,r){this._id=D++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],o.instrument&&c("created",this),h!==e&&("function"!=typeof e&&K(),this instanceof t?k(this,e):G())}return t.prototype._onError=function(t){var e=this;o.after(function(){e._onError&&o.trigger("error",t,e._label)})},t.prototype.catch=function(t,e){return this.then(void 0,t,e)},t.prototype.finally=function(t,e){var r=this.constructor;return"function"==typeof t?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();function W(t,e){for(var r={},n=t.length,o=new Array(n),i=0;i<n;i++)o[i]=t[i];for(var s=0;s<e.length;s++){r[e[s]]=o[s+1]}return r}function Y(t){for(var e=t.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=t[n];return r}function $(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function z(t,e){var r=function(){for(var r=arguments.length,n=new Array(r+1),o=!1,i=0;i<r;++i){var s=arguments[i];if(!o){if((o=J(s))===v){var u=v.error;v.error=null;var c=new L(h);return T(c,u),c}o&&!0!==o&&(s=$(o,s))}n[i]=s}var a=new L(h);return n[r]=function(t,r){t?T(a,t):void 0===e?O(a,r):!0===e?O(a,Y(arguments)):Array.isArray(e)?O(a,W(arguments,e)):O(a,r)},o?H(a,n,t,this):B(a,n,t,this)};return r.__proto__=t,r}function B(t,e,r,n){if(w(r).apply(n,e)===v){var o=v.error;v.error=null,T(t,o)}return t}function H(t,e,r,n){return L.all(e).then(function(e){return B(t,e,r,n)})}function J(t){return null!==t&&"object"===e(t)&&(t.constructor===L||d(t))}function Q(t,e){return L.all(t,e)}function V(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function X(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}exports.Promise=L,L.cast=a,L.all=I,L.race=N,L.resolve=a,L.reject=U,L.prototype._guidKey=q,L.prototype.then=M;var Z=function(t){function e(e,r,n){return V(this,t.call(this,e,r,!1,n))}return X(e,t),e}(C);function tt(t,e){return Array.isArray(t)?new Z(L,t,e).promise:L.reject(new TypeError("Promise.allSettled must be called with an array"),e)}function et(t,e){return L.race(t,e)}function rt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function nt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}Z.prototype._setResultAt=F;var ot=function(t){function e(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return rt(this,t.call(this,e,r,n,o))}return nt(e,t),e.prototype._init=function(t,e){this._result={},this._enumerate(e)},e.prototype._enumerate=function(t){var e=Object.keys(t),r=e.length,n=this.promise;this._remaining=r;for(var o=void 0,i=void 0,s=0;n._state===p&&s<r;s++)i=t[o=e[s]],this._eachEntry(i,o,!0);this._checkFullfillment()},e}(C);function it(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("Promise.hash must be called with an object");return new ot(L,t,r).promise})}function st(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function ut(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var ct=function(t){function e(e,r,n){return st(this,t.call(this,e,r,!1,n))}return ut(e,t),e}(ot);function at(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("hashSettled must be called with an object");return new ct(L,t,!1,r).promise})}function lt(t){throw setTimeout(function(){throw t}),t}function ft(t){var e={resolve:void 0,reject:void 0};return e.promise=new L(function(t,r){e.resolve=t,e.reject=r},t),e}function ht(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function pt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}ct.prototype._setResultAt=F;var yt=function(t){function e(e,r,n,o){return ht(this,t.call(this,e,r,!0,o,n))}return pt(e,t),e.prototype._init=function(t,e,r,n,o){var i=e.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._mapFn=o,this._enumerate(e)},e.prototype._setResultAt=function(t,e,r,n){if(n){var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,this._result[e]=r},e}(C);function _t(t,e,r){return"function"!=typeof e?L.reject(new TypeError("map expects a function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("map must be called with an array");return new yt(L,t,e,r).promise})}function vt(t,e){return L.resolve(t,e)}function dt(t,e){return L.reject(t,e)}function mt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function bt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var wt={},gt=function(t){function e(){return mt(this,t.apply(this,arguments))}return bt(e,t),e.prototype._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var t=this._result.filter(function(t){return t!==wt});A(this.promise,t),this._result=null}},e.prototype._setResultAt=function(t,e,r,n){if(n){this._result[e]=r;var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,r||(this._result[e]=wt)},e}(yt);function jt(t,e,r){return"function"!=typeof e?L.reject(new TypeError("filter expects function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("filter must be called with an array");return new gt(L,t,e,r).promise})}var Et=0,Ot=void 0;function xt(t,e){Nt[Et]=t,Nt[Et+1]=e,2===(Et+=2)&&Dt()}var At="undefined"!=typeof window?window:void 0,Tt=At||{},St=Tt.MutationObserver||Tt.WebKitMutationObserver,Pt="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Rt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function kt(){var e=t.nextTick,r=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(e=setImmediate),function(){return e(Ut)}}function Mt(){return void 0!==Ot?function(){Ot(Ut)}:It()}function Ct(){var t=0,e=new St(Ut),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){return r.data=t=++t%2}}function Ft(){var t=new MessageChannel;return t.port1.onmessage=Ut,function(){return t.port2.postMessage(0)}}function It(){return function(){return setTimeout(Ut,1)}}var Nt=new Array(1e3);function Ut(){for(var t=0;t<Et;t+=2){(0,Nt[t])(Nt[t+1]),Nt[t]=void 0,Nt[t+1]=void 0}Et=0}function qt(){try{var t=Function("return this")().require("vertx");return Ot=t.runOnLoop||t.runOnContext,Mt()}catch(e){return It()}}var Dt=void 0;Dt=Pt?kt():St?Ct():Rt?Ft():void 0===At&&"function"==typeof require?qt():It(),o.async=xt,o.after=function(t){return setTimeout(t,0)};var Kt=vt;exports.cast=Kt;var Gt=function(t,e){return o.async(t,e)};function Lt(){o.on.apply(o,arguments)}function Wt(){o.off.apply(o,arguments)}if(exports.async=Gt,"undefined"!=typeof window&&"object"===e(window.__PROMISE_INSTRUMENTATION__)){var Yt=window.__PROMISE_INSTRUMENTATION__;for(var $t in i("instrument",!0),Yt)Yt.hasOwnProperty($t)&&Lt($t,Yt[$t])}var zt={asap:xt,cast:Kt,Promise:L,EventTarget:n,all:Q,allSettled:tt,race:et,hash:it,hashSettled:at,rethrow:lt,defer:ft,denodeify:z,configure:i,on:Lt,off:Wt,resolve:vt,reject:dt,map:_t,async:Gt,filter:jt},Bt=zt;exports.default=Bt;
},{"process":"g5IB"}],"YQW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=o,exports.find=c,exports.default=void 0;var e=a(require("./chord-data")),r=require("../pcset"),t=require("rsvp");function a(e){return e&&e.__esModule?e:{default:e}}var n={all:o,find:c};let i;exports.default=n;const s=e=>{const t=e[0].split(" "),a=e[1],n=e[2].split(" "),i={name:a,intervals:t,abbreviatures:n},s=e=>-1!==t.indexOf(e);return i.quality=s("5A")?"Augmented":s("3M")?"Major":s("5d")?"Diminished":s("3m")?"Minor":null,i.chroma=(0,r.chroma)(t),i.setnum=parseInt(i.chroma,2),Object.freeze(i)},u=(e,r)=>(e.name||"").localeCompare(r.name);function o(){return i||(i=e.default.map(s).sort(u))}const m=Object.freeze({intervals:[],names:[]}),l=e=>"string"==typeof e;function c(e){if(!e&&""!==e)return m;l(e)?e={name:e,abbreviature:e,chroma:e}:Array.isArray(e)?e={intervals:e}:"number"==typeof e&&(e={setnum:e}),e.intervals&&(e.chroma=(0,r.chroma)(e.intervals));return o().find(r=>l(e.name)&&e.name===r.name||l(e.abbreviature)&&-1!==r.abbreviatures.indexOf(e.abbreviature)||e.chroma&&e.chroma===r.chroma||e.setnum&&e.setnum===r.setnum)||m}
},{"./chord-data":"bTgq","../pcset":"tV8k","rsvp":"JJDz"}],"H8fA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chord=s,exports.scale=c;var r=require("../chord-dictionary"),e=require("../note"),o=require("../array"),t=require("../pcset");function s(s){const c=void 0!==(s=(0,o.compact)(s.map(e.name))).find(r=>(0,e.props)(r).alt>0),i=s[0],n=(0,e.chroma)(i),a=[];return(0,t.modes)(s,!1).forEach((o,t)=>{const s=(0,r.find)(o);s.intervals.length&&function(r,o,t){const s=t-n?.5:1,u=1===s?"":"/"+i,p=(0,e.fromMidi)(t,{pitchClass:!0,sharps:c}),d=r.abbreviatures[0];a.push({tonic:p,name:d,mod:u,score:s})}(s,0,t)}),a.sort((r,e)=>e.score-r.score)}function c(r){}
},{"../chord-dictionary":"YQW9","../note":"OiKs","../array":"GVuH","../pcset":"tV8k"}],"xIkR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordToInterval=E,exports.coordToNote=M,exports.decode=p,exports.deprecate=e,exports.distance=U,exports.encode=s,exports.interval=N,exports.isNamed=o,exports.isPitch=n,exports.note=h,exports.tokenizeInterval=w,exports.tokenizeNote=b,exports.transpose=S,exports.stepToLetter=exports.fillStr=exports.altToAcc=exports.accToAlt=void 0;const t=(t,e)=>Array(Math.abs(e)+1).join(t);function e(t,e,o){return function(...n){return console.warn(`${t} is deprecated. Use ${e}.`),o.apply(this,n)}}function o(t){return null!==t&&"object"==typeof t&&"string"==typeof t.name}function n(t){return null!==t&&"object"==typeof t&&"number"==typeof t.step&&"number"==typeof t.alt}exports.fillStr=t;const r=[0,2,4,-1,1,3,5],c=r.map(t=>Math.floor(7*t/12));function s(t){const{step:e,alt:o,oct:n,dir:s=1}=t,a=r[e]+7*o;return void 0===n?[s*a]:[s*a,s*(n-c[e]-4*o)]}const a=[3,0,4,1,5,2,6];function p(t){const[e,o,n]=t,r=a[i(e)],s=Math.floor((e+1)/7);return void 0===o?{step:r,alt:s,dir:n}:{step:r,alt:s,oct:o+4*s+c[r],dir:n}}function i(t){const e=(t+1)%7;return e<0?7+e:e}const l={empty:!0,name:"",pc:"",acc:""},u=new Map,f=t=>"CDEFGAB".charAt(t);exports.stepToLetter=f;const d=e=>e<0?t("b",-e):t("#",e);exports.altToAcc=d;const m=t=>"b"===t[0]?-t.length:t.length;function h(t){const e=u.get(t);if(e)return e;const r="string"==typeof t?A(t):n(t)?h(j(t)):o(t)?h(t.name):l;return u.set(t,r),r}exports.accToAlt=m;const x=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function b(t){const e=x.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function M(t){return h(p(t))}const g=(t,e)=>(t%e+e)%e,y=[0,2,4,5,7,9,11];function A(t){const e=b(t);if(""===e[0]||""!==e[3])return l;const o=e[0],n=e[1],r=e[2],c=(o.charCodeAt(0)+3)%7,a=m(n),p=r.length?+r:void 0,i=s({step:c,alt:a,oct:p}),u=o+n+r,f=o+n,d=(y[c]+a+120)%12,h=void 0===p?g(y[c]+a,12)-1188:y[c]+a+12*(p+1),x=h>=0&&h<=127?h:null;return{empty:!1,acc:n,alt:a,chroma:d,coord:i,freq:void 0===p?null:440*Math.pow(2,(h-69)/12),height:h,letter:o,midi:x,name:u,oct:p,pc:f,step:c}}function j(t){const{step:e,alt:o,oct:n}=t,r=f(e);if(!r)return"";const c=r+d(o);return n||0===n?c+n:c}const v={empty:!0,name:"",acc:""},P="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",T="(AA|A|P|M|m|d|dd)([-+]?\\d+)",$=new RegExp("^"+P+"|"+T+"$");function w(t){const e=$.exec(`${t}`);return null===e?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}const C={};function N(t){return"string"==typeof t?C[t]||(C[t]=z(t)):n(t)?N(I(t)):o(t)?N(t.name):v}const k=[0,2,4,5,7,9,11],q="PMMPPMM";function z(t){const e=w(t);if(""===e[0])return v;const o=+e[0],n=e[1],r=(Math.abs(o)-1)%7,c=q[r];if("M"===c&&"P"===n)return v;const a="M"===c?"majorable":"perfectable",p=""+o+n,i=o<0?-1:1,l=8===o||-8===o?o:i*(r+1),u=G(a,n),f=Math.floor((Math.abs(o)-1)/7);return{empty:!1,name:p,num:o,q:n,step:r,alt:u,dir:i,type:a,simple:l,semitones:i*(k[r]+u+12*f),chroma:(i*(k[r]+u)%12+12)%12,coord:s({step:r,alt:u,oct:f,dir:i}),oct:f}}function E(t,e){const[o,n=0]=t;return N(p(e||7*o+12*n<0?[-o,-n,-1]:[o,n,1]))}function G(t,e){return"M"===e&&"majorable"===t||"P"===e&&"perfectable"===t?0:"m"===e&&"majorable"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*("perfectable"===t?e.length:e.length+1):0}function I(t){const{step:e,alt:o,oct:n=0,dir:r}=t;if(!r)return"";const c=e+1+7*n;return(r<0?"-":"")+(0===c?e+1:c)+L("M"===q[e]?"majorable":"perfectable",o)}function L(e,o){return 0===o?"majorable"===e?"M":"P":-1===o&&"majorable"===e?"m":o>0?t("A",o):t("d","perfectable"===e?o:o+1)}function S(t,e){const o=h(t),n=N(e);if(o.empty||n.empty)return"";const r=o.coord,c=n.coord;return M(1===r.length?[r[0]+c[0]]:[r[0]+c[0],r[1]+c[1]]).name}function U(t,e){const o=h(t),n=h(e);if(o.empty||n.empty)return"";const r=o.coord,c=n.coord,s=c[0]-r[0];return E([s,2===r.length&&2===c.length?c[1]-r[1]:-Math.floor(7*s/12)],n.height===o.height&&null!==n.midi&&null!==o.midi&&o.step>n.step).name}
},{}],"bp6x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abcToScientificNotation=n,exports.distance=s,exports.scientificToAbcNotation=c,exports.tokenize=r,exports.transpose=i,exports.default=void 0;var t=require("@tonaljs/core");const e=(t,e)=>Array(e+1).join(t),o=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function r(t){const e=o.exec(t);return e?[e[1],e[2],e[3]]:["","",""]}function n(t){const[e,o,n]=r(t);if(""===o)return"";let c=4;for(let r=0;r<n.length;r++)c+=","===n.charAt(r)?-1:1;const i="_"===e[0]?e.replace(/_/g,"b"):"^"===e[0]?e.replace(/\^/g,"#"):"";return o.charCodeAt(0)>96?o.toUpperCase()+i+(c+1):o+i+c}function c(o){const r=(0,t.note)(o);if(r.empty||!r.oct&&0!==r.oct)return"";const{letter:n,acc:c,oct:i}=r;return("b"===c[0]?c.replace(/b/g,"_"):c.replace(/#/g,"^"))+(i>4?n.toLowerCase():n)+(5===i?"":i>4?e("'",i-5):e(",",4-i))}function i(e,o){return c((0,t.transpose)(n(e),o))}function s(e,o){return(0,t.distance)(n(e),n(o))}var a={abcToScientificNotation:n,scientificToAbcNotation:c,tokenize:r,transpose:i,distance:s};exports.default=a;
},{"@tonaljs/core":"xIkR"}],"Btqa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compact=c,exports.permutations=f,exports.range=n,exports.rotate=o,exports.shuffle=i,exports.sortedNoteNames=s,exports.sortedUniqNoteNames=u;var t=require("@tonaljs/core");function e(t,e){const r=[];for(;e--;r[e]=e+t);return r}function r(t,e){const r=[];for(;e--;r[e]=t-e);return r}function n(t,n){return t<n?e(t,n-t+1):r(t,t-n+1)}function o(t,e){const r=e.length,n=(t%r+r)%r;return e.slice(n,r).concat(e.slice(0,n))}function c(t){return t.filter(t=>0===t||t)}function s(e){return e.map(e=>(0,t.note)(e)).filter(t=>!t.empty).sort((t,e)=>t.height-e.height).map(t=>t.name)}function u(t){return s(t).filter((t,e,r)=>0===e||t!==r[e-1])}function i(t,e=Math.random){let r,n,o=t.length;for(;o;)r=Math.floor(e()*o--),n=t[o],t[o]=t[r],t[r]=n;return t}function f(t){return 0===t.length?[[]]:f(t.slice(1)).reduce((e,r)=>e.concat(t.map((e,n)=>{const o=r.slice();return o.splice(n,0,t[0]),o})),[])}
},{"@tonaljs/core":"xIkR"}],"L364":[function(require,module,exports) {
"use strict";function t(t,e){const r=[];for(;e--;r[e]=e+t);return r}function e(t,e){const r=[];for(;e--;r[e]=t-e);return r}function r(r,n){return r<n?t(r,n-r+1):e(r,r-n+1)}function n(t,e){const r=e.length,n=(t%r+r)%r;return e.slice(n,r).concat(e.slice(0,n))}function o(t){return t.filter(t=>0===t||t)}function c(t,e=Math.random){let r,n,o=t.length;for(;o;)r=Math.floor(e()*o--),n=t[o],t[o]=t[r],t[r]=n;return t}function u(t){return 0===t.length?[[]]:u(t.slice(1)).reduce((e,r)=>e.concat(t.map((e,n)=>{const o=r.slice();return o.splice(n,0,t[0]),o})),[])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compact=o,exports.permutations=u,exports.range=r,exports.rotate=n,exports.shuffle=c,exports.default=void 0;var s={compact:o,permutations:u,range:r,rotate:n,shuffle:c},f=s;exports.default=f;
},{}],"OdIJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chromaToIntervals=d,exports.chromas=N,exports.filter=b,exports.get=i,exports.isEqual=v,exports.isNoteIncludedIn=j,exports.isSubsetOf=P,exports.isSupersetOf=g,exports.modes=y,exports.pcset=exports.includes=exports.default=exports.EmptyPcset=void 0;var t=require("@tonaljs/collection"),e=require("@tonaljs/core");const r={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]};exports.EmptyPcset=r;const n=t=>Number(t).toString(2),o=t=>parseInt(t,2),s=/^[01]{12}$/;function c(t){return s.test(t)}const u=t=>"number"==typeof t&&t>=0&&t<=4095,m=t=>t&&c(t.chroma),a={[r.chroma]:r};function i(t){const e=c(t)?t:u(t)?n(t):Array.isArray(t)?q(t):m(t)?t.chroma:r.chroma;return a[e]=a[e]||S(e)}const p=(0,e.deprecate)("Pcset.pcset","Pcset.get",i);exports.pcset=p;const l=t=>i(t).chroma,f=t=>i(t).intervals,h=t=>i(t).setNum,x=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function d(t){const e=[];for(let r=0;r<12;r++)"1"===t.charAt(r)&&e.push(x[r]);return e}function N(){return(0,t.range)(2048,4095).map(n)}function y(e,r=!0){const n=i(e).chroma.split("");return(0,t.compact)(n.map((e,o)=>{const s=(0,t.rotate)(o,n);return r&&"0"===s[0]?null:s.join("")}))}function v(t,e){return i(t).setNum===i(e).setNum}function P(t){const e=i(t).setNum;return t=>{const r=i(t).setNum;return e&&e!==r&&(r&e)===r}}function g(t){const e=i(t).setNum;return t=>{const r=i(t).setNum;return e&&e!==r&&(r|e)===r}}function j(t){const r=i(t);return t=>{const n=(0,e.note)(t);return r&&!n.empty&&"1"===r.chroma.charAt(n.chroma)}}const I=j;function b(t){const e=j(t);return t=>t.filter(e)}exports.includes=I;var M={get:i,chroma:l,num:h,intervals:f,chromas:N,isSupersetOf:g,isSubsetOf:P,isNoteIncludedIn:j,isEqual:v,filter:b,modes:y,pcset:p};function O(e){const r=e.split("");return r.map((e,n)=>(0,t.rotate)(n,r).join(""))}function S(t){const e=o(t),r=O(t).map(o).filter(t=>t>=2048).sort()[0];return{empty:!1,name:"",setNum:e,chroma:t,normalized:n(r),intervals:d(t)}}function q(t){if(0===t.length)return r.chroma;let n;const o=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<t.length;r++)(n=(0,e.note)(t[r])).empty&&(n=(0,e.interval)(t[r])),n.empty||(o[n.chroma]=1);return o.join("")}exports.default=M;
},{"@tonaljs/collection":"L364","@tonaljs/core":"xIkR"}],"ZX2a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=h,exports.addAlias=A,exports.all=i,exports.get=t,exports.keys=o,exports.names=d,exports.removeAll=u,exports.symbols=r,exports.entries=exports.default=exports.chordType=void 0;var m=require("@tonaljs/core"),P=require("@tonaljs/pcset");const M=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],e={...P.EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]};let s=[],n={};function t(m){return n[m]||e}const a=(0,m.deprecate)("ChordType.chordType","ChordType.get",t);function d(){return s.map(m=>m.name).filter(m=>m)}function r(){return s.map(m=>m.aliases[0]).filter(m=>m)}function o(){return Object.keys(n)}function i(){return s.slice()}exports.chordType=a;const b=(0,m.deprecate)("ChordType.entries","ChordType.all",i);function u(){s=[],n={}}function h(m,M,e){const t=l(m),a={...(0,P.get)(m),name:e||"",quality:t,intervals:m,aliases:M};s.push(a),a.name&&(n[a.name]=a),n[a.setNum]=a,n[a.chroma]=a,a.aliases.forEach(m=>A(a,m))}function A(m,P){n[P]=m}function l(m){const P=P=>-1!==m.indexOf(P);return P("5A")?"Augmented":P("3M")?"Major":P("5d")?"Diminished":P("3m")?"Minor":"Unknown"}exports.entries=b,M.forEach(([m,P,M])=>h(m.split(" "),M.split(" "),P)),s.sort((m,P)=>m.setNum-P.setNum);var p={names:d,symbols:r,get:t,all:i,add:h,removeAll:u,keys:o,entries:b,chordType:a};exports.default=p;
},{"@tonaljs/core":"xIkR","@tonaljs/pcset":"OdIJ"}],"b7CE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detect=n,exports.default=void 0;var e=require("@tonaljs/chord-type"),t=require("@tonaljs/core"),r=require("@tonaljs/pcset");const o=e=>{const r=e.reduce((e,r)=>{const o=(0,t.note)(r).chroma;return void 0!==o&&(e[o]=e[o]||(0,t.note)(r).name),e},{});return e=>r[e]};function n(e){const r=e.map(e=>(0,t.note)(e).pc).filter(e=>e);return 0===t.note.length?[]:s(r,1).filter(e=>e.weight).sort((e,t)=>t.weight-e.weight).map(e=>e.name)}function s(n,s){const a=n[0],c=(0,t.note)(a).chroma,i=o(n),u=(0,r.modes)(n,!1),h=[];return u.forEach((t,r)=>{(0,e.all)().filter(e=>e.chroma===t).forEach(e=>{const t=e.aliases[0],o=i(r);r!==c?h.push({weight:.5*s,name:`${o}${t}/${a}`}):h.push({weight:1*s,name:`${o}${t}`})})}),h}var a={detect:n};exports.default=a;
},{"@tonaljs/chord-type":"ZX2a","@tonaljs/core":"xIkR","@tonaljs/pcset":"OdIJ"}],"pHuU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=c,exports.addAlias=p,exports.all=r,exports.get=M,exports.keys=d,exports.names=o,exports.removeAll=l,exports.scaleType=exports.entries=exports.default=exports.NoScaleType=void 0;var m=require("@tonaljs/core"),e=require("@tonaljs/pcset");const n=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],P={...e.EmptyPcset,intervals:[],aliases:[]};exports.NoScaleType=P;let i=[],a={};function o(){return i.map(m=>m.name)}function M(m){return a[m]||P}const t=(0,m.deprecate)("ScaleDictionary.scaleType","ScaleType.get",M);function r(){return i.slice()}exports.scaleType=t;const s=(0,m.deprecate)("ScaleDictionary.entries","ScaleType.all",r);function d(){return Object.keys(a)}function l(){i=[],a={}}function c(m,n,P=[]){const o={...(0,e.get)(m),name:n,intervals:m,aliases:P};return i.push(o),a[o.name]=o,a[o.setNum]=o,a[o.chroma]=o,o.aliases.forEach(m=>p(o,m)),o}function p(m,e){a[e]=m}exports.entries=s,n.forEach(([m,e,...n])=>c(m.split(" "),e,n));var h={names:o,get:M,all:r,add:c,removeAll:l,keys:d,entries:s,scaleType:t};exports.default=h;
},{"@tonaljs/core":"xIkR","@tonaljs/pcset":"OdIJ"}],"nB9l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chordScales=d,exports.extended=m,exports.get=i,exports.getChord=p,exports.reduced=f,exports.tokenize=a,exports.transpose=l,Object.defineProperty(exports,"detect",{enumerable:!0,get:function(){return e.detect}}),exports.default=exports.chord=void 0;var e=require("@tonaljs/chord-detect"),t=require("@tonaljs/chord-type"),r=require("@tonaljs/core"),o=require("@tonaljs/pcset"),n=require("@tonaljs/scale-type");const s={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]},c=/^(6|64|7|9|11|13)$/;function a(e){const[t,o,n,s]=(0,r.tokenizeNote)(e);return""===t?["",e]:"A"===t&&"ug"===s?["","aug"]:s||"4"!==n&&"5"!==n?c.test(n)?[t+o,n+s]:[t+o+n,s]:[t+o,n]}function i(e){if(""===e)return s;if(Array.isArray(e)&&2===e.length)return p(e[1],e[0]);{const[t,r]=a(e),o=p(r,t);return o.empty?p(e):o}}function p(e,o,n){const c=(0,t.get)(e),a=(0,r.note)(o||""),i=(0,r.note)(n||"");if(c.empty||o&&a.empty||n&&i.empty)return s;const p=(0,r.distance)(a.pc,i.pc),u=c.intervals.indexOf(p)+1;if(!i.empty&&!u)return s;const l=Array.from(c.intervals);for(let t=1;t<u;t++){const e=l[0][0],t=l[0][1],r=parseInt(e,10)+7;l.push(`${r}${t}`),l.shift()}const d=a.empty?[]:l.map(e=>(0,r.transpose)(a,e));e=-1!==c.aliases.indexOf(e)?e:c.aliases[0];const m=`${a.empty?"":a.pc}${e}${i.empty||u<=1?"":"/"+i.pc}`,f=`${o?a.pc+" ":""}${c.name}${u>1&&n?" over "+i.pc:""}`;return{...c,name:f,symbol:m,type:c.name,root:i.name,intervals:l,rootDegree:u,tonic:a.name,notes:d}}const u=(0,r.deprecate)("Chord.chord","Chord.get",i);function l(e,t){const[o,n]=a(e);return o?(0,r.transpose)(o,t)+n:e}function d(e){const t=i(e),r=(0,o.isSupersetOf)(t.chroma);return(0,n.all)().filter(e=>r(e.chroma)).map(e=>e.name)}function m(e){const r=i(e),n=(0,o.isSupersetOf)(r.chroma);return(0,t.all)().filter(e=>n(e.chroma)).map(e=>r.tonic+e.aliases[0])}function f(e){const r=i(e),n=(0,o.isSubsetOf)(r.chroma);return(0,t.all)().filter(e=>n(e.chroma)).map(e=>r.tonic+e.aliases[0])}exports.chord=u;var h={getChord:p,get:i,detect:e.detect,chordScales:d,extended:m,reduced:f,tokenize:a,transpose:l,chord:u};exports.default=h;
},{"@tonaljs/chord-detect":"b7CE","@tonaljs/chord-type":"ZX2a","@tonaljs/core":"xIkR","@tonaljs/pcset":"OdIJ","@tonaljs/scale-type":"pHuU"}],"DC9A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=a,exports.names=n,exports.shorthands=r,exports.value=exports.fraction=exports.default=void 0;const e=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],t=[];e.forEach(([e,t,o])=>c(e,t,o));const o={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function n(){return t.reduce((e,t)=>(t.names.forEach(t=>e.push(t)),e),[])}function r(){return t.map(e=>e.shorthand)}const s=/^([^.]+)(\.*)$/;function a(e){const[n,r,a]=s.exec(e)||[],u=t.find(e=>e.shorthand===r||e.names.includes(r));if(!u)return o;const h=l(u.fraction,a.length),i=h[0]/h[1];return{...u,name:e,dots:a,value:i,fraction:h}}const u=e=>a(e).value;exports.value=u;const h=e=>a(e).fraction;exports.fraction=h;var i={names:n,shorthands:r,get:a,value:u,fraction:h};function c(e,o,n){t.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:o,names:n})}function l(e,t){const o=Math.pow(2,t);let n=e[0]*o,r=e[1]*o;const s=n;for(let a=0;a<t;a++)n+=s/Math.pow(2,a+1);for(;n%2==0&&r%2==0;)n/=2,r/=2;return[n,r]}var d=i;exports.default=d;
},{}],"ETrD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromSemitones=u,exports.invert=c,exports.names=e,exports.simplify=i,exports.transposeFifths=v,exports.substract=exports.semitones=exports.quality=exports.num=exports.name=exports.get=exports.distance=exports.default=exports.addTo=exports.add=void 0;var t=require("@tonaljs/core");function e(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}const o=t.interval;exports.get=o;const s=e=>(0,t.interval)(e).name;exports.name=s;const r=e=>(0,t.interval)(e).semitones;exports.semitones=r;const n=e=>(0,t.interval)(e).q;exports.quality=n;const a=e=>(0,t.interval)(e).num;function i(e){const o=(0,t.interval)(e);return o.empty?"":o.simple+o.q}function c(e){const o=(0,t.interval)(e);if(o.empty)return"";const s=(7-o.step)%7,r="perfectable"===o.type?-o.alt:-(o.alt+1);return(0,t.interval)({step:s,alt:r,oct:o.oct,dir:o.dir}).name}exports.num=a;const p=[1,2,2,3,3,4,5,5,6,6,7,7],m="P m M m M P d P m M m M".split(" ");function u(t){const e=t<0?-1:1,o=Math.abs(t),s=o%12,r=Math.floor(o/12);return e*(p[s]+7*r)+m[s]}const l=t.distance;exports.distance=l;const d=M((t,e)=>[t[0]+e[0],t[1]+e[1]]);exports.add=d;const x=t=>e=>d(t,e);exports.addTo=x;const f=M((t,e)=>[t[0]-e[0],t[1]-e[1]]);function v(e,s){const r=o(e);if(r.empty)return"";const[n,a,i]=r.coord;return(0,t.coordToInterval)([n+s,a,i]).name}exports.substract=f;var y={names:e,get:o,name:s,num:a,semitones:r,quality:n,fromSemitones:u,distance:l,invert:c,simplify:i,add:d,addTo:x,substract:f,transposeFifths:v};function M(e){return(o,s)=>{const r=(0,t.interval)(o).coord,n=(0,t.interval)(s).coord;if(r&&n){const o=e(r,n);return(0,t.coordToInterval)(o).name}}}exports.default=y;
},{"@tonaljs/core":"xIkR"}],"Lbsc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.freqToMidi=s,exports.isMidi=o,exports.midiToFreq=e,exports.midiToNoteName=d,exports.toMidi=i,exports.default=void 0;var t=require("@tonaljs/core");function o(t){return+t>=0&&+t<=127}function i(i){if(o(i))return+i;const e=(0,t.note)(i);return e.empty?null:e.midi}function e(t,o=440){return Math.pow(2,(t-69)/12)*o}const r=Math.log(2),n=Math.log(440);function s(t){const o=12*(Math.log(t)-n)/r+69;return Math.round(100*o)/100}const u="C C# D D# E F F# G G# A A# B".split(" "),a="C Db D Eb E F Gb G Ab A Bb B".split(" ");function d(t,o={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const i=(!0===o.sharps?u:a)[t%12];return o.pitchClass?i:i+(Math.floor(t/12)-1)}var p={isMidi:o,toMidi:i,midiToFreq:e,midiToNoteName:d,freqToMidi:s};exports.default=p;
},{"@tonaljs/core":"xIkR"}],"uPPy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enharmonic=_,exports.fromFreq=u,exports.fromFreqSharps=l,exports.fromMidi=h,exports.fromMidiSharps=N,exports.names=n,exports.sortedNames=j,exports.sortedUniqNames=A,exports.transposeFifths=B,exports.transposeFrom=exports.transposeBy=exports.transpose=exports.trFrom=exports.trFifths=exports.trBy=exports.tr=exports.simplify=exports.pitchClass=exports.octave=exports.name=exports.midi=exports.get=exports.freq=exports.descending=exports.default=exports.chroma=exports.ascending=exports.accidentals=void 0;var t=require("@tonaljs/core"),r=require("@tonaljs/midi");const o=["C","D","E","F","G","A","B"],e=t=>t.name,s=r=>r.map(t.note).filter(t=>!t.empty);function n(t){return void 0===t?o.slice():Array.isArray(t)?s(t).map(e):[]}const i=t.note;exports.get=i;const p=t=>i(t).name;exports.name=p;const a=t=>i(t).pc;exports.pitchClass=a;const c=t=>i(t).acc;exports.accidentals=c;const m=t=>i(t).oct;exports.octave=m;const x=t=>i(t).midi;exports.midi=x;const d=t=>i(t).freq;exports.freq=d;const f=t=>i(t).chroma;function h(t){return(0,r.midiToNoteName)(t)}function u(t){return(0,r.midiToNoteName)((0,r.freqToMidi)(t))}function l(t){return(0,r.midiToNoteName)((0,r.freqToMidi)(t),{sharps:!0})}function N(t){return(0,r.midiToNoteName)(t,{sharps:!0})}exports.chroma=f;const y=t.transpose;exports.transpose=y;const F=t.transpose;exports.tr=F;const q=t=>r=>y(r,t);exports.transposeBy=q;const g=q;exports.trBy=g;const v=t=>r=>y(t,r);exports.transposeFrom=v;const T=v;function B(r,o){const e=i(r);if(e.empty)return"";const[s,n]=e.coord;return(void 0===n?(0,t.coordToNote)([s+o]):(0,t.coordToNote)([s+o,n])).name}exports.trFrom=T;const M=B;exports.trFifths=M;const C=(t,r)=>t.height-r.height;exports.ascending=C;const S=(t,r)=>r.height-t.height;function j(t,r){return r=r||C,s(t).sort(r).map(e)}function A(t){return j(t,C).filter((t,r,o)=>0===r||t!==o[r-1])}exports.descending=S;const U=t=>{const o=i(t);return o.empty?"":(0,r.midiToNoteName)(o.midi||o.chroma,{sharps:o.alt>0,pitchClass:null===o.midi})};function _(t,o){const e=i(t);if(e.empty)return"";const s=i(o||(0,r.midiToNoteName)(e.midi||e.chroma,{sharps:e.alt<0,pitchClass:!0}));if(s.empty||s.chroma!==e.chroma)return"";if(void 0===e.oct)return s.pc;const n=e.chroma-e.alt,p=s.chroma-s.alt,a=n>11||p<0?-1:n<0||p>11?1:0,c=e.oct+a;return s.pc+c}exports.simplify=U;var b={names:n,get:i,name:p,pitchClass:a,accidentals:c,octave:m,midi:x,ascending:C,descending:S,sortedNames:j,sortedUniqNames:A,fromMidi:h,fromMidiSharps:N,freq:d,fromFreq:u,fromFreqSharps:l,chroma:f,transpose:y,tr:F,transposeBy:q,trBy:g,transposeFrom:v,trFrom:T,transposeFifths:B,trFifths:M,simplify:U,enharmonic:_};exports.default=b;
},{"@tonaljs/core":"xIkR","@tonaljs/midi":"Lbsc"}],"Byk2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=n,exports.names=a,exports.tokenize=i,exports.default=void 0;var e=require("@tonaljs/core");const t={empty:!0,name:"",chordType:""},r={};function n(o){return"string"==typeof o?r[o]||(r[o]=l(o)):"number"==typeof o?n(p[o]||""):(0,e.isPitch)(o)?s(o):(0,e.isNamed)(o)?n(o.name):t}const o=(0,e.deprecate)("RomanNumeral.romanNumeral","RomanNumeral.get",n);function a(e=!0){return(e?p:m).slice()}function s(t){return n((0,e.altToAcc)(t.alt)+p[t.step])}const c=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function i(e){return c.exec(e)||["","","",""]}const u="I II III IV V VI VII",p=u.split(" "),m=u.toLowerCase().split(" ");function l(r){const[n,o,a,s]=i(r);if(!a)return t;const c=a.toUpperCase(),u=p.indexOf(c),m=(0,e.accToAlt)(o);return{empty:!1,name:n,roman:a,interval:(0,e.interval)({step:u,alt:m,dir:1}).name,acc:o,chordType:s,alt:m,step:u,major:a===c,oct:0,dir:1}}var I={names:a,get:n,romanNumeral:o};exports.default=I;
},{"@tonaljs/core":"xIkR"}],"MKQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.majorKey=y,exports.majorTonicFromKeySignature=V,exports.minorKey=b,exports.default=void 0;var t=require("@tonaljs/core"),n=require("@tonaljs/note"),o=require("@tonaljs/roman-numeral");const e=Object.freeze([]),i={type:"major",tonic:"",alteration:0,keySignature:""},r={tonic:"",grades:e,intervals:e,scale:e,chords:e,chordsHarmonicFunction:e,chordScales:e},a={...i,...r,type:"major",minorRelative:"",scale:e,secondaryDominants:e,secondaryDominantsMinorRelative:e,substituteDominants:e,substituteDominantsMinorRelative:e},m={...i,type:"minor",relativeMajor:"",natural:r,harmonic:r,melodic:r},s=(t,n,o="")=>n.map((n,e)=>`${t[e]}${o}${n}`);function l(n,e,i,r){return a=>{const m=n.map(t=>(0,o.get)(t).interval||""),l=m.map(n=>(0,t.transpose)(a,n));return{tonic:a,grades:n,intervals:m,scale:l,chords:s(l,e),chordsHarmonicFunction:i.slice(),chordScales:s(l,r," ")}}}const I=(n,o)=>{const e=(0,t.note)(n),i=(0,t.note)(o);return e.empty||i.empty?0:i.coord[0]-e.coord[0]},c=l("I II III IV V VI VII".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),p=l("I II bIII IV V bVI bVII".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),u=l("I II bIII IV V bVI VII".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),d=l("I II bIII IV V VI VII".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function y(n){const e=(0,t.note)(n).pc;if(!e)return a;const i=c(e),r=I("C",e),m=e=>{const i=(0,o.get)(e);return i.empty?"":(0,t.transpose)(n,i.interval)+i.chordType};return{...i,type:"major",minorRelative:(0,t.transpose)(e,"-3m"),alteration:r,keySignature:(0,t.altToAcc)(r),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(m),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(m),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(m),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(m)}}function b(n){const o=(0,t.note)(n).pc;if(!o)return m;const e=I("C",o)-3;return{type:"minor",tonic:o,relativeMajor:(0,t.transpose)(o,"3m"),alteration:e,keySignature:(0,t.altToAcc)(e),natural:p(o),harmonic:u(o),melodic:d(o)}}function V(o){return"number"==typeof o?(0,n.transposeFifths)("C",o):"string"==typeof o&&/^b+|#+$/.test(o)?(0,n.transposeFifths)("C",(0,t.accToAlt)(o)):null}var j={majorKey:y,majorTonicFromKeySignature:V,minorKey:b};exports.default=j;
},{"@tonaljs/core":"xIkR","@tonaljs/note":"uPPy","@tonaljs/roman-numeral":"Byk2"}],"NDv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=c,exports.distance=j,exports.get=p,exports.names=u,exports.notes=f,exports.relativeTonic=g,exports.triads=exports.seventhChords=exports.mode=exports.entries=exports.default=void 0;var e=require("@tonaljs/collection"),t=require("@tonaljs/core"),r=require("@tonaljs/interval"),n=require("@tonaljs/pcset"),o=require("@tonaljs/scale-type");const s=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],a={...n.EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},i=s.map(x),m={};function p(e){return"string"==typeof e?m[e.toLowerCase()]||a:e&&e.name?p(e.name):a}i.forEach(e=>{m[e.name]=e,e.aliases.forEach(t=>{m[t]=e})});const l=(0,t.deprecate)("Mode.mode","Mode.get",p);function c(){return i.slice()}exports.mode=l;const d=(0,t.deprecate)("Mode.mode","Mode.all",c);function u(){return i.map(e=>e.name)}function x(e){const[t,r,n,s,a,i,m]=e,p=m?[m]:[],l=Number(r).toString(2);return{empty:!1,intervals:(0,o.get)(s).intervals,modeNum:t,chroma:l,normalized:l,name:s,setNum:r,alt:n,triad:a,seventh:i,aliases:p}}function f(e,r){return p(e).intervals.map(e=>(0,t.transpose)(r,e))}function v(r){return(n,o)=>{const s=p(n);if(s.empty)return[];const a=(0,e.rotate)(s.modeNum,r),i=s.intervals.map(e=>(0,t.transpose)(o,e));return a.map((e,t)=>i[t]+e)}}exports.entries=d;const h=v(s.map(e=>e[4]));exports.triads=h;const y=v(s.map(e=>e[5]));function j(e,t){const n=p(t),o=p(e);return n.empty||o.empty?"":(0,r.simplify)((0,r.transposeFifths)("1P",o.alt-n.alt))}function g(e,r,n){return(0,t.transpose)(n,j(e,r))}exports.seventhChords=y;var M={get:p,names:u,all:c,distance:j,relativeTonic:g,notes:f,triads:h,seventhChords:y,entries:d,mode:l};exports.default=M;
},{"@tonaljs/collection":"L364","@tonaljs/core":"xIkR","@tonaljs/interval":"ETrD","@tonaljs/pcset":"OdIJ","@tonaljs/scale-type":"pHuU"}],"Bfuo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromRomanNumerals=o,exports.toRomanNumerals=a,exports.default=void 0;var e=require("@tonaljs/chord"),r=require("@tonaljs/core"),t=require("@tonaljs/roman-numeral");function o(e,o){return o.map(t.get).map(t=>(0,r.transpose)(e,(0,r.interval)(t))+t.chordType)}function a(o,a){return a.map(a=>{const[n,s]=(0,e.tokenize)(a),u=(0,r.distance)(o,n);return(0,t.get)((0,r.interval)(u)).name+s})}var n={fromRomanNumerals:o,toRomanNumerals:a};exports.default=n;
},{"@tonaljs/chord":"nB9l","@tonaljs/core":"xIkR","@tonaljs/roman-numeral":"Byk2"}],"N8VL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chromatic=o,exports.numeric=r,exports.default=void 0;var e=require("@tonaljs/collection"),t=require("@tonaljs/midi");function r(r){const o=(0,e.compact)(r.map(t.toMidi));return r.length&&o.length===r.length?o.reduce((t,r)=>{const o=t[t.length-1];return t.concat((0,e.range)(o,r).slice(1))},[o[0]]):[]}function o(e,o){return r(e).map(e=>(0,t.midiToNoteName)(e,o))}var n={numeric:r,chromatic:o};exports.default=n;
},{"@tonaljs/collection":"L364","@tonaljs/midi":"Lbsc"}],"nOdl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extended=p,exports.get=m,exports.modeNames=h,exports.rangeOf=y,exports.reduced=f,exports.scaleChords=l,exports.scaleNotes=d,exports.tokenize=c,exports.scale=exports.names=exports.default=void 0;var e=require("@tonaljs/chord-type"),t=require("@tonaljs/collection"),n=require("@tonaljs/core"),r=require("@tonaljs/note"),o=require("@tonaljs/pcset"),s=require("@tonaljs/scale-type");const a={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function c(e){if("string"!=typeof e)return["",""];const t=e.indexOf(" "),r=(0,n.note)(e.substring(0,t));if(r.empty){const t=(0,n.note)(e);return t.empty?["",e]:[t.name,""]}const o=e.substring(r.name.length+1);return[r.name,o.length?o:""]}const i=s.names;function m(e){const t=Array.isArray(e)?e:c(e),r=(0,n.note)(t[0]).name,o=(0,s.get)(t[1]);if(o.empty)return a;const i=o.name,m=r?o.intervals.map(e=>(0,n.transpose)(r,e)):[],u=r?r+" "+i:i;return{...o,name:u,type:i,tonic:r,notes:m}}exports.names=i;const u=(0,n.deprecate)("Scale.scale","Scale.get",m);function l(t){const n=m(t),r=(0,o.isSubsetOf)(n.chroma);return(0,e.all)().filter(e=>r(e.chroma)).map(e=>e.aliases[0])}function p(e){const t=m(e),n=(0,o.isSupersetOf)(t.chroma);return(0,s.all)().filter(e=>n(e.chroma)).map(e=>e.name)}function f(e){const t=(0,o.isSubsetOf)(m(e).chroma);return(0,s.all)().filter(e=>t(e.chroma)).map(e=>e.name)}function d(e){const o=e.map(e=>(0,n.note)(e).pc).filter(e=>e),s=o[0],a=(0,r.sortedUniqNames)(o);return(0,t.rotate)(a.indexOf(s),a)}function h(e){const t=m(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return(0,o.modes)(t.chroma).map((e,t)=>{const r=m(e).name;return r?[n[t],r]:["",""]}).filter(e=>e[0])}function x(e){const t=Array.isArray(e)?d(e):m(e).notes,o=t.map(e=>(0,n.note)(e).chroma);return e=>{const s="number"==typeof e?(0,n.note)((0,r.fromMidi)(e)):(0,n.note)(e),a=s.height;if(void 0===a)return;const c=a%12,i=o.indexOf(c);return-1!==i?(0,r.enharmonic)(s.name,t[i]):void 0}}function y(e){const r=x(e);return(e,o)=>{const s=(0,n.note)(e).height,a=(0,n.note)(o).height;return void 0===s||void 0===a?[]:(0,t.range)(s,a).map(r).filter(e=>e)}}exports.scale=u;var g={get:m,names:i,extended:p,modeNames:h,reduced:f,scaleChords:l,scaleNotes:d,tokenize:c,rangeOf:y,scale:u};exports.default=g;
},{"@tonaljs/chord-type":"ZX2a","@tonaljs/collection":"L364","@tonaljs/core":"xIkR","@tonaljs/note":"uPPy","@tonaljs/pcset":"OdIJ","@tonaljs/scale-type":"pHuU"}],"ogkV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=s,exports.names=t,exports.parse=i,exports.default=void 0;const e={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},r=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function t(){return r.slice()}const n=/^(\d?\d(?:\+\d)*)\/(\d)$/,o=new Map;function s(e){const r=o.get(e);if(r)return r;const t=a(i(e));return o.set(e,t),t}function i(e){if("string"==typeof e){const[r,t,o]=n.exec(e)||[];return i([t,o])}const[r,t]=e,o=+t;if("number"==typeof r)return[r,o];const s=r.split("+").map(e=>+e);return 1===s.length?[s[0],o]:[s,o]}var p={names:t,parse:i,get:s};function a([r,t]){const n=Array.isArray(r)?r.reduce((e,r)=>e+r,0):r,o=t;return 0===n||0===o?e:{empty:!1,name:Array.isArray(r)?`${r.join("+")}/${t}`:`${r}/${t}`,type:4===o||2===o?"simple":8===o&&n%3==0?"compound":"irregular",upper:n,lower:o,additive:Array.isArray(r)?r:[]}}var u=p;exports.default=u;
},{}],"oU09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={ChordDictionary:!0,PcSet:!0,ScaleDictionary:!0,Tonal:!0,AbcNotation:!0,Array:!0,Chord:!0,ChordType:!0,Collection:!0,Core:!0,DurationValue:!0,Interval:!0,Key:!0,Midi:!0,Mode:!0,Note:!0,Pcset:!0,Progression:!0,Range:!0,RomanNumeral:!0,Scale:!0,ScaleType:!0,TimeSignature:!0};Object.defineProperty(exports,"AbcNotation",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Chord",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"ChordType",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Collection",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"DurationValue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Interval",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Key",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Midi",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Mode",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Note",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Pcset",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Progression",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Range",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"RomanNumeral",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"ScaleType",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"TimeSignature",{enumerable:!0,get:function(){return g.default}}),exports.Core=exports.Array=exports.Tonal=exports.ScaleDictionary=exports.PcSet=exports.ChordDictionary=void 0;var r=q(require("@tonaljs/abc-notation")),t=m(require("@tonaljs/array"));exports.Array=t;var n=q(require("@tonaljs/chord")),o=q(require("@tonaljs/chord-type")),u=q(require("@tonaljs/collection")),a=m(require("@tonaljs/core"));exports.Core=a,Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===a[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return a[r]}}))});var i=q(require("@tonaljs/duration-value")),l=q(require("@tonaljs/interval")),c=q(require("@tonaljs/key")),s=q(require("@tonaljs/midi")),f=q(require("@tonaljs/mode")),p=q(require("@tonaljs/note")),d=q(require("@tonaljs/pcset")),y=q(require("@tonaljs/progression")),b=q(require("@tonaljs/range")),j=q(require("@tonaljs/roman-numeral")),x=q(require("@tonaljs/scale")),P=q(require("@tonaljs/scale-type")),g=q(require("@tonaljs/time-signature"));function O(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(O=function(e){return e?t:r})(e)}function m(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function q(e){return e&&e.__esModule?e:{default:e}}const v=a;exports.Tonal=v;const h=d.default;exports.PcSet=h;const C=o.default;exports.ChordDictionary=C;const S=P.default;exports.ScaleDictionary=S;
},{"@tonaljs/abc-notation":"bp6x","@tonaljs/array":"Btqa","@tonaljs/chord":"nB9l","@tonaljs/chord-type":"ZX2a","@tonaljs/collection":"L364","@tonaljs/core":"xIkR","@tonaljs/duration-value":"DC9A","@tonaljs/interval":"ETrD","@tonaljs/key":"MKQd","@tonaljs/midi":"Lbsc","@tonaljs/mode":"NDv5","@tonaljs/note":"uPPy","@tonaljs/pcset":"OdIJ","@tonaljs/progression":"Bfuo","@tonaljs/range":"N8VL","@tonaljs/roman-numeral":"Byk2","@tonaljs/scale":"nOdl","@tonaljs/scale-type":"pHuU","@tonaljs/time-signature":"ogkV"}],"SiGv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mixRGB=exports.toRGBA=exports.parseRGB=exports.range=void 0;var r=function(r,t){return Array(t-r+1).fill().map(function(t,o){return o+r})};exports.range=r;var t=function(r){if("string"!=typeof r||!r.match(/^#[0-9a-f]{6}$/i))return null;var t=r.toLowerCase();return{r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}};exports.parseRGB=t;var o=function(r,o){var a=t(r);return a?"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(o,")"):"transparent"};exports.toRGBA=o;var a=function(r,o,a){var n=t(r),e=t(o);return n?e?"rgb(".concat(Math.floor(n.r*a+e.r*(1-a)),",").concat(Math.floor(n.g*a+e.g*(1-a)),",").concat(Math.floor(n.b*a+e.b*(1-a)),")"):"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(a,")"):o};exports.mixRGB=a;
},{}],"o9mZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setAccidentalKeyboard=E,exports.generateKeyboard=q,exports.generateKeyboard2=A,exports.setPitchWheel=N,exports.setModWheel=D,exports.render=R,exports.renderAccidental=j;var t=r(require("tonal/note")),e=require("./utils"),o=require("./settings"),n=require("@tonaljs/tonal");function r(t){return t&&t.__esModule?t:{default:t}}var i=document.getElementById("keyboard"),a=document.getElementById("keyboardNotes"),c=document.getElementById("notesDisplay"),s=5,l=40,d=180,f=24,h=120,p=5,u=30,m=2,w=10,x=5,g=10,y=l,b=d,v=2*d-80,S="#222222",k=!0,C=function(t,e,o){return'\n<g id="note-'.concat(t.midi,'" class="note white" transform="translate(').concat(e,',0)" style="color: ').concat(o,';" \n    >\n  <rect class="piano-key" width="').concat(l,'" height="').concat(d+s,'" x="0" y="').concat(-s,'" rx="').concat(s,'" ry="').concat(s,'"></rect>\n  <circle class="piano-tonic" cx="').concat(l/2,'" cy="').concat(d-u,'" r="').concat(p,'"></circle>\n\n<text class="piano-key-name" x="').concat(l/2,'" y="').concat(d-m,'" text-anchor="middle">').concat(t.name,"</text>\n</g>\n\n")},G=function(t,e,o){return'<g id="note-'.concat(t.midi,'" class="note black" transform="translate(').concat(e-f/2,',0)" style="color: ').concat(o,';">\n  <rect class="piano-key" width="').concat(f,'" height="').concat(h+s,'" x="0" y="').concat(-s,'" rx="').concat(s,'" ry="').concat(s,'"></rect>\n  <circle class="piano-tonic" cx="').concat(f/2,'" cy="').concat(h-u,'" r="').concat(p,'"></circle>\n</g>')},W=l/2-10,B=function(t,e,o){return'\n<g id="note-'.concat(t.midi,'-display" class="note display" transform="translate(').concat(e,',0)" style="color: white;" \n>\n<text class="piano-key-name-played-notes" x="').concat(W,'" y="').concat(d-m-140,'" text-anchor="middle">').concat(n.Midi.midiToNoteName(t.midi,{pitchClass:!0,sharps:k}),"</text>\n</g>\n")},T=function(t,e){return'<g id="'.concat(t,'" transform="translate(').concat(e,',0)">\n  <rect class="wheelSocket" width="').concat(y,'" height="').concat(b,'" rx="').concat(w,'" ry="').concat(w,'" />\n  <g transform="translate(').concat(x,',0)" clip-path="url(#wheelClip)">\n    <rect class="wheel" transform="translate(0, ').concat(-b/2,')" width="').concat(y-2*x,'" height="').concat(2*b,'"></rect>\n  </g>\n</g>\n')},O=function(t,e){return'<svg width="100%" viewBox="'.concat(-e.width," 0 ").concat(t.width+e.width," ").concat(t.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <filter id="insetKey">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="-7"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="5" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="0.4" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="5"/>\n      </feComponentTransfer>\n      <feBlend mode="soft-light" in="shadow" in2="SourceGraphic"/>                        \x3c!-- Put shadow over original object --\x3e\n    </filter>\n    <filter id="insetWheel">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="0"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="2" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="1" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="1.5"/>\n      </feComponentTransfer>\n      <feBlend mode="normal" in="shadow" in2="SourceGraphic" />\n    </filter>\n    <linearGradient id="whiteKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#bbbbbb" />\n      <stop offset="8%"  stop-color="#eeeeee" />\n      <stop offset="90%" stop-color="#ffffff" />\n      <stop offset="91%" stop-color="#eeeeee" />\n    </linearGradient>\n    <linearGradient id="blackKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="16%" stop-color="#222222" />\n      <stop offset="80%" stop-color="#444444" />\n      <stop offset="80.5%" stop-color="#aaaaaa" />\n      <stop offset="85%" stop-color="#222222" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    <linearGradient id="wheelGradient" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="45%" stop-color="#555555" />\n      <stop offset="46%" stop-color="#111111" />\n      <stop offset="49.5%" stop-color="#333333" />\n      <stop offset="50%" stop-color="#bbbbbb" />\n      <stop offset="50.5%" stop-color="#444444" />\n      <stop offset="51%" stop-color="#555555" />\n      <stop offset="54%" stop-color="#666666" />\n      <stop offset="55%" stop-color="#333333" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    \n    <clipPath id="wheelClip">\n      <rect width="').concat(y-2*x,'" height="').concat(b-2,'" y="1" rx="').concat(w/2,'" ry="').concat(w/2,'" />\n    </clipPath>\n  </defs>\n\n  <g id="wheels" transform="translate(').concat(-e.width,',0)">\n    ').concat(e.markup,'\n  </g>\n\n  <g id="board" transform="translate(0,0)">\n    <rect id="keyboard-bg" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n    ').concat(t.markup,'\n    <rect id="board-border" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n  </g>\n</svg>\n')},M=function(t,e){return'<svg width="100%" viewBox="'.concat(-e.width," 0 ").concat(t.width+e.width," ").concat(t.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke="transparent"\nstroke-width="0px">\n  <defs>\n    <filter id="insetKey">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="-7"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="5" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="0.4" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="5"/>\n      </feComponentTransfer>\n      <feBlend mode="soft-light" in="shadow" in2="SourceGraphic"/>                        \x3c!-- Put shadow over original object --\x3e\n    </filter>\n    <filter id="insetWheel">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="0"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="2" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="1" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="1.5"/>\n      </feComponentTransfer>\n      <feBlend mode="normal" in="shadow" in2="SourceGraphic" />\n    </filter>\n    <linearGradient id="whiteKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#bbbbbb" />\n      <stop offset="8%"  stop-color="#eeeeee" />\n      <stop offset="90%" stop-color="#ffffff" />\n      <stop offset="91%" stop-color="#eeeeee" />\n    </linearGradient>\n    <linearGradient id="blackKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="16%" stop-color="#222222" />\n      <stop offset="80%" stop-color="#444444" />\n      <stop offset="80.5%" stop-color="#aaaaaa" />\n      <stop offset="85%" stop-color="#222222" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    <linearGradient id="wheelGradient" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="45%" stop-color="#555555" />\n      <stop offset="46%" stop-color="#111111" />\n      <stop offset="49.5%" stop-color="#333333" />\n      <stop offset="50%" stop-color="#bbbbbb" />\n      <stop offset="50.5%" stop-color="#444444" />\n      <stop offset="51%" stop-color="#555555" />\n      <stop offset="54%" stop-color="#666666" />\n      <stop offset="55%" stop-color="#333333" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    \n    <clipPath id="wheelClip">\n      <rect width="').concat(y-2*x,'" height="').concat(b-2,'" y="1" rx="').concat(w/2,'" ry="').concat(w/2,'" />\n    </clipPath>\n  </defs>\n\n  <g id="wheels" transform="translate(').concat(-e.width,',0)">\n    ').concat(e.markup,'\n  </g>\n\n  <g id="board" transform="translate(0,0)">\n    <rect id="keyboard-bg2" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n    ').concat(t.markup,'\n    <rect id="board-border" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n  </g>\n</svg>\n')};function E(t){k=t,B=function(t,e,o){return'\n<g id="note-'.concat(t.midi,'-display" class="note display" transform="translate(').concat(e,',0)" style="color: white;">\n<text class="piano-key-name-played-notes" x="').concat(l/2,'" y="').concat(d-m-140,'" text-anchor="middle">').concat(n.Midi.midiToNoteName(t.midi,{pitchClass:!0,sharps:k}),"</text>\n</g>\n")},j()}function P(t){return t.reduce(function(t,e){var o=T(e,t.width);return{width:t.width+y+g,height:t.height,markup:t.markup+o}},{width:0,height:b,markup:""})}function K(e,o,n,r,i){var a=t.default.fromMidi(e,{sharps:!0}),c=t.default.props(a);return c.alt?{width:0,isWhite:!1,markup:i?B(c,o,n):G(c,o,r)}:{width:l,isWhite:!0,markup:i?B(c,o,n):C(c,o,n)}}function q(o,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["pitchWheel","modWheel"],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#bf3a2b",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#bf3a2b",c=t.default.props(t.default.simplify(o)),s=t.default.props(t.default.simplify(n)),l=c.name&&c.midi?c.alt?c.midi-1:c.midi:t.default.midi("C2"),f=s.name&&s.midi?s.alt?s.midi+1:s.midi:t.default.midi("C5"),h=Math.min(l,f),p=Math.max(l,f),u=(0,e.range)(h,p).reduce(function(t,e){var o=K(e,t.width,i,a),n=o.width,r=o.isWhite,c=o.markup;return{width:t.width+n,height:t.height,markup:r?c+t.markup:t.markup+c}},{width:0,height:d,markup:""}),m=P(r);return O(u,m)}function A(o,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["pitchWheel","modWheel"],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#bf3a2b",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#bf3a2b",c=arguments.length>5?arguments[5]:void 0,s=t.default.props(t.default.simplify(o)),l=t.default.props(t.default.simplify(n)),f=s.name&&s.midi?s.alt?s.midi-1:s.midi:t.default.midi("C2"),h=l.name&&l.midi?l.alt?l.midi+1:l.midi:t.default.midi("C5"),p=Math.min(f,h),u=Math.max(f,h),m=(0,e.range)(p,u).reduce(function(t,e){var o=K(e,t.width,i,a,c),n=o.width,r=o.isWhite,s=o.markup;return{width:t.width+n,height:60,markup:r?s+t.markup:t.markup+s}},{width:0,height:d,markup:""}),w=P(r);return M(m,w)}var F=0,I=0;function N(t){if(F=t,(0,o.getSetting)("pitchWheelEnabled")){var n=document.querySelector("#pitchWheel .wheelSocket"),r=document.querySelector("#pitchWheel .wheel"),i=(0,o.getSetting)("colorPitchWheelDown"),a=(0,o.getSetting)("colorPitchWheelUp"),c=-b/2-t*(v/4);r.setAttribute("transform","translate(0, ".concat(c,")")),n.style.fill=t>0?(0,e.mixRGB)(a,S,t):(0,e.mixRGB)(i,S,-t)}}function D(t){if(I=t,(0,o.getSetting)("modWheelEnabled")){var n=document.querySelector("#modWheel .wheelSocket"),r=document.querySelector("#modWheel .wheel"),i=(0,o.getSetting)("colorModWheel"),a=-(b-v/2)/2-t*(v/2);r.setAttribute("transform","translate(0, ".concat(a,")")),n.style.fill=(0,e.mixRGB)(i,S,t)}}function R(t){var n=(0,o.getSetting)("noteStart"),r=(0,o.getSetting)("noteEnd"),c=(0,o.getSetting)("pitchWheelEnabled"),s=(0,o.getSetting)("modWheelEnabled"),l=(0,o.getSetting)("colorNote"),d=(0,e.mixRGB)(l,"#ffffff",.4),f=l,h=[];c&&h.push("pitchWheel"),s&&h.push("modWheel"),i.innerHTML=q(n,r,h,d,f),a.innerHTML=A(n,r,h,d,f,1),t?(N(0),D(0)):(N(F),D(I))}function j(){var t=(0,o.getSetting)("noteStart"),n=(0,o.getSetting)("noteEnd"),r=(0,o.getSetting)("pitchWheelEnabled"),i=(0,o.getSetting)("modWheelEnabled"),c=(0,o.getSetting)("colorNote"),s=(0,e.mixRGB)(c,"#ffffff",.4),l=c,d=[];r&&d.push("pitchWheel"),i&&d.push("modWheel"),a.innerHTML=A(t,n,d,s,l,1)}
},{"tonal/note":"OiKs","./utils":"SiGv","./settings":"aXpz","@tonaljs/tonal":"oU09"}],"S5Fz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.highlightNote=f,exports.highlightNoteUser=m,exports.fadeNote=v,exports.fadeNoteUser=y,exports.fadeNoteHvrOut=p,exports.highlightTonic=h,exports.fadeTonics=g,exports.setChordHtml=L,exports.setNotesHtml=b,exports.setLayoutSettings=x,exports.setAppLoaded=E,exports.setAppError=I,exports.render=B,Object.defineProperty(exports,"setPitchWheel",{enumerable:!0,get:function(){return o.setPitchWheel}}),Object.defineProperty(exports,"setModWheel",{enumerable:!0,get:function(){return o.setModWheel}});var e=r(require("tonal/note")),t=require("./utils"),n=require("./settings"),o=require("./keyboard");function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var s=["hideKeyboard","hideNotes","hideChord","hideBassNote","hideKeyName","hideTonic"],l=document.getElementById("app"),d=document.getElementById("chordDisplay1"),u=document.getElementById("notesDisplay");function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",n=document.getElementById("note-".concat(e)),o=document.getElementById("note-".concat(e,"-display"));n&&(n.classList.add("autoSelect"),e>64?n.classList.add("activeRight"):n.classList.add("active"),o.classList.add(t))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"activeUser",n=document.getElementById("note-".concat(e)),o=document.getElementById("note-".concat(e,"-display"));n&&(n.classList.add(t),o.classList.add("active2"))}function v(e){var t=document.getElementById("note-".concat(e)),n=document.getElementById("note-".concat(e,"-display"));t&&(t.classList.remove("autoSelect"),t.classList.remove("activeUser"),e>64?t.classList.remove("activeRight"):t.classList.remove("active"),n.classList.remove("active"),n.classList.remove("active2"))}function y(e){var t=document.getElementById("note-".concat(e)),n=document.getElementById("note-".concat(e,"-display"));t&&(t.classList.remove("activeUser"),n.classList.remove("active2"))}function p(e){var t=document.getElementById("note-".concat(e));if(!t.classList.contains("autoSelect")){var n=document.getElementById("note-".concat(e,"-display"));t.classList.remove("activeUser"),n.classList.remove("active2")}}function h(n){var o,r=a((0,t.range)(0,10).map(function(t){return e.default.midi("".concat(n).concat(t))}));try{for(r.s();!(o=r.n()).done;){f(o.value,"tonic")}}catch(i){r.e(i)}finally{r.f()}}function g(){var e=document.querySelectorAll(".tonic");if(e&&e.length){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){t.value.classList.remove("tonic")}}catch(o){n.e(o)}finally{n.f()}}}function L(e){d.innerHTML=e}function b(e){u.innerHTML=e}function x(){var e,t=a(s);try{for(t.s();!(e=t.n()).done;){var o=e.value;(0,n.getSetting)(o)?l.classList.add(o):l.classList.remove(o)}}catch(r){t.e(r)}finally{t.f()}}function E(e){l.classList.add("loaded")}function I(e){l.classList.add("error"),L("Error"),b(e)}function B(e){x(),(0,o.render)(e)}
},{"tonal/note":"OiKs","./utils":"SiGv","./settings":"aXpz","./keyboard":"o9mZ"}],"Ht9r":[function(require,module,exports) {
"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0};
},{}],"khja":[function(require,module,exports) {
"use strict";var o="undefined"!=typeof Symbol&&Symbol,e=require("./shams");module.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"==typeof o("foo")&&("symbol"==typeof Symbol("bar")&&e())))};
},{"./shams":"Ht9r"}],"sg3h":[function(require,module,exports) {
"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString,r="[object Function]";module.exports=function(e){var p=this;if("function"!=typeof p||o.call(p)!==r)throw new TypeError(t+p);for(var i,c=n.call(arguments,1),a=Math.max(0,p.length-c.length),l=[],u=0;u<a;u++)l.push("$"+u);if(i=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var t=p.apply(this,c.concat(n.call(arguments)));return Object(t)===t?t:this}return p.apply(e,c.concat(n.call(arguments)))}),p.prototype){var y=function(){};y.prototype=p.prototype,i.prototype=new y,y.prototype=null}return i};
},{}],"KNOk":[function(require,module,exports) {
"use strict";var e=require("./implementation");module.exports=Function.prototype.bind||e;
},{"./implementation":"sg3h"}],"KeR3":[function(require,module,exports) {
"use strict";var t=require("function-bind");module.exports=t.call(Function.call,Object.prototype.hasOwnProperty);
},{"function-bind":"KNOk"}],"aOC8":[function(require,module,exports) {
"use strict";var r,t=SyntaxError,e=Function,o=TypeError,n=function(r){try{return e('"use strict"; return ('+r+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(U){a=null}var y=function(){throw new o},p=a?function(){try{return arguments.callee,y}catch(r){try{return a(arguments,"callee").get}catch(t){return y}}}():y,i=require("has-symbols")(),f=Object.getPrototypeOf||function(r){return r.__proto__},c={},u="undefined"==typeof Uint8Array?r:f(Uint8Array),l={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":i?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":c,"%AsyncGenerator%":c,"%AsyncGeneratorFunction%":c,"%AsyncIteratorPrototype%":c,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":c,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&i?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&i?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i?f(""[Symbol.iterator]()):r,"%Symbol%":i?Symbol:r,"%SyntaxError%":t,"%ThrowTypeError%":p,"%TypedArray%":u,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},s=function r(t){var e;if("%AsyncFunction%"===t)e=n("async function () {}");else if("%GeneratorFunction%"===t)e=n("function* () {}");else if("%AsyncGeneratorFunction%"===t)e=n("async function* () {}");else if("%AsyncGenerator%"===t){var o=r("%AsyncGeneratorFunction%");o&&(e=o.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=r("%AsyncGenerator%");a&&(e=f(a.prototype))}return l[t]=e,e},A={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=require("function-bind"),P=require("has"),g=d.call(Function.call,Array.prototype.concat),m=d.call(Function.apply,Array.prototype.splice),S=d.call(Function.call,String.prototype.replace),E=d.call(Function.call,String.prototype.slice),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,F=/\\(\\)?/g,h=function(r){var e=E(r,0,1),o=E(r,-1);if("%"===e&&"%"!==o)throw new t("invalid intrinsic syntax, expected closing `%`");if("%"===o&&"%"!==e)throw new t("invalid intrinsic syntax, expected opening `%`");var n=[];return S(r,I,function(r,t,e,o){n[n.length]=e?S(o,F,"$1"):t||r}),n},b=function(r,e){var n,a=r;if(P(A,a)&&(a="%"+(n=A[a])[0]+"%"),P(l,a)){var y=l[a];if(y===c&&(y=s(a)),void 0===y&&!e)throw new o("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:n,name:a,value:y}}throw new t("intrinsic "+r+" does not exist!")};module.exports=function(r,e){if("string"!=typeof r||0===r.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new o('"allowMissing" argument must be a boolean');var n=h(r),y=n.length>0?n[0]:"",p=b("%"+y+"%",e),i=p.name,f=p.value,c=!1,u=p.alias;u&&(y=u[0],m(n,g([0,1],u)));for(var s=1,A=!0;s<n.length;s+=1){var d=n[s],S=E(d,0,1),I=E(d,-1);if(('"'===S||"'"===S||"`"===S||'"'===I||"'"===I||"`"===I)&&S!==I)throw new t("property names with quotes must have matching quotes");if("constructor"!==d&&A||(c=!0),P(l,i="%"+(y+="."+d)+"%"))f=l[i];else if(null!=f){if(!(d in f)){if(!e)throw new o("base intrinsic for "+r+" exists, but the property is not available.");return}if(a&&s+1>=n.length){var F=a(f,d);f=(A=!!F)&&"get"in F&&!("originalValue"in F.get)?F.get:f[d]}else A=P(f,d),f=f[d];A&&!c&&(l[i]=f)}}return f};
},{"has-symbols":"khja","function-bind":"KNOk","has":"KeR3"}],"VqWc":[function(require,module,exports) {
"use strict";var e=require("function-bind"),t=require("get-intrinsic"),r=t("%Function.prototype.apply%"),n=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(n,r),o=t("%Object.getOwnPropertyDescriptor%",!0),p=t("%Object.defineProperty%",!0),u=t("%Math.max%");if(p)try{p({},"a",{value:1})}catch(c){p=null}module.exports=function(t){var r=l(e,n,arguments);o&&p&&(o(r,"length").configurable&&p(r,"length",{value:1+u(0,t.length-(arguments.length-1))}));return r};var a=function(){return l(e,r,arguments)};p?p(module.exports,"apply",{value:a}):module.exports.apply=a;
},{"function-bind":"KNOk","get-intrinsic":"aOC8"}],"nnGn":[function(require,module,exports) {
"use strict";var r=require("get-intrinsic"),t=require("./"),e=t(r("String.prototype.indexOf"));module.exports=function(i,n){var o=r(i,!!n);return"function"==typeof o&&e(i,".prototype.")>-1?t(o):o};
},{"get-intrinsic":"aOC8","./":"VqWc"}],"DlkO":[function(require,module,exports) {
var t="function"==typeof Map&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n=t&&e&&"function"==typeof e.get?e.get:null,r=t&&Map.prototype.forEach,o="function"==typeof Set&&Set.prototype,i=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=o&&i&&"function"==typeof i.get?i.get:null,f=o&&Set.prototype.forEach,c="function"==typeof WeakMap&&WeakMap.prototype,l=c?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype,a=p?WeakSet.prototype.has:null,y="function"==typeof WeakRef&&WeakRef.prototype,b=y?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,s=Object.prototype.toString,h=Function.prototype.toString,S=String.prototype.match,m="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,v="function"==typeof Symbol&&"object"==typeof Symbol.iterator,O=Object.prototype.propertyIsEnumerable,w=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),x=require("./util.inspect").custom,k=x&&A(x)?x:null,W="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function L(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function M(t){return String(t).replace(/"/g,"&quot;")}function E(t){return!("[object Array]"!==D(t)||W&&"object"==typeof t&&W in t)}function q(t){return!("[object Date]"!==D(t)||W&&"object"==typeof t&&W in t)}function _(t){return!("[object RegExp]"!==D(t)||W&&"object"==typeof t&&W in t)}function I(t){return!("[object Error]"!==D(t)||W&&"object"==typeof t&&W in t)}function N(t){return!("[object String]"!==D(t)||W&&"object"==typeof t&&W in t)}function P(t){return!("[object Number]"!==D(t)||W&&"object"==typeof t&&W in t)}function T(t){return!("[object Boolean]"!==D(t)||W&&"object"==typeof t&&W in t)}function A(t){if(v)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!d)return!1;try{return d.call(t),!0}catch(e){}return!1}function R(t){if(!t||"object"!=typeof t||!m)return!1;try{return m.call(t),!0}catch(e){}return!1}module.exports=function t(e,o,i,c){var l=o||{};if(C(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(C(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var p=!C(l,"customInspect")||l.customInspect;if("boolean"!=typeof p&&"symbol"!==p)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(C(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Q(e,l);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var a=void 0===l.depth?5:l.depth;if(void 0===i&&(i=0),i>=a&&a>0&&"object"==typeof e)return E(e)?"[Array]":"[Object]";var y=et(l,i);if(void 0===c)c=[];else if(z(c,e)>=0)return"[Circular]";function b(e,n,r){if(n&&(c=c.slice()).push(n),r){var o={depth:l.depth};return C(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),t(e,o,i+1,c)}return t(e,l,i+1,c)}if("function"==typeof e){var s=B(e),h=rt(e,b);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(h.length>0?" { "+h.join(", ")+" }":"")}if(A(e)){var S=v?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):d.call(e);return"object"!=typeof e||v?S:X(S)}if(K(e)){for(var j="<"+String(e.nodeName).toLowerCase(),O=e.attributes||[],x=0;x<O.length;x++)j+=" "+O[x].name+"="+L(M(O[x].value),"double",l);return j+=">",e.childNodes&&e.childNodes.length&&(j+="..."),j+="</"+String(e.nodeName).toLowerCase()+">"}if(E(e)){if(0===e.length)return"[]";var $=rt(e,b);return y&&!tt($)?"["+nt($,y)+"]":"[ "+$.join(", ")+" ]"}if(I(e)){var V=rt(e,b);return 0===V.length?"["+String(e)+"]":"{ ["+String(e)+"] "+V.join(", ")+" }"}if("object"==typeof e&&p){if(k&&"function"==typeof e[k])return e[k]();if("symbol"!==p&&"function"==typeof e.inspect)return e.inspect()}if(F(e)){var ot=[];return r.call(e,function(t,n){ot.push(b(n,e,!0)+" => "+b(t,e))}),Z("Map",n.call(e),ot,y)}if(G(e)){var it=[];return f.call(e,function(t){it.push(b(t,e))}),Z("Set",u.call(e),it,y)}if(H(e))return Y("WeakMap");if(J(e))return Y("WeakSet");if(U(e))return Y("WeakRef");if(P(e))return X(b(Number(e)));if(R(e))return X(b(m.call(e)));if(T(e))return X(g.call(e));if(N(e))return X(b(String(e)));if(!q(e)&&!_(e)){var ut=rt(e,b),ft=w?w(e)===Object.prototype:e instanceof Object||e.constructor===Object,ct=e instanceof Object?"":"null prototype",lt=!ft&&W&&Object(e)===e&&W in e?D(e).slice(8,-1):ct?"Object":"",pt=(ft||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(lt||ct?"["+[].concat(lt||[],ct||[]).join(": ")+"] ":"");return 0===ut.length?pt+"{}":y?pt+"{"+nt(ut,y)+"}":pt+"{ "+ut.join(", ")+" }"}return String(e)};var $=Object.prototype.hasOwnProperty||function(t){return t in this};function C(t,e){return $.call(t,e)}function D(t){return s.call(t)}function B(t){if(t.name)return t.name;var e=S.call(h.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function z(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function F(t){if(!n||!t||"object"!=typeof t)return!1;try{n.call(t);try{u.call(t)}catch(e){return!0}return t instanceof Map}catch(r){}return!1}function H(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t,l);try{a.call(t,a)}catch(e){return!0}return t instanceof WeakMap}catch(n){}return!1}function U(t){if(!b||!t||"object"!=typeof t)return!1;try{return b.call(t),!0}catch(e){}return!1}function G(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t);try{n.call(t)}catch(e){return!0}return t instanceof Set}catch(r){}return!1}function J(t){if(!a||!t||"object"!=typeof t)return!1;try{a.call(t,a);try{l.call(t,l)}catch(e){return!0}return t instanceof WeakSet}catch(n){}return!1}function K(t){return!(!t||"object"!=typeof t)&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)}function Q(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Q(t.slice(0,e.maxStringLength),e)+r}return L(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,V),"single",e)}function V(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function X(t){return"Object("+t+")"}function Y(t){return t+" { ? }"}function Z(t,e,n,r){return t+" ("+e+") {"+(r?nt(n,r):n.join(", "))+"}"}function tt(t){for(var e=0;e<t.length;e++)if(z(t[e],"\n")>=0)return!1;return!0}function et(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=Array(t.indent+1).join(" ")}return{base:n,prev:Array(e+1).join(n)}}function nt(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+t.join(","+n)+"\n"+e.prev}function rt(t,e){var n=E(t),r=[];if(n){r.length=t.length;for(var o=0;o<t.length;o++)r[o]=C(t,o)?e(t[o],t):""}var i,u="function"==typeof j?j(t):[];if(v){i={};for(var f=0;f<u.length;f++)i["$"+u[f]]=u[f]}for(var c in t)C(t,c)&&(n&&String(Number(c))===c&&c<t.length||v&&i["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if("function"==typeof j)for(var l=0;l<u.length;l++)O.call(t,u[l])&&r.push("["+e(u[l])+"]: "+e(t[u[l]],t));return r}
},{"./util.inspect":"sC8V"}],"lzf1":[function(require,module,exports) {
"use strict";var e=require("get-intrinsic"),t=require("call-bind/callBound"),n=require("object-inspect"),r=e("%TypeError%"),o=e("%WeakMap%",!0),i=e("%Map%",!0),u=t("WeakMap.prototype.get",!0),f=t("WeakMap.prototype.set",!0),a=t("WeakMap.prototype.has",!0),p=t("Map.prototype.get",!0),c=t("Map.prototype.set",!0),s=t("Map.prototype.has",!0),l=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},y=function(e,t){var n=l(e,t);return n&&n.value},x=function(e,t,n){var r=l(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},v=function(e,t){return!!l(e,t)};module.exports=function(){var e,t,l,M={assert:function(e){if(!M.has(e))throw new r("Side channel does not contain "+n(e))},get:function(n){if(o&&n&&("object"==typeof n||"function"==typeof n)){if(e)return u(e,n)}else if(i){if(t)return p(t,n)}else if(l)return y(l,n)},has:function(n){if(o&&n&&("object"==typeof n||"function"==typeof n)){if(e)return a(e,n)}else if(i){if(t)return s(t,n)}else if(l)return v(l,n);return!1},set:function(n,r){o&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new o),f(e,n,r)):i?(t||(t=new i),c(t,n,r)):(l||(l={key:{},next:null}),x(l,n,r))}};return M};
},{"get-intrinsic":"aOC8","call-bind/callBound":"nnGn","object-inspect":"DlkO"}],"XaX2":[function(require,module,exports) {
"use strict";var t=String.prototype.replace,r=/%20/g,C={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports={default:C.RFC3986,formatters:{RFC1738:function(C){return t.call(C,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:C.RFC1738,RFC3986:C.RFC3986};
},{}],"Qri1":[function(require,module,exports) {
"use strict";var r=require("./formats"),e=Object.prototype.hasOwnProperty,t=Array.isArray,o=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),n=function(r){for(;r.length>1;){var e=r.pop(),o=e.obj[e.prop];if(t(o)){for(var n=[],c=0;c<o.length;++c)void 0!==o[c]&&n.push(o[c]);e.obj[e.prop]=n}}},c=function(r,e){for(var t=e&&e.plainObjects?Object.create(null):{},o=0;o<r.length;++o)void 0!==r[o]&&(t[o]=r[o]);return t},u=function r(o,n,u){if(!n)return o;if("object"!=typeof n){if(t(o))o.push(n);else{if(!o||"object"!=typeof o)return[o,n];(u&&(u.plainObjects||u.allowPrototypes)||!e.call(Object.prototype,n))&&(o[n]=!0)}return o}if(!o||"object"!=typeof o)return[o].concat(n);var f=o;return t(o)&&!t(n)&&(f=c(o,u)),t(o)&&t(n)?(n.forEach(function(t,n){if(e.call(o,n)){var c=o[n];c&&"object"==typeof c&&t&&"object"==typeof t?o[n]=r(c,t,u):o.push(t)}else o[n]=t}),o):Object.keys(n).reduce(function(t,o){var c=n[o];return e.call(t,o)?t[o]=r(t[o],c,u):t[o]=c,t},f)},f=function(r,e){return Object.keys(e).reduce(function(r,t){return r[t]=e[t],r},r)},p=function(r,e,t){var o=r.replace(/\+/g," ");if("iso-8859-1"===t)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(n){return o}},a=function(e,t,n,c,u){if(0===e.length)return e;var f=e;if("symbol"==typeof e?f=Symbol.prototype.toString.call(e):"string"!=typeof e&&(f=String(e)),"iso-8859-1"===n)return escape(f).replace(/%u[0-9a-f]{4}/gi,function(r){return"%26%23"+parseInt(r.slice(2),16)+"%3B"});for(var p="",a=0;a<f.length;++a){var i=f.charCodeAt(a);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||u===r.RFC1738&&(40===i||41===i)?p+=f.charAt(a):i<128?p+=o[i]:i<2048?p+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?p+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(a+=1,i=65536+((1023&i)<<10|1023&f.charCodeAt(a)),p+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return p},i=function(r){for(var e=[{obj:{o:r},prop:"o"}],t=[],o=0;o<e.length;++o)for(var c=e[o],u=c.obj[c.prop],f=Object.keys(u),p=0;p<f.length;++p){var a=f[p],i=u[a];"object"==typeof i&&null!==i&&-1===t.indexOf(i)&&(e.push({obj:u,prop:a}),t.push(i))}return n(e),r},s=function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},l=function(r){return!(!r||"object"!=typeof r)&&!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},b=function(r,e){return[].concat(r,e)},y=function(r,e){if(t(r)){for(var o=[],n=0;n<r.length;n+=1)o.push(e(r[n]));return o}return e(r)};module.exports={arrayToObject:c,assign:f,combine:b,compact:i,decode:p,encode:a,isBuffer:l,isRegExp:s,maybeMap:y,merge:u};
},{"./formats":"XaX2"}],"mwZo":[function(require,module,exports) {
"use strict";var e=require("side-channel"),t=require("./utils"),r=require("./formats"),o=Object.prototype.hasOwnProperty,n={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Array.isArray,l=Array.prototype.push,a=function(e,t){l.apply(e,i(t)?t:[t])},f=Date.prototype.toISOString,s=r.default,c={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:t.encode,encodeValuesOnly:!1,format:s,formatter:r.formatters[s],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},u=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},d=function r(o,n,l,f,s,d,y,p,m,h,v,b,w,g,D){var k=o;if(D.has(o))throw new RangeError("Cyclic object value");if("function"==typeof y?k=y(n,k):k instanceof Date?k=h(k):"comma"===l&&i(k)&&(k=t.maybeMap(k,function(e){return e instanceof Date?h(e):e})),null===k){if(f)return d&&!w?d(n,c.encoder,g,"key",v):n;k=""}if(u(k)||t.isBuffer(k))return d?[b(w?n:d(n,c.encoder,g,"key",v))+"="+b(d(k,c.encoder,g,"value",v))]:[b(n)+"="+b(String(k))];var N,O=[];if(void 0===k)return O;if("comma"===l&&i(k))N=[{value:k.length>0?k.join(",")||null:void 0}];else if(i(y))N=y;else{var S=Object.keys(k);N=p?S.sort(p):S}for(var j=0;j<N.length;++j){var x=N[j],P="object"==typeof x&&void 0!==x.value?x.value:k[x];if(!s||null!==P){var z=i(k)?"function"==typeof l?l(n,x):n:n+(m?"."+x:"["+x+"]");D.set(o,!0);var E=e();a(O,r(P,z,l,f,s,d,y,p,m,h,v,b,w,g,E))}}return O},y=function(e){if(!e)return c;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||c.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=r.default;if(void 0!==e.format){if(!o.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var l=r.formatters[n],a=c.filter;return("function"==typeof e.filter||i(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:c.addQueryPrefix,allowDots:void 0===e.allowDots?c.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:c.charsetSentinel,delimiter:void 0===e.delimiter?c.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:c.encode,encoder:"function"==typeof e.encoder?e.encoder:c.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:c.encodeValuesOnly,filter:a,format:n,formatter:l,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:c.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:c.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:c.strictNullHandling}};module.exports=function(t,r){var o,l=t,f=y(r);"function"==typeof f.filter?l=(0,f.filter)("",l):i(f.filter)&&(o=f.filter);var s,c=[];if("object"!=typeof l||null===l)return"";s=r&&r.arrayFormat in n?r.arrayFormat:r&&"indices"in r?r.indices?"indices":"repeat":"indices";var u=n[s];o||(o=Object.keys(l)),f.sort&&o.sort(f.sort);for(var p=e(),m=0;m<o.length;++m){var h=o[m];f.skipNulls&&null===l[h]||a(c,d(l[h],h,u,f.strictNullHandling,f.skipNulls,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,p))}var v=c.join(f.delimiter),b=!0===f.addQueryPrefix?"?":"";return f.charsetSentinel&&("iso-8859-1"===f.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""};
},{"side-channel":"lzf1","./utils":"Qri1","./formats":"XaX2"}],"snX5":[function(require,module,exports) {
"use strict";var e=require("./utils"),r=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},o=function(e,r){return e&&"string"==typeof e&&r.comma&&e.indexOf(",")>-1?e.split(","):e},n="utf8=%26%2310003%3B",l="utf8=%E2%9C%93",c=function(c,s){var p,d={},u=s.ignoreQueryPrefix?c.replace(/^\?/,""):c,f=s.parameterLimit===1/0?void 0:s.parameterLimit,m=u.split(s.delimiter,f),y=-1,h=s.charset;if(s.charsetSentinel)for(p=0;p<m.length;++p)0===m[p].indexOf("utf8=")&&(m[p]===l?h="utf-8":m[p]===n&&(h="iso-8859-1"),y=p,p=m.length);for(p=0;p<m.length;++p)if(p!==y){var b,g,w=m[p],O=w.indexOf("]="),v=-1===O?w.indexOf("="):O+1;-1===v?(b=s.decoder(w,i.decoder,h,"key"),g=s.strictNullHandling?null:""):(b=s.decoder(w.slice(0,v),i.decoder,h,"key"),g=e.maybeMap(o(w.slice(v+1),s),function(e){return s.decoder(e,i.decoder,h,"value")})),g&&s.interpretNumericEntities&&"iso-8859-1"===h&&(g=a(g)),w.indexOf("[]=")>-1&&(g=t(g)?[g]:g),r.call(d,b)?d[b]=e.combine(d[b],g):d[b]=g}return d},s=function(e,r,t,i){for(var a=i?r:o(r,t),n=e.length-1;n>=0;--n){var l,c=e[n];if("[]"===c&&t.parseArrays)l=[].concat(a);else{l=t.plainObjects?Object.create(null):{};var s="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,p=parseInt(s,10);t.parseArrays||""!==s?!isNaN(p)&&c!==s&&String(p)===s&&p>=0&&t.parseArrays&&p<=t.arrayLimit?(l=[])[p]=a:l[s]=a:l={0:a}}a=l}return a},p=function(e,t,i,a){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/g,l=i.depth>0&&/(\[[^[\]]*])/.exec(o),c=l?o.slice(0,l.index):o,p=[];if(c){if(!i.plainObjects&&r.call(Object.prototype,c)&&!i.allowPrototypes)return;p.push(c)}for(var d=0;i.depth>0&&null!==(l=n.exec(o))&&d<i.depth;){if(d+=1,!i.plainObjects&&r.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;p.push(l[1])}return l&&p.push("["+o.slice(l.index)+"]"),s(p,t,i,a)}},d=function(r){if(!r)return i;if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==r.charset&&"utf-8"!==r.charset&&"iso-8859-1"!==r.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===r.charset?i.charset:r.charset;return{allowDots:void 0===r.allowDots?i.allowDots:!!r.allowDots,allowPrototypes:"boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof r.allowSparse?r.allowSparse:i.allowSparse,arrayLimit:"number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof r.charsetSentinel?r.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof r.comma?r.comma:i.comma,decoder:"function"==typeof r.decoder?r.decoder:i.decoder,delimiter:"string"==typeof r.delimiter||e.isRegExp(r.delimiter)?r.delimiter:i.delimiter,depth:"number"==typeof r.depth||!1===r.depth?+r.depth:i.depth,ignoreQueryPrefix:!0===r.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof r.interpretNumericEntities?r.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,parseArrays:!1!==r.parseArrays,plainObjects:"boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling}};module.exports=function(r,t){var i=d(t);if(""===r||null==r)return i.plainObjects?Object.create(null):{};for(var a="string"==typeof r?c(r,i):r,o=i.plainObjects?Object.create(null):{},n=Object.keys(a),l=0;l<n.length;++l){var s=n[l],u=p(s,a[s],i,"string"==typeof r);o=e.merge(o,u,i)}return!0===i.allowSparse?o:e.compact(o)};
},{"./utils":"Qri1"}],"hIRQ":[function(require,module,exports) {
"use strict";var r=require("./stringify"),e=require("./parse"),s=require("./formats");module.exports={formats:s,parse:e,stringify:r};
},{"./stringify":"mwZo","./parse":"snX5","./formats":"XaX2"}],"aXpz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSetting=i,exports.setSetting=a,exports.initSettings=s;var e=require("./ui"),t=r(require("qs"));function r(e){return e&&e.__esModule?e:{default:e}}var n={midiIn:null,noteStart:"A0",noteEnd:"C8",latinNotationEnabled:!1,pitchWheelEnabled:!1,modWheelEnabled:!1,colorNote:"#bf3a2b",colorPitchWheelDown:"#bf3a2b",colorPitchWheelUp:"#44ffaa",colorModWheel:"#44bbff",hideKeyboard:!1,hideNotes:!1,hideChord:!1,hideBassNote:!1,hideKeyName:!1,hideTonic:!1},o={};function i(e){return void 0!==o[e]?o[e]:n[e]}function a(e,t){o[e]=t,u()}function c(e,t,r){if(!Number.isNaN(Number(e)))return Number(e);if("true"===e)return!0;if("false"===e)return!1;var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(o){return n}}function d(){var e=t.default.parse(window.location.search,{depth:0,parseArrays:!1,ignoreQueryPrefix:!0,decoder:c});Object.assign(o,e)}function u(){var e=t.default.stringify(o,{addQueryPrefix:!0});window.history.pushState(o,"settings update",e)}function l(t,r){if("midiIn"===t)return selectMIDIIn(r),void(0,e.render)(!0);var n=r.target;"checkbox"===n.type&&a(t,!!n.checked),"text"!==n.type&&"color"!==n.type||a(t,n.value),(0,e.render)()}function s(){d();for(var e=0,t=Object.keys(n);e<t.length;e++){var r=t[e],o=document.getElementById(r);"checkbox"===o.type&&(o.checked=i(r)),"text"!==o.type&&"color"!==o.type||(o.value=i(r))}}
},{"./ui":"S5Fz","qs":"hIRQ"}],"GLfB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chordToHtml=o,exports.keyToHtml=s;var n=e(require("tonal/note")),t=require("./settings");function e(n){return n&&n.__esModule?n:{default:n}}var a='<span class="flat">♭</span>',c='<span class="sharp">♯</span>',r={C:"Do",D:"Ré",E:"Mi",F:"Fa",G:"Sol",A:"La",B:"Si"};function o(n){return'\n      <span class="key">'.concat(s(n.tonic),'</span>\n      <span class="chordname">').concat(l(n.name),'</span><span class="bassnote">').concat(i(n.mod),"</span>\n    ")}function s(t){var e=n.default.tokenize(t);return"".concat(p(e[0])).concat(u(e[1])).concat(e[2]).concat(e[3])}function u(n){return n?"#"===n?c:"b"===n?a:n:""}function l(n){return f(n).replace(/b(\d)/g,"".concat(a,"$1")).replace(/#/g,c)}function i(n){if(!n)return"";var t=n.replace(/^\//,"");return"/".concat(s(t).replace(/b(\d)/g,"".concat(a,"$1")).replace(/#/g,c))}function p(n){return(0,t.getSetting)("latinNotationEnabled")?r[n]:n}function f(n){return"M"===n.substr(0,1)?n.substr(1):n}
},{"tonal/note":"OiKs","./settings":"aXpz"}],"mXtH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noteOn=a,exports.noteOnPressUser=d,exports.noteOnReleaseUser=p,exports.noteOnReleaseUserHvrOut=h,exports.noteOff=v,exports.fadeAllNotes=x,exports.pitchWheel=m,exports.modWheel=O,exports.polyPressure=exports.controller=void 0;var e=n(require("tonal/note")),t=require("tonal/detect"),o=require("./ui"),r=require("./chords");function n(e){return e&&e.__esModule?e:{default:e}}var l=[],s=0,i=0,u=null,c=null,f=0;function a(e){l.includes(e)||(l.push(e),(0,o.highlightNote)(e)),l.sort(),P()}function d(e){(0,o.highlightNoteUser)(e)}function p(e){(0,o.fadeNoteUser)(e)}function h(e){(0,o.fadeNoteHvrOut)(e)}function v(e){var t=l.indexOf(e);t>-1&&(l.splice(t,1),(0,o.fadeNote)(e)),P()}function x(){for(var e=21;e<108;e++)(0,o.fadeNote)(e)}function m(e){s=e,(0,o.setPitchWheel)(e)}function O(e){i=e,(0,o.setModWheel)(i)}function N(){}function H(){c=setInterval(function(){2==++f&&g()},1e3)}function g(){clearInterval(c)}function P(){var n,s=l.map(e.default.fromMidi).map(e.default.pc);if(s.length>2?n=(0,t.chord)(s):(n=[],u=null),(0,o.setNotesHtml)(s.map(r.keyToHtml).join(" ")),n&&n.length){var i=n[0];(0,o.setChordHtml)((0,r.chordToHtml)(i)),u&&(0,o.fadeTonics)(),g(),c=null,H(),f=0,u=i}else(0,o.setChordHtml)(s.join(" ")),(0,o.fadeTonics)()}var y=N.bind(void 0,"controller");exports.controller=y;var U=N.bind(void 0,"polyPressure");exports.polyPressure=U;
},{"tonal/note":"OiKs","tonal/detect":"H8fA","./ui":"S5Fz","./chords":"GLfB"}],"BGra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FancyMidiPlayer=void 0;var e=require("../piano"),t=h(require("soundfont-player")),i=h(require("midi-player-js"));require("regenerator-runtime/runtime");var s=require("../utils/constants"),r=h(require("reverb.js")),n=require("tonal/detect"),o=require("@tonaljs/tonal"),a=require("../chord-display/chords"),l=require("../chord-display/events"),u=require("../chord-display/keyboard");function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t,i,s,r,n,o){try{var a=e[n](o),l=a.value}catch(u){return void i(u)}a.done?t(l):Promise.resolve(l).then(s,r)}function c(e){return function(){var t=this,i=arguments;return new Promise(function(s,r){var n=e.apply(t,i);function o(e){p(n,s,r,o,a,"next",e)}function a(e){p(n,s,r,o,a,"throw",e)}o(void 0)})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function f(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=function(){function r(t){var i=this;d(this,r),S(this,"releaseKeyTouch",function(e){var t=parseInt(e.replace("note-",""));i.currentSounds.find(function(e){return e.noteID===t});i.piano.isSustainPedalPressed,i.currentSounds=i.currentSounds.filter(function(e){return e.noteID!=t}),(0,l.noteOnReleaseUser)(t)}),S(this,"releaseKeyHvrOut",function(e){var t=parseInt(e.replace("note-",""));(0,l.noteOnReleaseUserHvrOut)(t)}),S(this,"playKeyTouch",function(e){var t=parseInt(e.replace("note-",""));if(i.instrument){var r=i.instrument.play(t,i.safeAudioContext.currentTime,{gain:.76*i.volume,duration:s.SUSTAINED_NOTE_DURATION});r.noteID=t,i.currentSounds.push(r)}(0,l.noteOnPressUser)(t)}),S(this,"playBtnClicked",function(){i.manageMidi()}),S(this,"keyboardSpaceClicked",function(){i.buttonHovered||i.manageMidi()}),this.audioContext=window.AudioContext||window.webkitAudioContext||!1,this.safeAudioContext=new this.audioContext,this.instrument=null,this.midi=null,this.player=null,this.piano=new e.FancyPiano(t),this.volume=3,this.currentNotes=[],this.previousChord=null,this.tempo=120,this.intialTempoSet=!1,this.keySig=t.querySelector("#keySig"),this.timeSig=null,this.currentlyPlaying=!1,this.playButton=t.querySelector("#play-piece"),this.loopButton=t.querySelector("#loop-piece"),this.startLoopButton=t.querySelector("#start-loop"),this.endLoopButton=t.querySelector("#end-loop"),this.songLength=t.querySelector("#songLength"),this.tempoInput=t.querySelector("#tempo"),this.pitchInput=t.querySelector("#pitch"),this.barField=t.querySelector("#bar"),this.beatField=t.querySelector("#beat"),this.progressSlider=t.querySelector("#progressSlider"),this.accidentalSwitch=t.querySelector("#accidentalSwitch"),this.speedLbl=t.querySelector("#speed"),this.loopSlider=t.querySelector("#ds"),this.loopSlider2=t.getElementById("noslider"),this.loopSlider3=t.getElementById("noslider2"),this.speedslider=t.getElementById("noslider3"),this.app=t.getElementById("#app"),this.loopStart=0,this.loopEnd=100,this.currentProgress=0,this.bars=1,this.beats=1,this.displayBeat=1,this.tempoOffset=70,this.transposeVal=0,this.transposeStr="M",this.showSharp=!0,this.songTimer=null,this.manageMidiEnabled=!0,this.buttonHovered=!1,this.currentSounds=[],this.ke=null,this.playButton.onmouseout=function(){i.buttonHovered=!1},this.playButton.onmouseover=function(){i.buttonHovered=!0},this.playButton.onmouseover=function(){i.buttonHovered=!1},setTimeout(function(){i.noSliderWrapper=t.getElementById("noSliderWrapper"),i.noSliderWrapper.style.display="none";for(var e=function(e){var s=t.getElementById("note-".concat(e));s.onmousedown=function(){i.playKeyTouch(s.id)},s.onmouseup=function(){i.releaseKeyTouch(s.id)},s.onmouseout=function(){i.releaseKeyHvrOut(s.id)}},s=21;s<109;s++)e(s)},200),this.isLooping=!1,this.loopTimer=null,this.songTimer=null,this.scales=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C"],this.scaleIndex=12}return f(r,[{key:"setInstrument",value:function(){var e=c(regeneratorRuntime.mark(function e(s){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,t.default.instrument(this.safeAudioContext,s);case 3:this.instrument=e.sent,this.player=new i.default.Player(function(e){"Controller Change"===e.name?r.onControllerChange(e):"Note on"===e.name?r.onNoteOnEvent(e):"Note off"===e.name?r.onNoteOffEvent(e):"Set Tempo"===e.name?(r.intialTempoSet,r.intialTempoSet=!0,r.player.setTempo(r.tempo)):"Key Signature"===e.name||"Time Signature"===e.name&&(r.timeSig=e.timeSignature),r.player.on("endOfFile",function(){}),r.player.on("fileLoaded",function(){}),r.player.on("playing",function(e){})});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSongTime2",value:function(){return this.player.totalTicks/this.player.division/120*60}},{key:"getSongTimeRemaining2",value:function(){return Math.round((this.player.totalTicks-this.player.getCurrentTick())/this.player.division/120*60)}},{key:"checkSongProgress",value:function(){var e=this.getSongTime2(),t=this.getSongTimeRemaining2();if(0!=t){var i=e-t;songLength.innerHTML=new Date(1e3*i).toISOString().substr(11,8);var s=this.tempo/60+i;if(s%4==0){if(this.lastBeat==s)return;this.lastBeat=s,this.currentBeat=1,this.displayBeat=1}else{if(this.lastCurrentBeat==s)return;this.lastCurrentBeat=s,this.displayBeat++,this.displayBeat>4&&(this.displayBeat=1)}this.bars=Math.floor(s/4)+1,this.barField.innerHTML=this.bars.toString(),this.beatField.innerHTML=": "+this.displayBeat.toString()}else this.stopMidi()}},{key:"checkPer",value:function(){var e=this.player.getSongPercentRemaining();if(this.currentProgress=100-e,this.isLooping&&this.currentProgress>=this.loopEnd)return console.log("rewind"),this.player.skipToPercent(this.loopStart),void this.player.play();this.progressSlider.value=this.currentProgress,this.loopSlider3.noUiSlider.set([null,this.currentProgress])}},{key:"onNoteOnEvent",value:function(e){var t=e.noteNumber+this.transposeVal,i=e.noteName;if(this.transposeVal>0){var s=this.transposeVal.toString()+this.transposeStr;i=o.Note.transpose(e.noteName,s),console.log("add newNoteName: "+i+" distStr: "+s)}0===e.velocity?this.onNoteOffEvent(e):(this.playInstrumentMidiNote(e.velocity,t),(0,l.noteOn)(t),i=o.Midi.midiToNoteName(t,{pitchClass:!0,sharps:this.showSharp}),this.currentNotes.includes(i)||this.currentNotes.push(i),this.currentNotes.sort(),this.refresh())}},{key:"onNoteOffEvent",value:function(e){var t=e.noteNumber+this.transposeVal;(0,l.noteOff)(t);var i=e.noteName;if(this.transposeVal>0){var s=this.transposeVal.toString()+this.transposeStr;i=o.Note.transpose(e.noteName,s)}var r=this.currentSounds.find(function(e){return e.noteID===t});!this.piano.isSustainPedalPressed&&r&&r.stop(),this.currentSounds=this.currentSounds.filter(function(e){return e.noteID!=t}),i=o.Midi.midiToNoteName(t,{pitchClass:!0,sharps:this.showSharp});var n=this.currentNotes.indexOf(i);n>-1&&this.currentNotes.splice(n,1),this.refresh()}},{key:"onControllerChange",value:function(e){this.handleSustain(e)}},{key:"handleSustain",value:function(e){64===e.number&&(this.piano.setSustainPedal(e.value),this.piano.isSustainPedalPressed?this.piano.paintPressedKey2(1081):(this.piano.paintReleasedKey2(1081),this.piano.getSustainedKeys().forEach(function(e){return e.stop()})))}},{key:"playInstrumentMidiNote",value:function(e,t){var i=this.instrument.play(t,this.safeAudioContext.currentTime,{gain:e/100*this.volume,duration:this.piano.isSustainPedalPressed?s.SUSTAINED_NOTE_DURATION:s.NON_SUSTAINED_NOTE_DURATION});i.noteID=t,this.currentSounds.push(i)}},{key:"stopInstrumentMidiNote",value:function(e){var t=this.currentSounds.find(function(t){return t.noteID===e});this.piano.isSustainPedalPressed||t.stop(),this.currentSounds=this.currentSounds.filter(function(t){return t.noteID!=e})}},{key:"playKeyboardInstrumentMidiNote",value:function(e,t){var i=this.instrument.play(t,this.safeAudioContext.currentTime,{gain:e*this.volume,duration:this.piano.isSustainPedalPressed?s.SUSTAINED_NOTE_DURATION:s.NON_SUSTAINED_NOTE_DURATION});i.noteID=t,this.currentSounds.push(i)}},{key:"setAccidental",value:function(){var e=!0;this.accidentalSwitch.checked&&(e=!1),this.showSharp=e,(0,u.setAccidentalKeyboard)(e)}},{key:"refresh",value:function(){var e=this.currentNotes,t=e.length>2?(0,n.chord)(e):[];if(this.setNotesHtml(e.map(a.keyToHtml).join(" ")),t&&t.length){var i=t[0];this.previousChord=i}}},{key:"setSliderTempo",value:function(e){var t=parseInt(e)+parseInt(this.tempoOffset),i=t/120*100;this.speedLbl.innerHTML=i.toFixed(0).toString()+"%",this.setTempo(t)}},{key:"updateTempoInput",value:function(e){var t=parseInt(e)+parseInt(this.tempoOffset),i=t/120*100;this.speedLbl.innerHTML=i.toFixed(0).toString()+"%",this.tempoInput.value=t}},{key:"updatePitchSlider",value:function(e){(0,l.fadeAllNotes)(),this.currentlyPlaying&&this.playMidi();var t=parseInt(e);this.transposeVal=t,this.pitchInput.innerHTML=t.toString()+" st",this.keySig.innerHTML=this.scales[this.transposeVal+12]+" Major"}},{key:"movePlayhead",value:function(e){this.currentProgress=e,this.currentlyPlaying&&((0,l.fadeAllNotes)(),this.playMidi())}},{key:"setNotesHtml",value:function(e){notesDisplay.innerHTML=e}},{key:"setTempo",value:function(e){var t=this;this.intialTempoSet=!0,console.log("pause playback prevent play speed glitch"),this.currentlyPlaying&&this.player.pause(),this.tempo=e,this.player.setTempo(this.tempo);var i=parseInt(e)-parseInt(this.tempoOffset);this.speedslider.noUiSlider.set(i),this.currentlyPlaying&&setTimeout(function(){t.player.play()},500)}},{key:"setTempoInput",value:function(e){this.pauseMidi(),this.tempo=e,this.setTempo(e);var t=parseInt(e)-parseInt(this.tempoOffset),i=e/120*100;this.speedLbl.innerHTML=i.toFixed(0).toString()+"%",this.speedslider.noUiSlider.set(t)}},{key:"setStartLoop",value:function(){this.isLooping&&(this.loopStart=this.currentProgress,this.loopSlider2.noUiSlider.set([this.loopStart,this.loopEnd]),this.loopSlider3.noUiSlider.set([this.loopStart,this.currentProgress,this.loopEnd]))}},{key:"setEndLoop",value:function(){this.isLooping&&(this.loopEnd=this.currentProgress,this.loopSlider2.noUiSlider.set([this.loopStart,this.loopEnd]),this.loopSlider3.noUiSlider.set([this.loopStart,this.currentProgress,this.loopEnd]))}},{key:"manageLoop",value:function(){this.isLooping?(this.loopButton.classList.remove("loopEnabled"),this.isLooping=!1,this.noSliderWrapper.style.display="none",this.startLoopButton.style.color="gray",this.endLoopButton.style.color="gray",this.loopStart=0,this.loopEnd=100,this.loopSlider2.noUiSlider.set([this.loopStart,this.loopEnd]),this.loopSlider3.noUiSlider.set([this.loopStart,this.currentProgress,this.loopEnd])):(this.loopButton.classList.add("loopEnabled"),this.noSliderWrapper.style.display="block",this.isLooping=!0,this.startLoopButton.style.color="#fcff02",this.endLoopButton.style.color="#fcff02")}},{key:"setMidi",value:function(){var e=c(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then(function(e){return e.arrayBuffer()});case 2:this.midi=e.sent,this.player.loadArrayBuffer(this.midi),1==this.intialTempoSet&&(this.tempo=120,this.setTempo(this.tempo),this.tempoInput.value=this.tempo,this.transposeVal=0,this.pitchInput.innerHTML=this.transposeVal.toString()+" st",this.keySig.innerHTML=this.scales[this.transposeVal+12]+" Major",this.currentNotes=[],this.refresh());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"manageMidi",value:function(){this.currentlyPlaying?(this.pauseMidi(),this.currentlyPlaying=!1):(this.currentlyPlaying=!0,this.playMidi())}},{key:"movePlayheadFwd",value:function(){this.currentProgress<100&&(this.currentProgress+=1,this.player.skipToPercent(parseInt(this.currentProgress)),this.progressSlider.value=this.currentProgress,this.loopSlider3.noUiSlider.set([null,this.currentProgress]),this.currentlyPlaying&&((0,l.fadeAllNotes)(),this.currentNotes=[],this.refresh(),this.player.play()))}},{key:"movePlayheadBwd",value:function(){this.currentProgress>0&&(this.currentProgress-=1,this.player.skipToPercent(parseInt(this.currentProgress)),this.progressSlider.value=this.currentProgress,this.loopSlider3.noUiSlider.set([null,this.currentProgress]),this.currentlyPlaying&&((0,l.fadeAllNotes)(),this.currentNotes=[],this.refresh(),this.player.play()))}},{key:"playMidi",value:function(){var e=this;(0,l.fadeAllNotes)(),this.currentNotes=[],this.refresh(),this.playButton.classList.add("paused"),clearInterval(this.loopTimer),this.loopTimer=setInterval(function(){e.checkPer()},1e3),clearInterval(this.songTimer),this.songTimer=setInterval(function(){e.checkSongProgress()},50),this.player.skipToPercent(this.currentProgress),this.player.play()}},{key:"pauseMidi",value:function(){this.playButton.classList.remove("paused"),this.currentlyPlaying=!1,clearInterval(this.loopTimer),clearInterval(this.songTimer),this.player.pause()}},{key:"stopMidi",value:function(){clearInterval(this.loopTimer),clearInterval(this.songTimer),this.player.stop(),this.currentlyPlaying=!1,this.playButton.classList.remove("paused"),this.isLooping?this.currentProgress=this.loopStart:this.currentProgress=0,(0,l.fadeAllNotes)(),this.piano.paintReleasedKey2(1081),this.bars=1,this.lastBeat=1,this.lastCurrentBeat=1,this.displayBeat=1,this.barField.innerHTML=this.bars.toString(),this.beatField.innerHTML=": "+this.displayBeat.toString(),songLength.innerHTML=new Date(0).toISOString().substr(11,8),this.progressSlider.value=this.currentProgress,this.loopSlider3.noUiSlider.set([null,this.currentProgress]),this.currentNotes=[],this.refresh()}}]),r}();exports.FancyMidiPlayer=g;
},{"../piano":"qSSr","soundfont-player":"vFmg","midi-player-js":"irSE","regenerator-runtime/runtime":"KA2S","../utils/constants":"aDEZ","reverb.js":"Fink","tonal/detect":"H8fA","@tonaljs/tonal":"oU09","../chord-display/chords":"GLfB","../chord-display/events":"mXtH","../chord-display/keyboard":"o9mZ"}],"kql1":[function(require,module,exports) {

var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e);
},{}],"nW2g":[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],"e5TU":[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(t){return!0}};
},{}],"ZJLI":[function(require,module,exports) {
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});
},{"./_fails":"e5TU"}],"KVo1":[function(require,module,exports) {
var e=module.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e);
},{}],"SP6V":[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],"DBsB":[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":"SP6V"}],"dDni":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_global").document,t=e(r)&&e(r.createElement);module.exports=function(e){return t?r.createElement(e):{}};
},{"./_is-object":"SP6V","./_global":"kql1"}],"UUWM":[function(require,module,exports) {
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});
},{"./_descriptors":"ZJLI","./_fails":"e5TU","./_dom-create":"dDni"}],"PUNq":[function(require,module,exports) {
var t=require("./_is-object");module.exports=function(r,e){if(!t(r))return r;var o,n;if(e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;if("function"==typeof(o=r.valueOf)&&!t(n=o.call(r)))return n;if(!e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":"SP6V"}],"wvco":[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_ie8-dom-define"),t=require("./_to-primitive"),i=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(o,n,u){if(e(o),n=t(n,!0),e(u),r)try{return i(o,n,u)}catch(c){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[n]=u.value),o};
},{"./_an-object":"DBsB","./_ie8-dom-define":"UUWM","./_to-primitive":"PUNq","./_descriptors":"ZJLI"}],"B9EI":[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],"i5RL":[function(require,module,exports) {
var r=require("./_object-dp"),e=require("./_property-desc");module.exports=require("./_descriptors")?function(t,u,o){return r.f(t,u,e(1,o))}:function(r,e,t){return r[e]=t,r};
},{"./_object-dp":"wvco","./_property-desc":"B9EI","./_descriptors":"ZJLI"}],"f0sk":[function(require,module,exports) {
var o=0,t=Math.random();module.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++o+t).toString(36))};
},{}],"Nw1e":[function(require,module,exports) {
module.exports=!1;
},{}],"sTGr":[function(require,module,exports) {

var r=require("./_core"),e=require("./_global"),o="__core-js_shared__",i=e[o]||(e[o]={});(module.exports=function(r,e){return i[r]||(i[r]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:require("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});
},{"./_core":"KVo1","./_global":"kql1","./_library":"Nw1e"}],"xZwm":[function(require,module,exports) {
module.exports=require("./_shared")("native-function-to-string",Function.toString);
},{"./_shared":"sTGr"}],"l2hW":[function(require,module,exports) {

var e=require("./_global"),r=require("./_hide"),t=require("./_has"),i=require("./_uid")("src"),n=require("./_function-to-string"),o="toString",u=(""+n).split(o);require("./_core").inspectSource=function(e){return n.call(e)},(module.exports=function(n,o,c,l){var s="function"==typeof c;s&&(t(c,"name")||r(c,"name",o)),n[o]!==c&&(s&&(t(c,i)||r(c,i,n[o]?""+n[o]:u.join(String(o)))),n===e?n[o]=c:l?n[o]?n[o]=c:r(n,o,c):(delete n[o],r(n,o,c)))})(Function.prototype,o,function(){return"function"==typeof this&&this[i]||n.call(this)});
},{"./_global":"kql1","./_hide":"i5RL","./_has":"nW2g","./_uid":"f0sk","./_function-to-string":"xZwm","./_core":"KVo1"}],"L6p4":[function(require,module,exports) {
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],"N9ch":[function(require,module,exports) {
var r=require("./_a-function");module.exports=function(n,t,u){if(r(n),void 0===t)return n;switch(u){case 1:return function(r){return n.call(t,r)};case 2:return function(r,u){return n.call(t,r,u)};case 3:return function(r,u,e){return n.call(t,r,u,e)}}return function(){return n.apply(t,arguments)}};
},{"./_a-function":"L6p4"}],"NjVL":[function(require,module,exports) {

var e=require("./_global"),r=require("./_core"),o=require("./_hide"),i=require("./_redefine"),u=require("./_ctx"),n="prototype",t=function(c,f,l){var q,_,a,d,p=c&t.F,v=c&t.G,F=c&t.S,x=c&t.P,y=c&t.B,B=v?e:F?e[f]||(e[f]={}):(e[f]||{})[n],G=v?r:r[f]||(r[f]={}),P=G[n]||(G[n]={});for(q in v&&(l=f),l)a=((_=!p&&B&&void 0!==B[q])?B:l)[q],d=y&&_?u(a,e):x&&"function"==typeof a?u(Function.call,a):a,B&&i(B,q,a,c&t.U),G[q]!=a&&o(G,q,d),x&&P[q]!=a&&(P[q]=a)};e.core=r,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,module.exports=t;
},{"./_global":"kql1","./_core":"KVo1","./_hide":"i5RL","./_redefine":"l2hW","./_ctx":"N9ch"}],"RGdG":[function(require,module,exports) {
var e=require("./_uid")("meta"),r=require("./_is-object"),t=require("./_has"),n=require("./_object-dp").f,i=0,u=Object.isExtensible||function(){return!0},f=!require("./_fails")(function(){return u(Object.preventExtensions({}))}),o=function(r){n(r,e,{value:{i:"O"+ ++i,w:{}}})},s=function(n,i){if(!r(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!t(n,e)){if(!u(n))return"F";if(!i)return"E";o(n)}return n[e].i},c=function(r,n){if(!t(r,e)){if(!u(r))return!0;if(!n)return!1;o(r)}return r[e].w},E=function(r){return f&&a.NEED&&u(r)&&!t(r,e)&&o(r),r},a=module.exports={KEY:e,NEED:!1,fastKey:s,getWeak:c,onFreeze:E};
},{"./_uid":"f0sk","./_is-object":"SP6V","./_has":"nW2g","./_object-dp":"wvco","./_fails":"e5TU"}],"MgdH":[function(require,module,exports) {
var e=require("./_shared")("wks"),r=require("./_uid"),o=require("./_global").Symbol,u="function"==typeof o,i=module.exports=function(i){return e[i]||(e[i]=u&&o[i]||(u?o:r)("Symbol."+i))};i.store=e;
},{"./_shared":"sTGr","./_uid":"f0sk","./_global":"kql1"}],"iqAm":[function(require,module,exports) {
var e=require("./_object-dp").f,r=require("./_has"),o=require("./_wks")("toStringTag");module.exports=function(t,u,i){t&&!r(t=i?t:t.prototype,o)&&e(t,o,{configurable:!0,value:u})};
},{"./_object-dp":"wvco","./_has":"nW2g","./_wks":"MgdH"}],"d9Ry":[function(require,module,exports) {
exports.f=require("./_wks");
},{"./_wks":"MgdH"}],"hijg":[function(require,module,exports) {

var r=require("./_global"),e=require("./_core"),o=require("./_library"),i=require("./_wks-ext"),l=require("./_object-dp").f;module.exports=function(u){var a=e.Symbol||(e.Symbol=o?{}:r.Symbol||{});"_"==u.charAt(0)||u in a||l(a,u,{value:i.f(u)})};
},{"./_global":"kql1","./_core":"KVo1","./_library":"Nw1e","./_wks-ext":"d9Ry","./_object-dp":"wvco"}],"viv7":[function(require,module,exports) {
var r={}.toString;module.exports=function(t){return r.call(t).slice(8,-1)};
},{}],"kZKK":[function(require,module,exports) {
var e=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return"String"==e(r)?r.split(""):Object(r)};
},{"./_cof":"viv7"}],"Zcur":[function(require,module,exports) {
module.exports=function(o){if(null==o)throw TypeError("Can't call method on  "+o);return o};
},{}],"mwRI":[function(require,module,exports) {
var e=require("./_iobject"),r=require("./_defined");module.exports=function(i){return e(r(i))};
},{"./_iobject":"kZKK","./_defined":"Zcur"}],"cHfm":[function(require,module,exports) {
var o=Math.ceil,r=Math.floor;module.exports=function(t){return isNaN(t=+t)?0:(t>0?r:o)(t)};
},{}],"HdKs":[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.min;module.exports=function(t){return t>0?r(e(t),9007199254740991):0};
},{"./_to-integer":"cHfm"}],"AXg2":[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.max,t=Math.min;module.exports=function(n,a){return(n=e(n))<0?r(n+a,0):t(n,a)};
},{"./_to-integer":"cHfm"}],"dIPJ":[function(require,module,exports) {
var e=require("./_to-iobject"),r=require("./_to-length"),t=require("./_to-absolute-index");module.exports=function(n){return function(i,o,u){var f,l=e(i),a=r(l.length),c=t(u,a);if(n&&o!=o){for(;a>c;)if((f=l[c++])!=f)return!0}else for(;a>c;c++)if((n||c in l)&&l[c]===o)return n||c||0;return!n&&-1}};
},{"./_to-iobject":"mwRI","./_to-length":"HdKs","./_to-absolute-index":"AXg2"}],"xSc0":[function(require,module,exports) {
var e=require("./_shared")("keys"),r=require("./_uid");module.exports=function(u){return e[u]||(e[u]=r(u))};
},{"./_shared":"sTGr","./_uid":"f0sk"}],"UrZ8":[function(require,module,exports) {
var r=require("./_has"),e=require("./_to-iobject"),u=require("./_array-includes")(!1),i=require("./_shared-key")("IE_PROTO");module.exports=function(o,a){var n,s=e(o),t=0,h=[];for(n in s)n!=i&&r(s,n)&&h.push(n);for(;a.length>t;)r(s,n=a[t++])&&(~u(h,n)||h.push(n));return h};
},{"./_has":"nW2g","./_to-iobject":"mwRI","./_array-includes":"dIPJ","./_shared-key":"xSc0"}],"t611":[function(require,module,exports) {
module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
},{}],"kfVX":[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys");module.exports=Object.keys||function(u){return e(u,r)};
},{"./_object-keys-internal":"UrZ8","./_enum-bug-keys":"t611"}],"JErC":[function(require,module,exports) {
exports.f=Object.getOwnPropertySymbols;
},{}],"Blc0":[function(require,module,exports) {
exports.f={}.propertyIsEnumerable;
},{}],"wCtS":[function(require,module,exports) {
var e=require("./_object-keys"),r=require("./_object-gops"),o=require("./_object-pie");module.exports=function(t){var u=e(t),i=r.f;if(i)for(var c,f=i(t),a=o.f,l=0;f.length>l;)a.call(t,c=f[l++])&&u.push(c);return u};
},{"./_object-keys":"kfVX","./_object-gops":"JErC","./_object-pie":"Blc0"}],"OsmR":[function(require,module,exports) {
var r=require("./_cof");module.exports=Array.isArray||function(e){return"Array"==r(e)};
},{"./_cof":"viv7"}],"JfJ5":[function(require,module,exports) {
var e=require("./_defined");module.exports=function(r){return Object(e(r))};
},{"./_defined":"Zcur"}],"Vixs":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_an-object"),t=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(o,i){r(o);for(var u,c=t(i),n=c.length,s=0;n>s;)e.f(o,u=c[s++],i[u]);return o};
},{"./_object-dp":"wvco","./_an-object":"DBsB","./_object-keys":"kfVX","./_descriptors":"ZJLI"}],"DBa9":[function(require,module,exports) {
var e=require("./_global").document;module.exports=e&&e.documentElement;
},{"./_global":"kql1"}],"d4Ek":[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_object-dps"),t=require("./_enum-bug-keys"),n=require("./_shared-key")("IE_PROTO"),o=function(){},i="prototype",u=function(){var e,r=require("./_dom-create")("iframe"),n=t.length;for(r.style.display="none",require("./_html").appendChild(r),r.src="javascript:",(e=r.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u[i][t[n]];return u()};module.exports=Object.create||function(t,c){var a;return null!==t?(o[i]=e(t),a=new o,o[i]=null,a[n]=t):a=u(),void 0===c?a:r(a,c)};
},{"./_an-object":"DBsB","./_object-dps":"Vixs","./_enum-bug-keys":"t611","./_shared-key":"xSc0","./_dom-create":"dDni","./_html":"DBa9"}],"yyyP":[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(t){return e(t,r)};
},{"./_object-keys-internal":"UrZ8","./_enum-bug-keys":"t611"}],"JaVi":[function(require,module,exports) {
var e=require("./_to-iobject"),t=require("./_object-gopn").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n=function(e){try{return t(e)}catch(o){return r.slice()}};module.exports.f=function(c){return r&&"[object Window]"==o.call(c)?n(c):t(e(c))};
},{"./_to-iobject":"mwRI","./_object-gopn":"yyyP"}],"SFON":[function(require,module,exports) {
var e=require("./_object-pie"),r=require("./_property-desc"),i=require("./_to-iobject"),t=require("./_to-primitive"),o=require("./_has"),c=require("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?u:function(p,q){if(p=i(p),q=t(q,!0),c)try{return u(p,q)}catch(_){}if(o(p,q))return r(!e.f.call(p,q),p[q])};
},{"./_object-pie":"Blc0","./_property-desc":"B9EI","./_to-iobject":"mwRI","./_to-primitive":"PUNq","./_has":"nW2g","./_ie8-dom-define":"UUWM","./_descriptors":"ZJLI"}],"s5uV":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_descriptors"),i=require("./_export"),n=require("./_redefine"),o=require("./_meta").KEY,u=require("./_fails"),s=require("./_shared"),f=require("./_set-to-string-tag"),c=require("./_uid"),a=require("./_wks"),l=require("./_wks-ext"),p=require("./_wks-define"),b=require("./_enum-keys"),y=require("./_is-array"),h=require("./_an-object"),_=require("./_is-object"),q=require("./_to-object"),g=require("./_to-iobject"),m=require("./_to-primitive"),v=require("./_property-desc"),d=require("./_object-create"),S=require("./_object-gopn-ext"),j=require("./_object-gopd"),O=require("./_object-gops"),w=require("./_object-dp"),k=require("./_object-keys"),P=j.f,F=w.f,E=S.f,N=e.Symbol,J=e.JSON,x=J&&J.stringify,I="prototype",T=a("_hidden"),C=a("toPrimitive"),M={}.propertyIsEnumerable,D=s("symbol-registry"),G=s("symbols"),K=s("op-symbols"),Q=Object[I],W="function"==typeof N&&!!O.f,Y=e.QObject,z=!Y||!Y[I]||!Y[I].findChild,A=t&&u(function(){return 7!=d(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(e,r,t){var i=P(Q,r);i&&delete Q[r],F(e,r,t),i&&e!==Q&&F(Q,r,i)}:F,B=function(e){var r=G[e]=d(N[I]);return r._k=e,r},H=W&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},L=function(e,t,i){return e===Q&&L(K,t,i),h(e),t=m(t,!0),h(i),r(G,t)?(i.enumerable?(r(e,T)&&e[T][t]&&(e[T][t]=!1),i=d(i,{enumerable:v(0,!1)})):(r(e,T)||F(e,T,v(1,{})),e[T][t]=!0),A(e,t,i)):F(e,t,i)},R=function(e,r){h(e);for(var t,i=b(r=g(r)),n=0,o=i.length;o>n;)L(e,t=i[n++],r[t]);return e},U=function(e,r){return void 0===r?d(e):R(d(e),r)},V=function(e){var t=M.call(this,e=m(e,!0));return!(this===Q&&r(G,e)&&!r(K,e))&&(!(t||!r(this,e)||!r(G,e)||r(this,T)&&this[T][e])||t)},X=function(e,t){if(e=g(e),t=m(t,!0),e!==Q||!r(G,t)||r(K,t)){var i=P(e,t);return!i||!r(G,t)||r(e,T)&&e[T][t]||(i.enumerable=!0),i}},Z=function(e){for(var t,i=E(g(e)),n=[],u=0;i.length>u;)r(G,t=i[u++])||t==T||t==o||n.push(t);return n},$=function(e){for(var t,i=e===Q,n=E(i?K:g(e)),o=[],u=0;n.length>u;)!r(G,t=n[u++])||i&&!r(Q,t)||o.push(G[t]);return o};W||(n((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=c(arguments.length>0?arguments[0]:void 0),i=function(t){this===Q&&i.call(K,t),r(this,T)&&r(this[T],e)&&(this[T][e]=!1),A(this,e,v(1,t))};return t&&z&&A(Q,e,{configurable:!0,set:i}),B(e)})[I],"toString",function(){return this._k}),j.f=X,w.f=L,require("./_object-gopn").f=S.f=Z,require("./_object-pie").f=V,O.f=$,t&&!require("./_library")&&n(Q,"propertyIsEnumerable",V,!0),l.f=function(e){return B(a(e))}),i(i.G+i.W+i.F*!W,{Symbol:N});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ee.length>re;)a(ee[re++]);for(var te=k(a.store),ie=0;te.length>ie;)p(te[ie++]);i(i.S+i.F*!W,"Symbol",{for:function(e){return r(D,e+="")?D[e]:D[e]=N(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var r in D)if(D[r]===e)return r},useSetter:function(){z=!0},useSimple:function(){z=!1}}),i(i.S+i.F*!W,"Object",{create:U,defineProperty:L,defineProperties:R,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$});var ne=u(function(){O.f(1)});i(i.S+i.F*ne,"Object",{getOwnPropertySymbols:function(e){return O.f(q(e))}}),J&&i(i.S+i.F*(!W||u(function(){var e=N();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var r,t,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(t=r=i[1],(_(r)||void 0!==e)&&!H(e))return y(r)||(r=function(e,r){if("function"==typeof t&&(r=t.call(this,e,r)),!H(r))return r}),i[1]=r,x.apply(J,i)}}),N[I][C]||require("./_hide")(N[I],C,N[I].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(e.JSON,"JSON",!0);
},{"./_global":"kql1","./_has":"nW2g","./_descriptors":"ZJLI","./_export":"NjVL","./_redefine":"l2hW","./_meta":"RGdG","./_fails":"e5TU","./_shared":"sTGr","./_set-to-string-tag":"iqAm","./_uid":"f0sk","./_wks":"MgdH","./_wks-ext":"d9Ry","./_wks-define":"hijg","./_enum-keys":"wCtS","./_is-array":"OsmR","./_an-object":"DBsB","./_is-object":"SP6V","./_to-object":"JfJ5","./_to-iobject":"mwRI","./_to-primitive":"PUNq","./_property-desc":"B9EI","./_object-create":"d4Ek","./_object-gopn-ext":"JaVi","./_object-gopd":"SFON","./_object-gops":"JErC","./_object-dp":"wvco","./_object-keys":"kfVX","./_object-gopn":"yyyP","./_object-pie":"Blc0","./_library":"Nw1e","./_hide":"i5RL"}],"ELq7":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{create:require("./_object-create")});
},{"./_export":"NjVL","./_object-create":"d4Ek"}],"SeKy":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f});
},{"./_export":"NjVL","./_descriptors":"ZJLI","./_object-dp":"wvco"}],"FFVz":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")});
},{"./_export":"NjVL","./_descriptors":"ZJLI","./_object-dps":"Vixs"}],"GmOm":[function(require,module,exports) {
var e=require("./_export"),r=require("./_core"),t=require("./_fails");module.exports=function(c,i){var o=(r.Object||{})[c]||Object[c],u={};u[c]=i(o),e(e.S+e.F*t(function(){o(1)}),"Object",u)};
},{"./_export":"NjVL","./_core":"KVo1","./_fails":"e5TU"}],"eObd":[function(require,module,exports) {
var r=require("./_to-iobject"),e=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,o){return e(r(t),o)}});
},{"./_to-iobject":"mwRI","./_object-gopd":"SFON","./_object-sap":"GmOm"}],"kbAb":[function(require,module,exports) {
var t=require("./_has"),e=require("./_to-object"),o=require("./_shared-key")("IE_PROTO"),r=Object.prototype;module.exports=Object.getPrototypeOf||function(c){return c=e(c),t(c,o)?c[o]:"function"==typeof c.constructor&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?r:null};
},{"./_has":"nW2g","./_to-object":"JfJ5","./_shared-key":"xSc0"}],"x4A6":[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function(t){return r(e(t))}});
},{"./_to-object":"JfJ5","./_object-gpo":"kbAb","./_object-sap":"GmOm"}],"oiqN":[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-keys");require("./_object-sap")("keys",function(){return function(t){return r(e(t))}});
},{"./_to-object":"JfJ5","./_object-keys":"kfVX","./_object-sap":"GmOm"}],"NX5N":[function(require,module,exports) {
require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f});
},{"./_object-sap":"GmOm","./_object-gopn-ext":"JaVi"}],"QMvv":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("freeze",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"y8Nt":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("seal",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"vJzf":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"UcEb":[function(require,module,exports) {
var r=require("./_is-object");require("./_object-sap")("isFrozen",function(e){return function(n){return!r(n)||!!e&&e(n)}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"VI7w":[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isSealed",function(r){return function(i){return!e(i)||!!r&&r(i)}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"CvEg":[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isExtensible",function(r){return function(i){return!!e(i)&&(!r||r(i))}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"bBGE":[function(require,module,exports) {
"use strict";var e=require("./_descriptors"),r=require("./_object-keys"),t=require("./_object-gops"),o=require("./_object-pie"),i=require("./_to-object"),c=require("./_iobject"),n=Object.assign;module.exports=!n||require("./_fails")(function(){var e={},r={},t=Symbol(),o="abcdefghijklmnopqrst";return e[t]=7,o.split("").forEach(function(e){r[e]=e}),7!=n({},e)[t]||Object.keys(n({},r)).join("")!=o})?function(n,u){for(var s=i(n),a=arguments.length,f=1,b=t.f,j=o.f;a>f;)for(var l,q=c(arguments[f++]),_=b?r(q).concat(b(q)):r(q),p=_.length,g=0;p>g;)l=_[g++],e&&!j.call(q,l)||(s[l]=q[l]);return s}:n;
},{"./_descriptors":"ZJLI","./_object-keys":"kfVX","./_object-gops":"JErC","./_object-pie":"Blc0","./_to-object":"JfJ5","./_iobject":"kZKK","./_fails":"e5TU"}],"fRec":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F,"Object",{assign:require("./_object-assign")});
},{"./_export":"NjVL","./_object-assign":"bBGE"}],"YyyQ":[function(require,module,exports) {
module.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};
},{}],"GEUt":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{is:require("./_same-value")});
},{"./_export":"NjVL","./_same-value":"YyyQ"}],"Epal":[function(require,module,exports) {
var t=require("./_is-object"),e=require("./_an-object"),r=function(r,o){if(e(r),!t(o)&&null!==o)throw TypeError(o+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{(o=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(c){e=!0}return function(t,c){return r(t,c),e?t.__proto__=c:o(t,c),t}}({},!1):void 0),check:r};
},{"./_is-object":"SP6V","./_an-object":"DBsB","./_ctx":"N9ch","./_object-gopd":"SFON"}],"CQxr":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{setPrototypeOf:require("./_set-proto").set});
},{"./_export":"NjVL","./_set-proto":"Epal"}],"jP8S":[function(require,module,exports) {
var e=require("./_cof"),t=require("./_wks")("toStringTag"),n="Arguments"==e(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(n){}};module.exports=function(u){var o,c,i;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(c=r(o=Object(u),t))?c:n?e(o):"Object"==(i=e(o))&&"function"==typeof o.callee?"Arguments":i};
},{"./_cof":"viv7","./_wks":"MgdH"}],"tSZj":[function(require,module,exports) {
"use strict";var e=require("./_classof"),r={};r[require("./_wks")("toStringTag")]="z",r+""!="[object z]"&&require("./_redefine")(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0);
},{"./_classof":"jP8S","./_wks":"MgdH","./_redefine":"l2hW"}],"TTev":[function(require,module,exports) {
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};
},{}],"nZQG":[function(require,module,exports) {
"use strict";var n=require("./_a-function"),t=require("./_is-object"),r=require("./_invoke"),e=[].slice,i={},o=function(n,t,r){if(!(t in i)){for(var e=[],o=0;o<t;o++)e[o]="a["+o+"]";i[t]=Function("F,a","return new F("+e.join(",")+")")}return i[t](n,r)};module.exports=Function.bind||function(i){var u=n(this),c=e.call(arguments,1),a=function(){var n=c.concat(e.call(arguments));return this instanceof a?o(u,n.length,n):r(u,n,i)};return t(u.prototype)&&(a.prototype=u.prototype),a};
},{"./_a-function":"L6p4","./_is-object":"SP6V","./_invoke":"TTev"}],"eBLX":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Function",{bind:require("./_bind")});
},{"./_export":"NjVL","./_bind":"nZQG"}],"WtEG":[function(require,module,exports) {
var r=require("./_object-dp").f,t=Function.prototype,e=/^\s*function ([^ (]*)/,n="name";n in t||require("./_descriptors")&&r(t,n,{configurable:!0,get:function(){try{return(""+this).match(e)[1]}catch(r){return""}}});
},{"./_object-dp":"wvco","./_descriptors":"ZJLI"}],"YlR3":[function(require,module,exports) {
"use strict";var t=require("./_is-object"),e=require("./_object-gpo"),r=require("./_wks")("hasInstance"),i=Function.prototype;r in i||require("./_object-dp").f(i,r,{value:function(r){if("function"!=typeof this||!t(r))return!1;if(!t(this.prototype))return r instanceof this;for(;r=e(r);)if(this.prototype===r)return!0;return!1}});
},{"./_is-object":"SP6V","./_object-gpo":"kbAb","./_wks":"MgdH","./_object-dp":"wvco"}],"p585":[function(require,module,exports) {
module.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";
},{}],"EWct":[function(require,module,exports) {
var r=require("./_export"),e=require("./_defined"),i=require("./_fails"),n=require("./_string-ws"),t="["+n+"]",u="​",o=RegExp("^"+t+t+"*"),p=RegExp(t+t+"*$"),a=function(e,t,o){var p={},a=i(function(){return!!n[e]()||u[e]()!=u}),f=p[e]=a?t(c):n[e];o&&(p[o]=f),r(r.P+r.F*a,"String",p)},c=a.trim=function(r,i){return r=String(e(r)),1&i&&(r=r.replace(o,"")),2&i&&(r=r.replace(p,"")),r};module.exports=a;
},{"./_export":"NjVL","./_defined":"Zcur","./_fails":"e5TU","./_string-ws":"p585"}],"m09p":[function(require,module,exports) {
var r=require("./_global").parseInt,e=require("./_string-trim").trim,t=require("./_string-ws"),i=/^[-+]?0[xX]/;module.exports=8!==r(t+"08")||22!==r(t+"0x16")?function(t,n){var s=e(String(t),3);return r(s,n>>>0||(i.test(s)?16:10))}:r;
},{"./_global":"kql1","./_string-trim":"EWct","./_string-ws":"p585"}],"OCDI":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.G+r.F*(parseInt!=e),{parseInt:e});
},{"./_export":"NjVL","./_parse-int":"m09p"}],"EZpC":[function(require,module,exports) {
var r=require("./_global").parseFloat,e=require("./_string-trim").trim;module.exports=1/r(require("./_string-ws")+"-0")!=-1/0?function(t){var i=e(String(t),3),a=r(i);return 0===a&&"-"==i.charAt(0)?-0:a}:r;
},{"./_global":"kql1","./_string-trim":"EWct","./_string-ws":"p585"}],"i7Me":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.G+r.F*(parseFloat!=e),{parseFloat:e});
},{"./_export":"NjVL","./_parse-float":"EZpC"}],"oEgy":[function(require,module,exports) {
var t=require("./_is-object"),o=require("./_set-proto").set;module.exports=function(r,e,p){var u,n=e.constructor;return n!==p&&"function"==typeof n&&(u=n.prototype)!==p.prototype&&t(u)&&o&&o(r,u),r};
},{"./_is-object":"SP6V","./_set-proto":"Epal"}],"uYep":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_cof"),i=require("./_inherit-if-required"),a=require("./_to-primitive"),n=require("./_fails"),o=require("./_object-gopn").f,u=require("./_object-gopd").f,s=require("./_object-dp").f,c=require("./_string-trim").trim,f="Number",_=e[f],I=_,N=_.prototype,p=t(require("./_object-create")(N))==f,l="trim"in String.prototype,q=function(e){var r=a(e,!1);if("string"==typeof r&&r.length>2){var t,i,n,o=(r=l?r.trim():c(r,3)).charCodeAt(0);if(43===o||45===o){if(88===(t=r.charCodeAt(2))||120===t)return NaN}else if(48===o){switch(r.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+r}for(var u,s=r.slice(2),f=0,_=s.length;f<_;f++)if((u=s.charCodeAt(f))<48||u>n)return NaN;return parseInt(s,i)}}return+r};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var r=arguments.length<1?0:e,a=this;return a instanceof _&&(p?n(function(){N.valueOf.call(a)}):t(a)!=f)?i(new I(q(r)),a,_):q(r)};for(var g,h=require("./_descriptors")?o(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;h.length>E;E++)r(I,g=h[E])&&!r(_,g)&&s(_,g,u(I,g));_.prototype=N,N.constructor=_,require("./_redefine")(e,f,_)}
},{"./_global":"kql1","./_has":"nW2g","./_cof":"viv7","./_inherit-if-required":"oEgy","./_to-primitive":"PUNq","./_fails":"e5TU","./_object-gopn":"yyyP","./_object-gopd":"SFON","./_object-dp":"wvco","./_string-trim":"EWct","./_object-create":"d4Ek","./_descriptors":"ZJLI","./_redefine":"l2hW"}],"zgKs":[function(require,module,exports) {
var r=require("./_cof");module.exports=function(e,o){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(o);return+e};
},{"./_cof":"viv7"}],"ezM6":[function(require,module,exports) {
"use strict";var r=require("./_to-integer"),e=require("./_defined");module.exports=function(t){var i=String(e(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))1&o&&(n+=i);return n};
},{"./_to-integer":"cHfm","./_defined":"Zcur"}],"dVzo":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-integer"),i=require("./_a-number-value"),t=require("./_string-repeat"),n=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",a="0",c=function(r,e){for(var i=-1,t=e;++i<6;)t+=r*u[i],u[i]=t%1e7,t=o(t/1e7)},l=function(r){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=o(i/r),i=i%r*1e7},v=function(){for(var r=6,e="";--r>=0;)if(""!==e||0===r||0!==u[r]){var i=String(u[r]);e=""===e?i:e+t.call(a,7-i.length)+i}return e},x=function(r,e,i){return 0===e?i:e%2==1?x(r,e-1,i*r):x(r*r,e/2,i)},d=function(r){for(var e=0,i=r;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e};r(r.P+r.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!require("./_fails")(function(){n.call({})})),"Number",{toFixed:function(r){var n,o,u,s,F=i(this,f),g=e(r),b="",h=a;if(g<0||g>20)throw RangeError(f);if(F!=F)return"NaN";if(F<=-1e21||F>=1e21)return String(F);if(F<0&&(b="-",F=-F),F>1e-21)if(o=(n=d(F*x(2,69,1))-69)<0?F*x(2,-n,1):F/x(2,n,1),o*=4503599627370496,(n=52-n)>0){for(c(0,o),u=g;u>=7;)c(1e7,0),u-=7;for(c(x(10,u,1),0),u=n-1;u>=23;)l(1<<23),u-=23;l(1<<u),c(1,1),l(2),h=v()}else c(0,o),c(1<<-n,0),h=v()+t.call(a,g);return h=g>0?b+((s=h.length)<=g?"0."+t.call(a,g-s)+h:h.slice(0,s-g)+"."+h.slice(s-g)):b+h}});
},{"./_export":"NjVL","./_to-integer":"cHfm","./_a-number-value":"zgKs","./_string-repeat":"ezM6","./_fails":"e5TU"}],"KwyH":[function(require,module,exports) {
"use strict";var r=require("./_export"),i=require("./_fails"),e=require("./_a-number-value"),n=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==n.call(1,void 0)})||!i(function(){n.call({})})),"Number",{toPrecision:function(r){var i=e(this,"Number#toPrecision: incorrect invocation!");return void 0===r?n.call(i):n.call(i,r)}});
},{"./_export":"NjVL","./_fails":"e5TU","./_a-number-value":"zgKs"}],"Decw":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)});
},{"./_export":"NjVL"}],"oWwC":[function(require,module,exports) {
var e=require("./_export"),r=require("./_global").isFinite;e(e.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}});
},{"./_export":"NjVL","./_global":"kql1"}],"yEh5":[function(require,module,exports) {
var e=require("./_is-object"),r=Math.floor;module.exports=function(i){return!e(i)&&isFinite(i)&&r(i)===i};
},{"./_is-object":"SP6V"}],"N7Jd":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Number",{isInteger:require("./_is-integer")});
},{"./_export":"NjVL","./_is-integer":"yEh5"}],"RsrB":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{isNaN:function(r){return r!=r}});
},{"./_export":"NjVL"}],"fbTZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_is-integer"),i=Math.abs;e(e.S,"Number",{isSafeInteger:function(e){return r(e)&&i(e)<=9007199254740991}});
},{"./_export":"NjVL","./_is-integer":"yEh5"}],"JxHc":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});
},{"./_export":"NjVL"}],"X6hw":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});
},{"./_export":"NjVL"}],"IKam":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.S+r.F*(Number.parseFloat!=e),"Number",{parseFloat:e});
},{"./_export":"NjVL","./_parse-float":"EZpC"}],"QjIW":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.S+r.F*(Number.parseInt!=e),"Number",{parseInt:e});
},{"./_export":"NjVL","./_parse-int":"m09p"}],"u7lu":[function(require,module,exports) {
module.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)};
},{}],"FaF2":[function(require,module,exports) {
var a=require("./_export"),r=require("./_math-log1p"),t=Math.sqrt,h=Math.acosh;a(a.S+a.F*!(h&&710==Math.floor(h(Number.MAX_VALUE))&&h(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:r(a-1+t(a-1)*t(a+1))}});
},{"./_export":"NjVL","./_math-log1p":"u7lu"}],"oL1m":[function(require,module,exports) {
var t=require("./_export"),a=Math.asinh;function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}t(t.S+t.F*!(a&&1/a(0)>0),"Math",{asinh:i});
},{"./_export":"NjVL"}],"PhwT":[function(require,module,exports) {
var a=require("./_export"),t=Math.atanh;a(a.S+a.F*!(t&&1/t(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}});
},{"./_export":"NjVL"}],"KTfa":[function(require,module,exports) {
module.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1};
},{}],"fi1h":[function(require,module,exports) {
var r=require("./_export"),t=require("./_math-sign");r(r.S,"Math",{cbrt:function(r){return t(r=+r)*Math.pow(Math.abs(r),1/3)}});
},{"./_export":"NjVL","./_math-sign":"KTfa"}],"fJAy":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}});
},{"./_export":"NjVL"}],"kseY":[function(require,module,exports) {
var r=require("./_export"),e=Math.exp;r(r.S,"Math",{cosh:function(r){return(e(r=+r)+e(-r))/2}});
},{"./_export":"NjVL"}],"FOcF":[function(require,module,exports) {
var e=Math.expm1;module.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:e;
},{}],"hyI8":[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1");e(e.S+e.F*(r!=Math.expm1),"Math",{expm1:r});
},{"./_export":"NjVL","./_math-expm1":"FOcF"}],"uZFk":[function(require,module,exports) {
var r=require("./_math-sign"),t=Math.pow,n=t(2,-52),a=t(2,-23),u=t(2,127)*(2-a),e=t(2,-126),o=function(r){return r+1/n-1/n};module.exports=Math.fround||function(t){var h,i,f=Math.abs(t),s=r(t);return f<e?s*o(f/e/a)*e*a:(i=(h=(1+a/n)*f)-(h-f))>u||i!=i?s*(1/0):s*i};
},{"./_math-sign":"KTfa"}],"N7ZU":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{fround:require("./_math-fround")});
},{"./_export":"NjVL","./_math-fround":"uZFk"}],"HGHV":[function(require,module,exports) {
var r=require("./_export"),t=Math.abs;r(r.S,"Math",{hypot:function(r,a){for(var e,h,n=0,o=0,u=arguments.length,M=0;o<u;)M<(e=t(arguments[o++]))?(n=n*(h=M/e)*h+1,M=e):n+=e>0?(h=e/M)*h:e;return M===1/0?1/0:M*Math.sqrt(n)}});
},{"./_export":"NjVL"}],"Pasv":[function(require,module,exports) {
var r=require("./_export"),e=Math.imul;r(r.S+r.F*require("./_fails")(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(r,e){var t=+r,u=+e,i=65535&t,n=65535&u;return 0|i*n+((65535&t>>>16)*n+i*(65535&u>>>16)<<16>>>0)}});
},{"./_export":"NjVL","./_fails":"e5TU"}],"zlsv":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}});
},{"./_export":"NjVL"}],"RR3i":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log1p:require("./_math-log1p")});
},{"./_export":"NjVL","./_math-log1p":"u7lu"}],"b6PB":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}});
},{"./_export":"NjVL"}],"BHWJ":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{sign:require("./_math-sign")});
},{"./_export":"NjVL","./_math-sign":"KTfa"}],"f0FZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1"),t=Math.exp;e(e.S+e.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(t(e-1)-t(-e-1))*(Math.E/2)}});
},{"./_export":"NjVL","./_math-expm1":"FOcF","./_fails":"e5TU"}],"GaA9":[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-expm1"),t=Math.exp;r(r.S,"Math",{tanh:function(r){var a=e(r=+r),h=e(-r);return a==1/0?1:h==1/0?-1:(a-h)/(t(r)+t(-r))}});
},{"./_export":"NjVL","./_math-expm1":"FOcF"}],"qy71":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}});
},{"./_export":"NjVL"}],"i8rB":[function(require,module,exports) {
var r=require("./_export"),o=require("./_to-absolute-index"),e=String.fromCharCode,n=String.fromCodePoint;r(r.S+r.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(r){for(var n,t=[],i=arguments.length,a=0;i>a;){if(n=+arguments[a++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");t.push(n<65536?e(n):e(55296+((n-=65536)>>10),n%1024+56320))}return t.join("")}});
},{"./_export":"NjVL","./_to-absolute-index":"AXg2"}],"DtRm":[function(require,module,exports) {
var r=require("./_export"),e=require("./_to-iobject"),t=require("./_to-length");r(r.S,"String",{raw:function(r){for(var n=e(r.raw),i=t(n.length),o=arguments.length,u=[],g=0;i>g;)u.push(String(n[g++])),g<o&&u.push(String(arguments[g]));return u.join("")}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_to-length":"HdKs"}],"Z1j3":[function(require,module,exports) {
"use strict";require("./_string-trim")("trim",function(r){return function(){return r(this,3)}});
},{"./_string-trim":"EWct"}],"BiTF":[function(require,module,exports) {
var e=require("./_to-integer"),r=require("./_defined");module.exports=function(t){return function(n,i){var o,u,c=String(r(n)),d=e(i),a=c.length;return d<0||d>=a?t?"":void 0:(o=c.charCodeAt(d))<55296||o>56319||d+1===a||(u=c.charCodeAt(d+1))<56320||u>57343?t?c.charAt(d):o:t?c.slice(d,d+2):u-56320+(o-55296<<10)+65536}};
},{"./_to-integer":"cHfm","./_defined":"Zcur"}],"oANp":[function(require,module,exports) {
module.exports={};
},{}],"O1PE":[function(require,module,exports) {
"use strict";var e=require("./_object-create"),r=require("./_property-desc"),t=require("./_set-to-string-tag"),i={};require("./_hide")(i,require("./_wks")("iterator"),function(){return this}),module.exports=function(o,u,s){o.prototype=e(i,{next:r(1,s)}),t(o,u+" Iterator")};
},{"./_object-create":"d4Ek","./_property-desc":"B9EI","./_set-to-string-tag":"iqAm","./_hide":"i5RL","./_wks":"MgdH"}],"kgNZ":[function(require,module,exports) {
"use strict";var e=require("./_library"),r=require("./_export"),t=require("./_redefine"),i=require("./_hide"),n=require("./_iterators"),u=require("./_iter-create"),o=require("./_set-to-string-tag"),s=require("./_object-gpo"),a=require("./_wks")("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",l="keys",q="values",y=function(){return this};module.exports=function(_,p,h,k,v,w,d){u(h,p,k);var x,b,g,j=function(e){if(!c&&e in I)return I[e];switch(e){case l:case q:return function(){return new h(this,e)}}return function(){return new h(this,e)}},m=p+" Iterator",A=v==q,F=!1,I=_.prototype,O=I[a]||I[f]||v&&I[v],P=O||j(v),z=v?A?j("entries"):P:void 0,B="Array"==p&&I.entries||O;if(B&&(g=s(B.call(new _)))!==Object.prototype&&g.next&&(o(g,m,!0),e||"function"==typeof g[a]||i(g,a,y)),A&&O&&O.name!==q&&(F=!0,P=function(){return O.call(this)}),e&&!d||!c&&!F&&I[a]||i(I,a,P),n[p]=P,n[m]=y,v)if(x={values:A?P:j(q),keys:w?P:j(l),entries:z},d)for(b in x)b in I||t(I,b,x[b]);else r(r.P+r.F*(c||F),p,x);return x};
},{"./_library":"Nw1e","./_export":"NjVL","./_redefine":"l2hW","./_hide":"i5RL","./_iterators":"oANp","./_iter-create":"O1PE","./_set-to-string-tag":"iqAm","./_object-gpo":"kbAb","./_wks":"MgdH"}],"Wu89":[function(require,module,exports) {
"use strict";var i=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(i){this._t=String(i),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})});
},{"./_string-at":"BiTF","./_iter-define":"kgNZ"}],"P7ku":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!1);r(r.P,"String",{codePointAt:function(r){return t(this,r)}});
},{"./_export":"NjVL","./_string-at":"BiTF"}],"g8m6":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_cof"),i=require("./_wks")("match");module.exports=function(o){var u;return e(o)&&(void 0!==(u=o[i])?!!u:"RegExp"==r(o))};
},{"./_is-object":"SP6V","./_cof":"viv7","./_wks":"MgdH"}],"xRT2":[function(require,module,exports) {
var e=require("./_is-regexp"),r=require("./_defined");module.exports=function(i,t,n){if(e(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(i))};
},{"./_is-regexp":"g8m6","./_defined":"Zcur"}],"ed2d":[function(require,module,exports) {
var r=require("./_wks")("match");module.exports=function(t){var c=/./;try{"/./"[t](c)}catch(e){try{return c[r]=!1,!"/./"[t](c)}catch(a){}}return!0};
},{"./_wks":"MgdH"}],"MUpt":[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_to-length"),i=require("./_string-context"),r="endsWith",n=""[r];e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{endsWith:function(e){var s=i(this,e,r),g=arguments.length>1?arguments[1]:void 0,h=t(s.length),l=void 0===g?h:Math.min(t(g),h),u=String(e);return n?n.call(s,u,l):s.slice(l-u.length,l)===u}});
},{"./_export":"NjVL","./_to-length":"HdKs","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"IvzQ":[function(require,module,exports) {
"use strict";var e=require("./_export"),i=require("./_string-context"),r="includes";e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{includes:function(e){return!!~i(this,e,r).indexOf(e,arguments.length>1?arguments[1]:void 0)}});
},{"./_export":"NjVL","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"s8Pp":[function(require,module,exports) {
var r=require("./_export");r(r.P,"String",{repeat:require("./_string-repeat")});
},{"./_export":"NjVL","./_string-repeat":"ezM6"}],"hSvU":[function(require,module,exports) {
"use strict";var t=require("./_export"),r=require("./_to-length"),e=require("./_string-context"),i="startsWith",n=""[i];t(t.P+t.F*require("./_fails-is-regexp")(i),"String",{startsWith:function(t){var s=e(this,t,i),g=r(Math.min(arguments.length>1?arguments[1]:void 0,s.length)),h=String(t);return n?n.call(s,h,g):s.slice(g,g+h.length)===h}});
},{"./_export":"NjVL","./_to-length":"HdKs","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"SUan":[function(require,module,exports) {
var r=require("./_export"),e=require("./_fails"),t=require("./_defined"),n=/"/g,i=function(r,e,i,u){var o=String(t(r)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(u).replace(n,"&quot;")+'"'),a+">"+o+"</"+e+">"};module.exports=function(t,n){var u={};u[t]=n(i),r(r.P+r.F*e(function(){var r=""[t]('"');return r!==r.toLowerCase()||r.split('"').length>3}),"String",u)};
},{"./_export":"NjVL","./_fails":"e5TU","./_defined":"Zcur"}],"Qidu":[function(require,module,exports) {
"use strict";require("./_string-html")("anchor",function(n){return function(r){return n(this,"a","name",r)}});
},{"./_string-html":"SUan"}],"zi4A":[function(require,module,exports) {
"use strict";require("./_string-html")("big",function(t){return function(){return t(this,"big","","")}});
},{"./_string-html":"SUan"}],"tDaT":[function(require,module,exports) {
"use strict";require("./_string-html")("blink",function(n){return function(){return n(this,"blink","","")}});
},{"./_string-html":"SUan"}],"VlCA":[function(require,module,exports) {
"use strict";require("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}});
},{"./_string-html":"SUan"}],"BahM":[function(require,module,exports) {
"use strict";require("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}});
},{"./_string-html":"SUan"}],"f6mn":[function(require,module,exports) {
"use strict";require("./_string-html")("fontcolor",function(t){return function(r){return t(this,"font","color",r)}});
},{"./_string-html":"SUan"}],"Du0n":[function(require,module,exports) {
"use strict";require("./_string-html")("fontsize",function(t){return function(n){return t(this,"font","size",n)}});
},{"./_string-html":"SUan"}],"EmZX":[function(require,module,exports) {
"use strict";require("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}});
},{"./_string-html":"SUan"}],"mlNr":[function(require,module,exports) {
"use strict";require("./_string-html")("link",function(r){return function(t){return r(this,"a","href",t)}});
},{"./_string-html":"SUan"}],"QeD6":[function(require,module,exports) {
"use strict";require("./_string-html")("small",function(t){return function(){return t(this,"small","","")}});
},{"./_string-html":"SUan"}],"ny4U":[function(require,module,exports) {
"use strict";require("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}});
},{"./_string-html":"SUan"}],"Pvqx":[function(require,module,exports) {
"use strict";require("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}});
},{"./_string-html":"SUan"}],"mRpz":[function(require,module,exports) {
"use strict";require("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}});
},{"./_string-html":"SUan"}],"qW2d":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Date",{now:function(){return(new Date).getTime()}});
},{"./_export":"NjVL"}],"DLwC":[function(require,module,exports) {
"use strict";var t=require("./_export"),e=require("./_to-object"),r=require("./_to-primitive");t(t.P+t.F*require("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var i=e(this),n=r(i);return"number"!=typeof n||isFinite(n)?i.toISOString():null}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_fails":"e5TU"}],"L3vj":[function(require,module,exports) {
"use strict";var t=require("./_fails"),e=Date.prototype.getTime,i=Date.prototype.toISOString,n=function(t){return t>9?t:"0"+t};module.exports=t(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!t(function(){i.call(new Date(NaN))})?function(){if(!isFinite(e.call(this)))throw RangeError("Invalid time value");var t=this,i=t.getUTCFullYear(),r=t.getUTCMilliseconds(),a=i<0?"-":i>9999?"+":"";return a+("00000"+Math.abs(i)).slice(a?-6:-4)+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+(r>99?r:"0"+n(r))+"Z"}:i;
},{"./_fails":"e5TU"}],"Q9dY":[function(require,module,exports) {
var t=require("./_export"),r=require("./_date-to-iso-string");t(t.P+t.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r});
},{"./_export":"NjVL","./_date-to-iso-string":"L3vj"}],"A8WX":[function(require,module,exports) {
var e=Date.prototype,t="Invalid Date",a="toString",r=e[a],i=e.getTime;new Date(NaN)+""!=t&&require("./_redefine")(e,a,function(){var e=i.call(this);return e==e?r.call(this):t});
},{"./_redefine":"l2hW"}],"p7vl":[function(require,module,exports) {
"use strict";var r=require("./_an-object"),e=require("./_to-primitive"),t="number";module.exports=function(i){if("string"!==i&&i!==t&&"default"!==i)throw TypeError("Incorrect hint");return e(r(this),i!=t)};
},{"./_an-object":"DBsB","./_to-primitive":"PUNq"}],"jJtq":[function(require,module,exports) {
var e=require("./_wks")("toPrimitive"),i=Date.prototype;e in i||require("./_hide")(i,e,require("./_date-to-primitive"));
},{"./_wks":"MgdH","./_hide":"i5RL","./_date-to-primitive":"p7vl"}],"OdQU":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Array",{isArray:require("./_is-array")});
},{"./_export":"NjVL","./_is-array":"OsmR"}],"pqj2":[function(require,module,exports) {
var r=require("./_an-object");module.exports=function(t,e,o,a){try{return a?e(r(o)[0],o[1]):e(o)}catch(n){var c=t.return;throw void 0!==c&&r(c.call(t)),n}};
},{"./_an-object":"DBsB"}],"DsPZ":[function(require,module,exports) {
var r=require("./_iterators"),e=require("./_wks")("iterator"),t=Array.prototype;module.exports=function(o){return void 0!==o&&(r.Array===o||t[e]===o)};
},{"./_iterators":"oANp","./_wks":"MgdH"}],"WfCN":[function(require,module,exports) {
"use strict";var e=require("./_object-dp"),r=require("./_property-desc");module.exports=function(t,i,o){i in t?e.f(t,i,r(0,o)):t[i]=o};
},{"./_object-dp":"wvco","./_property-desc":"B9EI"}],"kX9y":[function(require,module,exports) {
var r=require("./_classof"),e=require("./_wks")("iterator"),t=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(o){if(null!=o)return o[e]||o["@@iterator"]||t[r(o)]};
},{"./_classof":"jP8S","./_wks":"MgdH","./_iterators":"oANp","./_core":"KVo1"}],"Pd7X":[function(require,module,exports) {
var r=require("./_wks")("iterator"),t=!1;try{var n=[7][r]();n.return=function(){t=!0},Array.from(n,function(){throw 2})}catch(e){}module.exports=function(n,u){if(!u&&!t)return!1;var o=!1;try{var c=[7],a=c[r]();a.next=function(){return{done:o=!0}},c[r]=function(){return a},n(c)}catch(e){}return o};
},{"./_wks":"MgdH"}],"hO05":[function(require,module,exports) {
"use strict";var e=require("./_ctx"),r=require("./_export"),t=require("./_to-object"),i=require("./_iter-call"),o=require("./_is-array-iter"),u=require("./_to-length"),n=require("./_create-property"),a=require("./core.get-iterator-method");r(r.S+r.F*!require("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(r){var l,c,f,q,_=t(r),h="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,d=void 0!==y,s=0,g=a(_);if(d&&(y=e(y,v>2?arguments[2]:void 0,2)),null==g||h==Array&&o(g))for(c=new h(l=u(_.length));l>s;s++)n(c,s,d?y(_[s],s):_[s]);else for(q=g.call(_),c=new h;!(f=q.next()).done;s++)n(c,s,d?i(q,y,[f.value,s],!0):f.value);return c.length=s,c}});
},{"./_ctx":"N9ch","./_export":"NjVL","./_to-object":"JfJ5","./_iter-call":"pqj2","./_is-array-iter":"DsPZ","./_to-length":"HdKs","./_create-property":"WfCN","./core.get-iterator-method":"kX9y","./_iter-detect":"Pd7X"}],"ARIR":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_create-property");r(r.S+r.F*require("./_fails")(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var r=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>r;)e(n,r,arguments[r++]);return n.length=t,n}});
},{"./_export":"NjVL","./_create-property":"WfCN","./_fails":"e5TU"}],"FL6U":[function(require,module,exports) {
"use strict";var l=require("./_fails");module.exports=function(n,u){return!!n&&l(function(){u?n.call(null,function(){},1):n.call(null)})};
},{"./_fails":"e5TU"}],"e5fN":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-iobject"),i=[].join;r(r.P+r.F*(require("./_iobject")!=Object||!require("./_strict-method")(i)),"Array",{join:function(r){return i.call(e(this),void 0===r?",":r)}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_iobject":"kZKK","./_strict-method":"FL6U"}],"TSa4":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_html"),i=require("./_cof"),t=require("./_to-absolute-index"),u=require("./_to-length"),a=[].slice;r(r.P+r.F*require("./_fails")(function(){e&&a.call(e)}),"Array",{slice:function(r,e){var l=u(this.length),n=i(this);if(e=void 0===e?l:e,"Array"==n)return a.call(this,r,e);for(var s=t(r,l),c=t(e,l),h=u(c-s),o=new Array(h),f=0;f<h;f++)o[f]="String"==n?this.charAt(s+f):this[s+f];return o}});
},{"./_export":"NjVL","./_html":"DBa9","./_cof":"viv7","./_to-absolute-index":"AXg2","./_to-length":"HdKs","./_fails":"e5TU"}],"xw8W":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_a-function"),i=require("./_to-object"),e=require("./_fails"),o=[].sort,u=[1,2,3];r(r.P+r.F*(e(function(){u.sort(void 0)})||!e(function(){u.sort(null)})||!require("./_strict-method")(o)),"Array",{sort:function(r){return void 0===r?o.call(i(this)):o.call(i(this),t(r))}});
},{"./_export":"NjVL","./_a-function":"L6p4","./_to-object":"JfJ5","./_fails":"e5TU","./_strict-method":"FL6U"}],"UWRR":[function(require,module,exports) {
var r=require("./_is-object"),e=require("./_is-array"),o=require("./_wks")("species");module.exports=function(i){var t;return e(i)&&("function"!=typeof(t=i.constructor)||t!==Array&&!e(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t};
},{"./_is-object":"SP6V","./_is-array":"OsmR","./_wks":"MgdH"}],"yi52":[function(require,module,exports) {
var r=require("./_array-species-constructor");module.exports=function(e,n){return new(r(e))(n)};
},{"./_array-species-constructor":"UWRR"}],"H1nT":[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iobject"),t=require("./_to-object"),i=require("./_to-length"),u=require("./_array-species-create");module.exports=function(n,c){var s=1==n,a=2==n,o=3==n,f=4==n,l=6==n,q=5==n||l,_=c||u;return function(u,c,h){for(var v,p,b=t(u),d=r(b),g=e(c,h,3),j=i(d.length),x=0,m=s?_(u,j):a?_(u,0):void 0;j>x;x++)if((q||x in d)&&(p=g(v=d[x],x,b),n))if(s)m[x]=p;else if(p)switch(n){case 3:return!0;case 5:return v;case 6:return x;case 2:m.push(v)}else if(f)return!1;return l?-1:o||f?f:m}};
},{"./_ctx":"N9ch","./_iobject":"kZKK","./_to-object":"JfJ5","./_to-length":"HdKs","./_array-species-create":"yi52"}],"bomu":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(0),t=require("./_strict-method")([].forEach,!0);r(r.P+r.F*!t,"Array",{forEach:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"P4Vy":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(1);r(r.P+r.F*!require("./_strict-method")([].map,!0),"Array",{map:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"kLvk":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(2);r(r.P+r.F*!require("./_strict-method")([].filter,!0),"Array",{filter:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"jLap":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(3);r(r.P+r.F*!require("./_strict-method")([].some,!0),"Array",{some:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"KLYK":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(4);r(r.P+r.F*!require("./_strict-method")([].every,!0),"Array",{every:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"vp63":[function(require,module,exports) {
var r=require("./_a-function"),e=require("./_to-object"),i=require("./_iobject"),o=require("./_to-length");module.exports=function(t,n,u,a,f){r(n);var c=e(t),l=i(c),h=o(c.length),q=f?h-1:0,_=f?-1:1;if(u<2)for(;;){if(q in l){a=l[q],q+=_;break}if(q+=_,f?q<0:h<=q)throw TypeError("Reduce of empty array with no initial value")}for(;f?q>=0:h>q;q+=_)q in l&&(a=n(a,l[q],q,c));return a};
},{"./_a-function":"L6p4","./_to-object":"JfJ5","./_iobject":"kZKK","./_to-length":"HdKs"}],"dZ7F":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduce,!0),"Array",{reduce:function(r){return e(this,r,arguments.length,arguments[1],!1)}});
},{"./_export":"NjVL","./_array-reduce":"vp63","./_strict-method":"FL6U"}],"Wzw6":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(r){return e(this,r,arguments.length,arguments[1],!0)}});
},{"./_export":"NjVL","./_array-reduce":"vp63","./_strict-method":"FL6U"}],"jGln":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!1),i=[].indexOf,t=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(t||!require("./_strict-method")(i)),"Array",{indexOf:function(r){return t?i.apply(this,arguments)||0:e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-includes":"dIPJ","./_strict-method":"FL6U"}],"iGRw":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-iobject"),t=require("./_to-integer"),i=require("./_to-length"),n=[].lastIndexOf,u=!!n&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(u||!require("./_strict-method")(n)),"Array",{lastIndexOf:function(e){if(u)return n.apply(this,arguments)||0;var a=r(this),o=i(a.length),s=o-1;for(arguments.length>1&&(s=Math.min(s,t(arguments[1]))),s<0&&(s=o+s);s>=0;s--)if(s in a&&a[s]===e)return s||0;return-1}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_to-integer":"cHfm","./_to-length":"HdKs","./_strict-method":"FL6U"}],"okFf":[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),i=require("./_to-length");module.exports=[].copyWithin||function(r,o){var n=e(this),u=i(n.length),h=t(r,u),l=t(o,u),d=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===d?u:t(d,u))-l,u-h),a=1;for(l<h&&h<l+s&&(a=-1,l+=s-1,h+=s-1);s-- >0;)l in n?n[h]=n[l]:delete n[h],h+=a,l+=a;return n};
},{"./_to-object":"JfJ5","./_to-absolute-index":"AXg2","./_to-length":"HdKs"}],"PxQA":[function(require,module,exports) {
var e=require("./_wks")("unscopables"),r=Array.prototype;null==r[e]&&require("./_hide")(r,e,{}),module.exports=function(o){r[e][o]=!0};
},{"./_wks":"MgdH","./_hide":"i5RL"}],"vJRO":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{copyWithin:require("./_array-copy-within")}),require("./_add-to-unscopables")("copyWithin");
},{"./_export":"NjVL","./_array-copy-within":"okFf","./_add-to-unscopables":"PxQA"}],"UYMr":[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),r=require("./_to-length");module.exports=function(o){for(var i=e(this),u=r(i.length),n=arguments.length,d=t(n>1?arguments[1]:void 0,u),l=n>2?arguments[2]:void 0,s=void 0===l?u:t(l,u);s>d;)i[d++]=o;return i};
},{"./_to-object":"JfJ5","./_to-absolute-index":"AXg2","./_to-length":"HdKs"}],"fHCf":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{fill:require("./_array-fill")}),require("./_add-to-unscopables")("fill");
},{"./_export":"NjVL","./_array-fill":"UYMr","./_add-to-unscopables":"PxQA"}],"HBFq":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(5),i="find",n=!0;i in[]&&Array(1)[i](function(){n=!1}),r(r.P+r.F*n,"Array",{find:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(i);
},{"./_export":"NjVL","./_array-methods":"H1nT","./_add-to-unscopables":"PxQA"}],"xRcq":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(6),n="findIndex",i=!0;n in[]&&Array(1)[n](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(n);
},{"./_export":"NjVL","./_array-methods":"H1nT","./_add-to-unscopables":"PxQA"}],"Bn5Q":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_object-dp"),i=require("./_descriptors"),t=require("./_wks")("species");module.exports=function(u){var s=e[u];i&&s&&!s[t]&&r.f(s,t,{configurable:!0,get:function(){return this}})};
},{"./_global":"kql1","./_object-dp":"wvco","./_descriptors":"ZJLI","./_wks":"MgdH"}],"Smp7":[function(require,module,exports) {
require("./_set-species")("Array");
},{"./_set-species":"Bn5Q"}],"t4Zd":[function(require,module,exports) {
module.exports=function(e,n){return{value:n,done:!!e}};
},{}],"xsAw":[function(require,module,exports) {
"use strict";var e=require("./_add-to-unscopables"),r=require("./_iter-step"),t=require("./_iterators"),i=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(e,r){this._t=i(e),this._i=0,this._k=r},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),t.Arguments=t.Array,e("keys"),e("values"),e("entries");
},{"./_add-to-unscopables":"PxQA","./_iter-step":"t4Zd","./_iterators":"oANp","./_to-iobject":"mwRI","./_iter-define":"kgNZ"}],"aRjg":[function(require,module,exports) {
"use strict";var e=require("./_an-object");module.exports=function(){var i=e(this),r="";return i.global&&(r+="g"),i.ignoreCase&&(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),i.sticky&&(r+="y"),r};
},{"./_an-object":"DBsB"}],"hBwo":[function(require,module,exports) {

var e=require("./_global"),r=require("./_inherit-if-required"),i=require("./_object-dp").f,t=require("./_object-gopn").f,n=require("./_is-regexp"),o=require("./_flags"),u=e.RegExp,c=u,s=u.prototype,f=/a/g,a=/a/g,g=new u(f)!==f;if(require("./_descriptors")&&(!g||require("./_fails")(function(){return a[require("./_wks")("match")]=!1,u(f)!=f||u(a)==a||"/a/i"!=u(f,"i")}))){u=function(e,i){var t=this instanceof u,f=n(e),a=void 0===i;return!t&&f&&e.constructor===u&&a?e:r(g?new c(f&&!a?e.source:e,i):c((f=e instanceof u)?e.source:e,f&&a?o.call(e):i),t?this:s,u)};for(var p=function(e){e in u||i(u,e,{configurable:!0,get:function(){return c[e]},set:function(r){c[e]=r}})},q=t(c),_=0;q.length>_;)p(q[_++]);s.constructor=u,u.prototype=s,require("./_redefine")(e,"RegExp",u)}require("./_set-species")("RegExp");
},{"./_global":"kql1","./_inherit-if-required":"oEgy","./_object-dp":"wvco","./_object-gopn":"yyyP","./_is-regexp":"g8m6","./_flags":"aRjg","./_descriptors":"ZJLI","./_fails":"e5TU","./_wks":"MgdH","./_redefine":"l2hW","./_set-species":"Bn5Q"}],"a7p6":[function(require,module,exports) {
"use strict";var e=require("./_flags"),l=RegExp.prototype.exec,t=String.prototype.replace,r=l,a="lastIndex",n=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e[a]||0!==t[a]}(),o=void 0!==/()??/.exec("")[1],c=n||o;c&&(r=function(r){var c,i,g,u,p=this;return o&&(i=new RegExp("^"+p.source+"$(?!\\s)",e.call(p))),n&&(c=p[a]),g=l.call(p,r),n&&g&&(p[a]=p.global?g.index+g[0].length:c),o&&g&&g.length>1&&t.call(g[0],i,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(g[u]=void 0)}),g}),module.exports=r;
},{"./_flags":"aRjg"}],"ej7E":[function(require,module,exports) {
"use strict";var e=require("./_regexp-exec");require("./_export")({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e});
},{"./_regexp-exec":"a7p6","./_export":"NjVL"}],"SALB":[function(require,module,exports) {
require("./_descriptors")&&"g"!=/./g.flags&&require("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:require("./_flags")});
},{"./_descriptors":"ZJLI","./_object-dp":"wvco","./_flags":"aRjg"}],"yEH7":[function(require,module,exports) {

"use strict";require("./es6.regexp.flags");var e=require("./_an-object"),r=require("./_flags"),i=require("./_descriptors"),n="toString",t=/./[n],a=function(e){require("./_redefine")(RegExp.prototype,n,e,!0)};require("./_fails")(function(){return"/a/b"!=t.call({source:"a",flags:"b"})})?a(function(){var n=e(this);return"/".concat(n.source,"/","flags"in n?n.flags:!i&&n instanceof RegExp?r.call(n):void 0)}):t.name!=n&&a(function(){return t.call(this)});
},{"./es6.regexp.flags":"SALB","./_an-object":"DBsB","./_flags":"aRjg","./_descriptors":"ZJLI","./_redefine":"l2hW","./_fails":"e5TU"}],"aXIG":[function(require,module,exports) {
"use strict";var r=require("./_string-at")(!0);module.exports=function(t,e,n){return e+(n?r(t,e).length:1)};
},{"./_string-at":"BiTF"}],"G0TB":[function(require,module,exports) {
"use strict";var e=require("./_classof"),r=RegExp.prototype.exec;module.exports=function(t,o){var c=t.exec;if("function"==typeof c){var n=c.call(t,o);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,o)};
},{"./_classof":"jP8S"}],"w7ZK":[function(require,module,exports) {
"use strict";require("./es6.regexp.exec");var e=require("./_redefine"),r=require("./_hide"),n=require("./_fails"),t=require("./_defined"),u=require("./_wks"),i=require("./_regexp-exec"),c=u("species"),o=!n(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),a=function(){var e=/(?:)/,r=e.exec;e.exec=function(){return r.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();module.exports=function(l,f,p){var s=u(l),v=!n(function(){var e={};return e[s]=function(){return 7},7!=""[l](e)}),x=v?!n(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===l&&(r.constructor={},r.constructor[c]=function(){return r}),r[s](""),!e}):void 0;if(!v||!x||"replace"===l&&!o||"split"===l&&!a){var d=/./[s],q=p(t,s,""[l],function(e,r,n,t,u){return r.exec===i?v&&!u?{done:!0,value:d.call(r,n,t)}:{done:!0,value:e.call(n,r,t)}:{done:!1}}),g=q[0],_=q[1];e(String.prototype,l,g),r(RegExp.prototype,s,2==f?function(e,r){return _.call(e,this,r)}:function(e){return _.call(e,this)})}};
},{"./es6.regexp.exec":"ej7E","./_redefine":"l2hW","./_hide":"i5RL","./_fails":"e5TU","./_defined":"Zcur","./_wks":"MgdH","./_regexp-exec":"a7p6"}],"yikX":[function(require,module,exports) {
"use strict";var r=require("./_an-object"),e=require("./_to-length"),n=require("./_advance-string-index"),t=require("./_regexp-exec-abstract");require("./_fix-re-wks")("match",1,function(i,a,u,l){return[function(r){var e=i(this),n=null==r?void 0:r[a];return void 0!==n?n.call(r,e):new RegExp(r)[a](String(e))},function(i){var a=l(u,i,this);if(a.done)return a.value;var c=r(i),o=String(this);if(!c.global)return t(c,o);var s=c.unicode;c.lastIndex=0;for(var v,d=[],g=0;null!==(v=t(c,o));){var x=String(v[0]);d[g]=x,""===x&&(c.lastIndex=n(o,e(c.lastIndex),s)),g++}return 0===g?null:d}]});
},{"./_an-object":"DBsB","./_to-length":"HdKs","./_advance-string-index":"aXIG","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"eUHu":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3],e=require("./_an-object"),t=require("./_to-object"),n=require("./_to-length"),i=require("./_to-integer"),a=require("./_advance-string-index"),u=require("./_regexp-exec-abstract"),c=Math.max,l=Math.min,o=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,s=/\$([$&`']|\d\d?)/g,g=function(r){return void 0===r?r:String(r)};require("./_fix-re-wks")("replace",2,function(r,d,f,h){return[function(e,t){var n=r(this),i=null==e?void 0:e[d];return void 0!==i?i.call(e,n,t):f.call(String(n),e,t)},function(r,t){var o=h(f,r,this,t);if(o.done)return o.value;var v=e(r),s=String(this),d="function"==typeof t;d||(t=String(t));var x=v.global;if(x){var b=v.unicode;v.lastIndex=0}for(var q=[];;){var S=u(v,s);if(null===S)break;if(q.push(S),!x)break;""===String(S[0])&&(v.lastIndex=a(s,n(v.lastIndex),b))}for(var _="",$=0,k=0;k<q.length;k++){S=q[k];for(var m=String(S[0]),A=c(l(i(S.index),s.length),0),I=[],M=1;M<S.length;M++)I.push(g(S[M]));var j=S.groups;if(d){var w=[m].concat(I,A,s);void 0!==j&&w.push(j);var y=String(t.apply(void 0,w))}else y=p(m,s,A,I,j,t);A>=$&&(_+=s.slice($,A)+y,$=A+m.length)}return _+s.slice($)}];function p(r,e,n,i,a,u){var c=n+r.length,l=i.length,g=s;return void 0!==a&&(a=t(a),g=v),f.call(u,g,function(t,u){var v;switch(u.charAt(0)){case"$":return"$";case"&":return r;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":v=a[u.slice(1,-1)];break;default:var s=+u;if(0===s)return t;if(s>l){var g=o(s/10);return 0===g?t:g<=l?void 0===i[g-1]?u.charAt(1):i[g-1]+u.charAt(1):t}v=i[s-1]}return void 0===v?"":v})}});
},{"./_an-object":"DBsB","./_to-object":"JfJ5","./_to-length":"HdKs","./_to-integer":"cHfm","./_advance-string-index":"aXIG","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"iHvG":[function(require,module,exports) {
"use strict";var e=require("./_an-object"),r=require("./_same-value"),n=require("./_regexp-exec-abstract");require("./_fix-re-wks")("search",1,function(t,i,a,u){return[function(e){var r=t(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,r):new RegExp(e)[i](String(r))},function(t){var i=u(a,t,this);if(i.done)return i.value;var s=e(t),l=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var v=n(s,l);return r(s.lastIndex,c)||(s.lastIndex=c),null===v?-1:v.index}]});
},{"./_an-object":"DBsB","./_same-value":"YyyQ","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"pC8t":[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_a-function"),u=require("./_wks")("species");module.exports=function(n,o){var i,t=r(n).constructor;return void 0===t||null==(i=r(t)[u])?o:e(i)};
},{"./_an-object":"DBsB","./_a-function":"L6p4","./_wks":"MgdH"}],"V8KN":[function(require,module,exports) {
"use strict";var e=require("./_is-regexp"),r=require("./_an-object"),i=require("./_species-constructor"),n=require("./_advance-string-index"),t=require("./_to-length"),u=require("./_regexp-exec-abstract"),l=require("./_regexp-exec"),s=require("./_fails"),c=Math.min,a=[].push,o="split",g="length",h="lastIndex",d=4294967295,f=!s(function(){RegExp(d,"y")});require("./_fix-re-wks")("split",2,function(s,v,p,x){var q;return q="c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[g]||2!="ab"[o](/(?:ab)*/)[g]||4!="."[o](/(.?)(.?)/)[g]||"."[o](/()()/)[g]>1||""[o](/.?/)[g]?function(r,i){var n=String(this);if(void 0===r&&0===i)return[];if(!e(r))return p.call(n,r,i);for(var t,u,s,c=[],o=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(r.sticky?"y":""),f=0,v=void 0===i?d:i>>>0,x=new RegExp(r.source,o+"g");(t=l.call(x,n))&&!((u=x[h])>f&&(c.push(n.slice(f,t.index)),t[g]>1&&t.index<n[g]&&a.apply(c,t.slice(1)),s=t[0][g],f=u,c[g]>=v));)x[h]===t.index&&x[h]++;return f===n[g]?!s&&x.test("")||c.push(""):c.push(n.slice(f)),c[g]>v?c.slice(0,v):c}:"0"[o](void 0,0)[g]?function(e,r){return void 0===e&&0===r?[]:p.call(this,e,r)}:p,[function(e,r){var i=s(this),n=null==e?void 0:e[v];return void 0!==n?n.call(e,i,r):q.call(String(i),e,r)},function(e,l){var s=x(q,e,this,l,q!==p);if(s.done)return s.value;var a=r(e),o=String(this),g=i(a,RegExp),h=a.unicode,v=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(f?"y":"g"),_=new g(f?a:"^(?:"+a.source+")",v),b=void 0===l?d:l>>>0;if(0===b)return[];if(0===o.length)return null===u(_,o)?[o]:[];for(var m=0,y=0,w=[];y<o.length;){_.lastIndex=f?y:0;var E,I=u(_,f?o:o.slice(y));if(null===I||(E=c(t(_.lastIndex+(f?0:y)),o.length))===m)y=n(o,y,h);else{if(w.push(o.slice(m,y)),w.length===b)return w;for(var R=1;R<=I.length-1;R++)if(w.push(I[R]),w.length===b)return w;y=m=E}}return w.push(o.slice(m)),w}]});
},{"./_is-regexp":"g8m6","./_an-object":"DBsB","./_species-constructor":"pC8t","./_advance-string-index":"aXIG","./_to-length":"HdKs","./_regexp-exec-abstract":"G0TB","./_regexp-exec":"a7p6","./_fails":"e5TU","./_fix-re-wks":"w7ZK"}],"XE1H":[function(require,module,exports) {
module.exports=function(o,n,r,i){if(!(o instanceof n)||void 0!==i&&i in o)throw TypeError(r+": incorrect invocation!");return o};
},{}],"Pqba":[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iter-call"),t=require("./_is-array-iter"),i=require("./_an-object"),o=require("./_to-length"),n=require("./core.get-iterator-method"),u={},a={},f=module.exports=function(f,l,c,q,_){var h,s,d,g,p=_?function(){return f}:n(f),v=e(c,q,l?2:1),x=0;if("function"!=typeof p)throw TypeError(f+" is not iterable!");if(t(p)){for(h=o(f.length);h>x;x++)if((g=l?v(i(s=f[x])[0],s[1]):v(f[x]))===u||g===a)return g}else for(d=p.call(f);!(s=d.next()).done;)if((g=r(d,v,s.value,l))===u||g===a)return g};f.BREAK=u,f.RETURN=a;
},{"./_ctx":"N9ch","./_iter-call":"pqj2","./_is-array-iter":"DsPZ","./_an-object":"DBsB","./_to-length":"HdKs","./core.get-iterator-method":"kX9y"}],"sbFn":[function(require,module,exports) {


var e,t,n,i=require("./_ctx"),o=require("./_invoke"),r=require("./_html"),s=require("./_dom-create"),a=require("./_global"),c=a.process,u=a.setImmediate,p=a.clearImmediate,f=a.MessageChannel,l=a.Dispatch,d=0,m={},h="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){g.call(e.data)};u&&p||(u=function(t){for(var n=[],i=1;arguments.length>i;)n.push(arguments[i++]);return m[++d]=function(){o("function"==typeof t?t:Function(t),n)},e(d),d},p=function(e){delete m[e]},"process"==require("./_cof")(c)?e=function(e){c.nextTick(i(g,e,1))}:l&&l.now?e=function(e){l.now(i(g,e,1))}:f?(n=(t=new f).port2,t.port1.onmessage=v,e=i(n.postMessage,n,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(e=function(e){a.postMessage(e+"","*")},a.addEventListener("message",v,!1)):e=h in s("script")?function(e){r.appendChild(s("script"))[h]=function(){r.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),module.exports={set:u,clear:p};
},{"./_ctx":"N9ch","./_invoke":"TTev","./_html":"DBa9","./_dom-create":"dDni","./_global":"kql1","./_cof":"viv7"}],"i1HG":[function(require,module,exports) {


var e=require("./_global"),t=require("./_task").set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,o=e.Promise,a="process"==require("./_cof")(n);module.exports=function(){var i,c,s,v=function(){var e,t;for(a&&(e=n.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(r){throw i?s():c=void 0,r}}c=void 0,e&&e.enter()};if(a)s=function(){n.nextTick(v)};else if(!r||e.navigator&&e.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);s=function(){u.then(v)}}else s=function(){t.call(e,v)};else{var f=!0,l=document.createTextNode("");new r(v).observe(l,{characterData:!0}),s=function(){l.data=f=!f}}return function(e){var t={fn:e,next:void 0};c&&(c.next=t),i||(i=t,s()),c=t}};
},{"./_global":"kql1","./_task":"sbFn","./_cof":"viv7"}],"Mdjk":[function(require,module,exports) {
"use strict";var r=require("./_a-function");function e(e){var o,t;this.promise=new e(function(r,e){if(void 0!==o||void 0!==t)throw TypeError("Bad Promise constructor");o=r,t=e}),this.resolve=r(o),this.reject=r(t)}module.exports.f=function(r){return new e(r)};
},{"./_a-function":"L6p4"}],"eKV1":[function(require,module,exports) {
module.exports=function(e){try{return{e:!1,v:e()}}catch(r){return{e:!0,v:r}}};
},{}],"SWOj":[function(require,module,exports) {

var e=require("./_global"),r=e.navigator;module.exports=r&&r.userAgent||"";
},{"./_global":"kql1"}],"bQCN":[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_is-object"),i=require("./_new-promise-capability");module.exports=function(o,t){if(r(o),e(t)&&t.constructor===o)return t;var u=i.f(o);return(0,u.resolve)(t),u.promise};
},{"./_an-object":"DBsB","./_is-object":"SP6V","./_new-promise-capability":"Mdjk"}],"XX7Z":[function(require,module,exports) {
var r=require("./_redefine");module.exports=function(e,n,i){for(var o in n)r(e,o,n[o],i);return e};
},{"./_redefine":"l2hW"}],"ar2B":[function(require,module,exports) {


"use strict";var e,r,t,i,n=require("./_library"),o=require("./_global"),c=require("./_ctx"),s=require("./_classof"),u=require("./_export"),a=require("./_is-object"),_=require("./_a-function"),h=require("./_an-instance"),f=require("./_for-of"),l=require("./_species-constructor"),v=require("./_task").set,d=require("./_microtask")(),p=require("./_new-promise-capability"),m=require("./_perform"),q=require("./_user-agent"),y=require("./_promise-resolve"),j="Promise",w=o.TypeError,g=o.process,x=g&&g.versions,b=x&&x.v8||"",k=o[j],P="process"==s(g),F=function(){},S=r=p.f,E=!!function(){try{var e=k.resolve(1),r=(e.constructor={})[require("./_wks")("species")]=function(e){e(F,F)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(F)instanceof r&&0!==b.indexOf("6.6")&&-1===q.indexOf("Chrome/66")}catch(t){}}(),O=function(e){var r;return!(!a(e)||"function"!=typeof(r=e.then))&&r},R=function(e,r){if(!e._n){e._n=!0;var t=e._c;d(function(){for(var i=e._v,n=1==e._s,o=0,c=function(r){var t,o,c,s=n?r.ok:r.fail,u=r.resolve,a=r.reject,_=r.domain;try{s?(n||(2==e._h&&H(e),e._h=1),!0===s?t=i:(_&&_.enter(),t=s(i),_&&(_.exit(),c=!0)),t===r.promise?a(w("Promise-chain cycle")):(o=O(t))?o.call(t,u,a):u(t)):a(i)}catch(h){_&&!c&&_.exit(),a(h)}};t.length>o;)c(t[o++]);e._c=[],e._n=!1,r&&!e._h&&C(e)})}},C=function(e){v.call(o,function(){var r,t,i,n=e._v,c=G(e);if(c&&(r=m(function(){P?g.emit("unhandledRejection",n,e):(t=o.onunhandledrejection)?t({promise:e,reason:n}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",n)}),e._h=P||G(e)?2:1),e._a=void 0,c&&r.e)throw r.v})},G=function(e){return 1!==e._h&&0===(e._a||e._c).length},H=function(e){v.call(o,function(){var r;P?g.emit("rejectionHandled",e):(r=o.onrejectionhandled)&&r({promise:e,reason:e._v})})},T=function(e){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=e,r._s=2,r._a||(r._a=r._c.slice()),R(r,!0))},U=function(e){var r,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw w("Promise can't be resolved itself");(r=O(e))?d(function(){var i={_w:t,_d:!1};try{r.call(e,c(U,i,1),c(T,i,1))}catch(n){T.call(i,n)}}):(t._v=e,t._s=1,R(t,!1))}catch(i){T.call({_w:t,_d:!1},i)}}};E||(k=function(r){h(this,k,j,"_h"),_(r),e.call(this);try{r(c(U,this,1),c(T,this,1))}catch(t){T.call(this,t)}},(e=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=require("./_redefine-all")(k.prototype,{then:function(e,r){var t=S(l(this,k));return t.ok="function"!=typeof e||e,t.fail="function"==typeof r&&r,t.domain=P?g.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&R(this,!1),t.promise},catch:function(e){return this.then(void 0,e)}}),t=function(){var r=new e;this.promise=r,this.resolve=c(U,r,1),this.reject=c(T,r,1)},p.f=S=function(e){return e===k||e===i?new t(e):r(e)}),u(u.G+u.W+u.F*!E,{Promise:k}),require("./_set-to-string-tag")(k,j),require("./_set-species")(j),i=require("./_core")[j],u(u.S+u.F*!E,j,{reject:function(e){var r=S(this);return(0,r.reject)(e),r.promise}}),u(u.S+u.F*(n||!E),j,{resolve:function(e){return y(n&&this===i?k:this,e)}}),u(u.S+u.F*!(E&&require("./_iter-detect")(function(e){k.all(e).catch(F)})),j,{all:function(e){var r=this,t=S(r),i=t.resolve,n=t.reject,o=m(function(){var t=[],o=0,c=1;f(e,!1,function(e){var s=o++,u=!1;t.push(void 0),c++,r.resolve(e).then(function(e){u||(u=!0,t[s]=e,--c||i(t))},n)}),--c||i(t)});return o.e&&n(o.v),t.promise},race:function(e){var r=this,t=S(r),i=t.reject,n=m(function(){f(e,!1,function(e){r.resolve(e).then(t.resolve,i)})});return n.e&&i(n.v),t.promise}});
},{"./_library":"Nw1e","./_global":"kql1","./_ctx":"N9ch","./_classof":"jP8S","./_export":"NjVL","./_is-object":"SP6V","./_a-function":"L6p4","./_an-instance":"XE1H","./_for-of":"Pqba","./_species-constructor":"pC8t","./_task":"sbFn","./_microtask":"i1HG","./_new-promise-capability":"Mdjk","./_perform":"eKV1","./_user-agent":"SWOj","./_promise-resolve":"bQCN","./_wks":"MgdH","./_redefine-all":"XX7Z","./_set-to-string-tag":"iqAm","./_set-species":"Bn5Q","./_core":"KVo1","./_iter-detect":"Pd7X"}],"dVG8":[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e,i){if(!r(e)||e._t!==i)throw TypeError("Incompatible receiver, "+i+" required!");return e};
},{"./_is-object":"SP6V"}],"lQcB":[function(require,module,exports) {
"use strict";var e=require("./_object-dp").f,r=require("./_object-create"),t=require("./_redefine-all"),i=require("./_ctx"),n=require("./_an-instance"),_=require("./_for-of"),o=require("./_iter-define"),u=require("./_iter-step"),f=require("./_set-species"),s=require("./_descriptors"),l=require("./_meta").fastKey,c=require("./_validate-collection"),v=s?"_s":"size",a=function(e,r){var t,i=l(r);if("F"!==i)return e._i[i];for(t=e._f;t;t=t.n)if(t.k==r)return t};module.exports={getConstructor:function(o,u,f,l){var h=o(function(e,t){n(e,h,u,"_i"),e._t=u,e._i=r(null),e._f=void 0,e._l=void 0,e[v]=0,null!=t&&_(t,f,e[l],e)});return t(h.prototype,{clear:function(){for(var e=c(this,u),r=e._i,t=e._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete r[t.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=c(this,u),t=a(r,e);if(t){var i=t.n,n=t.p;delete r._i[t.i],t.r=!0,n&&(n.n=i),i&&(i.p=n),r._f==t&&(r._f=i),r._l==t&&(r._l=n),r[v]--}return!!t},forEach:function(e){c(this,u);for(var r,t=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(t(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!a(c(this,u),e)}}),s&&e(h.prototype,"size",{get:function(){return c(this,u)[v]}}),h},def:function(e,r,t){var i,n,_=a(e,r);return _?_.v=t:(e._l=_={i:n=l(r,!0),k:r,v:t,p:i=e._l,n:void 0,r:!1},e._f||(e._f=_),i&&(i.n=_),e[v]++,"F"!==n&&(e._i[n]=_)),e},getEntry:a,setStrong:function(e,r,t){o(e,r,function(e,t){this._t=c(e,r),this._k=t,this._l=void 0},function(){for(var e=this._k,r=this._l;r&&r.r;)r=r.p;return this._t&&(this._l=r=r?r.n:this._t._f)?u(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(this._t=void 0,u(1))},t?"entries":"values",!t,!0),f(r)}};
},{"./_object-dp":"wvco","./_object-create":"d4Ek","./_redefine-all":"XX7Z","./_ctx":"N9ch","./_an-instance":"XE1H","./_for-of":"Pqba","./_iter-define":"kgNZ","./_iter-step":"t4Zd","./_set-species":"Bn5Q","./_descriptors":"ZJLI","./_meta":"RGdG","./_validate-collection":"dVG8"}],"K3M2":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_export"),t=require("./_redefine"),n=require("./_redefine-all"),i=require("./_meta"),u=require("./_for-of"),o=require("./_an-instance"),c=require("./_is-object"),a=require("./_fails"),s=require("./_iter-detect"),l=require("./_set-to-string-tag"),f=require("./_inherit-if-required");module.exports=function(d,h,q,_,p,g){var v=e[d],w=v,y=p?"set":"add",x=w&&w.prototype,E={},b=function(e){var r=x[e];t(x,e,"delete"==e?function(e){return!(g&&!c(e))&&r.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:r.call(this,0===e?0:e)}:"add"==e?function(e){return r.call(this,0===e?0:e),this}:function(e,t){return r.call(this,0===e?0:e,t),this})};if("function"==typeof w&&(g||x.forEach&&!a(function(){(new w).entries().next()}))){var m=new w,j=m[y](g?{}:-0,1)!=m,C=a(function(){m.has(1)}),D=s(function(e){new w(e)}),F=!g&&a(function(){for(var e=new w,r=5;r--;)e[y](r,r);return!e.has(-0)});D||((w=h(function(e,r){o(e,w,d);var t=f(new v,e,w);return null!=r&&u(r,p,t[y],t),t})).prototype=x,x.constructor=w),(C||F)&&(b("delete"),b("has"),p&&b("get")),(F||j)&&b(y),g&&x.clear&&delete x.clear}else w=_.getConstructor(h,d,p,y),n(w.prototype,q),i.NEED=!0;return l(w,d),E[d]=w,r(r.G+r.W+r.F*(w!=v),E),g||_.setStrong(w,d,p),w};
},{"./_global":"kql1","./_export":"NjVL","./_redefine":"l2hW","./_redefine-all":"XX7Z","./_meta":"RGdG","./_for-of":"Pqba","./_an-instance":"XE1H","./_is-object":"SP6V","./_fails":"e5TU","./_iter-detect":"Pd7X","./_set-to-string-tag":"iqAm","./_inherit-if-required":"oEgy"}],"v0j2":[function(require,module,exports) {
"use strict";var t=require("./_collection-strong"),e=require("./_validate-collection"),r="Map";module.exports=require("./_collection")(r,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(n){var i=t.getEntry(e(this,r),n);return i&&i.v},set:function(n,i){return t.def(e(this,r),0===n?0:n,i)}},t,!0);
},{"./_collection-strong":"lQcB","./_validate-collection":"dVG8","./_collection":"K3M2"}],"igWm":[function(require,module,exports) {
"use strict";var e=require("./_collection-strong"),t=require("./_validate-collection"),r="Set";module.exports=require("./_collection")(r,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=0===i?0:i,i)}},e);
},{"./_collection-strong":"lQcB","./_validate-collection":"dVG8","./_collection":"K3M2"}],"BPwe":[function(require,module,exports) {
"use strict";var e=require("./_redefine-all"),t=require("./_meta").getWeak,r=require("./_an-object"),i=require("./_is-object"),n=require("./_an-instance"),u=require("./_for-of"),o=require("./_array-methods"),s=require("./_has"),a=require("./_validate-collection"),c=o(5),f=o(6),_=0,h=function(e){return e._l||(e._l=new l)},l=function(){this.a=[]},d=function(e,t){return c(e.a,function(e){return e[0]===t})};l.prototype={get:function(e){var t=d(this,e);if(t)return t[1]},has:function(e){return!!d(this,e)},set:function(e,t){var r=d(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},module.exports={getConstructor:function(r,o,c,f){var l=r(function(e,t){n(e,l,o,"_i"),e._t=o,e._i=_++,e._l=void 0,null!=t&&u(t,c,e[f],e)});return e(l.prototype,{delete:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).delete(e):r&&s(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).has(e):r&&s(r,this._i)}}),l},def:function(e,i,n){var u=t(r(i),!0);return!0===u?h(e).set(i,n):u[e._i]=n,e},ufstore:h};
},{"./_redefine-all":"XX7Z","./_meta":"RGdG","./_an-object":"DBsB","./_is-object":"SP6V","./_an-instance":"XE1H","./_for-of":"Pqba","./_array-methods":"H1nT","./_has":"nW2g","./_validate-collection":"dVG8"}],"yBwO":[function(require,module,exports) {

"use strict";var e,t=require("./_global"),r=require("./_array-methods")(0),i=require("./_redefine"),n=require("./_meta"),o=require("./_object-assign"),u=require("./_collection-weak"),c=require("./_is-object"),s=require("./_validate-collection"),a=require("./_validate-collection"),l=!t.ActiveXObject&&"ActiveXObject"in t,f="WeakMap",_=n.getWeak,h=Object.isExtensible,q=u.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(e){if(c(e)){var t=_(e);return!0===t?q(s(this,f)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(s(this,f),e,t)}},g=module.exports=require("./_collection")(f,v,d,u,!0,!0);a&&l&&(o((e=u.getConstructor(v,f)).prototype,d),n.NEED=!0,r(["delete","has","get","set"],function(t){var r=g.prototype,n=r[t];i(r,t,function(r,i){if(c(r)&&!h(r)){this._f||(this._f=new e);var o=this._f[t](r,i);return"set"==t?this:o}return n.call(this,r,i)})}));
},{"./_global":"kql1","./_array-methods":"H1nT","./_redefine":"l2hW","./_meta":"RGdG","./_object-assign":"bBGE","./_collection-weak":"BPwe","./_is-object":"SP6V","./_validate-collection":"dVG8","./_collection":"K3M2"}],"YtBU":[function(require,module,exports) {
"use strict";var e=require("./_collection-weak"),t=require("./_validate-collection"),i="WeakSet";require("./_collection")(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(r){return e.def(t(this,i),r,!0)}},e,!1,!0);
},{"./_collection-weak":"BPwe","./_validate-collection":"dVG8","./_collection":"K3M2"}],"F7Ll":[function(require,module,exports) {

for(var r,a=require("./_global"),t=require("./_hide"),e=require("./_uid"),y=e("typed_array"),i=e("view"),A=!(!a.ArrayBuffer||!a.DataView),o=A,p=0,l=9,n="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<l;)(r=a[n[p++]])?(t(r.prototype,y,!0),t(r.prototype,i,!0)):o=!1;module.exports={ABV:A,CONSTR:o,TYPED:y,VIEW:i};
},{"./_global":"kql1","./_hide":"i5RL","./_uid":"f0sk"}],"JyiF":[function(require,module,exports) {
var r=require("./_to-integer"),e=require("./_to-length");module.exports=function(t){if(void 0===t)return 0;var n=r(t),o=e(n);if(n!==o)throw RangeError("Wrong length!");return o};
},{"./_to-integer":"cHfm","./_to-length":"HdKs"}],"DGXU":[function(require,module,exports) {

"use strict";var t=require("./_global"),n=require("./_descriptors"),r=require("./_library"),e=require("./_typed"),i=require("./_hide"),o=require("./_redefine-all"),u=require("./_fails"),f=require("./_an-instance"),s=require("./_to-integer"),c=require("./_to-length"),a=require("./_to-index"),h=require("./_object-gopn").f,l=require("./_object-dp").f,g=require("./_array-fill"),_=require("./_set-to-string-tag"),q="ArrayBuffer",v="DataView",w="prototype",I="Wrong length!",b="Wrong index!",y=t[q],p=t[v],d=t.Math,U=t.RangeError,N=t.Infinity,x=y,A=d.abs,F=d.pow,W=d.floor,V=d.log,j=d.LN2,B="buffer",E="byteLength",L="byteOffset",m=n?"_b":B,D=n?"_l":E,M=n?"_o":L;function O(t,n,r){var e,i,o,u=new Array(r),f=8*r-n-1,s=(1<<f)-1,c=s>>1,a=23===n?F(2,-24)-F(2,-77):0,h=0,l=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===N?(i=t!=t?1:0,e=s):(e=W(V(t)/j),t*(o=F(2,-e))<1&&(e--,o*=2),(t+=e+c>=1?a/o:a*F(2,1-c))*o>=2&&(e++,o/=2),e+c>=s?(i=0,e=s):e+c>=1?(i=(t*o-1)*F(2,n),e+=c):(i=t*F(2,c-1)*F(2,n),e=0));n>=8;u[h++]=255&i,i/=256,n-=8);for(e=e<<n|i,f+=n;f>0;u[h++]=255&e,e/=256,f-=8);return u[--h]|=128*l,u}function R(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,f=i-7,s=r-1,c=t[s--],a=127&c;for(c>>=7;f>0;a=256*a+t[s],s--,f-=8);for(e=a&(1<<-f)-1,a>>=-f,f+=n;f>0;e=256*e+t[s],s--,f-=8);if(0===a)a=1-u;else{if(a===o)return e?NaN:c?-N:N;e+=F(2,n),a-=u}return(c?-1:1)*e*F(2,a-n)}function k(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function z(t){return[255&t]}function C(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return O(t,52,8)}function J(t){return O(t,23,4)}function K(t,n,r){l(t[w],n,{get:function(){return this[r]}})}function P(t,n,r,e){var i=a(+r);if(i+n>t[D])throw U(b);var o=t[m]._b,u=i+t[M],f=o.slice(u,u+n);return e?f:f.reverse()}function Q(t,n,r,e,i,o){var u=a(+r);if(u+n>t[D])throw U(b);for(var f=t[m]._b,s=u+t[M],c=e(+i),h=0;h<n;h++)f[s+h]=c[o?h:n-h-1]}if(e.ABV){if(!u(function(){y(1)})||!u(function(){new y(-1)})||u(function(){return new y,new y(1.5),new y(NaN),y.name!=q})){for(var S,T=(y=function(t){return f(this,y),new x(a(t))})[w]=x[w],X=h(x),Y=0;X.length>Y;)(S=X[Y++])in y||i(y,S,x[S]);r||(T.constructor=y)}var Z=new p(new y(2)),$=p[w].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||o(p[w],{setInt8:function(t,n){$.call(this,t,n<<24>>24)},setUint8:function(t,n){$.call(this,t,n<<24>>24)}},!0)}else y=function(t){f(this,y,q);var n=a(t);this._b=g.call(new Array(n),0),this[D]=n},p=function(t,n,r){f(this,p,v),f(t,y,v);var e=t[D],i=s(n);if(i<0||i>e)throw U("Wrong offset!");if(i+(r=void 0===r?e-i:c(r))>e)throw U(I);this[m]=t,this[M]=i,this[D]=r},n&&(K(y,E,"_l"),K(p,B,"_b"),K(p,E,"_l"),K(p,L,"_o")),o(p[w],{getInt8:function(t){return P(this,1,t)[0]<<24>>24},getUint8:function(t){return P(this,1,t)[0]},getInt16:function(t){var n=P(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=P(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return k(P(this,4,t,arguments[1]))},getUint32:function(t){return k(P(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return R(P(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return R(P(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){Q(this,1,t,z,n)},setUint8:function(t,n){Q(this,1,t,z,n)},setInt16:function(t,n){Q(this,2,t,C,n,arguments[2])},setUint16:function(t,n){Q(this,2,t,C,n,arguments[2])},setInt32:function(t,n){Q(this,4,t,G,n,arguments[2])},setUint32:function(t,n){Q(this,4,t,G,n,arguments[2])},setFloat32:function(t,n){Q(this,4,t,J,n,arguments[2])},setFloat64:function(t,n){Q(this,8,t,H,n,arguments[2])}});_(y,q),_(p,v),i(p[w],e.VIEW,!0),exports[q]=y,exports[v]=p;
},{"./_global":"kql1","./_descriptors":"ZJLI","./_library":"Nw1e","./_typed":"F7Ll","./_hide":"i5RL","./_redefine-all":"XX7Z","./_fails":"e5TU","./_an-instance":"XE1H","./_to-integer":"cHfm","./_to-length":"HdKs","./_to-index":"JyiF","./_object-gopn":"yyyP","./_object-dp":"wvco","./_array-fill":"UYMr","./_set-to-string-tag":"iqAm"}],"tZr0":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_typed"),i=require("./_typed-buffer"),t=require("./_an-object"),u=require("./_to-absolute-index"),n=require("./_to-length"),s=require("./_is-object"),o=require("./_global").ArrayBuffer,f=require("./_species-constructor"),c=i.ArrayBuffer,a=i.DataView,q=r.ABV&&o.isView,_=c.prototype.slice,l=r.VIEW,y="ArrayBuffer";e(e.G+e.W+e.F*(o!==c),{ArrayBuffer:c}),e(e.S+e.F*!r.CONSTR,y,{isView:function(e){return q&&q(e)||s(e)&&l in e}}),e(e.P+e.U+e.F*require("./_fails")(function(){return!new c(2).slice(1,void 0).byteLength}),y,{slice:function(e,r){if(void 0!==_&&void 0===r)return _.call(t(this),e);for(var i=t(this).byteLength,s=u(e,i),o=u(void 0===r?i:r,i),q=new(f(this,c))(n(o-s)),l=new a(this),y=new a(q),b=0;s<o;)y.setUint8(b++,l.getUint8(s++));return q}}),require("./_set-species")(y);
},{"./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU","./_an-object":"DBsB","./_to-absolute-index":"AXg2","./_to-length":"HdKs","./_is-object":"SP6V","./_global":"kql1","./_species-constructor":"pC8t","./_fails":"e5TU","./_set-species":"Bn5Q"}],"s1Mz":[function(require,module,exports) {
var e=require("./_export");e(e.G+e.W+e.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView});
},{"./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU"}],"kRz2":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];if(require("./_descriptors")){var r=require("./_library"),t=(e=require("./_global"),require("./_fails")),n=require("./_export"),i=require("./_typed"),o=require("./_typed-buffer"),u=require("./_ctx"),c=require("./_an-instance"),f=require("./_property-desc"),a=require("./_hide"),l=require("./_redefine-all"),s=require("./_to-integer"),h=require("./_to-length"),d=require("./_to-index"),g=require("./_to-absolute-index"),_=require("./_to-primitive"),v=require("./_has"),p=require("./_classof"),y=require("./_is-object"),q=require("./_to-object"),w=require("./_is-array-iter"),b=require("./_object-create"),S=require("./_object-gpo"),E=require("./_object-gopn").f,m=require("./core.get-iterator-method"),x=require("./_uid"),L=require("./_wks"),P=require("./_array-methods"),j=require("./_array-includes"),T=require("./_species-constructor"),F=require("./es6.array.iterator"),O=require("./_iterators"),A=require("./_iter-detect"),R=require("./_set-species"),B=require("./_array-fill"),I=require("./_array-copy-within"),M=require("./_object-dp"),W=require("./_object-gopd"),N=M.f,Y=W.f,k=e.RangeError,D=e.TypeError,V=e.Uint8Array,C="ArrayBuffer",U="Shared"+C,G="BYTES_PER_ELEMENT",z="prototype",H=Array[z],J=o.ArrayBuffer,K=o.DataView,Q=P(0),X=P(2),Z=P(3),$=P(4),ee=P(5),re=P(6),te=j(!0),ne=j(!1),ie=F.values,oe=F.keys,ue=F.entries,ce=H.lastIndexOf,fe=H.reduce,ae=H.reduceRight,le=H.join,se=H.sort,he=H.slice,de=H.toString,ge=H.toLocaleString,_e=L("iterator"),ve=L("toStringTag"),pe=x("typed_constructor"),ye=x("def_constructor"),qe=i.CONSTR,we=i.TYPED,be=i.VIEW,Se="Wrong length!",Ee=P(1,function(e,r){return je(T(e,e[ye]),r)}),me=t(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),xe=!!V&&!!V[z].set&&t(function(){new V(1).set({})}),Le=function(e,r){var t=s(e);if(t<0||t%r)throw k("Wrong offset!");return t},Pe=function(e){if(y(e)&&we in e)return e;throw D(e+" is not a typed array!")},je=function(e,r){if(!(y(e)&&pe in e))throw D("It is not a typed array constructor!");return new e(r)},Te=function(e,r){return Fe(T(e,e[ye]),r)},Fe=function(e,r){for(var t=0,n=r.length,i=je(e,n);n>t;)i[t]=r[t++];return i},Oe=function(e,r,t){N(e,r,{get:function(){return this._d[t]}})},Ae=function(e){var r,t,n,i,o,c,f=q(e),a=arguments.length,l=a>1?arguments[1]:void 0,s=void 0!==l,d=m(f);if(null!=d&&!w(d)){for(c=d.call(f),n=[],r=0;!(o=c.next()).done;r++)n.push(o.value);f=n}for(s&&a>2&&(l=u(l,arguments[2],2)),r=0,t=h(f.length),i=je(this,t);t>r;r++)i[r]=s?l(f[r],r):f[r];return i},Re=function(){for(var e=0,r=arguments.length,t=je(this,r);r>e;)t[e]=arguments[e++];return t},Be=!!V&&t(function(){ge.call(new V(1))}),Ie=function(){return ge.apply(Be?he.call(Pe(this)):Pe(this),arguments)},Me={copyWithin:function(e,r){return I.call(Pe(this),e,r,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Pe(this),arguments)},filter:function(e){return Te(this,X(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Pe(this),arguments)},lastIndexOf:function(e){return ce.apply(Pe(this),arguments)},map:function(e){return Ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Pe(this),arguments)},reduceRight:function(e){return ae.apply(Pe(this),arguments)},reverse:function(){for(var e,r=Pe(this).length,t=Math.floor(r/2),n=0;n<t;)e=this[n],this[n++]=this[--r],this[r]=e;return this},some:function(e){return Z(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return se.call(Pe(this),e)},subarray:function(e,r){var t=Pe(this),n=t.length,i=g(e,n);return new(T(t,t[ye]))(t.buffer,t.byteOffset+i*t.BYTES_PER_ELEMENT,h((void 0===r?n:g(r,n))-i))}},We=function(e,r){return Te(this,he.call(Pe(this),e,r))},Ne=function(e){Pe(this);var r=Le(arguments[1],1),t=this.length,n=q(e),i=h(n.length),o=0;if(i+r>t)throw k(Se);for(;o<i;)this[r+o]=n[o++]},Ye={entries:function(){return ue.call(Pe(this))},keys:function(){return oe.call(Pe(this))},values:function(){return ie.call(Pe(this))}},ke=function(e,r){return y(e)&&e[we]&&"symbol"!=typeof r&&r in e&&String(+r)==String(r)},De=function(e,r){return ke(e,r=_(r,!0))?f(2,e[r]):Y(e,r)},Ve=function(e,r,t){return!(ke(e,r=_(r,!0))&&y(t)&&v(t,"value"))||v(t,"get")||v(t,"set")||t.configurable||v(t,"writable")&&!t.writable||v(t,"enumerable")&&!t.enumerable?N(e,r,t):(e[r]=t.value,e)};qe||(W.f=De,M.f=Ve),n(n.S+n.F*!qe,"Object",{getOwnPropertyDescriptor:De,defineProperty:Ve}),t(function(){de.call({})})&&(de=ge=function(){return le.call(this)});var Ce=l({},Me);l(Ce,Ye),a(Ce,_e,Ye.values),l(Ce,{slice:We,set:Ne,constructor:function(){},toString:de,toLocaleString:Ie}),Oe(Ce,"buffer","b"),Oe(Ce,"byteOffset","o"),Oe(Ce,"byteLength","l"),Oe(Ce,"length","e"),N(Ce,ve,{get:function(){return this[we]}}),module.exports=function(o,u,f,l){var s=o+((l=!!l)?"Clamped":"")+"Array",g="get"+o,_="set"+o,v=e[s],q=v||{},w=v&&S(v),m=!v||!i.ABV,x={},L=v&&v[z],P=function(e,r){N(e,r,{get:function(){return function(e,r){var t=e._d;return t.v[g](r*u+t.o,me)}(this,r)},set:function(e){return function(e,r,t){var n=e._d;l&&(t=(t=Math.round(t))<0?0:t>255?255:255&t),n.v[_](r*u+n.o,t,me)}(this,r,e)},enumerable:!0})};m?(v=f(function(e,r,t,n){c(e,v,s,"_d");var i,o,f,l,g=0,_=0;if(y(r)){if(!(r instanceof J||(l=p(r))==C||l==U))return we in r?Fe(v,r):Ae.call(v,r);i=r,_=Le(t,u);var q=r.byteLength;if(void 0===n){if(q%u)throw k(Se);if((o=q-_)<0)throw k(Se)}else if((o=h(n)*u)+_>q)throw k(Se);f=o/u}else f=d(r),i=new J(o=f*u);for(a(e,"_d",{b:i,o:_,l:o,e:f,v:new K(i)});g<f;)P(e,g++)}),L=v[z]=b(Ce),a(L,"constructor",v)):t(function(){v(1)})&&t(function(){new v(-1)})&&A(function(e){new v,new v(null),new v(1.5),new v(e)},!0)||(v=f(function(e,r,t,n){var i;return c(e,v,s),y(r)?r instanceof J||(i=p(r))==C||i==U?void 0!==n?new q(r,Le(t,u),n):void 0!==t?new q(r,Le(t,u)):new q(r):we in r?Fe(v,r):Ae.call(v,r):new q(d(r))}),Q(w!==Function.prototype?E(q).concat(E(w)):E(q),function(e){e in v||a(v,e,q[e])}),v[z]=L,r||(L.constructor=v));var j=L[_e],T=!!j&&("values"==j.name||null==j.name),F=Ye.values;a(v,pe,!0),a(L,we,s),a(L,be,!0),a(L,ye,v),(l?new v(1)[ve]==s:ve in L)||N(L,ve,{get:function(){return s}}),x[s]=v,n(n.G+n.W+n.F*(v!=q),x),n(n.S,s,{BYTES_PER_ELEMENT:u}),n(n.S+n.F*t(function(){q.of.call(v,1)}),s,{from:Ae,of:Re}),G in L||a(L,G,u),n(n.P,s,Me),R(s),n(n.P+n.F*xe,s,{set:Ne}),n(n.P+n.F*!T,s,Ye),r||L.toString==de||(L.toString=de),n(n.P+n.F*t(function(){new v(1).slice()}),s,{slice:We}),n(n.P+n.F*(t(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!t(function(){L.toLocaleString.call([1,2])})),s,{toLocaleString:Ie}),O[s]=T?j:F,r||T||a(L,_e,F)}}else module.exports=function(){};
},{"./_descriptors":"ZJLI","./_library":"Nw1e","./_global":"kql1","./_fails":"e5TU","./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU","./_ctx":"N9ch","./_an-instance":"XE1H","./_property-desc":"B9EI","./_hide":"i5RL","./_redefine-all":"XX7Z","./_to-integer":"cHfm","./_to-length":"HdKs","./_to-index":"JyiF","./_to-absolute-index":"AXg2","./_to-primitive":"PUNq","./_has":"nW2g","./_classof":"jP8S","./_is-object":"SP6V","./_to-object":"JfJ5","./_is-array-iter":"DsPZ","./_object-create":"d4Ek","./_object-gpo":"kbAb","./_object-gopn":"yyyP","./core.get-iterator-method":"kX9y","./_uid":"f0sk","./_wks":"MgdH","./_array-methods":"H1nT","./_array-includes":"dIPJ","./_species-constructor":"pC8t","./es6.array.iterator":"xsAw","./_iterators":"oANp","./_iter-detect":"Pd7X","./_set-species":"Bn5Q","./_array-fill":"UYMr","./_array-copy-within":"okFf","./_object-dp":"wvco","./_object-gopd":"SFON"}],"W7MG":[function(require,module,exports) {
require("./_typed-array")("Int8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"n9td":[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"m71d":[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}},!0);
},{"./_typed-array":"kRz2"}],"YGkr":[function(require,module,exports) {
require("./_typed-array")("Int16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"OaOh":[function(require,module,exports) {
require("./_typed-array")("Uint16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"sUYQ":[function(require,module,exports) {
require("./_typed-array")("Int32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"XuMj":[function(require,module,exports) {
require("./_typed-array")("Uint32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"V93U":[function(require,module,exports) {
require("./_typed-array")("Float32",4,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":"kRz2"}],"KMMD":[function(require,module,exports) {
require("./_typed-array")("Float64",8,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":"kRz2"}],"XlBZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_a-function"),n=require("./_an-object"),i=(require("./_global").Reflect||{}).apply,u=Function.apply;e(e.S+e.F*!require("./_fails")(function(){i(function(){})}),"Reflect",{apply:function(e,a,l){var t=r(e),c=n(l);return i?i(t,a,c):u.call(t,a,c)}});
},{"./_export":"NjVL","./_a-function":"L6p4","./_an-object":"DBsB","./_global":"kql1","./_fails":"e5TU"}],"JeCu":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-create"),n=require("./_a-function"),t=require("./_an-object"),u=require("./_is-object"),c=require("./_fails"),i=require("./_bind"),o=(require("./_global").Reflect||{}).construct,a=c(function(){function e(){}return!(o(function(){},[],e)instanceof e)}),l=!c(function(){o(function(){})});e(e.S+e.F*(a||l),"Reflect",{construct:function(e,c){n(e),t(c);var f=arguments.length<3?e:n(arguments[2]);if(l&&!a)return o(e,c,f);if(e==f){switch(c.length){case 0:return new e;case 1:return new e(c[0]);case 2:return new e(c[0],c[1]);case 3:return new e(c[0],c[1],c[2]);case 4:return new e(c[0],c[1],c[2],c[3])}var p=[null];return p.push.apply(p,c),new(i.apply(e,p))}var s=f.prototype,q=r(u(s)?s:Object.prototype),_=Function.apply.call(e,q,c);return u(_)?_:q}});
},{"./_export":"NjVL","./_object-create":"d4Ek","./_a-function":"L6p4","./_an-object":"DBsB","./_is-object":"SP6V","./_fails":"e5TU","./_bind":"nZQG","./_global":"kql1"}],"VZPr":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_export"),t=require("./_an-object"),i=require("./_to-primitive");r(r.S+r.F*require("./_fails")(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(r,u,f){t(r),u=i(u,!0),t(f);try{return e.f(r,u,f),!0}catch(n){return!1}}});
},{"./_object-dp":"wvco","./_export":"NjVL","./_an-object":"DBsB","./_to-primitive":"PUNq","./_fails":"e5TU"}],"kfrU":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gopd").f,t=require("./_an-object");e(e.S,"Reflect",{deleteProperty:function(e,o){var u=r(t(e),o);return!(u&&!u.configurable)&&delete e[o]}});
},{"./_export":"NjVL","./_object-gopd":"SFON","./_an-object":"DBsB"}],"pLCm":[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_an-object"),i=function(e){this._t=t(e),this._i=0;var i,r=this._k=[];for(i in e)r.push(i)};require("./_iter-create")(i,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),e(e.S,"Reflect",{enumerate:function(e){return new i(e)}});
},{"./_export":"NjVL","./_an-object":"DBsB","./_iter-create":"O1PE"}],"iEI9":[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_object-gpo"),t=require("./_has"),i=require("./_export"),o=require("./_is-object"),u=require("./_an-object");function a(i,c){var v,g,l=arguments.length<3?i:arguments[2];return u(i)===l?i[c]:(v=e.f(i,c))?t(v,"value")?v.value:void 0!==v.get?v.get.call(l):void 0:o(g=r(i))?a(g,c,l):void 0}i(i.S,"Reflect",{get:a});
},{"./_object-gopd":"SFON","./_object-gpo":"kbAb","./_has":"nW2g","./_export":"NjVL","./_is-object":"SP6V","./_an-object":"DBsB"}],"eHzb":[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_export"),t=require("./_an-object");r(r.S,"Reflect",{getOwnPropertyDescriptor:function(r,o){return e.f(t(r),o)}});
},{"./_object-gopd":"SFON","./_export":"NjVL","./_an-object":"DBsB"}],"wht9":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gpo"),t=require("./_an-object");e(e.S,"Reflect",{getPrototypeOf:function(e){return r(t(e))}});
},{"./_export":"NjVL","./_object-gpo":"kbAb","./_an-object":"DBsB"}],"sj65":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{has:function(e,r){return r in e}});
},{"./_export":"NjVL"}],"Nj86":[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(e){return r(e),!t||t(e)}});
},{"./_export":"NjVL","./_an-object":"DBsB"}],"jxFw":[function(require,module,exports) {
var e=require("./_object-gopn"),r=require("./_object-gops"),o=require("./_an-object"),t=require("./_global").Reflect;module.exports=t&&t.ownKeys||function(t){var c=e.f(o(t)),n=r.f;return n?c.concat(n(t)):c};
},{"./_object-gopn":"yyyP","./_object-gops":"JErC","./_an-object":"DBsB","./_global":"kql1"}],"wyLA":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{ownKeys:require("./_own-keys")});
},{"./_export":"NjVL","./_own-keys":"jxFw"}],"y3HT":[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(e){r(e);try{return t&&t(e),!0}catch(n){return!1}}});
},{"./_export":"NjVL","./_an-object":"DBsB"}],"ndfm":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_object-gopd"),t=require("./_object-gpo"),i=require("./_has"),u=require("./_export"),f=require("./_property-desc"),o=require("./_an-object"),a=require("./_is-object");function c(u,l,n){var q,s,_=arguments.length<4?u:arguments[3],b=r.f(o(u),l);if(!b){if(a(s=t(u)))return c(s,l,n,_);b=f(0)}if(i(b,"value")){if(!1===b.writable||!a(_))return!1;if(q=r.f(_,l)){if(q.get||q.set||!1===q.writable)return!1;q.value=n,e.f(_,l,q)}else e.f(_,l,f(0,n));return!0}return void 0!==b.set&&(b.set.call(_,n),!0)}u(u.S,"Reflect",{set:c});
},{"./_object-dp":"wvco","./_object-gopd":"SFON","./_object-gpo":"kbAb","./_has":"nW2g","./_export":"NjVL","./_property-desc":"B9EI","./_an-object":"DBsB","./_is-object":"SP6V"}],"olbq":[function(require,module,exports) {
var e=require("./_export"),r=require("./_set-proto");r&&e(e.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(c){return!1}}});
},{"./_export":"NjVL","./_set-proto":"Epal"}],"EHCj":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!0);r(r.P,"Array",{includes:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")("includes");
},{"./_export":"NjVL","./_array-includes":"dIPJ","./_add-to-unscopables":"PxQA"}],"V4v3":[function(require,module,exports) {
"use strict";var r=require("./_is-array"),e=require("./_is-object"),i=require("./_to-length"),t=require("./_ctx"),o=require("./_wks")("isConcatSpreadable");function u(s,a,n,c,f,l,q,_){for(var d,h,p=f,v=0,b=!!q&&t(q,_,3);v<c;){if(v in n){if(d=b?b(n[v],v,a):n[v],h=!1,e(d)&&(h=void 0!==(h=d[o])?!!h:r(d)),h&&l>0)p=u(s,a,d,i(d.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError();s[p]=d}p++}v++}return p}module.exports=u;
},{"./_is-array":"OsmR","./_is-object":"SP6V","./_to-length":"HdKs","./_ctx":"N9ch","./_wks":"MgdH"}],"moLY":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_flatten-into-array"),t=require("./_to-object"),a=require("./_to-length"),i=require("./_a-function"),u=require("./_array-species-create");r(r.P,"Array",{flatMap:function(r){var n,o,c=t(this);return i(r),n=a(c.length),o=u(c,0),e(o,c,c,n,0,1,r,arguments[1]),o}}),require("./_add-to-unscopables")("flatMap");
},{"./_export":"NjVL","./_flatten-into-array":"V4v3","./_to-object":"JfJ5","./_to-length":"HdKs","./_a-function":"L6p4","./_array-species-create":"yi52","./_add-to-unscopables":"PxQA"}],"b3LS":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_flatten-into-array"),t=require("./_to-object"),i=require("./_to-length"),a=require("./_to-integer"),n=require("./_array-species-create");e(e.P,"Array",{flatten:function(){var e=arguments[0],u=t(this),o=i(u.length),q=n(u,0);return r(q,u,u,o,0,void 0===e?1:a(e)),q}}),require("./_add-to-unscopables")("flatten");
},{"./_export":"NjVL","./_flatten-into-array":"V4v3","./_to-object":"JfJ5","./_to-length":"HdKs","./_to-integer":"cHfm","./_array-species-create":"yi52","./_add-to-unscopables":"PxQA"}],"uHWZ":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!0),e=require("./_fails"),i=e(function(){return"𠮷"!=="𠮷".at(0)});r(r.P+r.F*i,"String",{at:function(r){return t(this,r)}});
},{"./_export":"NjVL","./_string-at":"BiTF","./_fails":"e5TU"}],"GTWz":[function(require,module,exports) {
var e=require("./_to-length"),r=require("./_string-repeat"),t=require("./_defined");module.exports=function(i,n,l,g){var u=String(t(i)),a=u.length,h=void 0===l?" ":String(l),o=e(n);if(o<=a||""==h)return u;var c=o-a,d=r.call(h,Math.ceil(c/h.length));return d.length>c&&(d=d.slice(0,c)),g?d+u:u+d};
},{"./_to-length":"HdKs","./_string-repeat":"ezM6","./_defined":"Zcur"}],"fWC9":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),t=require("./_user-agent"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t);r(r.P+r.F*i,"String",{padStart:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!0)}});
},{"./_export":"NjVL","./_string-pad":"GTWz","./_user-agent":"SWOj"}],"XG7E":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),i=require("./_user-agent"),t=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*t,"String",{padEnd:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!1)}});
},{"./_export":"NjVL","./_string-pad":"GTWz","./_user-agent":"SWOj"}],"yPLu":[function(require,module,exports) {
"use strict";require("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart");
},{"./_string-trim":"EWct"}],"n2or":[function(require,module,exports) {
"use strict";require("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd");
},{"./_string-trim":"EWct"}],"U9WL":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_defined"),t=require("./_to-length"),i=require("./_is-regexp"),n=require("./_flags"),s=RegExp.prototype,g=function(e,r){this._r=e,this._s=r};require("./_iter-create")(g,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),e(e.P,"String",{matchAll:function(e){if(r(this),!i(e))throw TypeError(e+" is not a regexp!");var u=String(this),a="flags"in s?String(e.flags):n.call(e),l=new RegExp(e.source,~a.indexOf("g")?a:"g"+a);return l.lastIndex=t(e.lastIndex),new g(l,u)}});
},{"./_export":"NjVL","./_defined":"Zcur","./_to-length":"HdKs","./_is-regexp":"g8m6","./_flags":"aRjg","./_iter-create":"O1PE"}],"Iboh":[function(require,module,exports) {
require("./_wks-define")("asyncIterator");
},{"./_wks-define":"hijg"}],"CwRI":[function(require,module,exports) {
require("./_wks-define")("observable");
},{"./_wks-define":"hijg"}],"MZQr":[function(require,module,exports) {
var e=require("./_export"),r=require("./_own-keys"),t=require("./_to-iobject"),o=require("./_object-gopd"),i=require("./_create-property");e(e.S,"Object",{getOwnPropertyDescriptors:function(e){for(var u,c,n=t(e),p=o.f,q=r(n),_={},a=0;q.length>a;)void 0!==(c=p(n,u=q[a++]))&&i(_,u,c);return _}});
},{"./_export":"NjVL","./_own-keys":"jxFw","./_to-iobject":"mwRI","./_object-gopd":"SFON","./_create-property":"WfCN"}],"bMm7":[function(require,module,exports) {
var e=require("./_descriptors"),r=require("./_object-keys"),t=require("./_to-iobject"),o=require("./_object-pie").f;module.exports=function(u){return function(i){for(var c,n=t(i),s=r(n),f=s.length,l=0,p=[];f>l;)c=s[l++],e&&!o.call(n,c)||p.push(u?[c,n[c]]:n[c]);return p}};
},{"./_descriptors":"ZJLI","./_object-keys":"kfVX","./_to-iobject":"mwRI","./_object-pie":"Blc0"}],"cZE6":[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!1);r(r.S,"Object",{values:function(r){return e(r)}});
},{"./_export":"NjVL","./_object-to-array":"bMm7"}],"beat":[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!0);r(r.S,"Object",{entries:function(r){return e(r)}});
},{"./_export":"NjVL","./_object-to-array":"bMm7"}],"HOr2":[function(require,module,exports) {
"use strict";module.exports=require("./_library")||!require("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete require("./_global")[e]});
},{"./_library":"Nw1e","./_fails":"e5TU","./_global":"kql1"}],"mNK1":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function(e,u){i.f(r(this),e,{get:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_a-function":"L6p4","./_object-dp":"wvco","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"DPSG":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function(e,u){i.f(r(this),e,{set:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_a-function":"L6p4","./_object-dp":"wvco","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"Y0di":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.get}while(_=i(_))}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_object-gpo":"kbAb","./_object-gopd":"SFON","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"biAK":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.set}while(_=i(_))}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_object-gpo":"kbAb","./_object-gopd":"SFON","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"Jmch":[function(require,module,exports) {
var r=require("./_for-of");module.exports=function(e,o){var u=[];return r(e,!1,u.push,u,o),u};
},{"./_for-of":"Pqba"}],"lQHC":[function(require,module,exports) {
var r=require("./_classof"),e=require("./_array-from-iterable");module.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return e(this)}};
},{"./_classof":"jP8S","./_array-from-iterable":"Jmch"}],"VZya":[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Map",{toJSON:require("./_collection-to-json")("Map")});
},{"./_export":"NjVL","./_collection-to-json":"lQHC"}],"omDO":[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Set",{toJSON:require("./_collection-to-json")("Set")});
},{"./_export":"NjVL","./_collection-to-json":"lQHC"}],"p4tr":[function(require,module,exports) {
"use strict";var r=require("./_export");module.exports=function(e){r(r.S,e,{of:function(){for(var r=arguments.length,e=new Array(r);r--;)e[r]=arguments[r];return new this(e)}})};
},{"./_export":"NjVL"}],"PjD2":[function(require,module,exports) {
require("./_set-collection-of")("Map");
},{"./_set-collection-of":"p4tr"}],"Z2Pq":[function(require,module,exports) {
require("./_set-collection-of")("Set");
},{"./_set-collection-of":"p4tr"}],"ByVw":[function(require,module,exports) {
require("./_set-collection-of")("WeakMap");
},{"./_set-collection-of":"p4tr"}],"CYPo":[function(require,module,exports) {
require("./_set-collection-of")("WeakSet");
},{"./_set-collection-of":"p4tr"}],"cZmF":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_a-function"),u=require("./_ctx"),i=require("./_for-of");module.exports=function(t){r(r.S,t,{from:function(r){var t,n,o,s,f=arguments[1];return e(this),(t=void 0!==f)&&e(f),null==r?new this:(n=[],t?(o=0,s=u(f,arguments[2],2),i(r,!1,function(r){n.push(s(r,o++))})):i(r,!1,n.push,n),new this(n))}})};
},{"./_export":"NjVL","./_a-function":"L6p4","./_ctx":"N9ch","./_for-of":"Pqba"}],"Swiz":[function(require,module,exports) {
require("./_set-collection-from")("Map");
},{"./_set-collection-from":"cZmF"}],"yWUZ":[function(require,module,exports) {
require("./_set-collection-from")("Set");
},{"./_set-collection-from":"cZmF"}],"X04t":[function(require,module,exports) {
require("./_set-collection-from")("WeakMap");
},{"./_set-collection-from":"cZmF"}],"Tbe6":[function(require,module,exports) {
require("./_set-collection-from")("WeakSet");
},{"./_set-collection-from":"cZmF"}],"SAyU":[function(require,module,exports) {
var r=require("./_export");r(r.G,{global:require("./_global")});
},{"./_export":"NjVL","./_global":"kql1"}],"ixkq":[function(require,module,exports) {
var e=require("./_export");e(e.S,"System",{global:require("./_global")});
},{"./_export":"NjVL","./_global":"kql1"}],"p9Qi":[function(require,module,exports) {
var r=require("./_export"),e=require("./_cof");r(r.S,"Error",{isError:function(r){return"Error"===e(r)}});
},{"./_export":"NjVL","./_cof":"viv7"}],"DPl4":[function(require,module,exports) {
var a=require("./_export");a(a.S,"Math",{clamp:function(a,r,t){return Math.min(t,Math.max(r,a))}});
},{"./_export":"NjVL"}],"qvLd":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180});
},{"./_export":"NjVL"}],"vOCQ":[function(require,module,exports) {
var e=require("./_export"),r=180/Math.PI;e(e.S,"Math",{degrees:function(e){return e*r}});
},{"./_export":"NjVL"}],"DBZ8":[function(require,module,exports) {
module.exports=Math.scale||function(e,t,n,a,l){return 0===arguments.length||e!=e||t!=t||n!=n||a!=a||l!=l?NaN:e===1/0||e===-1/0?e:(e-t)*(l-a)/(n-t)+a};
},{}],"bbog":[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-scale"),a=require("./_math-fround");r(r.S,"Math",{fscale:function(r,t,u,i,n){return a(e(r,t,u,i,n))}});
},{"./_export":"NjVL","./_math-scale":"DBZ8","./_math-fround":"uZFk"}],"u35Z":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{iaddh:function(r,a,e,t){var i=r>>>0,n=e>>>0;return(a>>>0)+(t>>>0)+((i&n|(i|n)&~(i+n>>>0))>>>31)|0}});
},{"./_export":"NjVL"}],"AMAq":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{isubh:function(r,e,t,u){var a=r>>>0,i=t>>>0;return(e>>>0)-(u>>>0)-((~a&i|~(a^i)&a-i>>>0)>>>31)|0}});
},{"./_export":"NjVL"}],"PjOg":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{imulh:function(r,e){var t=+r,u=+e,a=65535&t,i=65535&u,n=t>>16,h=u>>16,o=(n*i>>>0)+(a*i>>>16);return n*h+(o>>16)+((a*h>>>0)+(65535&o)>>16)}});
},{"./_export":"NjVL"}],"MDih":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI});
},{"./_export":"NjVL"}],"kkYP":[function(require,module,exports) {
var r=require("./_export"),a=Math.PI/180;r(r.S,"Math",{radians:function(r){return r*a}});
},{"./_export":"NjVL"}],"h4TH":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Math",{scale:require("./_math-scale")});
},{"./_export":"NjVL","./_math-scale":"DBZ8"}],"LfG8":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{umulh:function(r,u){var e=+r,t=+u,a=65535&e,n=65535&t,h=e>>>16,i=t>>>16,o=(h*n>>>0)+(a*n>>>16);return h*i+(o>>>16)+((a*i>>>0)+(65535&o)>>>16)}});
},{"./_export":"NjVL"}],"dibz":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{signbit:function(r){return(r=+r)!=r?r:0==r?1/r==1/0:r>0}});
},{"./_export":"NjVL"}],"PerR":[function(require,module,exports) {

"use strict";var r=require("./_export"),e=require("./_core"),t=require("./_global"),n=require("./_species-constructor"),i=require("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(r){var o=n(this,e.Promise||t.Promise),u="function"==typeof r;return this.then(u?function(e){return i(o,r()).then(function(){return e})}:r,u?function(e){return i(o,r()).then(function(){throw e})}:r)}});
},{"./_export":"NjVL","./_core":"KVo1","./_global":"kql1","./_species-constructor":"pC8t","./_promise-resolve":"bQCN"}],"vZUa":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_new-promise-capability"),i=require("./_perform");r(r.S,"Promise",{try:function(r){var t=e.f(this),o=i(r);return(o.e?t.reject:t.resolve)(o.v),t.promise}});
},{"./_export":"NjVL","./_new-promise-capability":"Mdjk","./_perform":"eKV1"}],"pxMt":[function(require,module,exports) {
var e=require("./es6.map"),r=require("./_export"),t=require("./_shared")("metadata"),n=t.store||(t.store=new(require("./es6.weak-map"))),i=function(r,t,i){var o=n.get(r);if(!o){if(!i)return;n.set(r,o=new e)}var u=o.get(t);if(!u){if(!i)return;o.set(t,u=new e)}return u},o=function(e,r,t){var n=i(r,t,!1);return void 0!==n&&n.has(e)},u=function(e,r,t){var n=i(r,t,!1);return void 0===n?void 0:n.get(e)},a=function(e,r,t,n){i(t,n,!0).set(e,r)},s=function(e,r){var t=i(e,r,!1),n=[];return t&&t.forEach(function(e,r){n.push(r)}),n},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},c=function(e){r(r.S,"Reflect",e)};module.exports={store:n,map:i,has:o,get:u,set:a,keys:s,key:f,exp:c};
},{"./es6.map":"v0j2","./_export":"NjVL","./_shared":"sTGr","./es6.weak-map":"yBwO"}],"BSfr":[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.key,r=e.set;e.exp({defineMetadata:function(e,i,n,d){r(e,i,a(n),t(d))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"JW9N":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),r=e.key,a=e.map,i=e.store;e.exp({deleteMetadata:function(e,d){var n=arguments.length<3?void 0:r(arguments[2]),u=a(t(d),n,!1);if(void 0===u||!u.delete(e))return!1;if(u.size)return!0;var l=i.get(d);return l.delete(n),!!l.size||i.delete(d)}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"x5Yv":[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.get,u=e.key,i=function(e,r,u){if(a(e,r,u))return n(e,r,u);var o=t(r);return null!==o?i(e,o,u):void 0};e.exp({getMetadata:function(e,t){return i(e,r(t),arguments.length<3?void 0:u(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"zaK7":[function(require,module,exports) {
var e=require("./es6.set"),r=require("./_array-from-iterable"),t=require("./_metadata"),a=require("./_an-object"),n=require("./_object-gpo"),u=t.keys,i=t.key,o=function(t,a){var i=u(t,a),c=n(t);if(null===c)return i;var l=o(c,a);return l.length?i.length?r(new e(i.concat(l))):l:i};t.exp({getMetadataKeys:function(e){return o(a(e),arguments.length<2?void 0:i(arguments[1]))}});
},{"./es6.set":"igWm","./_array-from-iterable":"Jmch","./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"Dz2Z":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.get,r=e.key;e.exp({getOwnMetadata:function(e,n){return a(e,t(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"sJYY":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.keys,r=e.key;e.exp({getOwnMetadataKeys:function(e){return a(t(e),arguments.length<2?void 0:r(arguments[1]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"T0JC":[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.key,u=function(e,r,n){if(a(e,r,n))return!0;var i=t(r);return null!==i&&u(e,i,n)};e.exp({hasMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:n(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"UCXJ":[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.has,r=e.key;e.exp({hasOwnMetadata:function(e,n){return t(e,a(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"iEkw":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=require("./_a-function"),r=e.key,n=e.set;e.exp({metadata:function(e,i){return function(u,o){n(e,i,(void 0!==o?t:a)(u),r(o))}}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_a-function":"L6p4"}],"OO50":[function(require,module,exports) {

var r=require("./_export"),e=require("./_microtask")(),i=require("./_global").process,o="process"==require("./_cof")(i);r(r.G,{asap:function(r){var a=o&&i.domain;e(a?a.bind(r):r)}});
},{"./_export":"NjVL","./_microtask":"i1HG","./_global":"kql1","./_cof":"viv7"}],"eRGJ":[function(require,module,exports) {

"use strict";var r=require("./_export"),t=require("./_global"),n=require("./_core"),e=require("./_microtask")(),i=require("./_wks")("observable"),o=require("./_a-function"),u=require("./_an-object"),c=require("./_an-instance"),f=require("./_redefine-all"),s=require("./_hide"),a=require("./_for-of"),v=a.RETURN,h=function(r){return null==r?void 0:o(r)},l=function(r){var t=r._c;t&&(r._c=void 0,t())},_=function(r){return void 0===r._o},b=function(r){_(r)||(r._o=void 0,l(r))},y=function(r,t){u(r),this._c=void 0,this._o=r,r=new p(this);try{var n=t(r),e=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){e.unsubscribe()}:o(n),this._c=n)}catch(i){return void r.error(i)}_(this)&&l(this)};y.prototype=f({},{unsubscribe:function(){b(this)}});var p=function(r){this._s=r};p.prototype=f({},{next:function(r){var t=this._s;if(!_(t)){var n=t._o;try{var e=h(n.next);if(e)return e.call(n,r)}catch(i){try{b(t)}finally{throw i}}}},error:function(r){var t=this._s;if(_(t))throw r;var n=t._o;t._o=void 0;try{var e=h(n.error);if(!e)throw r;r=e.call(n,r)}catch(i){try{l(t)}finally{throw i}}return l(t),r},complete:function(r){var t=this._s;if(!_(t)){var n=t._o;t._o=void 0;try{var e=h(n.complete);r=e?e.call(n,r):void 0}catch(i){try{l(t)}finally{throw i}}return l(t),r}}});var w=function(r){c(this,w,"Observable","_f")._f=o(r)};f(w.prototype,{subscribe:function(r){return new y(r,this._f)},forEach:function(r){var e=this;return new(n.Promise||t.Promise)(function(t,n){o(r);var i=e.subscribe({next:function(t){try{return r(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t})})}}),f(w,{from:function(r){var t="function"==typeof this?this:w,n=h(u(r)[i]);if(n){var o=u(n.call(r));return o.constructor===t?o:new t(function(r){return o.subscribe(r)})}return new t(function(t){var n=!1;return e(function(){if(!n){try{if(a(r,!1,function(r){if(t.next(r),n)return v})===v)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var r=0,t=arguments.length,n=new Array(t);r<t;)n[r]=arguments[r++];return new("function"==typeof this?this:w)(function(r){var t=!1;return e(function(){if(!t){for(var e=0;e<n.length;++e)if(r.next(n[e]),t)return;r.complete()}}),function(){t=!0}})}}),s(w.prototype,i,function(){return this}),r(r.G,{Observable:w}),require("./_set-species")("Observable");
},{"./_export":"NjVL","./_global":"kql1","./_core":"KVo1","./_microtask":"i1HG","./_wks":"MgdH","./_a-function":"L6p4","./_an-object":"DBsB","./_an-instance":"XE1H","./_redefine-all":"XX7Z","./_hide":"i5RL","./_for-of":"Pqba","./_set-species":"Bn5Q"}],"FL4b":[function(require,module,exports) {

var e=require("./_global"),t=require("./_export"),n=require("./_user-agent"),r=[].slice,u=/MSIE .\./.test(n),i=function(e){return function(t,n){var u=arguments.length>2,i=!!u&&r.call(arguments,2);return e(u?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};t(t.G+t.B+t.F*u,{setTimeout:i(e.setTimeout),setInterval:i(e.setInterval)});
},{"./_global":"kql1","./_export":"NjVL","./_user-agent":"SWOj"}],"hg3C":[function(require,module,exports) {
var e=require("./_export"),r=require("./_task");e(e.G+e.B,{setImmediate:r.set,clearImmediate:r.clear});
},{"./_export":"NjVL","./_task":"sbFn"}],"hFdU":[function(require,module,exports) {

for(var e=require("./es6.array.iterator"),t=require("./_object-keys"),i=require("./_redefine"),r=require("./_global"),s=require("./_hide"),L=require("./_iterators"),a=require("./_wks"),o=a("iterator"),l=a("toStringTag"),S=L.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},u=t(n),T=0;T<u.length;T++){var c,g=u[T],M=n[g],y=r[g],f=y&&y.prototype;if(f&&(f[o]||s(f,o,S),f[l]||s(f,l,g),L[g]=S,M))for(c in e)f[c]||i(f,c,e[c],!0)}
},{"./es6.array.iterator":"xsAw","./_object-keys":"kfVX","./_redefine":"l2hW","./_global":"kql1","./_hide":"i5RL","./_iterators":"oANp","./_wks":"MgdH"}],"mRaX":[function(require,module,exports) {
require("./modules/es6.symbol"),require("./modules/es6.object.create"),require("./modules/es6.object.define-property"),require("./modules/es6.object.define-properties"),require("./modules/es6.object.get-own-property-descriptor"),require("./modules/es6.object.get-prototype-of"),require("./modules/es6.object.keys"),require("./modules/es6.object.get-own-property-names"),require("./modules/es6.object.freeze"),require("./modules/es6.object.seal"),require("./modules/es6.object.prevent-extensions"),require("./modules/es6.object.is-frozen"),require("./modules/es6.object.is-sealed"),require("./modules/es6.object.is-extensible"),require("./modules/es6.object.assign"),require("./modules/es6.object.is"),require("./modules/es6.object.set-prototype-of"),require("./modules/es6.object.to-string"),require("./modules/es6.function.bind"),require("./modules/es6.function.name"),require("./modules/es6.function.has-instance"),require("./modules/es6.parse-int"),require("./modules/es6.parse-float"),require("./modules/es6.number.constructor"),require("./modules/es6.number.to-fixed"),require("./modules/es6.number.to-precision"),require("./modules/es6.number.epsilon"),require("./modules/es6.number.is-finite"),require("./modules/es6.number.is-integer"),require("./modules/es6.number.is-nan"),require("./modules/es6.number.is-safe-integer"),require("./modules/es6.number.max-safe-integer"),require("./modules/es6.number.min-safe-integer"),require("./modules/es6.number.parse-float"),require("./modules/es6.number.parse-int"),require("./modules/es6.math.acosh"),require("./modules/es6.math.asinh"),require("./modules/es6.math.atanh"),require("./modules/es6.math.cbrt"),require("./modules/es6.math.clz32"),require("./modules/es6.math.cosh"),require("./modules/es6.math.expm1"),require("./modules/es6.math.fround"),require("./modules/es6.math.hypot"),require("./modules/es6.math.imul"),require("./modules/es6.math.log10"),require("./modules/es6.math.log1p"),require("./modules/es6.math.log2"),require("./modules/es6.math.sign"),require("./modules/es6.math.sinh"),require("./modules/es6.math.tanh"),require("./modules/es6.math.trunc"),require("./modules/es6.string.from-code-point"),require("./modules/es6.string.raw"),require("./modules/es6.string.trim"),require("./modules/es6.string.iterator"),require("./modules/es6.string.code-point-at"),require("./modules/es6.string.ends-with"),require("./modules/es6.string.includes"),require("./modules/es6.string.repeat"),require("./modules/es6.string.starts-with"),require("./modules/es6.string.anchor"),require("./modules/es6.string.big"),require("./modules/es6.string.blink"),require("./modules/es6.string.bold"),require("./modules/es6.string.fixed"),require("./modules/es6.string.fontcolor"),require("./modules/es6.string.fontsize"),require("./modules/es6.string.italics"),require("./modules/es6.string.link"),require("./modules/es6.string.small"),require("./modules/es6.string.strike"),require("./modules/es6.string.sub"),require("./modules/es6.string.sup"),require("./modules/es6.date.now"),require("./modules/es6.date.to-json"),require("./modules/es6.date.to-iso-string"),require("./modules/es6.date.to-string"),require("./modules/es6.date.to-primitive"),require("./modules/es6.array.is-array"),require("./modules/es6.array.from"),require("./modules/es6.array.of"),require("./modules/es6.array.join"),require("./modules/es6.array.slice"),require("./modules/es6.array.sort"),require("./modules/es6.array.for-each"),require("./modules/es6.array.map"),require("./modules/es6.array.filter"),require("./modules/es6.array.some"),require("./modules/es6.array.every"),require("./modules/es6.array.reduce"),require("./modules/es6.array.reduce-right"),require("./modules/es6.array.index-of"),require("./modules/es6.array.last-index-of"),require("./modules/es6.array.copy-within"),require("./modules/es6.array.fill"),require("./modules/es6.array.find"),require("./modules/es6.array.find-index"),require("./modules/es6.array.species"),require("./modules/es6.array.iterator"),require("./modules/es6.regexp.constructor"),require("./modules/es6.regexp.exec"),require("./modules/es6.regexp.to-string"),require("./modules/es6.regexp.flags"),require("./modules/es6.regexp.match"),require("./modules/es6.regexp.replace"),require("./modules/es6.regexp.search"),require("./modules/es6.regexp.split"),require("./modules/es6.promise"),require("./modules/es6.map"),require("./modules/es6.set"),require("./modules/es6.weak-map"),require("./modules/es6.weak-set"),require("./modules/es6.typed.array-buffer"),require("./modules/es6.typed.data-view"),require("./modules/es6.typed.int8-array"),require("./modules/es6.typed.uint8-array"),require("./modules/es6.typed.uint8-clamped-array"),require("./modules/es6.typed.int16-array"),require("./modules/es6.typed.uint16-array"),require("./modules/es6.typed.int32-array"),require("./modules/es6.typed.uint32-array"),require("./modules/es6.typed.float32-array"),require("./modules/es6.typed.float64-array"),require("./modules/es6.reflect.apply"),require("./modules/es6.reflect.construct"),require("./modules/es6.reflect.define-property"),require("./modules/es6.reflect.delete-property"),require("./modules/es6.reflect.enumerate"),require("./modules/es6.reflect.get"),require("./modules/es6.reflect.get-own-property-descriptor"),require("./modules/es6.reflect.get-prototype-of"),require("./modules/es6.reflect.has"),require("./modules/es6.reflect.is-extensible"),require("./modules/es6.reflect.own-keys"),require("./modules/es6.reflect.prevent-extensions"),require("./modules/es6.reflect.set"),require("./modules/es6.reflect.set-prototype-of"),require("./modules/es7.array.includes"),require("./modules/es7.array.flat-map"),require("./modules/es7.array.flatten"),require("./modules/es7.string.at"),require("./modules/es7.string.pad-start"),require("./modules/es7.string.pad-end"),require("./modules/es7.string.trim-left"),require("./modules/es7.string.trim-right"),require("./modules/es7.string.match-all"),require("./modules/es7.symbol.async-iterator"),require("./modules/es7.symbol.observable"),require("./modules/es7.object.get-own-property-descriptors"),require("./modules/es7.object.values"),require("./modules/es7.object.entries"),require("./modules/es7.object.define-getter"),require("./modules/es7.object.define-setter"),require("./modules/es7.object.lookup-getter"),require("./modules/es7.object.lookup-setter"),require("./modules/es7.map.to-json"),require("./modules/es7.set.to-json"),require("./modules/es7.map.of"),require("./modules/es7.set.of"),require("./modules/es7.weak-map.of"),require("./modules/es7.weak-set.of"),require("./modules/es7.map.from"),require("./modules/es7.set.from"),require("./modules/es7.weak-map.from"),require("./modules/es7.weak-set.from"),require("./modules/es7.global"),require("./modules/es7.system.global"),require("./modules/es7.error.is-error"),require("./modules/es7.math.clamp"),require("./modules/es7.math.deg-per-rad"),require("./modules/es7.math.degrees"),require("./modules/es7.math.fscale"),require("./modules/es7.math.iaddh"),require("./modules/es7.math.isubh"),require("./modules/es7.math.imulh"),require("./modules/es7.math.rad-per-deg"),require("./modules/es7.math.radians"),require("./modules/es7.math.scale"),require("./modules/es7.math.umulh"),require("./modules/es7.math.signbit"),require("./modules/es7.promise.finally"),require("./modules/es7.promise.try"),require("./modules/es7.reflect.define-metadata"),require("./modules/es7.reflect.delete-metadata"),require("./modules/es7.reflect.get-metadata"),require("./modules/es7.reflect.get-metadata-keys"),require("./modules/es7.reflect.get-own-metadata"),require("./modules/es7.reflect.get-own-metadata-keys"),require("./modules/es7.reflect.has-metadata"),require("./modules/es7.reflect.has-own-metadata"),require("./modules/es7.reflect.metadata"),require("./modules/es7.asap"),require("./modules/es7.observable"),require("./modules/web.timers"),require("./modules/web.immediate"),require("./modules/web.dom.iterable"),module.exports=require("./modules/_core");
},{"./modules/es6.symbol":"s5uV","./modules/es6.object.create":"ELq7","./modules/es6.object.define-property":"SeKy","./modules/es6.object.define-properties":"FFVz","./modules/es6.object.get-own-property-descriptor":"eObd","./modules/es6.object.get-prototype-of":"x4A6","./modules/es6.object.keys":"oiqN","./modules/es6.object.get-own-property-names":"NX5N","./modules/es6.object.freeze":"QMvv","./modules/es6.object.seal":"y8Nt","./modules/es6.object.prevent-extensions":"vJzf","./modules/es6.object.is-frozen":"UcEb","./modules/es6.object.is-sealed":"VI7w","./modules/es6.object.is-extensible":"CvEg","./modules/es6.object.assign":"fRec","./modules/es6.object.is":"GEUt","./modules/es6.object.set-prototype-of":"CQxr","./modules/es6.object.to-string":"tSZj","./modules/es6.function.bind":"eBLX","./modules/es6.function.name":"WtEG","./modules/es6.function.has-instance":"YlR3","./modules/es6.parse-int":"OCDI","./modules/es6.parse-float":"i7Me","./modules/es6.number.constructor":"uYep","./modules/es6.number.to-fixed":"dVzo","./modules/es6.number.to-precision":"KwyH","./modules/es6.number.epsilon":"Decw","./modules/es6.number.is-finite":"oWwC","./modules/es6.number.is-integer":"N7Jd","./modules/es6.number.is-nan":"RsrB","./modules/es6.number.is-safe-integer":"fbTZ","./modules/es6.number.max-safe-integer":"JxHc","./modules/es6.number.min-safe-integer":"X6hw","./modules/es6.number.parse-float":"IKam","./modules/es6.number.parse-int":"QjIW","./modules/es6.math.acosh":"FaF2","./modules/es6.math.asinh":"oL1m","./modules/es6.math.atanh":"PhwT","./modules/es6.math.cbrt":"fi1h","./modules/es6.math.clz32":"fJAy","./modules/es6.math.cosh":"kseY","./modules/es6.math.expm1":"hyI8","./modules/es6.math.fround":"N7ZU","./modules/es6.math.hypot":"HGHV","./modules/es6.math.imul":"Pasv","./modules/es6.math.log10":"zlsv","./modules/es6.math.log1p":"RR3i","./modules/es6.math.log2":"b6PB","./modules/es6.math.sign":"BHWJ","./modules/es6.math.sinh":"f0FZ","./modules/es6.math.tanh":"GaA9","./modules/es6.math.trunc":"qy71","./modules/es6.string.from-code-point":"i8rB","./modules/es6.string.raw":"DtRm","./modules/es6.string.trim":"Z1j3","./modules/es6.string.iterator":"Wu89","./modules/es6.string.code-point-at":"P7ku","./modules/es6.string.ends-with":"MUpt","./modules/es6.string.includes":"IvzQ","./modules/es6.string.repeat":"s8Pp","./modules/es6.string.starts-with":"hSvU","./modules/es6.string.anchor":"Qidu","./modules/es6.string.big":"zi4A","./modules/es6.string.blink":"tDaT","./modules/es6.string.bold":"VlCA","./modules/es6.string.fixed":"BahM","./modules/es6.string.fontcolor":"f6mn","./modules/es6.string.fontsize":"Du0n","./modules/es6.string.italics":"EmZX","./modules/es6.string.link":"mlNr","./modules/es6.string.small":"QeD6","./modules/es6.string.strike":"ny4U","./modules/es6.string.sub":"Pvqx","./modules/es6.string.sup":"mRpz","./modules/es6.date.now":"qW2d","./modules/es6.date.to-json":"DLwC","./modules/es6.date.to-iso-string":"Q9dY","./modules/es6.date.to-string":"A8WX","./modules/es6.date.to-primitive":"jJtq","./modules/es6.array.is-array":"OdQU","./modules/es6.array.from":"hO05","./modules/es6.array.of":"ARIR","./modules/es6.array.join":"e5fN","./modules/es6.array.slice":"TSa4","./modules/es6.array.sort":"xw8W","./modules/es6.array.for-each":"bomu","./modules/es6.array.map":"P4Vy","./modules/es6.array.filter":"kLvk","./modules/es6.array.some":"jLap","./modules/es6.array.every":"KLYK","./modules/es6.array.reduce":"dZ7F","./modules/es6.array.reduce-right":"Wzw6","./modules/es6.array.index-of":"jGln","./modules/es6.array.last-index-of":"iGRw","./modules/es6.array.copy-within":"vJRO","./modules/es6.array.fill":"fHCf","./modules/es6.array.find":"HBFq","./modules/es6.array.find-index":"xRcq","./modules/es6.array.species":"Smp7","./modules/es6.array.iterator":"xsAw","./modules/es6.regexp.constructor":"hBwo","./modules/es6.regexp.exec":"ej7E","./modules/es6.regexp.to-string":"yEH7","./modules/es6.regexp.flags":"SALB","./modules/es6.regexp.match":"yikX","./modules/es6.regexp.replace":"eUHu","./modules/es6.regexp.search":"iHvG","./modules/es6.regexp.split":"V8KN","./modules/es6.promise":"ar2B","./modules/es6.map":"v0j2","./modules/es6.set":"igWm","./modules/es6.weak-map":"yBwO","./modules/es6.weak-set":"YtBU","./modules/es6.typed.array-buffer":"tZr0","./modules/es6.typed.data-view":"s1Mz","./modules/es6.typed.int8-array":"W7MG","./modules/es6.typed.uint8-array":"n9td","./modules/es6.typed.uint8-clamped-array":"m71d","./modules/es6.typed.int16-array":"YGkr","./modules/es6.typed.uint16-array":"OaOh","./modules/es6.typed.int32-array":"sUYQ","./modules/es6.typed.uint32-array":"XuMj","./modules/es6.typed.float32-array":"V93U","./modules/es6.typed.float64-array":"KMMD","./modules/es6.reflect.apply":"XlBZ","./modules/es6.reflect.construct":"JeCu","./modules/es6.reflect.define-property":"VZPr","./modules/es6.reflect.delete-property":"kfrU","./modules/es6.reflect.enumerate":"pLCm","./modules/es6.reflect.get":"iEI9","./modules/es6.reflect.get-own-property-descriptor":"eHzb","./modules/es6.reflect.get-prototype-of":"wht9","./modules/es6.reflect.has":"sj65","./modules/es6.reflect.is-extensible":"Nj86","./modules/es6.reflect.own-keys":"wyLA","./modules/es6.reflect.prevent-extensions":"y3HT","./modules/es6.reflect.set":"ndfm","./modules/es6.reflect.set-prototype-of":"olbq","./modules/es7.array.includes":"EHCj","./modules/es7.array.flat-map":"moLY","./modules/es7.array.flatten":"b3LS","./modules/es7.string.at":"uHWZ","./modules/es7.string.pad-start":"fWC9","./modules/es7.string.pad-end":"XG7E","./modules/es7.string.trim-left":"yPLu","./modules/es7.string.trim-right":"n2or","./modules/es7.string.match-all":"U9WL","./modules/es7.symbol.async-iterator":"Iboh","./modules/es7.symbol.observable":"CwRI","./modules/es7.object.get-own-property-descriptors":"MZQr","./modules/es7.object.values":"cZE6","./modules/es7.object.entries":"beat","./modules/es7.object.define-getter":"mNK1","./modules/es7.object.define-setter":"DPSG","./modules/es7.object.lookup-getter":"Y0di","./modules/es7.object.lookup-setter":"biAK","./modules/es7.map.to-json":"VZya","./modules/es7.set.to-json":"omDO","./modules/es7.map.of":"PjD2","./modules/es7.set.of":"Z2Pq","./modules/es7.weak-map.of":"ByVw","./modules/es7.weak-set.of":"CYPo","./modules/es7.map.from":"Swiz","./modules/es7.set.from":"yWUZ","./modules/es7.weak-map.from":"X04t","./modules/es7.weak-set.from":"Tbe6","./modules/es7.global":"SAyU","./modules/es7.system.global":"ixkq","./modules/es7.error.is-error":"p9Qi","./modules/es7.math.clamp":"DPl4","./modules/es7.math.deg-per-rad":"qvLd","./modules/es7.math.degrees":"vOCQ","./modules/es7.math.fscale":"bbog","./modules/es7.math.iaddh":"u35Z","./modules/es7.math.isubh":"AMAq","./modules/es7.math.imulh":"PjOg","./modules/es7.math.rad-per-deg":"MDih","./modules/es7.math.radians":"kkYP","./modules/es7.math.scale":"h4TH","./modules/es7.math.umulh":"LfG8","./modules/es7.math.signbit":"dibz","./modules/es7.promise.finally":"PerR","./modules/es7.promise.try":"vZUa","./modules/es7.reflect.define-metadata":"BSfr","./modules/es7.reflect.delete-metadata":"JW9N","./modules/es7.reflect.get-metadata":"x5Yv","./modules/es7.reflect.get-metadata-keys":"zaK7","./modules/es7.reflect.get-own-metadata":"Dz2Z","./modules/es7.reflect.get-own-metadata-keys":"sJYY","./modules/es7.reflect.has-metadata":"T0JC","./modules/es7.reflect.has-own-metadata":"UCXJ","./modules/es7.reflect.metadata":"iEkw","./modules/es7.asap":"OO50","./modules/es7.observable":"eRGJ","./modules/web.timers":"FL4b","./modules/web.immediate":"hg3C","./modules/web.dom.iterable":"hFdU","./modules/_core":"KVo1"}],"j0pQ":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];!function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,h=t.regeneratorRuntime;if(h)u&&(module.exports=h);else{(h=t.regeneratorRuntime=u?module.exports:{}).wrap=w;var s="suspendedStart",f="suspendedYield",l="executing",p="completed",y={},v={};v[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(P([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=E.prototype=x.prototype=Object.create(v);b.prototype=m.constructor=E,E.constructor=b,E[c]=b.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},h.awrap=function(t){return{__await:t}},j(_.prototype),_.prototype[a]=function(){return this},h.AsyncIterator=_,h.async=function(t,r,e,n){var o=new _(w(t,r,e,n));return h.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},h.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new N(n||[]);return i._invoke=function(t,r,e){var n=s;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===s)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=L(t,r,e);if("normal"===u.type){if(n=e.done?p:f,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function L(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}function x(){}function b(){}function E(){}function j(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function _(r){function e(t,o,i,a){var c=L(r[t],r,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}var o;"object"==typeof t.process&&t.process.domain&&(e=t.process.domain.bind(e)),this._invoke=function(t,r){function n(){return new Promise(function(n,o){e(t,r,n,o)})}return o=o?o.then(n,n):n()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=L(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:r,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this);
},{}],"b8Gs":[function(require,module,exports) {
module.exports=function(n,r){var t=r===Object(r)?function(n){return r[n]}:r;return function(r){return String(r).replace(n,t)}};
},{}],"M1NK":[function(require,module,exports) {
var e=require("./_export"),r=require("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(e){return r(e)}});
},{"./_export":"NjVL","./_replacer":"b8Gs"}],"p1zn":[function(require,module,exports) {
require("../../modules/core.regexp.escape"),module.exports=require("../../modules/_core").RegExp.escape;
},{"../../modules/core.regexp.escape":"M1NK","../../modules/_core":"KVo1"}],"JIy0":[function(require,module,exports) {
var global = arguments[3];

var e=arguments[3];if(require("core-js/shim"),require("regenerator-runtime/runtime"),require("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";function i(e,i,n){e[i]||Object[r](e,i,{writable:!0,configurable:!0,value:n})}i(String.prototype,"padLeft","".padStart),i(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&i(Array,e,Function.call.bind([][e]))});
},{"core-js/shim":"mRaX","regenerator-runtime/runtime":"j0pQ","core-js/fn/regexp/escape":"p1zn"}],"X4AU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KernelBackend=exports.DataStorage=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0;const r=1e-7;exports.EPSILON_FLOAT32=r;const e=1e-4;exports.EPSILON_FLOAT16=e;class t{constructor(r,e){this.backend=r,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,e){this.dataIdsCount++,this.data.set(r,e)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}}exports.DataStorage=t;class n{decComplexRef(r){}time(r){return a("time")}read(r){return a("read")}readSync(r){return a("readSync")}numDataIds(){return a("numDataIds")}disposeData(r){return a("disposeData")}write(r,e,t){return a("write")}move(r,e,t,n){return a("move")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:e}batchMatMul(r,e,t,n){return a("batchMatMul")}fusedBatchMatMul({a:r,b:e,transposeA:t,transposeB:n,bias:u,activation:o,preluActivationWeights:s}){return a("fusedBatchMatMul")}slice(r,e,t){return a("slice")}stridedSlice(r,e,t,n){return a("stridedSlice")}unstack(r,e){return a("unstack")}reverse(r,e){return a("reverse")}concat(r,e){return a("concat")}neg(r){return a("neg")}add(r,e){return a("add")}addN(r){return a("addN")}subtract(r,e){return a("subtract")}multiply(r,e){return a("multiply")}realDivide(r,e){return a("realDivide")}floorDiv(r,e){return a("floorDiv")}sum(r,e){return a("sum")}prod(r,e){return a("prod")}unsortedSegmentSum(r,e,t){return a("unsortedSegmentSum")}argMin(r,e){return a("argMin")}argMax(r,e){return a("argMax")}equal(r,e){return a("equal")}notEqual(r,e){return a("notEqual")}less(r,e){return a("less")}lessEqual(r,e){return a("lessEqual")}greater(r,e){return a("greater")}greaterEqual(r,e){return a("greaterEqual")}logicalNot(r){return a("logicalNot")}logicalAnd(r,e){return a("logicalAnd")}logicalOr(r,e){return a("logicalOr")}where(r){return a("where")}select(r,e,t){return a("select")}topk(r,e,t){return a("topk")}min(r,e){return a("min")}minimum(r,e){return a("minimum")}mod(r,e){return a("mod")}max(r,e){return a("max")}maximum(r,e){return a("maximum")}all(r,e){return a("all")}any(r,e){return a("any")}squaredDifference(r,e){return a("squaredDifference")}ceil(r){return a("ceil")}floor(r){return a("floor")}round(r){return a("round")}sign(r){return a("sign")}isNaN(r){return a("isNaN")}isInf(r){return a("isInf")}isFinite(r){return a("isFinite")}pow(r,e){return a("pow")}exp(r){return a("exp")}expm1(r){return a("expm1")}softmax(r,e){return a("softmax")}log(r){return a("log")}log1p(r){return a("log1p")}sqrt(r){return a("sqrt")}rsqrt(r){return a("rsqrt")}square(r){return a("square")}reciprocal(r){return a("reciprocal")}relu(r){return a("relu")}relu6(r){return a("relu6")}prelu(r,e){return a("prelu")}elu(r){return a("elu")}eluDer(r,e){return a("eluDer")}selu(r){return a("selu")}int(r){return a("int")}clip(r,e,t){return a("clip")}abs(r){return a("abs")}complexAbs(r){return a("complexAbs")}sigmoid(r){return a("sigmoid")}softplus(r){return a("softplus")}sin(r){return a("sin")}cos(r){return a("cos")}tan(r){return a("tan")}asin(r){return a("asin")}acos(r){return a("acos")}atan(r){return a("atan")}atan2(r,e){return a("atan2")}sinh(r){return a("sinh")}cosh(r){return a("cosh")}tanh(r){return a("tanh")}asinh(r){return a("asinh")}acosh(r){return a("acosh")}atanh(r){return a("atanh")}erf(r){return a("erf")}step(r,e){return a("step")}fusedConv2d({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedConv2d")}conv2d(r,e,t){return a("conv2d")}conv2dDerInput(r,e,t){return a("conv2dDerInput")}conv2dDerFilter(r,e,t){return a("conv2dDerFilter")}fusedDepthwiseConv2D({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedDepthwiseConv2D")}depthwiseConv2D(r,e,t){return a("depthwiseConv2D")}depthwiseConv2DDerInput(r,e,t){return a("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(r,e,t){return a("depthwiseConv2DDerFilter")}conv3d(r,e,t){return a("conv3d")}conv3dDerInput(r,e,t){return a("conv3dDerInput")}conv3dDerFilter(r,e,t){return a("conv3dDerFilter")}maxPool(r,e){return a("maxPool")}maxPoolBackprop(r,e,t,n){return a("maxPoolBackprop")}avgPool(r,e){return a("avgPool")}avgPoolBackprop(r,e,t){return a("avgPoolBackprop")}avgPool3d(r,e){return a("avgPool3d")}avgPool3dBackprop(r,e,t){return a("avgPool3dBackprop")}maxPool3d(r,e){return a("maxPool3d")}maxPool3dBackprop(r,e,t,n){return a("maxPool3dBackprop")}reshape(r,e){return a("reshape")}cast(r,e){return a("cast")}tile(r,e){return a("tile")}pad(r,e,t){return a("pad")}transpose(r,e){return a("transpose")}gather(r,e,t,n=0){return a("gather")}gatherND(r,e){return a("gatherND")}scatterND(r,e,t){return a("scatterND")}batchToSpaceND(r,e,t){return a("batchToSpaceND")}spaceToBatchND(r,e,t){return a("spaceToBatchND")}resizeBilinear(r,e,t,n,u){return a("resizeBilinear")}resizeBilinearBackprop(r,e,t){return a("resizeBilinearBackprop")}resizeNearestNeighbor(r,e,t,n,u){return a("resizeNearestNeighbor")}resizeNearestNeighborBackprop(r,e,t){return a("resizeNearestNeighborBackprop")}batchNorm(r,e,t,n,u,o){return a("batchNorm")}localResponseNormalization4D(r,e,t,n,u){return a("localResponseNormalization4D")}LRNGrad(r,e,t,n,u,o,s){return a("LRNGrad")}multinomial(r,e,t,n){return a("multinomial")}oneHot(r,e,t,n){return a("oneHot")}cumsum(r,e,t,n){return a("cumsum")}nonMaxSuppression(r,e,t,n,u){return a("nonMaxSuppression")}fft(r){return a("fft")}ifft(r){return a("ifft")}complex(r,e){return a("complex")}real(r){return a("real")}imag(r){return a("imag")}cropAndResize(r,e,t,n,u,o){return a("cropAndResize")}depthToSpace(r,e,t){return a("depthToSpace")}split(r,e,t){return a("split")}sparseToDense(r,e,t,n){return a("sparseToDense")}diag(r){return a("diag")}fill(r,e,t){return a("fill")}onesLike(r){return a("onesLike")}zerosLike(r){return a("zerosLike")}linspace(r,e,t){return a("linspace")}dispose(){return a("dispose")}}function a(r){throw new Error(`'${r}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}exports.KernelBackend=n;
},{}],"cppa":[function(require,module,exports) {
"use strict";function t(t){let r=t.length,e=0,n=0;for(;r>0;)n=Math.random()*r|0,e=t[--r],t[r]=t[n],t[n]=e}function r(t,r,e){return Math.max(t,Math.min(r,e))}function e(t){return t%2==0?t:t+1}function n(t){let r=0;for(let e=0;e<t.length;e++)r+=t[e];return r}function o(t,r){const e=Math.random();return r*e+(1-e)*t}function i(t,r){let e=0;for(let n=0;n<t.length;n++){const o=Number(t[n])-Number(r[n]);e+=o*o}return e}function s(t,r){if(!t)throw new Error("string"==typeof r?r:r())}function u(t,r,e=""){s(p(t,r),()=>e+` Shapes ${t} and ${r} must match`)}function a(t){s(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function l(t,r=[],e=!1){if(null==r&&(r=[]),Array.isArray(t)||v(t)&&!e)for(let n=0;n<t.length;++n)l(t[n],r,e);else r.push(t);return r}function f(t){if(0===t.length)return 1;let r=t[0];for(let e=1;e<t.length;e++)r*=t[e];return r}function c(t){return 0===t.length}function p(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function h(t){return t%1==0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const r=Math.exp(2*t);return(r-1)/(r+1)}}function x(t){const r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function m(r){const e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return t(e),e}function g(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function w(t,r=(t=>0),e){return new Promise((n,o)=>{let i=0;const s=()=>{if(t())return void n();const u=r(++i);null!=e&&i>=e?o():setTimeout(s,u)};s()})}function d(t,r){let e=1,n=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(-1===t[i]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${n} and dim ${i}`);n=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(-1===n){if(r>0&&r!==e)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(r%e!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${r} / ${e}`);const o=t.slice();return o[n]=r/e,o}function A(t,r){const e=r.length;return s((t=null==t?r.map((t,r)=>r):[].concat(t)).every(t=>t>=-e&&t<e),()=>`All values in axis param must be in range [-${e}, ${e}) but `+`got axis ${t}`),s(t.every(t=>h(t)),()=>"All values in axis param must be integers but "+`got axis ${t}`),t.map(t=>t<0?e+t:t)}function b(t,r){const e=[],n=[],o=null!=r&&Array.isArray(r)&&0===r.length,i=null==r||o?null:A(r,t).sort();let s=0;for(let u=0;u<t.length;++u){if(null!=i){if(i[s]===u&&1!==t[u])throw new Error(`Can't squeeze axis ${u} since its dim '${t[u]}' is not 1`);(null==i[s]||i[s]>u)&&1===t[u]&&(e.push(t[u]),n.push(u)),i[s]<=u&&s++}1!==t[u]&&(e.push(t[u]),n.push(u))}return{newShape:e,keptDims:n}}function $(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);e=new Uint8Array(r)}return e}function E(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else if("bool"===t)e=new Uint8Array(r);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(r)}return e}function S(t,r){for(let e=0;e<t.length;e++){const n=t[e];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${r} being uploaded contains ${n}.`)}}function F(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function T(t,r){return"complex64"!==r&&(("float32"!==r||"complex64"===t)&&(("int32"!==r||"float32"===t||"complex64"===t)&&("bool"!==r||"bool"!==t)))}function v(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function M(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function U(t){if(null==t)return 0;let r=0;return t.forEach(t=>r+=t.length),r}function I(t){return"string"==typeof t||t instanceof String}function N(t){return"boolean"==typeof t}function k(t){return"number"==typeof t}function z(t){return Array.isArray(t)?z(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":k(t)?"float32":I(t)?"string":N(t)?"bool":"float32"}function D(t){return!!(t&&t.constructor&&t.call&&t.apply)}function q(t,r){for(let e=r;e<t;++e)if(t%e==0)return e;return t}function P(t){const r=t.length;if(r<2)return[];const e=new Array(r-1);e[r-2]=t[r-1];for(let n=r-3;n>=0;--n)e[n]=e[n+1]*t[n+1];return e}function C(t,r,e){const n=new Array;if(1===r.length){const o=r[0];for(let r=0;r<o;r++)n[r]=e[t+r]}else{const o=r[0],i=r.slice(1),s=i.reduce((t,r)=>t*r);for(let r=0;r<o;r++)n[r]=C(t+r*s,i,e)}return n}function L(t,r){if(0===t.length)return r[0];const e=t.reduce((t,r)=>t*r);if(0===e)return[];if(e!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}.`);return C(0,t,r)}function O(t,r){const e=Z(t,r);for(let n=0;n<e.length;n++)e[n]=1;return e}function Z(t,r){if(null==r||"float32"===r||"complex64"===r)return new Float32Array(t);if("int32"===r)return new Int32Array(t);if("bool"===r)return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function _(t,r){const e=t.reduce((t,r)=>t*r,1);if(null==r||"float32"===r)return L(t,new Float32Array(e));if("int32"===r)return L(t,new Int32Array(e));if("bool"===r)return L(t,new Uint8Array(e));throw new Error(`Unknown data type ${r}`)}function j(t){t.forEach(r=>{s(Number.isInteger(r)&&r>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function B(t,r,e){if(0===r)return 0;if(1===r)return t[0];let n=t[t.length-1];for(let o=0;o<t.length-1;++o)n+=e[o]*t[o];return n}function G(t,r,e){if(0===r)return[];if(1===r)return[t];const n=new Array(r);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(t/e[o]),t-=n[o]*e[o];return n[n.length-1]=t,n}function V(t){return t&&t.then&&"function"==typeof t.then}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=t,exports.clamp=r,exports.nearestLargerEven=e,exports.sum=n,exports.randUniform=o,exports.distSquared=i,exports.assert=s,exports.assertShapesMatch=u,exports.assertNonNull=a,exports.flatten=l,exports.sizeFromShape=f,exports.isScalarShape=c,exports.arraysEqual=p,exports.isInt=h,exports.tanh=y,exports.sizeToSquarishShape=x,exports.createShuffledIndices=m,exports.rightPad=g,exports.repeatedTry=w,exports.inferFromImplicitShape=d,exports.parseAxisParam=A,exports.squeezeShape=b,exports.getTypedArrayFromDType=$,exports.getArrayFromDType=E,exports.checkConversionForErrors=S,exports.isValidDtype=F,exports.hasEncodingLoss=T,exports.isTypedArray=v,exports.bytesPerElement=M,exports.bytesFromStringArray=U,exports.isString=I,exports.isBoolean=N,exports.isNumber=k,exports.inferDtype=z,exports.isFunction=D,exports.nearestDivisor=q,exports.computeStrides=P,exports.toNestedArray=L,exports.makeOnesTypedArray=O,exports.makeZerosTypedArray=Z,exports.makeZerosNestedTypedArray=_,exports.assertNonNegativeIntegerDimensions=j,exports.locToIndex=B,exports.indexToLoc=G,exports.isPromise=V;
},{}],"Fbeg":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParams=r,exports.env=i,exports.setEnvironmentGlobal=g,exports.ENV=exports.Environment=void 0;var e=require("./util_base");const s="tfjsflags";class a{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if((0,e.isPromise)(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=r(this.global.location.search);if(s in t){t[s].split(",").forEach(t=>{const[e,s]=t.split(":");this.urlFlags[e]=o(e,s)})}}}function r(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...s)=>(l(e,s[0],s[1]),s.join("="))),e}function l(t,e,s){t[decodeURIComponent(e)]=decodeURIComponent(s||"")}function o(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function i(){return n}exports.Environment=a;let n=null;function g(t){exports.ENV=n=t}exports.ENV=n;
},{"./util_base":"cppa"}],"QcKL":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");let o;function n(){if(null==o){let n;if("undefined"!=typeof window)n=window;else if(void 0!==e)n=e;else if(void 0!==t)n=t;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}o=n}return o}function l(){const e=n();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function r(e,t){const o=l();if(o.has(e))return o.get(e);{const n=t();return o.set(e,n),o.get(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobalNamespace=n,exports.getGlobal=r;
},{"process":"g5IB"}],"sdEe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NonMaxSuppressionV3=exports.NotEqual=exports.Neg=exports.Multiply=exports.Multinomial=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.MaxPoolWithArgmax=exports.MaxPool3DGrad=exports.MaxPool3D=exports.MaxPoolGrad=exports.MaxPool=exports.Maximum=exports.Max=exports.LRNGrad=exports.LRN=exports.LogSoftmax=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.LeakyRelu=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.IFFT=exports.Identity=exports.GreaterEqual=exports.Greater=exports.GatherNd=exports.GatherV2=exports.FusedBatchNorm=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.ExpandDims=exports.Exp=exports.Equal=exports.Erf=exports.EluGrad=exports.Elu=exports.RealDiv=exports.Dilation2DBackpropFilter=exports.Dilation2DBackpropInput=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.DenseBincount=exports.CropAndResize=exports.Cumsum=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.ComplexAbs=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.Bincount=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPool3DGrad=exports.AvgPool3D=exports.AvgPoolGrad=exports.AvgPool=exports.Atan2=exports.Atanh=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0,exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports._FusedMatMul=exports.RotateWithOffset=exports.FromPixels=exports.Step=exports.ZerosLike=exports.UnsortedSegmentSum=exports.Unpack=exports.Unique=exports.Transpose=exports.TopK=exports.Tile=exports.Tanh=exports.Tan=exports.StridedSlice=exports.SparseToDense=exports.Sub=exports.Square=exports.SquaredDifference=exports.Softmax=exports.SplitV=exports.SpaceToBatchND=exports.Sum=exports.Sqrt=exports.Softplus=exports.Sigmoid=exports.Sign=exports.Sinh=exports.Sin=exports.Slice=exports.Selu=exports.Select=exports.ScatterNd=exports.Rsqrt=exports.Round=exports.Reverse=exports.Relu6=exports.ResizeBilinearGrad=exports.ResizeBilinear=exports.ResizeNearestNeighborGrad=exports.ResizeNearestNeighbor=exports.Reshape=exports.Relu=exports.Reciprocal=exports.Real=exports.Range=exports.Prod=exports.Prelu=exports.Pow=exports.Pool=exports.PadV2=exports.Pack=exports.OneHot=exports.OnesLike=exports.NonMaxSuppressionV5=exports.NonMaxSuppressionV4=void 0;const o="Abs";exports.Abs=o;const t="Acos";exports.Acos=t;const e="Acosh";exports.Acosh=e;const s="Add";exports.Add=s;const r="AddN";exports.AddN=r;const p="All";exports.All=p;const x="Any";exports.Any=x;const n="ArgMax";exports.ArgMax=n;const a="ArgMin";exports.ArgMin=a;const c="Asin";exports.Asin=c;const i="Asinh";exports.Asinh=i;const l="Atan";exports.Atan=l;const u="Atanh";exports.Atanh=u;const d="Atan2";exports.Atan2=d;const D="AvgPool";exports.AvgPool=D;const S="AvgPoolGrad";exports.AvgPoolGrad=S;const M="AvgPool3D";exports.AvgPool3D=M;const g="AvgPool3DGrad";exports.AvgPool3DGrad=g;const h="BatchMatMul";exports.BatchMatMul=h;const v="BatchToSpaceND";exports.BatchToSpaceND=v;const A="Bincount";exports.Bincount=A;const N="BroadcastTo";exports.BroadcastTo=N;const m="Cast";exports.Cast=m;const C="Ceil";exports.Ceil=C;const R="ClipByValue";exports.ClipByValue=R;const B="Complex";exports.Complex=B;const F="ComplexAbs";exports.ComplexAbs=F;const P="Concat";exports.Concat=P;const L="Conv2D";exports.Conv2D=L;const k="Conv2DBackpropFilter";exports.Conv2DBackpropFilter=k;const G="Conv2DBackpropInput";exports.Conv2DBackpropInput=G;const T="Conv3D";exports.Conv3D=T;const I="Conv3DBackpropFilterV2";exports.Conv3DBackpropFilterV2=I;const f="Conv3DBackpropInputV2";exports.Conv3DBackpropInputV2=f;const E="Cos";exports.Cos=E;const q="Cosh";exports.Cosh=q;const V="Cumsum";exports.Cumsum=V;const b="CropAndResize";exports.CropAndResize=b;const y="DenseBincount";exports.DenseBincount=y;const w="DepthToSpace";exports.DepthToSpace=w;const z="DepthwiseConv2dNative";exports.DepthwiseConv2dNative=z;const O="DepthwiseConv2dNativeBackpropFilter";exports.DepthwiseConv2dNativeBackpropFilter=O;const U="DepthwiseConv2dNativeBackpropInput";exports.DepthwiseConv2dNativeBackpropInput=U;const W="Diag";exports.Diag=W;const _="Dilation2D";exports.Dilation2D=_;const H="Dilation2DBackpropInput";exports.Dilation2DBackpropInput=H;const K="Dilation2DBackpropFilter";exports.Dilation2DBackpropFilter=K;const Z="RealDiv";exports.RealDiv=Z;const j="Elu";exports.Elu=j;const J="EluGrad";exports.EluGrad=J;const Q="Erf";exports.Erf=Q;const X="Equal";exports.Equal=X;const Y="Exp";exports.Exp=Y;const $="ExpandDims";exports.ExpandDims=$;const oo="Expm1";exports.Expm1=oo;const to="FFT";exports.FFT=to;const eo="Fill";exports.Fill=eo;const so="FlipLeftRight";exports.FlipLeftRight=so;const ro="Floor";exports.Floor=ro;const po="FloorDiv";exports.FloorDiv=po;const xo="FusedBatchNorm";exports.FusedBatchNorm=xo;const no="GatherV2";exports.GatherV2=no;const ao="GatherNd";exports.GatherNd=ao;const co="Greater";exports.Greater=co;const io="GreaterEqual";exports.GreaterEqual=io;const lo="Identity";exports.Identity=lo;const uo="IFFT";exports.IFFT=uo;const Do="Imag";exports.Imag=Do;const So="IsFinite";exports.IsFinite=So;const Mo="IsInf";exports.IsInf=Mo;const go="IsNan";exports.IsNan=go;const ho="LeakyRelu";exports.LeakyRelu=ho;const vo="Less";exports.Less=vo;const Ao="LessEqual";exports.LessEqual=Ao;const No="LinSpace";exports.LinSpace=No;const mo="Log";exports.Log=mo;const Co="Log1p";exports.Log1p=Co;const Ro="LogicalAnd";exports.LogicalAnd=Ro;const Bo="LogicalNot";exports.LogicalNot=Bo;const Fo="LogicalOr";exports.LogicalOr=Fo;const Po="LogSoftmax";exports.LogSoftmax=Po;const Lo="LRN";exports.LRN=Lo;const ko="LRNGrad";exports.LRNGrad=ko;const Go="Max";exports.Max=Go;const To="Maximum";exports.Maximum=To;const Io="MaxPool";exports.MaxPool=Io;const fo="MaxPoolGrad";exports.MaxPoolGrad=fo;const Eo="MaxPool3D";exports.MaxPool3D=Eo;const qo="MaxPool3DGrad";exports.MaxPool3DGrad=qo;const Vo="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=Vo;const bo="Mean";exports.Mean=bo;const yo="Min";exports.Min=yo;const wo="Minimum";exports.Minimum=wo;const zo="MirrorPad";exports.MirrorPad=zo;const Oo="Mod";exports.Mod=Oo;const Uo="Multinomial";exports.Multinomial=Uo;const Wo="Multiply";exports.Multiply=Wo;const _o="Neg";exports.Neg=_o;const Ho="NotEqual";exports.NotEqual=Ho;const Ko="NonMaxSuppressionV3";exports.NonMaxSuppressionV3=Ko;const Zo="NonMaxSuppressionV4";exports.NonMaxSuppressionV4=Zo;const jo="NonMaxSuppressionV5";exports.NonMaxSuppressionV5=jo;const Jo="OnesLike";exports.OnesLike=Jo;const Qo="OneHot";exports.OneHot=Qo;const Xo="Pack";exports.Pack=Xo;const Yo="PadV2";exports.PadV2=Yo;const $o="Pool";exports.Pool=$o;const ot="Pow";exports.Pow=ot;const tt="Prelu";exports.Prelu=tt;const et="Prod";exports.Prod=et;const st="Range";exports.Range=st;const rt="Real";exports.Real=rt;const pt="Reciprocal";exports.Reciprocal=pt;const xt="Relu";exports.Relu=xt;const nt="Reshape";exports.Reshape=nt;const at="ResizeNearestNeighbor";exports.ResizeNearestNeighbor=at;const ct="ResizeNearestNeighborGrad";exports.ResizeNearestNeighborGrad=ct;const it="ResizeBilinear";exports.ResizeBilinear=it;const lt="ResizeBilinearGrad";exports.ResizeBilinearGrad=lt;const ut="Relu6";exports.Relu6=ut;const dt="Reverse";exports.Reverse=dt;const Dt="Round";exports.Round=Dt;const St="Rsqrt";exports.Rsqrt=St;const Mt="ScatterNd";exports.ScatterNd=Mt;const gt="Select";exports.Select=gt;const ht="Selu";exports.Selu=ht;const vt="Slice";exports.Slice=vt;const At="Sin";exports.Sin=At;const Nt="Sinh";exports.Sinh=Nt;const mt="Sign";exports.Sign=mt;const Ct="Sigmoid";exports.Sigmoid=Ct;const Rt="Softplus";exports.Softplus=Rt;const Bt="Sqrt";exports.Sqrt=Bt;const Ft="Sum";exports.Sum=Ft;const Pt="SpaceToBatchND";exports.SpaceToBatchND=Pt;const Lt="SplitV";exports.SplitV=Lt;const kt="Softmax";exports.Softmax=kt;const Gt="SquaredDifference";exports.SquaredDifference=Gt;const Tt="Square";exports.Square=Tt;const It="Sub";exports.Sub=It;const ft="SparseToDense";exports.SparseToDense=ft;const Et="StridedSlice";exports.StridedSlice=Et;const qt="Tan";exports.Tan=qt;const Vt="Tanh";exports.Tanh=Vt;const bt="Tile";exports.Tile=bt;const yt="TopK";exports.TopK=yt;const wt="Transpose";exports.Transpose=wt;const zt="Unique";exports.Unique=zt;const Ot="Unpack";exports.Unpack=Ot;const Ut="UnsortedSegmentSum";exports.UnsortedSegmentSum=Ut;const Wt="ZerosLike";exports.ZerosLike=Wt;const _t="Step";exports.Step=_t;const Ht="FromPixels";exports.FromPixels=Ht;const Kt="RotateWithOffset";exports.RotateWithOffset=Kt;const Zt="_FusedMatMul";exports._FusedMatMul=Zt;const jt="FusedConv2D";exports.FusedConv2D=jt;const Jt="FusedDepthwiseConv2D";exports.FusedDepthwiseConv2D=Jt;
},{}],"wJg6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKernel=o,exports.getGradient=s,exports.getKernelsForBackend=i,exports.registerKernel=a,exports.registerGradient=c,exports.unregisterKernel=l,exports.unregisterGradient=g,exports.copyRegisteredKernels=d;var e=require("./environment"),r=require("./global_util");const n=(0,r.getGlobal)("kernelRegistry",()=>new Map),t=(0,r.getGlobal)("gradRegistry",()=>new Map);function o(e,r){const t=u(e,r);return n.get(t)}function s(e){return t.get(e)}function i(e){const r=n.entries(),t=[];for(;;){const{done:n,value:o}=r.next();if(n)break;const[s,i]=o,[a]=s.split("_");a===e&&t.push(i)}return t}function a(e){const{kernelName:r,backendName:t}=e,o=u(r,t);n.has(o)&&console.warn(`The kernel '${r}' for backend `+`'${t}' is already registered`),n.set(o,e)}function c(r){const{kernelName:n}=r;t.has(n)&&(0,e.env)().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${n}'`),t.set(n,r)}function l(e,r){const t=u(e,r);if(!n.has(t))throw new Error(`The kernel '${e}' for backend `+`'${r}' is not registered`);n.delete(t)}function g(e){if(!t.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);t.delete(e)}function d(e,r){i(e).forEach(e=>{a(Object.assign({},e,{backendName:r}))})}function u(e,r){return`${r}_${e}`}
},{"./environment":"Fbeg","./global_util":"QcKL"}],"P6nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createScalarValue:!0,toTypedArray:!0,now:!0,fetch:!0,encodeString:!0,decodeString:!0};exports.createScalarValue=a,exports.toTypedArray=f,exports.now=i,exports.fetch=c,exports.encodeString=l,exports.decodeString=p;var r=require("./environment"),t=o(require("./util_base"));function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function a(e,r){return"string"===r?l(e):f([e],r)}function u(e,r){return e instanceof Float32Array&&"float32"===r||e instanceof Int32Array&&"int32"===r||e instanceof Uint8Array&&"bool"===r}function f(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=t.flatten(e)),(0,r.env)().getBool("DEBUG")&&t.checkConversionForErrors(e,n),u(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){const r=new Uint8Array(e.length);for(let t=0;t<r.length;++t)0!==Math.round(e[t])&&(r[t]=1);return r}throw new Error(`Unknown data type ${n}`)}function i(){return(0,r.env)().platform.now()}function c(e,t){return(0,r.env)().platform.fetch(e,t)}function l(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.encode(e,t)}function p(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.decode(e,t)}Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});
},{"./environment":"Fbeg","./util_base":"cppa"}],"LCLi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkComputationForErrors=l,exports.Logger=exports.Profiler=void 0;var e=require("./environment"),t=o(require("./util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=l?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,o&&o.set(e,n),n}class n{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new i)}profileKernel(t,r,o){let n;const i=this.backendTimer.time(()=>{n=o()});if((0,e.env)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<n.length;e++){const r=n[e];r.data().then(e=>{l(e,r.dtype,t)})}return{kernelName:t,outputs:n,inputs:r,timeMs:i.then(e=>e.kernelMs),extraInfo:i.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:o,inputs:n,extraInfo:l}=e;r.forEach(e=>{Promise.all([e.data(),o,l]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],n,r[2])})})}}function l(e,t,r){if("float32"!==t)return!1;for(let o=0;o<e.length;o++){const t=e[o];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${r}'`),!0}return!1}exports.Profiler=n;class i{logKernelProfile(e,r,o,n,l,i){const s="number"==typeof n?t.rightPad(`${n}ms`,9):n.error,a=t.rightPad(e,25),c=r.rank,u=r.size,f=t.rightPad(r.shape.toString(),14);let p="";for(const t in l){const e=l[t];if(null!=e){const o=e.shape||r.shape,n=o.length;p+=`${t}: ${n}D ${n>0?o:""} `}}console.log(`%c${a}\t%c${s}\t%c${c}D ${f}\t%c${u}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}exports.Logger=i;
},{"./environment":"Fbeg","./util":"P6nv"}],"ugac":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilteredNodesXToY=r,exports.backpropagateGradients=o;var t=n(require("./util"));function e(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(e=function(t){return t?r:n})(t)}function n(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e(n);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=i?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}return o.default=t,r&&r.set(t,o),o}function r(t,e,n){const r={},o={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],i=n.inputs;for(const t in i){const s=i[t];let u=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),u=!0,o[n.id]=!0;break}if(u)break}}const i={};i[n.id]=!0;const s={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,s[e.id]=!0;break}}const u=[];for(let a=0;a<t.length;a++){const e=t[a];if(o[e.id]&&s[e.id]){const t={};for(const o in e.inputs){const n=e.inputs[o];r[n.id]&&(t[o]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,u.push(n)}}return u}function o(e,n,r,o){for(let i=n.length-1;i>=0;i--){const s=n[i],u=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?u.push(n):u.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const a=s.gradient(u);for(const n in s.inputs){if(!(n in a))throw new Error(`Cannot backprop through input ${n}. `+`Available gradients found: ${Object.keys(a)}.`);const i=r(()=>a[n]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${n} must have 'float32' dtype, but has '${i.dtype}'`);const u=s.inputs[n];if(!t.arraysEqual(i.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${n}' has shape '${i.shape}', which does not match `+`the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=i;else{const t=e[u.id];e[u.id]=o(t,i),t.dispose()}}}}
},{"./util":"P6nv"}],"GKxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensorToString=o;var e=require("./util");const t=20,r=3,n=7;function o(t,r,n,o){const l=(0,e.computeStrides)(r),i=s(t,r,n,l),c=r.length,p=u(t,r,n,l,i),a=["Tensor"];return o&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${c}`),a.push(`  shape: [${r}]`),a.push("  values:")),a.push(p.map(e=>"    "+e).join("\n")),a.join("\n")}function s(t,r,n,o){const s=(0,e.sizeFromShape)(r),i=o[o.length-1],u=new Array(i).fill(0),p=r.length,a="complex64"===n?c(t):t;if(p>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],l(a[t+e],0,n).length)}return u}function l(t,r,o){let s;return s=Array.isArray(t)?`${parseFloat(t[0].toFixed(n))} + `+`${parseFloat(t[1].toFixed(n))}j`:(0,e.isString)(t)?`'${t}'`:"bool"===o?i(t):parseFloat(t.toFixed(n)).toString(),(0,e.rightPad)(s,r)}function i(e){return 0===e?"false":"true"}function u(e,n,o,s,p,a=!0){const f="complex64"===o?2:1,h=n[0],m=n.length;if(0===m){if("complex64"===o){return[l(c(e)[0],0,o)]}return"bool"===o?[i(e[0])]:[e[0].toString()]}if(1===m){if(h>t){const t=r*f;let n=Array.from(e.slice(0,t)),s=Array.from(e.slice((h-r)*f,h*f));return"complex64"===o&&(n=c(n),s=c(s)),["["+n.map((e,t)=>l(e,p[t],o)).join(", ")+", ..., "+s.map((e,t)=>l(e,p[h-r+t],o)).join(", ")+"]"]}return["["+("complex64"===o?c(e):Array.from(e)).map((e,t)=>l(e,p[t],o)).join(", ")+"]"]}const g=n.slice(1),x=s.slice(1),d=s[0]*f,y=[];if(h>t){for(let t=0;t<r;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,!1))}y.push("...");for(let t=h-r;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}}else for(let t=0;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}const j=2===m?",":"";y[0]="["+y[0]+j;for(let t=1;t<y.length-1;t++)y[t]=" "+y[t]+j;let F=",\n";for(let t=2;t<m;t++)F+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":F),y}function c(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}
},{"./util":"P6nv"}],"DTHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTensorTracker=h,exports.setOpHandler=d,exports.setDeprecationWarningFn=p,exports.Variable=exports.Tensor=exports.TensorBuffer=void 0;var t=require("./tensor_format"),e=r(require("./util"));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=n?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}class i{constructor(t,s,r){if(this.dtype=s,this.shape=t.slice(),this.size=e.sizeFromShape(t),null!=r){const t=r.length;e.assert(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===s)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||e.getArrayFromDType(s,this.size),this.strides=(0,e.computeStrides)(t)}set(t,...s){0===s.length&&(s=[0]),e.assert(s.length===this.rank,()=>`The number of provided coordinates (${s.length}) must `+`match the rank (${this.rank})`);const r=this.locToIndex(s);this.values[r]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(e)}e++}let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return this.values[s]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return n().makeTensor(this.values,this.shape,this.dtype)}}exports.TensorBuffer=i;let n=null,a=null,o=null;function h(t){n=t}function d(t){a=t}function p(t){o=t}class l{constructor(t,s,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=s||"float32",this.size=e.sizeFromShape(t),this.strides=(0,e.computeStrides)(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return a.buffer(this.shape,this.dtype,t)}bufferSync(){return a.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return(0,e.toNestedArray)(this.shape,t)}arraySync(){return(0,e.toNestedArray)(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=n().read(this.dataId);if("string"===this.dtype){const r=await t;try{return r.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=n().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await n().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(n().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return a.print(this,t)}clone(){return this.throwIfDisposed(),a.clone(this)}toString(e=!1){const s=this.dataSync();return(0,t.tensorToString)(s,this.shape,this.dtype,e)}cast(t){return this.throwIfDisposed(),a.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),n().makeVariable(this,t,e,s)}}exports.Tensor=l,Object.defineProperty(l,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed});class u extends l{constructor(t,e,s,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!e.arraysEqual(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);n().disposeTensor(this),this.dataId=t.dataId,n().incRef(this,null)}dispose(){n().disposeVariable(this),this.isDisposedInternal=!0}}exports.Variable=u,Object.defineProperty(u,Symbol.hasInstance,{value:t=>t instanceof l&&null!=t.assign&&t.assign instanceof Function});
},{"./tensor_format":"GKxW","./util":"P6nv"}],"Grh1":[function(require,module,exports) {
"use strict";var o,t,n,e,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.upcastType=r,exports.sumOutType=c,exports.Rank=void 0,exports.Rank=o,function(o){o.R0="R0",o.R1="R1",o.R2="R2",o.R3="R3",o.R4="R4",o.R5="R5",o.R6="R6"}(o||(exports.Rank=o={})),function(o){o.float32="float32",o.int32="int32",o.bool="int32",o.complex64="complex64"}(t||(t={})),function(o){o.float32="float32",o.int32="int32",o.bool="bool",o.complex64="complex64"}(n||(n={})),function(o){o.float32="float32",o.int32="float32",o.bool="float32",o.complex64="complex64"}(e||(e={})),function(o){o.float32="complex64",o.int32="complex64",o.bool="complex64",o.complex64="complex64"}(l||(l={}));const i={float32:e,int32:t,bool:n,complex64:l};function r(o,t){if("string"===o||"string"===t){if("string"===o&&"string"===t)return"string";throw new Error(`Can not upcast ${o} with ${t}`)}return i[o][t]}function c(o){return r(o,"int32")}
},{}],"fpST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTypesMatch=n,exports.assertTypesMatch=s,exports.isTensorInList=o,exports.getTensorsInContainer=i;var t=require("./tensor"),e=require("./types"),r=require("./util");function n(t,r){if(t.dtype===r.dtype)return[t,r];const n=(0,e.upcastType)(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function s(t,e){(0,r.assert)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function o(t,e){return e.some(e=>e.id===t.id)}function i(t){const e=[];return u(t,e,new Set),e}function u(e,r,n){if(null==e)return;if(e instanceof t.Tensor)return void r.push(e);if(!p(e))return;const s=e;for(const t in s){const e=s[t];n.has(e)||(n.add(e),u(e,r,n))}}function p(t){return Array.isArray(t)||"object"==typeof t}
},{"./tensor":"DTHt","./types":"Grh1","./util":"P6nv"}],"Nc3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOrMakeEngine=k,exports.add=g,exports.ENGINE=exports.Engine=void 0;var e=require("./backends/backend"),t=require("./environment"),s=require("./global_util"),n=require("./kernel_names"),r=require("./kernel_registry"),a=require("./profiler"),i=require("./tape"),o=require("./tensor"),c=require("./tensor_util"),h=l(require("./util"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(d=function(e){return e?s:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=d(t);if(s&&s.has(e))return s.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}class u{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class p{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new u}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success)return void(await this.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new a.Profiler(this.backendInstance),!0}setupRegisteredKernels(){(0,r.getKernelsForBackend)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,r.getKernelsForBackend)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(t){const s=this.registryFactory[t];if(null==s)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(!r||r instanceof e.KernelBackend||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,s=r.then(s=>!(e<this.pendingBackendInitId)&&(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(s.stack||s.message),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:n,asyncInit:r}=this.initializeBackend(s);if(r||n)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),n=s.backend,r=this.readSync(t);n.disposeData(t),s.backend=e,e.move(t,r,s.shape,s.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(s),()=>((s=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,s){e();try{const e=s();return t(),e}catch(n){throw t(),n}}nextTensorId(){return p.nextTensorId++}nextVariableId(){return p.nextVariableId++}clone(e){const t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),s={x:e};return this.addTapeNode(this.state.activeScope.name,s,[t],e=>({x:()=>{const t={x:e},s={dtype:"float32"};return y.runKernelFunc(t=>t.cast(e,"float32"),t,null,n.Cast,s)}}),[],{}),t}runKernel(e,t,s,n,r){return this.runKernelFunc(null,t,null,e,s,n,r)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const n=this.backend.numDataIds();let r=0;s.forEach(e=>{r+="complex64"===e.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${i} data ids) after running '${e}'`)}runKernelFunc(e,t,s,n,a,i,o){let c,h=[];const d=this.isTapeOn();null==n&&(n=null!=this.state.activeScope?this.state.activeScope.name:"");const l=this.state.numBytes,u=this.state.numTensors;let p;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const f=(0,r.getKernel)(n,this.backendName);let k,y;if(null!=f)p=(()=>{const e=this.backend.numDataIds();k=f.kernelFunc({inputs:t,attrs:a,backend:this.backend});const s=Array.isArray(k)?k:[k];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,e,s);const r=s.map(e=>{if(null!=e.rank)return e;const{dataId:t,shape:s,dtype:n}=e;return this.makeTensorFromDataId(t,s,n)});if(d){let e=this.getTensorsForGradient(n,t,r);if(null==e){null==o&&(o=[]);const t=r.filter((e,t)=>o[t]);e=(i||[]).slice().concat(t)}h=this.saveTensorsForBackwardMode(e)}return r});else{if(null==e)throw new Error(`Error running ${n}: Neither modular kernel nor forward func passed`);const t=e=>{d&&(h=e.map(e=>this.keep(this.clone(e))))};p=(()=>{const s=this.backend.numDataIds();k=this.tidy(()=>e(this.backend,t));const r=Array.isArray(k)?k:[k];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,s,r),r})}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(y=this.profiler.profileKernel(n,t,()=>p()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(y),c=y.outputs):c=p()}),d&&this.addTapeNode(n,t,c,s,h,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:n,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(e=>null!=t[e]?t[e].shape:null),outputShapes:c.map(e=>e.shape),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(k)?c:c[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,s){const n=(0,r.getGradient)(e);if(null!=n){const e=n.inputsToSave||[],r=n.outputsToSave||[];let a;n.saveAllInputs?(h.assert(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(e=>t[e])):a=e.map(e=>t[e]);const i=s.filter((e,t)=>r[t]);return a.concat(i)}return null}makeTensor(e,t,s,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",n=n||this.backend;let r=e;"string"===s&&h.isString(e[0])&&(r=e.map(e=>h.encodeString(e)));const a=n.write(r,t,s),i=new o.Tensor(t,s,a,this.nextTensorId());if(this.incRef(i,n),"string"===s){const e=this.state.tensorInfo.get(a),t=(0,h.bytesFromStringArray)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,s,n){s=s||"float32";const r=new o.Tensor(t,s,e,this.nextTensorId());return this.incRef(r,n),r}makeVariable(e,t=!0,s,n){s=s||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const r=new o.Variable(e,t,s,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}incRef(e,t){const s=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===s){this.state.numDataBuffers++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*h.bytesPerElement(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof o.Variable||this.track(e)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;const t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):(t.backend.decComplexRef(e.dataId),this.state.tensorInfo.get(e.dataId).refCount--)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const n of this.state.activeProfile.kernels)n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,s,n,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},c=(0,r.getGradient)(e);null!=c&&(n=c.gradFunc),null!=n&&(o.gradient=(e=>(e=e.map((e,t)=>{if(null==e){const e=s[t],n=h.makeZerosTypedArray(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,i)))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,c.getTensorsInContainer)(e),s=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||s.has(e.id)||e.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,s,n=!1){if(h.assert(t.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));h.assert(r instanceof o.Tensor,()=>"The result y returned by f() must be a tensor.");const a=(0,i.getFilteredNodesXToY)(this.state.activeTape,t,r);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==s?f(r.shape):s,(0,i.backpropagateGradients)(e,a,e=>this.tidy(e),g);const n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:n}})}customGrad(e){return h.assert(h.isFunction(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let s;h.assert(t.every(e=>e instanceof o.Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};return t.forEach((e,t)=>{n[t]=e}),this.runKernelFunc((n,r)=>(s=e(...t,r),h.assert(s.value instanceof o.Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),h.assert(h.isFunction(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),n,(e,n)=>{const r=s.gradFunc(e,n),a=Array.isArray(r)?r:[r];h.assert(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),h.assert(a.every(e=>e instanceof o.Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=(()=>e)}),i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=(0,h.now)(),s=await this.backend.time(e);return s.wallMs=(0,h.now)()-t,s}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new u;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function f(e){const t=(0,h.makeOnesTypedArray)((0,h.sizeFromShape)(e),"float32");return y.makeTensor(t,e,"float32")}function k(){const e=(0,s.getGlobalNamespace)();if(null==e._tfengine){const s=new t.Environment(e);e._tfengine=new p(s)}return(0,t.setEnvironmentGlobal)(e._tfengine.ENV),(0,o.setTensorTracker)(()=>e._tfengine),e._tfengine}exports.Engine=p,p.nextTensorId=0,p.nextVariableId=0;const y=k();function g(e,t){const s={a:e,b:t};return y.runKernel(n.Add,s)}exports.ENGINE=y;
},{"./backends/backend":"X4AU","./environment":"Fbeg","./global_util":"QcKL","./kernel_names":"sdEe","./kernel_registry":"wJg6","./profiler":"LCLi","./tape":"ugac","./tensor":"DTHt","./tensor_util":"fpST","./util":"P6nv"}],"GUPw":[function(require,module,exports) {
"use strict";function e(){return"undefined"!=typeof navigator&&null!=navigator}function i(){if(e()){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=i,exports.isBrowser=o;
},{}],"BElI":[function(require,module,exports) {
var process = require("process");
var e=require("process");require("./engine");var r=i(require("./device_util")),t=require("./environment");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var g=o?Object.getOwnPropertyDescriptor(e,a):null;g&&(g.get||g.set)?Object.defineProperty(i,a,g):i[a]=e[a]}return i.default=e,t&&t.set(e,i),i}const o=(0,t.env)();o.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),o.registerFlag("IS_BROWSER",()=>r.isBrowser()),o.registerFlag("IS_NODE",()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node),o.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),o.registerFlag("PROD",()=>!1),o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>o.getBool("DEBUG")),o.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),o.registerFlag("IS_TEST",()=>!1),o.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);
},{"./engine":"Nc3Y","./device_util":"GUPw","./environment":"Fbeg","process":"g5IB"}],"c6yR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inferShape=o,exports.convertToTensor=a,exports.convertToTensorArray=u;var r=require("./engine"),e=require("./environment"),n=require("./tensor"),t=require("./util");function o(r,n){let o=r;if((0,t.isTypedArray)(r))return"string"===n?[]:[r.length];if(!Array.isArray(r))return[];const i=[];for(;Array.isArray(o)||(0,t.isTypedArray)(o)&&"string"!==n;)i.push(o.length),o=o[0];return Array.isArray(r)&&(0,e.env)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s(r,i,[]),i}function s(r,e,n){if(n=n||[],!Array.isArray(r)&&!(0,t.isTypedArray)(r))return void(0,t.assert)(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,t.assert)(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, `+`but is an array of ${r.length} elements`),(0,t.assert)(r.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} `+`elements, but has ${r.length} elements`);const o=e.slice(1);for(let t=0;t<r.length;++t)s(r[t],o,n.concat(t))}function i(r,e,n,t){if("string_or_numeric"!==r){if(null==r)throw new Error("Expected dtype cannot be null.");if("numeric"!==r&&r!==e||"numeric"===r&&"string"===e)throw new Error(`Argument '${n}' passed to '${t}' must `+`be ${r} tensor, but got ${e} tensor`)}}function a(e,s,a,u="numeric"){if(e instanceof n.Tensor)return i(u,e.dtype,s,a),e;let l=(0,t.inferDtype)(e);if("string"!==l&&["bool","int32","float32"].indexOf(u)>=0&&(l=u),i(u,l,s,a),null==e||!(0,t.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${s}' passed to '${a}' must be a `+`Tensor or TensorLike, but got '${r}'`)}const y=o(e,l);(0,t.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const f="string"!==l?(0,t.toTypedArray)(e,l):(0,t.flatten)(e,[],!0);return r.ENGINE.makeTensor(f,y,l)}function u(r,e,n,t="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${n} must be a `+"`Tensor[]` or `TensorLike[]`");return r.map((r,o)=>a(r,`${e}[${o}]`,n,t))}
},{"./engine":"Nc3Y","./environment":"Fbeg","./tensor":"DTHt","./util":"P6nv"}],"JtaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.op=n,exports.OP_SCOPE_SUFFIX=void 0;var e=require("../engine"),t=require("../util");const o="__op";function n(n){const r=Object.keys(n);if(1!==r.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${r.length} keys.`);let i=r[0];const s=n[i];i.endsWith("_")&&(i=i.substring(0,i.length-1)),i+=o;const c=(...o)=>{e.ENGINE.startScope(i);try{const r=s(...o);return(0,t.isPromise)(r)&&console.error("Cannot return a Promise inside of tidy."),e.ENGINE.endScope(r),r}catch(n){throw e.ENGINE.endScope(null),n}};return Object.defineProperty(c,"name",{value:i,configurable:!0}),c}exports.OP_SCOPE_SUFFIX=o;
},{"../engine":"Nc3Y","../util":"P6nv"}],"Iowv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var u=o?Object.getOwnPropertyDescriptor(e,p):null;u&&(u.get||u.set)?Object.defineProperty(n,p,u):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}function u(o,a){const p=(0,t.convertToTensor)(o,"real","complex"),u=(0,t.convertToTensor)(a,"imag","complex");n.assertShapesMatch(p.shape,u.shape,`real and imag shapes, ${p.shape} and ${u.shape}, `+"must match in call to tf.complex().");const i={real:p,imag:u};return e.ENGINE.runKernel(r.Complex,i)}const i=(0,o.op)({complex_:u});exports.complex=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"m0jF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTensor=s;var e=require("../engine"),r=require("../util");function s(s,o,t,a){if(null==a&&(a=(0,r.inferDtype)(s)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.isTypedArray)(s)&&!Array.isArray(s)&&"number"!=typeof s&&"boolean"!=typeof s&&"string"!=typeof s)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=o){(0,r.assertNonNegativeIntegerDimensions)(o);const e=(0,r.sizeFromShape)(o),s=(0,r.sizeFromShape)(t);(0,r.assert)(e===s,()=>`Based on the provided shape, [${o}], the tensor should have `+`${e} values but has ${s}`);for(let a=0;a<t.length;++a){const e=t[a],s=a!==t.length-1||e!==(0,r.sizeFromShape)(o.slice(a));(0,r.assert)(t[a]===o[a]||!s,()=>"Error creating a new Tensor. Inferred shape "+`(${t}) does not match the provided `+`shape (${o}). `)}}return(0,r.isTypedArray)(s)||Array.isArray(s)||(s=[s]),o=o||t,s="string"!==a?(0,r.toTypedArray)(s,a):(0,r.flatten)(s,[],!0),e.ENGINE.makeTensor(s,o,a)}
},{"../engine":"Nc3Y","../util":"P6nv"}],"P2QC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor=t;var e=require("../tensor_util_env"),r=require("./tensor_ops_util");function t(t,n,o){const s=(0,e.inferShape)(t,o);return(0,r.makeTensor)(t,n,s,o)}
},{"../tensor_util_env":"c6yR","./tensor_ops_util":"m0jF"}],"annF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DTYPE_VALUE_SIZE_MAP=void 0;const t={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};exports.DTYPE_VALUE_SIZE_MAP=t;
},{}],"FekA":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeWeights=a,exports.decodeWeights=s,exports.concatenateTypedArrays=f,exports.stringByteLength=y,exports.arrayBufferToBase64String=p,exports.base64StringToArrayBuffer=u,exports.concatenateArrayBuffers=c,exports.basename=h,exports.getModelArtifactsInfoForJSON=d,exports.getFloat16Decoder=b;var t=require("../ops/complex"),n=require("../ops/tensor"),r=require("../util"),o=require("./types");const i=4;async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<o.length;++a){const s=o[a],f=Array.isArray(e)?e[a].tensor:e[s];if("float32"!==f.dtype&&"int32"!==f.dtype&&"bool"!==f.dtype&&"string"!==f.dtype&&"complex64"!==f.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${f.dtype}`);const l={name:s,shape:f.shape,dtype:f.dtype};if("string"===f.dtype){const e=new Promise(async e=>{const t=await f.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=i,r.set(e,o),o+=e.length}e(r)});r.push(e)}else r.push(f.data());null!=t&&(l.group=t),n.push(l)}return{data:f(await Promise.all(r)),specs:n}}function s(e,a){const s={};let f,l=0;for(const y of a){const a=y.name,p=y.dtype,u=y.shape,c=(0,r.sizeFromShape)(u);let h;if("quantization"in y){const t=y.quantization;if("uint8"===t.dtype||"uint16"===t.dtype){if(!("min"in t&&"scale"in t))throw new Error(`Weight ${y.name} with quantization ${t.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==t.dtype)throw new Error(`Weight ${y.name} has unknown `+`quantization dtype ${t.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==p)throw new Error(`Weight ${y.name} is quantized with ${t.dtype} `+`which only supports weights of type float32 not ${p}.`)}const n=o.DTYPE_VALUE_SIZE_MAP[t.dtype],r=e.slice(l,l+c*n),i="uint8"===t.dtype?new Uint8Array(r):new Uint16Array(r);if("float32"===p)if("uint8"===t.dtype||"uint16"===t.dtype){h=new Float32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=n*t.scale+t.min}}else{if("float16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type float32.");void 0===f&&(f=b()),h=f(i)}else{if("int32"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);if("uint8"!==t.dtype&&"uint16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type int32.");h=new Int32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=Math.round(n*t.scale+t.min)}}l+=c*n}else if("string"===p){const t=(0,r.sizeFromShape)(y.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(l,l+i))[0];l+=i;const n=new Uint8Array(e.slice(l,l+t));h.push(n),l+=t}}else{const r=o.DTYPE_VALUE_SIZE_MAP[p],i=e.slice(l,l+c*r);if("float32"===p)h=new Float32Array(i);else if("int32"===p)h=new Int32Array(i);else if("bool"===p)h=new Uint8Array(i);else{if("complex64"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);{h=new Float32Array(i);const e=new Float32Array(h.length/2),r=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],r[t]=h[2*t+1];const o=(0,n.tensor)(e,u,"float32"),f=(0,n.tensor)(r,u,"float32");s[a]=(0,t.complex)(o,f),o.dispose(),f.dispose()}}l+=c*r}"complex64"!==p&&(s[a]=(0,n.tensor)(h,u,p))}return s}function f(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let o=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(t){return l?e.byteLength(t):new Blob([t]).size}function p(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,o=n.length;e<o;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function u(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function c(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function h(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function d(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function g(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function A(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function b(){const e=w(),t=g(),n=A();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let a=0;a<r.length;a++){const o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(o)}}
},{"../ops/complex":"Iowv","../ops/tensor":"P2QC","../util":"P6nv","./types":"annF","buffer":"aMB2"}],"y7n6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoadHandlers=exports.getSaveHandlers=exports.registerLoadRouter=exports.registerSaveRouter=exports.IORouterRegistry=void 0;class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,s){return e.getHandlers(t,"load",s)}static getHandlers(t,s,r){const a=[];return("load"===s?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(e=>{const s=e(t,r);null!==s&&a.push(s)}),a}}exports.IORouterRegistry=e;const t=t=>e.registerSaveRouter(t);exports.registerSaveRouter=t;const s=t=>e.registerLoadRouter(t);exports.registerLoadRouter=s;const r=t=>e.getSaveHandlers(t);exports.getSaveHandlers=r;const a=(t,s)=>e.getLoadHandlers(t,s);exports.getLoadHandlers=a;
},{}],"nmFM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteDatabase=d,exports.browserIndexedDB=h,exports.BrowserIndexedDBManager=exports.indexedDBRouter=exports.BrowserIndexedDB=void 0,require("../flags");var e=require("../environment"),o=require("./io_utils"),r=require("./router_registry");const t="tensorflowjs",n=1,s="models_store",c="model_info_store";async function d(){const e=l();return new Promise((o,r)=>{const n=e.deleteDatabase(t);n.onsuccess=(()=>o()),n.onerror=(e=>r(e))})}function l(){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const o="undefined"==typeof window?self:window,r=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(null==r)throw new Error("The current browser does not appear to support IndexedDB.");return r}function a(e){const o=e.result;o.createObjectStore(s,{keyPath:"modelPath"}),o.createObjectStore(c,{keyPath:"modelPath"})}class i{constructor(e){if(this.indexedDB=l(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((e,d)=>{const l=this.indexedDB.open(t,n);l.onupgradeneeded=(()=>a(l)),l.onsuccess=(()=>{const t=l.result;if(null==r){const o=t.transaction(s,"readonly"),r=o.objectStore(s).get(this.modelPath);r.onsuccess=(()=>{if(null==r.result)return t.close(),d(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)}),r.onerror=(e=>(t.close(),d(r.error))),o.oncomplete=(()=>t.close())}else{const n=(0,o.getModelArtifactsInfoForJSON)(r),l=t.transaction(c,"readwrite");let a=l.objectStore(c);const i=a.put({modelPath:this.modelPath,modelArtifactsInfo:n});let u;i.onsuccess=(()=>{const o=(u=t.transaction(s,"readwrite")).objectStore(s).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:n});o.onsuccess=(()=>e({modelArtifactsInfo:n})),o.onerror=(e=>{const r=(a=l.objectStore(c)).delete(this.modelPath);r.onsuccess=(()=>(t.close(),d(o.error))),r.onerror=(e=>(t.close(),d(o.error)))})}),i.onerror=(e=>(t.close(),d(i.error))),l.oncomplete=(()=>{null==u?t.close():u.oncomplete=(()=>t.close())})}}),l.onerror=(e=>d(l.error))})}}exports.BrowserIndexedDB=i,i.URL_SCHEME="indexeddb://";const u=o=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(i.URL_SCHEME)?h(o.slice(i.URL_SCHEME.length)):null;function h(e){return new i(e)}function m(e){return e.startsWith(i.URL_SCHEME)?e.slice(i.URL_SCHEME.length):e}exports.indexedDBRouter=u,r.IORouterRegistry.registerSaveRouter(u),r.IORouterRegistry.registerLoadRouter(u);class f{constructor(){this.indexedDB=l()}async listModels(){return new Promise((e,o)=>{const r=this.indexedDB.open(t,n);r.onupgradeneeded=(()=>a(r)),r.onsuccess=(()=>{const t=r.result,n=t.transaction(c,"readonly"),s=n.objectStore(c).getAll();s.onsuccess=(()=>{const o={};for(const e of s.result)o[e.modelPath]=e.modelArtifactsInfo;e(o)}),s.onerror=(e=>(t.close(),o(s.error))),n.oncomplete=(()=>t.close())}),r.onerror=(e=>o(r.error))})}async removeModel(e){return e=m(e),new Promise((o,r)=>{const d=this.indexedDB.open(t,n);d.onupgradeneeded=(()=>a(d)),d.onsuccess=(()=>{const t=d.result,n=t.transaction(c,"readwrite"),l=n.objectStore(c),a=l.get(e);let i;a.onsuccess=(()=>{if(null==a.result)return t.close(),r(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const n=l.delete(e),c=()=>{const n=(i=t.transaction(s,"readwrite")).objectStore(s).delete(e);n.onsuccess=(()=>o(a.result.modelArtifactsInfo)),n.onerror=(e=>r(a.error))};n.onsuccess=c,n.onerror=(e=>(c(),t.close(),r(a.error)))}}),a.onerror=(e=>(t.close(),r(a.error))),n.oncomplete=(()=>{null==i?t.close():i.oncomplete=(()=>t.close())})}),d.onerror=(e=>r(d.error))})}}exports.BrowserIndexedDBManager=f;
},{"../flags":"BElI","../environment":"Fbeg","./io_utils":"FekA","./router_registry":"y7n6"}],"TVL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.purgeLocalStorageArtifacts=d,exports.browserLocalStorage=y,exports.BrowserLocalStorageManager=exports.localStorageRouter=exports.BrowserLocalStorage=void 0,require("../flags");var e=require("../environment"),t=require("../util"),o=require("./io_utils"),r=require("./router_registry");const s="/",i="tensorflowjs_models",a="info",n="model_topology",l="weight_specs",g="weight_data",h="model_metadata";function d(){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");const t=window.localStorage,o=[];for(let e=0;e<t.length;++e){const r=t.key(e),a=i+s;if(r.startsWith(a)&&r.length>a.length){t.removeItem(r);const e=m(r);-1===o.indexOf(e)&&o.push(e)}}return o}function c(e){return{info:[i,e,a].join(s),topology:[i,e,n].join(s),weightSpecs:[i,e,l].join(s),weightData:[i,e,g].join(s),modelMetadata:[i,e,h].join(s)}}function m(e){const t=e.split(s);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(s)}function u(e){return e.startsWith(S.URL_SCHEME)?e.slice(S.URL_SCHEME.length):e}class S{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=c(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),i=(0,o.getModelArtifactsInfoForJSON)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,(0,o.arrayBufferToBase64String)(e.weightData));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${i.modelTopologyBytes}, `+`weightSpecsBytes=${i.weightSpecsBytes}, `+`weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==s)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=(0,o.base64StringToArrayBuffer)(a),t}}exports.BrowserLocalStorage=S,S.URL_SCHEME="localstorage://";const w=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(S.URL_SCHEME)?y(t.slice(S.URL_SCHEME.length)):null;function y(e){return new S(e)}exports.localStorageRouter=w,r.IORouterRegistry.registerSaveRouter(w),r.IORouterRegistry.registerLoadRouter(w);class f{constructor(){(0,t.assert)((0,e.env)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,t.assert)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=i+s,o=s+a;for(let r=0;r<this.LS.length;++r){const s=this.LS.key(r);if(s.startsWith(t)&&s.endsWith(o)){e[m(s)]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){const t=c(e=u(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const o=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),o}}exports.BrowserLocalStorageManager=f;
},{"../flags":"BElI","../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./router_registry":"y7n6"}],"HWNt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveModel=l,exports.copyModel=c,exports.removeModel=i,exports.listModels=o,exports.ModelStoreManagerRegistry=void 0;var e=require("../util"),t=require("./router_registry");const n="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,r){(0,e.assert)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(n)&&(t=t.slice(0,t.indexOf(n))),(0,e.assert)(t.length>0,()=>"scheme must not be an empty string.");const a=s.getInstance();(0,e.assert)(null==a.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),a.managers[t]=r}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function r(e){if(-1===e.indexOf(n))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${s.getSchemes().join(",")}`);return{scheme:e.split(n)[0],path:e.split(n)[1]}}async function a(n,a,o=!1){(0,e.assert)(n!==a,()=>`Old path and new path are the same: '${n}'`);const i=t.IORouterRegistry.getLoadHandlers(n);(0,e.assert)(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),(0,e.assert)(i.length<2,()=>`Copying failed because more than one (${i.length}) `+`load handlers for source URL ${n}.`);const c=i[0],l=t.IORouterRegistry.getSaveHandlers(a);(0,e.assert)(l.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${a}.`),(0,e.assert)(l.length<2,()=>`Copying failed because more than one (${i.length}) `+`save handlers for destination URL ${a}.`);const g=l[0],d=r(n).scheme,u=r(n).path,h=d===r(n).scheme,m=await c.load();o&&h&&await s.getManager(d).removeModel(u);const f=await g.save(m);return o&&!h&&await s.getManager(d).removeModel(u),f.modelArtifactsInfo}async function o(){const e=s.getSchemes(),t={};for(const r of e){const e=await s.getManager(r).listModels();for(const s in e){t[r+n+s]=e[s]}}return t}async function i(e){const t=r(e);return s.getManager(t.scheme).removeModel(t.path)}async function c(e,t){return a(e,t,!1)}async function l(e,t){return a(e,t,!0)}exports.ModelStoreManagerRegistry=s;
},{"../util":"P6nv","./router_registry":"y7n6"}],"szKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformBrowser=void 0,require("../flags");var e=require("../environment"),r=require("../io/indexed_db"),t=require("../io/local_storage"),o=require("../io/model_management");class n{fetch(e,r){return fetch(e,r)}now(){return performance.now()}encode(e,r){if("utf-8"!==r&&"utf8"!==r)throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,r){return new TextDecoder(r).decode(e)}}if(exports.PlatformBrowser=n,(0,e.env)().get("IS_BROWSER")){(0,e.env)().setPlatform("browser",new n);try{o.ModelStoreManagerRegistry.registerManager(t.BrowserLocalStorage.URL_SCHEME,new t.BrowserLocalStorageManager)}catch(a){}try{o.ModelStoreManagerRegistry.registerManager(r.BrowserIndexedDB.URL_SCHEME,new r.BrowserIndexedDBManager)}catch(a){}}
},{"../flags":"BElI","../environment":"Fbeg","../io/indexed_db":"nmFM","../io/local_storage":"TVL0","../io/model_management":"HWNt"}],"sDG1":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.resetSystemFetch=n,exports.setSystemFetch=c,exports.getSystemFetch=s,exports.PlatformNode=exports.getNodeFetch=void 0;var t=require("../environment");const r={importFetch:()=>require("node-fetch")};let o;function n(){o=null}function c(e){o=e}function s(){return o}exports.getNodeFetch=r;class u{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=(0,t.env)().global.fetch?(0,t.env)().global.fetch(e,n):(null==o&&(o=r.importFetch()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}exports.PlatformNode=u,(0,t.env)().get("IS_NODE")&&(0,t.env)().setPlatform("node",new u);
},{"../environment":"Fbeg","node-fetch":"sC8V","util":"sC8V","process":"g5IB"}],"WyiN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=o;var e=require("../tensor"),t=n(require("../util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var i=u?Object.getOwnPropertyDescriptor(e,f):null;i&&(i.get||i.set)?Object.defineProperty(o,f,i):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o}function o(r,n="float32",o){return n=n||"float32",t.assertNonNegativeIntegerDimensions(r),new e.TensorBuffer(r,n,o)}
},{"../tensor":"DTHt","../util":"P6nv"}],"qqq3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o,i){const s=(0,r.convertToTensor)(o,"x","cast");if(!n.isValidDtype(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if("string"===i&&"string"!==s.dtype||"string"!==i&&"string"===s.dtype)throw new Error("Only strings can be casted to strings");const u={x:s},a={dtype:i};return e.ENGINE.runKernel(t.Cast,u,a)}const a=(0,o.op)({cast_:u});exports.cast=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"F06q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","clone","string_or_numeric")};return e.ENGINE.runKernel(r.Identity,t)}const i=(0,o.op)({clone_:t});exports.clone=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"xBTU":[function(require,module,exports) {
"use strict";function e(e,t=!1){console.log(e.toString(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=e;
},{}],"i0z4":[function(require,module,exports) {
"use strict";var r=require("./engine");require("./flags"),require("./platforms/platform_browser"),require("./platforms/platform_node");var e=require("./ops/buffer"),s=require("./ops/cast"),t=require("./ops/clone"),i=require("./ops/print"),o=require("./tensor");(0,r.getOrMakeEngine)();const n={buffer:e.buffer,cast:s.cast,clone:t.clone,print:i.print};(0,o.setOpHandler)(n);
},{"./engine":"Nc3Y","./flags":"BElI","./platforms/platform_browser":"szKX","./platforms/platform_node":"sDG1","./ops/buffer":"WyiN","./ops/cast":"qqq3","./ops/clone":"F06q","./ops/print":"xBTU","./tensor":"DTHt"}],"D1db":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.browserDownloads=c,exports.browserFiles=h,exports.browserDownloadsRouter=exports.BrowserDownloads=void 0,require("../flags");var e=require("../environment"),t=require("./io_utils"),o=require("./router_registry");const r="model",n=".json",i=".weights.bin";function s(e){return new Promise(e=>setTimeout(e)).then(e)}class a{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(a.URL_SCHEME)&&(t=t.slice(a.URL_SCHEME.length)),null!=t&&0!==t.length||(t=r),this.modelTopologyFileName=t+n,this.weightDataFileName=t+i}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const o=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer);const i=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=i,await s(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=o,await s(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,t.getModelArtifactsInfoForJSON)(e)}}}}exports.BrowserDownloads=a,a.URL_SCHEME="downloads://";class l{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.files=e}async load(){const e=this.files[0],o=this.files.slice(1);return new Promise((r,n)=>{const i=new FileReader;i.onload=(i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(null==a)return void n(new Error(`modelTopology field is missing from file ${e.name}`));0===o.length&&r({modelTopology:a});const l=s.weightsManifest;if(null==l)return void n(new Error(`weightManifest field is missing from file ${e.name}`));let d;try{d=this.checkManifestAndWeightFiles(l,o)}catch(u){return void n(u)}const c=[],h=[],f=[];l.forEach(e=>{e.paths.forEach(e=>{h.push(e),f.push(null)}),c.push(...e.weights)}),l.forEach(e=>{e.paths.forEach(e=>{const o=new FileReader;o.onload=(o=>{const n=o.target.result,i=h.indexOf(e);if(f[i]=n,-1===f.indexOf(null)){const e={modelTopology:a,weightSpecs:c,weightData:(0,t.concatenateArrayBuffers)(f),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),r(e)}}),o.onerror=(t=>n(`Failed to weights data from file of path '${e}'.`)),o.readAsArrayBuffer(d[e])})})}),i.onerror=(t=>n("Failed to read model topology and weights manifest JSON "+`from file '${e.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only.")),i.readAsText(e)})}checkManifestAndWeightFiles(e,o){const r=[],n=o.map(e=>(0,t.basename)(e.name)),i={};for(const s of e)s.paths.forEach(e=>{const s=(0,t.basename)(e);if(-1!==r.indexOf(s))throw new Error("Duplicate file basename found in weights manifest: "+`'${s}'`);if(r.push(s),-1===n.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);i[e]=o[n.indexOf(s)]});if(r.length!==o.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${r.length}) and the number of weight files provided `+`(${o.length}).`);return i}}const d=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a.URL_SCHEME)?c(t.slice(a.URL_SCHEME.length)):null;function c(e="model"){return new a(e)}function h(e){return new l(e)}exports.browserDownloadsRouter=d,o.IORouterRegistry.registerSaveRouter(d);
},{"../flags":"BElI","../environment":"Fbeg","./io_utils":"FekA","./router_registry":"y7n6"}],"lqgM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.monitorPromisesProgress=r;var t=require("../util");function r(r,e,n,s){!function(r){(0,t.assert)(null!=r&&Array.isArray(r)&&r.length>0,()=>"promises must be a none empty array")}(r),function(r,e){(0,t.assert)(r>=0&&r<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${r}`),(0,t.assert)(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),(0,t.assert)(e>=r,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${r} and endFraction `+`${e}`)}(n=null==n?0:n,s=null==s?1:s);let o=0;return Promise.all(r.map(t=>(t.then(t=>{const a=n+ ++o/r.length*(s-n);return e(a),t}),t)))}
},{"../util":"P6nv"}],"gxqX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeightsAsArrayBuffer=a,exports.loadWeights=u,exports.weightsLoaderFactory=f;var e=require("../environment"),t=i(require("../util")),r=require("./io_utils"),n=require("./progress"),o=require("./types");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}async function a(t,r){null==r&&(r={});const o=null==r.fetchFunc?(0,e.env)().platform.fetch:r.fetchFunc,s=t.map(e=>o(e,r.requestInit,{isBinary:!0})),i=(null==r.onProgress?await Promise.all(s):await(0,n.monitorPromisesProgress)(s,r.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==r.onProgress?await Promise.all(i):await(0,n.monitorPromisesProgress)(i,r.onProgress,.5,1)}async function u(e,t="",r,n){return f(e=>a(e,{requestInit:n}))(e,t,r)}function f(e){return async(n,s="",i)=>{const a=n.map(()=>!1),u={},f=null!=i?i.map(()=>!1):[],c=[];if(n.forEach((e,r)=>{let n=0;e.weights.forEach(e=>{const s="quantization"in e?e.quantization.dtype:e.dtype,l=o.DTYPE_VALUE_SIZE_MAP[s]*t.sizeFromShape(e.shape),p=()=>{a[r]=!0,null==u[r]&&(u[r]=[]),u[r].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=i?i.forEach((t,r)=>{t===e.name&&(p(),f[r]=!0)}):p(),c.push(e.name),n+=l})}),!f.every(e=>e)){const e=i.filter((e,t)=>!f[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${c.join(", ")}.`)}const l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),p=[];l.forEach(e=>{n[e].paths.forEach(e=>{const t=s+(s.endsWith("/")?"":"/")+e;p.push(t)})});const h=await e(p),y={};let g=0;return l.forEach(e=>{const t=n[e].paths.length;let o=0;for(let r=0;r<t;r++)o+=h[g+r].byteLength;const s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let r=0;r<t;r++){const e=new Uint8Array(h[g+r]);i.set(e,a),a+=e.byteLength}u[e].forEach(e=>{const t=s.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,r.decodeWeights)(t,[e.manifestEntry]);for(const r in n)y[r]=n[r]}),g+=t}),y}}
},{"../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./progress":"lqgM","./types":"annF"}],"qhti":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUrl=h,exports.isHTTPScheme=l,exports.http=f,exports.browserHTTPRequest=c,exports.httpRouter=exports.HTTPRequest=void 0;var e=require("../environment"),t=require("../util"),r=require("./io_utils"),o=require("./router_registry"),s=require("./weights_loader");const n="application/octet-stream",i="application/json";class a{constructor(r,o){if(this.DEFAULT_METHOD="POST",null==o&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.onProgress=o.onProgress,this.weightUrlConverter=o.weightUrlConverter,null!=o.fetchFunc?((0,t.assert)("function"==typeof o.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=(0,e.env)().platform.fetch,(0,t.assert)(null!=r&&r.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(r)&&(0,t.assert)(2===r.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${r.length}).`),this.path=r,null!=o.requestInit&&null!=o.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:o};null!=e.signature&&(s.signature=e.signature),null!=e.userDefinedMetadata&&(s.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(s.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(s)],{type:i}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:n}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:(0,r.getModelArtifactsInfoForJSON)(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+`${e.status}. Please verify this URL points to `+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(p){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const r=t.modelTopology,o=t.weightsManifest,s=t.generatedBy,n=t.convertedBy,i=t.format,a=t.signature,h=t.userDefinedMetadata;if(null==r&&null==o)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let l,u;if(null!=o){const e=await this.loadWeights(o);[l,u]=e}const f={modelTopology:r,weightSpecs:l,weightData:u,generatedBy:s,convertedBy:n,format:i};null!=a&&(f.signature=a),null!=h&&(f.userDefinedMetadata=h);const c=t.modelInitializer;return c&&(f.modelInitializer=c),f}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[o,n]=h(t),i=this.weightPathPrefix||o,a=[];for(const r of e)a.push(...r.weights);const l=[],u=[];for(const r of e)for(const e of r.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(e)):l.push(i+e+n);this.weightUrlConverter&&l.push(...await Promise.all(u));const f=await(0,s.loadWeightsAsArrayBuffer)(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,(0,r.concatenateArrayBuffers)(f)]}}function h(e){const t=e.lastIndexOf("/"),r=e.lastIndexOf("?");return[e.substring(0,t)+"/",r>t?e.substring(r):""]}function l(e){return null!=e.match(a.URL_SCHEME_REGEX)}exports.HTTPRequest=a,a.URL_SCHEME_REGEX=/^https?:\/\//;const u=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let r=!0;if(r=Array.isArray(e)?e.every(e=>l(e)):l(e))return f(e,t)}return null};function f(e,t){return new a(e,t)}function c(e,t){return f(e,t)}exports.httpRouter=u,o.IORouterRegistry.registerSaveRouter(u),o.IORouterRegistry.registerLoadRouter(u);
},{"../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./router_registry":"y7n6","./weights_loader":"gxqX"}],"ulLq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMemory=t,exports.withSaveHandler=r;class e{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class o{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function t(o,t,r,n){if(1===arguments.length){return null!=o.modelTopology||null!=o.weightSpecs?new e(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o,weightSpecs:t,weightData:r,trainingConfig:n})}function r(e){return new o(e)}
},{}],"EwEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"browserFiles",{enumerable:!0,get:function(){return e.browserFiles}}),Object.defineProperty(exports,"browserHTTPRequest",{enumerable:!0,get:function(){return r.browserHTTPRequest}}),Object.defineProperty(exports,"http",{enumerable:!0,get:function(){return r.http}}),Object.defineProperty(exports,"isHTTPScheme",{enumerable:!0,get:function(){return r.isHTTPScheme}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return t.concatenateArrayBuffers}}),Object.defineProperty(exports,"decodeWeights",{enumerable:!0,get:function(){return t.decodeWeights}}),Object.defineProperty(exports,"encodeWeights",{enumerable:!0,get:function(){return t.encodeWeights}}),Object.defineProperty(exports,"getModelArtifactsInfoForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsInfoForJSON}}),Object.defineProperty(exports,"fromMemory",{enumerable:!0,get:function(){return o.fromMemory}}),Object.defineProperty(exports,"withSaveHandler",{enumerable:!0,get:function(){return o.withSaveHandler}}),Object.defineProperty(exports,"getLoadHandlers",{enumerable:!0,get:function(){return n.getLoadHandlers}}),Object.defineProperty(exports,"getSaveHandlers",{enumerable:!0,get:function(){return n.getSaveHandlers}}),Object.defineProperty(exports,"registerLoadRouter",{enumerable:!0,get:function(){return n.registerLoadRouter}}),Object.defineProperty(exports,"registerSaveRouter",{enumerable:!0,get:function(){return n.registerSaveRouter}}),Object.defineProperty(exports,"loadWeights",{enumerable:!0,get:function(){return u.loadWeights}}),Object.defineProperty(exports,"weightsLoaderFactory",{enumerable:!0,get:function(){return u.weightsLoaderFactory}}),Object.defineProperty(exports,"copyModel",{enumerable:!0,get:function(){return i.copyModel}}),Object.defineProperty(exports,"listModels",{enumerable:!0,get:function(){return i.listModels}}),Object.defineProperty(exports,"moveModel",{enumerable:!0,get:function(){return i.moveModel}}),Object.defineProperty(exports,"removeModel",{enumerable:!0,get:function(){return i.removeModel}}),require("./indexed_db"),require("./local_storage");var e=require("./browser_files"),r=require("./http"),t=require("./io_utils"),o=require("./passthrough"),n=require("./router_registry"),u=require("./weights_loader"),i=require("./model_management");
},{"./indexed_db":"nmFM","./local_storage":"TVL0","./browser_files":"D1db","./http":"qhti","./io_utils":"FekA","./passthrough":"ulLq","./router_registry":"y7n6","./weights_loader":"gxqX","./model_management":"HWNt"}],"mMWq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u,s=!1,a=!1){let i=(0,n.convertToTensor)(o,"a","matMul"),l=(0,n.convertToTensor)(u,"b","matMul");[i,l]=(0,t.makeTypesMatch)(i,l);const c={a:i,b:l},p={transposeA:s,transposeB:a};return e.ENGINE.runKernel(r.BatchMatMul,c,p)}const s=(0,o.op)({matMul_:u});exports.matMul=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ETzZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n,t,i=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const u={indices:(0,r.convertToTensor)(n,"indices","oneHot","int32")},c={depth:t,onValue:i,offValue:s};return e.ENGINE.runKernel(o.OneHot,u,c)}const i=(0,n.op)({oneHot_:t});exports.oneHot=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"uQkx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function u(o,a){const s=(0,t.convertToTensor)(o,"x","transpose");if(null==a&&(a=s.shape.map((e,r)=>r).reverse()),n.assert(s.rank===a.length,()=>`Error in transpose: rank of input ${s.rank} `+`must match length of perm ${a}.`),a.forEach(e=>{n.assert(e>=0&&e<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1}`+` but got ${a}`)}),s.rank<=1)return s.clone();const u={x:s},i={perm:a};return e.ENGINE.runKernel(r.Transpose,u,i)}const i=(0,o.op)({transpose_:u});exports.transpose=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"vqyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confusionMatrix_=c,exports.confusionMatrix=void 0;var e=require("../tensor_util_env"),t=u(require("../util")),r=require("./cast"),n=require("./mat_mul"),o=require("./one_hot"),s=require("./operation"),i=require("./transpose");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function c(s,a,u){const c=(0,e.convertToTensor)(s,"labels","confusionMatrix"),p=(0,e.convertToTensor)(a,"predictions","confusionMatrix");t.assert(null==u||u>0&&Number.isInteger(u),()=>"If provided, numClasses must be a positive integer, "+`but got ${u}`),t.assert(1===c.rank,()=>`Expected the rank of labels to be 1, but got ${c.rank}`),t.assert(1===p.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${p.rank}`),t.assert(c.shape[0]===p.shape[0],()=>"Mismatch in the number of examples: "+`${c.shape[0]} vs. ${p.shape[0]}. `+"Labels and predictions should have the same number of elements."),t.assert(u>0&&Number.isInteger(u),()=>"numClasses is required to be a positive integer, but got "+`${u}`);const f=(0,o.oneHot)((0,r.cast)(c,"int32"),u),l=(0,o.oneHot)((0,r.cast)(p,"int32"),u),b=(0,i.transpose)(f),d=(0,n.matMul)(b,l);return(0,r.cast)(d,"int32")}const p=(0,s.op)({confusionMatrix_:c});exports.confusionMatrix=p;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./mat_mul":"mMWq","./one_hot":"ETzZ","./operation":"JtaO","./transpose":"uQkx"}],"bMAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"confusionMatrix",{enumerable:!0,get:function(){return e.confusionMatrix}});var e=require("./ops/confusion_matrix");
},{"./ops/confusion_matrix":"vqyG"}],"v3VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor3d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&3!==o.length)throw new Error("tensor3d() requires shape to have three numbers");const u=(0,e.inferShape)(n,s);if(3!==u.length&&1!==u.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"yVDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPixels=f,exports.fromPixels=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../kernel_registry"),r=require("../tensor"),o=require("../tensor_util_env"),a=require("./cast"),s=require("./operation"),i=require("./tensor3d");let l;function d(r,o=3){if(o>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==r)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,s=!1,d=!1,f=!1,u=!1,m=!1;if(r.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&r instanceof ImageData)s=!0;else if("undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement)d=!0;else if("undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)f=!0;else if(null!=r.getContext)u=!0;else{if(!("undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${r.constructor.name}`);m=!0}if(d){const e=2;if(d&&r.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,n.getKernel)(t.FromPixels,e.ENGINE.backendName)){const n={pixels:r},a={numChannels:o};return e.ENGINE.runKernel(t.FromPixels,n,a)}const[c,h]=d?[r.videoWidth,r.videoHeight]:[r.width,r.height];let p,w;if(u?p=r.getContext("2d").getImageData(0,0,c,h).data:s||a?p=r.data:(f||d||m)&&(null==l&&(l=document.createElement("canvas").getContext("2d")),l.canvas.width=c,l.canvas.height=h,l.drawImage(r,0,0,c,h),p=l.getImageData(0,0,c,h).data),4===o)w=new Int32Array(p);else{const e=c*h;w=new Int32Array(e*o);for(let t=0;t<e;t++)for(let e=0;e<o;++e)w[t*o+e]=p[4*t+e]}const g=[h,c,o];return(0,i.tensor3d)(w,g,"int32")}async function f(e,t){let n=(0,o.convertToTensor)(e,"img","toPixels");if(!(e instanceof r.Tensor)){const e=n;n=(0,a.cast)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[s,i]=n.shape.slice(0,2),l=2===n.rank?1:n.shape[2];if(l>4||2===l)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${l}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const d=await n.data(),f="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*s*4);for(let r=0;r<s*i;++r){const e=[0,0,0,255];for(let o=0;o<l;o++){const t=d[r*l+o];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===l?(e[0]=t*f,e[1]=t*f,e[2]=t*f):e[o]=t*f}const t=4*r;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=i,t.height=s;const e=t.getContext("2d"),n=new ImageData(u,i,s);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const u=(0,s.op)({fromPixels_:d});exports.fromPixels=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../kernel_registry":"wJg6","../tensor":"DTHt","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO","./tensor3d":"v3VY"}],"ZyFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareAndValidate=t;var e=require("../util");function t(t,r){const s=t.shape.length,n=r.shape.length;if(s<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${s}.`);if(n<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${n}.`);if("int32"!==r.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${r.dtype}.`);if(r.shape[n-1]>s)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${r.shape[n-1]} vs. ${s}`);if(0===(0,e.sizeFromShape)(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const h=r.shape,o=h[h.length-1];let p=1;for(let e=0;e<h.length-1;++e)p*=h[e];const i=t.shape,a=h.slice();a.pop();let u=1;for(let e=o;e<s;++e)u*=i[e],a.push(i[e]);const c=[...(0,e.computeStrides)(t.shape).map(e=>e/u),1].slice(0,o);return[a,p,u,c]}
},{"../util":"P6nv"}],"H15o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateUpdateShape=t,exports.validateInput=r,exports.calculateShapes=a;var e=require("../util");function t(e,t,r){const a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,p="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${a}, and batchDim: ${s}.`;if(r.rank<s)throw new Error(p+` update.rank < ${s}. `);if(e.length<a+(r.rank-s))throw new Error(p+` Output shape length < ${a+(r.rank-s)}`);if(r.rank!==s+e.length-a)throw new Error(p+` update.rank != ${s+e.length-a}`);for(let h=0;h<s;++h)if(r.shape[h]!==t.shape[h])throw new Error(p+` updates.shape[${h}] (${r.shape[h]}) != indices.shape[${h}] (${t.shape[h]}).`);for(let h=0;h<r.rank-s;++h)if(r.shape[h+s]!==e[h+a])throw new Error(p+` updates.shape[${h+s}] (${r.shape[h+s]}) != shape[${h+s}] (${e[h+s]})`)}function r(e,r,a){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==r.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(a.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${a}`);if(0===a.length){if(0===r.size)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}t(a,r,e)}function a(t,r,a){const s=r.shape.length,p=s>1?r.shape[s-1]:1,h=a.length;let n=1;for(let e=p;e<h;++e)n*=a[e];const i=p<1?1:p;return{sliceRank:p,numUpdates:(0,e.sizeFromShape)(r.shape)/i,sliceSize:n,strides:[...(0,e.computeStrides)(a.slice(0,p)),1],outputSize:(0,e.sizeFromShape)(a)}}
},{"../util":"P6nv"}],"Quoj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsValid=r,exports.maskToAxes=s,exports.computeOutShape=o,exports.stridesWithElidedDims=l,exports.getNormalizedAxes=u,exports.startIndicesWithElidedDims=a,exports.stopIndicesWithElidedDims=f,exports.stridesForAxis=p,exports.startForAxis=h,exports.stopForAxis=g,exports.isSliceContinous=d,exports.computeFlatOffset=E,exports.parseSliceParams=x,exports.sliceInfo=y;var e=n(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}function n(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(s,l,i):s[l]=e[l]}return s.default=e,r&&r.set(e,s),s}function r(t,n,r){const s=t.shape.length;e.assert(s===n.length,()=>`Error in slice${s}D: Length of begin ${n} must `+`match the rank of the array (${s}).`),e.assert(s===r.length,()=>`Error in slice${s}D: Length of size ${r} must `+`match the rank of the array (${s}).`);for(let o=0;o<s;++o)e.assert(n[o]+r[o]<=t.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] `+`(${n[o]+r[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function s(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function o(e,t,n){const r=[];for(let s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function l(e,t,n,r){const s=[...e];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)0===o?s[t]=1:(s.splice(t,0,1),s.pop());return s}function i(e,t,n){return n<=e?n:n-(t-1)}function c(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function u(e,t,n,r,s,o,i,c,u){const d=e.length;let E=new Array(d),x=new Array(d),y=new Array(d);if(t.length&&n>0){const u=t[0],p=n+1;E=a(i,u,p,r,e),x=f(c,u,p,s,e),y=l(o,u,p,e)}else for(let l=0;l<d;l++)E[l]=h(i,r,o,e,l,u),x[l]=g(c,s,o,e,l,u),y[l]=p(o,l,u);return{begin:E,end:x,strides:y}}function a(e,t,n,r,s){const o=[...s],l=c(n,t);for(let c=0;c<o.length;c++)if(l.indexOf(c)>-1)o[c]=0;else{const s=i(t,n,c);let l=r[s];e&1<<s&&(l=0),o[c]=l}return o}function f(t,n,r,s,o){const l=[...o],u=c(r,n);for(let e=0;e<l.length;e++)if(u.indexOf(e)>-1)l[e]=Number.MAX_SAFE_INTEGER;else{const o=i(n,r,e);let c=s[o];t&1<<o&&(c=Number.MAX_SAFE_INTEGER),l[e]=c}for(let i=0;i<l.length;i++){const t=o[i];l[i]<0&&(l[i]+=t),l[i]=e.clamp(0,l[i],o[i])}return l}function p(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function h(t,n,r,s,o,l){let i=n[o];const c=r[o]||1;(t&1<<o||l&1<<o||null==i)&&(i=c>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=s[o];return i<0&&(i+=u),i=e.clamp(0,i,u-1)}function g(t,n,r,s,o,l){let i=n[o];const c=r[o]||1;(t&1<<o||l&1<<o||null==i)&&(i=c>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=s[o];return i<0&&(i+=u),i=c>0?e.clamp(0,i,u):e.clamp(-1,i,u-1)}function d(e,t,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function E(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function x(t,n,r){let s;const o=t.shape.length;let l;return(s="number"==typeof n?[n,...new Array(o-1).fill(0)]:n.length<o?n.concat(new Array(o-n.length).fill(0)):n.slice()).forEach(t=>{e.assert(-1!==t,()=>"slice() does not support negative begin indexing.")}),l=(l=null==r?new Array(o).fill(-1):"number"==typeof r?[r,...new Array(o-1).fill(-1)]:r.length<o?r.concat(new Array(o-r.length).fill(-1)):r).map((n,r)=>n>=0?n:(e.assert(-1===n,()=>"Negative size values should be exactly -1 but got "+`${n} for the slice() size at index ${r}.`),t.shape[r]-s[r])),[s,l]}function y(e,t,n,r,l,i,c,a,f){let p=t.slice(),h=n.slice(),g=r;null==r&&(g=new Array(p.length));const d=s(c);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==c&&0!==a)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==c&&0!==f)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const E=e.length-p.length,x=s(a),y=e.slice();x.forEach(e=>{p[e]=0,h[e]=1,y.splice(e,0,1)});const{begin:b,end:m,strides:A}=u(y,d,E,p,h,g,l,i,c);p=b,h=m,g=A;const w=s(f);w.forEach(e=>{h[e]=p[e]+1,g[e]=1});const M=o(p,h,g),$=M.filter((e,t)=>-1===w.indexOf(t));return{nonStrided:g.every(e=>1===e),$begin:p,$end:h,$strides:g,size:M,newShape:y,outShape:$}}
},{"../util":"P6nv"}],"HDfU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerClass=t,exports.SerializationMap=exports.Serializable=void 0;var e=require("./util");class s{getClassName(){return this.constructor.className}static fromConfig(e,s){return new e(s)}}exports.Serializable=s;class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function t(s){(0,e.assert)(null!=s.className,()=>"Class being registered does not have the static className property defined."),(0,e.assert)("string"==typeof s.className,()=>"className is required to be a string, but got type "+typeof s.className),(0,e.assert)(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(s)}exports.SerializationMap=a;
},{"./util":"P6nv"}],"ip5I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expectArraysClose=i,exports.testEpsilon=s,exports.expectPromiseToFail=c,exports.expectArraysEqual=f,exports.expectNumbersClose=l,exports.expectValuesInRange=p,exports.expectArrayBuffersEqual=y,exports.encodeStrings=A,exports.TEST_EPSILON_FLOAT16=void 0;var e=require("./engine"),r=require("./tensor_util_env"),t=require("./util");const n=.001,o=.1;function i(e,r,t){return null==t&&(t=s()),a(e,r,(e,r)=>u(e,r,t))}function s(){return 32===e.ENGINE.backend.floatPrecision()?n:o}function a(e,n,o){let i=!0;if(((0,t.isTypedArray)(e)||(0,t.isTypedArray)(n))&&(i=!1),(0,t.isTypedArray)(e)&&(0,t.isTypedArray)(n)&&(i=!0),i){const r=e.constructor.name,t=n.constructor.name;if(r!==t)throw new Error(`Arrays are of different type. Actual: ${r}. `+`Expected: ${t}`)}if(Array.isArray(e)&&Array.isArray(n)){const o=(0,r.inferShape)(e),i=(0,r.inferShape)(n);if(!(0,t.arraysEqual)(o,i))throw new Error("Arrays have different shapes. "+`Actual: [${o}]. Expected: [${i}]`)}const s=(0,t.isTypedArray)(e)?e:(0,t.flatten)(e),a=(0,t.isTypedArray)(n)?n:(0,t.flatten)(n);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs `+`expected: ${a.length}.\n`+`Actual:   ${s}.\n`+`Expected: ${a}.`);for(let r=0;r<a.length;++r){const e=s[r],t=a[r];if(!o(e,t))throw new Error(`Arrays differ: actual[${r}] = ${e}, expected[${r}] = ${t}.\n`+`Actual:   ${s}.\n`+`Expected: ${a}.`)}}function c(e,r){e().then(()=>r.fail(),()=>r())}function f(e,r){const n="string"==typeof r||"number"==typeof r||"boolean"==typeof r?[r]:r;return(0,t.isString)(e)||(0,t.isString)(e[0])||(0,t.isString)(r)||(0,t.isString)(r[0])?a(e,n,(e,r)=>e==r):a(e,r,(e,r)=>u(e,r,0))}function l(e,r,t){if(null==t&&(t=s()),!u(e,r,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${r}`)}function u(e,r,t){return!isFinite(e)&&!isFinite(r)||!(isNaN(e)||isNaN(r)||Math.abs(e-r)>t)}function p(e,r,t){for(let n=0;n<e.length;n++)if(e[n]<r||e[n]>t)throw new Error(`Value out of range:${e[n]} low: ${r}, high: ${t}`)}function y(e,r){expect(new Float32Array(e)).toEqual(new Float32Array(r))}function A(e){for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)?A(n):e[r]=(0,t.encodeString)(n)}return e}exports.TEST_EPSILON_FLOAT16=o;
},{"./engine":"Nc3Y","./tensor_util_env":"c6yR","./util":"P6nv"}],"SdA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.8.6";exports.version="2.8.6";
},{}],"GWnL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableProdMode=o,exports.enableDebugMode=i,exports.disableDeprecationWarnings=s,exports.deprecationWarn=a,exports.disposeVariables=c,exports.engine=u,exports.memory=E,exports.profile=d,exports.tidy=N,exports.dispose=p,exports.keep=f,exports.time=x,exports.setBackend=I,exports.ready=l,exports.getBackend=G,exports.removeBackend=k,exports.findBackend=B,exports.findBackendFactory=b,exports.registerBackend=g,exports.backend=m,exports.setPlatform=v;var e=require("./engine"),n=require("./environment"),r=require("./tensor"),t=require("./tensor_util");function o(){(0,n.env)().set("PROD",!0)}function i(){(0,n.env)().set("DEBUG",!0)}function s(){(0,n.env)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a(e){(0,n.env)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){e.ENGINE.disposeVariables()}function u(){return e.ENGINE}function E(){return e.ENGINE.memory()}function d(n){return e.ENGINE.profile(n)}function N(n,r){return e.ENGINE.tidy(n,r)}function p(e){(0,t.getTensorsInContainer)(e).forEach(e=>e.dispose())}function f(n){return e.ENGINE.keep(n)}function x(n){return e.ENGINE.time(n)}function I(n){return e.ENGINE.setBackend(n)}function l(){return e.ENGINE.ready()}function G(){return e.ENGINE.backendName}function k(n){e.ENGINE.removeBackend(n)}function B(n){return e.ENGINE.findBackend(n)}function b(n){return e.ENGINE.findBackendFactory(n)}function g(n,r,t=1){return e.ENGINE.registerBackend(n,r,t)}function m(){return e.ENGINE.backend}function v(e,r){(0,n.env)().setPlatform(e,r)}(0,r.setDeprecationWarningFn)(a);
},{"./engine":"Nc3Y","./environment":"Fbeg","./tensor":"DTHt","./tensor_util":"fpST"}],"ZDFV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function d(t,d){let s=(0,o.convertToTensor)(t,"a","add"),a=(0,o.convertToTensor)(d,"b","add");[s,a]=(0,n.makeTypesMatch)(s,a);const i={a:s,b:a};return e.ENGINE.runKernel(r.Add,i)}const s=(0,t.op)({add_:d});exports.add=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Pk64":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDiv=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function i(t,i){let s=(0,n.convertToTensor)(t,"a","floorDiv"),l=(0,n.convertToTensor)(i,"b","floorDiv");[s,l]=(0,o.makeTypesMatch)(s,l);const u={a:s,b:l};return e.ENGINE.runKernel(r.FloorDiv,u)}const s=(0,t.op)({floorDiv_:i});exports.floorDiv=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"D8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.div=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./floorDiv"),n=require("./operation");function u(n,u){let s=(0,t.convertToTensor)(n,"a","div"),v=(0,t.convertToTensor)(u,"b","div");if([s,v]=(0,i.makeTypesMatch)(s,v),"int32"===s.dtype&&"int32"===v.dtype)return(0,o.floorDiv)(s,v);const d={a:s,b:v};return e.ENGINE.runKernel(r.RealDiv,d,{})}const s=(0,n.op)({div_:u});exports.div=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./floorDiv":"Pk64","./operation":"JtaO"}],"k2PI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){let i=(0,n.convertToTensor)(o,"a","mul"),l=(0,n.convertToTensor)(u,"b","mul");[i,l]=(0,t.makeTypesMatch)(i,l);const s={a:i,b:l};return e.ENGINE.runKernel(r.Multiply,s)}const i=(0,o.op)({mul_:u});exports.mul=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"aE3W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s=(0,n.convertToTensor)(o,"x","abs");if("complex64"===s.dtype){const n={x:s};return e.ENGINE.runKernel(r.ComplexAbs,n)}{const n={x:s};return e.ENGINE.runKernel(r.Abs,n)}}const t=(0,o.op)({abs_:s});exports.abs=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"wQJc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acos")};return e.ENGINE.runKernel(r.Acos,s)}const t=(0,n.op)({acos_:s});exports.acos=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"JJYu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acosh")};return e.ENGINE.runKernel(r.Acosh,s)}const t=(0,n.op)({acosh_:s});exports.acosh=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"EQUq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o){n.assert(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),n.assert(o.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${o.length}`);const a=o.map((e,t)=>(0,r.convertToTensor)(e,`tensors${t}`,"addN")),s=a[0];a.forEach(e=>{if(e.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),a.forEach(e=>{if(!n.arraysEqual(e.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const u=a;return e.ENGINE.runKernel(t.AddN,u)}const d=(0,o.op)({addN_:u});exports.addN=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"VAUj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var e=require("../engine"),r=require("../kernel_names"),l=require("../tensor_util_env"),n=require("./operation");function o(n,o=null,t=!1){const i={x:(0,l.convertToTensor)(n,"x","all","bool")},s={axis:o,keepDims:t};return e.ENGINE.runKernel(r.All,i,s)}const t=(0,n.op)({all_:o});exports.all=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"OF1E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","any","bool")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Any,s,u)}const i=(0,o.op)({any_:t});exports.any=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"wSFk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=0){const a={x:(0,n.convertToTensor)(o,"x","argMax")},i={axis:t};return e.ENGINE.runKernel(r.ArgMax,a,i)}const a=(0,o.op)({argMax_:t});exports.argMax=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Zhc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=0){const t={x:(0,n.convertToTensor)(i,"x","argMin")},s={axis:o};return e.ENGINE.runKernel(r.ArgMin,t,s)}const t=(0,i.op)({argMin_:o});exports.argMin=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pS4z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asin")};return e.ENGINE.runKernel(r.Asin,o)}const s=(0,i.op)({asin_:o});exports.asin=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"B3dx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asinh")};return e.ENGINE.runKernel(r.Asinh,o)}const s=(0,i.op)({asinh_:o});exports.asinh=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Yh9p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atan")};return e.ENGINE.runKernel(r.Atan,o)}const a=(0,t.op)({atan_:o});exports.atan=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"eUJw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./operation");function a(o,a){let s=(0,t.convertToTensor)(o,"a","atan2"),i=(0,t.convertToTensor)(a,"b","atan2");[s,i]=(0,n.makeTypesMatch)(s,i);const u={a:s,b:i};return e.ENGINE.runKernel(r.Atan2,u)}const s=(0,o.op)({atan2_:a});exports.atan2=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"DlnE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atanh")};return e.ENGINE.runKernel(r.Atanh,o)}const a=(0,t.op)({atanh_:o});exports.atanh=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Evju":[function(require,module,exports) {
"use strict";function t(t,e,n,r,i="NHWC",a){return o(t,[...e,t[3]],n,a,r,null,null,M(i))}function e(t,e,n,r,i,a,h="channelsLast"){const[s,f]=l(e);let c;if("channelsLast"===h)c=[s,f,t[3],t[3]];else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);c=[s,f,t[1],t[1]]}return o(t,c,n,r,i,a,!1,h)}function n(t,e,n,o,i,a,h="NDHWC"){const[l,f,c]=s(e);let u,p;if("NDHWC"===h)p="channelsLast",u=[l,f,c,t[4],t[4]];else{if("NCDHW"!==h)throw new Error(`Unknown dataFormat ${h}`);p="channelsFirst",u=[l,f,c,t[1],t[1]]}return r(t,u,n,o,i,!1,p,a)}function o(t,e,n,o,r,i,a=!1,h="channelsLast"){let[s,u,p,d]=[-1,-1,-1,-1];if("channelsLast"===h)[s,u,p,d]=t;else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);[s,d,u,p]=t}const[m,M,,g]=e,[D,w]=l(n),[H,W]=l(o),F=f(m,H),L=f(M,W),{padInfo:b,outHeight:I,outWidth:C}=c(r,u,p,D,w,F,L,i,h),y=a?g*d:g;let E;return"channelsFirst"===h?E=[s,y,I,C]:"channelsLast"===h&&(E=[s,I,C,y]),{batchSize:s,dataFormat:h,inHeight:u,inWidth:p,inChannels:d,outHeight:I,outWidth:C,outChannels:y,padInfo:b,strideHeight:D,strideWidth:w,filterHeight:m,filterWidth:M,effectiveFilterHeight:F,effectiveFilterWidth:L,dilationHeight:H,dilationWidth:W,inShape:t,outShape:E,filterShape:e}}function r(t,e,n,o,r,i=!1,a="channelsLast",h){let[l,c,p,d,m]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,c,p,d,m]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,m,c,p,d]=t}const[M,g,D,,w]=e,[H,W,F]=s(n),[L,b,I]=s(o),C=f(M,L),y=f(g,b),E=f(D,I),{padInfo:v,outDepth:x,outHeight:k,outWidth:S}=u(r,c,p,d,H,W,F,C,y,E,h),U=i?w*m:w;let A;return"channelsFirst"===a?A=[l,U,x,k,S]:"channelsLast"===a&&(A=[l,x,k,S,U]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:p,inWidth:d,inChannels:m,outDepth:x,outHeight:k,outWidth:S,outChannels:U,padInfo:v,strideDepth:H,strideHeight:W,strideWidth:F,filterDepth:M,filterHeight:g,filterWidth:D,effectiveFilterDepth:C,effectiveFilterHeight:y,effectiveFilterWidth:E,dilationDepth:L,dilationHeight:b,dilationWidth:I,inShape:t,outShape:A,filterShape:e}}function i(t,e,n,o,r){null==o&&(o=h(t,e,n));const i=t[0],a=t[1];return[p((i-e+2*o)/n+1,r),p((a-e+2*o)/n+1,r)]}function a(t,e,n,o,r,i){null==r&&(r=h(t,e,o));const a=t[0],l=t[1],s=t[2];return[p((a-e+2*r)/o+1,i),p((l-e+2*r)/o+1,i),p((s-e+2*r)/o+1,i),n]}function h(t,e,n,o=1){const r=f(e,o);return Math.floor((t[0]*(n-1)-n+r)/2)}function l(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function s(t){return"number"==typeof t?[t,t,t]:t}function f(t,e){return e<=1?t:t+(t-1)*(e-1)}function c(t,e,n,o,r,a,h,l,s){let f,c,u;if("number"==typeof t){f={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const r=i([e,n],a,o,t,l);c=r[0],u=r[1]}else if("same"===t){c=Math.ceil(e/o),u=Math.ceil(n/r);const t=Math.max(0,(c-1)*o+a-e),i=Math.max(0,(u-1)*r+h-n),l=Math.floor(t/2),s=t-l,p=Math.floor(i/2);f={top:l,bottom:s,left:p,right:i-p,type:"SAME"}}else if("valid"===t)f={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/o),u=Math.ceil((n-h+1)/r);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const i="channelsLast"===s?t[1][0]:t[2][0],d="channelsLast"===s?t[1][1]:t[2][1],m="channelsLast"===s?t[2][0]:t[3][0],M="channelsLast"===s?t[2][1]:t[3][1];f={top:i,bottom:d,left:m,right:M,type:0===i&&0===d&&0===m&&0===M?"VALID":"EXPLICIT"},c=p((e-a+i+d)/o+1,l),u=p((n-h+m+M)/r+1,l)}}return{padInfo:f,outHeight:c,outWidth:u}}function u(t,e,n,o,r,i,h,l,s,f,c){let u,p,d,m;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=a([e,n,o,1],l,1,r,t,c);p=i[0],d=i[1],m=i[2]}else if("same"===t){const t=((p=Math.ceil(e/r))-1)*r+l-e,a=((d=Math.ceil(n/i))-1)*i+s-n,c=((m=Math.ceil(o/h))-1)*h+f-o,M=Math.floor(t/2),g=t-M,D=Math.floor(a/2),w=a-D,H=Math.floor(c/2);u={top:D,bottom:w,left:H,right:c-H,front:M,back:g,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);u={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-l+1)/r),d=Math.ceil((n-s+1)/i),m=Math.ceil((o-f+1)/h)}return{padInfo:u,outDepth:p,outHeight:d,outWidth:m}}function p(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function d(t){const[e,n,o]=l(t);return 1===e&&1===n&&1===o}function m(t,e){return d(t)||d(e)}function M(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeDilation2DInfo=t,exports.computePool2DInfo=e,exports.computePool3DInfo=n,exports.computeConv2DInfo=o,exports.computeConv3DInfo=r,exports.computeDefaultPad=h,exports.tupleValuesAreOne=d,exports.eitherStridesOrDilationsAreOne=m,exports.convertConv2DDataFormat=M;
},{}],"QI4k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reshape","string_or_numeric")},i={shape:o};return e.ENGINE.runKernel(r.Reshape,t,i)}const t=(0,s.op)({reshape_:o});exports.reshape=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"iP9e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=l(require("../util")),o=require("./cast"),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(i,u,l,p,d){const c=(0,t.convertToTensor)(i,"x","avgPool","float32");n.assert(a.eitherStridesOrDilationsAreOne(l,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '1'`);let f=c,g=!1;3===c.rank&&(g=!0,f=(0,s.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),null!=d&&n.assert(n.isInt(p),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`);const v={x:f},h={filterSize:u,strides:l,pad:p,dimRoundingMode:d};let P=e.ENGINE.runKernel(r.AvgPool,v,h);return P=(0,o.cast)(P,c.dtype),g?(0,s.reshape)(P,[P.shape[1],P.shape[2],P.shape[3]]):P}const d=(0,i.op)({avgPool_:p});exports.avgPool=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"df2t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=d(require("../util")),a=require("./cast"),i=d(require("./conv_util")),s=require("./operation"),u=require("./reshape");function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:r})(e)}function d(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function p(s,l,d,p,c,f="NDHWC",g){null==g?g=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const v=(0,o.convertToTensor)(s,"x","avgPool3d","float32");let h=v,b=!1;4===v.rank&&(b=!0,h=(0,u.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]])),n.assert(5===h.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${h.rank}.`),n.assert("NDHWC"===f,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${f}`),n.assert(i.eitherStridesOrDilationsAreOne(d,g),()=>"Error in avgPool3d: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '${g}'`),null!=c&&n.assert(n.isInt(p),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${p}.`);const P={x:h},y={filterSize:l,strides:d,pad:p,dimRoundingMode:c,dataFormat:f,dilations:g};let O=e.ENGINE.runKernel(t.AvgPool3D,P,y);return O=(0,a.cast)(O,h.dtype),b?(0,u.reshape)(O,[O.shape[1],O.shape[2],O.shape[3],O.shape[4]]):O}const c=(0,s.op)({avgPool3d_:p});exports.avgPool3d=c;
},{"../engine":"Nc3Y","../globals":"GWnL","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"dDdq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),o=require("./clone"),c=require("./operation");function s(c,s=0){(0,n.assert)(c.length>=1,()=>"Pass at least one tensor to concat");const a=(0,t.convertToTensorArray)(c,"tensors","concat","string_or_numeric");if("complex64"===a[0].dtype&&a.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===a.length)return(0,o.clone)(a[0]);const i=a,u={axis:s};return e.ENGINE.runKernel(r.Concat,i,u)}const a=(0,c.op)({concat_:s});exports.concat=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./clone":"F06q","./operation":"JtaO"}],"yARQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoid=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),o=require("./operation");function n(o){const n={x:(0,i.convertToTensor)(o,"x","sigmoid")};return e.ENGINE.runKernel(r.Sigmoid,n)}const s=(0,o.op)({sigmoid_:n});exports.sigmoid=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"zP07":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),n=require("./operation");function o(n,o,s){const t=(0,i.convertToTensor)(n,"x","slice","string_or_numeric");if(0===t.rank)throw new Error("Slicing scalar is not possible");const c={x:t},l={begin:o,size:s};return e.ENGINE.runKernel(r.Slice,c,l)}const s=(0,n.op)({slice_:o});exports.slice=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ZRNG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tanh")};return e.ENGINE.runKernel(r.Tanh,o)}const i=(0,t.op)({tanh_:o});exports.tanh=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"yZSA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicLSTMCell=void 0;var e=require("../tensor_util_env"),r=require("./add"),i=require("./concat"),s=require("./mat_mul"),o=require("./mul"),l=require("./operation"),t=require("./sigmoid"),c=require("./slice"),a=require("./tanh");function n(l,n,u,T,d,m){const M=(0,e.convertToTensor)(l,"forgetBias","basicLSTMCell"),b=(0,e.convertToTensor)(n,"lstmKernel","basicLSTMCell"),v=(0,e.convertToTensor)(u,"lstmBias","basicLSTMCell"),q=(0,e.convertToTensor)(T,"data","basicLSTMCell"),C=(0,e.convertToTensor)(d,"c","basicLSTMCell"),L=(0,e.convertToTensor)(m,"h","basicLSTMCell"),S=(0,i.concat)([q,L],1),p=(0,s.matMul)(S,b),h=(0,r.add)(p,v),_=h.shape[0],g=h.shape[1]/4,f=[_,g],x=(0,c.slice)(h,[0,0],f),B=(0,c.slice)(h,[0,g],f),j=(0,c.slice)(h,[0,2*g],f),y=(0,c.slice)(h,[0,3*g],f),K=(0,r.add)((0,o.mul)((0,t.sigmoid)(x),(0,a.tanh)(B)),(0,o.mul)(C,(0,t.sigmoid)((0,r.add)(M,j))));return[K,(0,o.mul)((0,a.tanh)(K),(0,t.sigmoid)(y))]}const u=(0,l.op)({basicLSTMCell_:n});exports.basicLSTMCell=u;
},{"../tensor_util_env":"c6yR","./add":"ZDFV","./concat":"dDdq","./mat_mul":"mMWq","./mul":"k2PI","./operation":"JtaO","./sigmoid":"yARQ","./slice":"zP07","./tanh":"ZRNG"}],"Q9gF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function c(o,a,u){const c=(0,r.convertToTensor)(o,"x","batchToSpaceND"),i=a.reduce((e,t)=>e*t);n.assert(c.rank>=1+a.length,()=>`input rank is ${c.rank} but should be > than blockShape.length ${a.length}`),n.assert(u.length===a.length,()=>`crops.length is ${u.length} but should be equal to blockShape.length  ${a.length}`),n.assert(c.shape[0]%i==0,()=>`input tensor batch is ${c.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${a.join(" * ")} === ${i}`);const s={x:c},p={blockShape:a,crops:u};return e.ENGINE.runKernel(t.BatchToSpaceND,s,p)}const i=(0,o.op)({batchToSpaceND_:c});exports.batchToSpaceND=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"ONs6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xAs4D=r;var e=require("./reshape");function r(r){let s;return s=0===r.rank||1===r.rank?(0,e.reshape)(r,[1,1,1,r.size]):2===r.rank?(0,e.reshape)(r,[1,1,r.shape[0],r.shape[1]]):3===r.rank?(0,e.reshape)(r,[1,r.shape[0],r.shape[1],r.shape[2]]):r}
},{"./reshape":"QI4k"}],"qqTf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=u(require("../util")),a=require("./batchnorm_util"),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function c(o,s,u,c,l,f){null==f&&(f=.001);const p=(0,n.convertToTensor)(o,"x","batchNorm"),h=(0,n.convertToTensor)(s,"mean","batchNorm"),v=(0,n.convertToTensor)(u,"variance","batchNorm");let m,b;null!=l&&(m=(0,n.convertToTensor)(l,"scale","batchNorm")),null!=c&&(b=(0,n.convertToTensor)(c,"offset","batchNorm")),t.assert(h.rank===v.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),t.assert(null==b||h.rank===b.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),t.assert(null==m||h.rank===m.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:(0,a.xAs4D)(p),scale:m,offset:b,mean:h,variance:v},k={varianceEpsilon:f},q=e.ENGINE.runKernel(r.FusedBatchNorm,d,k);return(0,i.reshape)(q,p.shape)}const l=(0,o.op)({batchNorm_:c});exports.batchNorm=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm_util":"ONs6","./operation":"JtaO","./reshape":"QI4k"}],"fmF3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm2d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${i.rank}.`),t.assert(2===b.rank||1===b.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${b.rank}.`),t.assert(2===k.rank||1===k.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(2===f.rank||1===f.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm2d_:u});exports.batchNorm2d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"seIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm3d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${i.rank}.`),t.assert(3===b.rank||1===b.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${b.rank}.`),t.assert(3===k.rank||1===k.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(3===f.rank||1===f.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm3d_:u});exports.batchNorm3d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"REgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm4d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${i.rank}.`),t.assert(4===b.rank||1===b.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${b.rank}.`),t.assert(4===k.rank||1===k.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(4===f.rank||1===f.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm4d_:u});exports.batchNorm4d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"MD76":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function s(o,i,u){const s=(0,n.convertToTensor)(o,"x","bincount"),a=(0,n.convertToTensor)(i,"weights","bincount");r.assert("int32"===s.dtype,()=>"Error in bincount: input "+`dtype must be int32, but got ${s.dtype}`),r.assert(u>=0,()=>`size must be non-negative, but got ${u}.`),r.assert(a.size===s.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+`0-length, but got input shape: ${s.shape}, weights shape: `+`${a.shape}.`);const p={x:s,weights:a},c={size:u};return e.ENGINE.runKernel(t.Bincount,p,c)}const a=(0,o.op)({bincount_:s});exports.bincount=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"qUV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastTo=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./clone"),n=require("./operation"),a=require("./reshape");function s(n,s){let i=(0,o.convertToTensor)(n,"broadcastTo","x");const c=i.shape;if(s.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${s}].`);if(s.length<i.rank)throw new Error(`broadcastTo(): shape.length=${s.length} < input.rank=${i.rank}.`);if(s.length>i.rank){const e=i.shape.slice();for(;e.length<s.length;)e.unshift(1);i=(0,a.reshape)(i,e)}const l=i.shape,h=Array.from(s);for(let e=s.length-1;e>=0;e--)if(l[e]===s[e])h[e]=1;else if(1!==i.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${s}].`);if(0===h.map((e,r)=>e>1?r:-1).filter(e=>e>=0).length)return(0,t.clone)(i);const p={x:i},u={reps:h};return e.ENGINE.runKernel(r.Tile,p,u)}const i=(0,n.op)({broadcastTo_:s});exports.broadcastTo=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./clone":"F06q","./operation":"JtaO","./reshape":"QI4k"}],"S70G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","ceil")};return e.ENGINE.runKernel(r.Ceil,o)}const t=(0,i.op)({ceil_:o});exports.ceil=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"VfEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),u=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,o,i){const l=(0,t.convertToTensor)(u,"x","clipByValue");n.assert(o<=i,()=>`Error in clip: min (${o}) must be `+`less than or equal to max (${i}).`);const a={x:l},p={clipValueMin:o,clipValueMax:i};return e.ENGINE.runKernel(r.ClipByValue,a,p)}const a=(0,u.op)({clipByValue_:l});exports.clipByValue=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"J9se":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat1d=void 0;var e=require("./concat"),o=require("./operation");function t(o){return(0,e.concat)(o,0)}const c=(0,o.op)({concat1d_:t});exports.concat1d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"Y6Ad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat2d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat2d_:t});exports.concat2d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"NSM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat3d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat3d_:t});exports.concat3d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"Yjfb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat4d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat4d_:t});exports.concat4d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"oJQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),s=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(i,a,u,p,d="NHWC",c=[1,1],l){const f=(0,t.convertToTensor)(i,"x","conv2d"),v=(0,t.convertToTensor)(a,"filter","conv2d");let h=f,b=!1;3===f.rank&&(b=!0,h=(0,s.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),n.assert(4===h.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),n.assert(4===v.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${v.rank}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const k="NHWC"===d?h.shape[3]:h.shape[1];n.assert(k===v.shape[2],()=>`Error in conv2d: depth of input (${k}) must match `+`input depth for filter ${v.shape[2]}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,c),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${c}'`);const g={x:h,filter:v},O={strides:u,pad:p,dataFormat:d,dilations:c,dimRoundingMode:l},m=e.ENGINE.runKernel(r.Conv2D,g,O);return b?(0,s.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const d=(0,i.op)({conv2d_:p});exports.conv2d=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"n3wz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=i(require("./conv_util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s,i,p,u="NWC",c=1,d){const h=(0,e.convertToTensor)(o,"x","conv1d"),l=(0,e.convertToTensor)(s,"filter","conv1d");let f=h,v=!1;2===h.rank&&(v=!0,f=(0,a.reshape)(h,[1,h.shape[0],h.shape[1]])),r.assert(3===f.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),r.assert(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${l.rank}.`),null!=d&&r.assert(r.isInt(p),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`),r.assert(f.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match `+`input depth for filter ${l.shape[1]}.`),r.assert(n.eitherStridesOrDilationsAreOne(i,c),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${i} and dilation '${c}'`),r.assert("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),k=(0,a.reshape)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=[1,i],g=[1,c],O=(0,t.conv2d)(k,b,y,p,"NHWC",g,d);return v?(0,a.reshape)(O,[O.shape[2],O.shape[3]]):(0,a.reshape)(O,[O.shape[0],O.shape[2],O.shape[3]])}const u=(0,o.op)({conv1d_:p});exports.conv1d=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./conv2d":"oJQk","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"GLx7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("../util")),n=require("./operation"),a=require("./reshape");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var u=a?Object.getOwnPropertyDescriptor(e,p):null;u&&(u.get||u.set)?Object.defineProperty(n,p,u):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}function u(n,o,p,u,s,i="NHWC",c){t.assert(n.length===o.rank,()=>"Length of inShape "+`(${n.length}) and rank of dy (${o.rank}) must match`);let h=n,d=o,f=!1;3===o.rank&&(f=!0,d=(0,a.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),h=[1,n[0],n[1],n[2]]),t.assert(4===h.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${h.length}.`),t.assert(4===d.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${d.rank}`),t.assert(4===p.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${p.rank}`);const l="NHWC"===i?h[3]:h[1],g="NHWC"===i?d.shape[3]:d.shape[1];t.assert(l===p.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must `+`match input depth for filter ${p.shape[2]}.`),t.assert(g===p.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must `+`match output depth for filter ${p.shape[3]}.`),null!=c&&t.assert(t.isInt(s),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${s}.`);const k={dy:d,filter:p},v={strides:u,pad:s,dataFormat:i,dimRoundingMode:c,inputShape:h},b=e.ENGINE.runKernel(r.Conv2DBackpropInput,k,v);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const s=(0,n.op)({conv2DBackpropInput_:u});exports.conv2DBackpropInput=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"GCOF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv2d_backprop_input"),r=require("./operation");function n(r,n,s,t,p,c){const v=(0,o.convertToTensor)(r,"x","conv2dTranspose"),i=(0,o.convertToTensor)(n,"filter","conv2dTranspose");return(0,e.conv2DBackpropInput)(s,v,i,t,p,"NHWC",c)}const s=(0,r.op)({conv2dTranspose_:n});exports.conv2dTranspose=s;
},{"../tensor_util_env":"c6yR","./conv2d_backprop_input":"GLx7","./operation":"JtaO"}],"VJ2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./conv_util"),a=require("./operation"),s=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(a,i,u,p,c="NDHWC",d=[1,1,1]){const l=(0,t.convertToTensor)(a,"x","conv3d"),f=(0,t.convertToTensor)(i,"filter","conv3d");let v=l,h=!1;4===l.rank&&(h=!0,v=(0,s.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),n.assert(5===v.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${v.rank}.`),n.assert(5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${f.rank}.`),n.assert(v.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${v.shape[4]}) must match `+`input depth for filter ${f.shape[3]}.`),n.assert((0,o.eitherStridesOrDilationsAreOne)(u,d),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`),n.assert("NDHWC"===c,()=>`Error in conv3d: got dataFormat of ${c} but only NDHWC is currently supported.`);const b={x:v,filter:f},k={strides:u,pad:p,dataFormat:c,dilations:d},y=e.ENGINE.runKernel(r.Conv3D,b,k);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const c=(0,a.op)({conv3d_:p});exports.conv3d=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"bEFz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=o(require("../util")),n=require("./operation"),a=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function u(n,p,o,u,s){t.assert(n.length===p.rank,()=>"Length of inShape "+`(${n.length}) and rank of dy (${p.rank}) must match`);let i=n,c=p,h=!1;4===p.rank&&(h=!0,c=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]]),i=[1,n[0],n[1],n[2],n[3]]);const f=i[4],l=c.shape[4];t.assert(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${i.length}.`),t.assert(5===c.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${c.rank}`),t.assert(5===o.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${o.rank}`),t.assert(f===o.shape[3],()=>`Error in conv3dDerInput: depth of input (${f}) must `+`match input depth for filter ${o.shape[3]}.`),t.assert(l===o.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must `+`match output depth for filter ${o.shape[4]}.`);const d={dy:c,filter:o},k={pad:s,strides:u,inputShape:i},v=e.ENGINE.runKernel(r.Conv3DBackpropInputV2,d,k);return h?(0,a.reshape)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const s=(0,n.op)({conv3DBackpropInput_:u});exports.conv3DBackpropInput=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"fQzO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv3d_backprop_input"),r=require("./operation");function n(r,n,s,t,p){const c=(0,o.convertToTensor)(r,"x","conv3dTranspose"),v=(0,o.convertToTensor)(n,"filter","conv3dTranspose");return(0,e.conv3DBackpropInput)(s,c,v,t,p)}const s=(0,r.op)({conv3dTranspose_:n});exports.conv3dTranspose=s;
},{"../tensor_util_env":"c6yR","./conv3d_backprop_input":"bEFz","./operation":"JtaO"}],"g9ZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cos")};return e.ENGINE.runKernel(r.Cos,s)}const t=(0,n.op)({cos_:s});exports.cos=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"GpTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cosh")};return e.ENGINE.runKernel(r.Cosh,s)}const t=(0,n.op)({cosh_:s});exports.cosh=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Kzhc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=void 0;var e=require("../engine"),r=require("../kernel_names"),u=require("../tensor_util_env"),s=require("./operation");function n(s,n=0,o=!1,t=!1){const i={x:(0,u.convertToTensor)(s,"x","cumsum")},c={axis:n,exclusive:o,reverse:t};return e.ENGINE.runKernel(r.Cumsum,i,c)}const o=(0,s.op)({cumsum_:n});exports.cumsum=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"HdYS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=i(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function u(o,s,i,u=!1){const a=(0,n.convertToTensor)(o,"x","denseBincount"),p=(0,n.convertToTensor)(s,"weights","denseBincount");r.assert("int32"===a.dtype,()=>"Error in denseBincount: input "+`dtype must be int32, but got ${a.dtype}`),r.assert(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+`rank ${a.rank}.`),r.assert(i>=0,()=>`size must be non-negative, but got ${i}.`),r.assert(p.size===a.size||0===p.size,()=>"Error in denseBincount: weights must have the same shape as x or "+`0-length, but got x shape: ${a.shape}, weights shape: `+`${p.shape}.`);const c={x:a,weights:p},f={size:i,binaryOutput:u};return e.ENGINE.runKernel(t.DenseBincount,c,f)}const a=(0,o.op)({denseBincount_:u});exports.denseBincount=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"U4UL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var a=o?Object.getOwnPropertyDescriptor(e,p):null;a&&(a.get||a.set)?Object.defineProperty(n,p,a):n[p]=e[p]}return n.default=e,r&&r.set(e,n),n}function a(o,i,p="NHWC"){const a=(0,r.convertToTensor)(o,"x","depthToSpace"),s="NHWC"===p?a.shape[1]:a.shape[2],u="NHWC"===p?a.shape[2]:a.shape[3],c="NHWC"===p?a.shape[3]:a.shape[1];n.assert(s*i>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${i}  for depthToSpace with input shape\n    ${a.shape}`),n.assert(u*i>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${i} for depthToSpace with input shape\n        ${a.shape}`),n.assert(c%(i*i)==0,()=>`Dimension size must be evenly divisible by ${i*i} but is ${c} for depthToSpace with input shape ${a.shape}`);const h={x:a},l={blockSize:i,dataFormat:p};return e.ENGINE.runKernel(t.DepthToSpace,h,l)}const s=(0,o.op)({depthToSpace_:a});exports.depthToSpace=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"Kahd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(o,s,a,p,u="NHWC",d=[1,1],h){const l=(0,t.convertToTensor)(o,"x","depthwiseConv2d"),f=(0,t.convertToTensor)(s,"filter","depthwiseConv2d");let c=l,v=!1;3===l.rank&&(v=!0,c=(0,i.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),n.assert(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),n.assert(4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${f.rank}.`),n.assert(c.shape[3]===f.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${c.shape[3]}) must match the inChannels dimension in `+`filter ${f.shape[2]}.`),null!=h&&n.assert(n.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${h} but got pad ${p}.`);const w={x:c,filter:f},b={strides:a,pad:p,dataFormat:u,dilations:d,dimRoundingMode:h},k=e.ENGINE.runKernel(r.DepthwiseConv2dNative,w,b);return v?(0,i.reshape)(k,[k.shape[1],k.shape[2],k.shape[3]]):k}const u=(0,o.op)({depthwiseConv2d_:p});exports.depthwiseConv2d=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"B6ot":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","diag")};return e.ENGINE.runKernel(r.Diag,o)}const t=(0,i.op)({diag_:o});exports.diag=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"q2Zv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation"),i=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(o,a,s,u,l=[1,1],p="NHWC"){const d=(0,t.convertToTensor)(o,"x","dilation2d"),f=(0,t.convertToTensor)(a,"filter","dilation2d");n.assert(3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${d.rank}.`),n.assert(3===f.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${f.rank}.`),n.assert("NHWC"===p,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${p}`);let c=d,k=!1;3===d.rank&&(c=(0,i.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),k=!0);const b={x:c,filter:f},y={strides:s,pad:u,dilations:l},h=e.ENGINE.runKernel(r.Dilation2D,b,y);return k?(0,i.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const l=(0,o.op)({dilation2d_:u});exports.dilation2d=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"Xh9J":[function(require,module,exports) {
"use strict";function t(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,l=t[r]||1;(e[e.length-1-o]||1)>1&&1===l&&s.unshift(r)}return s}function e(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,l=e[r];(null==o||1===o&&l>1)&&n.unshift(r)}return n}function n(t,e){const n=[],s=Math.max(t.length,e.length);for(let o=0;o<s;o++){let s=t[t.length-o-1];null==s&&(s=1);let r=e[e.length-o-1];if(null==r&&(r=1),1===s)n.unshift(r);else if(1===r)n.unshift(s);else{if(s!==r){throw Error("Operands could not be broadcast together with shapes "+`${t} and ${e}.`)}n.unshift(s)}}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBroadcastDims=t,exports.getReductionAxes=e,exports.assertAndGetBroadcastShape=n;
},{}],"WG94":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),o=require("./broadcast_util"),n=require("./operation");function u(n,u){let s=(0,a.convertToTensor)(n,"a","equal"),i=(0,a.convertToTensor)(u,"b","equal");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.Equal,l)}const s=(0,n.op)({equal_:u});exports.equal=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"BsuI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.where=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("../util"),s=require("./broadcast_to"),n=require("./broadcast_util"),a=require("./operation");function i(a,i,c){const h=(0,o.convertToTensor)(i,"a","where"),u=(0,o.convertToTensor)(c,"b","where"),p=(0,o.convertToTensor)(a,"condition","where","bool"),d=(0,n.assertAndGetBroadcastShape)(h.shape,u.shape),l=(0,s.broadcastTo)(h,d),T=(0,s.broadcastTo)(u,d);1===p.rank&&(0,t.assert)(p.shape[0]===h.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==p.rank&&(0,t.assertShapesMatch)(p.shape,T.shape,"Error in where: ");const _={condition:p,t:l,e:T};return e.ENGINE.runKernel(r.Select,_)}const c=(0,a.op)({where_:i});exports.where=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./broadcast_to":"qUV0","./broadcast_util":"Xh9J","./operation":"JtaO"}],"PDcB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function i(n){const i={x:(0,o.convertToTensor)(n,"x","zerosLike")};return e.ENGINE.runKernel(r.ZerosLike,i)}const s=(0,n.op)({zerosLike_:i});exports.zerosLike=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mdNH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divNoNan=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),o=require("./div"),i=require("./equal"),t=require("./operation"),n=require("./where"),u=require("./zeros_like");function s(t,s){let v=(0,r.convertToTensor)(t,"a","div"),a=(0,r.convertToTensor)(s,"b","div");[v,a]=(0,e.makeTypesMatch)(v,a);const d=(0,o.div)(v,a),q=(0,u.zerosLike)(d),c=(0,i.equal)(a,q);return(0,n.where)(c,q,d)}const v=(0,t.op)({divNoNan_:s});exports.divNoNan=v;
},{"../tensor_util":"fpST","../tensor_util_env":"c6yR","./div":"D8Fc","./equal":"WG94","./operation":"JtaO","./where":"BsuI","./zeros_like":"PDcB"}],"bUs4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dot=void 0;var e=require("../tensor_util_env"),r=s(require("../util")),t=require("./mat_mul"),n=require("./operation"),a=require("./reshape");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function u(n,o){const s=(0,e.convertToTensor)(n,"t1","dot"),u=(0,e.convertToTensor)(o,"t2","dot");r.assert(!(1!==s.rank&&2!==s.rank||1!==u.rank&&2!==u.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${s.rank} and ${u.rank}.`);const i=1===s.rank?s.size:s.shape[1],p=1===u.rank?u.size:u.shape[0];if(r.assert(i===p,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${p}.`),1===s.rank&&1===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[-1,1]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[])}if(1===s.rank&&2===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[u.shape[0],u.shape[1]]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[n.size])}if(2===s.rank&&1===u.rank){const e=(0,a.reshape)(u,[-1,1]),r=(0,t.matMul)(s,e);return(0,a.reshape)(r,[r.size])}{const e=(0,a.reshape)(u,[u.shape[0],u.shape[1]]);return(0,t.matMul)(s,e)}}const i=(0,n.op)({dot_:u});exports.dot=i;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./mat_mul":"mMWq","./operation":"JtaO","./reshape":"QI4k"}],"a7Il":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","elu")};return e.ENGINE.runKernel(r.Elu,u)}const t=(0,o.op)({elu_:u});exports.elu=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"roFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erf=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=f(require("../util")),o=require("./cast"),u=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(u){let i=(0,r.convertToTensor)(u,"x","erf");n.assert("int32"===i.dtype||"float32"===i.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=(0,o.cast)(i,"float32"));const f={x:i};return e.ENGINE.runKernel(t.Erf,f)}const p=(0,u.op)({erf_:a});exports.erf=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./operation":"JtaO"}],"zsk9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exp=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","exp")};return e.ENGINE.runKernel(r.Exp,t)}const i=(0,o.op)({exp_:t});exports.exp=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"XF6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function s(o,i=0){const u=(0,t.convertToTensor)(o,"x","expandDims","string_or_numeric");n.assert(i<=u.rank,()=>"Axis must be <= rank of the tensor");const s={input:u},a={dim:i};return e.ENGINE.runKernel(r.ExpandDims,s,a)}const a=(0,o.op)({expandDims_:s});exports.expandDims=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"ntzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","expm1")};return e.ENGINE.runKernel(r.Expm1,t)}const i=(0,o.op)({expm1_:t});exports.expm1=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mfii":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function a(o,i){const u=(0,t.convertToTensor)(o,"x","tile","string_or_numeric");n.assert(u.rank===i.length,()=>`Error in transpose: rank of input ${u.rank} `+`must match length of reps ${i}.`);const a={x:u},s={reps:i};return e.ENGINE.runKernel(r.Tile,a,s)}const s=(0,o.op)({tile_:a});exports.tile=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"HzEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eye=void 0;var e=require("./buffer"),r=require("./expand_dims"),t=require("./operation"),n=require("./reshape"),i=require("./tile");function s(t,s,o,u="float32"){null==s&&(s=t);const l=(0,e.buffer)([t,s],u),p=t<=s?t:s;for(let e=0;e<p;++e)l.set(1,e,e);const a=(0,n.reshape)(l.toTensor(),[t,s]);if(null==o)return a;if(1===o.length)return(0,i.tile)((0,r.expandDims)(a,0),[o[0],1,1]);if(2===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)(a,0),0),[o[0],o[1],1,1]);if(3===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)((0,r.expandDims)(a,0),0),0),[o[0],o[1],o[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${o.length}D.`)}const o=(0,t.op)({eye_:s});exports.eye=o;
},{"./buffer":"WyiN","./expand_dims":"XF6l","./operation":"JtaO","./reshape":"QI4k","./tile":"mfii"}],"e6pp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,l){const u={shape:n,value:t,dtype:l};return e.ENGINE.runKernel(r.Fill,{},u)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"XD37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floor=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","floor")};return e.ENGINE.runKernel(r.Floor,t)}const i=(0,n.op)({floor_:t});exports.floor=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ESvM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gather=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o,i=0,s=0){const a={x:(0,t.convertToTensor)(n,"x","gather"),indices:(0,t.convertToTensor)(o,"indices","gather","int32")},u={axis:i,batchDims:s};return e.ENGINE.runKernel(r.GatherV2,a,u)}const i=(0,n.op)({gather_:o});exports.gather=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"QdS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greater=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),o=require("./broadcast_util"),n=require("./operation");function s(n,s){let i=(0,a.convertToTensor)(n,"a","greater"),u=(0,a.convertToTensor)(s,"b","greater");[i,u]=(0,t.makeTypesMatch)(i,u),(0,o.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.Greater,c)}const i=(0,n.op)({greater_:s});exports.greater=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"Dbo2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),o=require("./broadcast_util"),n=require("./operation");function u(n,u){let s=(0,a.convertToTensor)(n,"a","greaterEqual"),i=(0,a.convertToTensor)(u,"b","greaterEqual");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.GreaterEqual,l)}const s=(0,n.op)({greaterEqual_:u});exports.greaterEqual=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"C5d3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function t(i){const t={input:(0,n.convertToTensor)(i,"input","imag")};return e.ENGINE.runKernel(r.Imag,t)}const o=(0,i.op)({imag_:t});exports.imag=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"JMGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFinite=void 0;var e=require("../engine"),i=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,r.convertToTensor)(n,"x","isFinite")};return e.ENGINE.runKernel(i.IsFinite,t)}const o=(0,n.op)({isFinite_:t});exports.isFinite=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"PwB1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInf=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isInf")};return e.ENGINE.runKernel(r.IsInf,s)}const i=(0,o.op)({isInf_:s});exports.isInf=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"LVjE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaN=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isNaN")};return e.ENGINE.runKernel(r.IsNan,s)}const i=(0,o.op)({isNaN_:s});exports.isNaN=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"hUKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u=.2){const l={x:(0,n.convertToTensor)(o,"x","leakyRelu")},t={alpha:u};return e.ENGINE.runKernel(r.LeakyRelu,l,t)}const l=(0,o.op)({leakyRelu_:u});exports.leakyRelu=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Ndy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.less=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./broadcast_util"),n=require("./operation");function a(n,a){let i=(0,t.convertToTensor)(n,"a","less"),u=(0,t.convertToTensor)(a,"b","less");[i,u]=(0,s.makeTypesMatch)(i,u),(0,o.assertAndGetBroadcastShape)(i.shape,u.shape);const l={a:i,b:u};return e.ENGINE.runKernel(r.Less,l)}const i=(0,n.op)({less_:a});exports.less=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"FvS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),a=require("./broadcast_util"),o=require("./operation");function n(o,n){let u=(0,t.convertToTensor)(o,"a","lessEqual"),l=(0,t.convertToTensor)(n,"b","lessEqual");[u,l]=(0,s.makeTypesMatch)(u,l),(0,a.assertAndGetBroadcastShape)(u.shape,l.shape);const i={a:u,b:l};return e.ENGINE.runKernel(r.LessEqual,i)}const u=(0,o.op)({lessEqual_:n});exports.lessEqual=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"encs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linspace=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,s){if(s<=0)throw new Error("The number of values should be positive.");const o={start:n,stop:t,num:s};return e.ENGINE.runKernel(r.LinSpace,{},o)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"wFSX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalization=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s=5,i=1,p=1,u=.5){const l=(0,t.convertToTensor)(o,"x","localResponseNormalization");n.assert(4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),n.assert(n.isInt(s),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${s}.`);let c=l,f=!1;3===l.rank&&(f=!0,c=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const d={x:c},h={depthRadius:s,bias:i,alpha:p,beta:u},b=e.ENGINE.runKernel(r.LRN,d,h);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const u=(0,o.op)({localResponseNormalization_:p});exports.localResponseNormalization=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"vwHA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log")};return e.ENGINE.runKernel(r.Log,t)}const i=(0,n.op)({log_:t});exports.log=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"PxfL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1p=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log1p")};return e.ENGINE.runKernel(r.Log1p,t)}const i=(0,n.op)({log1p_:t});exports.log1p=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"yPDw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customGrad=f,exports.variableGrads=d,exports.valueAndGrad=i,exports.valueAndGrads=l,exports.grad=o,exports.grads=u;var e=require("./engine"),r=require("./tensor"),a=require("./tensor_util_env"),s=n(require("./util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=e[o]}return s.default=e,a&&a.set(e,s),s}function o(r){return s.assert(s.isFunction(r),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const o=(0,a.convertToTensor)(t,"x","tf.grad","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grad"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(o),[o],u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(t),t[0]})}}function u(r){return s.assert(s.isFunction(r),()=>"The f passed in grads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const o=(0,a.convertToTensorArray)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grads"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(...o),o,u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(t),t})}}function i(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{s.assert(t instanceof r.Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:o,value:u}=e.ENGINE.gradients(()=>a(t),[t],n);return c(o),{grad:o[0],value:u}}}function l(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t)&&t.every(e=>e instanceof r.Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const o=e.ENGINE.gradients(()=>a(...t),t,n);return null!=n&&s.assertShapesMatch(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o.grads),o}}function d(a,t){s.assert(s.isFunction(a),()=>"The f passed in variableGrads(f) must be a function"),s.assert(null==t||Array.isArray(t)&&t.every(e=>e instanceof r.Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const r in e.ENGINE.registeredVariables)t.push(e.ENGINE.registeredVariables[r])}const o=n?t.filter(e=>!e.trainable):null,u=t.length;t=t.filter(e=>e.trainable),s.assert(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${u} variables is `+"trainable.");const{value:i,grads:l}=e.ENGINE.gradients(a,t,null,!0);s.assert(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s.assert(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${i.rank} tensor`);const d={};return t.forEach((e,r)=>{null!=l[r]&&(d[e.name]=l[r])}),null!=o&&o.forEach(e=>d[e.name]=null),{value:i,grads:d}}function f(r){return e.ENGINE.customGrad(r)}function c(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
},{"./engine":"Nc3Y","./tensor":"DTHt","./tensor_util_env":"c6yR","./util":"P6nv"}],"iGYA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","neg")};return e.ENGINE.runKernel(r.Neg,t)}const i=(0,o.op)({neg_:t});exports.neg=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"eE4m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplus=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),s=require("./operation");function t(s){const t={x:(0,o.convertToTensor)(s,"x","softplus")};return e.ENGINE.runKernel(r.Softplus,t)}const n=(0,s.op)({softplus_:t});exports.softplus=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lXsJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSigmoid=void 0;var e=require("../gradients"),r=require("../tensor_util_env"),o=require("./mul"),i=require("./neg"),u=require("./operation"),t=require("./sigmoid"),n=require("./softplus");function s(u){const s=(0,r.convertToTensor)(u,"x","logSigmoid");return(0,e.customGrad)(e=>{return{value:(0,i.neg)((0,n.softplus)((0,i.neg)(e))),gradFunc:r=>{return(0,o.mul)(r,(0,t.sigmoid)((0,i.neg)(e)))}}})(s)}const g=(0,u.op)({logSigmoid_:s});exports.logSigmoid=g;
},{"../gradients":"yPDw","../tensor_util_env":"c6yR","./mul":"k2PI","./neg":"iGYA","./operation":"JtaO","./sigmoid":"yARQ","./softplus":"eE4m"}],"iipD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","max")},u={reductionIndices:t,keepDims:i};return e.ENGINE.runKernel(r.Max,s,u)}const i=(0,o.op)({max_:t});exports.max=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"dGex":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function s(t,s){let u=(0,o.convertToTensor)(t,"a","sub"),i=(0,o.convertToTensor)(s,"b","sub");[u,i]=(0,n.makeTypesMatch)(u,i);const b={a:u,b:i};return e.ENGINE.runKernel(r.Sub,b)}const u=(0,t.op)({sub_:s});exports.sub=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ITAy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./cast"),s=require("./operation");function o(s,o=null,u=!1){let i=(0,t.convertToTensor)(s,"x","sum");"bool"===i.dtype&&(i=(0,n.cast)(i,"int32"));const l={x:i},c={axis:o,keepDims:u};return e.ENGINE.runKernel(r.Sum,l,c)}const u=(0,s.op)({sum_:o});exports.sum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO"}],"I1du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmax=void 0;var r=require("../gradients"),e=require("../tensor_util_env"),o=require("./cast"),t=require("./exp"),s=require("./log"),u=require("./max"),a=require("./mul"),n=require("./operation"),i=require("./sub"),l=require("./sum");function m(n,m=-1){const x=(0,e.convertToTensor)(n,"logits","logSoftmax");if(-1===m&&(m=x.rank-1),m!==x.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${x.rank} and axis was ${m}`);return(0,r.customGrad)((r,e)=>{const n=(0,u.max)(r,m,!0),x=(0,i.sub)(r,n),c=(0,i.sub)((0,o.cast)(x,"float32"),(0,s.log)((0,l.sum)((0,t.exp)(x),m,!0)));e([c]);return{value:c,gradFunc:(r,e)=>{const[o]=e,s=(0,t.exp)(o);return(0,i.sub)(r,(0,a.mul)((0,l.sum)(r,m,!0),s))}}})(x)}const x=(0,n.op)({logSoftmax_:m});exports.logSoftmax=x;
},{"../gradients":"yPDw","../tensor_util_env":"c6yR","./cast":"qqq3","./exp":"zsk9","./log":"vwHA","./max":"iipD","./mul":"k2PI","./operation":"JtaO","./sub":"dGex","./sum":"ITAy"}],"DsMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axesAreInnerMostDims=n,exports.combineLocations=o,exports.computeOutAndReduceShapes=u,exports.expandShapeToKeepDim=s,exports.assertAxesAreInnerMostDims=p,exports.getAxesPermutation=i,exports.getUndoAxesPermutation=f,exports.getInnerMostAxes=a;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var p=u?Object.getOwnPropertyDescriptor(e,s):null;p&&(p.get||p.set)?Object.defineProperty(o,s,p):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){const n=e.length+t.length,o=[];let u=0,s=0;for(let p=0;p<n;p++)-1===r.indexOf(p)?o.push(e[u++]):o.push(t[s++]);return o}function u(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map(t=>e[t])]}function s(e,t){return o(e,t.map(e=>1),t)}function p(t,r,o){e.assert(n(r,o),()=>`${t} supports only inner-most axes for now. `+`Got axes ${r} and rank-${o} input.`)}function i(e,t){if(n(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function f(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function a(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}
},{"../util":"P6nv"}],"MQ55":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSumExp=void 0;var e=require("../tensor_util_env"),r=require("../util"),u=require("./add"),o=require("./axis_util"),s=require("./exp"),i=require("./log"),p=require("./max"),a=require("./operation"),t=require("./reshape"),n=require("./sub"),x=require("./sum");function l(a,l=null,q=!1){const m=(0,e.convertToTensor)(a,"x","logSumExp"),d=(0,r.parseAxisParam)(l,m.shape),c=(0,p.max)(m,d,!0),h=(0,n.sub)(m,c),g=(0,s.exp)(h),_=(0,x.sum)(g,d),v=(0,i.log)(_),S=(0,u.add)((0,t.reshape)(c,v.shape),v);if(q){const e=(0,o.expandShapeToKeepDim)(S.shape,d);return(0,t.reshape)(S,e)}return S}const q=(0,a.op)({logSumExp_:l});exports.logSumExp=q;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./axis_util":"DsMP","./exp":"zsk9","./log":"vwHA","./max":"iipD","./operation":"JtaO","./reshape":"QI4k","./sub":"dGex","./sum":"ITAy"}],"lYzt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAnd=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./broadcast_util"),t=require("./operation");function a(t,a){const i=(0,r.convertToTensor)(t,"a","logicalAnd","bool"),l=(0,r.convertToTensor)(a,"b","logicalAnd","bool");(0,n.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(o.LogicalAnd,s)}const i=(0,t.op)({logicalAnd_:a});exports.logicalAnd=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"XZse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t){const n={x:(0,r.convertToTensor)(t,"x","logicalNot","bool")};return e.ENGINE.runKernel(o.LogicalNot,n)}const i=(0,t.op)({logicalNot_:n});exports.logicalNot=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"HD5h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOr=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./broadcast_util"),n=require("./operation");function a(n,a){const i=(0,o.convertToTensor)(n,"a","logicalOr","bool"),l=(0,o.convertToTensor)(a,"b","logicalOr","bool");(0,t.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(r.LogicalOr,s)}const i=(0,n.op)({logicalOr_:a});exports.logicalOr=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"FEKV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalXor=void 0;var o=require("../tensor_util_env"),r=require("./broadcast_util"),e=require("./logical_and"),l=require("./logical_not"),a=require("./logical_or"),i=require("./operation");function t(i,t){const c=(0,o.convertToTensor)(i,"a","logicalXor","bool"),n=(0,o.convertToTensor)(t,"b","logicalXor","bool");return(0,r.assertAndGetBroadcastShape)(c.shape,n.shape),(0,e.logicalAnd)((0,a.logicalOr)(i,t),(0,l.logicalNot)((0,e.logicalAnd)(i,t)))}const c=(0,i.op)({logicalXor_:t});exports.logicalXor=c;
},{"../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./logical_and":"lYzt","./logical_not":"XZse","./logical_or":"HD5h","./operation":"JtaO"}],"hJeZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(i,s,u,l,p){const d=(0,t.convertToTensor)(i,"x","maxPool");let c=d,f=!1;3===d.rank&&(f=!0,c=(0,a.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),n.assert(4===c.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${c.rank}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '1'`),null!=p&&n.assert(n.isInt(l),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${l}.`);const h={x:c},P={filterSize:s,strides:u,pad:l,dimRoundingMode:p},m=e.ENGINE.runKernel(r.MaxPool,h,P);return f?(0,a.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const p=(0,i.op)({maxPool_:l});exports.maxPool=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"Cet1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=l(require("../util")),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function d(i,u=[1,1,1],l,d,p,c="NDHWC",f){null==f?f=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const h=(0,o.convertToTensor)(i,"x","maxPool3d");let m=h,b=!1;4===h.rank&&(b=!0,m=(0,s.reshape)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),n.assert(5===m.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${m.rank}.`),n.assert("NDHWC"===c,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${c}`),n.assert(a.eitherStridesOrDilationsAreOne(l,f),()=>"Error in maxPool3d: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '${f}'`),null!=p&&n.assert(n.isInt(d),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${d}.`);const x={x:m},P={filterSize:u,strides:l,pad:d,dimRoundingMode:p,dataFormat:c,dilations:f},g=e.ENGINE.runKernel(t.MaxPool3D,x,P);return b?(0,s.reshape)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const p=(0,i.op)({maxPool3d_:d});exports.maxPool3d=p;
},{"../engine":"Nc3Y","../globals":"GWnL","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"gxl3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./operation");function i(t,i,n,x,a=!1){const s={x:(0,o.convertToTensor)(t,"x","maxPoolWithArgmax")},l={filterSize:i,strides:n,pad:x,includeBatchInIndex:a},u=e.ENGINE.runKernel(r.MaxPoolWithArgmax,s,l);return{result:u[0],indexes:u[1]}}const n=(0,t.op)({maxPoolWithArgmax_:i});exports.maxPoolWithArgmax=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"X5MV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),i=require("./broadcast_util"),o=require("./cast"),n=require("./operation");function s(n,s){let u=(0,a.convertToTensor)(n,"a","maximum"),m=(0,a.convertToTensor)(s,"b","maximum");[u,m]=(0,t.makeTypesMatch)(u,m),"bool"===u.dtype&&(u=(0,o.cast)(u,"int32"),m=(0,o.cast)(m,"int32")),(0,i.assertAndGetBroadcastShape)(u.shape,m.shape);const c={a:u,b:m};return e.ENGINE.runKernel(r.Maximum,c)}const u=(0,n.op)({maximum_:s});exports.maximum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./cast":"qqq3","./operation":"JtaO"}],"jwZo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","mean")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Mean,s,u)}const i=(0,o.op)({mean_:t});exports.mean=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"w9We":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=null,t=!1){const s={x:(0,n.convertToTensor)(i,"x","min")},u={axis:o,keepDims:t};return e.ENGINE.runKernel(r.Min,s,u)}const t=(0,i.op)({min_:o});exports.min=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"crIr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),i=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./cast"),s=require("./operation");function u(s,u){let a=(0,i.convertToTensor)(s,"a","minimum"),m=(0,i.convertToTensor)(u,"b","minimum");[a,m]=(0,t.makeTypesMatch)(a,m),"bool"===a.dtype&&(a=(0,o.cast)(a,"int32"),m=(0,o.cast)(m,"int32")),(0,n.assertAndGetBroadcastShape)(a.shape,m.shape);const c={a:a,b:m};return e.ENGINE.runKernel(r.Minimum,c)}const a=(0,s.op)({minimum_:u});exports.minimum=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./cast":"qqq3","./operation":"JtaO"}],"yI5U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function s(o,a,i){n.assert("reflect"===i||"symmetric"===i,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${i}.`);const s=(0,t.convertToTensor)(o,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");n.assert(a.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. `+`Got ${a.length}.`);const u="reflect"===i?1:0;for(let e=0;e<s.rank;e++)n.assert(2===a[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),n.assert(a[e][0]>=0&&a[e][0]<=s.shape[e]-u&&a[e][1]>=0&&a[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${s.shape[e]-u} or less than 0 for input of `+`shape ${s.shape}`);const d={paddings:a,mode:i},c={x:s};return e.ENGINE.runKernel(r.MirrorPad,c,d)}const u=(0,o.op)({mirrorPad_:s});exports.mirrorPad=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"lYF1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"a","mod"),u=(0,n.convertToTensor)(s,"b","mod");[i,u]=(0,o.makeTypesMatch)(i,u);const d={a:i,b:u};return e.ENGINE.runKernel(r.Mod,d)}const i=(0,t.op)({mod_:s});exports.mod=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mJRX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.square=void 0;var e=require("../engine"),r=require("../tensor_util_env"),o=require("./operation");function n(o){const n=(0,r.convertToTensor)(o,"x","square");return e.ENGINE.runKernel("Square",{x:n},{})}const t=(0,o.op)({square_:n});exports.square=t;
},{"../engine":"Nc3Y","../tensor_util_env":"c6yR","./operation":"JtaO"}],"rBcz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moments=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./axis_util"),t=require("./cast"),a=require("./mean"),n=require("./operation"),o=require("./reshape"),u=require("./square"),i=require("./sub");function p(n,p=null,m=!1){n=(0,e.convertToTensor)(n,"x","moments");const q=(0,r.parseAxisParam)(p,n.shape),c=(0,a.mean)(n,q,m);let l=c.shape;m||(l=(0,s.expandShapeToKeepDim)(c.shape,q));const x=(0,u.square)((0,i.sub)((0,t.cast)(n,"float32"),(0,o.reshape)(c,l)));return{mean:c,variance:(0,a.mean)(x,q,m)}}const m=(0,n.op)({moments_:p});exports.moments=m;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./axis_util":"DsMP","./cast":"qqq3","./mean":"jwZo","./operation":"JtaO","./reshape":"QI4k","./square":"mJRX","./sub":"dGex"}],"V2Xb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiRNNCell=void 0;var e=require("../tensor_util_env"),t=require("./operation");function o(t,o,r,l){const n=(0,e.convertToTensor)(o,"data","multiRNNCell"),s=(0,e.convertToTensorArray)(r,"c","multiRNNCell"),u=(0,e.convertToTensorArray)(l,"h","multiRNNCell");let i=n;const c=[];for(let e=0;e<t.length;e++){const o=t[e](i,s[e],u[e]);c.push(o[0]),c.push(o[1]),i=o[1]}const N=[],p=[];for(let e=0;e<c.length;e+=2)N.push(c[e]),p.push(c[e+1]);return[N,p]}const r=(0,t.op)({multiRNNCell_:o});exports.multiRNNCell=r;
},{"../tensor_util_env":"c6yR","./operation":"JtaO"}],"GA9C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),i=require("./operation"),t=require("./reshape");function n(i,n,s,u=!1){const l=(0,o.convertToTensor)(i,"logits","multinomial"),a=l.size,m=l.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${a}.`);if(m>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${m}`);s=s||Math.random();const p={logits:1===m?(0,t.reshape)(l,[1,-1]):l},c={numSamples:n,seed:s,normalized:u},d=e.ENGINE.runKernel(r.Multinomial,p,c);return 1===m?(0,t.reshape)(d,[d.size]):d}const s=(0,i.op)({multinomial_:n});exports.multinomial=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO","./reshape":"QI4k"}],"jVu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),o=require("../tensor_util_env"),n=require("./broadcast_util"),a=require("./operation");function u(a,u){let s=(0,o.convertToTensor)(a,"a","notEqual"),i=(0,o.convertToTensor)(u,"b","notEqual");[s,i]=(0,t.makeTypesMatch)(s,i),(0,n.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.NotEqual,l)}const s=(0,a.op)({notEqual_:u});exports.notEqual=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"R5fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=t;var e=require("../engine"),r=require("../util"),o=require("./complex");function t(s,i="float32"){if("complex64"===i){const e=t(s,"float32"),r=t(s,"float32");return(0,o.complex)(e,r)}const n=(0,r.makeZerosTypedArray)((0,r.sizeFromShape)(s),i);return e.ENGINE.makeTensor(n,s,i)}
},{"../engine":"Nc3Y","../util":"P6nv","./complex":"Iowv"}],"POxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ones=s;var e=require("../engine"),r=require("../util"),o=require("./complex"),t=require("./zeros");function s(n,i="float32"){if("complex64"===i){const e=s(n,"float32"),r=(0,t.zeros)(n,"float32");return(0,o.complex)(e,r)}const u=(0,r.makeOnesTypedArray)((0,r.sizeFromShape)(n),i);return e.ENGINE.makeTensor(u,n,i)}
},{"../engine":"Nc3Y","../util":"P6nv","./complex":"Iowv","./zeros":"R5fo"}],"VzlV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","onesLike")};return e.ENGINE.runKernel(r.OnesLike,i)}const s=(0,o.op)({onesLike_:i});exports.onesLike=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lKlD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outerProduct=void 0;var e=require("../tensor_util_env"),r=a(require("../util")),t=require("./mat_mul"),o=require("./operation"),n=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function i(o,u){const a=(0,e.convertToTensor)(o,"v1","outerProduct"),i=(0,e.convertToTensor)(u,"v2","outerProduct");r.assert(1===a.rank&&1===i.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${a.rank} and ${i.rank}.`);const c=(0,n.reshape)(a,[-1,1]),s=(0,n.reshape)(i,[1,-1]);return(0,t.matMul)(c,s)}const c=(0,o.op)({outerProduct_:i});exports.outerProduct=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./mat_mul":"mMWq","./operation":"JtaO","./reshape":"QI4k"}],"hajs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t,a=0){const s=(0,n.convertToTensor)(o,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:a},d={x:s};return e.ENGINE.runKernel(r.PadV2,d,i)}const a=(0,o.op)({pad_:t});exports.pad=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"aLXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad1d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,o=0){return(0,e.assert)(2===d.length,()=>"Invalid number of paddings. Must be length of 2."),(0,t.pad)(r,[d],o)}const o=(0,r.op)({pad1d_:d});exports.pad1d=o;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"OUX7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad2d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,n=0){return(0,e.assert)(2===d.length&&2===d[0].length&&2===d[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,t.pad)(r,d,n)}const n=(0,r.op)({pad2d_:d});exports.pad2d=n;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"Exwp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad3d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function d(t,d,n=0){return(0,e.assert)(3===d.length&&2===d[0].length&&2===d[1].length&&2===d[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,d,n)}const n=(0,t.op)({pad3d_:d});exports.pad3d=n;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"HxGt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad4d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function n(t,n,d=0){return(0,e.assert)(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,n,d)}const d=(0,t.op)({pad4d_:n});exports.pad4d=d;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"rWul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),a=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function i(a,o,s){const i=(0,r.convertToTensor)(a,"x","spaceToBatchND");n.assert(i.rank>=1+o.length,()=>`input rank ${i.rank} should be > than [blockShape] ${o.length}`),n.assert(s.length===o.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${o.length}`),n.assert(i.shape.reduce((e,t,r)=>r>0&&r<=o.length?e&&(t+s[r-1][0]+s[r-1][1])%o[r-1]==0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${o.toString()}`);const p={x:i},u={blockShape:o,paddings:s};return e.ENGINE.runKernel(t.SpaceToBatchND,p,u)}const p=(0,a.op)({spaceToBatchND_:i});exports.spaceToBatchND=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"T3We":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=void 0;var e=require("../tensor_util_env"),t=l(require("../util")),r=require("./avg_pool"),o=require("./batch_to_space_nd"),a=l(require("./conv_util")),n=require("./max_pool"),i=require("./operation"),p=require("./reshape"),s=require("./space_to_batch_nd");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function c(i,u,l,c,d,m){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const v=(0,e.convertToTensor)(i,"x","maxPool");let _=v,b=!1;3===v.rank&&(b=!0,_=(0,p.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),t.assert(a.eitherStridesOrDilationsAreOne(m,d),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${m} and dilations '${d}'`);const O=a.computePool2DInfo(_.shape,u,m,d,c),g=[O.dilationHeight,O.dilationWidth];let y;y="same"===c?h([O.filterHeight,O.filterWidth],g):[[0,0],[0,0]];const P=1===g[0]&&1===g[1],[q,j]=f([O.inHeight,O.inWidth],g,y),x=P?c:"valid",D=P?_:(0,s.spaceToBatchND)(_,g,q),M=("avg"===l?()=>(0,r.avgPool)(D,u,m,x):()=>(0,n.maxPool)(D,u,m,x))(),W=P?M:(0,o.batchToSpaceND)(M,g,j);return b?(0,p.reshape)(W,[W.shape[1],W.shape[2],W.shape[3]]):W}function f(e,t,r){const o=r.map(e=>e[0]),a=r.map(e=>e[1]),n=e.concat(o,a),i=t.map((e,t)=>(e-n[t]%e)%e),p=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[o[t],p[t]]),t.map((e,t)=>[0,i[t]])]}function h(e,t){const r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),o=r.map(e=>Math.floor(e/2)),a=r.map((e,t)=>e-o[t]);return r.map((e,t)=>[o[t],a[t]])}const d=(0,i.op)({pool_:c});exports.pool=d;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./avg_pool":"iP9e","./batch_to_space_nd":"Q9gF","./conv_util":"Evju","./max_pool":"hJeZ","./operation":"JtaO","./reshape":"QI4k","./space_to_batch_nd":"rWul"}],"vt1B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pow=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"base","pow"),p=(0,n.convertToTensor)(s,"exp","pow");[i,p]=(0,o.makeTypesMatch)(i,p);const u={a:i,b:p};return e.ENGINE.runKernel(r.Pow,u)}const i=(0,t.op)({pow_:s});exports.pow=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mkuj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){const t={x:(0,n.convertToTensor)(o,"x","prelu"),alpha:(0,n.convertToTensor)(u,"alpha","prelu")};return e.ENGINE.runKernel(r.Prelu,t)}const t=(0,o.op)({prelu_:u});exports.prelu=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pvB6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./cast"),n=require("./operation");function i(n,i=null,s=!1){let u=(0,o.convertToTensor)(n,"x","prod");"bool"===u.dtype&&(u=(0,t.cast)(u,"int32"));const p={x:u},d={axis:i,keepDims:s};return e.ENGINE.runKernel(r.Prod,p,d)}const s=(0,n.op)({prod_:i});exports.prod=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO"}],"WpBM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rand=void 0;var e=require("../engine"),r=require("../util"),n=require("./operation");function t(n,t,o){const i=(0,r.sizeFromShape)(n);let a=null;if(null==o||"float32"===o)a=new Float32Array(i);else if("int32"===o)a=new Int32Array(i);else{if("bool"!==o)throw new Error(`Unknown data type ${o}`);a=new Uint8Array(i)}for(let e=0;e<i;e++)a[e]=t();return e.ENGINE.makeTensor(a,n,o)}const o=(0,n.op)({rand_:t});exports.rand=o;
},{"../engine":"Nc3Y","../util":"P6nv","./operation":"JtaO"}],"uCqK":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function s(t){var n,e=this,s=(n=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=s(" "),e.s1=s(" "),e.s2=s(" "),e.s0-=s(t),e.s0<0&&(e.s0+=1),e.s1-=s(t),e.s1<0&&(e.s1+=1),e.s2-=s(t),e.s2<0&&(e.s2+=1),s=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function o(t,n){var e=new s(t),o=n&&n.state,u=e.next;return u.int32=function(){return 4294967296*e.next()|0},u.double=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.quick=u,o&&("object"==typeof o&&r(o,e),u.state=function(){return r(e,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"w3Ll":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function r(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),n.next()}function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function u(t,n){var e=new r(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&o(u,e),x.state=function(){return o(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor128=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"OwKO":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&r(u,e),x.state=function(){return r(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorwow=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"OrVu":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.x,o=t.i;return n=r[o],e=(n^=n>>>7)^n<<24,e^=(n=r[o+1&7])^n>>>10,e^=(n=r[o+3&7])^n>>>3,e^=(n=r[o+4&7])^n<<7,n=r[o+7&7],e^=(n^=n<<13)^n<<9,r[o]=e,t.i=o+1&7,e},function(n,t){var e,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,e=0;e<t.length;++e)r[7&e]=r[7&e]<<15^t.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],n.x=r,n.i=0,e=256;e>0;--e)n.next()}(t,n)}function o(n,t){return t.x=n.x.slice(),t.i=n.i,t}function i(n,t){null==n&&(n=+new Date);var e=new r(n),i=t&&t.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},u.int32=e.next,u.quick=u,i&&(i.x&&o(i,e),u.state=function(){return o(e,{})}),u}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"DrnH":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.w,o=t.X,u=t.i;return t.w=r=r+1640531527|0,e=o[u+34&127],n=o[u=u+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,e=o[u]=e^n,t.i=u,e+(r^r>>>16)|0},function(n,t){var e,r,o,u,i,c=[],f=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,f=Math.max(f,t.length)),o=0,u=-32;u<f;++u)t&&(r^=t.charCodeAt((u+32)%t.length)),0===u&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,u>=0&&(i=i+1640531527|0,o=0==(e=c[127&u]^=r+i)?o+1:0);for(o>=128&&(c[127&(t&&t.length||0)]=-1),o=127,u=512;u>0;--u)r=c[o+34&127],e=c[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,c[o]=r^e;n.w=i,n.X=c,n.i=o}(t,n)}function o(n,t){return t.i=n.i,t.w=n.w,t.X=n.X.slice(),t}function u(n,t){null==n&&(n=+new Date);var e=new r(n),u=t&&t.state,i=function(){return(e.next()>>>0)/4294967296};return i.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},i.int32=e.next,i.quick=i,u&&(u.X&&o(u,e),i.state=function(){return o(e,{})}),i}t&&t.exports?t.exports=u:e&&e.amd?e(function(){return u}):this.xor4096=u}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"yIlK":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,c=function(){return(e.next()>>>0)/4294967296};return c.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},c.int32=e.next,c.quick=c,u&&("object"==typeof u&&r(u,e),c.state=function(){return r(e,{})}),c}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.tychei=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"D1cN":[function(require,module,exports) {
var global = arguments[3];
var define;
var r,n=arguments[3];!function(n,t){var e,o=this,u=256,i=6,a="random",c=t.pow(u,i),f=t.pow(2,52),s=2*f,l=u-1;function p(r,l,p){var m=[],v=h(function r(n,t){var e,o=[],u=typeof n;if(t&&"object"==u)for(e in n)try{o.push(r(n[e],t-1))}catch(i){}return o.length?o:"string"==u?n:n+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[r,d(n)]:null==r?function(){try{var r;return e&&(r=e.randomBytes)?r=r(u):(r=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(r)),d(r)}catch(a){var t=o.navigator,i=t&&t.plugins;return[+new Date,o,i,o.screen,d(n)]}}():r,3),m),j=new g(m),S=function(){for(var r=j.g(i),n=c,t=0;r<f;)r=(r+t)*u,n*=u,t=j.g(1);for(;r>=s;)r/=2,n/=2,t>>>=1;return(r+t)/n};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,h(d(j.S),n),(l.pass||p||function(r,n,e,o){return o&&(o.S&&y(o,j),r.state=function(){return y(j,{})}),e?(t[a]=r,n):r})(S,v,"global"in l?l.global:this==t,l.state)}function g(r){var n,t=r.length,e=this,o=0,i=e.i=e.j=0,a=e.S=[];for(t||(r=[t++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=l&i+r[o%t]+(n=a[o])],a[i]=n;(e.g=function(r){for(var n,t=0,o=e.i,i=e.j,a=e.S;r--;)n=a[o=l&o+1],t=t*u+a[l&(a[o]=a[i=l&i+n])+(a[i]=n)];return e.i=o,e.j=i,t})(u)}function y(r,n){return n.i=r.i,n.j=r.j,n.S=r.S.slice(),n}function h(r,n){for(var t,e=r+"",o=0;o<e.length;)n[l&o]=l&(t^=19*n[l&o])+e.charCodeAt(o++);return d(n)}function d(r){return String.fromCharCode.apply(0,r)}if(t["seed"+a]=p,h(t.random(),n),"object"==typeof module&&module.exports){module.exports=p;try{e=require("crypto")}catch(m){}}else"function"==typeof r&&r.amd&&r(function(){return p})}([],Math);
},{"crypto":"sC8V"}],"Kwju":[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":"uCqK","./lib/xor128":"w3Ll","./lib/xorwow":"OwKO","./lib/xorshift7":"OrVu","./lib/xor4096":"DrnH","./lib/tychei":"yIlK","./seedrandom":"D1cN"}],"jZqu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jarqueBeraNormalityTest=i,exports.expectArrayInMeanStdRange=h,exports.UniformRandom=exports.RandGamma=exports.MPRandGauss=void 0;var t=r(require("seedrandom")),e=require("../test_util");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var i=s?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=t[o]}return a.default=t,r&&r.set(t,a),a}class a{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=t.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,a,s;do{s=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=a;class s{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=t.alea(o.toString()),this.randn=new a(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-s+Math.log(s)),(a=this.randu())<e||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}exports.RandGamma=s;class o{constructor(e=0,n=1,r,a){if(this.canReturnFloat=(()=>null==this.dtype||"float32"===this.dtype),this.min=e,this.range=n-e,this.dtype=r,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=t.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function i(t){const e=t.length,n=c(t),r=d(t),a=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(a>5.991)throw new Error(`Invalid p-value for JB: ${a}`)}function h(t,n,r,a){null==a&&(a=(0,e.testEpsilon)());const s=l(t);(0,e.expectNumbersClose)(s,n,a),(0,e.expectNumbersClose)(u(t,s),r,a)}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function u(t,e){let n=0;for(let r=0;r<t.length;r++){const a=t[r]-e;n+=a*a}return Math.sqrt(n/t.length)}function d(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,4)}return 1/n*a/Math.pow(1/n*r,2)}function c(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,3)}return 1/n*a/Math.pow(1/(n-1)*r,1.5)}exports.UniformRandom=o;
},{"seedrandom":"Kwju","../test_util":"ip5I"}],"fM99":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomGamma=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function a(r,a,o=1,n="float32",u){if(null==o&&(o=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const l=new t.RandGamma(a,o,n,u),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const o=(0,r.op)({randomGamma_:a});exports.randomGamma=o;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"gSkF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomNormal=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function t(r,t=0,n=1,a,u){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const l=new o.MPRandGauss(t,n,a,!1,u),s=(0,e.buffer)(r,a);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const n=(0,r.op)({randomNormal_:t});exports.randomNormal=n;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"yl8A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomUniform=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function n(r,n=0,t=1,u="float32",i){const a=(0,e.buffer)(r,u),f=new o.UniformRandom(n,t,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=f.nextValue();return a.toTensor()}const t=(0,r.op)({randomUniform_:n});exports.randomUniform=t;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"gc29":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=t;var e=require("../engine"),r=require("../kernel_names");function t(t,n,o=1,s="float32"){if(0===o)throw new Error("Cannot have a step of zero");const a={start:t,stop:n,step:o,dtype:s};return e.ENGINE.runKernel(r.Range,{},a)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"cKEu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={input:(0,n.convertToTensor)(t,"input","real")};return e.ENGINE.runKernel(r.Real,o)}const i=(0,t.op)({real_:o});exports.real=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"w0Wv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocal=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function c(n){const c={x:(0,o.convertToTensor)(n,"x","reciprocal")};return e.ENGINE.runKernel(r.Reciprocal,c)}const i=(0,n.op)({reciprocal_:c});exports.reciprocal=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"SJP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu")};return e.ENGINE.runKernel(r.Relu,u)}const t=(0,o.op)({relu_:u});exports.relu=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"MNkg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu6")};return e.ENGINE.runKernel(r.Relu6,u)}const t=(0,o.op)({relu6_:u});exports.relu6=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"SxGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reverse")},i={dims:o};return e.ENGINE.runKernel(r.Reverse,t,i)}const t=(0,s.op)({reverse_:o});exports.reverse=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"dTCT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse1d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t){const o=(0,e.convertToTensor)(t,"x","reverse");return r.assert(1===o.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${o.rank}.`),(0,n.reverse)(o,0)}const s=(0,t.op)({reverse1d_:i});exports.reverse1d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"jAVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse2d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(2===u.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse2d_:i});exports.reverse2d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"fmHW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse3d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(3===u.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse3d_:i});exports.reverse3d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"CaS6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse4d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(4===u.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse4d_:i});exports.reverse4d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"J1Ke":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","round")};return e.ENGINE.runKernel(r.Round,u)}const t=(0,o.op)({round_:u});exports.round=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"XwKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrt=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","rsqrt")};return r.ENGINE.runKernel(e.Rsqrt,o)}const s=(0,n.op)({rsqrt_:o});exports.rsqrt=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Ay42":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scalar=t;var r=require("../util"),e=require("./tensor_ops_util");function t(t,a){if(((0,r.isTypedArray)(t)&&"string"!==a||Array.isArray(t))&&"complex64"!==a)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===a&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,e.makeTensor)(t,[],[],a)}
},{"../util":"P6nv","./tensor_ops_util":"m0jF"}],"nLmU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","selu")};return e.ENGINE.runKernel(r.Selu,u)}const s=(0,o.op)({selu_:u});exports.selu=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"M7Hy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.separableConv2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=require("./depthwise_conv2d"),o=require("./operation"),s=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function p(o,a,i,p,u,l=[1,1],d="NHWC"){const b=(0,e.convertToTensor)(o,"x","separableConv2d"),f=(0,e.convertToTensor)(a,"depthwiseFilter","separableConv2d"),v=(0,e.convertToTensor)(i,"pointwiseFilter","separableConv2d");let c=b,h=!1;if(3===b.rank&&(h=!0,c=(0,s.reshape)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");r.assert(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),r.assert(4===f.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(4===v.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(1===v.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${v.shape[0]}.`),r.assert(1===v.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${v.shape[1]}.`);const C=f.shape[2],k=f.shape[3];r.assert(v.shape[2]===C*k,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${C*k}, `+`but got ${v.shape[2]}.`);const w=(0,n.depthwiseConv2d)(c,f,p,u,d,l),y=(0,t.conv2d)(w,v,1,"valid",d);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=(0,o.op)({separableConv2d_:p});exports.separableConv2d=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./conv2d":"oJQk","./depthwise_conv2d":"Kahd","./operation":"JtaO","./reshape":"QI4k"}],"cgP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setdiff1dAsync=void 0;var e=require("../tensor"),t=require("../tensor_util_env"),r=o(require("../util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}async function s(n,o){const s=(0,t.convertToTensor)(n,"x","setdiff1d"),a=(0,t.convertToTensor)(o,"y","setdiff1d");r.assert(s.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${a.dtype}).`),r.assert(1===s.rank,()=>`x should be 1D tensor, but got x (${s.shape}).`),r.assert(1===a.rank,()=>`y should be 1D tensor, but got y (${a.shape}).`);const u=await s.data(),f=await a.data(),i=new Set(f);let d=0;for(let e=0;e<u.length;e++)i.has(u[e])||d++;const p=new e.TensorBuffer([d],s.dtype),c=new e.TensorBuffer([d],"int32");for(let e=0,t=0;e<u.length;e++)i.has(u[e])||(p.values[t]=u[e],c.values[t]=e,t++);return[p.toTensor(),c.toTensor()]}const a=s;exports.setdiff1dAsync=a;
},{"../tensor":"DTHt","../tensor_util_env":"c6yR","../util":"P6nv"}],"cGq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sign")};return e.ENGINE.runKernel(r.Sign,o)}const s=(0,i.op)({sign_:o});exports.sign=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"AdWB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sin")};return e.ENGINE.runKernel(r.Sin,o)}const s=(0,i.op)({sin_:o});exports.sin=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"fN3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sinh")};return e.ENGINE.runKernel(r.Sinh,o)}const s=(0,i.op)({sinh_:o});exports.sinh=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lQVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice1d");return r.assert(1===u.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,[o],[i])}const s=(0,t.op)({slice1d_:u});exports.slice1d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"r8xQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice2d");return r.assert(2===u.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice2d_:u});exports.slice2d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"jraI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice3d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice3d");return r.assert(3===u.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice3d_:u});exports.slice3d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"r60P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice4d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice4d");return r.assert(4===u.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice4d_:u});exports.slice4d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"xLGH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t,n=-1){const s=(0,r.convertToTensor)(t,"logits","softmax","float32");if(-1===n&&(n=s.rank-1),n!==s.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${s.rank} and dim was ${n}`);const a={logits:s},i={dim:n};return e.ENGINE.runKernel(o.Softmax,a,i)}const s=(0,t.op)({softmax_:n});exports.softmax=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"e6Hs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),o=require("../operation");function n(o){(0,r.assert)("complex64"===o.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${o.dtype}.`);const n={input:o};return e.ENGINE.runKernel(t.FFT,n)}const u=(0,o.op)({fft_:n});exports.fft=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../util":"P6nv","../operation":"JtaO"}],"PxKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),i=require("../operation");function o(i){(0,r.assert)("complex64"===i.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${i.dtype}.`);const o={input:i};return e.ENGINE.runKernel(t.IFFT,o)}const n=(0,i.op)({ifft_:o});exports.ifft=n;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../util":"P6nv","../operation":"JtaO"}],"gr1H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.irfft=void 0;var e=require("../complex"),r=require("../concat"),s=require("../imag"),i=require("../mul"),a=require("../operation"),t=require("../real"),c=require("../reshape"),o=require("../reverse"),p=require("../scalar"),u=require("../slice"),l=require("./ifft");function f(a){const f=a.shape[a.shape.length-1],n=a.size/f;let h;if(f<=2){const e=(0,c.reshape)(a,[n,f]);h=(0,l.ifft)(e)}else{const q=[n,2*(f-1)],m=(0,c.reshape)((0,t.real)(a),[n,f]),v=(0,c.reshape)((0,s.imag)(a),[n,f]),x=(0,o.reverse)((0,u.slice)(m,[0,1],[n,f-2]),1),d=(0,i.mul)((0,o.reverse)((0,u.slice)(v,[0,1],[n,f-2]),1),(0,p.scalar)(-1)),g=(0,r.concat)([m,x],1),_=(0,r.concat)([v,d],1),b=(0,c.reshape)((0,e.complex)(g,_),[q[0],q[1]]);h=(0,l.ifft)(b)}if(h=(0,t.real)(h),3===a.rank&&0!==a.shape[0]){const e=h,r=a.shape[0];h=(0,c.reshape)(h,[r,h.shape[0]/r,h.shape[1]]),e.dispose()}return h}const n=(0,a.op)({irfft_:f});exports.irfft=n;
},{"../complex":"Iowv","../concat":"dDdq","../imag":"C5d3","../mul":"k2PI","../operation":"JtaO","../real":"cKEu","../reshape":"QI4k","../reverse":"SxGN","../scalar":"Ay42","../slice":"zP07","./ifft":"PxKB"}],"VA1I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),i=require("./operation");function n(i,n,s=0){const o={x:(0,t.convertToTensor)(i,"x","split")},p={numOrSizeSplits:n,axis:s};return e.ENGINE.runKernel(r.SplitV,o,p)}const s=(0,i.op)({split_:n});exports.split=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"AYvX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rfft=void 0;var e=require("../../util"),r=require("../complex"),t=require("../concat"),s=require("../imag"),l=require("../operation"),p=require("../real"),a=require("../reshape"),i=require("../slice"),o=require("../split"),h=require("../zeros"),u=require("../zeros_like"),n=require("./fft");function f(l,f){(0,e.assert)("float32"===l.dtype,()=>`The dtype for rfft() must be real value but got ${l.dtype}`);let c=l.shape[l.shape.length-1];const q=l.size/c;let g;if(null!=f&&f<c){const e=l.shape.map(e=>0),r=l.shape.map(e=>e);r[l.shape.length-1]=f,g=(0,i.slice)(l,e,r),c=f}else if(null!=f&&f>c){const e=l.shape.map(e=>e);e[l.shape.length-1]=f-c,g=(0,t.concat)([l,(0,h.zeros)(e)],l.shape.length-1),c=f}else g=l;const m=(0,u.zerosLike)(g),d=(0,a.reshape)((0,r.complex)(g,m),[q,c]),x=(0,n.fft)(d),z=Math.floor(c/2)+1,v=(0,p.real)(x),y=(0,s.imag)(x),_=(0,o.split)(v,[z,c-z],v.shape.length-1),b=(0,o.split)(y,[z,c-z],y.shape.length-1),k=g.shape.slice();return k[g.shape.length-1]=z,(0,a.reshape)((0,r.complex)(_[0],b[0]),k)}const c=(0,l.op)({rfft_:f});exports.rfft=c;
},{"../../util":"P6nv","../complex":"Iowv","../concat":"dDdq","../imag":"C5d3","../operation":"JtaO","../real":"cKEu","../reshape":"QI4k","../slice":"zP07","../split":"VA1I","../zeros":"R5fo","../zeros_like":"PDcB","./fft":"e6Hs"}],"iJpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrt=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","sqrt")};return e.ENGINE.runKernel(r.Sqrt,o)}const s=(0,n.op)({sqrt_:o});exports.sqrt=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"gsmP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifference=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),s=require("../tensor_util_env"),t=require("./broadcast_util"),a=require("./operation");function o(a,o){let i=(0,s.convertToTensor)(a,"a","squaredDifference"),u=(0,s.convertToTensor)(o,"b","squaredDifference");[i,u]=(0,n.makeTypesMatch)(i,u),(0,t.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.SquaredDifference,c,{})}const i=(0,a.op)({squaredDifference_:o});exports.squaredDifference=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"ZVMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeeze=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./operation"),o=require("./reshape");function t(s,t){const u=(0,e.convertToTensor)(s,"x","squeeze");return(0,o.reshape)(u,(0,r.squeezeShape)(u.shape,t).newShape)}const u=(0,s.op)({squeeze_:t});exports.squeeze=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"TWBn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function u(o,s=0){const a=(0,r.convertToTensorArray)(o,"tensors","stack","string_or_numeric");n.assert(a.length>=1,()=>"Pass at least one tensor to tf.stack"),a.length>0&&n.assert(s<=a[0].rank,()=>"Axis must be <= rank of the tensor");const u=a,i={axis:s};return e.ENGINE.runKernel(t.Pack,u,i)}const i=(0,o.op)({stack_:u});exports.stack=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"e2o4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o=0){const s={x:(0,t.convertToTensor)(n,"x","step")},p={alpha:o};return e.ENGINE.runKernel(r.Step,s,p)}const s=(0,n.op)({step_:o});exports.step=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Q58L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),s=require("./operation");function n(s,n,t,d,o=0,l=0,c=0,u=0,a=0){const k={x:(0,i.convertToTensor)(s,"x","stridedSlice")},p={begin:n,end:t,strides:d,beginMask:o,endMask:l,ellipsisMask:c,newAxisMask:u,shrinkAxisMask:a};return e.ENGINE.runKernel(r.StridedSlice,k,p)}const t=(0,s.op)({stridedSlice_:n});exports.stridedSlice=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"DosY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tan")};return e.ENGINE.runKernel(r.Tan,o)}const i=(0,t.op)({tan_:o});exports.tan=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pBg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor1d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o){(0,r.assertNonNull)(n);const s=(0,e.inferShape)(n,o);if(1!==s.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,t.makeTensor)(n,null,s,o)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"WnBr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor2d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&2!==o.length)throw new Error("tensor2d() requires shape to have two numbers");const u=(0,e.inferShape)(n,s);if(2!==u.length&&1!==u.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"VxHJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor4d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&4!==o.length)throw new Error("tensor4d() requires shape to have four numbers");const u=(0,e.inferShape)(n,s);if(4!==u.length&&1!==u.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"qXmw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor5d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&5!==o.length)throw new Error("tensor5d() requires shape to have five numbers");const u=(0,e.inferShape)(n,s);if(5!==u.length&&1!==u.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"GISR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor6d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&6!==o.length)throw new Error("tensor6d() requires shape to have six numbers");const u=(0,e.inferShape)(n,s);if(6!==u.length&&1!==u.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return o=o||u,(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"GNrW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=require("./operation");function n(o,n=1,s=!0){const i=(0,t.convertToTensor)(o,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const p=i.shape[i.shape.length-1];if(n>p)throw new Error(`'k' passed to topk() must be <= the last dimension (${p}) `+`but got ${n}`);const u={x:i},a={k:n,sorted:s},[k,c]=e.ENGINE.runKernel(r.TopK,u,a);return{values:k,indices:c}}const s=(0,o.op)({topk_:n});exports.topk=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"njSi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncatedNormal=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function o(r,o=0,u=1,n,a){if(null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const l=new t.MPRandGauss(o,u,n,!0,a),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const u=(0,r.op)({truncatedNormal_:o});exports.truncatedNormal=u;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"FtQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("../util"),i=require("./operation");function t(i,t=0){const s=(0,n.convertToTensor)(i,"x","unique","string_or_numeric");(0,u.assert)(s.rank>0,()=>"The input tensor must be at least 1D");const o={x:s},a={axis:t},[q,c]=e.ENGINE.runKernel(r.Unique,o,a);return{values:q,indices:c}}const s=(0,i.op)({unique_:t});exports.unique=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"GWRE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=void 0;var e=require("../engine"),n=require("../kernel_names"),t=require("../tensor_util_env"),r=require("../util"),s=require("./operation");function o(s,o,u){const m=(0,t.convertToTensor)(s,"x","unsortedSegmentSum"),i=(0,t.convertToTensor)(o,"segmentIds","unsortedSegmentSum","int32");(0,r.assert)((0,r.isInt)(u),()=>"numSegments must be of dtype int");const S={x:m,segmentIds:i},d={numSegments:u};return e.ENGINE.runKernel(n.UnsortedSegmentSum,S,d)}const u=(0,s.op)({unsortedSegmentSum_:o});exports.unsortedSegmentSum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"JDMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unstack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(o,u=0){const i=(0,r.convertToTensor)(o,"x","unstack","string_or_numeric");n.assert(u>=-i.shape.length&&u<i.shape.length,()=>`Axis = ${u} is not in [-${i.shape.length}, ${i.shape.length})`);const a={value:i},s={axis:u};return e.ENGINE.runKernel(t.Unpack,a,s)}const s=(0,o.op)({unstack_:a});exports.unstack=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"oIio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=r;var e=require("../engine");function r(r,t=!0,a,i){return e.ENGINE.makeVariable(r,t,a,i)}
},{"../engine":"Nc3Y"}],"tgEp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereImpl=t;var e=require("../ops/buffer");function t(t,r){const n=[];for(let e=0;e<r.length;e++)r[e]&&n.push(e);const o=(0,e.buffer)(t,"int32"),s=(0,e.buffer)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=o.indexToLoc(n[e]),l=e*t.length;s.values.set(r,l)}return s.toTensor()}
},{"../ops/buffer":"WyiN"}],"md2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereAsync=void 0;var e=require("../backends/where_impl"),r=require("../tensor_util_env");async function o(o){const s=(0,r.convertToTensor)(o,"condition","whereAsync","bool"),n=await s.data(),t=(0,e.whereImpl)(s.shape,n);return o!==s&&s.dispose(),t}const s=o;exports.whereAsync=s;
},{"../backends/where_impl":"tgEp","../tensor_util_env":"c6yR"}],"hPEM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanMaskAsync=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./gather"),s=require("./reshape"),o=require("./squeeze"),n=require("./where_async");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(s,n,i):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}async function c(a,i,c){const u=(0,e.convertToTensor)(a,"tensor","boolMask"),p=(0,e.convertToTensor)(i,"mask","boolMask","bool"),l=null==c?0:c,f=p.rank,h=u.shape;r.assert(f>0,()=>"mask cannot be scalar"),r.assertShapesMatch(h.slice(l,l+f),p.shape,"mask's shape must match the first K dimensions of tensor's shape,");let d=1;for(let e=l;e<l+f;e++)d*=h[e];const y=h.slice(0,l).concat([d],h.slice(l+f)),b=(0,s.reshape)(u,y),k=(0,s.reshape)(p,[-1]),v=await(0,n.whereAsync)(k),M=(0,o.squeeze)(v,[1]),O=(0,t.gather)(b,M,l);return a!==u&&u.dispose(),i!==p&&p.dispose(),M.dispose(),b.dispose(),k.dispose(),v.dispose(),O}const u=c;exports.booleanMaskAsync=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./gather":"ESvM","./reshape":"QI4k","./squeeze":"ZVMV","./where_async":"md2p"}],"M0Xr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualStrict=exports.lessStrict=exports.lessEqualStrict=exports.greaterStrict=exports.greaterEqualStrict=exports.equalStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=require("../util"),a=require("./equal"),s=require("./greater"),o=require("./greater_equal"),n=require("./less"),i=require("./less_equal"),c=require("./not_equal"),u=require("./operation");function l(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","notEqualStrict"),n=(0,r.convertToTensor)(s,"b","notEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in notEqualStrict: "),(0,c.notEqual)(o,n)}function p(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessStrict"),i=(0,r.convertToTensor)(s,"b","lessStrict");return(0,t.assertShapesMatch)(o.shape,i.shape,"Error in lessStrict: "),(0,n.less)(o,i)}function q(s,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(s,"a","equalStrict"),i=(0,r.convertToTensor)(o,"b","equalStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in equalStrict: "),(0,a.equal)(n,i)}function S(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessEqualStrict"),n=(0,r.convertToTensor)(s,"b","lessEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in lessEqualStrict: "),(0,i.lessEqual)(o,n)}function v(a,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterStrict"),i=(0,r.convertToTensor)(o,"b","greaterStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterStrict: "),(0,s.greater)(n,i)}function d(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterEqualStrict"),i=(0,r.convertToTensor)(s,"b","greaterEqualStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterEqualStrict: "),(0,o.greaterEqual)(n,i)}const h=(0,u.op)({equalStrict_:q});exports.equalStrict=h;const E=(0,u.op)({greaterEqualStrict_:d});exports.greaterEqualStrict=E;const T=(0,u.op)({greaterStrict_:v});exports.greaterStrict=T;const b=(0,u.op)({lessEqualStrict_:S});exports.lessEqualStrict=b;const f=(0,u.op)({lessStrict_:p});exports.lessStrict=f;const g=(0,u.op)({notEqualStrict_:l});exports.notEqualStrict=g;
},{"../globals":"GWnL","../tensor_util_env":"c6yR","../util":"P6nv","./equal":"WG94","./greater":"QdS7","./greater_equal":"Dbo2","./less":"Ndy5","./less_equal":"FvS1","./not_equal":"jVu5","./operation":"JtaO"}],"V7h5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subStrict=exports.squaredDifferenceStrict=exports.powStrict=exports.mulStrict=exports.modStrict=exports.minimumStrict=exports.maximumStrict=exports.divStrict=exports.addStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=v(require("../util")),o=require("./add"),i=require("./div"),n=require("./maximum"),a=require("./minimum"),s=require("./mod"),c=require("./mul"),u=require("./operation"),p=require("./pow"),d=require("./squared_difference"),m=require("./sub");function f(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:r})(e)}function v(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f(r);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,t&&t.set(e,o),o}function S(i,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(i,"a","addStrict"),s=(0,r.convertToTensor)(n,"b","addStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in addStrict: "),(0,o.add)(a,s)}function h(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","subStrict"),a=(0,r.convertToTensor)(i,"b","subStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in subStrict: "),(0,m.sub)(n,a)}function l(r,o){return(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future"),t.assertShapesMatch(r.shape,o.shape,"Error in powStrict: "),(0,p.pow)(r,o)}function b(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","mul"),a=(0,r.convertToTensor)(i,"b","mul");return t.assertShapesMatch(n.shape,a.shape,"Error in multiplyStrict: "),(0,c.mul)(n,a)}function T(o,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","div"),s=(0,r.convertToTensor)(n,"b","div");return t.assertShapesMatch(a.shape,s.shape,"Error in divideStrict: "),(0,i.div)(a,s)}function x(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","modStrict"),a=(0,r.convertToTensor)(i,"b","modStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in modStrict: "),(0,s.mod)(n,a)}function q(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","minimumStrict"),s=(0,r.convertToTensor)(i,"b","minimumStrict");return t.assertShapesMatch(n.shape,s.shape,"Error in minimumStrict: "),(0,a.minimum)(n,s)}function w(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","maximumStrict"),s=(0,r.convertToTensor)(i,"b","maximumStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in maximumStrict: "),(0,n.maximum)(a,s)}function _(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","squaredDifferenceStrict"),a=(0,r.convertToTensor)(i,"b","squaredDifferenceStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in squaredDifferenceStrict: "),(0,d.squaredDifference)(n,a)}const M=(0,u.op)({addStrict_:S});exports.addStrict=M;const W=(0,u.op)({divStrict_:T});exports.divStrict=W;const y=(0,u.op)({maximumStrict_:w});exports.maximumStrict=y;const D=(0,u.op)({minimumStrict_:q});exports.minimumStrict=D;const E=(0,u.op)({modStrict_:x});exports.modStrict=E;const O=(0,u.op)({mulStrict_:b});exports.mulStrict=O;const j=(0,u.op)({powStrict_:l});exports.powStrict=j;const P=(0,u.op)({squaredDifferenceStrict_:_});exports.squaredDifferenceStrict=P;const g=(0,u.op)({subStrict_:h});exports.subStrict=g;
},{"../globals":"GWnL","../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./div":"D8Fc","./maximum":"X5MV","./minimum":"crIr","./mod":"lYF1","./mul":"k2PI","./operation":"JtaO","./pow":"vt1B","./squared_difference":"gsmP","./sub":"dGex"}],"Twvf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.norm=void 0;var r=require("../tensor_util_env"),e=require("../util"),n=require("./abs"),t=d(require("./axis_util")),i=require("./max"),u=require("./min"),a=require("./operation"),o=require("./pow"),s=require("./reshape"),f=require("./scalar"),l=require("./sqrt"),p=require("./square"),c=require("./sum");function m(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(m=function(r){return r?n:e})(r)}function d(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var n=m(e);if(n&&n.has(r))return n.get(r);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=i?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,n&&n.set(r,t),t}function q(n,i="euclidean",u=null,a=!1){const o=b(n=(0,r.convertToTensor)(n,"x","norm"),i,u);let f=o.shape;if(a){const r=(0,e.parseAxisParam)(u,n.shape);f=t.expandShapeToKeepDim(o.shape,r)}return(0,s.reshape)(o,f)}function b(r,e,t=null){if(0===r.rank)return(0,n.abs)(r);if(1!==r.rank&&null===t)return b((0,s.reshape)(r,[-1]),e,t);if(1===r.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===e)return(0,c.sum)((0,n.abs)(r),t);if(e===1/0)return(0,i.max)((0,n.abs)(r),t);if(e===-1/0)return(0,u.min)((0,n.abs)(r),t);if("euclidean"===e||2===e)return(0,l.sqrt)((0,c.sum)((0,o.pow)((0,n.abs)(r),(0,f.scalar)(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&2===t.length){if(1===e)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[0]),t[1]-1);if(e===1/0)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if(e===-1/0)return(0,u.min)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if("fro"===e||"euclidean"===e)return(0,l.sqrt)((0,c.sum)((0,p.square)(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const v=(0,a.op)({norm_:q});exports.norm=v;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./abs":"aE3W","./axis_util":"DsMP","./max":"iipD","./min":"w9We","./operation":"JtaO","./pow":"vt1B","./reshape":"QI4k","./scalar":"Ay42","./sqrt":"iJpu","./square":"mJRX","./sum":"ITAy"}],"HWJh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.movingAverage=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),t=p(require("../util")),n=require("./add"),o=require("./div"),i=require("./mul"),u=require("./operation"),a=require("./pow"),s=require("./scalar"),v=require("./sub");function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,c,p,l,f=!0){const g=(0,r.convertToTensor)(u,"v","movingAverage"),d=(0,r.convertToTensor)(c,"x","movingAverage"),y=(0,r.convertToTensor)(p,"decay","movingAverage");(0,e.assertTypesMatch)(g,d),t.assert(t.arraysEqual(g.shape,d.shape),()=>"Shape mismatch in v and x");const b=(0,s.scalar)(1),q=(0,v.sub)(b,y);let m=(0,i.mul)((0,v.sub)(d,g),q);if(f){t.assert(null!=l,()=>"When using zeroDebias: true, step is required.");const e=(0,r.convertToTensor)(l,"step","movingAverage");m=(0,o.div)(m,(0,v.sub)(b,(0,a.pow)(y,e)))}return(0,n.add)(g,m)}const f=(0,u.op)({movingAverage_:l});exports.movingAverage=f;
},{"../tensor_util":"fpST","../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./div":"D8Fc","./mul":"k2PI","./operation":"JtaO","./pow":"vt1B","./scalar":"Ay42","./sub":"dGex"}],"QGqq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation"),o=i(require("./scatter_nd_util"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(n,u,i){const a=(0,r.convertToTensor)(n,"indices","scatterND","int32"),c=(0,r.convertToTensor)(u,"updates","scatterND");o.validateInput(c,a,i);const s={indices:a,updates:c},p={shape:i};return e.ENGINE.runKernel(t.ScatterNd,s,p)}const c=(0,n.op)({scatterND_:a});exports.scatterND=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO","./scatter_nd_util":"H15o"}],"wfit":[function(require,module,exports) {
"use strict";function e(e,t,r,s){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(r.length!==o)throw new Error("outputShape has incorrect number of elements:,"+` ${r.length}, should be: ${o}.`);const n=t.size;if(0!==t.rank&&(1!==t.rank||n!==a))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${a}]`);if(t.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateInput=e;
},{}],"vYKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=void 0;var e=require("../engine"),r=require("../kernel_names"),t=a(require("../ops/sparse_to_dense_util")),n=require("../tensor_util_env"),s=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function u(s,o,a,u=0){const p=(0,n.convertToTensor)(s,"sparseIndices","sparseToDense","int32"),i=(0,n.convertToTensor)(o,"sparseValues","sparseToDense"),c=(0,n.convertToTensor)(u,"defaultValue","sparseToDense",i.dtype);t.validateInput(p,i,a,c);const l={sparseIndices:p,sparseValues:i,defaultValue:c},f={outputShape:a};return e.ENGINE.runKernel(r.SparseToDense,l,f)}const p=(0,s.op)({sparseToDense_:u});exports.sparseToDense=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../ops/sparse_to_dense_util":"wfit","../tensor_util_env":"c6yR","./operation":"JtaO"}],"UkmN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherND=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o){const i=(0,t.convertToTensor)(o,"indices","gatherND","int32"),s={params:(0,t.convertToTensor)(n,"x","gatherND"),indices:i};return e.ENGINE.runKernel(r.GatherNd,s)}const i=(0,n.op)({gatherND_:o});exports.gatherND=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"I4lK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNoiseShape=n;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,n&&n.set(e,u),u}function n(t,r){if(null==r)return t.shape.slice();if(e.arraysEqual(t.shape,r))return r;if(t.shape.length===r.length){const e=[];for(let n=0;n<t.shape.length;n++)null==r[n]&&null!=t.shape[n]?e.push(t.shape[n]):e.push(r[n]);return e}return r}
},{"../util":"P6nv"}],"sFBi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropout=void 0;var e=require("../tensor"),r=require("../tensor_util_env"),t=l(require("../util")),o=require("./add"),n=require("./div"),u=require("./dropout_util"),i=require("./floor"),a=require("./mul"),s=require("./operation"),f=require("./random_uniform");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function d(s,p,l,d){const c=(0,r.convertToTensor)(s,"x","dropout");if(t.assert("float32"===c.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${c.dtype} tensor instead.`),t.assert(p>=0&&p<1,()=>`rate must be a float in the range [0, 1), but got ${p}.`),0===p)return s instanceof e.Tensor?c.clone():c;const b=(0,u.getNoiseShape)(c,l),v=1-p,y=(0,n.div)((0,i.floor)((0,o.add)((0,f.randomUniform)(b,0,1,"float32",d),v)),v);return(0,a.mul)(c,y)}const c=(0,s.op)({dropout_:d});exports.dropout=c;
},{"../tensor":"DTHt","../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./div":"D8Fc","./dropout_util":"I4lK","./floor":"XD37","./mul":"k2PI","./operation":"JtaO","./random_uniform":"yl8A"}],"A6ms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enclosingPowerOfTwo=t,exports.cosineWindow=e;var o=require("./tensor1d");function t(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function e(t,e,r){const n=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+n-1);s[o]=e-r*Math.cos(a)}return(0,o.tensor1d)(s,"float32")}
},{"./tensor1d":"pBg9"}],"JOMU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inTopKAsync=void 0;var e=require("../tensor_util_env"),t=require("../util"),s=require("./tensor");async function r(r,n,o=1){const a=(0,e.convertToTensor)(r,"predictions","inTopK"),i=(0,e.convertToTensor)(n,"targets","inTopK");(0,t.assert)(a.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${a.rank}`),(0,t.assert)(a.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${a.rank} and targets rank ${i.rank}`),(0,t.assertShapesMatch)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const p=a.shape[a.shape.length-1];(0,t.assert)(o>0&&o<=p,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${p}), but got ${o}`);const h=await a.data(),c=await i.data(),[l,d]=[h.length/p,p],u=(0,t.getTypedArrayFromDType)("bool",l);for(let e=0;e<l;e++){const t=e*d,s=h.subarray(t,t+d),r=[];for(let e=0;e<s.length;e++)r.push({value:s[e],index:e});r.sort((e,t)=>t.value-e.value),u[e]=0;for(let n=0;n<o;n++)if(r[n].index===c[e]){u[e]=1;break}}return r!==a&&a.dispose(),n!==i&&i.dispose(),(0,s.tensor)(u,i.shape,"bool")}const n=r;exports.inTopKAsync=n;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor":"P2QC"}],"JjEd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=i(require("../util")),n=require("./operation"),o=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var p=o?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(n,i,p):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(n,a,i,p,s,u="NHWC",l){let c=n;3===n.rank&&(c=(0,o.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let d=a;3===d.rank&&(d=(0,o.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),t.assert(4===c.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${c.shape}.`),t.assert(4===d.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${d.shape}.`),t.assert(4===i.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${i}.`);const h="NHWC"===u?c.shape[3]:c.shape[1],f="NHWC"===u?d.shape[3]:d.shape[1];t.assert(h===i[2],()=>`Error in conv2dDerFilter: depth of input ${h}) must `+`match input depth in filter (${i[2]}.`),t.assert(f===i[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must `+`match output depth for filter (${i[3]}).`),null!=l&&t.assert(t.isInt(s),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${s}.`);const v={x:c,dy:d},b={strides:p,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:i};return e.ENGINE.runKernel(r.Conv2DBackpropFilter,v,b)}const s=(0,n.op)({conv2DBackpropFilter_:p});exports.conv2DBackpropFilter=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"mypO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFusedDyActivation=c,exports.getFusedBiasGradient=d,exports.applyActivation=y,exports.shouldFuse=void 0;var e=f(require("./broadcast_util")),r=require("./elu"),t=require("./leaky_relu"),u=require("./mul"),n=require("./prelu"),i=require("./relu"),o=require("./relu6"),l=require("./reshape"),a=require("./step"),s=require("./sum");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function f(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(u,i,o):u[i]=e[i]}return u.default=e,t&&t.set(e,u),u}function c(e,r,t){if(null==t||"linear"===t)return e;if("relu"===t)return(0,u.mul)(e,(0,a.step)(r));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function d(r,t){let u=t;const n=e.getReductionAxes(r.shape,t.shape);return n.length>0&&(u=(0,s.sum)(u,n)),(0,l.reshape)(u,r.shape)}function y(e,u,l,a){if("linear"===u)return e;if("relu"===u)return(0,i.relu)(e);if("elu"===u)return(0,r.elu)(e);if("relu6"===u)return(0,o.relu6)(e);if("prelu"===u)return(0,n.prelu)(e,l);if("leakyrelu"===u)return(0,t.leakyRelu)(e,a);throw new Error(`Unknown fused activation ${u}.`)}const h=(e,r)=>{return!(e>0)||"linear"===r};exports.shouldFuse=h;
},{"./broadcast_util":"Xh9J","./elu":"a7Il","./leaky_relu":"hUKE","./mul":"k2PI","./prelu":"mkuj","./relu":"SJP3","./relu6":"MNkg","./reshape":"QI4k","./step":"e2o4","./sum":"ITAy"}],"MWgE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),n=require("../../tensor_util"),a=require("../../tensor_util_env"),o=g(require("../../util")),s=require("../add"),i=g(require("../broadcast_util")),u=require("../conv2d"),d=require("../conv2d_backprop_filter"),p=require("../conv2d_backprop_input"),l=g(require("../conv_util")),c=require("../fused_util"),v=require("../operation"),f=require("../reshape");function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function g(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function b({x:v,filter:h,strides:g,pad:b,dataFormat:k="NHWC",dilations:y=[1,1],dimRoundingMode:m,bias:_,activation:q="linear",preluActivationWeights:E,leakyreluAlpha:D}){if(q=q||"linear",!1===(0,c.shouldFuse)(e.ENGINE.state.gradientDepth,q)){let e=(0,u.conv2d)(v,h,g,b,k,y,m);return null!=_&&(e=(0,s.add)(e,_)),(0,c.applyActivation)(e,q,E,D)}const O=(0,a.convertToTensor)(v,"x","conv2d"),F=(0,a.convertToTensor)(h,"filter","conv2d");let $=O,A=!1;3===O.rank&&(A=!0,$=(0,f.reshape)(O,[1,O.shape[0],O.shape[1],O.shape[2]])),o.assert(4===$.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${$.rank}.`),o.assert(4===F.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${F.rank}.`),null!=m&&o.assert(o.isInt(b),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${m} but got pad ${b}.`),o.assert($.shape[3]===F.shape[2],()=>`Error in conv2d: depth of input (${$.shape[3]}) must match `+`input depth for filter ${F.shape[2]}.`),o.assert(l.eitherStridesOrDilationsAreOne(g,y),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${g} and dilations '${y}'`),o.assert("NHWC"===k,()=>`Error in conv2d: got dataFormat of ${k} but only NHWC is currently supported.`);const G=l.computeConv2DInfo($.shape,F.shape,g,y,b,m);let M,N;null!=_&&(M=(0,a.convertToTensor)(_,"bias","fused conv2d"),[M]=(0,n.makeTypesMatch)(M,O),i.assertAndGetBroadcastShape(G.outShape,M.shape)),null!=E&&(N=(0,a.convertToTensor)(E,"prelu weights","fused conv2d"));const T=(e,r)=>{const[t,n,a,s]=r,i=(0,c.getFusedDyActivation)(e,a,q);o.assert(l.tupleValuesAreOne(y),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${y}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,i,t,g,b),(0,d.conv2DBackpropFilter)(n,i,t.shape,g,b)];if(null!=s){const e=(0,c.getFusedBiasGradient)(s,i);u.push(e)}return u},W={x:$,filter:F,bias:M,preluActivationWeights:N},j={strides:g,pad:b,dataFormat:k,dilations:y,dimRoundingMode:m,activation:q,leakyreluAlpha:D};if(null==_){return(0,r.customGrad)((r,n,a)=>{let o=e.ENGINE.runKernel(t.FusedConv2D,W,j);return a([n,r,o]),A&&(o=(0,f.reshape)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:T}})($,F)}return(0,r.customGrad)((r,n,a,o)=>{let s=e.ENGINE.runKernel(t.FusedConv2D,W,j);return o([n,r,s,a]),A&&(s=(0,f.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:T}})($,F,M)}const k=(0,v.op)({fusedConv2d_:b});exports.conv2d=k;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../conv2d":"oJQk","../conv2d_backprop_filter":"JjEd","../conv2d_backprop_input":"GLx7","../conv_util":"Evju","../fused_util":"mypO","../operation":"JtaO","../reshape":"QI4k"}],"pXLg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),p=require("./operation"),t=require("./reshape");function i(p,i,a,s,o,n=[1,1],d){let h=p;3===p.rank&&(h=(0,t.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));let l=i;3===l.rank&&(l=(0,t.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:h,dy:l},v={strides:s,pad:o,dimRoundingMode:d,dilations:n,filterShape:a};return e.ENGINE.runKernel(r.DepthwiseConv2dNativeBackpropFilter,u,v)}const a=(0,p.op)({depthwiseConv2dNativeBackpropFilter_:i});exports.depthwiseConv2dNativeBackpropFilter=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","./operation":"JtaO","./reshape":"QI4k"}],"mUFN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=void 0;var e=require("../engine"),p=require("../kernel_names"),r=require("./operation"),t=require("./reshape");function n(r,n,a,i,s,o=[1,1],d){let u=n,h=!1;3===n.rank&&(h=!0,u=(0,t.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));const v={dy:u,filter:a},c={strides:i,pad:s,dimRoundingMode:d,dilations:o,inputShape:r},l=e.ENGINE.runKernel(p.DepthwiseConv2dNativeBackpropInput,v,c);return h?(0,t.reshape)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const a=(0,r.op)({depthwiseConv2dNativeBackpropInput_:n});exports.depthwiseConv2dNativeBackpropInput=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","./operation":"JtaO","./reshape":"QI4k"}],"NlMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),i=require("../../tensor_util_env"),s=w(require("../../util")),a=require("../add"),o=w(require("../broadcast_util")),u=w(require("../conv_util")),d=require("../depthwise_conv2d"),p=require("../depthwise_conv2d_native_backprop_filter"),l=require("../depthwise_conv2d_native_backprop_input"),h=require("../fused_util"),c=require("../operation"),v=require("../reshape");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function g({x:c,filter:f,strides:w,pad:g,dataFormat:b="NHWC",dilations:_=[1,1],dimRoundingMode:k,bias:C,activation:m="linear",preluActivationWeights:y,leakyreluAlpha:q}){if(!1===(0,h.shouldFuse)(e.ENGINE.state.gradientDepth,m)){let e=(0,d.depthwiseConv2d)(c,f,w,g,b,_,k);return null!=C&&(e=(0,a.add)(e,C)),(0,h.applyActivation)(e,m,y,q)}const E=(0,i.convertToTensor)(c,"x","depthwiseConv2d"),O=(0,i.convertToTensor)(f,"filter","depthwiseConv2d");let D=E,F=!1;3===E.rank&&(F=!0,D=(0,v.reshape)(E,[1,E.shape[0],E.shape[1],E.shape[2]])),s.assert(4===D.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${D.rank}.`),s.assert(4===O.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${O.rank}.`),s.assert(D.shape[3]===O.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${D.shape[3]}) must match the inChannels dimension in `+`filter ${O.shape[2]}.`),null==_&&(_=[1,1]),s.assert(u.eitherStridesOrDilationsAreOne(w,_),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${w} and dilations '${_}'`),null!=k&&s.assert(s.isInt(g),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${k} but got pad ${g}.`);const A=u.computeConv2DInfo(D.shape,O.shape,w,_,g,k,!0);let G,M;null!=C&&(G=(0,i.convertToTensor)(C,"bias","fused conv2d"),[G]=(0,n.makeTypesMatch)(G,E),o.assertAndGetBroadcastShape(A.outShape,G.shape)),null!=y&&(M=(0,i.convertToTensor)(y,"prelu weights","fused depthwiseConv2d"));const N=(e,t)=>{s.assert(u.tupleValuesAreOne(_),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${_}'`);const[r,n,i,a]=t,o=(0,h.getFusedDyActivation)(e,i,m),d=(0,l.depthwiseConv2dNativeBackpropInput)(n.shape,o,r,w,g,_,k),c=(0,p.depthwiseConv2dNativeBackpropFilter)(n,o,r.shape,w,g,_,k);if(null!=a){return[d,c,(0,h.getFusedBiasGradient)(G,o)]}return[d,c]},T={x:D,filter:O,bias:G,preluActivationWeights:M},$={strides:w,pad:g,dataFormat:b,dilations:_,dimRoundingMode:k,activation:m,leakyreluAlpha:q};if(null==C){return(0,t.customGrad)((t,n,i)=>{let s=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,$);return i([n,t,s]),F&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:N}})(D,O)}return(0,t.customGrad)((t,n,i,s)=>{let a=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,$);return s([n,t,a,i]),F&&(a=(0,v.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}})(D,O,G)}const b=(0,c.op)({fusedDepthwiseConv2d_:g});exports.depthwiseConv2d=b;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../conv_util":"Evju","../depthwise_conv2d":"Kahd","../depthwise_conv2d_native_backprop_filter":"pXLg","../depthwise_conv2d_native_backprop_input":"mUFN","../fused_util":"mypO","../operation":"JtaO","../reshape":"QI4k"}],"jyJT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../../engine"),r=require("../../gradients"),a=require("../../kernel_names"),t=require("../../tensor_util"),s=require("../../tensor_util_env"),n=d(require("../../util")),u=require("../add"),o=d(require("../broadcast_util")),i=require("../fused_util"),l=require("../mat_mul"),p=require("../operation"),c=require("../reshape");function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:r})(e)}function d(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(r);if(a&&a.has(e))return a.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=s?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,a&&a.set(e,t),t}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:m,activation:M="linear",preluActivationWeights:k,leakyreluAlpha:v}){if(!1===(0,i.shouldFuse)(e.ENGINE.state.gradientDepth,M)){let e=(0,l.matMul)(p,h,d,f);return null!=m&&(e=(0,u.add)(e,m)),(0,i.applyActivation)(e,M,k,v)}let y=(0,s.convertToTensor)(p,"a","fused matMul"),g=(0,s.convertToTensor)(h,"b","fused matMul");[y,g]=(0,t.makeTypesMatch)(y,g);const b=d?y.shape[y.rank-2]:y.shape[y.rank-1],_=f?g.shape[g.rank-1]:g.shape[g.rank-2],q=d?y.shape[y.rank-1]:y.shape[y.rank-2],T=f?g.shape[g.rank-2]:g.shape[g.rank-1],$=y.shape.slice(0,-2),A=g.shape.slice(0,-2),E=n.sizeFromShape($),F=n.sizeFromShape(A);n.assert(y.rank>=2&&g.rank>=2&&y.rank===g.rank,()=>"Error in fused matMul: inputs must have the same rank of at "+`least 2, got ranks ${y.rank} and ${g.rank}.`),n.assert(n.arraysEqual($,A),()=>`Error in fused matMul: outer dimensions (${$}) and (`+`${A}) of Tensors with shapes ${y.shape} and `+`${g.shape} must match.`),n.assert(b===_,()=>`Error in fused matMul: inner shapes (${b}) and (`+`${_}) of Tensors with shapes ${y.shape} and `+`${g.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const O=y.shape.slice(0,-2).concat([q,T]),w=d?(0,c.reshape)(y,[E,b,q]):(0,c.reshape)(y,[E,q,b]),j=f?(0,c.reshape)(g,[F,T,_]):(0,c.reshape)(g,[F,_,T]);let G,N;null!=m&&(G=(0,s.convertToTensor)(m,"bias","fused matMul"),[G]=(0,t.makeTypesMatch)(G,y),o.assertAndGetBroadcastShape(O,G.shape)),null!=k&&(N=(0,s.convertToTensor)(k,"prelu weights","fused matMul"));const P=(e,r)=>{const[a,t,s,n]=r,u=(0,i.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,M);let o,p;if(d||f?!d&&f?(o=(0,l.matMul)(u,t,!1,!1),p=(0,l.matMul)(u,a,!0,!1)):d&&!f?(o=(0,l.matMul)(t,u,!1,!0),p=(0,l.matMul)(a,u,!1,!1)):(o=(0,l.matMul)(t,u,!0,!0),p=(0,l.matMul)(u,a,!0,!0)):(o=(0,l.matMul)(u,t,!1,!0),p=(0,l.matMul)(a,u,!0,!1)),null!=m){return[o,p,(0,i.getFusedBiasGradient)(n,u)]}return[o,p]},B={a:w,b:j,bias:G,preluActivationWeights:N},W={transposeA:d,transposeB:f,activation:M,leakyreluAlpha:v};if(null==m){return(0,r.customGrad)((r,t,s)=>{const n=e.ENGINE.runKernel(a._FusedMatMul,B,W);return s([r,t,n]),{value:(0,c.reshape)(n,O),gradFunc:P}})(w,j)}return(0,r.customGrad)((r,t,s,n)=>{const u=e.ENGINE.runKernel(a._FusedMatMul,B,W);return n([r,t,u,s]),{value:(0,c.reshape)(u,O),gradFunc:P}})(w,j,G)}const m=(0,p.op)({fusedMatMul_:f});exports.matMul=m;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../fused_util":"mypO","../mat_mul":"mMWq","../operation":"JtaO","../reshape":"QI4k"}],"nQCt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return e.conv2d}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return r.depthwiseConv2d}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return t.matMul}});var e=require("./fused/conv2d"),r=require("./fused/depthwise_conv2d"),t=require("./fused/mat_mul");
},{"./fused/conv2d":"MWgE","./fused/depthwise_conv2d":"NlMI","./fused/mat_mul":"jyJT"}],"lH5U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hammingWindow=void 0;var e=require("../operation"),i=require("../signal_ops_util");function o(e){return(0,i.cosineWindow)(e,.54,.46)}const n=(0,e.op)({hammingWindow_:o});exports.hammingWindow=n;
},{"../operation":"JtaO","../signal_ops_util":"A6ms"}],"BcoI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hannWindow=void 0;var e=require("../operation"),n=require("../signal_ops_util");function o(e){return(0,n.cosineWindow)(e,.5,.5)}const i=(0,e.op)({hannWindow_:o});exports.hannWindow=i;
},{"../operation":"JtaO","../signal_ops_util":"A6ms"}],"Qvnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.frame=void 0;var e=require("../concat"),r=require("../fill"),s=require("../operation"),t=require("../reshape"),i=require("../slice"),o=require("../tensor2d");function c(s,c,n,u=!1,l=0){let a=0;const f=[];for(;a+c<=s.size;)f.push((0,i.slice)(s,a,c)),a+=n;if(u)for(;a<s.size;){const t=a+c-s.size,o=(0,e.concat)([(0,i.slice)(s,a,c-t),(0,r.fill)([t],l)]);f.push(o),a+=n}return 0===f.length?(0,o.tensor2d)([],[0,c]):(0,t.reshape)((0,e.concat)(f),[f.length,c])}const n=(0,s.op)({frame_:c});exports.frame=n;
},{"../concat":"dDdq","../fill":"e6pp","../operation":"JtaO","../reshape":"QI4k","../slice":"zP07","../tensor2d":"WnBr"}],"yVfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stft=void 0;var e=require("../concat"),r=require("../mul"),t=require("../operation"),o=require("../signal_ops_util"),i=require("../slice"),n=require("../spectral/rfft"),s=require("./frame"),u=require("./hann_window");function c(t,c,f,l,a=u.hannWindow){null==l&&(l=(0,o.enclosingPowerOfTwo)(c));const p=(0,s.frame)(t,c,f),q=(0,r.mul)(p,a(c)),_=[];for(let e=0;e<p.shape[0];e++)_.push((0,n.rfft)((0,i.slice)(q,[e,0],[1,c]),l));return(0,e.concat)(_)}const f=(0,t.op)({stft_:c});exports.stft=f;
},{"../concat":"dDdq","../mul":"k2PI","../operation":"JtaO","../signal_ops_util":"A6ms","../slice":"zP07","../spectral/rfft":"AYvX","./frame":"Qvnk","./hann_window":"BcoI"}],"p8Dt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function i(o,s,a,i,u="bilinear",p=0){const c=(0,t.convertToTensor)(o,"image","cropAndResize"),l=(0,t.convertToTensor)(s,"boxes","cropAndResize","float32"),b=(0,t.convertToTensor)(a,"boxInd","cropAndResize","int32"),d=l.shape[0];n.assert(4===c.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${c.rank}.`),n.assert(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] `+`but had shape ${l.shape}.`),n.assert(1===b.rank&&b.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] `+`but had shape ${l.shape}.`),n.assert(2===i.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${i.length}.`),n.assert(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),n.assert("bilinear"===u||"nearest"===u,()=>`method must be bilinear or nearest, but was ${u}`);const f={image:c,boxes:l,boxInd:b},h={method:u,extrapolationValue:p,cropSize:i};return e.ENGINE.runKernel(r.CropAndResize,f,h)}const u=(0,o.op)({cropAndResize_:i});exports.cropAndResize=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"JzVv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=u(require("../../util")),i=require("../operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=i?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function f(i){const o=(0,r.convertToTensor)(i,"image","flipLeftRight","float32");n.assert(4===o.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${o.rank}.`);const u={image:o};return e.ENGINE.runKernel(t.FlipLeftRight,u,{})}const a=(0,i.op)({flipLeftRight_:f});exports.flipLeftRight=a;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"GZBW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=o?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(n,a,f):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function f(o,i,a=0,f=.5){const u=(0,r.convertToTensor)(o,"image","rotateWithOffset","float32");n.assert(4===u.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${u.rank}.`);const s={image:u},c={radians:i,fillValue:a,center:f};return e.ENGINE.runKernel(t.RotateWithOffset,s,c)}const u=(0,o.op)({rotateWithOffset_:f});exports.rotateWithOffset=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"Pk0Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppSanityCheck=s;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(t=function(e){return e?s:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=t(r);if(s&&s.has(e))return s.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,s&&s.set(e,n),n}function s(t,r,s,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const u=t.shape[0];return s=Math.min(s,u),e.assert(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),e.assert(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),e.assert(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),e.assert(1===r.rank,()=>"scores must be a 1D tensor"),e.assert(r.shape[0]===u,()=>`scores has incompatible shape with boxes. Expected ${u}, `+`but was ${r.shape[0]}`),e.assert(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:s,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}
},{"../util":"P6nv"}],"KRSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),n=require("../nonmax_util"),s=require("../operation");function u(s,u,i,p=.5,t=Number.NEGATIVE_INFINITY){const a=(0,r.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,r.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,n.nonMaxSuppSanityCheck)(a,x,i,p,t),l={maxOutputSize:i=c.maxOutputSize,iouThreshold:p=c.iouThreshold,scoreThreshold:t=c.scoreThreshold};return e.ENGINE.runKernel(o.NonMaxSuppressionV3,{boxes:a,scores:x},l)}const i=(0,s.op)({nonMaxSuppression_:u});exports.nonMaxSuppression=i;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"vvmL":[function(require,module,exports) {
"use strict";function e(e,n,r){const o=t(e,n,r),c=o<0?-(o+1):o;e.splice(c,0,n)}function t(e,t,o){return r(e,t,o||n)}function n(e,t){return e>t?1:e<t?-1:0}function r(e,t,n){let r=0,o=e.length,c=0,s=!1;for(;r<o;){const u=n(t,e[c=r+(o-r>>>1)]);u>0?r=c+1:(o=c,s=!u)}return s?r:-r-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryInsert=e,exports.binarySearch=t;
},{}],"zkpa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Impl=n,exports.nonMaxSuppressionV4Impl=r,exports.nonMaxSuppressionV5Impl=t;var e=require("./non_max_suppression_util");function n(e,n,r,t,o){return s(e,n,r,t,o,0)}function r(e,n,r,t,o,a){return s(e,n,r,t,o,0,!1,a,!0)}function t(e,n,r,t,o,a){return s(e,n,r,t,o,a,!0)}function s(n,r,t,s,c,i,p=!1,x=!1,h=!1){const l=[];for(let e=0;e<r.length;e++)r[e]>c&&l.push({score:r[e],boxIndex:e,suppressBeginIndex:0});l.sort(u);const M=i>0?-.5/i:0,m=[],f=[];for(;m.length<t&&l.length>0;){const r=l.pop(),{score:t,boxIndex:i,suppressBeginIndex:p}=r;if(t<c)break;let x=!1;for(let e=m.length-1;e>=p;--e){const t=o(n,i,m[e]);if(t>=s){x=!0;break}if(r.score=r.score*a(s,M,t),r.score<=c)break}r.suppressBeginIndex=m.length,x||(r.score===t?(m.push(i),f.push(r.score)):r.score>c&&(0,e.binaryInsert)(l,r,u))}const d=m.length,I=t-d;x&&I>0&&(m.push(...new Array(I).fill(0)),f.push(...new Array(I).fill(0)));const b={selectedIndices:m};return p&&(b.selectedScores=f),h&&(b.validOutputs=d),b}function o(e,n,r){const t=e.subarray(4*n,4*n+4),s=e.subarray(4*r,4*r+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),u=Math.max(t[0],t[2]),c=Math.max(t[1],t[3]),i=Math.min(s[0],s[2]),p=Math.min(s[1],s[3]),x=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),l=(u-o)*(c-a),M=(x-i)*(h-p);if(l<=0||M<=0)return 0;const m=Math.max(o,i),f=Math.max(a,p),d=Math.min(u,x),I=Math.min(c,h),b=Math.max(d-m,0)*Math.max(I-f,0);return b/(l+M-b)}function a(e,n,r){const t=Math.exp(n*r*r);return r<=e?t:0}function u(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}
},{"./non_max_suppression_util":"vvmL"}],"eCHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,p=.5,u=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),c=(0,n.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),d=(0,s.nonMaxSuppSanityCheck)(a,c,i,p,u);i=d.maxOutputSize,p=d.iouThreshold,u=d.scoreThreshold;const x=await Promise.all([a.data(),c.data()]),l=x[0],_=x[1],{selectedIndices:S}=(0,e.nonMaxSuppressionV3Impl)(l,_,i,p,u);return a!==r&&a.dispose(),c!==t&&c.dispose(),(0,o.tensor1d)(S,"int32")}const t=r;exports.nonMaxSuppressionAsync=t;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../tensor1d":"pBg9"}],"Ym4G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScore=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../nonmax_util"),n=require("../operation");function i(n,i,t,u=.5,p=Number.NEGATIVE_INFINITY,c=0){const a=(0,r.convertToTensor)(n,"boxes","nonMaxSuppression"),S=(0,r.convertToTensor)(i,"scores","nonMaxSuppression"),x=(0,s.nonMaxSuppSanityCheck)(a,S,t,u,p,c),h={boxes:a,scores:S},l={maxOutputSize:t=x.maxOutputSize,iouThreshold:u=x.iouThreshold,scoreThreshold:p=x.scoreThreshold,softNmsSigma:c=x.softNmsSigma},d=e.ENGINE.runKernel(o.NonMaxSuppressionV5,h,l);return{selectedIndices:d[0],selectedScores:d[1]}}const t=(0,n.op)({nonMaxSuppressionWithScore_:i});exports.nonMaxSuppressionWithScore=t;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"q1EX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScoreAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,c=.5,p=Number.NEGATIVE_INFINITY,a=0){const u=(0,s.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),d=(0,s.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),l=(0,n.nonMaxSuppSanityCheck)(u,d,i,c,p,a);i=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,a=l.softNmsSigma;const x=await Promise.all([u.data(),d.data()]),S=x[0],m=x[1],{selectedIndices:_,selectedScores:T}=(0,e.nonMaxSuppressionV5Impl)(S,m,i,c,p,a);return u!==r&&u.dispose(),d!==t&&d.dispose(),{selectedIndices:(0,o.tensor1d)(_,"int32"),selectedScores:(0,o.tensor1d)(T)}}const t=r;exports.nonMaxSuppressionWithScoreAsync=t;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../tensor1d":"pBg9"}],"Su3I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPadded=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY,a=!1){const d=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(d,x,i,t,p,null),l={boxes:d,scores:x},S={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},T=e.ENGINE.runKernel(o.NonMaxSuppressionV4,l,S);return{selectedIndices:T[0],validOutputs:T[1]}}const i=(0,s.op)({nonMaxSuppressionPadded_:u});exports.nonMaxSuppressionPadded=i;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"KZ0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPaddedAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../scalar"),r=require("../tensor1d");async function t(t,i,a,u=.5,p=Number.NEGATIVE_INFINITY,d=!1){const c=(0,s.convertToTensor)(t,"boxes","nonMaxSuppressionAsync"),l=(0,s.convertToTensor)(i,"scores","nonMaxSuppressionAsync"),x=(0,n.nonMaxSuppSanityCheck)(c,l,a,u,p,null),_=x.maxOutputSize,v=x.iouThreshold,S=x.scoreThreshold,[T,m]=await Promise.all([c.data(),l.data()]),{selectedIndices:y,validOutputs:I}=(0,e.nonMaxSuppressionV4Impl)(T,m,_,v,S,d);return c!==t&&c.dispose(),l!==i&&l.dispose(),{selectedIndices:(0,r.tensor1d)(y,"int32"),validOutputs:(0,o.scalar)(I,"int32")}}const i=t;exports.nonMaxSuppressionPaddedAsync=i;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../scalar":"Ay42","../tensor1d":"pBg9"}],"XoGL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),t=o(require("../../util")),i=require("../operation"),a=require("../reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(t,a,o):t[a]=e[a]}return t.default=e,n&&n.set(e,t),t}function u(i,s,o=!1,u=!1){const l=(0,n.convertToTensor)(i,"images","resizeBilinear");t.assert(3===l.rank||4===l.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${l.rank}.`),t.assert(2===s.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${s}.`),t.assert(!1===u||!1===o,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let p=l,f=!1;3===l.rank&&(f=!0,p=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const[]=s,c={images:p},h={alignCorners:o,halfPixelCenters:u,size:s},g=e.ENGINE.runKernel(r.ResizeBilinear,c,h);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=(0,i.op)({resizeBilinear_:u});exports.resizeBilinear=l;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO","../reshape":"QI4k"}],"Lavm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),s=o(require("../../util")),n=require("../operation"),a=require("../reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,t&&t.set(e,s),s}function u(n,i,o=!1,u=!1){const p=(0,t.convertToTensor)(n,"images","resizeNearestNeighbor");s.assert(3===p.rank||4===p.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${p.rank}.`),s.assert(2===i.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${i}.`),s.assert("float32"===p.dtype||"int32"===p.dtype,()=>"`images` must have `int32` or `float32` as dtype"),s.assert(!1===u||!1===o,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let l=p,f=!1;3===p.rank&&(f=!0,l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));const[]=i,h={images:l},c={alignCorners:o,halfPixelCenters:u,size:i},g=e.ENGINE.runKernel(r.ResizeNearestNeighbor,h,c);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const p=(0,n.op)({resizeNearestNeighbor_:u});exports.resizeNearestNeighbor=p;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO","../reshape":"QI4k"}],"l61h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bandPart=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),a=require("../greater_equal"),t=require("../less_equal"),n=require("../logical_and"),s=require("../operation"),u=require("../range"),o=require("../reshape"),i=require("../scalar"),l=require("../stack"),b=require("../sub"),c=require("../unstack"),p=require("../where"),q=require("../zeros");function d(s,d,g){(0,r.assert)(d%1==0,()=>`bandPart(): numLower must be an integer, got ${d}.`),(0,r.assert)(g%1==0,()=>`bandPart(): numUpper must be an integer, got ${g}.`);const h=(0,e.convertToTensor)(s,"a","bandPart");(0,r.assert)(h.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${h.rank}.`);const m=h.shape,[P,w]=h.shape.slice(-2);if(!(d<=P))throw new Error(`bandPart(): numLower (${d})`+` must not be greater than the number of rows (${P}).`);if(!(g<=w))throw new Error(`bandPart(): numUpper (${g})`+` must not be greater than the number of columns (${w}).`);d<0&&(d=P),g<0&&(g=w);const _=(0,o.reshape)((0,u.range)(0,P,1,"int32"),[-1,1]),k=(0,u.range)(0,w,1,"int32"),$=(0,b.sub)(_,k),f=(0,n.logicalAnd)((0,t.lessEqual)($,(0,i.scalar)(+d,"int32")),(0,a.greaterEqual)($,(0,i.scalar)(-g,"int32"))),v=(0,q.zeros)([P,w],h.dtype);return(0,o.reshape)((0,l.stack)((0,c.unstack)((0,o.reshape)(h,[-1,P,w])).map(e=>(0,p.where)(f,e,v))),m)}const g=(0,s.op)({bandPart_:d});exports.bandPart=g;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../greater_equal":"Dbo2","../less_equal":"FvS1","../logical_and":"lYzt","../operation":"JtaO","../range":"gc29","../reshape":"QI4k","../scalar":"Ay42","../stack":"TWBn","../sub":"dGex","../unstack":"JDMu","../where":"BsuI","../zeros":"R5fo"}],"IagJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gramSchmidt=void 0;var e=require("../../engine"),r=require("../../util"),t=require("../div"),s=require("../mul"),i=require("../norm"),u=require("../operation"),n=require("../split"),o=require("../squeeze"),l=require("../stack"),m=require("../sub"),a=require("../sum");function c(u){let c;if(Array.isArray(u)){c=!1,(0,r.assert)(null!=u&&u.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const e=u[0].shape[0];for(let t=1;t<u.length;++t)(0,r.assert)(u[t].shape[0]===e,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${u[t].shape[0]} vs. ${e})`)}else c=!0,u=(0,n.split)(u,u.shape[0],0).map(e=>(0,o.squeeze)(e,[0]));(0,r.assert)(u.length<=u[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${u.length}) exceeds `+`number of dimensions (${u[0].shape[0]}).`);const h=[],p=u;for(let r=0;r<u.length;++r)h.push(e.ENGINE.tidy(()=>{let e=p[r];if(r>0)for(let t=0;t<r;++t){const r=(0,s.mul)((0,a.sum)((0,s.mul)(h[t],e)),h[t]);e=(0,m.sub)(e,r)}return(0,t.div)(e,(0,i.norm)(e,"euclidean"))}));return c?(0,l.stack)(h,0):h}const h=(0,u.op)({gramSchmidt_:c});exports.gramSchmidt=h;
},{"../../engine":"Nc3Y","../../util":"P6nv","../div":"D8Fc","../mul":"k2PI","../norm":"Twvf","../operation":"JtaO","../split":"VA1I","../squeeze":"ZVMV","../stack":"TWBn","../sub":"dGex","../sum":"ITAy"}],"hSXe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qr=void 0;var e=require("../../engine"),r=require("../../globals"),s=require("../../util"),t=require("../clone"),u=require("../concat"),a=require("../div"),n=require("../eye"),i=require("../greater"),o=require("../mat_mul"),c=require("../mul"),l=require("../neg"),p=require("../norm"),h=require("../operation"),q=require("../reshape"),m=require("../slice"),d=require("../stack"),g=require("../sub"),b=require("../tensor2d"),k=require("../transpose"),M=require("../unstack"),f=require("../where");function v(e,r=!1){if((0,s.assert)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return y(e,r);{const s=e.shape.slice(0,e.shape.length-2).reduce((e,r)=>e*r),t=(0,M.unstack)((0,q.reshape)(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),u=[],a=[];return t.forEach(e=>{const[s,t]=y(e,r);u.push(s),a.push(t)}),[(0,q.reshape)((0,d.stack)(u,0),e.shape),(0,q.reshape)((0,d.stack)(a,0),e.shape)]}}function y(h,q=!1){return e.ENGINE.tidy(()=>{(0,s.assert)(2===h.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${h.shape.length}D Tensor.`);const d=h.shape[0],M=h.shape[1];let v=(0,n.eye)(d),y=(0,t.clone)(h);const E=(0,b.tensor2d)([[1]],[1,1]);let N=(0,t.clone)(E);const _=d>=M?M:d;for(let s=0;s<_;++s){const n=y,h=N,q=v;[N,y,v]=e.ENGINE.tidy(()=>{const e=(0,m.slice)(y,[s,s],[d-s,1]),r=(0,p.norm)(e),n=(0,m.slice)(y,[s,s],[1,1]),h=(0,f.where)((0,i.greater)(n,0),(0,b.tensor2d)([[-1]]),(0,b.tensor2d)([[1]])),q=(0,g.sub)(n,(0,c.mul)(h,r)),_=(0,a.div)(e,q);N=1===_.shape[0]?(0,t.clone)(E):(0,u.concat)([E,(0,m.slice)(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const x=(0,l.neg)((0,a.div)((0,o.matMul)(h,q),r)),w=(0,m.slice)(y,[s,0],[d-s,M]),D=(0,c.mul)(x,N),G=(0,k.transpose)(N);if(0===s)y=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));else{const e=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));y=(0,u.concat)([(0,m.slice)(y,[0,0],[s,M]),e],0)}const I=(0,k.transpose)(D),T=(0,m.slice)(v,[0,s],[d,v.shape[1]-s]);if(0===s)v=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));else{const e=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));v=(0,u.concat)([(0,m.slice)(v,[0,0],[d,s]),e],1)}return[N,y,v]}),(0,r.dispose)([n,h,q])}return!q&&d>M&&(v=(0,m.slice)(v,[0,0],[d,M]),y=(0,m.slice)(y,[0,0],[M,M])),[v,y]})}const E=(0,h.op)({qr_:v});exports.qr=E;
},{"../../engine":"Nc3Y","../../globals":"GWnL","../../util":"P6nv","../clone":"F06q","../concat":"dDdq","../div":"D8Fc","../eye":"HzEj","../greater":"QdS7","../mat_mul":"mMWq","../mul":"k2PI","../neg":"iGYA","../norm":"Twvf","../operation":"JtaO","../reshape":"QI4k","../slice":"zP07","../stack":"TWBn","../sub":"dGex","../tensor2d":"WnBr","../transpose":"uQkx","../unstack":"JDMu","../where":"BsuI"}],"LIoB":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reduction=void 0,exports.Reduction=e,function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(e||(exports.Reduction=e={}));
},{}],"SdDZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=void 0;var e=require("../../tensor_util_env"),r=require("../cast"),s=require("../div"),u=require("../loss_ops_utils"),o=require("../mean"),t=require("../mul"),i=require("../not_equal"),n=require("../ones"),c=require("../operation"),l=require("../scalar"),a=require("../sum");function d(c,d,m=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const _=(0,e.convertToTensor)(c,"losses","computeWeightedLoss");let p=null;null!=d&&(p=(0,e.convertToTensor)(d,"weights","computeWeightedLoss"));const q=null==p?_:(0,t.mul)(_,p);if(m===u.Reduction.NONE)return q;if(m===u.Reduction.SUM)return(0,a.sum)(q);if(m===u.Reduction.MEAN){if(null==p)return(0,o.mean)(q);{const e=_.size/p.size,r=(0,s.div)((0,a.sum)(q),(0,a.sum)(p));return e>1?(0,s.div)(r,(0,l.scalar)(e)):r}}if(m===u.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,s.div)((0,a.sum)(q),(0,l.scalar)(_.size));{const e=(0,t.mul)(p,(0,n.ones)(_.shape)),u=(0,r.cast)((0,a.sum)((0,i.notEqual)(e,(0,l.scalar)(0))),"float32");return(0,s.div)((0,a.sum)(q),u)}}throw Error(`Unknown reduction: ${m}`)}const m=(0,c.op)({computeWeightedLoss_:d});exports.computeWeightedLoss=m;
},{"../../tensor_util_env":"c6yR","../cast":"qqq3","../div":"D8Fc","../loss_ops_utils":"LIoB","../mean":"jwZo","../mul":"k2PI","../not_equal":"jVu5","../ones":"POxQ","../operation":"JtaO","../scalar":"Ay42","../sum":"ITAy"}],"sqiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absoluteDifference=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),o=require("../loss_ops_utils"),t=require("../operation"),i=require("../sub"),u=require("./compute_weighted_loss");function n(t,n,c,l=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const a=(0,e.convertToTensor)(t,"labels","absoluteDifference"),f=(0,e.convertToTensor)(n,"predictions","absoluteDifference");let b=null;null!=c&&(b=(0,e.convertToTensor)(c,"weights","absoluteDifference")),(0,r.assertShapesMatch)(a.shape,f.shape,"Error in absoluteDifference: ");const p=(0,s.abs)((0,i.sub)(a,f));return(0,u.computeWeightedLoss)(p,b,l)}const c=(0,t.op)({absoluteDifference_:n});exports.absoluteDifference=c;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../loss_ops_utils":"LIoB","../operation":"JtaO","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"dFeu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineDistance=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),i=require("../operation"),t=require("../scalar"),n=require("../sub"),c=require("../sum"),u=require("./compute_weighted_loss");function a(i,a,l,p,_=r.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","cosineDistance"),d=(0,e.convertToTensor)(a,"predictions","cosineDistance");let h=null;null!=p&&(h=(0,e.convertToTensor)(p,"weights","cosineDistance")),(0,s.assertShapesMatch)(q.shape,d.shape,"Error in cosineDistance: ");const v=(0,t.scalar)(1),D=(0,n.sub)(v,(0,c.sum)((0,o.mul)(q,d),l,!0));return(0,u.computeWeightedLoss)(D,h,_)}const l=(0,i.op)({cosineDistance_:a});exports.cosineDistance=l;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../mul":"k2PI","../operation":"JtaO","../scalar":"Ay42","../sub":"dGex","../sum":"ITAy","./compute_weighted_loss":"SdDZ"}],"kvcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hingeLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),t=require("../operation"),i=require("../relu"),u=require("../scalar"),n=require("../sub"),l=require("./compute_weighted_loss");function c(t,c,a,h=r.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,e.convertToTensor)(t,"labels","hingeLoss");const _=(0,e.convertToTensor)(c,"predictions","hingeLoss");let g=null;null!=a&&(g=(0,e.convertToTensor)(a,"weights","hingeLoss")),(0,s.assertShapesMatch)(p.shape,_.shape,"Error in hingeLoss: ");const q=(0,u.scalar)(1);p=(0,n.sub)((0,o.mul)((0,u.scalar)(2),p),q);const L=(0,i.relu)((0,n.sub)(q,(0,o.mul)(p,_)));return(0,l.computeWeightedLoss)(L,g,h)}const a=(0,t.op)({hingeLoss_:c});exports.hingeLoss=a;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../mul":"k2PI","../operation":"JtaO","../relu":"SJP3","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"VRHQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.huberLoss=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),u=require("../add"),o=require("../loss_ops_utils"),i=require("../minimum"),t=require("../mul"),n=require("../operation"),a=require("../scalar"),l=require("../square"),c=require("../sub"),b=require("./compute_weighted_loss");function h(n,h,q,p=1,_=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(n,"labels","huberLoss"),m=(0,e.convertToTensor)(h,"predictions","huberLoss");let L=null;null!=q&&(L=(0,e.convertToTensor)(q,"weights","huberLoss")),(0,r.assertShapesMatch)(d.shape,m.shape,"Error in huberLoss: ");const v=(0,a.scalar)(p),T=(0,s.abs)((0,c.sub)(m,d)),g=(0,i.minimum)(T,v),x=(0,c.sub)(T,g),E=(0,u.add)((0,t.mul)((0,a.scalar)(.5),(0,l.square)(g)),(0,t.mul)(v,x));return(0,b.computeWeightedLoss)(E,L,_)}const q=(0,n.op)({huberLoss_:h});exports.huberLoss=q;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../add":"ZDFV","../loss_ops_utils":"LIoB","../minimum":"crIr","../mul":"k2PI","../operation":"JtaO","../scalar":"Ay42","../square":"mJRX","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"R42n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),r=require("../log"),u=require("../loss_ops_utils"),l=require("../mul"),t=require("../neg"),i=require("../operation"),n=require("../scalar"),a=require("../sub"),c=require("./compute_weighted_loss");function g(i,g,d,p=1e-7,_=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","logLoss"),L=(0,e.convertToTensor)(g,"predictions","logLoss");let h=null;null!=d&&(h=(0,e.convertToTensor)(d,"weights","logLoss")),(0,s.assertShapesMatch)(q.shape,L.shape,"Error in logLoss: ");const v=(0,n.scalar)(1),T=(0,n.scalar)(p),b=(0,t.neg)((0,l.mul)(q,(0,r.log)((0,o.add)(L,T)))),m=(0,l.mul)((0,a.sub)(v,q),(0,r.log)((0,o.add)((0,a.sub)(v,L),T))),x=(0,a.sub)(b,m);return(0,c.computeWeightedLoss)(x,h,_)}const d=(0,i.op)({logLoss_:g});exports.logLoss=d;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../log":"vwHA","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"NOcW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanSquaredError=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),o=require("../loss_ops_utils"),s=require("../operation"),n=require("../squared_difference"),t=require("./compute_weighted_loss");function u(s,u,a,i=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(s,"labels","meanSquaredError"),c=(0,e.convertToTensor)(u,"predictions","meanSquaredError");let q=null;null!=a&&(q=(0,e.convertToTensor)(a,"weights","meanSquaredError")),(0,r.assertShapesMatch)(d.shape,c.shape,"Error in meanSquaredError: ");const l=(0,n.squaredDifference)(d,c);return(0,t.computeWeightedLoss)(l,q,i)}const a=(0,s.op)({meanSquaredError_:u});exports.meanSquaredError=a;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../operation":"JtaO","../squared_difference":"gsmP","./compute_weighted_loss":"SdDZ"}],"oaMf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidCrossEntropy=void 0;var r=require("../../tensor_util_env"),s=require("../../util"),e=require("../abs"),o=require("../add"),i=require("../exp"),t=require("../log1p"),n=require("../loss_ops_utils"),u=require("../mul"),l=require("../neg"),a=require("../operation"),p=require("../relu"),c=require("../scalar"),d=require("../sub"),g=require("./compute_weighted_loss");function m(n,a){const c=(0,r.convertToTensor)(n,"labels","sigmoidCrossEntropyWithLogits"),g=(0,r.convertToTensor)(a,"logits","sigmoidCrossEntropyWithLogits");(0,s.assertShapesMatch)(c.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");const m=(0,p.relu)(g),h=(0,u.mul)(g,c),q=(0,t.log1p)((0,i.exp)((0,l.neg)((0,e.abs)(g))));return(0,o.add)((0,d.sub)(m,h),q)}function h(e,i,t,l=0,a=n.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,r.convertToTensor)(e,"multiClassLabels","sigmoidCrossEntropy");const h=(0,r.convertToTensor)(i,"logits","sigmoidCrossEntropy");let q=null;if(null!=t&&(q=(0,r.convertToTensor)(t,"weights","sigmoidCrossEntropy")),(0,s.assertShapesMatch)(p.shape,h.shape,"Error in sigmoidCrossEntropy: "),l>0){const r=(0,c.scalar)(l),s=(0,c.scalar)(1),e=(0,c.scalar)(.5);p=(0,o.add)((0,u.mul)(p,(0,d.sub)(s,r)),(0,u.mul)(e,r))}const E=m(p,h);return(0,g.computeWeightedLoss)(E,q,a)}const q=(0,a.op)({sigmoidCrossEntropy_:h});exports.sigmoidCrossEntropy=q;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../add":"ZDFV","../exp":"zsk9","../log1p":"PxfL","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../relu":"SJP3","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"rYqN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require("../../gradients"),r=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),t=require("../axis_util"),a=require("../cast"),n=require("../div"),u=require("../exp"),i=require("../log_sum_exp"),l=require("../loss_ops_utils"),p=require("../mul"),c=require("../neg"),m=require("../operation"),d=require("../reshape"),q=require("../scalar"),x=require("../sub"),f=require("../sum"),h=require("./compute_weighted_loss");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,"float32"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,"float32"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,"float32")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,"onehotLabels","softmaxCrossEntropy");const m=(0,r.convertToTensor)(t,"logits","softmaxCrossEntropy");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,"weights","softmaxCrossEntropy")),(0,s.assertShapesMatch)(c.shape,m.shape,"Error in softmaxCrossEntropy: "),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;
},{"../../gradients":"yPDw","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../axis_util":"DsMP","../cast":"qqq3","../div":"D8Fc","../exp":"zsk9","../log_sum_exp":"MQ55","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../reshape":"QI4k","../scalar":"Ay42","../sub":"dGex","../sum":"ITAy","./compute_weighted_loss":"SdDZ"}],"R1mJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={image:!0,linalg:!0,losses:!0,spectral:!0,signal:!0,abs:!0,acos:!0,acosh:!0,add:!0,addN:!0,all:!0,any:!0,argMax:!0,argMin:!0,asin:!0,asinh:!0,atan:!0,atan2:!0,atanh:!0,avgPool:!0,avgPool3d:!0,basicLSTMCell:!0,batchToSpaceND:!0,batchNorm:!0,batchNorm2d:!0,batchNorm3d:!0,batchNorm4d:!0,bincount:!0,broadcastTo:!0,buffer:!0,cast:!0,ceil:!0,clipByValue:!0,clone:!0,complex:!0,concat:!0,concat1d:!0,concat2d:!0,concat3d:!0,concat4d:!0,conv1d:!0,conv2d:!0,conv2dTranspose:!0,conv3d:!0,conv3dTranspose:!0,cos:!0,cosh:!0,cumsum:!0,denseBincount:!0,depthToSpace:!0,depthwiseConv2d:!0,diag:!0,dilation2d:!0,div:!0,divNoNan:!0,dot:!0,elu:!0,equal:!0,erf:!0,exp:!0,expandDims:!0,expm1:!0,eye:!0,fill:!0,floor:!0,floorDiv:!0,gather:!0,greater:!0,greaterEqual:!0,imag:!0,isFinite:!0,isInf:!0,isNaN:!0,leakyRelu:!0,less:!0,lessEqual:!0,linspace:!0,localResponseNormalization:!0,log:!0,log1p:!0,logSigmoid:!0,logSoftmax:!0,logSumExp:!0,logicalAnd:!0,logicalNot:!0,logicalOr:!0,logicalXor:!0,matMul:!0,max:!0,maxPool:!0,maxPool3d:!0,maxPoolWithArgmax:!0,maximum:!0,mean:!0,min:!0,minimum:!0,mirrorPad:!0,mod:!0,moments:!0,mul:!0,multiRNNCell:!0,multinomial:!0,neg:!0,notEqual:!0,oneHot:!0,ones:!0,onesLike:!0,outerProduct:!0,pad:!0,pad1d:!0,pad2d:!0,pad3d:!0,pad4d:!0,pool:!0,pow:!0,prelu:!0,print:!0,prod:!0,rand:!0,randomGamma:!0,randomNormal:!0,randomUniform:!0,range:!0,real:!0,reciprocal:!0,relu:!0,relu6:!0,reshape:!0,reverse:!0,reverse1d:!0,reverse2d:!0,reverse3d:!0,reverse4d:!0,round:!0,rsqrt:!0,scalar:!0,selu:!0,separableConv2d:!0,setdiff1dAsync:!0,sigmoid:!0,sign:!0,sin:!0,sinh:!0,slice:!0,slice1d:!0,slice2d:!0,slice3d:!0,slice4d:!0,softmax:!0,softplus:!0,spaceToBatchND:!0,fft:!0,ifft:!0,irfft:!0,rfft:!0,split:!0,sqrt:!0,square:!0,squaredDifference:!0,squeeze:!0,stack:!0,step:!0,stridedSlice:!0,sub:!0,sum:!0,tan:!0,tanh:!0,tensor:!0,tensor1d:!0,tensor2d:!0,tensor3d:!0,tensor4d:!0,tensor5d:!0,tensor6d:!0,tile:!0,topk:!0,truncatedNormal:!0,unique:!0,unsortedSegmentSum:!0,unstack:!0,variable:!0,where:!0,whereAsync:!0,zeros:!0,zerosLike:!0,op:!0,OP_SCOPE_SUFFIX:!0,fused:!0};Object.defineProperty(exports,"abs",{enumerable:!0,get:function(){return r.abs}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return t.acos}}),Object.defineProperty(exports,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(exports,"add",{enumerable:!0,get:function(){return o.add}}),Object.defineProperty(exports,"addN",{enumerable:!0,get:function(){return u.addN}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return i.all}}),Object.defineProperty(exports,"any",{enumerable:!0,get:function(){return a.any}}),Object.defineProperty(exports,"argMax",{enumerable:!0,get:function(){return s.argMax}}),Object.defineProperty(exports,"argMin",{enumerable:!0,get:function(){return c.argMin}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(exports,"asinh",{enumerable:!0,get:function(){return l.asinh}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return f.atan}}),Object.defineProperty(exports,"atan2",{enumerable:!0,get:function(){return d.atan2}}),Object.defineProperty(exports,"atanh",{enumerable:!0,get:function(){return b.atanh}}),Object.defineProperty(exports,"avgPool",{enumerable:!0,get:function(){return m.avgPool}}),Object.defineProperty(exports,"avgPool3d",{enumerable:!0,get:function(){return g.avgPool3d}}),Object.defineProperty(exports,"basicLSTMCell",{enumerable:!0,get:function(){return x.basicLSTMCell}}),Object.defineProperty(exports,"batchToSpaceND",{enumerable:!0,get:function(){return y.batchToSpaceND}}),Object.defineProperty(exports,"batchNorm",{enumerable:!0,get:function(){return q.batchNorm}}),Object.defineProperty(exports,"batchNorm2d",{enumerable:!0,get:function(){return O.batchNorm2d}}),Object.defineProperty(exports,"batchNorm3d",{enumerable:!0,get:function(){return P.batchNorm3d}}),Object.defineProperty(exports,"batchNorm4d",{enumerable:!0,get:function(){return j.batchNorm4d}}),Object.defineProperty(exports,"bincount",{enumerable:!0,get:function(){return _.bincount}}),Object.defineProperty(exports,"broadcastTo",{enumerable:!0,get:function(){return h.broadcastTo}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return v.buffer}}),Object.defineProperty(exports,"cast",{enumerable:!0,get:function(){return N.cast}}),Object.defineProperty(exports,"ceil",{enumerable:!0,get:function(){return S.ceil}}),Object.defineProperty(exports,"clipByValue",{enumerable:!0,get:function(){return w.clipByValue}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return k.clone}}),Object.defineProperty(exports,"complex",{enumerable:!0,get:function(){return M.complex}}),Object.defineProperty(exports,"concat",{enumerable:!0,get:function(){return E.concat}}),Object.defineProperty(exports,"concat1d",{enumerable:!0,get:function(){return z.concat1d}}),Object.defineProperty(exports,"concat2d",{enumerable:!0,get:function(){return D.concat2d}}),Object.defineProperty(exports,"concat3d",{enumerable:!0,get:function(){return T.concat3d}}),Object.defineProperty(exports,"concat4d",{enumerable:!0,get:function(){return A.concat4d}}),Object.defineProperty(exports,"conv1d",{enumerable:!0,get:function(){return C.conv1d}}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return L.conv2d}}),Object.defineProperty(exports,"conv2dTranspose",{enumerable:!0,get:function(){return W.conv2dTranspose}}),Object.defineProperty(exports,"conv3d",{enumerable:!0,get:function(){return R.conv3d}}),Object.defineProperty(exports,"conv3dTranspose",{enumerable:!0,get:function(){return B.conv3dTranspose}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return F.cos}}),Object.defineProperty(exports,"cosh",{enumerable:!0,get:function(){return I.cosh}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return U.cumsum}}),Object.defineProperty(exports,"denseBincount",{enumerable:!0,get:function(){return X.denseBincount}}),Object.defineProperty(exports,"depthToSpace",{enumerable:!0,get:function(){return G.depthToSpace}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return H.depthwiseConv2d}}),Object.defineProperty(exports,"diag",{enumerable:!0,get:function(){return V.diag}}),Object.defineProperty(exports,"dilation2d",{enumerable:!0,get:function(){return J.dilation2d}}),Object.defineProperty(exports,"div",{enumerable:!0,get:function(){return K.div}}),Object.defineProperty(exports,"divNoNan",{enumerable:!0,get:function(){return Q.divNoNan}}),Object.defineProperty(exports,"dot",{enumerable:!0,get:function(){return Y.dot}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return Z.elu}}),Object.defineProperty(exports,"equal",{enumerable:!0,get:function(){return $.equal}}),Object.defineProperty(exports,"erf",{enumerable:!0,get:function(){return ee.erf}}),Object.defineProperty(exports,"exp",{enumerable:!0,get:function(){return re.exp}}),Object.defineProperty(exports,"expandDims",{enumerable:!0,get:function(){return te.expandDims}}),Object.defineProperty(exports,"expm1",{enumerable:!0,get:function(){return ne.expm1}}),Object.defineProperty(exports,"eye",{enumerable:!0,get:function(){return oe.eye}}),Object.defineProperty(exports,"fill",{enumerable:!0,get:function(){return ue.fill}}),Object.defineProperty(exports,"floor",{enumerable:!0,get:function(){return ie.floor}}),Object.defineProperty(exports,"floorDiv",{enumerable:!0,get:function(){return ae.floorDiv}}),Object.defineProperty(exports,"gather",{enumerable:!0,get:function(){return se.gather}}),Object.defineProperty(exports,"greater",{enumerable:!0,get:function(){return ce.greater}}),Object.defineProperty(exports,"greaterEqual",{enumerable:!0,get:function(){return pe.greaterEqual}}),Object.defineProperty(exports,"imag",{enumerable:!0,get:function(){return le.imag}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return fe.isFinite}}),Object.defineProperty(exports,"isInf",{enumerable:!0,get:function(){return de.isInf}}),Object.defineProperty(exports,"isNaN",{enumerable:!0,get:function(){return be.isNaN}}),Object.defineProperty(exports,"leakyRelu",{enumerable:!0,get:function(){return me.leakyRelu}}),Object.defineProperty(exports,"less",{enumerable:!0,get:function(){return ge.less}}),Object.defineProperty(exports,"lessEqual",{enumerable:!0,get:function(){return xe.lessEqual}}),Object.defineProperty(exports,"linspace",{enumerable:!0,get:function(){return ye.linspace}}),Object.defineProperty(exports,"localResponseNormalization",{enumerable:!0,get:function(){return qe.localResponseNormalization}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return Oe.log}}),Object.defineProperty(exports,"log1p",{enumerable:!0,get:function(){return Pe.log1p}}),Object.defineProperty(exports,"logSigmoid",{enumerable:!0,get:function(){return je.logSigmoid}}),Object.defineProperty(exports,"logSoftmax",{enumerable:!0,get:function(){return _e.logSoftmax}}),Object.defineProperty(exports,"logSumExp",{enumerable:!0,get:function(){return he.logSumExp}}),Object.defineProperty(exports,"logicalAnd",{enumerable:!0,get:function(){return ve.logicalAnd}}),Object.defineProperty(exports,"logicalNot",{enumerable:!0,get:function(){return Ne.logicalNot}}),Object.defineProperty(exports,"logicalOr",{enumerable:!0,get:function(){return Se.logicalOr}}),Object.defineProperty(exports,"logicalXor",{enumerable:!0,get:function(){return we.logicalXor}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return ke.matMul}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return Me.max}}),Object.defineProperty(exports,"maxPool",{enumerable:!0,get:function(){return Ee.maxPool}}),Object.defineProperty(exports,"maxPool3d",{enumerable:!0,get:function(){return ze.maxPool3d}}),Object.defineProperty(exports,"maxPoolWithArgmax",{enumerable:!0,get:function(){return De.maxPoolWithArgmax}}),Object.defineProperty(exports,"maximum",{enumerable:!0,get:function(){return Te.maximum}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return Ae.mean}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return Ce.min}}),Object.defineProperty(exports,"minimum",{enumerable:!0,get:function(){return Le.minimum}}),Object.defineProperty(exports,"mirrorPad",{enumerable:!0,get:function(){return We.mirrorPad}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return Re.mod}}),Object.defineProperty(exports,"moments",{enumerable:!0,get:function(){return Be.moments}}),Object.defineProperty(exports,"mul",{enumerable:!0,get:function(){return Fe.mul}}),Object.defineProperty(exports,"multiRNNCell",{enumerable:!0,get:function(){return Ie.multiRNNCell}}),Object.defineProperty(exports,"multinomial",{enumerable:!0,get:function(){return Ue.multinomial}}),Object.defineProperty(exports,"neg",{enumerable:!0,get:function(){return Xe.neg}}),Object.defineProperty(exports,"notEqual",{enumerable:!0,get:function(){return Ge.notEqual}}),Object.defineProperty(exports,"oneHot",{enumerable:!0,get:function(){return He.oneHot}}),Object.defineProperty(exports,"ones",{enumerable:!0,get:function(){return Ve.ones}}),Object.defineProperty(exports,"onesLike",{enumerable:!0,get:function(){return Je.onesLike}}),Object.defineProperty(exports,"outerProduct",{enumerable:!0,get:function(){return Ke.outerProduct}}),Object.defineProperty(exports,"pad",{enumerable:!0,get:function(){return Qe.pad}}),Object.defineProperty(exports,"pad1d",{enumerable:!0,get:function(){return Ye.pad1d}}),Object.defineProperty(exports,"pad2d",{enumerable:!0,get:function(){return Ze.pad2d}}),Object.defineProperty(exports,"pad3d",{enumerable:!0,get:function(){return $e.pad3d}}),Object.defineProperty(exports,"pad4d",{enumerable:!0,get:function(){return er.pad4d}}),Object.defineProperty(exports,"pool",{enumerable:!0,get:function(){return rr.pool}}),Object.defineProperty(exports,"pow",{enumerable:!0,get:function(){return tr.pow}}),Object.defineProperty(exports,"prelu",{enumerable:!0,get:function(){return nr.prelu}}),Object.defineProperty(exports,"print",{enumerable:!0,get:function(){return or.print}}),Object.defineProperty(exports,"prod",{enumerable:!0,get:function(){return ur.prod}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return ir.rand}}),Object.defineProperty(exports,"randomGamma",{enumerable:!0,get:function(){return ar.randomGamma}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return sr.randomNormal}}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return cr.randomUniform}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return pr.range}}),Object.defineProperty(exports,"real",{enumerable:!0,get:function(){return lr.real}}),Object.defineProperty(exports,"reciprocal",{enumerable:!0,get:function(){return fr.reciprocal}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return dr.relu}}),Object.defineProperty(exports,"relu6",{enumerable:!0,get:function(){return br.relu6}}),Object.defineProperty(exports,"reshape",{enumerable:!0,get:function(){return mr.reshape}}),Object.defineProperty(exports,"reverse",{enumerable:!0,get:function(){return gr.reverse}}),Object.defineProperty(exports,"reverse1d",{enumerable:!0,get:function(){return xr.reverse1d}}),Object.defineProperty(exports,"reverse2d",{enumerable:!0,get:function(){return yr.reverse2d}}),Object.defineProperty(exports,"reverse3d",{enumerable:!0,get:function(){return qr.reverse3d}}),Object.defineProperty(exports,"reverse4d",{enumerable:!0,get:function(){return Or.reverse4d}}),Object.defineProperty(exports,"round",{enumerable:!0,get:function(){return Pr.round}}),Object.defineProperty(exports,"rsqrt",{enumerable:!0,get:function(){return jr.rsqrt}}),Object.defineProperty(exports,"scalar",{enumerable:!0,get:function(){return _r.scalar}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return hr.selu}}),Object.defineProperty(exports,"separableConv2d",{enumerable:!0,get:function(){return vr.separableConv2d}}),Object.defineProperty(exports,"setdiff1dAsync",{enumerable:!0,get:function(){return Nr.setdiff1dAsync}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return Sr.sigmoid}}),Object.defineProperty(exports,"sign",{enumerable:!0,get:function(){return wr.sign}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return kr.sin}}),Object.defineProperty(exports,"sinh",{enumerable:!0,get:function(){return Mr.sinh}}),Object.defineProperty(exports,"slice",{enumerable:!0,get:function(){return Er.slice}}),Object.defineProperty(exports,"slice1d",{enumerable:!0,get:function(){return zr.slice1d}}),Object.defineProperty(exports,"slice2d",{enumerable:!0,get:function(){return Dr.slice2d}}),Object.defineProperty(exports,"slice3d",{enumerable:!0,get:function(){return Tr.slice3d}}),Object.defineProperty(exports,"slice4d",{enumerable:!0,get:function(){return Ar.slice4d}}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return Cr.softmax}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return Lr.softplus}}),Object.defineProperty(exports,"spaceToBatchND",{enumerable:!0,get:function(){return Wr.spaceToBatchND}}),Object.defineProperty(exports,"fft",{enumerable:!0,get:function(){return Rr.fft}}),Object.defineProperty(exports,"ifft",{enumerable:!0,get:function(){return Br.ifft}}),Object.defineProperty(exports,"irfft",{enumerable:!0,get:function(){return Fr.irfft}}),Object.defineProperty(exports,"rfft",{enumerable:!0,get:function(){return Ir.rfft}}),Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return Ur.split}}),Object.defineProperty(exports,"sqrt",{enumerable:!0,get:function(){return Xr.sqrt}}),Object.defineProperty(exports,"square",{enumerable:!0,get:function(){return Gr.square}}),Object.defineProperty(exports,"squaredDifference",{enumerable:!0,get:function(){return Hr.squaredDifference}}),Object.defineProperty(exports,"squeeze",{enumerable:!0,get:function(){return Vr.squeeze}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return Jr.stack}}),Object.defineProperty(exports,"step",{enumerable:!0,get:function(){return Kr.step}}),Object.defineProperty(exports,"stridedSlice",{enumerable:!0,get:function(){return Qr.stridedSlice}}),Object.defineProperty(exports,"sub",{enumerable:!0,get:function(){return Yr.sub}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return Zr.sum}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return $r.tan}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return et.tanh}}),Object.defineProperty(exports,"tensor",{enumerable:!0,get:function(){return rt.tensor}}),Object.defineProperty(exports,"tensor1d",{enumerable:!0,get:function(){return tt.tensor1d}}),Object.defineProperty(exports,"tensor2d",{enumerable:!0,get:function(){return nt.tensor2d}}),Object.defineProperty(exports,"tensor3d",{enumerable:!0,get:function(){return ot.tensor3d}}),Object.defineProperty(exports,"tensor4d",{enumerable:!0,get:function(){return ut.tensor4d}}),Object.defineProperty(exports,"tensor5d",{enumerable:!0,get:function(){return it.tensor5d}}),Object.defineProperty(exports,"tensor6d",{enumerable:!0,get:function(){return at.tensor6d}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return st.tile}}),Object.defineProperty(exports,"topk",{enumerable:!0,get:function(){return ct.topk}}),Object.defineProperty(exports,"truncatedNormal",{enumerable:!0,get:function(){return pt.truncatedNormal}}),Object.defineProperty(exports,"unique",{enumerable:!0,get:function(){return lt.unique}}),Object.defineProperty(exports,"unsortedSegmentSum",{enumerable:!0,get:function(){return ft.unsortedSegmentSum}}),Object.defineProperty(exports,"unstack",{enumerable:!0,get:function(){return dt.unstack}}),Object.defineProperty(exports,"variable",{enumerable:!0,get:function(){return bt.variable}}),Object.defineProperty(exports,"where",{enumerable:!0,get:function(){return mt.where}}),Object.defineProperty(exports,"whereAsync",{enumerable:!0,get:function(){return gt.whereAsync}}),Object.defineProperty(exports,"zeros",{enumerable:!0,get:function(){return xt.zeros}}),Object.defineProperty(exports,"zerosLike",{enumerable:!0,get:function(){return yt.zerosLike}}),Object.defineProperty(exports,"op",{enumerable:!0,get:function(){return Et.op}}),Object.defineProperty(exports,"OP_SCOPE_SUFFIX",{enumerable:!0,get:function(){return Et.OP_SCOPE_SUFFIX}}),exports.fused=exports.signal=exports.spectral=exports.losses=exports.linalg=exports.image=void 0;var r=require("./abs"),t=require("./acos"),n=require("./acosh"),o=require("./add"),u=require("./add_n"),i=require("./all"),a=require("./any"),s=require("./arg_max"),c=require("./arg_min"),p=require("./asin"),l=require("./asinh"),f=require("./atan"),d=require("./atan2"),b=require("./atanh"),m=require("./avg_pool"),g=require("./avg_pool_3d"),x=require("./basic_lstm_cell"),y=require("./batch_to_space_nd"),q=require("./batchnorm"),O=require("./batchnorm2d"),P=require("./batchnorm3d"),j=require("./batchnorm4d"),_=require("./bincount"),h=require("./broadcast_to"),v=require("./buffer"),N=require("./cast"),S=require("./ceil"),w=require("./clip_by_value"),k=require("./clone"),M=require("./complex"),E=require("./concat"),z=require("./concat_1d"),D=require("./concat_2d"),T=require("./concat_3d"),A=require("./concat_4d"),C=require("./conv1d"),L=require("./conv2d"),W=require("./conv2d_transpose"),R=require("./conv3d"),B=require("./conv3d_transpose"),F=require("./cos"),I=require("./cosh"),U=require("./cumsum"),X=require("./dense_bincount"),G=require("./depth_to_space"),H=require("./depthwise_conv2d"),V=require("./diag"),J=require("./dilation2d"),K=require("./div"),Q=require("./div_no_nan"),Y=require("./dot"),Z=require("./elu"),$=require("./equal"),ee=require("./erf"),re=require("./exp"),te=require("./expand_dims"),ne=require("./expm1"),oe=require("./eye"),ue=require("./fill"),ie=require("./floor"),ae=require("./floorDiv"),se=require("./gather"),ce=require("./greater"),pe=require("./greater_equal"),le=require("./imag"),fe=require("./is_finite"),de=require("./is_inf"),be=require("./is_nan"),me=require("./leaky_relu"),ge=require("./less"),xe=require("./less_equal"),ye=require("./linspace"),qe=require("./local_response_normalization"),Oe=require("./log"),Pe=require("./log1p"),je=require("./log_sigmoid"),_e=require("./log_softmax"),he=require("./log_sum_exp"),ve=require("./logical_and"),Ne=require("./logical_not"),Se=require("./logical_or"),we=require("./logical_xor"),ke=require("./mat_mul"),Me=require("./max"),Ee=require("./max_pool"),ze=require("./max_pool_3d"),De=require("./max_pool_with_argmax"),Te=require("./maximum"),Ae=require("./mean"),Ce=require("./min"),Le=require("./minimum"),We=require("./mirror_pad"),Re=require("./mod"),Be=require("./moments"),Fe=require("./mul"),Ie=require("./multi_rnn_cell"),Ue=require("./multinomial"),Xe=require("./neg"),Ge=require("./not_equal"),He=require("./one_hot"),Ve=require("./ones"),Je=require("./ones_like"),Ke=require("./outer_product"),Qe=require("./pad"),Ye=require("./pad1d"),Ze=require("./pad2d"),$e=require("./pad3d"),er=require("./pad4d"),rr=require("./pool"),tr=require("./pow"),nr=require("./prelu"),or=require("./print"),ur=require("./prod"),ir=require("./rand"),ar=require("./random_gamma"),sr=require("./random_normal"),cr=require("./random_uniform"),pr=require("./range"),lr=require("./real"),fr=require("./reciprocal"),dr=require("./relu"),br=require("./relu6"),mr=require("./reshape"),gr=require("./reverse"),xr=require("./reverse_1d"),yr=require("./reverse_2d"),qr=require("./reverse_3d"),Or=require("./reverse_4d"),Pr=require("./round"),jr=require("./rsqrt"),_r=require("./scalar"),hr=require("./selu"),vr=require("./separable_conv2d"),Nr=require("./setdiff1d_async"),Sr=require("./sigmoid"),wr=require("./sign"),kr=require("./sin"),Mr=require("./sinh"),Er=require("./slice"),zr=require("./slice1d"),Dr=require("./slice2d"),Tr=require("./slice3d"),Ar=require("./slice4d"),Cr=require("./softmax"),Lr=require("./softplus"),Wr=require("./space_to_batch_nd"),Rr=require("./spectral/fft"),Br=require("./spectral/ifft"),Fr=require("./spectral/irfft"),Ir=require("./spectral/rfft"),Ur=require("./split"),Xr=require("./sqrt"),Gr=require("./square"),Hr=require("./squared_difference"),Vr=require("./squeeze"),Jr=require("./stack"),Kr=require("./step"),Qr=require("./strided_slice"),Yr=require("./sub"),Zr=require("./sum"),$r=require("./tan"),et=require("./tanh"),rt=require("./tensor"),tt=require("./tensor1d"),nt=require("./tensor2d"),ot=require("./tensor3d"),ut=require("./tensor4d"),it=require("./tensor5d"),at=require("./tensor6d"),st=require("./tile"),ct=require("./topk"),pt=require("./truncated_normal"),lt=require("./unique"),ft=require("./unsorted_segment_sum"),dt=require("./unstack"),bt=require("./variable"),mt=require("./where"),gt=require("./where_async"),xt=require("./zeros"),yt=require("./zeros_like"),qt=require("./boolean_mask");Object.keys(qt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===qt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return qt[r]}}))});var Ot=require("./compare");Object.keys(Ot).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Ot[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Ot[r]}}))});var Pt=require("./binary_ops");Object.keys(Pt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Pt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Pt[r]}}))});var jt=require("./transpose");Object.keys(jt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===jt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return jt[r]}}))});var _t=require("./norm");Object.keys(_t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===_t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _t[r]}}))});var ht=require("./moving_average");Object.keys(ht).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===ht[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return ht[r]}}))});var vt=require("./scatter_nd");Object.keys(vt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===vt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return vt[r]}}))});var Nt=require("./sparse_to_dense");Object.keys(Nt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Nt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Nt[r]}}))});var St=require("./gather_nd");Object.keys(St).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===St[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return St[r]}}))});var wt=require("./dropout");Object.keys(wt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===wt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return wt[r]}}))});var kt=require("./signal_ops_util");Object.keys(kt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===kt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return kt[r]}}))});var Mt=require("./in_top_k");Object.keys(Mt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Mt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Mt[r]}}))});var Et=require("./operation"),zt=sn(require("./fused_ops"));exports.fused=zt;var Dt=require("./signal/hamming_window"),Tt=require("./signal/hann_window"),At=require("./signal/frame"),Ct=require("./signal/stft"),Lt=require("./image/crop_and_resize"),Wt=require("./image/flip_left_right"),Rt=require("./image/rotate_with_offset"),Bt=require("./image/non_max_suppression"),Ft=require("./image/non_max_suppression_async"),It=require("./image/non_max_suppression_with_score"),Ut=require("./image/non_max_suppression_with_score_async"),Xt=require("./image/non_max_suppression_padded"),Gt=require("./image/non_max_suppression_padded_async"),Ht=require("./image/resize_bilinear"),Vt=require("./image/resize_nearest_neighbor"),Jt=require("./linalg/band_part"),Kt=require("./linalg/gram_schmidt"),Qt=require("./linalg/qr"),Yt=require("./losses/absolute_difference"),Zt=require("./losses/compute_weighted_loss"),$t=require("./losses/cosine_distance"),en=require("./losses/hinge_loss"),rn=require("./losses/huber_loss"),tn=require("./losses/log_loss"),nn=require("./losses/mean_squared_error"),on=require("./losses/sigmoid_cross_entropy"),un=require("./losses/softmax_cross_entropy");function an(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(an=function(e){return e?t:r})(e)}function sn(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=an(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}const cn={fft:Rr.fft,ifft:Br.ifft,rfft:Ir.rfft,irfft:Fr.irfft};exports.spectral=cn;const pn={hammingWindow:Dt.hammingWindow,hannWindow:Tt.hannWindow,frame:At.frame,stft:Ct.stft};exports.signal=pn;const ln={flipLeftRight:Wt.flipLeftRight,resizeNearestNeighbor:Vt.resizeNearestNeighbor,resizeBilinear:Ht.resizeBilinear,rotateWithOffset:Rt.rotateWithOffset,cropAndResize:Lt.cropAndResize,nonMaxSuppression:Bt.nonMaxSuppression,nonMaxSuppressionAsync:Ft.nonMaxSuppressionAsync,nonMaxSuppressionWithScore:It.nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync:Ut.nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded:Xt.nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync:Gt.nonMaxSuppressionPaddedAsync};exports.image=ln;const fn={bandPart:Jt.bandPart,gramSchmidt:Kt.gramSchmidt,qr:Qt.qr};exports.linalg=fn;const dn={absoluteDifference:Yt.absoluteDifference,computeWeightedLoss:Zt.computeWeightedLoss,cosineDistance:$t.cosineDistance,hingeLoss:en.hingeLoss,huberLoss:rn.huberLoss,logLoss:tn.logLoss,meanSquaredError:nn.meanSquaredError,sigmoidCrossEntropy:on.sigmoidCrossEntropy,softmaxCrossEntropy:un.softmaxCrossEntropy};exports.losses=dn;
},{"./abs":"aE3W","./acos":"wQJc","./acosh":"JJYu","./add":"ZDFV","./add_n":"EQUq","./all":"VAUj","./any":"OF1E","./arg_max":"wSFk","./arg_min":"Zhc7","./asin":"pS4z","./asinh":"B3dx","./atan":"Yh9p","./atan2":"eUJw","./atanh":"DlnE","./avg_pool":"iP9e","./avg_pool_3d":"df2t","./basic_lstm_cell":"yZSA","./batch_to_space_nd":"Q9gF","./batchnorm":"qqTf","./batchnorm2d":"fmF3","./batchnorm3d":"seIf","./batchnorm4d":"REgA","./bincount":"MD76","./broadcast_to":"qUV0","./buffer":"WyiN","./cast":"qqq3","./ceil":"S70G","./clip_by_value":"VfEE","./clone":"F06q","./complex":"Iowv","./concat":"dDdq","./concat_1d":"J9se","./concat_2d":"Y6Ad","./concat_3d":"NSM9","./concat_4d":"Yjfb","./conv1d":"n3wz","./conv2d":"oJQk","./conv2d_transpose":"GCOF","./conv3d":"VJ2T","./conv3d_transpose":"fQzO","./cos":"g9ZU","./cosh":"GpTU","./cumsum":"Kzhc","./dense_bincount":"HdYS","./depth_to_space":"U4UL","./depthwise_conv2d":"Kahd","./diag":"B6ot","./dilation2d":"q2Zv","./div":"D8Fc","./div_no_nan":"mdNH","./dot":"bUs4","./elu":"a7Il","./equal":"WG94","./erf":"roFm","./exp":"zsk9","./expand_dims":"XF6l","./expm1":"ntzg","./eye":"HzEj","./fill":"e6pp","./floor":"XD37","./floorDiv":"Pk64","./gather":"ESvM","./greater":"QdS7","./greater_equal":"Dbo2","./imag":"C5d3","./is_finite":"JMGA","./is_inf":"PwB1","./is_nan":"LVjE","./leaky_relu":"hUKE","./less":"Ndy5","./less_equal":"FvS1","./linspace":"encs","./local_response_normalization":"wFSX","./log":"vwHA","./log1p":"PxfL","./log_sigmoid":"lXsJ","./log_softmax":"I1du","./log_sum_exp":"MQ55","./logical_and":"lYzt","./logical_not":"XZse","./logical_or":"HD5h","./logical_xor":"FEKV","./mat_mul":"mMWq","./max":"iipD","./max_pool":"hJeZ","./max_pool_3d":"Cet1","./max_pool_with_argmax":"gxl3","./maximum":"X5MV","./mean":"jwZo","./min":"w9We","./minimum":"crIr","./mirror_pad":"yI5U","./mod":"lYF1","./moments":"rBcz","./mul":"k2PI","./multi_rnn_cell":"V2Xb","./multinomial":"GA9C","./neg":"iGYA","./not_equal":"jVu5","./one_hot":"ETzZ","./ones":"POxQ","./ones_like":"VzlV","./outer_product":"lKlD","./pad":"hajs","./pad1d":"aLXo","./pad2d":"OUX7","./pad3d":"Exwp","./pad4d":"HxGt","./pool":"T3We","./pow":"vt1B","./prelu":"mkuj","./print":"xBTU","./prod":"pvB6","./rand":"WpBM","./random_gamma":"fM99","./random_normal":"gSkF","./random_uniform":"yl8A","./range":"gc29","./real":"cKEu","./reciprocal":"w0Wv","./relu":"SJP3","./relu6":"MNkg","./reshape":"QI4k","./reverse":"SxGN","./reverse_1d":"dTCT","./reverse_2d":"jAVH","./reverse_3d":"fmHW","./reverse_4d":"CaS6","./round":"J1Ke","./rsqrt":"XwKw","./scalar":"Ay42","./selu":"nLmU","./separable_conv2d":"M7Hy","./setdiff1d_async":"cgP9","./sigmoid":"yARQ","./sign":"cGq1","./sin":"AdWB","./sinh":"fN3P","./slice":"zP07","./slice1d":"lQVK","./slice2d":"r8xQ","./slice3d":"jraI","./slice4d":"r60P","./softmax":"xLGH","./softplus":"eE4m","./space_to_batch_nd":"rWul","./spectral/fft":"e6Hs","./spectral/ifft":"PxKB","./spectral/irfft":"gr1H","./spectral/rfft":"AYvX","./split":"VA1I","./sqrt":"iJpu","./square":"mJRX","./squared_difference":"gsmP","./squeeze":"ZVMV","./stack":"TWBn","./step":"e2o4","./strided_slice":"Q58L","./sub":"dGex","./sum":"ITAy","./tan":"DosY","./tanh":"ZRNG","./tensor":"P2QC","./tensor1d":"pBg9","./tensor2d":"WnBr","./tensor3d":"v3VY","./tensor4d":"VxHJ","./tensor5d":"qXmw","./tensor6d":"GISR","./tile":"mfii","./topk":"GNrW","./truncated_normal":"njSi","./unique":"FtQp","./unsorted_segment_sum":"GWRE","./unstack":"JDMu","./variable":"oIio","./where":"BsuI","./where_async":"md2p","./zeros":"R5fo","./zeros_like":"PDcB","./boolean_mask":"hPEM","./compare":"M0Xr","./binary_ops":"V7h5","./transpose":"uQkx","./norm":"Twvf","./moving_average":"HWJh","./scatter_nd":"QGqq","./sparse_to_dense":"vYKY","./gather_nd":"UkmN","./dropout":"sFBi","./signal_ops_util":"A6ms","./in_top_k":"JOMU","./operation":"JtaO","./fused_ops":"nQCt","./signal/hamming_window":"lH5U","./signal/hann_window":"BcoI","./signal/frame":"Qvnk","./signal/stft":"yVfo","./image/crop_and_resize":"p8Dt","./image/flip_left_right":"JzVv","./image/rotate_with_offset":"GZBW","./image/non_max_suppression":"KRSK","./image/non_max_suppression_async":"eCHR","./image/non_max_suppression_with_score":"Ym4G","./image/non_max_suppression_with_score_async":"q1EX","./image/non_max_suppression_padded":"Su3I","./image/non_max_suppression_padded_async":"KZ0X","./image/resize_bilinear":"XoGL","./image/resize_nearest_neighbor":"Lavm","./linalg/band_part":"l61h","./linalg/gram_schmidt":"IagJ","./linalg/qr":"hSXe","./losses/absolute_difference":"sqiT","./losses/compute_weighted_loss":"SdDZ","./losses/cosine_distance":"dFeu","./losses/hinge_loss":"kvcm","./losses/huber_loss":"VRHQ","./losses/log_loss":"R42n","./losses/mean_squared_error":"NOcW","./losses/sigmoid_cross_entropy":"oaMf","./losses/softmax_cross_entropy":"rYqN"}],"uOca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Optimizer=void 0;var e=require("../globals"),t=require("../gradients"),i=require("../ops/ops"),s=require("../serialization");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,i.scalar)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});
},{"../globals":"GWnL","../gradients":"yPDw","../ops/ops":"R1mJ","../serialization":"HDfU"}],"NZz8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require("../engine"),e=require("../globals"),s=require("../ops/add"),i=require("../ops/div"),t=require("../ops/mul"),r=require("../ops/ops"),l=require("../ops/square"),n=require("../ops/zeros_like"),u=require("../serialization"),d=require("./optimizer");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className="Adadelta",(0,u.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/ops":"R1mJ","../ops/square":"mJRX","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"oWMZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdagradOptimizer=void 0;var a=require("../engine"),e=require("../globals"),i=require("../ops/add"),r=require("../ops/div"),t=require("../ops/fill"),s=require("../ops/mul"),l=require("../ops/sqrt"),n=require("../ops/square"),u=require("../serialization"),c=require("./optimizer");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className="Adagrad",(0,u.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/fill":"e6pp","../ops/mul":"k2PI","../ops/sqrt":"iJpu","../ops/square":"mJRX","../serialization":"HDfU","./optimizer":"uOca"}],"K7FB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamOptimizer=void 0;var e=require("../engine"),t=require("../globals"),a=require("../ops/add"),i=require("../ops/div"),s=require("../ops/mul"),r=require("../ops/pow"),n=require("../ops/scalar"),c=require("../ops/sqrt"),o=require("../ops/square"),l=require("../ops/sub"),u=require("../ops/zeros_like"),m=require("../serialization"),d=require("./optimizer");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className="Adam",(0,m.registerClass)(h);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/pow":"vt1B","../ops/scalar":"Ay42","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"NenH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamaxOptimizer=void 0;var e=require("../engine"),i=require("../globals"),t=require("../ops/abs"),a=require("../ops/add"),s=require("../ops/div"),r=require("../ops/maximum"),n=require("../ops/mul"),l=require("../ops/scalar"),o=require("../ops/sub"),u=require("../ops/zeros_like"),c=require("../serialization"),d=require("./optimizer");class m extends d.Optimizer{constructor(t,a,s,r=null,n=0){super(),this.learningRate=t,this.beta1=a,this.beta2=s,this.epsilon=r,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,i.tidy)(()=>{this.iteration=(0,l.scalar)(0).variable(),this.accBeta1=(0,l.scalar)(a).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(l){const c=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);(0,i.tidy)(()=>{const i=(0,o.sub)(1,this.accBeta1),d=(0,s.div)(-this.learningRate,(0,a.add)((0,n.mul)(this.iteration,this.decay),1));c.forEach((o,c)=>{const m=e.ENGINE.registeredVariables[o];null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:`${o}/m`,variable:(0,u.zerosLike)(m).variable(!1)}),null==this.accumulatedWeightedInfNorm[c]&&(this.accumulatedWeightedInfNorm[c]={originalName:`${o}/v`,variable:(0,u.zerosLike)(m).variable(!1)});const h=Array.isArray(l)?l[c].tensor:l[o];if(null==h)return;const p=this.accumulatedFirstMoment[c].variable,b=this.accumulatedWeightedInfNorm[c].variable,g=(0,a.add)((0,n.mul)(p,this.beta1),(0,n.mul)(h,1-this.beta1)),v=(0,n.mul)(b,this.beta2),y=(0,t.abs)(h),f=(0,r.maximum)(v,y);p.assign(g),b.assign(f);const N=(0,a.add)((0,n.mul)((0,s.div)(d,i),(0,s.div)(g,(0,a.add)(f,this.epsilon))),m);m.assign(N)}),this.iteration.assign((0,a.add)(this.iteration,1)),this.accBeta1.assign((0,n.mul)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,i.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,i.dispose)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,i){return new e(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}}exports.AdamaxOptimizer=m,m.className="Adamax",(0,c.registerClass)(m);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/abs":"aE3W","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/maximum":"X5MV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"jyih":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SGDOptimizer=void 0;var e=require("../engine"),t=require("../globals"),r=require("../ops/add"),i=require("../ops/mul"),s=require("../ops/scalar"),a=require("../serialization"),n=require("./optimizer");class o extends n.Optimizer{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(s){(Array.isArray(s)?s.map(e=>e.name):Object.keys(s)).forEach((a,n)=>{const o=Array.isArray(s)?s[n].tensor:s[a];if(null==o)return;const l=e.ENGINE.registeredVariables[a];(0,t.tidy)(()=>{const e=(0,r.add)((0,i.mul)(this.c,o),l);l.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,t.keep)((0,s.scalar)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}exports.SGDOptimizer=o,o.className="SGD",(0,a.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../serialization":"HDfU","./optimizer":"uOca"}],"KNfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MomentumOptimizer=void 0;var e=require("../engine"),t=require("../globals"),s=require("../ops/add"),i=require("../ops/mul"),a=require("../ops/scalar"),r=require("../ops/zeros_like"),n=require("../serialization"),m=require("./sgd_optimizer");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className="Momentum",(0,n.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/zeros_like":"PDcB","../serialization":"HDfU","./sgd_optimizer":"jyih"}],"dtrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require("../engine"),a=require("../globals"),s=require("../ops/add"),t=require("../ops/div"),i=require("../ops/mul"),r=require("../ops/sqrt"),n=require("../ops/square"),u=require("../ops/sub"),l=require("../ops/zeros_like"),c=require("../serialization"),m=require("./optimizer");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className="RMSProp",(0,c.registerClass)(d);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"UCbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptimizerConstructors=void 0;var r=require("./adadelta_optimizer"),e=require("./adagrad_optimizer"),t=require("./adam_optimizer"),i=require("./adamax_optimizer"),a=require("./momentum_optimizer"),m=require("./rmsprop_optimizer"),u=require("./sgd_optimizer");class p{static sgd(r){return new u.SGDOptimizer(r)}static momentum(r,e,t=!1){return new a.MomentumOptimizer(r,e,t)}static rmsprop(r,e=.9,t=0,i=null,a=!1){return new m.RMSPropOptimizer(r,e,t,i,a)}static adam(r=.001,e=.9,i=.999,a=null){return new t.AdamOptimizer(r,e,i,a)}static adadelta(e=.001,t=.95,i=null){return new r.AdadeltaOptimizer(e,t,i)}static adamax(r=.002,e=.9,t=.999,a=null,m=0){return new i.AdamaxOptimizer(r,e,t,a,m)}static adagrad(r,t=.1){return new e.AdagradOptimizer(r,t)}}exports.OptimizerConstructors=p;
},{"./adadelta_optimizer":"NZz8","./adagrad_optimizer":"oWMZ","./adam_optimizer":"K7FB","./adamax_optimizer":"NenH","./momentum_optimizer":"KNfn","./rmsprop_optimizer":"dtrn","./sgd_optimizer":"jyih"}],"GtIJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.train=void 0;var r=require("./optimizers/adadelta_optimizer"),i=require("./optimizers/adagrad_optimizer"),e=require("./optimizers/adam_optimizer"),t=require("./optimizers/adamax_optimizer"),m=require("./optimizers/momentum_optimizer"),o=require("./optimizers/optimizer_constructors"),a=require("./optimizers/rmsprop_optimizer"),p=require("./optimizers/sgd_optimizer");m.MomentumOptimizer,p.SGDOptimizer,r.AdadeltaOptimizer,i.AdagradOptimizer,a.RMSPropOptimizer,t.AdamaxOptimizer,e.AdamOptimizer;const s={sgd:o.OptimizerConstructors.sgd,momentum:o.OptimizerConstructors.momentum,adadelta:o.OptimizerConstructors.adadelta,adagrad:o.OptimizerConstructors.adagrad,rmsprop:o.OptimizerConstructors.rmsprop,adamax:o.OptimizerConstructors.adamax,adam:o.OptimizerConstructors.adam};exports.train=s;
},{"./optimizers/adadelta_optimizer":"NZz8","./optimizers/adagrad_optimizer":"oWMZ","./optimizers/adam_optimizer":"K7FB","./optimizers/adamax_optimizer":"NenH","./optimizers/momentum_optimizer":"KNfn","./optimizers/optimizer_constructors":"UCbu","./optimizers/rmsprop_optimizer":"dtrn","./optimizers/sgd_optimizer":"jyih"}],"mxOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextFrame=t;const e=(()=>"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e())();function t(){return new Promise(t=>e(()=>t()))}
},{}],"Toan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsConsistent=n,exports.computeOutShape=o;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(t,r){const n=t[0].length;t.forEach((t,r)=>{e.assert(t.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same `+`as the rank of the rest (${n})`)}),e.assert(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=t[0];t.forEach((t,a)=>{for(let s=0;s<n;s++)e.assert(s===r||t[s]===o[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${a}.`)})}function o(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}
},{"../util":"P6nv"}],"iHyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeOptimalWindowSize=r,exports.PARALLELIZE_THRESHOLD=void 0;var e=require("../util");const t=30;function r(r){return r<=t?r:(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)))}exports.PARALLELIZE_THRESHOLD=t;
},{"../util":"P6nv"}],"eAkN":[function(require,module,exports) {
"use strict";function e(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageCenter=e;
},{}],"bsd6":[function(require,module,exports) {
"use strict";function e(e,t,s,o=!0){let u=[];if(o)(u=u.concat(t.slice(0))).push(e[0]/s),u=u.concat(e.slice(1));else{u=u.concat(e[0]);const s=t.length;for(let o=0;o<s;++o)u=u.concat([e[o+1]/t[o],t[o]]);u=u.concat(e.slice(s+1))}return u}function t(e,t,s=!0){const o=[];if(s){o.push(t);for(let s=t+1;s<e;++s)s<=2*t?(o.push(s),o.push(s-(t+1))):o.push(s)}else{const s=[],u=[];for(let o=1;o<e;++o)o>=2*t+1||o%2==1?u.push(o):s.push(o);o.push(...s),o.push(0),o.push(...u)}return o}function s(e,t,s,o=!0){const u=[];o?u.push(e[0]/s):u.push(e[0]*s);for(let n=1;n<e.length;++n)n<=t.length?o?u.push(t[n-1]*e[n]):u.push(e[n]/t[n-1]):u.push(e[n]);return u}function o(e,t){const s=[0];for(let o=0;o<t;++o)s.push(e[o][0]);return s}function u(e,t,s){const o=e.slice(0,1);for(let u=0;u<s;++u)o.push(e[u+1]-t[u][0]-t[u][1]);return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReshaped=e,exports.getPermuted=t,exports.getReshapedPermuted=s,exports.getSliceBeginCoords=o,exports.getSliceSize=u;
},{}],"ssng":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SELU_SCALE=exports.SELU_SCALEALPHA=void 0;const e=1.7580993408473768;exports.SELU_SCALEALPHA=e;const t=1.0507009873554805;exports.SELU_SCALE=t;
},{}],"iVXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERF_A5=exports.ERF_A4=exports.ERF_A3=exports.ERF_A2=exports.ERF_A1=exports.ERF_P=void 0;const t=.3275911;exports.ERF_P=t;const o=.254829592;exports.ERF_A1=o;const s=-.284496736;exports.ERF_A2=s;const e=1.421413741;exports.ERF_A3=e;const r=-1.453152027;exports.ERF_A4=r;const p=1.061405429;exports.ERF_A5=p;
},{}],"EnTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warn=o,exports.log=n;var e=require("./environment");function o(...o){(0,e.env)().getBool("IS_TEST")||console.warn(...o)}function n(...o){(0,e.env)().getBool("IS_TEST")||console.log(...o)}
},{"./environment":"Fbeg"}],"F59n":[function(require,module,exports) {
"use strict";function t(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${e.length}.`);const r=new Float32Array(2*t.length);for(let n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function e(t){const e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function r(t){const e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=0;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function n(t){const e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=2;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function o(t,e){return{real:t[2*e],imag:t[2*e+1]}}function a(t,e,r,n){t[2*n]=e,t[2*n+1]=r}function l(t,e){const r=new Float32Array(t/2),n=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const a=(e?2:-2)*Math.PI*(o/t);r[o]=Math.cos(a),n[o]=Math.sin(a)}return{real:r,imag:n}}function h(t,e,r){const n=(r?2:-2)*Math.PI*(t/e);return{real:Math.cos(n),imag:Math.sin(n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeRealAndImagArrays=t,exports.splitRealAndImagArrays=e,exports.complexWithEvenIndex=r,exports.complexWithOddIndex=n,exports.getComplexWithIndex=o,exports.assignToTypedArray=a,exports.exponents=l,exports.exponent=h;
},{}],"Z8ze":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareSplitSize=s;var e=require("../util");function s(s,t,r=0){let i=[];if("number"==typeof t)(0,e.assert)(s.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(s.shape[r]/t);else{const a=t.reduce((e,s)=>(-1===s&&(e+=1),e),0);(0,e.assert)(a<=1,()=>"There should be only one negative value in split array.");const n=t.indexOf(-1);if(-1!==n){const e=t.reduce((e,s)=>s>0?e+s:e);t[n]=s.shape[r]-e}(0,e.assert)(s.shape[r]===t.reduce((e,s)=>e+s),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}
},{"../util":"P6nv"}],"U497":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.segOpComputeOptimalWindowSize=r,exports.computeOutShape=s,exports.collectGatherOpShapeInfo=o;var e=require("../util"),t=require("./reduce_util");function r(r,s){let o,h=!1;for(r<=t.PARALLELIZE_THRESHOLD?(o=r,h=!0):o=(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)));!h;)o>s||o===r?h=!0:o=(0,e.nearestDivisor)(r,o+1);return o}function s(e,t,r){const s=[],o=e.length;for(let h=0;h<o;h++)h!==t?s.push(e[h]):s.push(r);return s}function o(e,t,r,s){const o=t.shape.length,h=e.shape.length;if(0!==s&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>h)throw new Error(`batchDims (${s}) must be less than rank(x) (\n    ${h}).`);if(r<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${r}).`);for(let l=0;l<s;++l)if(e.shape[l]!==t.shape[l])throw new Error(`x.shape[${l}]: ${e.shape[l]} should be equal to indices.shape[${l}]: ${t.shape[l]}.`);const a=e.shape[r],p=[];let i=1,u=1,n=1;for(let l=0;l<s;++l)p.push(e.shape[l]),i*=e.shape[l];for(let l=s;l<r;l++)p.push(e.shape[l]),u*=e.shape[l];for(let l=s;l<o;l++)p.push(t.shape[l]);for(let l=r+1;l<h;l++)p.push(e.shape[l]),n*=e.shape[l];return{batchSize:i,sliceSize:n,outerSize:u,dimSize:a,outputShape:p}}
},{"../util":"P6nv","./reduce_util":"iHyk"}],"yei0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={castTensor:!0,reshapeTensor:!0,fromUint8ToStringArray:!0,fromStringArrayToUint8:!0,slice_util:!0,upcastType:!0,segment_util:!0};exports.castTensor=w,exports.reshapeTensor=E,exports.fromUint8ToStringArray=k,exports.fromStringArrayToUint8=M,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return y.upcastType}}),exports.segment_util=exports.slice_util=void 0;var t=require("../engine"),r=require("../ops/cast"),o=require("../ops/scalar"),n=require("../ops/zeros"),s=require("../util"),u=require("../ops/axis_util");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var p=require("../ops/broadcast_util");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===p[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var c=require("../ops/concat_util");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===c[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var i=require("../ops/conv_util");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===i[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var a=require("../ops/fused_util");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var l=require("../ops/reduce_util");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===l[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var f=q(require("../ops/slice_util"));exports.slice_util=f;var y=require("../types"),d=require("../ops/rotate_util");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===d[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))});var b=require("../ops/array_ops_util");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===b[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("../ops/gather_nd_util");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===O[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var x=require("../ops/scatter_nd_util");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===x[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var _=require("../ops/selu_util");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===_[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var j=require("../ops/erf_util");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===j[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var h=require("../log");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===h[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return h[t]}}))});var P=require("../backends/complex_util");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===P[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var g=require("../ops/split_util");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===g[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return g[t]}}))});var m=q(require("../ops/segment_util"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}function w(e,u,p){if("complex64"===u){if("complex64"===e.dtype)return e.clone();const t=(0,n.zeros)(e.shape),o=(0,r.cast)(e,"float32"),s=p.complex(o,t);return t.dispose(),o.dispose(),s}if(!(0,s.hasEncodingLoss)(e.dtype,u))return t.ENGINE.makeTensorFromDataId(e.dataId,e.shape,u);if("complex64"===e.dtype){const t=p.real(e),o=(0,r.cast)(t,u);return t.dispose(),o}if("int32"===u)return p.int(e);if("bool"===u){const t=(0,o.scalar)(0,e.dtype),r=p.notEqual(e,t);return t.dispose(),r}throw new Error(`Error in Cast: failed to cast ${e.dtype} to ${u}`)}function E(e,r){return t.ENGINE.makeTensorFromDataId(e.dataId,r,e.dtype)}function k(e){try{return e.map(e=>(0,s.decodeString)(e))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function M(e){return e.map(e=>(0,s.encodeString)(e))}exports.segment_util=m;
},{"../engine":"Nc3Y","../ops/cast":"qqq3","../ops/scalar":"Ay42","../ops/zeros":"R5fo","../util":"P6nv","../ops/axis_util":"DsMP","../ops/broadcast_util":"Xh9J","../ops/concat_util":"Toan","../ops/conv_util":"Evju","../ops/fused_util":"mypO","../ops/reduce_util":"iHyk","../ops/slice_util":"Quoj","../types":"Grh1","../ops/rotate_util":"eAkN","../ops/array_ops_util":"bsd6","../ops/gather_nd_util":"ZyFe","../ops/scatter_nd_util":"H15o","../ops/selu_util":"ssng","../ops/erf_util":"iVXL","../log":"EnTq","../backends/complex_util":"F59n","../ops/split_util":"Z8ze","../ops/segment_util":"U497"}],"F9kw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nonMaxSuppressionV3Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV3Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV4Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV4Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV5Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV5Impl}}),Object.defineProperty(exports,"whereImpl",{enumerable:!0,get:function(){return r.whereImpl}});var e=require("./non_max_suppression_impl"),r=require("./where_impl");
},{"./non_max_suppression_impl":"zkpa","./where_impl":"tgEp"}],"aWHA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={io:!0,math:!0,browser:!0,gather_util:!0,scatter_util:!0,slice_util:!0,serialization:!0,tensor_util:!0,test_util:!0,util:!0,version_core:!0,AdadeltaOptimizer:!0,AdagradOptimizer:!0,AdamOptimizer:!0,AdamaxOptimizer:!0,MomentumOptimizer:!0,Optimizer:!0,RMSPropOptimizer:!0,SGDOptimizer:!0,Tensor:!0,TensorBuffer:!0,Variable:!0,Rank:!0,sumOutType:!0,upcastType:!0,Reduction:!0,customGrad:!0,grad:!0,grads:!0,valueAndGrad:!0,valueAndGrads:!0,variableGrads:!0,Environment:!0,env:!0,ENV:!0,nextFrame:!0,backend_util:!0,device_util:!0,kernel_impls:!0,KernelBackend:!0,DataStorage:!0};Object.defineProperty(exports,"version_core",{enumerable:!0,get:function(){return l.version}}),Object.defineProperty(exports,"AdadeltaOptimizer",{enumerable:!0,get:function(){return d.AdadeltaOptimizer}}),Object.defineProperty(exports,"AdagradOptimizer",{enumerable:!0,get:function(){return m.AdagradOptimizer}}),Object.defineProperty(exports,"AdamOptimizer",{enumerable:!0,get:function(){return f.AdamOptimizer}}),Object.defineProperty(exports,"AdamaxOptimizer",{enumerable:!0,get:function(){return b.AdamaxOptimizer}}),Object.defineProperty(exports,"MomentumOptimizer",{enumerable:!0,get:function(){return O.MomentumOptimizer}}),Object.defineProperty(exports,"Optimizer",{enumerable:!0,get:function(){return x.Optimizer}}),Object.defineProperty(exports,"RMSPropOptimizer",{enumerable:!0,get:function(){return y.RMSPropOptimizer}}),Object.defineProperty(exports,"SGDOptimizer",{enumerable:!0,get:function(){return _.SGDOptimizer}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return g.Tensor}}),Object.defineProperty(exports,"TensorBuffer",{enumerable:!0,get:function(){return g.TensorBuffer}}),Object.defineProperty(exports,"Variable",{enumerable:!0,get:function(){return g.Variable}}),Object.defineProperty(exports,"Rank",{enumerable:!0,get:function(){return j.Rank}}),Object.defineProperty(exports,"sumOutType",{enumerable:!0,get:function(){return j.sumOutType}}),Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return j.upcastType}}),Object.defineProperty(exports,"Reduction",{enumerable:!0,get:function(){return P.Reduction}}),Object.defineProperty(exports,"customGrad",{enumerable:!0,get:function(){return h.customGrad}}),Object.defineProperty(exports,"grad",{enumerable:!0,get:function(){return h.grad}}),Object.defineProperty(exports,"grads",{enumerable:!0,get:function(){return h.grads}}),Object.defineProperty(exports,"valueAndGrad",{enumerable:!0,get:function(){return h.valueAndGrad}}),Object.defineProperty(exports,"valueAndGrads",{enumerable:!0,get:function(){return h.valueAndGrads}}),Object.defineProperty(exports,"variableGrads",{enumerable:!0,get:function(){return h.variableGrads}}),Object.defineProperty(exports,"Environment",{enumerable:!0,get:function(){return A.Environment}}),Object.defineProperty(exports,"env",{enumerable:!0,get:function(){return A.env}}),Object.defineProperty(exports,"ENV",{enumerable:!0,get:function(){return A.ENV}}),Object.defineProperty(exports,"nextFrame",{enumerable:!0,get:function(){return M.nextFrame}}),Object.defineProperty(exports,"KernelBackend",{enumerable:!0,get:function(){return E.KernelBackend}}),Object.defineProperty(exports,"DataStorage",{enumerable:!0,get:function(){return E.DataStorage}}),exports.kernel_impls=exports.device_util=exports.backend_util=exports.util=exports.test_util=exports.tensor_util=exports.serialization=exports.slice_util=exports.scatter_util=exports.gather_util=exports.browser=exports.math=exports.io=void 0;var r=D(require("./io/io"));exports.io=r;var t=D(require("./math"));exports.math=t;var n=D(require("./ops/browser"));exports.browser=n;var i=D(require("./ops/gather_nd_util"));exports.gather_util=i;var o=D(require("./ops/scatter_nd_util"));exports.scatter_util=o;var u=D(require("./ops/slice_util"));exports.slice_util=u;var a=D(require("./serialization"));exports.serialization=a;var p=D(require("./tensor_util"));exports.tensor_util=p;var s=D(require("./test_util"));exports.test_util=s;var c=D(require("./util"));exports.util=c;var l=require("./version"),d=require("./optimizers/adadelta_optimizer"),m=require("./optimizers/adagrad_optimizer"),f=require("./optimizers/adam_optimizer"),b=require("./optimizers/adamax_optimizer"),O=require("./optimizers/momentum_optimizer"),x=require("./optimizers/optimizer"),y=require("./optimizers/rmsprop_optimizer"),_=require("./optimizers/sgd_optimizer"),g=require("./tensor"),j=require("./types"),v=require("./ops/ops");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===v[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return v[r]}}))});var P=require("./ops/loss_ops_utils"),z=require("./train");Object.keys(z).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===z[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return z[r]}}))});var q=require("./globals");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===q[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var k=require("./kernel_registry");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===k[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var h=require("./gradients"),A=require("./environment"),M=require("./browser_util"),w=D(require("./backends/backend_util"));exports.backend_util=w;var G=D(require("./device_util"));exports.device_util=G;var T=D(require("./backends/kernel_impls"));exports.kernel_impls=T;var E=require("./backends/backend"),R=require("./kernel_names");function S(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(S=function(e){return e?t:r})(e)}function D(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}Object.keys(R).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===R[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return R[r]}}))});
},{"./io/io":"EwEE","./math":"bMAY","./ops/browser":"yVDt","./ops/gather_nd_util":"ZyFe","./ops/scatter_nd_util":"H15o","./ops/slice_util":"Quoj","./serialization":"HDfU","./tensor_util":"fpST","./test_util":"ip5I","./util":"P6nv","./version":"SdA6","./optimizers/adadelta_optimizer":"NZz8","./optimizers/adagrad_optimizer":"oWMZ","./optimizers/adam_optimizer":"K7FB","./optimizers/adamax_optimizer":"NenH","./optimizers/momentum_optimizer":"KNfn","./optimizers/optimizer":"uOca","./optimizers/rmsprop_optimizer":"dtrn","./optimizers/sgd_optimizer":"jyih","./tensor":"DTHt","./types":"Grh1","./ops/ops":"R1mJ","./ops/loss_ops_utils":"LIoB","./train":"GtIJ","./globals":"GWnL","./kernel_registry":"wJg6","./gradients":"yPDw","./environment":"Fbeg","./browser_util":"mxOd","./backends/backend_util":"yei0","./device_util":"GUPw","./backends/kernel_impls":"F9kw","./backends/backend":"X4AU","./kernel_names":"sdEe"}],"ElQS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Abs,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,s.mul)(e,(0,t.step)((0,r.cast)(a,"float32"),-1))}}};exports.absGradConfig=o;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/mul":"k2PI","../ops/step":"e2o4"}],"JeEo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/neg"),a=require("../ops/scalar"),u=require("../ops/sqrt"),t=require("../ops/square"),i=require("../ops/sub");const n={kernelName:e.Acos,inputsToSave:["x"],gradFunc:(e,n)=>{const[c]=n;return{x:()=>{const n=(0,t.square)((0,r.cast)(c,"float32")),p=(0,u.sqrt)((0,i.sub)((0,a.scalar)(1),n));return(0,o.neg)((0,s.div)(e,p))}}}};exports.acosGradConfig=n;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/neg":"iGYA","../ops/scalar":"Ay42","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex"}],"xSyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/sqrt"),t=require("../ops/square"),u=require("../ops/sub");const a={kernelName:e.Acosh,inputsToSave:["x"],gradFunc:(e,a)=>{const[i]=a;return{x:()=>{const a=(0,o.sqrt)((0,u.sub)((0,t.square)((0,r.cast)(i,"float32")),1));return(0,s.div)(e,a)}}}};exports.acoshGradConfig=a;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex"}],"FPsn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/reshape"),n=require("../ops/sum");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}const s={kernelName:e.Add,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a,u=r.assertAndGetBroadcastShape(o.shape,s.shape);return{a:()=>{let a=e;const s=r.getReductionAxes(o.shape,u);return s.length>0&&(a=(0,n.sum)(a,s)),(0,t.reshape)(a,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(s.shape,u);return o.length>0&&(a=(0,n.sum)(a,o)),(0,t.reshape)(a,s.shape)}}}};exports.addGradConfig=s;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/reshape":"QI4k","../ops/sum":"ITAy"}],"eWqU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addNGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.AddN,saveAllInputs:!0,gradFunc:(e,r)=>{const d={};return r.forEach((r,n)=>{d[n]=(()=>e.clone())}),d}};exports.addNGradConfig=r;
},{"../kernel_names":"sdEe"}],"uSdy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ArgMax,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,r.zerosLike)(a)}}};exports.argMaxGradConfig=o;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"pXdU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const n={kernelName:e.ArgMin,inputsToSave:["x"],gradFunc:(e,n)=>{const[o]=n;return{x:()=>(0,r.zerosLike)(o)}}};exports.argMinGradConfig=n;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"aEuk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/scalar"),i=require("../ops/sqrt"),o=require("../ops/square"),u=require("../ops/sub");const t={kernelName:e.Asin,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.div)(e,(0,i.sqrt)((0,u.sub)((0,a.scalar)(1),(0,o.square)((0,r.cast)(n,"float32")))))}}};exports.asinGradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/scalar":"Ay42","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex"}],"u5uO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/cast"),a=require("../ops/div"),o=require("../ops/scalar"),i=require("../ops/sqrt"),t=require("../ops/square");const n={kernelName:e.Asinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[u]=n;return{x:()=>{const n=(0,i.sqrt)((0,r.add)((0,o.scalar)(1),(0,t.square)((0,s.cast)(u,"float32"))));return(0,a.div)(e,n)}}}};exports.asinhGradConfig=n;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/scalar":"Ay42","../ops/sqrt":"iJpu","../ops/square":"mJRX"}],"TJcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/div"),t=require("../ops/mul"),u=require("../ops/neg"),n=require("../ops/reshape"),o=require("../ops/square"),p=require("../ops/sum");const i={kernelName:e.Atan2,inputsToSave:["a","b"],gradFunc:(e,i)=>{const[d,q]=i,c=(0,s.assertAndGetBroadcastShape)(d.shape,q.shape);return{a:()=>{const u=(0,r.add)((0,o.square)(d),(0,o.square)(q));let i=(0,t.mul)(e,(0,a.div)(q,u));const h=(0,s.getReductionAxes)(d.shape,c);return h.length>0&&(i=(0,p.sum)(i,h)),(0,n.reshape)(i,d.shape)},b:()=>{const i=(0,r.add)((0,o.square)(d),(0,o.square)(q));let h=(0,u.neg)((0,t.mul)(e,(0,a.div)(d,i)));const l=(0,s.getReductionAxes)(q.shape,c);return l.length>0&&(h=(0,p.sum)(h,l)),(0,n.reshape)(h,q.shape)}}}};exports.atan2GradConfig=i;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/broadcast_util":"Xh9J","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/reshape":"QI4k","../ops/square":"mJRX","../ops/sum":"ITAy"}],"X7rA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),a=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/square");const o={kernelName:e.Atan,inputsToSave:["x"],gradFunc:(e,o)=>{const[n]=o;return{x:()=>(0,s.div)(e,(0,r.add)((0,t.square)((0,a.cast)(n,"float32")),1))}}};exports.atanGradConfig=o;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/square":"mJRX"}],"z0kM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/square"),o=require("../ops/sub"),t=require("../ops/scalar");const u={kernelName:e.Atanh,inputsToSave:["x"],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,s.div)(e,(0,o.sub)((0,t.scalar)(1),(0,a.square)((0,r.cast)(i,"float32"))))}}};exports.atanhGradConfig=u;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/square":"mJRX","../ops/sub":"dGex","../ops/scalar":"Ay42"}],"ikLd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3dGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),a=u(require("./conv_util")),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function d(o,s,u,d,p=[1,1,1],l,c){const f=(0,t.convertToTensor)(o,"dy","avgPool3dGrad"),g=(0,t.convertToTensor)(s,"input","avgPool3dGrad");let v=f,h=g,P=!1;4===g.rank&&(P=!0,v=(0,i.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]]),h=(0,i.reshape)(g,[1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]])),n.assert(5===v.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+`${v.rank}.`),n.assert(5===h.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+`${h.rank}.`),n.assert(a.eitherStridesOrDilationsAreOne(d,p),()=>"Error in avgPool3dGrad: Either strides or dilations "+`must be 1. Got strides ${d} and dilations '${p}'`),null!=c&&n.assert(n.isInt(l),()=>"Error in avgPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${c} but got pad ${l}.`);const b={dy:v,input:h},k={filterSize:u,strides:d,dilations:p,pad:l,dimRoundingMode:c},y=e.ENGINE.runKernel(r.AvgPool3DGrad,b,k);return P?(0,i.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const p=(0,o.op)({avgPool3dGrad_:d});exports.avgPool3dGrad=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"u0xB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_3d_grad");const r={kernelName:e.AvgPool3D,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[d]=r,{filterSize:i,strides:n,dilations:s,pad:t,dimRoundingMode:l}=a,g=null==s?[1,1,1]:s;return{x:()=>(0,o.avgPool3dGrad)(e,d,i,n,g,t,l)}}};exports.avgPool3DGradConfig=r;
},{"../kernel_names":"sdEe","../ops/avg_pool_3d_grad":"ikLd"}],"Fvtg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),a=require("./operation"),o=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function p(a,s,u,p,i){const l=(0,t.convertToTensor)(a,"dy","avgPoolGrad"),d=(0,t.convertToTensor)(s,"input","avgPoolGrad");n.assert(d.rank===l.rank,()=>`Rank of input (${d.rank}) does not match rank of dy (${l.rank})`);let f=d,c=l,k=!1;3===d.rank&&(k=!0,f=(0,o.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),c=(0,o.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),n.assert(4===c.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+`${c.rank}.`),n.assert(4===f.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+`${f.rank}.`);const v={dy:c,input:f},h={filterSize:u,strides:p,pad:i},g=e.ENGINE.runKernel(r.AvgPoolGrad,v,h);return k?(0,o.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const i=(0,a.op)({avgPoolGrad_:p});exports.avgPoolGrad=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"dUPW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_grad");const r={kernelName:e.AvgPool,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[s]=r,{filterSize:t,strides:i,pad:n}=a;return{x:()=>(0,o.avgPoolGrad)(e,s,t,i,n)}}};exports.avgPoolGradConfig=r;
},{"../kernel_names":"sdEe","../ops/avg_pool_grad":"Fvtg"}],"Czv4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulGradConfig=void 0;var a=require("../kernel_names"),t=require("../ops/mat_mul");const e={kernelName:a.BatchMatMul,inputsToSave:["a","b"],gradFunc:(a,e,r)=>{const[u,l]=e,{transposeA:s,transposeB:M}=r;return s||M?!s&&M?{a:()=>(0,t.matMul)(a,l,!1,!1),b:()=>(0,t.matMul)(a,u,!0,!1)}:s&&!M?{a:()=>(0,t.matMul)(l,a,!1,!0),b:()=>(0,t.matMul)(u,a,!1,!1)}:{a:()=>(0,t.matMul)(l,a,!0,!0),b:()=>(0,t.matMul)(a,u,!0,!0)}:{a:()=>(0,t.matMul)(a,l,!1,!0),b:()=>(0,t.matMul)(u,a,!0,!1)}}};exports.batchMatMulGradConfig=e;
},{"../kernel_names":"sdEe","../ops/mat_mul":"mMWq"}],"CDA7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/space_to_batch_nd");const a={kernelName:e.BatchToSpaceND,gradFunc:(e,a,o)=>{const{blockShape:c,crops:t}=o;return{x:()=>(0,r.spaceToBatchND)(e,c,t)}}};exports.batchToSpaceNDGradConfig=a;
},{"../kernel_names":"sdEe","../ops/space_to_batch_nd":"rWul"}],"Gxda":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastToGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/sum");const o={kernelName:e.BroadcastTo,gradFunc:(e,o,t)=>{const a=t,s=a.inputShape,n=a.shape,c=Array.from(n);for(let r=s.length-1;r>=0;r--)if(s[r]===n[r])c[r]=1;else if(1!==s[r])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${n}].`);const d=[];for(let r=0;r<c.length;r++)c[r]>1&&d.push(r);return{x:()=>(0,r.sum)(e,d,!0)}}};exports.broadcastToGradConfig=o;
},{"../kernel_names":"sdEe","../ops/sum":"ITAy"}],"ZcTz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.castGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.Cast,gradFunc:e=>({x:()=>e.clone()})};exports.castGradConfig=r;
},{"../kernel_names":"sdEe"}],"MI0y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.Ceil,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.ceilGradConfig=i;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"ckME":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater_equal"),l=require("../ops/less_equal"),a=require("../ops/logical_and"),i=require("../ops/where"),s=require("../ops/zeros_like");const u={kernelName:e.ClipByValue,inputsToSave:["x"],gradFunc:(e,u,o)=>{const[p]=u,{clipValueMin:n,clipValueMax:t}=o;return{x:()=>(0,i.where)((0,a.logicalAnd)((0,r.greaterEqual)(p,n),(0,l.lessEqual)(p,t)),e,(0,s.zerosLike)(e))}}};exports.clipByValueGradConfig=u;
},{"../kernel_names":"sdEe","../ops/greater_equal":"Dbo2","../ops/less_equal":"FvS1","../ops/logical_and":"lYzt","../ops/where":"BsuI","../ops/zeros_like":"PDcB"}],"Xh8o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbsGradConfig=void 0;var e=require("../kernel_names"),r=require("./Abs_grad");const o={kernelName:e.ComplexAbs,inputsToSave:["x"],gradFunc:r.absGradConfig.gradFunc};exports.complexAbsGradConfig=o;
},{"../kernel_names":"sdEe","./Abs_grad":"ElQS"}],"keWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/split"),a=require("../util");const s={kernelName:e.Concat,saveAllInputs:!0,gradFunc:(e,s,t)=>{const n=s.map(e=>e.shape),{axis:o}=t,p=(0,a.parseAxisParam)(o,s[0].shape)[0],i=n.map(e=>e[p]);return(0,r.split)(e,i,p).map(e=>()=>e)}};exports.concatGradConfig=s;
},{"../kernel_names":"sdEe","../ops/split":"VA1I","../util":"P6nv"}],"f1tQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d_backprop_filter"),t=require("../ops/conv2d_backprop_input"),n=i(require("../ops/conv_util")),o=i(require("../util"));function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var p=o?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(n,i,p):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Conv2D,inputsToSave:["x","filter"],gradFunc:(e,a,i)=>{const[p,u]=a,{dilations:s,strides:c,pad:l,dataFormat:f}=i;return o.assert(n.tupleValuesAreOne(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>(0,t.conv2DBackpropInput)(p.shape,e,u,c,l,f),filter:()=>(0,r.conv2DBackpropFilter)(p,e,u.shape,c,l,f)}}};exports.conv2DGradConfig=p;
},{"../kernel_names":"sdEe","../ops/conv2d_backprop_filter":"JjEd","../ops/conv2d_backprop_input":"GLx7","../ops/conv_util":"Evju","../util":"P6nv"}],"gRvo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInputGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d"),o=require("../ops/conv2d_backprop_filter");const n={kernelName:e.Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(e,n,p)=>{const[t,a]=n,{strides:d,pad:c,dataFormat:i,dimRoundingMode:s}=p;return{dy:()=>(0,r.conv2d)(e,a,d,c,i,1,s),filter:()=>(0,o.conv2DBackpropFilter)(e,t,a.shape,d,c,i,s)}}};exports.conv2DBackpropInputGradConfig=n;
},{"../kernel_names":"sdEe","../ops/conv2d":"oJQk","../ops/conv2d_backprop_filter":"JjEd"}],"g2Xi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=o(require("../util")),n=require("./operation"),a=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function s(n,p,o,s,i){let u=n;4===n.rank&&(u=(0,a.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let l=p;4===l.rank&&(l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),t.assert(5===u.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${u.shape}.`),t.assert(5===l.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${l.shape}.`),t.assert(5===o.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${o}.`),t.assert(u.shape[4]===o[3],()=>`Error in conv3dDerFilter: depth of input ${u.shape[4]}) must `+`match input depth in filter (${o[3]}.`),t.assert(l.shape[4]===o[4],()=>`Error in conv3dDerFilter: depth of dy (${l.shape[4]}) must `+`match output depth for filter (${o[4]}).`);const c={x:u,dy:l},h={strides:s,pad:i,filterShape:o};return e.ENGINE.runKernel(r.Conv3DBackpropFilterV2,c,h)}const i=(0,n.op)({conv3DBackpropFilter_:s});exports.conv3DBackpropFilter=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"sdO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv3d_backprop_filter"),t=require("../ops/conv3d_backprop_input"),n=require("../ops/conv_util"),o=a(require("../util"));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=o?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(n,a,p):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Conv3D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const{dilations:p,strides:u,pad:s}=a;o.assert((0,n.tupleValuesAreOne)(p),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${p}'`);const[c,l]=i;return{x:()=>(0,t.conv3DBackpropInput)(c.shape,e,l,u,s),filter:()=>(0,r.conv3DBackpropFilter)(c,e,l.shape,u,s)}}};exports.conv3DGradConfig=p;
},{"../kernel_names":"sdEe","../ops/conv3d_backprop_filter":"g2Xi","../ops/conv3d_backprop_input":"bEFz","../ops/conv_util":"Evju","../util":"P6nv"}],"XliK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/neg"),n=require("../ops/sin");const t={kernelName:e.Cos,inputsToSave:["x"],gradFunc:(e,t)=>{const[i]=t;return{x:()=>(0,s.mul)((0,o.neg)((0,n.sin)((0,r.cast)(i,"float32"))),e)}}};exports.cosGradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/sin":"AdWB"}],"VVun":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/sinh");const t={kernelName:e.Cosh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.mul)((0,o.sinh)((0,r.cast)(n,"float32")),e)}}};exports.coshGradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/mul":"k2PI","../ops/sinh":"fN3P"}],"KT66":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/cumsum"),u=require("../ops/transpose");const t={kernelName:e.Cumsum,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[o]=t,{axis:i,exclusive:a,reverse:m}=n;return{x:()=>{const t=(0,r.getAxesPermutation)([i],o.rank);let n=(0,s.cumsum)(e,i,a,!m);return null!=t&&(n=(0,u.transpose)(n,t)),n}}}};exports.cumsumGradConfig=t;
},{"../kernel_names":"sdEe","../ops/axis_util":"DsMP","../ops/cumsum":"Kzhc","../ops/transpose":"uQkx"}],"xQGO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeGradConfig=void 0;var e=require("../kernel_names"),t=a(require("../ops/conv_util")),r=require("../ops/depthwise_conv2d_native_backprop_filter"),n=require("../ops/depthwise_conv2d_native_backprop_input"),i=a(require("../util"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}const s={kernelName:e.DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(e,o,a)=>{const{dilations:s,strides:d,pad:p,dimRoundingMode:u}=a,l=null==s?[1,1]:s;i.assert(t.tupleValuesAreOne(l),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${l}'`);const[f,v]=o;return i.assert(4===f.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${f.rank}.`),i.assert(4===v.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${v.rank}.`),i.assert(f.shape[3]===v.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${f.shape[3]}) must match the inChannels dimension `+`in filter ${v.shape[2]}.`),i.assert(t.eitherStridesOrDilationsAreOne(d,l),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${d} and dilations `+`'${l}'.`),null!=u&&i.assert(i.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${u} but got pad ${p}.`),{x:()=>(0,n.depthwiseConv2dNativeBackpropInput)(f.shape,e,v,d,p,s,u),filter:()=>(0,r.depthwiseConv2dNativeBackpropFilter)(f,e,v.shape,d,p,s,u)}}};exports.depthwiseConv2dNativeGradConfig=s;
},{"../kernel_names":"sdEe","../ops/conv_util":"Evju","../ops/depthwise_conv2d_native_backprop_filter":"pXLg","../ops/depthwise_conv2d_native_backprop_input":"mUFN","../util":"P6nv"}],"VsH5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.Dilation2D,inputsToSave:["x","filter"],gradFunc:(i,n,t)=>{const[o,l]=n,a={x:o,filter:l,dy:i},d={x:o,filter:l,dy:i};return{x:()=>e.ENGINE.runKernel(r.Dilation2DBackpropInput,a,t),filter:()=>e.ENGINE.runKernel(r.Dilation2DBackpropFilter,d,t)}}};exports.dilation2dGradConfig=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"NTdC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const n={kernelName:r.Elu,outputsToSave:[!0],gradFunc:(n,u)=>{const[o]=u,t={dy:n,y:o};return{x:()=>e.ENGINE.runKernel(r.EluGrad,t)}}};exports.eluGradConfig=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"rek3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),s=require("../ops/mul"),u=require("../ops/neg"),o=require("../ops/square");const t={kernelName:e.Erf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=(0,s.mul)((0,r.exp)((0,u.neg)((0,o.square)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,s.mul)(e,a)}}};exports.erfGradConfig=t;
},{"../kernel_names":"sdEe","../ops/exp":"zsk9","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/square":"mJRX"}],"Y9DI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul");const o={kernelName:e.Exp,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,t)}}};exports.expGradConfig=o;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI"}],"VpmB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDimsGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reshape");const s={kernelName:e.ExpandDims,inputsToSave:["input"],gradFunc:(e,s)=>{const[n]=s;return{input:()=>(0,r.reshape)(e,n.shape)}}};exports.expandDimsGradConfig=s;
},{"../kernel_names":"sdEe","../ops/reshape":"QI4k"}],"xe2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul");const p={kernelName:e.Expm1,inputsToSave:["x"],gradFunc:(e,p)=>{const[s]=p;return{x:()=>(0,o.mul)(e,(0,r.exp)(s))}}};exports.expm1GradConfig=p;
},{"../kernel_names":"sdEe","../ops/exp":"zsk9","../ops/mul":"k2PI"}],"gPYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Floor,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.floorGradConfig=o;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"mHhM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/cast"),o=require("../ops/div"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),i=require("../ops/square"),n=require("../ops/sum");const p={kernelName:e.FloorDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,d=(0,r.assertAndGetBroadcastShape)(c.shape,l.shape);return{a:()=>{const t=(0,o.div)(e,(0,s.cast)(l,"float32")),a=(0,r.getReductionAxes)(c.shape,d);return a.length>0?(0,u.reshape)((0,n.sum)(t,a),c.shape):t},b:()=>{let p=(0,t.mul)(e,(0,s.cast)(c,"float32"));const h=(0,r.getReductionAxes)(l.shape,d);h.length>0&&(p=(0,u.reshape)((0,n.sum)(p,h),l.shape));const q=(0,i.square)(l);return(0,a.neg)((0,o.div)(p,(0,s.cast)(q,"float32")))}}}};exports.floorDivGradConfig=p;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/reshape":"QI4k","../ops/square":"mJRX","../ops/sum":"ITAy"}],"MxAQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedBatchNormGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/mul"),u=require("../ops/reshape"),l=require("../ops/rsqrt"),p=require("../ops/scalar"),t=require("../ops/sub"),n=require("../ops/sum"),o=require("../ops/tile");const m={kernelName:e.FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,m,h)=>{const{varianceEpsilon:i}=h,[c,d,q,f]=m,k=null==f?(0,p.scalar)(1):f,v=(0,s.getReductionAxes)(d.shape,c.shape),x=[];if(1===d.rank){for(let e=0;e<c.shape.length-1;++e)x.push(c.shape[e]);x.push(1)}const g=(0,t.sub)(c,d),b=(0,a.mul)(e,k),N=(0,l.rsqrt)((0,r.add)(q,(0,p.scalar)(i))),_=(0,a.mul)((0,a.mul)((0,a.mul)(N,N),N),(0,p.scalar)(-.5));return{x:()=>1===d.rank?(0,u.reshape)((0,a.mul)((0,a.mul)(e,(0,o.tile)((0,u.reshape)(N,[1,1,1,d.shape[0]]),x)),k),c.shape):(0,u.reshape)((0,a.mul)((0,a.mul)(e,N),k),c.shape),mean:()=>{let e=(0,a.mul)((0,a.mul)(N,(0,p.scalar)(-1)),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},variance:()=>{let e=(0,a.mul)((0,a.mul)(_,g),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},scale:()=>{const r=(0,a.mul)(g,N);let s=(0,a.mul)(e,r);return 1===d.rank&&(s=(0,n.sum)(s,v)),(0,u.reshape)(s,d.shape)},offset:()=>{let r=e;return 1===d.rank&&(r=(0,n.sum)(r,v)),(0,u.reshape)(r,d.shape)}}}};exports.fusedBatchNormGradConfig=m;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/broadcast_util":"Xh9J","../ops/mul":"k2PI","../ops/reshape":"QI4k","../ops/rsqrt":"XwKw","../ops/scalar":"Ay42","../ops/sub":"dGex","../ops/sum":"ITAy","../ops/tile":"mfii"}],"yxTd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/reshape"),t=require("../ops/transpose"),n=require("../ops/unsorted_segment_sum"),o=require("../util");const i={kernelName:e.GatherV2,inputsToSave:["x","indices"],gradFunc:(e,i,p)=>{const[l,c]=i,{axis:h}=p,g=(0,o.parseAxisParam)(h,l.shape)[0];return{x:()=>{const o=l.shape,i=c.size,p=o.slice(0,g),d=p.length,x=o.slice(h,o.length).slice(1),f=x.length,m=a(0,d),q=a(d+1,d+1+f),_=u([p,[i],x]),v=(0,s.reshape)(e,_),G=(0,s.reshape)(c,[i]),P=u([[d],m,q]),S=(0,t.transpose)(v,P);let k=(0,n.unsortedSegmentSum)(S,G,l.shape[g]);const A=(0,r.getUndoAxesPermutation)(P);return k=(0,t.transpose)(k,A)},indices:()=>c}}};function a(e,r){const s=[];for(let t=e;t<r;++t)s.push(t);return s}function u(e){const r=[];for(let s=0;s<e.length;++s)for(let t=0;t<e[s].length;++t)r.push(e[s][t]);return r}exports.gatherGradConfig=i;
},{"../kernel_names":"sdEe","../ops/axis_util":"DsMP","../ops/reshape":"QI4k","../ops/transpose":"uQkx","../ops/unsorted_segment_sum":"GWRE","../util":"P6nv"}],"hc7R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const a={kernelName:e.GreaterEqual,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a;return{a:()=>(0,r.zerosLike)(o),b:()=>(0,r.zerosLike)(s)}}};exports.greaterEqualGradConfig=a;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"W6R7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identityGradConfig=void 0;var e=require("../kernel_names"),t=require("../ops/cast");const r={kernelName:e.Identity,gradFunc:e=>({x:()=>(0,t.cast)(e,"float32")})};exports.identityGradConfig=r;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3"}],"lKGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.IsFinite,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isFiniteGradConfig=i;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"sqJA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsInf,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isInfGradConfig=s;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"gPIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsNan,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isNanGradConfig=s;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"SC7u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyReluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater"),a=require("../ops/mul"),u=require("../ops/where");const o={kernelName:e.LeakyRelu,inputsToSave:["x"],gradFunc:(e,o,s)=>{const[t]=o,{alpha:l}=s,n=(0,r.greater)(t,0);return{x:()=>(0,u.where)(n,e,(0,a.mul)(e,l))}}};exports.leakyReluGradConfig=o;
},{"../kernel_names":"sdEe","../ops/greater":"QdS7","../ops/mul":"k2PI","../ops/where":"BsuI"}],"etSi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),o=require("../ops/div");const d={kernelName:e.Log1p,inputsToSave:["x"],gradFunc:(e,d)=>{const[s]=d;return{x:()=>(0,o.div)(e,(0,r.add)(s,1))}}};exports.log1pGradConfig=d;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/div":"D8Fc"}],"GDRk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),o=require("../ops/div");const s={kernelName:e.Log,inputsToSave:["x"],gradFunc:(e,s)=>{const[t]=s;return{x:()=>(0,o.div)(e,(0,r.cast)(t,"float32"))}}};exports.logGradConfig=s;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc"}],"BAfN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul"),s=require("../ops/sub"),u=require("../ops/sum");const t={kernelName:e.LogSoftmax,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,a)=>{const[i]=t,{axis:n}=a;return{logits:()=>{const t=(0,r.exp)(i);return(0,s.sub)(e,(0,o.mul)((0,u.sum)(e,n,!0),t))}}}};exports.logSoftmaxGradConfig=t;
},{"../kernel_names":"sdEe","../ops/exp":"zsk9","../ops/mul":"k2PI","../ops/sub":"dGex","../ops/sum":"ITAy"}],"kRNN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalizationBackprop=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("./operation");function a(r,a,n,i=5,p=1,s=1,t=.5){const l={x:r,y:a,dy:n},c={depthRadius:i,bias:p,alpha:s,beta:t};return e.ENGINE.runKernel(o.LRNGrad,l,c)}const n=(0,r.op)({localResponseNormalizationBackprop_:a});exports.localResponseNormalizationBackprop=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","./operation":"JtaO"}],"mpRs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrnGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/local_response_normalization_backprop");const o={kernelName:e.LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,o,a)=>{const[n,s]=o,{depthRadius:t,bias:p,alpha:i,beta:l}=a;return{x:()=>(0,r.localResponseNormalizationBackprop)(n,s,e,t,p,i,l)}}};exports.lrnGradConfig=o;
},{"../kernel_names":"sdEe","../ops/local_response_normalization_backprop":"kRNN"}],"h2YN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gradForMinAndMax=o;var e=u(require("../ops/axis_util")),r=require("../ops/cast"),t=require("../ops/equal"),n=require("../ops/mul"),a=require("../ops/reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(p,u,o,i){return u.rank<o.rank&&(u=(0,a.reshape)(u,e.expandShapeToKeepDim(u.shape,i))),p.rank<o.rank&&(p=(0,a.reshape)(p,e.expandShapeToKeepDim(p.shape,i))),{x:()=>{return(0,n.mul)(p,(0,r.cast)((0,t.equal)(o,u),p.dtype))}}}
},{"../ops/axis_util":"DsMP","../ops/cast":"qqq3","../ops/equal":"WG94","../ops/mul":"k2PI","../ops/reshape":"QI4k"}],"KejH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxGradConfig=void 0;var e=require("../kernel_names"),r=a(require("../util")),t=require("./min_max_grad_util");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}return a.default=e,t&&t.set(e,a),a}const o={kernelName:e.Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,a)=>{const o=a,{reductionIndices:u}=o,i=n[0],p=n[1],f=r.parseAxisParam(u,i.shape),s=(0,t.gradForMinAndMax)(e,p,i,f);return{x:()=>s.x()}}};exports.maxGradConfig=o;
},{"../kernel_names":"sdEe","../util":"P6nv","./min_max_grad_util":"h2YN"}],"wKJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),a=require("../ops/greater_equal"),s=require("../ops/less"),u=require("../ops/mul");const t={kernelName:e.Maximum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[o,i]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.greaterEqual)(o,i),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.less)(o,i),"float32"))}}};exports.maximumGradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/greater_equal":"Dbo2","../ops/less":"Ndy5","../ops/mul":"k2PI"}],"rAJJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3dGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),a=u(require("../util")),o=u(require("./conv_util")),n=require("./operation"),s=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function d(n,i,u,d,p,l=[1,1,1],h,c){const f=(0,t.convertToTensor)(n,"dy","maxPool3dGrad"),m=(0,t.convertToTensor)(i,"input","maxPool3dGrad"),P=(0,t.convertToTensor)(u,"output","maxPool3dGrad");let k=f,b=m,x=P,G=!1;4===m.rank&&(G=!0,k=(0,s.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]]),b=(0,s.reshape)(m,[1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]]),x=(0,s.reshape)(P,[1,P.shape[0],P.shape[1],P.shape[2],P.shape[3]])),a.assert(5===k.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+`${k.rank}.`),a.assert(5===b.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+`${b.rank}.`),a.assert(5===x.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+`${x.rank}.`),a.assert(o.eitherStridesOrDilationsAreOne(p,l),()=>"Error in maxPool3dGrad: Either strides or dilations "+`must be 1. Got strides ${p} and dilations '${l}'`),null!=c&&a.assert(a.isInt(h),()=>"Error in maxPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${c} but got pad ${h}.`);const g={dy:k,input:b,output:x},v={filterSize:d,strides:p,dilations:l,pad:h,dimRoundingMode:c},y=e.ENGINE.runKernel(r.MaxPool3DGrad,g,v);return G?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const p=(0,n.op)({maxPool3dGrad_:d});exports.maxPool3dGrad=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"TipK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/max_pool_3d_grad");const r={kernelName:e.MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,r,a)=>{const[d,t]=r,{filterSize:i,strides:n,dilations:s,pad:l,dimRoundingMode:u}=a,x=null==s?[1,1,1]:s;return{x:()=>(0,o.maxPool3dGrad)(e,d,t,i,n,x,l,u)}}};exports.maxPool3DGradConfig=r;
},{"../kernel_names":"sdEe","../ops/max_pool_3d_grad":"rAJJ"}],"i6Te":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function a(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(a=function(r){return r?t:e})(r)}function u(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=a(e);if(t&&t.has(r))return t.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var i=o?Object.getOwnPropertyDescriptor(r,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=r[u]}return n.default=r,t&&t.set(r,n),n}function i(o,a,u,i,s,d,l){const p=(0,t.convertToTensor)(o,"dy","maxPoolGrad"),c=(0,t.convertToTensor)(a,"input","maxPoolGrad"),f=(0,t.convertToTensor)(u,"output","maxPoolGrad");n.assert(c.rank===p.rank,()=>`Rank of input (${c.rank}) does not match rank of dy `+`(${p.rank})`),n.assert(4===p.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+`${p.rank}.`),n.assert(4===c.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+`${c.rank}.`),null!=l&&n.assert(n.isInt(d),()=>"Error in maxPoolGrad: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${d}.`);const k={dy:p,input:c,output:f},m={filterSize:i,strides:s,pad:d,dimRoundingMode:l};return r.ENGINE.runKernel(e.MaxPoolGrad,k,m)}const s=(0,o.op)({maxPoolGrad_:i});exports.maxPoolGrad=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"CBRa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/max_pool_grad");const r={kernelName:e.MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,r,a)=>{const[t,s]=r,{filterSize:i,strides:n,pad:d}=a;return{x:()=>(0,o.maxPoolGrad)(e,t,s,i,n,d)}}};exports.maxPoolGradConfig=r;
},{"../kernel_names":"sdEe","../ops/max_pool_grad":"i6Te"}],"A6wG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),t=require("../ops/div"),n=require("../ops/mul"),o=require("../ops/ones"),a=require("../ops/reshape"),u=i(require("../util"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Mean,inputsToSave:["x"],gradFunc:(e,s,i)=>{const[p]=s,{axis:c}=i,f=u.parseAxisParam(c,p.shape),l=(0,r.computeOutAndReduceShapes)(p.shape,f)[1],d=u.sizeFromShape(l);return{x:()=>{const r=p.shape.slice();f.forEach(e=>{r[e]=1});const u=(0,a.reshape)(e,r);return(0,t.div)((0,n.mul)(u,(0,o.ones)(p.shape,"float32")),d)}}}};exports.meanGradConfig=p;
},{"../kernel_names":"sdEe","../ops/axis_util":"DsMP","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/ones":"POxQ","../ops/reshape":"QI4k","../util":"P6nv"}],"MsiO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minGradConfig=void 0;var e=require("../kernel_names"),r=a(require("../util")),t=require("./min_max_grad_util");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}return a.default=e,t&&t.set(e,a),a}const o={kernelName:e.Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,a)=>{const o=a,{axis:i}=o,[u,p]=n,f=r.parseAxisParam(i,u.shape),s=(0,t.gradForMinAndMax)(e,p,u,f);return{x:()=>s.x()}}};exports.minGradConfig=o;
},{"../kernel_names":"sdEe","../util":"P6nv","./min_max_grad_util":"h2YN"}],"S1mw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/greater"),a=require("../ops/less_equal"),u=require("../ops/mul");const t={kernelName:e.Minimum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[i,o]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.lessEqual)(i,o),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.greater)(i,o),"float32"))}}};exports.minimumGradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/greater":"QdS7","../ops/less_equal":"FvS1","../ops/mul":"k2PI"}],"GJdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadGradConfig=void 0;var r=require("../kernel_names"),e=require("../ops/slice");const o={kernelName:r.MirrorPad,inputsToSave:["x"],gradFunc:(r,o,s)=>{const a=o[0],{paddings:i}=s,n=i.map(r=>r[0]);return{x:()=>(0,e.slice)(r,n,a.shape)}}};exports.mirrorPadGradConfig=o;
},{"../kernel_names":"sdEe","../ops/slice":"zP07"}],"jAgP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/div"),o=require("../ops/floor"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),n=require("../ops/sum");const p={kernelName:e.Mod,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[i,d]=p,h=(0,r.assertAndGetBroadcastShape)(i.shape,d.shape);return{a:()=>{const s=(0,r.getReductionAxes)(i.shape,h);return s.length>0?(0,u.reshape)((0,n.sum)(e,s),i.shape):e},b:()=>{const p=(0,t.mul)(e,(0,a.neg)((0,o.floor)((0,s.div)(i,d)))),c=(0,r.getReductionAxes)(d.shape,h);return c.length>0?(0,u.reshape)((0,n.sum)(p,c),d.shape):p}}}};exports.modGradConfig=p;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/div":"D8Fc","../ops/floor":"XD37","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/reshape":"QI4k","../ops/sum":"ITAy"}],"M1Jy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyGradConfig=void 0;var e=require("../kernel_names"),s=require("../ops/broadcast_util"),r=require("../ops/cast"),t=require("../ops/mul"),a=require("../ops/reshape"),u=require("../ops/sum");const o={kernelName:e.Multiply,inputsToSave:["a","b"],gradFunc:(e,o)=>{const[p,n]=o,i=(0,s.assertAndGetBroadcastShape)(p.shape,n.shape);return{a:()=>{const o=(0,t.mul)(e,(0,r.cast)(n,"float32")),l=(0,s.getReductionAxes)(p.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),p.shape):o},b:()=>{const o=(0,t.mul)(e,(0,r.cast)(p,"float32")),l=(0,s.getReductionAxes)(n.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),n.shape):o}}}};exports.multiplyGradConfig=o;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/cast":"qqq3","../ops/mul":"k2PI","../ops/reshape":"QI4k","../ops/sum":"ITAy"}],"oWX5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.negGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/neg");const n={kernelName:e.Neg,gradFunc:e=>({x:()=>(0,r.neg)(e)})};exports.negGradConfig=n;
},{"../kernel_names":"sdEe","../ops/neg":"iGYA"}],"dCXG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/zeros");const r={kernelName:e.OneHot,inputsToSave:["indices"],gradFunc:(e,r)=>{const n=r[0];return{indices:()=>(0,o.zeros)(n.shape,"float32")}}};exports.oneHotGradConfig=r;
},{"../kernel_names":"sdEe","../ops/zeros":"R5fo"}],"hnES":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.OnesLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.onesLikeGradConfig=o;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"O54W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/unstack");const a={kernelName:e.Pack,saveAllInputs:!0,gradFunc:(e,a,s)=>{const{axis:n}=s;return(0,r.unstack)(e,n).map(e=>()=>e)}};exports.packGradConfig=a;
},{"../kernel_names":"sdEe","../ops/unstack":"JDMu"}],"lf1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/slice");const s={kernelName:e.PadV2,inputsToSave:["x"],gradFunc:(e,s,a)=>{const n=s[0],{paddings:o}=a,d=o.map(e=>e[0]);return{x:()=>(0,r.slice)(e,d,n.shape)}}};exports.padV2GradConfig=s;
},{"../kernel_names":"sdEe","../ops/slice":"zP07"}],"v3FT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powGradConfig=void 0;var e=require("../kernel_names"),r=h(require("../ops/broadcast_util")),t=require("../ops/cast"),o=require("../ops/greater"),s=require("../ops/log"),u=require("../ops/mul"),a=require("../ops/pow"),n=require("../ops/reshape"),p=require("../ops/scalar"),i=require("../ops/sub"),l=require("../ops/sum"),c=require("../ops/where"),f=require("../ops/zeros_like");function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function h(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d(r);if(t&&t.has(e))return t.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=s?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}const g={kernelName:e.Pow,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,d)=>{const[h,g,q]=d,b=h,w=g,m=r.assertAndGetBroadcastShape(b.shape,w.shape);return{a:()=>{const o=(0,t.cast)(w,"float32");let s=(0,u.mul)(e,(0,u.mul)(o,(0,a.pow)(b,(0,i.sub)(o,(0,p.scalar)(1)))));const c=r.getReductionAxes(b.shape,m);return c.length>0&&(s=(0,l.sum)(s,c)),(0,n.reshape)(s,b.shape)},b:()=>{const t=(0,o.greater)(b,0),a=(0,c.where)(t,(0,s.log)(b),(0,f.zerosLike)(b));let p=(0,u.mul)(e,(0,u.mul)(q,a));const i=r.getReductionAxes(w.shape,m);return i.length>0&&(p=(0,l.sum)(p,i)),(0,n.reshape)(p,w.shape)}}}};exports.powGradConfig=g;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/cast":"qqq3","../ops/greater":"QdS7","../ops/log":"vwHA","../ops/mul":"k2PI","../ops/pow":"vt1B","../ops/reshape":"QI4k","../ops/scalar":"Ay42","../ops/sub":"dGex","../ops/sum":"ITAy","../ops/where":"BsuI","../ops/zeros_like":"PDcB"}],"Pbhi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/greater"),u=require("../ops/mul"),o=require("../ops/reshape"),a=require("../ops/sum"),p=require("../ops/where"),t=require("../ops/zeros_like");const i={kernelName:e.Prelu,inputsToSave:["x","alpha"],gradFunc:(e,i)=>{const[l,n]=i,h=(0,s.greater)(l,0);return{x:()=>(0,p.where)(h,e,(0,u.mul)(e,n)),alpha:()=>{let s=(0,p.where)(h,(0,t.zerosLike)(e),(0,u.mul)(e,l));const i=(0,r.getReductionAxes)(n.shape,e.shape);return i.length>0&&(s=(0,a.sum)(s,i)),(0,o.reshape)(s,n.shape)}}}};exports.preluGradConfig=i;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/greater":"QdS7","../ops/mul":"k2PI","../ops/reshape":"QI4k","../ops/sum":"ITAy","../ops/where":"BsuI","../ops/zeros_like":"PDcB"}],"htYb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divGradConfig=void 0;var e=require("../kernel_names"),r=c(require("../ops/broadcast_util")),t=require("../ops/cast"),a=require("../ops/div"),s=require("../ops/mul"),n=require("../ops/neg"),o=require("../ops/reshape"),u=require("../ops/square"),i=require("../ops/sum");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}const l={kernelName:e.RealDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,f=r.assertAndGetBroadcastShape(c.shape,l.shape);return{a:()=>{const s=(0,a.div)(e,(0,t.cast)(l,"float32")),n=r.getReductionAxes(c.shape,f);return n.length>0?(0,o.reshape)((0,i.sum)(s,n),c.shape):s},b:()=>{let p=(0,s.mul)(e,(0,t.cast)(c,"float32"));const d=r.getReductionAxes(l.shape,f);d.length>0&&(p=(0,o.reshape)((0,i.sum)(p,d),l.shape));const v=(0,u.square)(l);return(0,n.neg)((0,a.div)(p,(0,t.cast)(v,"float32")))}}}};exports.divGradConfig=l;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/reshape":"QI4k","../ops/square":"mJRX","../ops/sum":"ITAy"}],"GoQG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/neg"),i=require("../ops/square");const s={kernelName:e.Reciprocal,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.div)(e,(0,o.neg)((0,i.square)(a)))}}};exports.reciprocalGradConfig=s;
},{"../kernel_names":"sdEe","../ops/div":"D8Fc","../ops/neg":"iGYA","../ops/square":"mJRX"}],"QfHw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/less_equal"),u=require("../ops/mul"),o=require("../ops/step");const t={kernelName:e.Relu6,inputsToSave:["x"],gradFunc:(e,t)=>{const[l]=t,a=(0,u.mul)((0,s.lessEqual)(l,6),(0,o.step)(l));return{x:()=>(0,u.mul)(e,(0,r.cast)(a,"float32"))}}};exports.relu6GradConfig=t;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/less_equal":"FvS1","../ops/mul":"k2PI","../ops/step":"e2o4"}],"sCmN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Relu,inputsToSave:["x"],gradFunc:(e,o)=>{const[u]=o;return{x:()=>(0,s.mul)(e,(0,r.cast)((0,t.step)(u),"float32"))}}};exports.reluGradConfig=o;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/mul":"k2PI","../ops/step":"e2o4"}],"LSQe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshapeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reshape");const s={kernelName:e.Reshape,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.reshape)(e,a.shape)}}};exports.reshapeGradConfig=s;
},{"../kernel_names":"sdEe","../ops/reshape":"QI4k"}],"nSk6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.ResizeBilinear,inputsToSave:["images"],gradFunc:(i,n,s)=>{const[a]=n,o={dy:i,images:a};return{images:()=>e.ENGINE.runKernel(r.ResizeBilinearGrad,o,s)}}};exports.resizeBilinearGradConfig=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"ZiCH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const s={kernelName:r.ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(s,i,a)=>{const[n]=i,o={dy:s,images:n};return{images:()=>e.ENGINE.runKernel(r.ResizeNearestNeighborGrad,o,a)}}};exports.resizeNearestNeighborGradConfig=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"YSs8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverseGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reverse"),s=require("../util");const a={kernelName:e.Reverse,gradFunc:(e,a,i)=>{const{dims:o}=i,t=(0,s.parseAxisParam)(o,e.shape);return{x:()=>(0,r.reverse)(e,t)}}};exports.reverseGradConfig=a;
},{"../kernel_names":"sdEe","../ops/reverse":"SxGN","../util":"P6nv"}],"GJpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Round,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.roundGradConfig=o;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"agRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/mul"),s=require("../ops/neg"),t=require("../ops/pow");const i={kernelName:e.Rsqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[n]=i;return{x:()=>(0,s.neg)((0,r.div)(e,(0,o.mul)((0,t.pow)(n,1.5),2)))}}};exports.rsqrtGradConfig=i;
},{"../kernel_names":"sdEe","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/neg":"iGYA","../ops/pow":"vt1B"}],"L3Y7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/cast"),r=require("../ops/logical_not"),t=require("../ops/mul"),s=require("../ops/zeros_like");const i={kernelName:e.Select,inputsToSave:["condition"],gradFunc:(e,i)=>{const[c]=i;return{condition:()=>(0,o.cast)((0,s.zerosLike)(c),"float32"),t:()=>(0,t.mul)(e,(0,o.cast)(c,e.dtype)),e:()=>(0,t.mul)(e,(0,o.cast)((0,r.logicalNot)(c),e.dtype))}}};exports.selectGradConfig=i;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/logical_not":"XZse","../ops/mul":"k2PI","../ops/zeros_like":"PDcB"}],"HeX4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/exp"),u=require("../ops/greater"),a=require("../ops/mul"),o=require("../ops/scalar"),t=require("../ops/selu_util"),l=require("../ops/where");const i={kernelName:e.Selu,inputsToSave:["x"],gradFunc:(e,i)=>{const[p]=i;return{x:()=>{const i=(0,u.greater)(p,(0,o.scalar)(0)),n=(0,o.scalar)(t.SELU_SCALEALPHA),c=(0,o.scalar)(t.SELU_SCALE),q=(0,a.mul)(e,c),x=(0,a.mul)((0,a.mul)(e,n),(0,s.exp)((0,r.cast)(p,"float32")));return(0,l.where)(i,q,x)}}}};exports.seluGradConfig=i;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/exp":"zsk9","../ops/greater":"QdS7","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/selu_util":"ssng","../ops/where":"BsuI"}],"dkCO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),o=require("../ops/sub");const u={kernelName:e.Sigmoid,outputsToSave:[!0],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,r.mul)(e,(0,r.mul)(i,(0,o.sub)((0,s.scalar)(1),i)))}}};exports.sigmoidGradConfig=u;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/sub":"dGex"}],"reLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Sign,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.signGradConfig=s;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"yO8n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cos"),o=require("../ops/mul");const n={kernelName:e.Sin,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cos)((0,r.cast)(t,"float32")),e)}}};exports.sinGradConfig=n;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/cos":"g9ZU","../ops/mul":"k2PI"}],"AfRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cosh"),o=require("../ops/mul");const n={kernelName:e.Sinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cosh)((0,r.cast)(t,"float32")),e)}}};exports.sinhGradConfig=n;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/cosh":"GpTU","../ops/mul":"k2PI"}],"h1Er":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/pad"),s=require("../ops/slice_util");const i={kernelName:e.Slice,inputsToSave:["x"],gradFunc:(e,i,a)=>{const[o]=i,{begin:n,size:t}=a,p=o.shape,[l,u]=(0,s.parseSliceParams)(o,n,t),c=[];for(let r=0;r<e.rank;r++)c.push([l[r],p[r]-l[r]-u[r]]);return{x:()=>(0,r.pad)(e,c)}}};exports.sliceGradConfig=i;
},{"../kernel_names":"sdEe","../ops/pad":"hajs","../ops/slice_util":"Quoj"}],"fO38":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sub"),o=require("../ops/sum");const u={kernelName:e.Softmax,outputsToSave:[!0],gradFunc:(e,u,t)=>{const[a]=u,{dim:i}=t,m=(0,r.mul)(e,a);return{logits:()=>(0,s.sub)(m,(0,r.mul)((0,o.sum)(m,[i],!0),a))}}};exports.softmaxGradConfig=u;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/sub":"dGex","../ops/sum":"ITAy"}],"hrsO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sigmoid");const o={kernelName:e.Softplus,inputsToSave:["x"],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,(0,s.sigmoid)(t))}}};exports.softplusGradConfig=o;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/sigmoid":"yARQ"}],"T91W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDGradConfig=void 0;var e=require("../kernel_names"),a=require("../ops/batch_to_space_nd");const r={kernelName:e.SpaceToBatchND,gradFunc:(e,r,o)=>{const{blockShape:c,paddings:t}=o;return{x:()=>(0,a.batchToSpaceND)(e,c,t)}}};exports.spaceToBatchNDGradConfig=r;
},{"../kernel_names":"sdEe","../ops/batch_to_space_nd":"Q9gF"}],"bAb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitVGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/concat");const t={kernelName:e.SplitV,gradFunc:(e,t,o)=>{const{axis:s}=o;return{x:()=>(0,r.concat)(e,s)}}};exports.splitVGradConfig=t;
},{"../kernel_names":"sdEe","../ops/concat":"dDdq"}],"iClX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/mul"),o=require("../ops/sqrt");const i={kernelName:e.Sqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[u]=i;return{x:()=>(0,s.div)(e,(0,t.mul)((0,o.sqrt)((0,r.cast)(u,"float32")),2))}}};exports.sqrtGradConfig=i;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/sqrt":"iJpu"}],"mVS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul");const u={kernelName:e.Square,inputsToSave:["x"],gradFunc:(e,u)=>{const[a]=u;return{x:()=>(0,s.mul)(e,(0,s.mul)((0,r.cast)(a,"float32"),2))}}};exports.squareGradConfig=u;
},{"../kernel_names":"sdEe","../ops/cast":"qqq3","../ops/mul":"k2PI"}],"TPwK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),u=require("../ops/scalar"),s=require("../ops/sub");const a={kernelName:e.SquaredDifference,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[n,o]=a,i=(0,u.scalar)(2);return{a:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(n,o))),b:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(o,n)))}}};exports.squaredDifferenceGradConfig=a;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/sub":"dGex"}],"wx7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Step,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.stepGradConfig=s;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"JOrk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/neg"),n=require("../ops/reshape"),s=require("../ops/sum");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}const u={kernelName:e.Sub,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,u]=a,p=r.assertAndGetBroadcastShape(o.shape,u.shape);return{a:()=>{let t=e;const a=r.getReductionAxes(o.shape,p);return a.length>0&&(t=(0,s.sum)(t,a)),(0,n.reshape)(t,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(u.shape,p);return o.length>0&&(a=(0,s.sum)(a,o)),(0,n.reshape)((0,t.neg)(a),u.shape)}}}};exports.subGradConfig=u;
},{"../kernel_names":"sdEe","../ops/broadcast_util":"Xh9J","../ops/neg":"iGYA","../ops/reshape":"QI4k","../ops/sum":"ITAy"}],"isro":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/ones"),a=require("../ops/reshape"),o=require("../util");const u={kernelName:e.Sum,inputsToSave:["x"],gradFunc:(e,u,i)=>{const[n]=u,p=n.shape.slice(),{axis:t}=i;(0,o.parseAxisParam)(t,n.shape).forEach(e=>{p[e]=1});const l=(0,a.reshape)(e,p),c=(0,r.mul)(l,(0,s.ones)(n.shape,"float32"));return{x:()=>c}}};exports.sumGradConfig=u;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/ones":"POxQ","../ops/reshape":"QI4k","../util":"P6nv"}],"se8T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cos"),s=require("../ops/div"),o=require("../ops/square");const n={kernelName:e.Tan,inputsToSave:["x"],gradFunc:(e,n)=>{const[a]=n;return{x:()=>(0,s.div)(e,(0,o.square)((0,r.cos)(a)))}}};exports.tanGradConfig=n;
},{"../kernel_names":"sdEe","../ops/cos":"g9ZU","../ops/div":"D8Fc","../ops/square":"mJRX"}],"xokp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),u=require("../ops/square"),a=require("../ops/sub");const o={kernelName:e.Tanh,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)((0,a.sub)((0,s.scalar)(1),(0,u.square)(t)),e)}}};exports.tanhGradConfig=o;
},{"../kernel_names":"sdEe","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/square":"mJRX","../ops/sub":"dGex"}],"v6Hb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/slice"),a=require("../ops/zeros_like");const o={kernelName:e.Tile,inputsToSave:["x"],gradFunc:(e,o,t)=>{const[p]=o,{reps:i}=t;return{x:()=>{let o=(0,a.zerosLike)(p);if(1===p.rank)for(let a=0;a<i[0];++a)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0]],[p.shape[0]]));else if(2===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1]],[p.shape[0],p.shape[1]]));else if(3===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2]],[p.shape[0],p.shape[1],p.shape[2]]));else{if(4!==p.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${p.rank} tensors yet.`);for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)for(let n=0;n<i[3];++n)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2],n*p.shape[3]],[p.shape[0],p.shape[1],p.shape[2],p.shape[3]]))}return o}}}};exports.tileGradConfig=o;
},{"../kernel_names":"sdEe","../ops/add":"ZDFV","../ops/slice":"zP07","../ops/zeros_like":"PDcB"}],"tjBW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/axis_util")),t=require("../ops/transpose");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const a={kernelName:e.Transpose,gradFunc:(e,n,o)=>{const a=o,{perm:s}=a,u=r.getUndoAxesPermutation(s);return{x:()=>(0,t.transpose)(e,u)}}};exports.transposeGradConfig=a;
},{"../kernel_names":"sdEe","../ops/axis_util":"DsMP","../ops/transpose":"uQkx"}],"uMFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/stack");const a={kernelName:e.Unpack,gradFunc:(e,a,n)=>{const s=n,{axis:t}=s;return{value:()=>(0,r.stack)(e,t)}}};exports.unpackGradConfig=a;
},{"../kernel_names":"sdEe","../ops/stack":"TWBn"}],"hjTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/expand_dims"),o=require("../ops/gather"),s=require("../ops/greater_equal"),n=require("../ops/logical_and"),t=require("../ops/maximum"),a=require("../ops/ones"),i=require("../ops/scalar"),u=require("../ops/where"),m=require("../ops/zeros_like");const p={kernelName:e.UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(e,r)=>{const[o]=r;return{x:()=>l(e,o)}}};function l(e,p){const l=(0,t.maximum)(p,(0,m.zerosLike)(p)),d=(0,o.gather)(e,l);let c=(0,s.greaterEqual)(p,(0,i.scalar)(0,"int32"));const g=d.rank-c.rank;for(let o=0;o<g;++o)c=(0,r.expandDims)(c,o+1);c=(0,n.logicalAnd)(c,(0,a.ones)(d.shape,"bool"));const q=(0,m.zerosLike)(d);return(0,u.where)(c,d,q)}exports.unsortedSegmentSumGradConfig=p;
},{"../kernel_names":"sdEe","../ops/expand_dims":"XF6l","../ops/gather":"ESvM","../ops/greater_equal":"Dbo2","../ops/logical_and":"lYzt","../ops/maximum":"X5MV","../ops/ones":"POxQ","../ops/scalar":"Ay42","../ops/where":"BsuI","../ops/zeros_like":"PDcB"}],"qCQu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ZerosLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.zerosLikeGradConfig=o;
},{"../kernel_names":"sdEe","../ops/zeros_like":"PDcB"}],"pbwh":[function(require,module,exports) {
"use strict";var r=require("./gradients/Abs_grad"),e=require("./gradients/Acos_grad"),a=require("./gradients/Acosh_grad"),i=require("./gradients/Add_grad"),d=require("./gradients/AddN_grad"),g=require("./gradients/ArgMax_grad"),n=require("./gradients/ArgMin_grad"),o=require("./gradients/Asin_grad"),s=require("./gradients/Asinh_grad"),t=require("./gradients/Atan2_grad"),u=require("./gradients/Atan_grad"),f=require("./gradients/Atanh_grad"),C=require("./gradients/AvgPool3D_grad"),q=require("./gradients/AvgPool_grad"),G=require("./gradients/BatchMatMul_grad"),_=require("./gradients/BatchToSpaceND_grad"),l=require("./gradients/BroadcastTo_grad"),c=require("./gradients/Cast_grad"),p=require("./gradients/Ceil_grad"),m=require("./gradients/ClipByValue_grad"),h=require("./gradients/ComplexAbs_grad"),D=require("./gradients/Concat_grad"),S=require("./gradients/Conv2D_grad"),x=require("./gradients/Conv2DBackpropInput_grad"),v=require("./gradients/Conv3D_grad"),N=require("./gradients/Cos_grad"),M=require("./gradients/Cosh_grad"),A=require("./gradients/Cumsum_grad"),B=require("./gradients/DepthwiseConv2dNative_grad"),P=require("./gradients/Dilation2D_grad"),k=require("./gradients/Elu_grad"),R=require("./gradients/Erf_grad"),b=require("./gradients/Exp_grad"),T=require("./gradients/ExpandDims_grad"),y=require("./gradients/Expm1_grad"),L=require("./gradients/Floor_grad"),V=require("./gradients/FloorDiv_grad"),I=require("./gradients/FusedBatchNorm_grad"),E=require("./gradients/GatherV2_grad"),z=require("./gradients/GreaterEqual_grad"),F=require("./gradients/Identity_grad"),w=require("./gradients/IsFinite_grad"),H=require("./gradients/IsInf_grad"),O=require("./gradients/IsNan_grad"),U=require("./gradients/LeakyRelu_grad"),Z=require("./gradients/Log1p_grad"),j=require("./gradients/Log_grad"),J=require("./gradients/LogSoftmax_grad"),K=require("./gradients/LRN_grad"),Q=require("./gradients/Max_grad"),W=require("./gradients/Maximum_grad"),X=require("./gradients/MaxPool3D_grad"),Y=require("./gradients/MaxPool_grad"),$=require("./gradients/Mean_grad"),rr=require("./gradients/Min_grad"),er=require("./gradients/Minimum_grad"),ar=require("./gradients/MirrorPad_grad"),ir=require("./gradients/Mod_grad"),dr=require("./gradients/Multiply_grad"),gr=require("./gradients/Neg_grad"),nr=require("./gradients/OneHot_grad"),or=require("./gradients/OnesLike_grad"),sr=require("./gradients/Pack_grad"),tr=require("./gradients/PadV2_grad"),ur=require("./gradients/Pow_grad"),fr=require("./gradients/Prelu_grad"),Cr=require("./gradients/RealDiv_grad"),qr=require("./gradients/Reciprocal_grad"),Gr=require("./gradients/Relu6_grad"),_r=require("./gradients/Relu_grad"),lr=require("./gradients/Reshape_grad"),cr=require("./gradients/ResizeBilinear_grad"),pr=require("./gradients/ResizeNearestNeighbor_grad"),mr=require("./gradients/Reverse_grad"),hr=require("./gradients/Round_grad"),Dr=require("./gradients/Rsqrt_grad"),Sr=require("./gradients/Select_grad"),xr=require("./gradients/Selu_grad"),vr=require("./gradients/Sigmoid_grad"),Nr=require("./gradients/Sign_grad"),Mr=require("./gradients/Sin_grad"),Ar=require("./gradients/Sinh_grad"),Br=require("./gradients/Slice_grad"),Pr=require("./gradients/Softmax_grad"),kr=require("./gradients/Softplus_grad"),Rr=require("./gradients/SpaceToBatchND_grad"),br=require("./gradients/SplitV_grad"),Tr=require("./gradients/Sqrt_grad"),yr=require("./gradients/Square_grad"),Lr=require("./gradients/SquaredDifference_grad"),Vr=require("./gradients/Step_grad"),Ir=require("./gradients/Sub_grad"),Er=require("./gradients/Sum_grad"),zr=require("./gradients/Tan_grad"),Fr=require("./gradients/Tanh_grad"),wr=require("./gradients/Tile_grad"),Hr=require("./gradients/Transpose_grad"),Or=require("./gradients/Unpack_grad"),Ur=require("./gradients/UnsortedSegmentSum_grad"),Zr=require("./gradients/ZerosLike_grad"),jr=require("./kernel_registry");const Jr=[r.absGradConfig,e.acosGradConfig,a.acoshGradConfig,i.addGradConfig,d.addNGradConfig,g.argMaxGradConfig,n.argMinGradConfig,o.asinGradConfig,s.asinhGradConfig,t.atan2GradConfig,u.atanGradConfig,f.atanhGradConfig,C.avgPool3DGradConfig,q.avgPoolGradConfig,G.batchMatMulGradConfig,_.batchToSpaceNDGradConfig,l.broadcastToGradConfig,c.castGradConfig,p.ceilGradConfig,m.clipByValueGradConfig,h.complexAbsGradConfig,D.concatGradConfig,x.conv2DBackpropInputGradConfig,S.conv2DGradConfig,v.conv3DGradConfig,N.cosGradConfig,M.coshGradConfig,A.cumsumGradConfig,B.depthwiseConv2dNativeGradConfig,P.dilation2dGradConfig,Cr.divGradConfig,k.eluGradConfig,R.erfGradConfig,b.expGradConfig,T.expandDimsGradConfig,y.expm1GradConfig,V.floorDivGradConfig,L.floorGradConfig,I.fusedBatchNormGradConfig,E.gatherGradConfig,z.greaterEqualGradConfig,F.identityGradConfig,w.isFiniteGradConfig,H.isInfGradConfig,O.isNanGradConfig,U.leakyReluGradConfig,Z.log1pGradConfig,j.logGradConfig,J.logSoftmaxGradConfig,K.lrnGradConfig,Q.maxGradConfig,Q.maxGradConfig,W.maximumGradConfig,X.maxPool3DGradConfig,Y.maxPoolGradConfig,$.meanGradConfig,rr.minGradConfig,er.minimumGradConfig,ar.mirrorPadGradConfig,ir.modGradConfig,dr.multiplyGradConfig,gr.negGradConfig,nr.oneHotGradConfig,or.onesLikeGradConfig,sr.packGradConfig,tr.padV2GradConfig,tr.padV2GradConfig,ur.powGradConfig,fr.preluGradConfig,qr.reciprocalGradConfig,Gr.relu6GradConfig,_r.reluGradConfig,lr.reshapeGradConfig,cr.resizeBilinearGradConfig,pr.resizeNearestNeighborGradConfig,mr.reverseGradConfig,hr.roundGradConfig,Dr.rsqrtGradConfig,Sr.selectGradConfig,xr.seluGradConfig,vr.sigmoidGradConfig,Nr.signGradConfig,Mr.sinGradConfig,Ar.sinhGradConfig,Br.sliceGradConfig,Pr.softmaxGradConfig,kr.softplusGradConfig,Rr.spaceToBatchNDGradConfig,Rr.spaceToBatchNDGradConfig,br.splitVGradConfig,br.splitVGradConfig,Tr.sqrtGradConfig,Lr.squaredDifferenceGradConfig,yr.squareGradConfig,Vr.stepGradConfig,Ir.subGradConfig,Er.sumGradConfig,zr.tanGradConfig,Fr.tanhGradConfig,wr.tileGradConfig,Hr.transposeGradConfig,Or.unpackGradConfig,Ur.unsortedSegmentSumGradConfig,Zr.zerosLikeGradConfig];for(const Kr of Jr)(0,jr.registerGradient)(Kr);
},{"./gradients/Abs_grad":"ElQS","./gradients/Acos_grad":"JeEo","./gradients/Acosh_grad":"xSyH","./gradients/Add_grad":"FPsn","./gradients/AddN_grad":"eWqU","./gradients/ArgMax_grad":"uSdy","./gradients/ArgMin_grad":"pXdU","./gradients/Asin_grad":"aEuk","./gradients/Asinh_grad":"u5uO","./gradients/Atan2_grad":"TJcA","./gradients/Atan_grad":"X7rA","./gradients/Atanh_grad":"z0kM","./gradients/AvgPool3D_grad":"u0xB","./gradients/AvgPool_grad":"dUPW","./gradients/BatchMatMul_grad":"Czv4","./gradients/BatchToSpaceND_grad":"CDA7","./gradients/BroadcastTo_grad":"Gxda","./gradients/Cast_grad":"ZcTz","./gradients/Ceil_grad":"MI0y","./gradients/ClipByValue_grad":"ckME","./gradients/ComplexAbs_grad":"Xh8o","./gradients/Concat_grad":"keWD","./gradients/Conv2D_grad":"f1tQ","./gradients/Conv2DBackpropInput_grad":"gRvo","./gradients/Conv3D_grad":"sdO1","./gradients/Cos_grad":"XliK","./gradients/Cosh_grad":"VVun","./gradients/Cumsum_grad":"KT66","./gradients/DepthwiseConv2dNative_grad":"xQGO","./gradients/Dilation2D_grad":"VsH5","./gradients/Elu_grad":"NTdC","./gradients/Erf_grad":"rek3","./gradients/Exp_grad":"Y9DI","./gradients/ExpandDims_grad":"VpmB","./gradients/Expm1_grad":"xe2w","./gradients/Floor_grad":"gPYw","./gradients/FloorDiv_grad":"mHhM","./gradients/FusedBatchNorm_grad":"MxAQ","./gradients/GatherV2_grad":"yxTd","./gradients/GreaterEqual_grad":"hc7R","./gradients/Identity_grad":"W6R7","./gradients/IsFinite_grad":"lKGj","./gradients/IsInf_grad":"sqJA","./gradients/IsNan_grad":"gPIs","./gradients/LeakyRelu_grad":"SC7u","./gradients/Log1p_grad":"etSi","./gradients/Log_grad":"GDRk","./gradients/LogSoftmax_grad":"BAfN","./gradients/LRN_grad":"mpRs","./gradients/Max_grad":"KejH","./gradients/Maximum_grad":"wKJk","./gradients/MaxPool3D_grad":"TipK","./gradients/MaxPool_grad":"CBRa","./gradients/Mean_grad":"A6wG","./gradients/Min_grad":"MsiO","./gradients/Minimum_grad":"S1mw","./gradients/MirrorPad_grad":"GJdN","./gradients/Mod_grad":"jAgP","./gradients/Multiply_grad":"M1Jy","./gradients/Neg_grad":"oWX5","./gradients/OneHot_grad":"dCXG","./gradients/OnesLike_grad":"hnES","./gradients/Pack_grad":"O54W","./gradients/PadV2_grad":"lf1s","./gradients/Pow_grad":"v3FT","./gradients/Prelu_grad":"Pbhi","./gradients/RealDiv_grad":"htYb","./gradients/Reciprocal_grad":"GoQG","./gradients/Relu6_grad":"QfHw","./gradients/Relu_grad":"sCmN","./gradients/Reshape_grad":"LSQe","./gradients/ResizeBilinear_grad":"nSk6","./gradients/ResizeNearestNeighbor_grad":"ZiCH","./gradients/Reverse_grad":"YSs8","./gradients/Round_grad":"GJpt","./gradients/Rsqrt_grad":"agRd","./gradients/Select_grad":"L3Y7","./gradients/Selu_grad":"HeX4","./gradients/Sigmoid_grad":"dkCO","./gradients/Sign_grad":"reLl","./gradients/Sin_grad":"yO8n","./gradients/Sinh_grad":"AfRo","./gradients/Slice_grad":"h1Er","./gradients/Softmax_grad":"fO38","./gradients/Softplus_grad":"hrsO","./gradients/SpaceToBatchND_grad":"T91W","./gradients/SplitV_grad":"bAb4","./gradients/Sqrt_grad":"iClX","./gradients/Square_grad":"mVS9","./gradients/SquaredDifference_grad":"TPwK","./gradients/Step_grad":"wx7z","./gradients/Sub_grad":"JOrk","./gradients/Sum_grad":"isro","./gradients/Tan_grad":"se8T","./gradients/Tanh_grad":"xokp","./gradients/Tile_grad":"v6Hb","./gradients/Transpose_grad":"tjBW","./gradients/Unpack_grad":"uMFh","./gradients/UnsortedSegmentSum_grad":"hjTI","./gradients/ZerosLike_grad":"qCQu","./kernel_registry":"wJg6"}],"hAHY":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.abs=function(){return this.throwIfDisposed(),(0,r.abs)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"rSb9":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.acos=function(){return this.throwIfDisposed(),(0,r.acos)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"ZzDz":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.acosh=function(){return this.throwIfDisposed(),(0,r.acosh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"mDGp":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.addStrict=function(t){return this.throwIfDisposed(),(0,r.addStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"exjO":[function(require,module,exports) {
"use strict";var r=require("../../ops/add"),e=require("../../tensor");e.Tensor.prototype.add=function(e){return this.throwIfDisposed(),(0,r.add)(this,e)};
},{"../../ops/add":"ZDFV","../../tensor":"DTHt"}],"Yjqi":[function(require,module,exports) {
"use strict";var r=require("../../ops/all"),e=require("../../tensor");e.Tensor.prototype.all=function(e,t){return this.throwIfDisposed(),(0,r.all)(this,e,t)};
},{"../../ops/all":"VAUj","../../tensor":"DTHt"}],"iiFF":[function(require,module,exports) {
"use strict";var r=require("../../ops/any"),e=require("../../tensor");e.Tensor.prototype.any=function(e,t){return this.throwIfDisposed(),(0,r.any)(this,e,t)};
},{"../../ops/any":"OF1E","../../tensor":"DTHt"}],"Y7h7":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_max"),e=require("../../tensor");e.Tensor.prototype.argMax=function(e){return this.throwIfDisposed(),(0,r.argMax)(this,e)};
},{"../../ops/arg_max":"wSFk","../../tensor":"DTHt"}],"dZ6W":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_min"),e=require("../../tensor");e.Tensor.prototype.argMin=function(e){return this.throwIfDisposed(),(0,r.argMin)(this,e)};
},{"../../ops/arg_min":"Zhc7","../../tensor":"DTHt"}],"BTGh":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor"),s=require("../../util");r.Tensor.prototype.asScalar=function(){return this.throwIfDisposed(),(0,s.assert)(1===this.size,()=>"The array must have only 1 element."),(0,e.reshape)(this,[])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt","../../util":"P6nv"}],"mipD":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asType=function(s){return this.throwIfDisposed(),(0,r.cast)(this,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"mL1i":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as1D=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"Xuiy":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as2D=function(r,s){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"hC0z":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as3D=function(r,s,t){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"TCVi":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as4D=function(r,s,t,o){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"pH5u":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as5D=function(r,s,t,o,i){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o,i])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"ZS2q":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asin=function(){return this.throwIfDisposed(),(0,r.asin)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"TfWD":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asinh=function(){return this.throwIfDisposed(),(0,r.asinh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Q84r":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.atan=function(){return this.throwIfDisposed(),(0,r.atan)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"te8p":[function(require,module,exports) {
"use strict";var t=require("../../ops/atan2"),r=require("../../tensor");r.Tensor.prototype.atan2=function(r){return this.throwIfDisposed(),(0,t.atan2)(this,r)};
},{"../../ops/atan2":"eUJw","../../tensor":"DTHt"}],"EIXR":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.atanh=function(){return this.throwIfDisposed(),(0,r.atanh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Fqu3":[function(require,module,exports) {
"use strict";var o=require("../../ops/avg_pool"),r=require("../../tensor");r.Tensor.prototype.avgPool=function(r,e,t,s){return this.throwIfDisposed(),(0,o.avgPool)(this,r,e,t,s)};
},{"../../ops/avg_pool":"iP9e","../../tensor":"DTHt"}],"YAFz":[function(require,module,exports) {
"use strict";var t=require("../../ops/batch_to_space_nd"),e=require("../../tensor");e.Tensor.prototype.batchToSpaceND=function(e,r){return this.throwIfDisposed(),(0,t.batchToSpaceND)(this,e,r)};
},{"../../ops/batch_to_space_nd":"Q9gF","../../tensor":"DTHt"}],"heJa":[function(require,module,exports) {
"use strict";var r=require("../../ops/batchnorm"),t=require("../../tensor");t.Tensor.prototype.batchNorm=function(t,o,e,s,i){return this.throwIfDisposed(),(0,r.batchNorm)(this,t,o,e,s,i)};
},{"../../ops/batchnorm":"qqTf","../../tensor":"DTHt"}],"lVOQ":[function(require,module,exports) {
"use strict";var r=require("../../ops/broadcast_to"),o=require("../../tensor");o.Tensor.prototype.broadcastTo=function(o){return this.throwIfDisposed(),(0,r.broadcastTo)(this,o)};
},{"../../ops/broadcast_to":"qUV0","../../tensor":"DTHt"}],"lZjr":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cast=function(s){return this.throwIfDisposed(),(0,r.cast)(this,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"hy2u":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.ceil=function(){return this.throwIfDisposed(),(0,e.ceil)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"fSb8":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.clipByValue=function(r,s){return this.throwIfDisposed(),(0,e.clipByValue)(this,r,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"SYfg":[function(require,module,exports) {
"use strict";var t=require("../../ops/concat"),o=require("../../tensor");o.Tensor.prototype.concat=function(r,e){return this.throwIfDisposed(),r instanceof o.Tensor&&(r=[r]),(0,t.concat)([this,...r],e)};
},{"../../ops/concat":"dDdq","../../tensor":"DTHt"}],"yTi7":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv1d"),o=require("../../tensor");o.Tensor.prototype.conv1d=function(o,e,t,s,n,i){return this.throwIfDisposed(),(0,r.conv1d)(this,o,e,t,s,n,i)};
},{"../../ops/conv1d":"n3wz","../../tensor":"DTHt"}],"YdaE":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv2d_transpose"),s=require("../../tensor");s.Tensor.prototype.conv2dTranspose=function(s,o,e,n,t){return this.throwIfDisposed(),(0,r.conv2dTranspose)(this,s,o,e,n,t)};
},{"../../ops/conv2d_transpose":"GCOF","../../tensor":"DTHt"}],"VuHV":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv2d"),o=require("../../tensor");o.Tensor.prototype.conv2d=function(o,e,t,s,n,i){return this.throwIfDisposed(),(0,r.conv2d)(this,o,e,t,s,n,i)};
},{"../../ops/conv2d":"oJQk","../../tensor":"DTHt"}],"tRrk":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cos=function(){return this.throwIfDisposed(),(0,r.cos)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"m7UX":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cosh=function(){return this.throwIfDisposed(),(0,r.cosh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Plz3":[function(require,module,exports) {
"use strict";var r=require("../../ops/cumsum"),s=require("../../tensor");s.Tensor.prototype.cumsum=function(s,u,e){return this.throwIfDisposed(),(0,r.cumsum)(this,s,u,e)};
},{"../../ops/cumsum":"Kzhc","../../tensor":"DTHt"}],"gpZR":[function(require,module,exports) {
"use strict";var e=require("../../ops/depth_to_space"),t=require("../../tensor");t.Tensor.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),(0,e.depthToSpace)(this,t,r)};
},{"../../ops/depth_to_space":"U4UL","../../tensor":"DTHt"}],"NNEi":[function(require,module,exports) {
"use strict";var e=require("../../globals"),s=require("../../ops/depthwise_conv2d"),t=require("../../tensor");t.Tensor.prototype.depthwiseConv2D=function(t,r,i,o,d,n){return(0,e.deprecationWarn)("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),(0,s.depthwiseConv2d)(this,t,r,i,o,d,n)};
},{"../../globals":"GWnL","../../ops/depthwise_conv2d":"Kahd","../../tensor":"DTHt"}],"qY3A":[function(require,module,exports) {
"use strict";var e=require("../../ops/depthwise_conv2d"),t=require("../../tensor");t.Tensor.prototype.depthwiseConv2d=function(t,r,s,o,i,n){return this.throwIfDisposed(),(0,e.depthwiseConv2d)(this,t,r,s,o,i,n)};
},{"../../ops/depthwise_conv2d":"Kahd","../../tensor":"DTHt"}],"r5pA":[function(require,module,exports) {
"use strict";var i=require("../../ops/dilation2d"),t=require("../../tensor");t.Tensor.prototype.dilation2d=function(t,r,o,e,s){return this.throwIfDisposed(),(0,i.dilation2d)(this,t,r,o,e,s)};
},{"../../ops/dilation2d":"q2Zv","../../tensor":"DTHt"}],"ezkx":[function(require,module,exports) {
"use strict";var r=require("../../ops/div_no_nan"),o=require("../../tensor");o.Tensor.prototype.divNoNan=function(o){return this.throwIfDisposed(),(0,r.divNoNan)(this,o)};
},{"../../ops/div_no_nan":"mdNH","../../tensor":"DTHt"}],"iqWL":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.divStrict=function(t){return this.throwIfDisposed(),(0,r.divStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"lByl":[function(require,module,exports) {
"use strict";var r=require("../../ops/div"),e=require("../../tensor");e.Tensor.prototype.div=function(e){return this.throwIfDisposed(),(0,r.div)(this,e)};
},{"../../ops/div":"D8Fc","../../tensor":"DTHt"}],"AmE9":[function(require,module,exports) {
"use strict";var t=require("../../ops/dot"),r=require("../../tensor");r.Tensor.prototype.dot=function(r){return this.throwIfDisposed(),(0,t.dot)(this,r)};
},{"../../ops/dot":"bUs4","../../tensor":"DTHt"}],"ZWIj":[function(require,module,exports) {
"use strict";var e=require("../../ops/elu"),r=require("../../tensor");r.Tensor.prototype.elu=function(){return this.throwIfDisposed(),(0,e.elu)(this)};
},{"../../ops/elu":"a7Il","../../tensor":"DTHt"}],"wrOz":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.equalStrict=function(t){return this.throwIfDisposed(),(0,r.equalStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Xg4w":[function(require,module,exports) {
"use strict";var e=require("../../ops/equal"),r=require("../../tensor");r.Tensor.prototype.equal=function(r){return this.throwIfDisposed(),(0,e.equal)(this,r)};
},{"../../ops/equal":"WG94","../../tensor":"DTHt"}],"c95I":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.erf=function(){return this.throwIfDisposed(),(0,r.erf)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"uHAD":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.exp=function(){return this.throwIfDisposed(),(0,e.exp)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"n4T6":[function(require,module,exports) {
"use strict";var e=require("../../ops/expand_dims"),r=require("../../tensor");r.Tensor.prototype.expandDims=function(r){return this.throwIfDisposed(),(0,e.expandDims)(this,r)};
},{"../../ops/expand_dims":"XF6l","../../tensor":"DTHt"}],"YSEy":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.expm1=function(){return this.throwIfDisposed(),(0,e.expm1)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"ONAF":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.fft=function(){return this.throwIfDisposed(),(0,r.fft)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"nzjH":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.flatten=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"aXpv":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.floor=function(){return this.throwIfDisposed(),(0,r.floor)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Stcd":[function(require,module,exports) {
"use strict";var r=require("../../ops/floorDiv"),o=require("../../tensor");o.Tensor.prototype.floorDiv=function(o){return this.throwIfDisposed(),(0,r.floorDiv)(this,o)};
},{"../../ops/floorDiv":"Pk64","../../tensor":"DTHt"}],"pqmf":[function(require,module,exports) {
"use strict";var r=require("../../ops/gather"),e=require("../../tensor");e.Tensor.prototype.gather=function(e,t){return this.throwIfDisposed(),(0,r.gather)(this,e,t)};
},{"../../ops/gather":"ESvM","../../tensor":"DTHt"}],"av7B":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),(0,r.greaterEqualStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"BPNR":[function(require,module,exports) {
"use strict";var r=require("../../ops/greater_equal"),e=require("../../tensor");e.Tensor.prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,r.greaterEqual)(this,e)};
},{"../../ops/greater_equal":"Dbo2","../../tensor":"DTHt"}],"pAc3":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.greaterStrict=function(t){return this.throwIfDisposed(),(0,r.greaterStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Zkuh":[function(require,module,exports) {
"use strict";var r=require("../../ops/greater"),e=require("../../tensor");e.Tensor.prototype.greater=function(e){return this.throwIfDisposed(),(0,r.greater)(this,e)};
},{"../../ops/greater":"QdS7","../../tensor":"DTHt"}],"mMKa":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.ifft=function(){return this.throwIfDisposed(),(0,r.ifft)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"cuqs":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.irfft=function(){return this.throwIfDisposed(),(0,r.irfft)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"MNux":[function(require,module,exports) {
"use strict";var i=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.isFinite=function(){return this.throwIfDisposed(),(0,i.isFinite)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"nF1c":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.isInf=function(){return this.throwIfDisposed(),(0,r.isInf)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"uo5y":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.isNaN=function(){return this.throwIfDisposed(),(0,r.isNaN)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"DhH2":[function(require,module,exports) {
"use strict";var e=require("../../ops/leaky_relu"),r=require("../../tensor");r.Tensor.prototype.leakyRelu=function(r){return this.throwIfDisposed(),(0,e.leakyRelu)(this,r)};
},{"../../ops/leaky_relu":"hUKE","../../tensor":"DTHt"}],"Jw5V":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.lessEqualStrict=function(s){return this.throwIfDisposed(),(0,r.lessEqualStrict)(this,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"izlZ":[function(require,module,exports) {
"use strict";var s=require("../../ops/less_equal"),e=require("../../tensor");e.Tensor.prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,s.lessEqual)(this,e)};
},{"../../ops/less_equal":"FvS1","../../tensor":"DTHt"}],"zsYh":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.lessStrict=function(s){return this.throwIfDisposed(),(0,r.lessStrict)(this,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"abOQ":[function(require,module,exports) {
"use strict";var s=require("../../ops/less"),e=require("../../tensor");e.Tensor.prototype.less=function(e){return this.throwIfDisposed(),(0,s.less)(this,e)};
},{"../../ops/less":"Ndy5","../../tensor":"DTHt"}],"aCE7":[function(require,module,exports) {
"use strict";var o=require("../../ops/local_response_normalization"),e=require("../../tensor");e.Tensor.prototype.localResponseNormalization=function(e,r,s,i){return this.throwIfDisposed(),(0,o.localResponseNormalization)(this,e,r,s,i)};
},{"../../ops/local_response_normalization":"wFSX","../../tensor":"DTHt"}],"ss0N":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,o.logSigmoid)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"MVKK":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.logSoftmax=function(r){return this.throwIfDisposed(),(0,o.logSoftmax)(this,r)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"ismY":[function(require,module,exports) {
"use strict";var r=require("../../ops/log_sum_exp"),e=require("../../tensor");e.Tensor.prototype.logSumExp=function(e,o){return this.throwIfDisposed(),(0,r.logSumExp)(this,e,o)};
},{"../../ops/log_sum_exp":"MQ55","../../tensor":"DTHt"}],"lZRQ":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.log=function(){return this.throwIfDisposed(),(0,r.log)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Wf8C":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.log1p=function(){return this.throwIfDisposed(),(0,r.log1p)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"FqD2":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_and"),o=require("../../tensor");o.Tensor.prototype.logicalAnd=function(o){return this.throwIfDisposed(),(0,r.logicalAnd)(this,o)};
},{"../../ops/logical_and":"lYzt","../../tensor":"DTHt"}],"n5pl":[function(require,module,exports) {
"use strict";var o=require("../../ops/logical_not"),t=require("../../tensor");t.Tensor.prototype.logicalNot=function(){return this.throwIfDisposed(),(0,o.logicalNot)(this)};
},{"../../ops/logical_not":"XZse","../../tensor":"DTHt"}],"butI":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_or"),o=require("../../tensor");o.Tensor.prototype.logicalOr=function(o){return this.throwIfDisposed(),(0,r.logicalOr)(this,o)};
},{"../../ops/logical_or":"HD5h","../../tensor":"DTHt"}],"uTs7":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_xor"),o=require("../../tensor");o.Tensor.prototype.logicalXor=function(o){return this.throwIfDisposed(),(0,r.logicalXor)(this,o)};
},{"../../ops/logical_xor":"FEKV","../../tensor":"DTHt"}],"nnXQ":[function(require,module,exports) {
"use strict";var t=require("../../ops/mat_mul"),r=require("../../tensor");r.Tensor.prototype.matMul=function(r,e,s){return this.throwIfDisposed(),(0,t.matMul)(this,r,e,s)};
},{"../../ops/mat_mul":"mMWq","../../tensor":"DTHt"}],"i4md":[function(require,module,exports) {
"use strict";var o=require("../../ops/max_pool"),r=require("../../tensor");r.Tensor.prototype.maxPool=function(r,e,t,s){return this.throwIfDisposed(),(0,o.maxPool)(this,r,e,t,s)};
},{"../../ops/max_pool":"hJeZ","../../tensor":"DTHt"}],"wKmI":[function(require,module,exports) {
"use strict";var r=require("../../ops/max"),e=require("../../tensor");e.Tensor.prototype.max=function(e,t){return this.throwIfDisposed(),(0,r.max)(this,e,t)};
},{"../../ops/max":"iipD","../../tensor":"DTHt"}],"u2v8":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.maximumStrict=function(t){return this.throwIfDisposed(),(0,r.maximumStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"ByTA":[function(require,module,exports) {
"use strict";var r=require("../../ops/maximum"),e=require("../../tensor");e.Tensor.prototype.maximum=function(e){return this.throwIfDisposed(),(0,r.maximum)(this,e)};
},{"../../ops/maximum":"X5MV","../../tensor":"DTHt"}],"EtRN":[function(require,module,exports) {
"use strict";var e=require("../../ops/mean"),r=require("../../tensor");r.Tensor.prototype.mean=function(r,t){return this.throwIfDisposed(),(0,e.mean)(this,r,t)};
},{"../../ops/mean":"jwZo","../../tensor":"DTHt"}],"bVxv":[function(require,module,exports) {
"use strict";var r=require("../../ops/min"),e=require("../../tensor");e.Tensor.prototype.min=function(e,i){return this.throwIfDisposed(),(0,r.min)(this,e,i)};
},{"../../ops/min":"w9We","../../tensor":"DTHt"}],"kQuU":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.minimumStrict=function(t){return this.throwIfDisposed(),(0,r.minimumStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"v0BM":[function(require,module,exports) {
"use strict";var i=require("../../ops/minimum"),r=require("../../tensor");r.Tensor.prototype.minimum=function(r){return this.throwIfDisposed(),(0,i.minimum)(this,r)};
},{"../../ops/minimum":"crIr","../../tensor":"DTHt"}],"BuIx":[function(require,module,exports) {
"use strict";var r=require("../../ops/mirror_pad"),o=require("../../tensor");o.Tensor.prototype.mirrorPad=function(o,e){return this.throwIfDisposed(),(0,r.mirrorPad)(this,o,e)};
},{"../../ops/mirror_pad":"yI5U","../../tensor":"DTHt"}],"hBeP":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.modStrict=function(t){return this.throwIfDisposed(),(0,r.modStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"bviV":[function(require,module,exports) {
"use strict";var r=require("../../ops/mod"),o=require("../../tensor");o.Tensor.prototype.mod=function(o){return this.throwIfDisposed(),(0,r.mod)(this,o)};
},{"../../ops/mod":"lYF1","../../tensor":"DTHt"}],"sxwu":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.mulStrict=function(t){return this.throwIfDisposed(),(0,r.mulStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"yrwH":[function(require,module,exports) {
"use strict";var r=require("../../ops/mul"),e=require("../../tensor");e.Tensor.prototype.mul=function(e){return this.throwIfDisposed(),(0,r.mul)(this,e)};
},{"../../ops/mul":"k2PI","../../tensor":"DTHt"}],"BdQu":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.neg=function(){return this.throwIfDisposed(),(0,e.neg)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"KhHB":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.norm=function(o,e,s){return this.throwIfDisposed(),(0,r.norm)(this,o,e,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Wqhm":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.notEqualStrict=function(r){return this.throwIfDisposed(),(0,t.notEqualStrict)(this,r)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"DMM0":[function(require,module,exports) {
"use strict";var t=require("../../ops/not_equal"),r=require("../../tensor");r.Tensor.prototype.notEqual=function(r){return this.throwIfDisposed(),(0,t.notEqual)(this,r)};
},{"../../ops/not_equal":"jVu5","../../tensor":"DTHt"}],"qaY4":[function(require,module,exports) {
"use strict";var o=require("../../ops/one_hot"),e=require("../../tensor");e.Tensor.prototype.oneHot=function(e,t=1,r=0){return this.throwIfDisposed(),(0,o.oneHot)(this,e,t,r)};
},{"../../ops/one_hot":"ETzZ","../../tensor":"DTHt"}],"WSxx":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.onesLike=function(){return this.throwIfDisposed(),(0,e.onesLike)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"hIgT":[function(require,module,exports) {
"use strict";var r=require("../../ops/pad"),e=require("../../tensor");e.Tensor.prototype.pad=function(e,t){return this.throwIfDisposed(),(0,r.pad)(this,e,t)};
},{"../../ops/pad":"hajs","../../tensor":"DTHt"}],"B6PO":[function(require,module,exports) {
"use strict";var o=require("../../ops/pool"),r=require("../../tensor");r.Tensor.prototype.pool=function(r,e,t,s,i){return this.throwIfDisposed(),(0,o.pool)(this,r,e,t,s,i)};
},{"../../ops/pool":"T3We","../../tensor":"DTHt"}],"e4VV":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.powStrict=function(t){return this.throwIfDisposed(),(0,r.powStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"ptfu":[function(require,module,exports) {
"use strict";var r=require("../../ops/pow"),o=require("../../tensor");o.Tensor.prototype.pow=function(o){return this.throwIfDisposed(),(0,r.pow)(this,o)};
},{"../../ops/pow":"vt1B","../../tensor":"DTHt"}],"Nu7c":[function(require,module,exports) {
"use strict";var r=require("../../ops/prelu"),e=require("../../tensor");e.Tensor.prototype.prelu=function(e){return this.throwIfDisposed(),(0,r.prelu)(this,e)};
},{"../../ops/prelu":"mkuj","../../tensor":"DTHt"}],"rRJT":[function(require,module,exports) {
"use strict";var r=require("../../ops/prod"),o=require("../../tensor");o.Tensor.prototype.prod=function(o,e){return this.throwIfDisposed(),(0,r.prod)(this,o,e)};
},{"../../ops/prod":"pvB6","../../tensor":"DTHt"}],"iB18":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.reciprocal=function(){return this.throwIfDisposed(),(0,r.reciprocal)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"H96b":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu"),e=require("../../tensor");e.Tensor.prototype.relu=function(){return this.throwIfDisposed(),(0,r.relu)(this)};
},{"../../ops/relu":"SJP3","../../tensor":"DTHt"}],"cyjM":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu6"),e=require("../../tensor");e.Tensor.prototype.relu6=function(){return this.throwIfDisposed(),(0,r.relu6)(this)};
},{"../../ops/relu6":"MNkg","../../tensor":"DTHt"}],"Rvhk":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.reshapeAs=function(r){return this.throwIfDisposed(),(0,e.reshape)(this,r.shape)};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"fRxu":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.reshape=function(r){return this.throwIfDisposed(),(0,e.reshape)(this,r)};
},{"../../ops/reshape":"QI4k","../../tensor":"DTHt"}],"SMt2":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_bilinear"),r=require("../../tensor");r.Tensor.prototype.resizeBilinear=function(r,i,s){return this.throwIfDisposed(),(0,e.resizeBilinear)(this,r,i,s)};
},{"../../ops/image/resize_bilinear":"XoGL","../../tensor":"DTHt"}],"RIGW":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_nearest_neighbor"),r=require("../../tensor");r.Tensor.prototype.resizeNearestNeighbor=function(r,s,i){return this.throwIfDisposed(),(0,e.resizeNearestNeighbor)(this,r,s,i)};
},{"../../ops/image/resize_nearest_neighbor":"Lavm","../../tensor":"DTHt"}],"fR2E":[function(require,module,exports) {
"use strict";var e=require("../../ops/reverse"),r=require("../../tensor");r.Tensor.prototype.reverse=function(r){return this.throwIfDisposed(),(0,e.reverse)(this,r)};
},{"../../ops/reverse":"SxGN","../../tensor":"DTHt"}],"YyJO":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.rfft=function(){return this.throwIfDisposed(),(0,r.rfft)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"oHSL":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.round=function(){return this.throwIfDisposed(),(0,r.round)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Rill":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.rsqrt=function(){return this.throwIfDisposed(),(0,r.rsqrt)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"g71a":[function(require,module,exports) {
"use strict";var e=require("../../ops/selu"),r=require("../../tensor");r.Tensor.prototype.selu=function(){return this.throwIfDisposed(),(0,e.selu)(this)};
},{"../../ops/selu":"nLmU","../../tensor":"DTHt"}],"MtTs":[function(require,module,exports) {
"use strict";var e=require("../../ops/separable_conv2d"),r=require("../../tensor");r.Tensor.prototype.separableConv2d=function(r,s,o,t,n,a){return this.throwIfDisposed(),(0,e.separableConv2d)(this,r,s,o,t,n,a)};
},{"../../ops/separable_conv2d":"M7Hy","../../tensor":"DTHt"}],"gZlU":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sigmoid=function(){return this.throwIfDisposed(),(0,r.sigmoid)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"e2ia":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sign=function(){return this.throwIfDisposed(),(0,r.sign)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"kIM6":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sin=function(){return this.throwIfDisposed(),(0,r.sin)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"UeBt":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sinh=function(){return this.throwIfDisposed(),(0,r.sinh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"UCTo":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.slice=function(r,s){return this.throwIfDisposed(),(0,e.slice)(this,r,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"neuq":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.softmax=function(s){return this.throwIfDisposed(),(0,r.softmax)(this,s)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"KPUl":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.softplus=function(){return this.throwIfDisposed(),(0,s.softplus)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"YZ0n":[function(require,module,exports) {
"use strict";var t=require("../../ops/space_to_batch_nd"),e=require("../../tensor");e.Tensor.prototype.spaceToBatchND=function(e,r){return this.throwIfDisposed(),(0,t.spaceToBatchND)(this,e,r)};
},{"../../ops/space_to_batch_nd":"rWul","../../tensor":"DTHt"}],"fYj1":[function(require,module,exports) {
"use strict";var t=require("../../ops/split"),r=require("../../tensor");r.Tensor.prototype.split=function(r,s){return this.throwIfDisposed(),(0,t.split)(this,r,s)};
},{"../../ops/split":"VA1I","../../tensor":"DTHt"}],"Aqdd":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sqrt=function(){return this.throwIfDisposed(),(0,r.sqrt)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"rS2M":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.square=function(){return this.throwIfDisposed(),(0,r.square)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"AUM6":[function(require,module,exports) {
"use strict";var e=require("../../ops/squared_difference"),r=require("../../tensor");r.Tensor.prototype.squaredDifference=function(r){return this.throwIfDisposed(),(0,e.squaredDifference)(this,r)};
},{"../../ops/squared_difference":"gsmP","../../tensor":"DTHt"}],"lXXH":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.squaredDifferenceStrict=function(r){return this.throwIfDisposed(),(0,e.squaredDifferenceStrict)(this,r)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"C0g2":[function(require,module,exports) {
"use strict";var e=require("../../ops/squeeze"),r=require("../../tensor");r.Tensor.prototype.squeeze=function(r){return this.throwIfDisposed(),(0,e.squeeze)(this,r)};
},{"../../ops/squeeze":"ZVMV","../../tensor":"DTHt"}],"h7BE":[function(require,module,exports) {
"use strict";var s=require("../../ops/stack"),t=require("../../tensor");t.Tensor.prototype.stack=function(r,e){this.throwIfDisposed();const o=r instanceof t.Tensor?[this,r]:[this,...r];return(0,s.stack)(o,e)};
},{"../../ops/stack":"TWBn","../../tensor":"DTHt"}],"w4V1":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.step=function(r){return this.throwIfDisposed(),(0,e.step)(this,r)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"Im92":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.stridedSlice=function(r,s,t,i,o,d,n,p){return this.throwIfDisposed(),(0,e.stridedSlice)(this,r,s,t,i,o,d,n,p)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"J35v":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.subStrict=function(t){return this.throwIfDisposed(),(0,r.subStrict)(this,t)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"PYtK":[function(require,module,exports) {
"use strict";var r=require("../../ops/sub"),s=require("../../tensor");s.Tensor.prototype.sub=function(s){return this.throwIfDisposed(),(0,r.sub)(this,s)};
},{"../../ops/sub":"dGex","../../tensor":"DTHt"}],"Xnvz":[function(require,module,exports) {
"use strict";var r=require("../../ops/sum"),s=require("../../tensor");s.Tensor.prototype.sum=function(s,e){return this.throwIfDisposed(),(0,r.sum)(this,s,e)};
},{"../../ops/sum":"ITAy","../../tensor":"DTHt"}],"tg9T":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.tan=function(){return this.throwIfDisposed(),(0,r.tan)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"vCuK":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.tanh=function(){return this.throwIfDisposed(),(0,r.tanh)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"dovN":[function(require,module,exports) {
"use strict";var e=require("../../ops/tile"),t=require("../../tensor");t.Tensor.prototype.tile=function(t){return this.throwIfDisposed(),(0,e.tile)(this,t)};
},{"../../ops/tile":"mfii","../../tensor":"DTHt"}],"sA3u":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.toBool=function(){return this.throwIfDisposed(),(0,o.cast)(this,"bool")};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"HKul":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.toFloat=function(){return this.throwIfDisposed(),(0,t.cast)(this,"float32")};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"zfU7":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.toInt=function(){return this.throwIfDisposed(),(0,t.cast)(this,"int32")};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"V76c":[function(require,module,exports) {
"use strict";var t=require("../../ops/topk"),r=require("../../tensor");r.Tensor.prototype.topk=function(r,o){return this.throwIfDisposed(),(0,t.topk)(this,r,o)};
},{"../../ops/topk":"GNrW","../../tensor":"DTHt"}],"dCc2":[function(require,module,exports) {
"use strict";var r=require("../../ops/transpose"),s=require("../../tensor");s.Tensor.prototype.transpose=function(s){return this.throwIfDisposed(),(0,r.transpose)(this,s)};
},{"../../ops/transpose":"uQkx","../../tensor":"DTHt"}],"K0pd":[function(require,module,exports) {
"use strict";var e=require("../../ops/unique"),r=require("../../tensor");r.Tensor.prototype.unique=function(r){return this.throwIfDisposed(),(0,e.unique)(this,r)};
},{"../../ops/unique":"FtQp","../../tensor":"DTHt"}],"jRej":[function(require,module,exports) {
"use strict";var e=require("../../ops/unsorted_segment_sum"),t=require("../../tensor");t.Tensor.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),(0,e.unsortedSegmentSum)(this,t,r)};
},{"../../ops/unsorted_segment_sum":"GWRE","../../tensor":"DTHt"}],"tCpw":[function(require,module,exports) {
"use strict";var t=require("../../ops/unstack"),r=require("../../tensor");r.Tensor.prototype.unstack=function(r){return this.throwIfDisposed(),(0,t.unstack)(this,r)};
},{"../../ops/unstack":"JDMu","../../tensor":"DTHt"}],"K1PH":[function(require,module,exports) {
"use strict";var e=require("../../ops/where"),r=require("../../tensor");r.Tensor.prototype.where=function(r,t){return this.throwIfDisposed(),(0,e.where)(r,this,t)};
},{"../../ops/where":"BsuI","../../tensor":"DTHt"}],"Kgd3":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.zerosLike=function(){return this.throwIfDisposed(),(0,e.zerosLike)(this)};
},{"../../ops/ops":"R1mJ","../../tensor":"DTHt"}],"QTkt":[function(require,module,exports) {
"use strict";require("./abs"),require("./acos"),require("./acosh"),require("./add_strict"),require("./add"),require("./all"),require("./any"),require("./arg_max"),require("./arg_min"),require("./as_scalar"),require("./as_type"),require("./as1d"),require("./as2d"),require("./as3d"),require("./as4d"),require("./as5d"),require("./asin"),require("./asinh"),require("./atan"),require("./atan2"),require("./atanh"),require("./avg_pool"),require("./batch_to_space_nd"),require("./batchnorm"),require("./broadcast_to"),require("./cast"),require("./ceil"),require("./clip_by_value"),require("./concat"),require("./conv1d"),require("./conv2d_transpose"),require("./conv2d"),require("./cos"),require("./cosh"),require("./cumsum"),require("./depth_to_space"),require("./depthwise_conv2D_deprecated"),require("./depthwise_conv2d"),require("./dilation2d"),require("./div_no_nan"),require("./div_strict"),require("./div"),require("./dot"),require("./elu"),require("./equal_strict"),require("./equal"),require("./erf"),require("./exp"),require("./expand_dims"),require("./expm1"),require("./fft"),require("./flatten"),require("./floor"),require("./floorDiv"),require("./gather"),require("./greater_equal_strict"),require("./greater_equal"),require("./greater_strict"),require("./greater"),require("./ifft"),require("./irfft"),require("./is_finite"),require("./is_inf"),require("./is_nan"),require("./leaky_relu"),require("./less_equal_strict"),require("./less_equal"),require("./less_strict"),require("./less"),require("./local_response_normalization"),require("./log_sigmoid"),require("./log_softmax"),require("./log_sum_exp"),require("./log"),require("./log1p"),require("./logical_and"),require("./logical_not"),require("./logical_or"),require("./logical_xor"),require("./mat_mul"),require("./max_pool"),require("./max"),require("./maximum_strict"),require("./maximum"),require("./mean"),require("./min"),require("./minimum_strict"),require("./minimum"),require("./mirror_pad"),require("./mod_strict"),require("./mod"),require("./mul_strict"),require("./mul"),require("./neg"),require("./norm"),require("./not_equal_strict"),require("./not_equal"),require("./one_hot"),require("./ones_like"),require("./pad"),require("./pool"),require("./pow_strict"),require("./pow"),require("./prelu"),require("./prod"),require("./reciprocal"),require("./relu"),require("./relu6"),require("./reshape_as"),require("./reshape"),require("./resize_bilinear"),require("./resize_nearest_neighbor"),require("./reverse"),require("./rfft"),require("./round"),require("./rsqrt"),require("./selu"),require("./separable_conv2d"),require("./sigmoid"),require("./sign"),require("./sin"),require("./sinh"),require("./slice"),require("./softmax"),require("./softplus"),require("./space_to_batch_nd"),require("./split"),require("./sqrt"),require("./square"),require("./squared_difference"),require("./squared_difference_strict"),require("./squeeze"),require("./stack"),require("./step"),require("./strided_slice"),require("./sub_strict"),require("./sub"),require("./sum"),require("./tan"),require("./tanh"),require("./tile"),require("./to_bool"),require("./to_float"),require("./to_int"),require("./topk"),require("./transpose"),require("./unique"),require("./unsorted_segment_sum"),require("./unstack"),require("./where"),require("./zeros_like");
},{"./abs":"hAHY","./acos":"rSb9","./acosh":"ZzDz","./add_strict":"mDGp","./add":"exjO","./all":"Yjqi","./any":"iiFF","./arg_max":"Y7h7","./arg_min":"dZ6W","./as_scalar":"BTGh","./as_type":"mipD","./as1d":"mL1i","./as2d":"Xuiy","./as3d":"hC0z","./as4d":"TCVi","./as5d":"pH5u","./asin":"ZS2q","./asinh":"TfWD","./atan":"Q84r","./atan2":"te8p","./atanh":"EIXR","./avg_pool":"Fqu3","./batch_to_space_nd":"YAFz","./batchnorm":"heJa","./broadcast_to":"lVOQ","./cast":"lZjr","./ceil":"hy2u","./clip_by_value":"fSb8","./concat":"SYfg","./conv1d":"yTi7","./conv2d_transpose":"YdaE","./conv2d":"VuHV","./cos":"tRrk","./cosh":"m7UX","./cumsum":"Plz3","./depth_to_space":"gpZR","./depthwise_conv2D_deprecated":"NNEi","./depthwise_conv2d":"qY3A","./dilation2d":"r5pA","./div_no_nan":"ezkx","./div_strict":"iqWL","./div":"lByl","./dot":"AmE9","./elu":"ZWIj","./equal_strict":"wrOz","./equal":"Xg4w","./erf":"c95I","./exp":"uHAD","./expand_dims":"n4T6","./expm1":"YSEy","./fft":"ONAF","./flatten":"nzjH","./floor":"aXpv","./floorDiv":"Stcd","./gather":"pqmf","./greater_equal_strict":"av7B","./greater_equal":"BPNR","./greater_strict":"pAc3","./greater":"Zkuh","./ifft":"mMKa","./irfft":"cuqs","./is_finite":"MNux","./is_inf":"nF1c","./is_nan":"uo5y","./leaky_relu":"DhH2","./less_equal_strict":"Jw5V","./less_equal":"izlZ","./less_strict":"zsYh","./less":"abOQ","./local_response_normalization":"aCE7","./log_sigmoid":"ss0N","./log_softmax":"MVKK","./log_sum_exp":"ismY","./log":"lZRQ","./log1p":"Wf8C","./logical_and":"FqD2","./logical_not":"n5pl","./logical_or":"butI","./logical_xor":"uTs7","./mat_mul":"nnXQ","./max_pool":"i4md","./max":"wKmI","./maximum_strict":"u2v8","./maximum":"ByTA","./mean":"EtRN","./min":"bVxv","./minimum_strict":"kQuU","./minimum":"v0BM","./mirror_pad":"BuIx","./mod_strict":"hBeP","./mod":"bviV","./mul_strict":"sxwu","./mul":"yrwH","./neg":"BdQu","./norm":"KhHB","./not_equal_strict":"Wqhm","./not_equal":"DMM0","./one_hot":"qaY4","./ones_like":"WSxx","./pad":"hIgT","./pool":"B6PO","./pow_strict":"e4VV","./pow":"ptfu","./prelu":"Nu7c","./prod":"rRJT","./reciprocal":"iB18","./relu":"H96b","./relu6":"cyjM","./reshape_as":"Rvhk","./reshape":"fRxu","./resize_bilinear":"SMt2","./resize_nearest_neighbor":"RIGW","./reverse":"fR2E","./rfft":"YyJO","./round":"oHSL","./rsqrt":"Rill","./selu":"g71a","./separable_conv2d":"MtTs","./sigmoid":"gZlU","./sign":"e2ia","./sin":"kIM6","./sinh":"UeBt","./slice":"UCTo","./softmax":"neuq","./softplus":"KPUl","./space_to_batch_nd":"YZ0n","./split":"fYj1","./sqrt":"Aqdd","./square":"rS2M","./squared_difference":"AUM6","./squared_difference_strict":"lXXH","./squeeze":"C0g2","./stack":"h7BE","./step":"w4V1","./strided_slice":"Im92","./sub_strict":"J35v","./sub":"PYtK","./sum":"Xnvz","./tan":"tg9T","./tanh":"vCuK","./tile":"dovN","./to_bool":"sA3u","./to_float":"HKul","./to_int":"zfU7","./topk":"V76c","./transpose":"dCc2","./unique":"K0pd","./unsorted_segment_sum":"jRej","./unstack":"tCpw","./where":"K1PH","./zeros_like":"Kgd3"}],"tc6m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./base_side_effects");var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_gradients"),require("./public/chained_ops/register_all_chained_ops");
},{"./base_side_effects":"i0z4","./base":"aWHA","./register_all_gradients":"pbwh","./public/chained_ops/register_all_chained_ops":"QTkt"}],"EXqn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.epsilon=n,exports.setEpsilon=r,exports.imageDataFormat=o;var e=require("@tensorflow/tfjs-core");let t;function n(){return null==t&&(t=(0,e.backend)().epsilon()),t}function r(e){t=e}function o(){return"channelsLast"}
},{"@tensorflow/tfjs-core":"tc6m"}],"xUGZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexError=exports.AssertionError=exports.NotImplementedError=exports.ValueError=exports.RuntimeError=exports.AttributeError=void 0;class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}exports.AttributeError=r;class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}}exports.RuntimeError=t;class e extends Error{constructor(r){super(r),Object.setPrototypeOf(this,e.prototype)}}exports.ValueError=e;class o extends Error{constructor(r){super(r),Object.setPrototypeOf(this,o.prototype)}}exports.NotImplementedError=o;class s extends Error{constructor(r){super(r),Object.setPrototypeOf(this,s.prototype)}}exports.AssertionError=s;class p extends Error{constructor(r){super(r),Object.setPrototypeOf(this,p.prototype)}}exports.IndexError=p;
},{}],"q8Pr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pyListRepeat=r,exports.assert=n,exports.count=o,exports.singletonOrArray=s,exports.toList=i,exports.objectListUid=a,exports.toSnakeCase=u,exports.toCamelCase=l,exports.serializeKerasObject=f,exports.deserializeKerasObject=y,exports.numberCompare=g,exports.reverseNumberCompare=d,exports.stringToDType=h,exports.stringsEqual=w,exports.unique=b,exports.isObjectEmpty=m,exports.checkStringTypeUnionValue=$,exports.checkArrayTypeAndLength=x,exports.assertPositiveInteger=j,exports.formatAsFriendlyString=A,exports.debounce=O,exports.mapActivationToFusedKernel=v,exports.getCartesianProductOfValues=E;var e=require("@tensorflow/tfjs-core"),t=require("../errors");function r(e,t){if(Array.isArray(e)){let r=[];for(let n=0;n<t;n++)r=r.concat(e);return r}{const r=new Array(t);return r.fill(e),r}}function n(e,r){if(!e)throw new t.AssertionError(r)}function o(e,t){let r=0;for(const n of e)n===t&&r++;return r}function s(e){return 1===e.length?e[0]:e}function i(e){return Array.isArray(e)?e:[e]}function a(e){const r=i(e);let n="";for(const o of r){if(null==o.id)throw new t.ValueError(`Object ${o} passed to objectListUid without an id`);""!==n&&(n+=", "),n=`${n}${Math.abs(o.id)}`}return n}function u(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function l(e){return e.length<=1?e:-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let c={};function f(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function p(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>p(e));else{const t=Object.keys(e);for(const r of t){const t=e[r];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?p(t):e[r]=t.value)}}}function y(e,r={},n={},o="object",s=!1){if("string"==typeof e){const s=e;let i;if(s in n)i=n[s];else if(s in c)i=c[s];else if(null==(i=r[s]))throw new t.ValueError(`Unknown ${o}: ${e}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new t.ValueError(`${o}: Improper config format: `+`${JSON.stringify(i)}.\n`+"'className' and 'config' must set.");const a=i.className;let u,l;if(a in n?[u,l]=n[a]:a in c?[u,l]=c.className:a in r&&([u,l]=r[a]),null==u)throw new t.ValueError(`Unknown ${o}: ${a}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(c))e[n]=c[n];for(const o of Object.keys(n))e[o]=n[o];i.config.customObjects=e;const t=Object.assign({},c);for(const o of Object.keys(n))c[o]=n[o];p(i.config);const r=l(u,i.config,n,s);return c=Object.assign({},t),r}{const e=Object.assign({},c);for(const r of Object.keys(n))c[r]=n[r];const t=new u(i.config);return c=Object.assign({},e),t}}}function g(e,t){return e<t?-1:e>t?1:0}function d(e,t){return-1*g(e,t)}function h(e){switch(e){case"float32":return"float32";default:throw new t.ValueError(`Invalid dtype: ${e}`)}}function w(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function b(e){if(null==e)return e;const t=[];for(const r of e)-1===t.indexOf(r)&&t.push(r);return t}function m(e){if(null==e)throw new t.ValueError(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function $(e,r,n){if(null!=n&&e.indexOf(n)<0)throw new t.ValueError(`${n} is not a valid ${r}.  Valid values are ${e} or null/undefined.`)}function x(e,t,r=0,o=1/0){return n(r>=0),n(o>=r),Array.isArray(e)&&e.length>=r&&e.length<=o&&e.every(e=>typeof e===t)}function j(t,r){Array.isArray(t)?(e.util.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((e,t)=>j(e,`element ${t+1} of ${r}`))):e.util.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got `+`${A(t)}.`)}function A(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>A(e)).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function O(t,r){let n,o=e.util.now();return(...s)=>{const i=e.util.now();return i-o<r?n:(o=i,n=t(...s))}}function v(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function E(...e){n(e.length>0,"arrayOfValues is empty");for(const t of e)n(Array.isArray(t),"one of the values is not an array"),n(t.length>0,"one of the values is empty");return e.reduce((e,t)=>0===e.length?t.map(e=>[e]):t.map(t=>e.map(e=>[...e,t])).reduce((e,t)=>e.concat(t),[]),[])}
},{"@tensorflow/tfjs-core":"tc6m","../errors":"xUGZ"}],"aG05":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeConstraint=c,exports.deserializeConstraint=f,exports.getConstraint=m,exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.MinMaxNorm=exports.NonNeg=exports.UnitNorm=exports.MaxNorm=exports.Constraint=void 0;var e=s(require("@tensorflow/tfjs-core")),t=require("./backend/common"),a=require("./utils/generic_utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=r?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(s,n,l):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}function r(t,a){return(0,e.tidy)(()=>e.sqrt(e.sum(e.mul(t,t),a,!0)))}class n extends e.serialization.Serializable{getConfig(){return{}}}exports.Constraint=n;class l extends n{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.clipByValue(i,0,this.maxValue);return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}exports.MaxNorm=l,l.className="MaxNorm",e.serialization.registerClass(l);class u extends n{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>e.div(a,e.add((0,t.epsilon)(),r(a,this.axis))))}getConfig(){return{axis:this.axis}}}exports.UnitNorm=u,u.className="UnitNorm",e.serialization.registerClass(u);class o extends n{apply(t){return e.relu(t)}}exports.NonNeg=o,o.className="NonNeg",e.serialization.registerClass(o);class x extends n{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.add(e.mul(this.rate,e.clipByValue(i,this.minValue,this.maxValue)),e.mul(1-this.rate,i));return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}exports.MinMaxNorm=x,x.className="MinMaxNorm",e.serialization.registerClass(x);const p={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function c(e){return(0,a.serializeKerasObject)(e)}function f(t,i={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,i,"constraint")}function m(e){if(null==e)return null;if("string"==typeof e){return f({className:e in p?p[e]:e,config:{}})}return e instanceof n?e:f(e)}exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=p;
},{"@tensorflow/tfjs-core":"tc6m","./backend/common":"EXqn","./utils/generic_utils":"q8Pr"}],"wkzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxNorm=r,exports.unitNorm=e,exports.nonNeg=t,exports.minMaxNorm=o;var n=require("./constraints");function r(r){return new n.MaxNorm(r)}function e(r){return new n.UnitNorm(r)}function t(){return new n.NonNeg}function o(r){return new n.MinMaxNorm(r)}
},{"./constraints":"aG05"}],"L4aa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VALID_SAMPLE_WEIGHT_MODES=exports.VALID_BIDIRECTIONAL_MERGE_MODES=exports.VALID_POOL_MODE_VALUES=exports.VALID_PADDING_MODE_VALUES=exports.VALID_INTERPOLATION_FORMAT_VALUES=exports.VALID_DATA_FORMAT_VALUES=void 0;const _=["channelsFirst","channelsLast"];exports.VALID_DATA_FORMAT_VALUES=_;const A=["nearest","bilinear"];exports.VALID_INTERPOLATION_FORMAT_VALUES=A;const s=["valid","same","causal"];exports.VALID_PADDING_MODE_VALUES=s;const e=["max","avg"];exports.VALID_POOL_MODE_VALUES=e;const L=["sum","mul","concat","ave"];exports.VALID_BIDIRECTIONAL_MERGE_MODES=L;const t=["temporal"];exports.VALID_SAMPLE_WEIGHT_MODES=t;
},{}],"DKuh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkDataFormat=o,exports.checkInterpolationFormat=r,exports.checkPaddingMode=c,exports.checkPoolMode=a,exports.nameScope=u,exports.getScopedTensorName=_,exports.getUniqueTensorName=h,exports.isValidTensorName=A;var e=require("./keras_format/common"),t=require("./utils/generic_utils");const n=new Map;function o(n){(0,t.checkStringTypeUnionValue)(e.VALID_DATA_FORMAT_VALUES,"DataFormat",n)}function r(n){(0,t.checkStringTypeUnionValue)(e.VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",n)}function c(n){(0,t.checkStringTypeUnionValue)(e.VALID_PADDING_MODE_VALUES,"PaddingMode",n)}function a(n){(0,t.checkStringTypeUnionValue)(e.VALID_POOL_MODE_VALUES,"PoolMode",n)}const i=[],s="/";function u(e,t){i.push(e);try{const e=t();return i.pop(),e}catch(n){throw i.pop(),n}}function p(){return 0===i.length?"":i.join(s)+s}function _(e){if(!A(e))throw new Error("Not a valid tensor name: '"+e+"'");return p()+e}function h(e){if(!A(e))throw new Error("Not a valid tensor name: '"+e+"'");n.has(e)||n.set(e,0);const t=n.get(e);if(n.set(e,n.get(e)+1),t>0){const o=`${e}_${t}`;return n.set(o,1),o}return e}const l=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function A(e){return!!e.match(l)}
},{"./keras_format/common":"L4aa","./utils/generic_utils":"q8Pr"}],"Rdwq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInteger=o,exports.arrayProd=u,exports.min=i,exports.max=s,exports.sum=c,exports.mean=f,exports.variance=l,exports.median=p,exports.range=d;var e=n(require("@tensorflow/tfjs-core")),r=require("../errors");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}function o(e){return e===parseInt(e.toString(),10)}function u(e,r,t){null==r&&(r=0),null==t&&(t=e.length);let n=1;for(let o=r;o<t;++o)n*=e[o];return n}function a(r){return r=Array.isArray(r)?new Float32Array(r):r,(0,e.tensor1d)(r)}function i(r){return e.min(a(r)).dataSync()[0]}function s(r){return e.max(a(r)).dataSync()[0]}function c(r){return e.sum(a(r)).dataSync()[0]}function f(e){return c(e)/e.length}function l(r){const t=e.sub(a(r),(0,e.scalar)(f(r)));return e.sum(e.mul(t,t)).dataSync()[0]/r.length}function p(e){const r=e.slice().sort((e,r)=>e-r),t=Math.floor((r.length-1)/2),n=Math.ceil((r.length-1)/2);return t===n?r[t]:(r[t]+r[n])/2}function d(e,t){if(t<e)throw new r.ValueError(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}
},{"@tensorflow/tfjs-core":"tc6m","../errors":"xUGZ"}],"FQx5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setBackend=u,exports.getBackend=c,exports.isBackendSymbolic=p,exports.countParams=h,exports.cast=l,exports.expandDims=d,exports.repeat=f,exports.flatten=k,exports.batchFlatten=w,exports.sliceAlongFirstAxis=x,exports.sliceAlongLastAxis=m,exports.sliceAlongAxis=y,exports.concatenate=g,exports.concatAlongFirstAxis=b,exports.tile=A,exports.randomNormal=$,exports.dot=E,exports.sign=v,exports.oneHot=F,exports.gather=V,exports.square=q,exports.pow=O,exports.biasAdd=L,exports.elu=j,exports.softsign=D,exports.dropout=M,exports.hardSigmoid=B,exports.inTrainPhase=I;var e=o(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("../errors"),n=o(require("../utils/math_utils")),a=require("./common");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}let i="webgl";function u(r){e.setBackend(r),i=r}function c(){return i}function p(){return!1}function h(e){const r=e.shape;return r.length>0?r.reduce((e,r)=>e*r):1}function l(e,r){return e.asType(r)}function d(e,r=-1){const t=e.shape.slice();return r<0&&(r=t.length+r+1),t.splice(r,0,1),e.reshape(t)}function f(r,n){return(0,e.tidy)(()=>{if(2!==r.shape.length)throw new t.ValueError("repeat() expects a rank-2 tensor, but received a "+`rank-${r.shape.length} tensor.`);return A(d(r,1),[1,n,1])})}function k(e){const r=[n.arrayProd(e.shape)];return e.reshape(r)}function w(e){if(e.rank<=1)throw new t.ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const r=[e.shape[0],n.arrayProd(e.shape,1)];return e.reshape(r)}function x(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[n,0],[a,r.shape[1]]);case 3:return e.slice3d(r,[n,0,0],[a,r.shape[1],r.shape[2]]);case 4:return e.slice4d(r,[n,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3]]);case 5:return e.slice(r,[n,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4]]);case 6:return e.slice(r,[n,0,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4],r.shape[5]]);default:throw new t.ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function m(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[0,n],[r.shape[0],a]);case 3:return e.slice3d(r,[0,0,n],[r.shape[0],r.shape[1],a]);case 4:return e.slice4d(r,[0,0,0,n],[r.shape[0],r.shape[1],r.shape[2],a]);default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function y(r,n,a,s){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:switch(s){case 1:return x(r,n,a);case 2:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 3:switch(s){case 1:return x(r,n,a);case 2:return e.slice3d(r,[0,n,0],[r.shape[0],a,r.shape[2]]);case 3:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 4:switch(s){case 1:return x(r,n,a);case 2:return e.slice4d(r,[0,n,0,0],[r.shape[0],a,r.shape[2],r.shape[3]]);case 3:return e.slice4d(r,[0,0,n,0],[r.shape[0],r.shape[1],a,r.shape[3]]);case 4:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function g(r,t=-1){let n;return t<0&&(t=0!==(n=r[0].rank)?n:0),t===r[0].rank&&(t=-1),e.concat(r,t)}function b(r,n){switch(r.rank){case 1:return e.concat1d([r,n]);case 2:return e.concat2d([r,n],0);case 3:return e.concat3d([r,n],0);case 4:return e.concat4d([r,n],0);default:throw new t.ValueError("concatAlongFirstAxis() received an unsupported "+`tensor rank: ${r.rank}`)}}function A(r,n){if(Array.isArray(n)||(n=[n]),r.rank!==n.length)throw new t.ValueError(`The length of input n (${n.length}) does not match `+`the number of dimensions in input x (${r.rank})`);return e.tile(r,n)}function $(r,t=0,n=1,a,s){return e.randomNormal(r,t,n,a,s)}function E(r,n,s,o){if(r.rank<2||n.rank<2)throw new t.NotImplementedError("dot requires both inputs to be rank >= 2"+` but got x shape = ${r.shape} and y shape = ${n.shape}`);if(n.rank>=3){if(r.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new t.NotImplementedError("If rank y >= 3, then the second last dim"+` of y must equal the last dim of x but got x shape = ${r.shape} and `+` y shape = ${n.shape}`)}if(2===r.rank&&2===n.rank){const t=!1,i=!1;return e.fused.matMul({a:r,b:n,transposeA:t,transposeB:i,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s})}{const t=r.shape.slice(),i=t.pop();r=r.reshape([-1,i]);const u=n.shape.slice(),c=u.pop(),p=u.pop(),h=[...u,c],l=Array.from({length:n.rank},(e,r)=>0===r?n.rank-2:r<=n.rank-2?r-1:r);n=n.transpose(l).reshape([p,-1]);const d=[...t,...h],f=!1,k=!1;return e.fused.matMul({a:r,b:n,transposeA:f,transposeB:k,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s}).reshape(d)}}function v(r){return(0,e.tidy)(()=>{const t=(0,e.zerosLike)(r),n=(0,e.onesLike)(r);return(0,e.where)(e.equal(r,t),t,(0,e.where)(e.greater(r,(0,e.zerosLike)(r)),n,e.mul(-1,n)))})}function F(r,t){return(0,e.tidy)(()=>{if(1!==r.rank)throw new Error("Only 1D one-hot tensors are supported in the deeplearn backend, at present.");return r=r.toInt(),e.oneHot(r,t).toFloat()})}function V(r,t,n){return(0,e.tidy)(()=>(t=Array.isArray(t)?(0,e.tensor1d)(t,"int32"):t.toInt(),e.gather(r,t,n)))}function q(r){return e.mul(r,r)}function O(r,n){return(0,e.tidy)(()=>{if("number"==typeof n&&(n=(0,e.scalar)(Math.round(n),"int32")),"int32"!==n.dtype)throw new t.NotImplementedError(`Non-int32 dtype (${n.dtype}) is not supported by pow() yet`);return e.pow(r,n)})}function P(e,r,n){const a=r.shape;if(1!==r.rank&&r.rank!==e)throw new t.ValueError(`Unexpected bias dimensions: ${r.rank}`+`; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1,1,1]):r.reshape([1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,1,1,a[0]]):r.reshape([1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1,1]):r.reshape([1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,1,a[0]]):r.reshape([1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1]):r.reshape([1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,a[0]]):r.reshape([1].concat(a))}else if(e<3)return r;throw new t.ValueError(`Unsupported input rank by biasAdd: ${r.rank}`)}function L(t,n,s){return(0,e.tidy)(()=>(null==s&&(s=(0,a.imageDataFormat)()),(0,r.checkDataFormat)(s),t.add(P(t.rank,n,s))))}function j(r,n=1){if(1!==n)throw new t.NotImplementedError(`Support for alpha values other than 1 (${n}) is not implemented `+"yet.");return e.elu(r)}function D(r){return(0,e.tidy)(()=>e.div(r,e.abs(r).add(1)))}function M(r,t,n,a){return(0,e.tidy)(()=>e.dropout(r,t,n,a))}function B(r){return(0,e.tidy)(()=>{const t=e.add(.5,e.mul(.2,r));return e.clipByValue(t,0,1)})}function I(e,r,t=!1){return t?e():r()}
},{"@tensorflow/tfjs-core":"tc6m","../common":"DKuh","../errors":"xUGZ","../utils/math_utils":"Rdwq","./common":"EXqn"}],"Nm1E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializerClassNames=exports.VALID_DISTRIBUTION_VALUES=exports.VALID_FAN_MODE_VALUES=void 0;const e=["fanIn","fanOut","fanAvg"];exports.VALID_FAN_MODE_VALUES=e;const o=["normal","uniform","truncatedNormal"];exports.VALID_DISTRIBUTION_VALUES=o;const t=["Zeros","Ones","Constant","RandomNormal","RandomUniform","TruncatedNormal","VarianceScaling","Orthogonal","Identity"];exports.initializerClassNames=t;
},{}],"d5hn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkFanMode=u,exports.checkDistribution=m,exports.serializeInitializer=T,exports.getInitializer=w,exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.Orthogonal=exports.LeCunUniform=exports.LeCunNormal=exports.HeUniform=exports.HeNormal=exports.GlorotNormal=exports.GlorotUniform=exports.VarianceScaling=exports.Identity=exports.TruncatedNormal=exports.RandomNormal=exports.RandomUniform=exports.Constant=exports.Ones=exports.Zeros=exports.Initializer=void 0;var e=require("@tensorflow/tfjs-core"),t=l(require("./backend/tfjs_backend")),s=require("./common"),r=require("./errors"),n=require("./keras_format/initializer_config"),a=require("./utils/generic_utils"),i=require("./utils/math_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(o=function(e){return e?s:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=o(t);if(s&&s.has(e))return s.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,s&&s.set(e,r),r}function u(e){(0,a.checkStringTypeUnionValue)(n.VALID_FAN_MODE_VALUES,"FanMode",e)}function m(e){(0,a.checkStringTypeUnionValue)(n.VALID_DISTRIBUTION_VALUES,"Distribution",e)}class d extends e.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}exports.Initializer=d;class c extends d{apply(t,s){return(0,e.zeros)(t,s)}}exports.Zeros=c,c.className="Zeros",e.serialization.registerClass(c);class f extends d{apply(t,s){return(0,e.ones)(t,s)}}exports.Ones=f,f.className="Ones",e.serialization.registerClass(f);class h extends d{constructor(e){if(super(),"object"!=typeof e)throw new r.ValueError(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new r.ValueError(`config must have value set but got ${e}`);this.value=e.value}apply(t,s){return(0,e.tidy)(()=>(0,e.mul)((0,e.scalar)(this.value),(0,e.ones)(t,s)))}getConfig(){return{value:this.value}}}exports.Constant=h,h.className="Constant",e.serialization.registerClass(h);class p extends d{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(t,s){return(0,e.randomUniform)(t,this.minval,this.maxval,s)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}exports.RandomUniform=p,p.className="RandomUniform",e.serialization.registerClass(p);class g extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`randomNormal does not support dType ${s}.`);return t.randomNormal(e,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.RandomNormal=g,g.className="RandomNormal",e.serialization.registerClass(g);class N extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(t,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`truncatedNormal does not support dType ${s}.`);return(0,e.truncatedNormal)(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.TruncatedNormal=N,N.className="TruncatedNormal",e.serialization.registerClass(N);class x extends d{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(t,s){return(0,e.tidy)(()=>{if(2!==t.length||t[0]!==t[1])throw new r.ValueError("Identity matrix initializer can only be used for 2D square matrices.");return(0,e.mul)(this.gain,(0,e.eye)(t[0]))})}getConfig(){return{gain:this.gain}}}function C(e,t="channelsLast"){let r,n;if((0,s.checkDataFormat)(t),2===e.length)r=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=(0,i.arrayProd)(e,2);r=e[1]*t,n=e[0]*t}else if("channelsLast"===t){const t=(0,i.arrayProd)(e,0,e.length-2);r=e[e.length-2]*t,n=e[e.length-1]*t}}else{const t=(0,i.arrayProd)(e);r=Math.sqrt(t),n=Math.sqrt(t)}return[r,n]}exports.Identity=x,x.className="Identity",e.serialization.registerClass(x);class I extends d{constructor(e){if(super(),e.scale<0)throw new r.ValueError(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,u(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,m(this.distribution),this.seed=e.seed}apply(t,s){const n=C(t),a=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,a):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(a+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`${this.getClassName()} does not support dType ${s}.`);return(0,e.truncatedNormal)(t,0,n,s,this.seed)}{const r=Math.sqrt(3*o);return(0,e.randomUniform)(t,-r,r,s)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}exports.VarianceScaling=I,I.className="VarianceScaling",e.serialization.registerClass(I);class U extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotUniform=U,U.className="GlorotUniform",e.serialization.registerClass(U);class y extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotNormal=y,y.className="GlorotNormal",e.serialization.registerClass(y);class E extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeNormal=E,E.className="HeNormal",e.serialization.registerClass(E);class v extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeUniform=v,v.className="HeUniform",e.serialization.registerClass(v);class L extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunNormal=L,L.className="LeCunNormal",e.serialization.registerClass(L);class A extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunUniform=A,A.className="LeCunNormal",e.serialization.registerClass(A);class _ extends d{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new r.NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(s,n){return(0,e.tidy)(()=>{if(s.length<2)throw new r.NotImplementedError("Shape must be at least 2D.");s[0]*s[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+`than 2000 (${s[0]*s[1]}) elements: `+"Slowness may result.");const n=s[0]>s[1]?[s[1],s[0]]:s,a=t.randomNormal(n,0,1,"float32");let i=e.linalg.gramSchmidt(a);return s[0]>s[1]&&(i=i.transpose()),(0,e.mul)(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}}exports.Orthogonal=_,_.className="Orthogonal",e.serialization.registerClass(_);const b={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function D(t,s={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,s,"initializer")}function T(e){return(0,a.serializeKerasObject)(e)}function w(e){if("string"==typeof e){const t=e in b?b[e]:e;if("GlorotNormal"===t)return new y;if("GlorotUniform"===t)return new U;if("HeNormal"===t)return new E;if("HeUniform"===t)return new v;if("LeCunNormal"===t)return new L;if("LeCunUniform"===t)return new A;{const e={};return e.className=t,e.config={},D(e)}}return e instanceof d?e:D(e)}exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=b;
},{"@tensorflow/tfjs-core":"tc6m","./backend/tfjs_backend":"FQx5","./common":"DKuh","./errors":"xUGZ","./keras_format/initializer_config":"Nm1E","./utils/generic_utils":"q8Pr","./utils/math_utils":"Rdwq"}],"wDmZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=r,exports.ones=e,exports.constant=o,exports.randomUniform=t,exports.randomNormal=u,exports.truncatedNormal=i,exports.identity=a,exports.varianceScaling=s,exports.glorotUniform=c,exports.glorotNormal=f,exports.heNormal=l,exports.heUniform=m,exports.leCunNormal=p,exports.leCunUniform=x,exports.orthogonal=w;var n=require("./initializers");function r(){return new n.Zeros}function e(){return new n.Ones}function o(r){return new n.Constant(r)}function t(r){return new n.RandomUniform(r)}function u(r){return new n.RandomNormal(r)}function i(r){return new n.TruncatedNormal(r)}function a(r){return new n.Identity(r)}function s(r){return new n.VarianceScaling(r)}function c(r){return new n.GlorotUniform(r)}function f(r){return new n.GlorotNormal(r)}function l(r){return new n.HeNormal(r)}function m(r){return new n.HeUniform(r)}function p(r){return new n.LeCunNormal(r)}function x(r){return new n.LeCunUniform(r)}function w(r){return new n.Orthogonal(r)}
},{"./initializers":"d5hn"}],"OJz3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNextUniqueTensorId=t,exports.getUid=r;let e=0;function t(){return e++}const n={};function r(e=""){return e in n||(n[e]=0),n[e]+=1,e+n[e].toString()}
},{}],"KfRc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayOfShapes=e,exports.normalizeShapeList=t,exports.getExactlyOneTensor=n,exports.getExactlyOneShape=a;var r=require("../errors");function e(r){return Array.isArray(r)&&Array.isArray(r[0])}function t(r){return 0===r.length?[]:Array.isArray(r[0])?r:[r]}function n(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.ValueError(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function a(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new r.ValueError(`Expected exactly 1 Shape; got ${e.length}`)}return e}
},{"../errors":"xUGZ"}],"I5Ya":[function(require,module,exports) {
"use strict";function e(e){let t=0;for(const r of e)0===r.shape.length?t+=1:t+=r.shape.reduce((e,t)=>e*t);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.countParamsInWeights=e;
},{}],"jNTt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=l,exports.zerosVariable=p,exports.zerosLike=d,exports.onesVariable=f,exports.onesLike=c,exports.eyeVariable=h,exports.randomUniformVariable=m,exports.truncatedNormalVariable=b,exports.randomNormalVariable=w,exports.update=y,exports.updateAdd=v,exports.updateSub=N,exports.batchGetValue=x,exports.batchSetValue=g,exports.gradients=V,exports.LayerVariable=void 0;var e=o(require("@tensorflow/tfjs-core")),t=require("./backend/state"),r=require("./common"),n=require("./errors");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const i="Variable";class s{constructor(n,a="float32",o=i,s=!0,u=null){this.dtype=null==a?"float32":a,this.shape=n.shape,this.id=(0,t.getNextUniqueTensorId)(),o=null==o?i:o,this.originalName=(0,r.getScopedTensorName)(o),this.name=(0,r.getUniqueTensorName)(this.originalName),this.trainable_=s,this.constraint=u,this.val=e.variable(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),u(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function u(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function l(e,t,r,n){return new s(e,t,r,!0,n)}function p(t,r,n){return new s(e.zeros(t),r,n)}function d(t,r,n){return new s(e.zerosLike(t),r,n)}function f(t,r,n){const a=e.ones(t);return new s(a,r,n)}function c(t,r,n){const a=e.onesLike(t);return new s(a,r,n)}function h(t,r,n){return new s(e.eye(t),r,n)}function m(t,r,n,a,o,i="randomUniform"){return new s(e.randomUniform(t,r,n,a),a,i)}function b(t,r=0,a=1,o,i,u="truncatedNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormal does not support dType ${o}.`);return new s(e.truncatedNormal(t,r,a,o,i),o,u)}function w(t,r=0,a=1,o,i,u="randomNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormalVariable does not support dType ${o}.`);return new s(e.randomNormal(t,r,a,o,i),o,u)}function y(e,t){return e.write(t)}function v(t,r){return t.write(e.add(t.read(),r))}function N(t,r){return t.write(e.sub(t.read(),r))}function x(e){return e.map(e=>e.read())}function g(e){e.forEach(e=>{e[0].write(e[1])})}function V(t,r){const n=r.map(e=>e.read()),a=(0,e.variableGrads)(t,n);return r.map(e=>a.grads[e.name])}exports.LayerVariable=s;
},{"@tensorflow/tfjs-core":"tc6m","./backend/state":"OJz3","./common":"DKuh","./errors":"xUGZ"}],"aftd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSourceInputs=w,exports.Layer=exports.Node=exports.SymbolicTensor=exports.InputSpec=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),n=require("../common"),i=require("../errors"),s=require("../initializers"),r=l(require("../utils/generic_utils")),o=l(require("../utils/types_utils")),a=l(require("../utils/variable_utils")),h=require("../variables");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=s?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,n&&n.set(t,i),i}class p{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}exports.InputSpec=p;class d{constructor(t,i,s,r,o,a,h){this.dtype=t,this.shape=i,this.sourceLayer=s,this.inputs=r,this.callArgs=o,this.outputTensorIndex=h,this.id=(0,e.getNextUniqueTensorId)(),null!=a&&(this.originalName=(0,n.getScopedTensorName)(a),this.name=(0,n.getUniqueTensorName)(this.originalName)),this.rank=i.length}}exports.SymbolicTensor=d;let c=0;class f{constructor(t,e){this.callArgs=e,this.id=c++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}exports.Node=f;let b=0;class g extends t.serialization.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=b++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const t=this.getClassName();n=r.toSnakeCase(t)+"_"+(0,e.getUid)(t)}if(this.name=n,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new i.RuntimeError("The layer has never been called "+`and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new i.ValueError(`Asked to get ${e} at node ${t}, `+`but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" is not connected, no input to return.");return r.singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return r.singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=r.toList(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=r.toList(this.inputSpec);if(t.length!==e.length)throw new i.ValueError(`Layer ${this.name} expects ${e.length} inputs, `+`but it received ${t.length} input tensors. `+`Input received: ${t}`);for(let n=0;n<t.length;n++){const s=t[n],r=e[n];if(null==r)continue;const o=s.rank;if(null!=r.ndim&&o!==r.ndim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}: `+`expected ndim=${r.ndim}, found ndim=${o}`);if(null!=r.maxNDim&&o>r.maxNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected max_ndim=${r.maxNDim}, found ndim=${o}`);if(null!=r.minNDim&&o<r.minNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected min_ndim=${r.minNDim}, found ndim=${o}.`);if(null!=r.dtype&&s.dtype!==r.dtype)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name} `+`: expected dtype=${r.dtype}, found dtype=${s.dtype}.`);if(r.axes){const t=s.shape;for(const e in r.axes){const s=Number(e),o=r.axes[e],a=s>=0?t[s]:t[t.length+s];if(null!=o&&-1===[o,null].indexOf(a))throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected axis ${s} of input shape to `+`have value ${o} but got shape ${t}.`)}}if(null!=r.shape)for(let t=0;t<r.shape.length;++t){const e=r.shape[t],o=s.shape[t];if(null!=e&&null!=o&&e!==o)throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected shape=${r.shape}, `+`found shape=${s.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const s=r.toList(t);let o=!0;for(const n of s)if(!(n instanceof d)){o=!1;break}let a=!0;for(const n of s)if(n instanceof d){a=!1;break}if(o===a)throw new i.ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,n.nameScope)(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of r.toList(t))e.push(n.shape);this.build(r.singletonOrArray(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(t),a){let n=this.call(t,e);const o=r.toList(n),a=[];for(let t of o)-1!==s.indexOf(t)&&(t=t.clone()),a.push(t);if(n=r.singletonOrArray(a),null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}{const n=y(t),s=this.computeOutputShape(n);let o;const a=m(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),o=null!=s&&s.length>0&&Array.isArray(s[0])?s.map((n,i)=>new d(a,n,this,r.toList(t),e,this.name,i)):new d(a,s,this,r.toList(t),e,this.name),this.addInboundNode(t,o,null,null,n,s,e),this._refCount++,null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+`${JSON.stringify(t)}) does not match that of the `+`batchInputShape (${JSON.stringify(this.batchInputShape)}) `+`of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((n,i)=>{null!=n&&null!=t[i]&&t[i]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor "+`(${JSON.stringify(t)}) does not `+`match the expectation of layer ${this.name}: `+`${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new i.AttributeError(`The layer ${this.name} has never been called and thus has no `+"defined output shape.");const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new i.AttributeError(`The layer ${this.name} has multiple inbound nodes with different `+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new i.RuntimeError(`You tried to call countParams() on ${this.name}, `+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return a.countParamsInWeights(this.weights)}build(t){this.built=!0}getWeights(t=!1){return(0,h.batchGetValue)(t?this.trainableWeights:this.weights)}setWeights(e){(0,t.tidy)(()=>{const n=this.weights;if(n.length!==e.length)throw new i.ValueError(`You called setWeights(weights) on layer "${this.name}" `+`with a weight list of length ${e.length}, `+`but the layer was expecting ${n.length} weights. `+`Provided weights: ${e}...`);if(0===n.length)return;const s=[],r=(0,h.batchGetValue)(n);for(let o=0;o<r.length;++o){const a=r[o],h=n[o],u=e[o];if(!t.util.arraysEqual(a.shape,u.shape))throw new i.ValueError(`Layer weight shape ${a.shape} `+`not compatible with provided weight shape ${u.shape}`);s.push([h,u])}(0,h.batchSetValue)(s)})}addWeight(t,e,n,r,o,a,u){if(-1!==this._addedWeightNames.indexOf(t))throw new i.ValueError(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=(0,s.getInitializer)("zeros"));const l=r.apply(e,n),p=new h.LayerVariable(l,n,t,a,u);return l.dispose(),null!=o&&this.addLoss(()=>o.apply(p.read())),null==a&&(a=!0),a?this._trainableWeights.push(p):this._nonTrainableWeights.push(p),p}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=r.toList(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.");e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.")})}return null}return e}addInboundNode(t,e,n,i,s,a,h=null){const u=r.toList(t);e=r.toList(e),n=r.toList(n),i=r.toList(i),s=o.normalizeShapeList(s),a=o.normalizeShapeList(a);const l=[],p=[],d=[];for(const r of u)l.push(r.sourceLayer),p.push(r.nodeIndex),d.push(r.tensorIndex);new f({outboundLayer:this,inboundLayers:l,nodeIndices:p,tensorIndices:d,inputTensors:u,outputTensors:e,inputMasks:n,outputMasks:i,inputShapes:s,outputShapes:a},h);for(let r=0;r<e.length;r++)e[r].sourceLayer=this,e[r].nodeIndex=this.inboundNodes.length-1,e[r].tensorIndex=r}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been `+"built yet.");if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used `+"yet.");this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function y(t){t=r.toList(t);const e=[];for(const n of t)e.push(n.shape);return r.singletonOrArray(e)}function m(t){return"float32"}function w(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const i=w(t.inputTensors[n],t.inboundLayers[n],t.nodeIndices[n]);for(const t of i)-1===e.indexOf(t)&&e.push(t)}return e}}}exports.Layer=g;
},{"@tensorflow/tfjs-core":"tc6m","../backend/state":"OJz3","../common":"DKuh","../errors":"xUGZ","../initializers":"d5hn","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc","../utils/variable_utils":"I5Ya","../variables":"jNTt"}],"jFdK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=p,exports.InputLayer=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../backend/state"),n=require("../errors"),a=require("./topology");class s extends a.Layer{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,t.getUid)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new n.ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let s=e.batchInputShape;if(null==s){if(null==e.inputShape)throw new n.ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");s=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new n.ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const p=e.dtype||"float32";this.batchInputShape=s,this.dtype=p,this.inputSpec=[{shape:s}];const r=new a.SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new a.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[s],outputShapes:[s]})}apply(e,t){throw new n.ValueError("Cannot pass any input to an "+`InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function p(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new n.ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let a=e.dtype;return null==a&&(a="float32"),new s({batchInputShape:t,name:e.name,dtype:a,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}exports.InputLayer=s,s.className="InputLayer",e.serialization.registerClass(s);
},{"@tensorflow/tfjs-core":"tc6m","../backend/state":"OJz3","../errors":"xUGZ","./topology":"aftd"}],"STYk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveScalarsInLogs=e,exports.disposeTensorsInLogs=o;var s=require("@tensorflow/tfjs-core");async function e(e){if(null==e)return;const o=[],n=[],t=[];for(const s in e){const r=e[s];if("number"!=typeof r){const e=r;o.push(e.data()),n.push(s),t.push(e)}}if(o.length>0){const r=await Promise.all(o);for(let s=0;s<r.length;++s)e[n[s]]=r[s][0];(0,s.dispose)(t)}}function o(s){if(null!=s)for(const e in s){const o=s[e];"number"!=typeof o&&o.dispose()}}
},{"@tensorflow/tfjs-core":"tc6m"}],"g9nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeCallbacks=y,exports.configureCallbacks=E,exports.CallbackConstructorRegistry=exports.CustomCallback=exports.History=exports.BaseLogger=exports.CallbackList=exports.BaseCallback=exports.DEFAULT_YIELD_EVERY_MS=exports.ModelLoggingVerbosity=void 0;var t,s=require("@tensorflow/tfjs-core"),n=require("./errors"),e=require("./logs"),o=i(require("./utils/generic_utils"));function a(t){if("function"!=typeof WeakMap)return null;var s=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:s})(t)}function i(t,s){if(!s&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=a(s);if(n&&n.has(t))return n.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var r=o?Object.getOwnPropertyDescriptor(t,i):null;r&&(r.get||r.set)?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,n&&n.set(t,e),e}exports.ModelLoggingVerbosity=t,function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(t||(exports.ModelLoggingVerbosity=t={}));const r=125;exports.DEFAULT_YIELD_EVERY_MS=r;class c{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,s){}async onEpochEnd(t,s){}async onBatchBegin(t,s){}async onBatchEnd(t,s){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}exports.BaseCallback=c;class l{constructor(t,s=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=s}append(t){this.callbacks.push(t)}setParams(t){for(const s of this.callbacks)s.setParams(t)}setModel(t){for(const s of this.callbacks)s.setModel(t)}async onEpochBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochBegin(t,s)}async onEpochEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochEnd(t,s)}async onBatchBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchBegin(t,s)}async onBatchEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchEnd(t,s)}async onTrainBegin(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainEnd(t)}}exports.CallbackList=l;class h extends c{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){null==n&&(n={});const e=null==n.size?0:n.size;this.seen+=e;for(const o in n){const t=n[o];if("number"==typeof t)this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+t*e;else{let n;o in this.totals?n=this.totals[o]:this.totals[o]=0;const a=(0,s.tidy)(()=>(0,s.add)(this.totals[o],(0,s.mul)(t,e)));this.totals[o]=a,null!=n&&n.dispose()}}}async onEpochEnd(t,n){if(null!=n)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?n[e]=this.totals[e]/this.seen:(0,s.tidy)(()=>{const t=(0,s.mul)((0,s.div)(1,this.seen),this.totals[e]);n[e]=t,this.totals[e].dispose(),(0,s.keep)(n[e])}))}}exports.BaseLogger=h;class u extends c{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,s){null==s&&(s={}),this.epoch.push(t);for(const n in s)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(s[n])}async syncData(){const t=[],s=[],n=[];for(const o in this.history){const e=this.history[o];for(let a=0;a<e.length;++a)if("number"!=typeof e[a]){const i=e[a];t.push(i.data()),s.push(o),n.push(a)}}const e=await Promise.all(t);for(let o=0;o<e.length;++o){this.history[s[o]][n[o]].dispose(),this.history[s[o]][n[o]]=e[o][0]}}}exports.History=u;class p extends c{constructor(t,n){if(super(),this.currentEpoch=0,this.yieldEvery=n||"auto","auto"===this.yieldEvery&&(this.yieldEvery=r),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");s.util.isNumber(this.yieldEvery)&&(this.maybeWait=o.debounce(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,o){const a=[];null!=this.yield&&(await(0,e.resolveScalarsInLogs)(o),a.push(this.yield(t,n,o))),a.push((0,s.nextFrame)()),await Promise.all(a)}async onEpochBegin(t,s){this.currentEpoch=t,null!=this.epochBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.epochBegin(t,s))}async onEpochEnd(t,n){const o=[];null!=this.epochEnd&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.epochEnd(t,n))),"epoch"===this.yieldEvery&&o.push((0,s.nextFrame)()),await Promise.all(o)}async onBatchBegin(t,s){null!=this.batchBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.batchBegin(t,s))}async onBatchEnd(t,n){const o=[];null!=this.batchEnd&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.batchEnd(t,n))),"batch"===this.yieldEvery?o.push((0,s.nextFrame)()):s.util.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(o)}async onTrainBegin(t){null!=this.trainBegin&&(await(0,e.resolveScalarsInLogs)(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await(0,e.resolveScalarsInLogs)(t),await this.trainEnd(t))}}function y(t,s){if(null==t&&(t={}),t instanceof c)return[t];if(Array.isArray(t)&&t[0]instanceof c)return t;return o.toList(t).map(t=>new p(t,s))}exports.CustomCallback=p;class d{constructor(){}static registerCallbackConstructor(t,n){s.util.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, "+`but got ${t}`),d.checkForDuplicate(n),null==d.constructors[t]&&(d.constructors[t]=[]),d.constructors[t].push(n)}static checkForDuplicate(t){for(const s in d.constructors){d.constructors[+s].forEach(s=>{if(s===t)throw new n.ValueError("Duplicate callback constructor.")})}}static clear(){d.constructors={}}static createCallbacks(t){const s=[];for(const n in d.constructors){const e=+n;t>=e&&s.push(...d.constructors[e])}return s.map(t=>new t)}}function E(t,s,n,e,o,a,i,r,c){const p=new u,y=[new h,...d.createCallbacks(s)];null!=t&&y.push(...t),y.push(p);const E=new l(y);return E.setParams({epochs:n,initialEpoch:e,samples:o,steps:a,batchSize:i,verbose:s,doValidation:r,metrics:c}),{callbackList:E,history:p}}exports.CallbackConstructorRegistry=d,d.constructors={};
},{"@tensorflow/tfjs-core":"tc6m","./errors":"xUGZ","./logs":"STYk","./utils/generic_utils":"q8Pr"}],"kM5O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserialize=i;var e=require("@tensorflow/tfjs-core"),r=require("../utils/generic_utils");function i(i,t={},a=!1){return(0,r.deserializeKerasObject)(i,e.serialization.SerializationMap.getMap().classNameMap,t,"layer",a)}
},{"@tensorflow/tfjs-core":"tc6m","../utils/generic_utils":"q8Pr"}],"yMjd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l2Normalize=u,exports.meanSquaredError=i,exports.meanAbsoluteError=a,exports.meanAbsolutePercentageError=l,exports.meanSquaredLogarithmicError=p,exports.squaredHinge=c,exports.hinge=m,exports.categoricalHinge=d,exports.logcosh=f,exports.categoricalCrossentropy=y,exports.sparseCategoricalCrossentropy=x,exports.sigmoidCrossEntropyWithLogits=g,exports.binaryCrossentropy=b,exports.kullbackLeiblerDivergence=h,exports.poisson=E,exports.cosineProximity=M,exports.get=B,exports.lossesMap=exports.cosine=exports.KLD=exports.kld=exports.MSLE=exports.msle=exports.MAPE=exports.mape=exports.MAE=exports.mae=exports.MSE=exports.mse=void 0;var e=n(require("@tensorflow/tfjs-core")),r=require("./backend/common"),t=n(require("./backend/tfjs_backend")),o=require("./errors");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function u(o,s){return(0,e.tidy)(()=>{"float32"!==o.dtype&&(o=o.asType("float32"));const n=e.sum(t.square(o),s,!0),u=e.fill(n.shape,(0,r.epsilon)()),i=e.sqrt(e.maximum(n,u));return e.div(o,i)})}function i(r,o){return(0,e.tidy)(()=>e.mean(t.square(e.sub(o,r)),-1))}function a(r,t){return(0,e.tidy)(()=>e.mean(e.abs(e.sub(t,r)),-1))}function l(t,o){return(0,e.tidy)(()=>{const s=e.sub(t,o),n=e.clipByValue(e.abs(t),(0,r.epsilon)(),Number.MAX_VALUE),u=e.abs(e.div(s,n));return e.mul(100,e.mean(u,-1))})}function p(o,s){return(0,e.tidy)(()=>{const n=e.clipByValue(s,(0,r.epsilon)(),Number.MAX_VALUE),u=e.log(e.add(1,n)),i=e.clipByValue(o,(0,r.epsilon)(),Number.MAX_VALUE),a=e.log(e.add(1,i));return e.mean(t.square(e.sub(u,a)),-1)})}function c(r,o){return(0,e.tidy)(()=>{const s=e.maximum(0,e.sub(1,e.mul(r,o)));return e.mean(t.square(s),-1)})}function m(r,t){return(0,e.tidy)(()=>{const o=e.maximum(0,e.sub(1,e.mul(r,t)));return e.mean(o,-1)})}function d(r,t){return(0,e.tidy)(()=>{const o=e.sum(e.mul(r,t),-1),s=e.max(e.mul(e.sub(1,r),t),-1);return e.maximum(0,e.add(1,e.sub(s,o)))})}function f(r,t){return(0,e.tidy)(()=>{const o=Math.log(2),s=e.sub(t,r),n=e.sub(e.add(s,e.softplus(e.mul(-2,s))),o);return e.mean(n,-1)})}function y(t,o,s=!1){return(0,e.tidy)(()=>{if(s)o=e.softmax(o);else{const r=e.sum(o,o.shape.length-1,!0);o=e.div(o,r)}return o=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),e.neg(e.sum(e.mul(t.toFloat(),e.log(o)),o.shape.length-1))})}function x(o,s,n=!1){return(0,e.tidy)(()=>{const u=e.floor(t.flatten(o)).toInt(),i=(s=e.clipByValue(s,(0,r.epsilon)(),1-(0,r.epsilon)())).shape;return y(e.oneHot(u,i[i.length-1]).reshape(i),s,n)})}function g(r,t){if(!e.util.arraysEqual(r.shape,t.shape))throw new o.ValueError("logits and labels must have the same shape, but got shapes "+`${JSON.stringify(r.shape)} and ${JSON.stringify(t.shape)}`);return(0,e.tidy)(()=>{const e=t.relu(),o=t.abs().neg();return e.sub(t.mul(r)).add(o.exp().log1p())})}function b(t,o){return(0,e.tidy)(()=>{let s;return s=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),s=e.log(e.div(s,e.sub(1,s))),e.mean(g(t,s),-1)})}function h(t,o){return(0,e.tidy)(()=>{const s=e.clipByValue(t,(0,r.epsilon)(),1),n=e.clipByValue(o,(0,r.epsilon)(),1);return e.sum(e.mul(t,e.log(e.div(s,n))),-1)})}function E(t,o){return(0,e.tidy)(()=>{const s=e.log(e.add((0,r.epsilon)(),o));return e.mean(e.sub(o,e.mul(t,s)),-1)})}function M(r,t){return(0,e.tidy)(()=>{const o=u(r,-1),s=u(t,-1),n=e.mul(o,s);return e.neg(e.sum(n,-1))})}const q=i;exports.mse=q;const v=i;exports.MSE=v;const k=a;exports.mae=k;const A=a;exports.MAE=A;const w=l;exports.mape=w;const L=l;exports.MAPE=L;const V=p;exports.msle=V;const C=p;exports.MSLE=C;const P=h;exports.kld=P;const O=h;exports.KLD=O;const S=M;exports.cosine=S;const j={meanSquaredError:i,meanAbsoluteError:a,meanAbsolutePercentageError:l,meanSquaredLogarithmicError:p,squaredHinge:c,hinge:m,categoricalHinge:d,logcosh:f,categoricalCrossentropy:y,sparseCategoricalCrossentropy:x,binaryCrossentropy:b,kullbackLeiblerDivergence:h,poisson:E,cosineProximity:M};function B(e){if("string"==typeof e){if(e in j)return j[e];let r=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${e}. `+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new o.ValueError(r)}return e}exports.lossesMap=j;
},{"@tensorflow/tfjs-core":"tc6m","./backend/common":"EXqn","./backend/tfjs_backend":"FQx5","./errors":"xUGZ"}],"G1Yf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryAccuracy=c,exports.categoricalAccuracy=i,exports.precision=f,exports.recall=y,exports.binaryCrossentropy=d,exports.sparseCategoricalAccuracy=x,exports.topKCategoricalAccuracy=g,exports.sparseTopKCategoricalAccuracy=m,exports.get=P,exports.getLossOrMetricName=j,exports.metricsMap=exports.sparseCategoricalCrossentropy=exports.cosine=exports.categoricalCrossentropy=exports.MAPE=exports.mape=exports.MAE=exports.mae=exports.MSE=exports.mse=void 0;var e=a(require("@tensorflow/tfjs-core")),r=a(require("./backend/tfjs_backend")),t=require("./errors"),o=require("./losses"),n=a(require("./utils/generic_utils"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=n?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function c(t,o){return(0,e.tidy)(()=>{const n=e.mul(.5,e.onesLike(o)),s=r.cast(e.greater(o,n),t.dtype);return e.mean(e.equal(t,s),-1)})}function i(t,o){return(0,e.tidy)(()=>r.cast(e.equal(e.argMax(t,-1),e.argMax(o,-1)),"float32"))}function u(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(1),t.equal(1)).sum().cast("float32"))}function p(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(1),t.equal(0)).sum().cast("float32"))}function l(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(0),t.equal(1)).sum().cast("float32"))}function f(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=l(r,t),s=o.add(n);return e.where(e.greater(s,0),o.div(s),0).cast("float32")})}function y(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=p(r,t),s=o.add(n);return e.where(e.greater(s,0),o.div(s),0).cast("float32")})}function d(e,r){return(0,o.binaryCrossentropy)(e,r)}function x(r,t){return r.rank===t.rank&&(r=r.squeeze([r.rank-1])),(t=t.argMax(-1)).dtype!==r.dtype&&(t=t.asType(r.dtype)),e.equal(r,t).asType("float32")}function g(e,r){throw new t.NotImplementedError}function m(e,r){throw new t.NotImplementedError}const M=o.meanSquaredError;exports.mse=M;const b=o.meanSquaredError;exports.MSE=b;const A=o.meanAbsoluteError;exports.mae=A;const E=o.meanAbsoluteError;exports.MAE=E;const q=o.meanAbsolutePercentageError;exports.mape=q;const C=o.meanAbsolutePercentageError;exports.MAPE=C;const w=o.categoricalCrossentropy;exports.categoricalCrossentropy=w;const k=o.cosineProximity;exports.cosine=k;const O=o.sparseCategoricalCrossentropy;exports.sparseCategoricalCrossentropy=O;const v={binaryAccuracy:c,categoricalAccuracy:i,precision:f,categoricalCrossentropy:w,sparseCategoricalCrossentropy:O,mse:M,MSE:b,mae:A,MAE:E,mape:q,MAPE:C,cosine:k};function P(e){if("string"==typeof e&&e in v)return v[e];if("string"!=typeof e&&null!=e)return e;throw new t.ValueError(`Unknown metric ${e}`)}function j(e){if(n.assert(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let r;for(const t of Object.keys(o.lossesMap))if(o.lossesMap[t]===e){r=t;break}if(void 0!==r)return r;for(const t of Object.keys(v))if(v[t]===e){r=t;break}return void 0!==r?r:e.name}}exports.metricsMap=v;
},{"@tensorflow/tfjs-core":"tc6m","./backend/tfjs_backend":"FQx5","./errors":"xUGZ","./losses":"yMjd","./utils/generic_utils":"q8Pr"}],"BzLN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOptimizer=d;var a=require("@tensorflow/tfjs-core"),r=require("./backend/common"),e=require("./errors");function d(d){const t={Adagrad:()=>a.train.adagrad(.01),Adadelta:()=>a.train.adadelta(1,.95,(0,r.epsilon)()),Adam:()=>a.train.adam(.001,.9,.999,(0,r.epsilon)()),Adamax:()=>a.train.adamax(.002,.9,.999,(0,r.epsilon)(),0),RMSProp:()=>a.train.rmsprop(.001,.9,0,(0,r.epsilon)()),SGD:()=>a.train.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,d in t)return t[d]();throw new e.ValueError(`Unknown Optimizer ${d}`)}
},{"@tensorflow/tfjs-core":"tc6m","./backend/common":"EXqn","./errors":"xUGZ"}],"XYCV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkUserDefinedMetadata=t,exports.plainObjectCheck=r,exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=void 0;const e=1048576;function t(t,o,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!r(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>e&&console.warn(`User-defined metadata of model "${o}" is too large in `+`size (length=${r.length} when serialized). It is not `+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+`${e}.`)}}function r(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const o of t){if("string"!=typeof o)return!1;if(!r(e[o]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!r(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=e;
},{}],"hrLh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printSummary=t;var e=require("./variable_utils");function t(t,l,i,c=console.log){const u=o(t),h=["Layer (type)","Output shape","Param #"];let f;if(u?(l=l||65,i=i||[.45,.85,1]):(l=l||98,i=i||[.33,.55,.67,1]),i[i.length-1]<=1&&(i=i.map(e=>Math.floor(l*e))),!u){h.push("Receives inputs"),f=[];for(const e in t.nodesByDepth)f.push(...t.nodesByDepth[e])}c("_".repeat(l)),s(h,i,c),c("=".repeat(l));const p=t.layers;for(let e=0;e<p.length;++e)u?a(p[e],i,c):r(p[e],i,f,c),c((e===p.length-1?"=":"_").repeat(l));t.checkTrainableWeightsConsistency();const g=n(t),d=(0,e.countParamsInWeights)(t.nonTrainableWeights);c(`Total params: ${g+d}`),c(`Trainable params: ${g}`),c(`Non-trainable params: ${d}`),c("_".repeat(l))}function n(t){let n;return n=null!=t.collectedTrainableWeights?(0,e.countParamsInWeights)(t.collectedTrainableWeights):(0,e.countParamsInWeights)(t.trainableWeights)}function o(e){let t=!0;const n=[],o=[];for(const s in e.nodesByDepth)n.push(e.nodesByDepth[s]);for(const s of n){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}o.push(...s)}if(t)for(const s of e.layers){let e=!1;for(const n of s.inboundNodes)if(-1!==o.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}function s(e,t,n=console.log){let o="";for(let s=0;s<e.length;++s)s>0&&(o=o.slice(0,o.length-1)+" "),o=(o+=e[s]).slice(0,t[s]),o+=" ".repeat(t[s]-o.length);n(o)}function a(e,t,n){let o;try{o=JSON.stringify(e.outputShape)}catch(a){o="multiple"}s([`${e.name} (${e.getClassName()})`,o,e.countParams().toString()],t,n)}function r(e,t,n,o){let a;try{a=JSON.stringify(e.outputShape)}catch(u){a="multiple"}const r=[];for(const s of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(let e=0;e<s.inboundLayers.length;++e){const t=s.inboundLayers[e].name,n=s.nodeIndices[e],o=s.tensorIndices[e];r.push(`${t}[${n}][${o}]`)}const l=e.name,i=e.getClassName(),c=0===r.length?"":r[0];s([`${l} (${i})`,a,e.countParams().toString(),c],t,o);for(let h=1;h<r.length;++h)s(["","","",r[h]],t,o)}
},{"./variable_utils":"I5Ya"}],"nEpG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertPythonicToTs=o,exports.convertTsToPythonic=u;var e=n(require("../utils/generic_utils"));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}function n(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var f=u?Object.getOwnPropertyDescriptor(e,s):null;f&&(f.get||f.set)?Object.defineProperty(o,s,f):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}function r(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function o(t,n){if(null===t)return null;if("string"==typeof t)return e.toCamelCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],u=t.length;for(let s=0;s<u;++s){const u=t[s];r(n,s,u)?e.push(u):e.push(o(u,n))}return e}{const n={};for(const r of Object.keys(t)){const u=t[r];if("name"===r&&"string"==typeof u)n[r]=u;else{const t=e.toCamelCase(r);n[t]=o(u,t)}}return n}}function u(t,n){if(null==t)return null;if("string"==typeof t)return e.toSnakeCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],o=t.length;for(let s=0;s<o;++s){const o=t[s];r(n,s,o)?e.push(o):e.push(u(o,n))}return e}{const n={};for(const r of Object.keys(t)){const o=t[r],s=e.toSnakeCase(r);n[s]="name"!==r&&"className"!==r||"string"!=typeof o?u(o,r):o}return n}}
},{"../utils/generic_utils":"q8Pr"}],"Bz6f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.execute=l,exports.getTopologicalSortAndRecipientCountsForOneFetch=h,exports.FeedDict=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../errors"),t=require("../utils/generic_utils"),s=require("./input_layer"),o=require("./topology");function i(t,s){if(null==t.dtype||t.dtype===s.dtype)return s;try{return(0,e.cast)(s,t.dtype)}catch(o){throw new n.ValueError(`The dtype of the feed (${s.dtype}) can not be cast to the dtype `+`of the key '${t.name}' (${t.dtype}).`)}}class r{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof r)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(null==e)return;for(const n of e)this.add(n.key,n.value)}}add(e,t,s){if(null!=this.id2Value[e.id])throw new n.ValueError(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=i(e,t),this.name2Id[e.name]=e.id,null!=s&&(this.id2Mask[e.id]=s),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof o.SymbolicTensor){if(null==this.id2Value[e.id])throw new n.ValueError(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new n.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof o.SymbolicTensor){if(null==this.id2Value[e.id])throw new n.ValueError(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new n.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,e.dispose)(this.id2Mask)}}exports.FeedDict=r;const a={},u={};function l(n,o,i,l){const c=null!=i&&i.training,h=Array.isArray(n),p=h?n:[n],m=p.map(e=>e.name),y=[],g=o.names();for(const e of m)-1!==g.indexOf(e)?y.push(o.getValue(e)):y.push(null);null!=l&&(l.maxNumTensors=-1/0,l.minNumTensors=1/0);const k=m.join(",")+"|"+o.names().join(",");let V,M;if(null==a[k]){const e=d(p,o);V=e.sorted,M=e.recipientCounts,a[k]=V,u[k]=M}V=a[k],M={},c||Object.assign(M,u[k]);const w=new r(o);for(let r=0;r<V.length;++r){if(null!=l){const n=(0,e.memory)().numTensors;n>l.maxNumTensors&&(l.maxNumTensors=n),n<l.minNumTensors&&(l.minNumTensors=n)}const n=V[r],a=n.sourceLayer;if(a instanceof s.InputLayer)continue;const u=[],d=[],h=[];let p=!1;for(const e of n.inputs){const n=w.getValue(e),t=w.getMask(e);u.push(n),d.push(t),null!=t&&(p=!0),c||(M[e.name]--,0!==M[e.name]||o.hasKey(e)||-1!==m.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||h.push(n))}p&&((i=i||{}).mask=d[0]);const g=(0,t.toList)(a.apply(u,i));let k=null;a.supportsMasking&&(k=a.computeMask(u,d));const x=f(n),T=Array.isArray(x)?x:[x];for(let e=0;e<T.length;++e){w.hasKey(T[e])||w.add(T[e],g[e],Array.isArray(k)?k[0]:k);const n=m.indexOf(T[e].name);-1!==n&&(y[n]=g[e])}c||(0,e.dispose)(h)}return w.disposeMasks(),h?y:y[0]}function d(n,t){e.util.assert(null!=n&&n.length>0,()=>"Expected at least one fetch, got none");let s=[],o={};if(1===n.length){const e=h(n[0],t);s=e.sorted,o=e.recipientMap}else{const e=new Set;for(const i of n){const{sorted:n,recipientMap:r}=h(i,t);for(const t of n)e.has(t.name)||(s.push(t),e.add(t.name));for(const e in r)null==o[e]&&(o[e]=new Set),r[e].forEach(n=>o[e].add(n))}}return{sorted:s,recipientCounts:c(o)}}function c(e){const n={};for(const t in e)n[t]=e[t].size;return n}function h(e,n){const t=new Set,s=[],o={};for(const a of n.names())t.add(a);const i=[],r=[];for(i.push(e);i.length>0;){const e=i[i.length-1];if(t.has(e.name)){i.pop();continue}const n=r[r.length-1]===i.length-1;if(0===e.inputs.length||n)i.pop(),s.push(e),t.add(e.name),n&&r.pop();else{r.push(i.length-1);for(const n of e.inputs)null==o[n.name]&&(o[n.name]=new Set),o[n.name].add(e.name),t.has(n.name)||i.push(n)}}return{sorted:s,recipientMap:o}}function f(e){let n;if(1===e.sourceLayer.inboundNodes.length)n=e.sourceLayer.output;else{let t=null;for(let n=0;n<e.sourceLayer.inboundNodes.length;++n)for(const s of e.sourceLayer.inboundNodes[n].outputTensors)if(s.id===e.id){t=n;break}n=e.sourceLayer.getOutputAt(t)}return n}
},{"@tensorflow/tfjs-core":"tc6m","../errors":"xUGZ","../utils/generic_utils":"q8Pr","./input_layer":"jFdK","./topology":"aftd"}],"t5Lt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),s=require("../errors"),n=require("../layers/serialization"),o=d(require("../utils/generic_utils")),i=require("../utils/serialization_utils"),r=d(require("../utils/types_utils")),a=require("../variables"),u=require("../version"),l=require("./executor"),h=require("./input_layer"),p=require("./topology");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(c=function(t){return t?s:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=c(e);if(s&&s.has(t))return s.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var r=o?Object.getOwnPropertyDescriptor(t,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=t[i]}return n.default=t,s&&s.set(t,n),n}class f extends p.Layer{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=(0,e.getUid)(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],o.unique(this.inputs).length!==this.inputs.length)throw new s.ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+`${this.inputs.map(t=>t.name)}`);o.unique(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+`${this.outputs.map(t=>t.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(s),this.outputLayersTensorIndices.push(n)}for(const e of this.inputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;o.assert(0===s,"input layer has >1 nodes"),o.assert(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(s),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let e=0;e<this.inputLayers.length;e++){const s=this.inputLayers[e];if(!(s instanceof h.InputLayer))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+`Received inputs: ${t.inputs}. `+`Input ${e} (0-based) originates `+`from layer type ${s.getClassName()}.`);this.inputNames.push(s.name),this.feedInputShapes.push(s.batchInputShape),this.feedInputNames.push(s.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const n={},i={},r={},a={},u={},l=[],c=(t,e,n,o,i,r)=>{null!=o&&null!=i&&null!=r||(o=t.sourceLayer,i=t.nodeIndex,r=t.tensorIndex);const a=o.inboundNodes[i];if(-1!==n.indexOf(a))throw new s.RuntimeError(`The tensor ${t.name} at layer "${o.name}" `+"is part of a cycle.");if(-1!==e.indexOf(a))return;this.containerNodes.add(f.nodeKey(o,i)),o.id in u||(u[o.id]=Object.keys(u).length),-1===n.indexOf(a)&&n.push(a);const h=a.inboundLayers.length;for(let s=0;s<h;s++){const t=a.inputTensors[s],o=a.inboundLayers[s],i=a.nodeIndices[s],r=a.tensorIndices[s];c(t,e,n,o,i,r)}for(e.push(a);n.indexOf(a)>=0;)n.splice(n.indexOf(a),1);l.push(a)},d=[],y=[];for(const e of this.outputs)c(e,d,y);const m=l.slice().reverse();for(const e of m){i[e.id]=e,e.id in n||(n[e.id]=0);let t=n[e.id];const s=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];t=Math.max(t,s),r[e.outboundLayer.id]=t,a[e.outboundLayer.id]=e.outboundLayer,n[e.id]=t;for(let o=0;o<e.inboundLayers.length;o++){const s=e.inboundLayers[o],r=e.nodeIndices[o],a=s.inboundNodes[r],u=null==n[a.id]?0:n[a.id];n[a.id]=Math.max(t+1,u),i[a.id]=a}}const g={};for(const e in n){const t=n[e];t in g||(g[t]=[]),g[t].push(i[e])}const b={};for(const e in r){const t=r[e];t in b||(b[t]=[]),b[t].push(a[e])}let L=Object.keys(b).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);this.layers=[];for(const e of L){const t=b[e];t.sort((t,e)=>{const s=u[t.id],n=u[e.id];return s<n?-1:s>n?1:0});for(const e of t)e instanceof f&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=b,L=Object.keys(g).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);const w=this.inputs.slice(),N=[];for(const e of L)for(const t of g[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===w.indexOf(n))throw new s.RuntimeError(`Graph disconnected: cannot obtain value for tensor ${n}`+` at layer "${e.name}". `+"The following previous layers were accessed without "+`issue: ${N}`);for(const e of t.outputTensors)w.push(e);N.push(e.name)}}this.nodesByDepth=g;const I=this.layers.map(t=>t.name);for(const e of I){const t=I.filter(t=>t===e).length;if(1!==t)throw new s.RuntimeError(`The name "${e}" is used ${t} times `+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(I))}this.outboundNodes=[],this.inboundNodes=[],new p.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new s.ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let o=0;for(const r of this.layers)for(const t of r.weights){if(null!=n[t.originalName])throw new s.ValueError(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,o++}const i=[];for(const r in t){let o=r;if(null==n[r]){const t=r.split("/");o=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[o])i.push([n[o],t[r]]);else if(e)throw new s.ValueError(`Provided weight data has no target variable: ${r}`);delete n[o]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new s.ValueError(`${t.length} of ${o} weights are not set: `+`${t}`)}(0,a.batchSetValue)(i)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${u.version}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const s=(0,i.convertTsToPythonic)(this.updatedConfig());return e?JSON.stringify(s):s}call(e,s){return(0,t.tidy)(()=>{e=o.toList(e);const t=new l.FeedDict;for(let s=0;s<this.inputs.length;++s)t.add(this.inputs[s],e[s]);return(0,l.execute)(this.outputs,t,s)})}computeMask(e,s){return(0,t.tidy)(()=>{let t;return e=o.toList(e),t=null==s?o.pyListRepeat(null,e.length):o.toList(s),this.runInternalGraph(e,t)[1]})}computeOutputShape(t){const e=r.normalizeShapeList(t);if(e.length!==this.inputLayers.length)throw new s.ValueError(`Invalid inputShape argument ${t}: `+`model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let s=0;s<e.length;s++){const t=this.inputLayers[s],o=e[s];n[t.name+"_0_0"]=o}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);if(i.length>1)for(const s of i){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const s=[];for(let o=0;o<e.inboundLayers.length;o++){const t=e.inboundLayers[o],i=e.nodeIndices[o],r=e.tensorIndices[o],a=n[`${t.name}_${i}_${r}`];s.push(a)}const i=t.computeOutputShape(o.singletonOrArray(s)),a=r.normalizeShapeList(i),u=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){n[`${t.name}_${u}_${e}`]=a[e]}}}const a=[],u=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],e=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],o=`${t.name}_${e}_${n}`;u.push(o)}for(let s=0;s<u.length;s++){const t=u[s];o.assert(t in n),a.push(n[t])}return o.singletonOrArray(a)}runInternalGraph(t,e){null==e&&(e=o.pyListRepeat(null,t.length));const n={};for(let s=0;s<this.inputs.length;++s){const o=this.inputs[s],i=t[s],r=e[s];n[o.id]=[i,r]}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);for(const l of i){const t=this.nodesByDepth[l];for(const e of t){const t=e.outboundLayer,i=e.inputTensors,r=e.outputTensors,a=new Array;for(const e of i)e.id in n&&a.push(n[e.id]);if(a.length===i.length){let i,u,l,h,p={};if(null!=e.callArgs&&(p=e.callArgs),1===a.length){const[e,s]=a[0];null==p.mask&&(p.mask=s),l=o.toList(t.call(e,p)),h=o.toList(t.computeMask(e,s)),i=[e],u=[s]}else i=a.map(t=>t[0]),u=a.map(t=>t[1]),null==p.mask&&(p.mask=u),l=o.toList(t.call(i,p)),h=o.toList(t.computeMask(i,u));if(t.activityRegularizer)throw new s.NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<r.length;++t){const e=r[t],s=l[t],o=h[t];n[e.id]=[s,o]}}}}const r=[],a=[],u=[];for(const s of this.outputs){o.assert(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[t,e]=n[s.id];u.push(t.shape),r.push(t),a.push(e)}return[r,a,u]}buildNodeConversionMap(t){const e={};let s;for(const n of this.layers){s=n instanceof f?1:0;for(let t=0;t<n.inboundNodes.length;t++){const o=f.nodeKey(n,t);this.containerNodes.has(o)&&(e[o]=s,s+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new s.ValueError(`Was asked to retrieve layer at index ${e}, but model only `+`has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new s.ValueError("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new s.ValueError(`No such layer: ${t}`)}calculateLosses(){return(0,t.tidy)(()=>{const t=[];for(const e of this.layers)for(let s=0;s<e.inboundNodes.length;++s){const n=f.nodeKey(e,s);this.containerNodes.has(n)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),s=[];for(const r of this.layers){const t=r.getClassName(),n=r.getConfig(),o=[];for(let s=0;s<r.inboundNodes.length;s++){const t=r.inboundNodes[s],n=f.nodeKey(r,s);let a={};if(this.containerNodes.has(n)){if(t.callArgs)try{JSON.stringify(t.callArgs),a=t.callArgs}catch(i){console.warn(`Layer ${r.name} was passed `+"non-serializable keyword arguments: "+`${t.callArgs}. They will not be included `+"in the serialized model (and thus will be missing at deserialization time)."),a={}}if(t.inboundLayers.length>0){const s=[];for(let n=0;n<t.inboundLayers.length;n++){const o=t.inboundLayers[n],i=t.nodeIndices[n],r=t.tensorIndices[n];let u=e[f.nodeKey(o,i)];null==u&&(u=0),s.push([o.name,u,r,a])}o.push(s)}}}const a={};a.name=r.name,a.className=t,a.config=n,a.inboundNodes=o,s.push(a)}t.layers=s;const n=[];for(let r=0;r<this.inputLayers.length;r++){const t=this.inputLayers[r],s=this.inputLayersNodeIndices[r],o=f.nodeKey(t,s);if(!this.containerNodes.has(o))continue;let i=e[o];null==i&&(i=0);const a=this.inputLayersTensorIndices[r];n.push([t.name,i,a])}t.inputLayers=n;const o=[];for(let r=0;r<this.outputLayers.length;r++){const t=this.outputLayers[r],s=this.outputLayersNodeIndices[r],n=f.nodeKey(t,s);if(!this.containerNodes.has(n))continue;let i=e[n];null==i&&(i=0);const a=this.outputLayersTensorIndices[r];o.push([t.name,i,a])}return t.outputLayers=o,t}static fromConfig(t,e,i={},r=!1){const a={},u={};function l(t,e){t.name in u?u[t.name].push(e):u[t.name]=[e]}function h(t,e){const s=[];let n;for(const o of e){const i=o[0],r=o[1],u=o[2];if(n=null==o[3]?{}:o[3],!(i in a))return void l(t,e);const h=a[i];if(h.inboundNodes.length<=r)return void l(t,e);const p=h.inboundNodes[r];s.push(p.outputTensors[u])}s.length>0&&t.apply(o.singletonOrArray(s),n)}function p(t){const o=t.name,i=(0,n.deserialize)(t,null!=e.customObjects?e.customObjects:{});i.setFastWeightInitDuringBuild(r),a[o]=i,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new s.ValueError(`Corrupted configuration, expected array for nodeData: ${t}`);l(i,t)})}const c=e.name,d=e.layers;for(const s of d)p(s);for(;!o.isObjectEmpty(u);)for(const t of d){const e=a[t.name];if(e.name in u){const t=u[e.name];delete u[e.name];for(const s of t)h(e,s)}}const f=[],y=[],m=e.inputLayers;for(const s of m){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;f.push(i[n])}const g=e.outputLayers;for(const s of g){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;y.push(i[n])}return new t({inputs:f,outputs:y,name:c})}get stateful(){if(this._stateful)throw new s.ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){(0,t.tidy)(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}exports.Container=f;
},{"@tensorflow/tfjs-core":"tc6m","../backend/state":"OJz3","../errors":"xUGZ","../layers/serialization":"kM5O","../utils/generic_utils":"q8Pr","../utils/serialization_utils":"nEpG","../utils/types_utils":"KfRc","../variables":"jNTt","../version":"SdA6","./executor":"Bz6f","./input_layer":"jFdK","./topology":"aftd"}],"KQ4e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeClassWeights=r,exports.standardizeSampleWeights=n,exports.standardizeWeights=s,exports.computeWeightedLoss=o;var e=require("@tensorflow/tfjs-core");function t(e,t,r){const n=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===n)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==n)throw new Error(`Provided ${r} is an array of ${e.length} `+`element(s), but the model has ${n} outputs. `+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const r=[];return t.forEach(t=>{t in e?r.push(e[t]):r.push(null)}),r}throw new Error(`The model has multiple (${n}) outputs, `+`so ${r} must be either an array with `+`${n} elements or an object with ${t} keys. `+`Provided ${r} not understood: ${JSON.stringify(e)}`)}function r(e,r){return t(e,r,"classWeight")}function n(e,r){return t(e,r,"sampleWeight")}async function s(t,r,n,s){if(null!=r||null!=s)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const r=(0,e.tidy)(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){const e=1;return t.argMax(e)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) `+"during handling of class weights. The size is expected to be >= 1.")}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during `+"handling of class weights. The rank is expected to be 1 or 2.")}),s=Array.from(await r.data());(0,e.dispose)(r);const o=[];return s.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+`The class ${e} exists in the data but not in `+"classWeight");o.push(n[e])}),(0,e.tensor1d)(o,"float32")}return null}function o(t,r){return(0,e.mul)(t,r)}
},{"@tensorflow/tfjs-core":"tc6m"}],"TYPf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitDataset=p,exports.evaluateDataset=b;var t=r(require("@tensorflow/tfjs-core")),e=require("../base_callbacks"),a=require("../errors"),s=require("../logs"),i=require("../utils/generic_utils"),n=require("./training_utils");function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,a=new WeakMap;return(o=function(t){return t?a:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var a=o(e);if(a&&a.has(t))return a.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var r=i?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]}return s.default=t,a&&a.set(t,s),s}const l=32;function u(e,a){let s,i;const n=a;s=n.xs,i=n.ys,t.util.assert(null!=s&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+`${a}`);const o=c("input",e.inputNames,s),r=c("output",e.outputNames,i),l=o[0].shape[0];t.util.assert(o.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset `+`provides ${o.length} inputs.  (Expected input keys: `+`${JSON.stringify(e.inputNames)})`),t.util.assert(r.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset `+`provides ${r.length} outputs.  (Expected output keys: `+`${JSON.stringify(e.outputNames)})`);for(let u=0;u<o.length;u++)t.util.assert(o[u].shape[0]===l,()=>"Batch size mismatch: input "+`${e.inputNames[u]} has ${o[u].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);for(let u=0;u<r.length;u++)t.util.assert(r[u].shape[0]===l,()=>"Batch size mismatch: output "+`${e.outputNames[u]} has ${r[u].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);return{xs:o,ys:r}}function c(e,s,i){if(i instanceof t.Tensor)return[i];if(Array.isArray(i))return t.util.assert(i.length===s.length,()=>`Received an array of ${i.length} Tensors, but expected ${s.length} to match the ${e} keys ${s}.`),i;{const t=[];for(const n of s){if(null==i[n])throw new a.ValueError("The feature data generated by the dataset lacks the required "+`${e} key '${n}'.`);t.push(i[n])}return t}}function h(t){if(3===t.length)throw new a.NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function p(a,o,r){const c=null!=r.batchesPerEpoch;if(t.util.assert(null!=a.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),t.util.assert(null!=r,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),t.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+`integer, but got ${r.epochs}`),t.util.assert(!c||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+`positive integer if specified, but got ${r.batchesPerEpoch}`),t.util.assert(null==r.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),a.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");a.isTraining=!0;try{const p=null!=r.validationData;let g,b;if(p)if(f(r.validationData))t.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+`but got ${r.validationBatches}`);else{const t=h(r.validationData);g=t.xs,b=t.ys}const y=a.makeTrainFunction(),v=a.getDedupedMetricsNames();let m;m=p?v.slice().concat(v.map(t=>"val_"+t)):v.slice();const w=(0,e.standardizeCallbacks)(r.callbacks,r.yieldEvery),$=null==r.verbose?1:r.verbose,{callbackList:E,history:x}=(0,e.configureCallbacks)(w,$,r.epochs,null,null,d(o,r),null,p,m);E.setModel(a),a.history=x,await E.onTrainBegin(),a.stopTraining_=!1;let k=null==r.initialEpoch?0:r.initialEpoch,D=await o.iterator();for(;k<r.epochs;){const e={};await E.onEpochBegin(k);let h=0,d=0;for(c||(D=await o.iterator());!c||h<r.batchesPerEpoch;){const o=await D.next();if(c&&o.done){console.warn("You provided `batchesPerEpoch` as "+`${r.batchesPerEpoch}, `+"but your dataset iterator ran out of data after "+`${h} batches; `+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+`${r.batchesPerEpoch*r.epochs} batches). `+"You may need to use the repeat() function when building your dataset.");break}if(null!=o.value){const{xs:e,ys:i}=u(a,o.value),l={};l.batch=d,l.size=e[0].shape[0],await E.onBatchBegin(d,l);const c=[];if(null!=r.classWeight){const t=(0,n.standardizeClassWeights)(r.classWeight,a.outputNames);for(let e=0;e<t.length;++e)c.push(await(0,n.standardizeWeights)(i[e],null,t[e]))}const p=e.concat(i).concat(c),f=y(p);t.dispose(p);for(let a=0;a<v.length;++a){const e=v[a],s=f[a];l[e]=s,t.keep(s)}await E.onBatchEnd(d,l),(0,s.disposeTensorsInLogs)(l),d++,h++}if(c?h>=r.batchesPerEpoch:o.done){if(p){let t;t=f(r.validationData)?(0,i.toList)(await a.evaluateDataset(r.validationData,{batches:r.validationBatches})):(0,i.toList)(a.evaluate(g,b,{batchSize:null==r.validationBatchSize?l:r.validationBatchSize,verbose:0}));for(let s=0;s<a.metricsNames.length;++s)e[`val_${a.metricsNames[s]}`]=t[s]}break}if(a.stopTraining_)break}if(await E.onEpochEnd(k,e),k++,a.stopTraining_)break}return await E.onTrainEnd(),await a.history.syncData(),a.history}finally{a.isTraining=!1}}function d(t,e){let a=null;return null!=e.batchesPerEpoch?a=e.batchesPerEpoch:Number.isFinite(t.size)&&(a=t.size),a}function f(t){return"function"==typeof t.iterator}function g(t){return"function"==typeof t.next}async function b(e,s,n){const o=null!=(n=n||{}).batches,r=e.testFunction;let l=[];if(n.verbose>0)throw new a.NotImplementedError("Verbose mode is not implemented yet.");t.util.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+`received ${JSON.stringify(n.batches)}`);const c=g(s)?s:await s.iterator();let h=0,p=0;for(;!o||p<n.batches;){const a=await c.next();if(l=t.tidy(()=>{if(a.value){const{xs:s,ys:i}=u(e,a.value),n=s.concat(i),o=t.tidy(()=>r(n));if(t.dispose(n),0===p)for(let e=0;e<o.length;++e)l.push((0,t.scalar)(0));const c=n[0].shape[0];for(let e=0;e<o.length;++e){const a=o[e],s=l[e];l[e]=t.tidy(()=>t.add(l[e],t.mul(c,a))),p>0&&t.dispose(s)}t.dispose(o),h+=c,++p}return l}),a.done){o&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+`batches (in this case, ${n.batches} batches). `+"You may need to use the repeat() function when building your dataset.");break}}for(let a=0;a<l.length;++a){const e=l[a];l[a]=t.div(l[a],h),t.dispose(e)}return(0,i.singletonOrArray)(l)}
},{"@tensorflow/tfjs-core":"tc6m","../base_callbacks":"g9nK","../errors":"xUGZ","../logs":"STYk","../utils/generic_utils":"q8Pr","./training_utils":"KQ4e"}],"gdrk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkBatchSize=l,exports.sliceArrays=c,exports.sliceArraysByIndices=u,exports.makeBatches=p,exports.fitTensors=d,exports.ensureTensorsRank2OrHigher=h,exports.disposeNewTensors=g;var e=o(require("@tensorflow/tfjs-core")),t=require("../backend/tfjs_backend"),n=require("../base_callbacks"),i=require("../errors"),a=require("../logs"),r=require("../utils/math_utils");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function l(t){e.util.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function c(e,n,i){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,t.sliceAlongFirstAxis)(e,n,i-n)):(0,t.sliceAlongFirstAxis)(e,n,i-n)}function u(n,i){return e.tidy(()=>null==n?null:Array.isArray(n)?n.map(e=>u(e,i)):(0,t.gather)(n,"int32"===i.dtype?i:i.toInt()))}function p(e,t){const n=[];let i=0,a=null;for(;i<e;)(a=i+t)>=e&&(a=e),n.push([i,a]),i=a;return n}async function f(s,o,l,c,f,d,h,g,y,v,w,b,m,k,E){null==f&&(f=32),null==d&&(d=1),null==w&&(w=!0),null==m&&(m=0);let D=!1;if(null!=y&&null!=v&&(D=!0),null!=E&&(D=!0,null==k))throw new i.ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const T=s.checkNumSamples(l,f,k,"steps_per_epoch");let x;null!=T&&(x=(0,r.range)(0,T)),null==h&&(h=1);const{callbackList:A,history:_}=(0,n.configureCallbacks)(g,h,d,m,T,k,f,D,b);A.setModel(s),s.history=_,await A.onTrainBegin(),s.stopTraining_=!1;for(let n=m;n<d;++n){await A.onEpochBegin(n);const r={};if(null!=k)throw new i.NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if("batch"===w)throw new i.NotImplementedError("batch shuffling is not implemneted yet");w&&e.util.shuffle(x);const n=(0,e.tensor1d)(x),d=p(T,f);for(let i=0;i<d.length;++i){const p={};if(await A.onBatchBegin(i,p),e.tidy(()=>{const a=d[i][0],h=d[i][1],g=(0,t.sliceAlongFirstAxis)(n,a,h-a);p.batch=i,p.size=h-a;const w=u(l,g),b=o(w);for(let t=0;t<c.length;++t){const n=c[t],i=b[t];p[n]=i,e.keep(i)}if(i===d.length-1&&D){const t=s.testLoop(y,v,f);for(let n=0;n<c.length;++n){const i=c[n],a=t[n];e.keep(a),r["val_"+i]=a}}}),await A.onBatchEnd(i,p),(0,a.disposeTensorsInLogs)(p),s.stopTraining_)break}n.dispose()}if(await A.onEpochEnd(n,r),s.stopTraining_)break}return await A.onTrainEnd(),await s.history.syncData(),s.history}async function d(t,a,r,s={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let o,u,p,d,h,y,v;t.isTraining=!0;try{const w=null==s.batchSize?32:s.batchSize;l(w);const b=!1,m=await t.standardizeUserData(a,r,s.sampleWeight,s.classWeight,b,w);o=m[0],u=m[1],v=m[2];let k,E=!1;if(null!=s.validationData&&s.validationData.length>0){if(E=!0,2!==s.validationData.length)throw 3===s.validationData.length?new i.NotImplementedError("validationData including sample weights is not supported yet."):new i.ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+`${s.validationData} is invalid.`);p=s.validationData[0],d=s.validationData[1];const e=!0,n=await t.standardizeUserData(p,d,null,null,e,w);h=n[0],y=n[1],k=h.concat(y)}else if(null!=s.validationSplit&&s.validationSplit>0&&s.validationSplit<1){E=!0;const e=Math.floor(o[0].shape[0]*(1-s.validationSplit)),t=o[0].shape[0];h=c(o,e,t),o=c(o,0,e),y=c(u,e,t),u=c(u,0,e),k=h.concat(y)}else null!=s.validationSteps&&(E=!0);const D=o.concat(u).concat(v);t.checkTrainableWeightsConsistency();const T=t.makeTrainFunction(),x=t.getDedupedMetricsNames();let A,_;E?(t.makeTestFunction(),A=t.testFunction,_=x.slice().concat(x.map(e=>"val_"+e))):(A=null,k=[],_=x.slice());const O=(0,n.standardizeCallbacks)(s.callbacks,s.yieldEvery);return await f(t,T,D,x,w,s.epochs,s.verbose,O,A,k,s.shuffle,_,s.initialEpoch,null,null)}finally{t.isTraining=!1,g(o,a),g(u,r),g(h,p),g(y,d),null!=v&&e.dispose(v)}}function h(n){const i=[];n instanceof e.Tensor&&(n=[n]);for(let e=0;e<n.length;++e){const a=n[e];if(1===a.rank)i.push((0,t.expandDims)(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");i.push(a)}}return i}function g(t,n){if(null==t)return;const i=[];if(n instanceof e.Tensor)i.push(n.id);else if(Array.isArray(n))n.forEach(e=>i.push(e.id));else if(null!=n)for(const e in n){const t=n[e];i.push(t.id)}const a=[];if(t instanceof e.Tensor)-1===i.indexOf(t.id)&&a.push(t);else if(Array.isArray(t))t.forEach(e=>{-1===i.indexOf(e.id)&&a.push(e)});else if(null!=t)for(const e in t){const n=t[e];-1===i.indexOf(n.id)&&a.push(n)}a.forEach(e=>{e.isDisposed||e.dispose()})}
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../base_callbacks":"g9nK","../errors":"xUGZ","../logs":"STYk","../utils/math_utils":"Rdwq"}],"buug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDataTensor=T,exports.isDataArray=A,exports.isDataDict=z,exports.standardizeInputData=$,exports.checkArrayLengths=E,exports.collectMetrics=N,exports.Functional=exports.LayersModel=void 0;var e=O(require("@tensorflow/tfjs-core")),t=O(require("../backend/tfjs_backend")),s=require("../common"),r=require("../errors"),i=require("../layers/serialization"),n=O(require("../losses")),o=O(require("../metrics")),a=O(require("../optimizers")),l=require("../user_defined_metadata"),h=require("../utils/generic_utils"),u=require("../utils/layer_utils"),c=require("../utils/math_utils"),p=require("../utils/serialization_utils"),f=require("../version"),d=require("./container"),g=require("./executor"),m=require("./training_dataset"),y=require("./training_tensors"),w=require("./training_utils");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(b=function(e){return e?s:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=b(t);if(s&&s.has(e))return s.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,s&&s.set(e,r),r}function T(t){return t instanceof e.Tensor}function A(e){return Array.isArray(e)}function z(e){return!T(e)&&!A(e)}function $(e,t,s,i=!0,n=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(A(e)&&e.length>0)t=!0;else if(z(e)){for(const s in e)if(e.hasOwnProperty(s)){t=!0;break}}else t=!0;if(t)throw new r.ValueError(`Error when checking model ${n} expected no data, `+`but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let o;if(z(e)){e=e,o=[];for(const s of t){if(null==e[s])throw new r.ValueError(`No data provided for "${s}". Need data for each key in: `+`${t}`);o.push(e[s])}}else if(A(e)){if((e=e).length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`model expected. Expected to see ${t.length} Tensor(s), but `+`instead got the following list of Tensor(s): ${e}`);o=e}else{if(e=e,t.length>1)throw new r.ValueError(`The model ${n} expects ${t.length} Tensor(s), `+`but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=(0,y.ensureTensorsRank2OrHigher)(o),null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s). but got array with `+`shape ${e.shape}`);for(let o=0;o<s[a].length;++o){if(0===o&&!i)continue;const l=e.shape[o],h=s[a][o];if(null!=h&&h>=0&&l!==h)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have shape [${s[a]}], but got array with shape `+`[${e.shape}].`)}}return o}function E(t,s,i){const n=(0,h.unique)(t.map(e=>e.shape[0]));n.sort();const o=(0,h.unique)(s.map(e=>e.shape[0]));if(o.sort(),n.length>1)throw new r.ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+`${JSON.stringify(t.map(e=>e.shape))}`);if(o.length>1)throw new r.ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+`${JSON.stringify(s.map(e=>e.shape))}`);if(n.length>0&&o.length>0&&!e.util.arraysEqual(n,o))throw new r.ValueError("Input Tensors should have the same number of samples as target "+`Tensors. Found ${n[0]} input sample(s) and ${o[0]} target `+"sample(s).")}function v(e,t,s){const i=[n.meanSquaredError,n.binaryCrossentropy,n.categoricalCrossentropy];for(let o=0;o<e.length;++o){const a=e[o],l=t[o],h=s[o];if(null!=l){if(l===n.categoricalCrossentropy&&1===a.shape[a.shape.length-1])throw new r.ValueError(`You are passing a target array of shape ${a.shape} while using `+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==i.indexOf(l)){const e=a.shape.slice(1),t=h.slice(1);for(let s=0;s<e.length;++s){const i=e[s],n=t[s];if(null!=n&&i!==n)throw new r.ValueError(`A target Tensor with shape ${a.shape} was passed for an `+`output of shape ${h}, while using a loss function that `+"expects targets to have the same shape as the output.")}}}}}function x(e,t,s,i=!0,n=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`the model expected. Expected to see ${t.length} Tensor(s),`+` but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new r.ValueError(`The model expects ${t.length} ${n} Tensors, `+"but only received one Tensor. Found: array with shape "+`${JSON.stringify(e.shape)}.`);o=[e]}if(null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s), but got array with `+`shape ${JSON.stringify(e.shape)}`);for(let o=0;o<s[a].length;++o){if(0===o&&!i)continue;const l=e.shape[o],h=s[a][o];if(null!=h&&h!==l)throw new r.ValueError(`Error when checking ${n}: expected `+`${t[a]} to have shape ${JSON.stringify(s[a])} but `+`got array with shape ${JSON.stringify(e.shape)}.`)}}}function N(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let s;if("string"==typeof e||"function"==typeof e)s=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+`function, Array, or Object, found: ${e}`);s=e}if(Array.isArray(s))return t.map(e=>s);{const e=[];for(const r of t){let t=s.hasOwnProperty(r)?s[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}const k="layers-model";class S extends d.Container{constructor(e){super(e),this.isTraining=!1}summary(e,t,s=console.log){if(!this.built)throw new r.ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");(0,u.printSummary)(this,e,t,s)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=a.getOptimizer(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof e.Optimizer))throw new r.ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let i=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new r.ValueError("When passing an Array as loss, it should have one entry per "+`model output. The model has ${this.outputs.length} output(s), `+`but you passed loss=${t.loss}.`);const e=t.loss;i=e.map(e=>n.get(e))}else{const e=n.get(t.loss);this.outputs.forEach(t=>{i.push(e)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new r.ValueError(`Unknown entry in loss dictionary: "${e}". `+`Only expected the following keys: ${this.outputNames}`);for(const e of this.outputNames)null==t.loss[e]&&console.warn(`Output "${e}" is missing from loss dictionary. We assume `+"this was done on purpose, and we will not be expecting data "+`to be passed to ${e} during training`),i.push(n.get(t.loss[e]))}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],s=this.outputNames[e];this.feedOutputNames.push(s),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const l=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],(0,s.nameScope)("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const h=N(t.metrics,this.outputNames),u=(e,t,s)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([s,e])};(0,s.nameScope)("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;(t=>{let r,i,a;for(const l of t){if("string"==typeof l&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(l)){const t=this.internalOutputShapes[e];let s;1===t[t.length-1]||this.lossFunctions[e]===n.binaryCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.binaryAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.binaryCrossentropy):this.lossFunctions[e]===n.sparseCategoricalCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.sparseCategoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.sparseCategoricalCrossentropy):-1!==["accuracy","acc"].indexOf(l)?i=o.categoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.categoricalCrossentropy),-1!==["accuracy","acc"].indexOf(l)?s="acc":-1!==["crossentropy","ce"].indexOf(l)&&(s="ce"),a=i,r=""+s}else{const e=o.get(l);a=e,r=""+o.getLossOrMetricName(l)}let t;(0,s.nameScope)(r,()=>{t=a}),u(e,r,t)}})(h[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,s={}){const r=null==s.batchSize?32:s.batchSize;(0,y.checkBatchSize)(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const n=i[0].concat(i[1]);this.makeTestFunction();const o=this.testFunction,a=this.testLoop(o,n,r,s.verbose,s.steps);return(0,h.singletonOrArray)(a)}finally{(0,y.disposeNewTensors)(i[0],e),(0,y.disposeNewTensors)(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),(0,m.evaluateDataset)(this,e,t)}checkNumSamples(e,t,s,i="steps"){let n;if(null!=s){if(n=null,null!=t)throw new r.ValueError(`If ${i} is set, batchSize must be null or undefined.`+`Got batchSize = ${t}`)}else{if(null==e)throw new r.ValueError("Either the input data should have a defined shape, or "+`${i} shoud be specified.`);n=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return n}execute(t,s){if(Array.isArray(s)&&0===s.length)throw new r.ValueError("`outputs` is an empty Array, which is not allowed.");const i=Array.isArray(s),n=i?s:[s],o=this.retrieveSymbolicTensors(n),a=new g.FeedDict;if(t instanceof e.Tensor&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new r.ValueError(`The number of inputs provided (${t.length}) `+"does not match the number of inputs of this model "+`(${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)a.add(this.inputs[e],t[e])}else for(const e of this.inputs){const s=t[e.name];if(null==s)throw new r.ValueError(`No value is provided for the model's input ${e.name}`);a.add(e,s)}const l=(0,g.execute)(o,a);return i?l:l[0]}retrieveSymbolicTensors(e){const t=(0,h.pyListRepeat)(null,e.length);let s=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],n=i.map(e=>e.name);for(let r=0;r<e.length;++r){const o=n.indexOf(e[r]);if(-1!==o&&(t[r]=i[o],s--),0===s)break}if(0===s)break}if(s>0){const s=[];throw t.forEach((t,r)=>{null==t&&s.push(e[r])}),new r.ValueError("Cannot find SymbolicTensors for output name(s): "+`${JSON.stringify(s)}`)}return t}predictLoop(t,s=32,i=!1){return e.tidy(()=>{const n=this.checkNumSamples(t);if(i)throw new r.NotImplementedError("Verbose predictLoop() is not implemented yet.");const o=(0,y.makeBatches)(n,s),a=this.outputs.map(e=>[]);for(let s=0;s<o.length;++s){e.tidy(()=>{const e=o[s][0],r=o[s][1],i=(0,y.sliceArrays)(t,e,r),n=[];if(Array.isArray(i))for(let t=0;t<i.length;++t)n.push({key:this.inputs[t],value:i[t]});else n.push({key:this.inputs[0],value:i});const a=new g.FeedDict(n);return(0,g.execute)(this.outputs,a)}).forEach((e,t)=>a[t].push(e))}return(0,h.singletonOrArray)(a.map(t=>e.concat(t,0)))})}predict(e,t={}){const s=(0,y.ensureTensorsRank2OrHigher)(e);x(s,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return(0,y.checkBatchSize)(r),this.predictLoop(s,r)}finally{(0,y.disposeNewTensors)(s,e)}}predictOnBatch(e){x(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,s=!0,i){if(null==this.optimizer_)throw new r.RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];this.feedLossFns[r]===n.sparseCategoricalCrossentropy?o.push(e.slice(0,e.length-1).concat([1])):o.push(e)}if(E(e=$(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$(t,this.feedOutputNames,o,!1,"target"),null),v(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&e[0].shape[0]%i!=0)throw new r.ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+`${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,s,r,i=!0,n){const[o,a]=this.standardizeUserDataXY(e,t,i,n);if(null!=s)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=(0,w.standardizeClassWeights)(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await(0,w.standardizeWeights)(a[t],null,e[t]))}return[o,a,l]}testLoop(s,i,n,o=0,a){return e.tidy(()=>{const l=this.checkNumSamples(i,n,a,"steps"),h=[];if(o>0)throw new r.NotImplementedError("Verbose mode is not implemented yet.");if(null!=a)throw new r.NotImplementedError("steps mode in testLoop() is not implemented yet");{const r=(0,y.makeBatches)(l,n),o=(0,e.tensor1d)((0,c.range)(0,l));for(let n=0;n<r.length;++n){const a=r[n][0],l=r[n][1],u=t.sliceAlongFirstAxis(o,a,l-a),c=(0,y.sliceArraysByIndices)(i,u),p=s(c);if(0===n)for(let t=0;t<p.length;++t)h.push((0,e.scalar)(0));for(let t=0;t<p.length;++t){const s=p[t];h[t]=e.add(h[t],e.mul(l-a,s))}}for(let t=0;t<h.length;++t)h[t]=e.div(h[t],l)}return h})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let s=0;s<e.length;++s){const r=e[s];let i=r;if((0,h.count)(e,r)>1){i+=`_${(0,h.count)(e.slice(0,s),r)}`}t.push(i)}return t}makeTrainFunction(){return t=>{const s=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),n=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:r[e]});const a=new g.FeedDict(t),l=(0,g.execute)(this.outputs,a,{training:!0});let h;for(let r=0;r<this.lossFunctions.length;++r){let t=(0,this.lossFunctions[r])(i[r],l[r]);null!=n[r]&&(t=(0,w.computeWeightedLoss)(t,n[r]));const o=e.mean(t);s.push(o),h=0===r?t:e.add(h,t)}for(let r=0;r<this.metricsTensors.length;++r){let t;if(this.outputs.length>1&&r<this.outputs.length)t=s[r];else{const s=this.metricsTensors[r][0],n=this.metricsTensors[r][1];t=e.mean(s(i[n],l[n]))}e.keep(t),o.push(t)}return h=e.mean(h),this.calculateLosses().forEach(t=>{h=e.add(h,t)}),h},!0,a)].concat(o)}}makeTestFunction(){this.testFunction=(t=>e.tidy(()=>{const s=[];let r;const i=t.slice(0,this.inputs.length),n=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:i[e]});const a=new g.FeedDict(o),l=(0,g.execute)(this.outputs,a);for(let t=0;t<this.lossFunctions.length;++t){const i=this.lossFunctions[t],o=e.mean(i(n[t],l[t]));r=0===t?o:e.add(r,o),s.push(r)}for(let t=0;t<this.metricsTensors.length;++t){const r=this.metricsTensors[t][0],i=this.metricsTensors[t][1],o=e.mean(r(n[i],l[i]));s.push(o)}return s}))}async fit(e,t,s={}){return(0,y.fitTensors)(this,e,t,s)}async fitDataset(e,t){return(0,m.fitDataset)(this,e,t)}async trainOnBatch(t,s){const r=await this.standardizeUserData(t,s),i=r[0],n=r[1],o=this.makeTrainFunction()(i.concat(n)),a=[];for(const e of o){const t=await e.data();a.push(t[0])}return e.dispose(o),(0,h.singletonOrArray)(a)}getNamedWeights(e){const t=[],s=null!=e&&e.trainableOnly,r=s?this.trainableWeights:this.weights,i=this.getWeights(s);for(let n=0;n<r.length;++n)s&&!r[n].trainable||t.push({name:r[n].originalName,tensor:i[n]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const s=e.memory().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=s-e.memory().numTensors}return t}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=(0,h.toSnakeCase)(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>(0,h.toSnakeCase)(e))}else{const t=Object.keys(this.loss);e={};const s=this.loss;for(const r of t){if("string"!=typeof s[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=(0,h.toSnakeCase)(s[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>(0,h.toSnakeCase)(o.getLossOrMetricName(e)));{const e={};for(const t in this.metrics)e[t]=(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=(0,p.convertPythonicToTs)(e.optimizer_config),s=(0,i.deserialize)(t);let r,n;if("string"==typeof e.loss)r=(0,h.toCamelCase)(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(e=>(0,h.toCamelCase)(e));else if(null!=e.loss){r={};for(const t in e.loss)r[t]=(0,h.toCamelCase)(e.loss[t])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>(0,h.toCamelCase)(e));else if(null!=e.metrics){n={};for(const t in e.metrics)n[t]=(0,h.toCamelCase)(e.metrics[t])}this.compile({loss:r,metrics:n,optimizer:s})}async save(t,s){if("string"==typeof t){const s=e.io.getSaveHandlers(t);if(0===s.length)throw new r.ValueError(`Cannot find any save handlers for URL '${t}'`);if(s.length>1)throw new r.ValueError(`Found more than one (${s.length}) save handlers for `+`URL '${t}'`);t=s[0]}if(null==t.save)throw new r.ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const i=await e.io.encodeWeights(this.getNamedWeights(s)),n={modelTopology:this.toJSON(null,!1),format:k,generatedBy:`TensorFlow.js tfjs-layers v${f.version}`,convertedBy:null};if(null!=s&&s.includeOptimizer&&null!=this.optimizer){n.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:s,specs:r}=await e.io.encodeWeights(await this.optimizer.getWeights(),t);i.specs.push(...r),i.data=e.io.concatenateArrayBuffers([i.data,s])}if(null!=this.userDefinedMetadata){const e=!0;(0,l.checkUserDefinedMetadata)(this.userDefinedMetadata,this.name,e),n.userDefinedMetadata=this.userDefinedMetadata}return n.weightData=i.data,n.weightSpecs=i.specs,t.save(n)}setUserDefinedMetadata(e){(0,l.checkUserDefinedMetadata)(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}exports.LayersModel=S,S.className="Model",e.serialization.registerClass(S);class C extends S{}exports.Functional=C,C.className="Functional",e.serialization.registerClass(C);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../common":"DKuh","../errors":"xUGZ","../layers/serialization":"kM5O","../losses":"yMjd","../metrics":"G1Yf","../optimizers":"BzLN","../user_defined_metadata":"XYCV","../utils/generic_utils":"q8Pr","../utils/layer_utils":"hrLh","../utils/math_utils":"Rdwq","../utils/serialization_utils":"nEpG","../version":"SdA6","./container":"t5Lt","./executor":"Bz6f","./training_dataset":"TYPf","./training_tensors":"gdrk","./training_utils":"KQ4e"}],"MIL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modelFromJSON=p,exports.loadLayersModelInternal=m,exports.loadLayersModelFromIOHandler=c,exports.Sequential=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./backend/state"),i=require("./engine/input_layer"),s=require("./engine/topology"),o=require("./engine/training"),n=require("./errors"),r=require("./layers/serialization"),l=d(require("./utils/generic_utils")),a=require("./utils/serialization_utils"),u=require("./utils/types_utils");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(h=function(e){return e?i:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=h(t);if(i&&i.has(e))return i.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var r=o?Object.getOwnPropertyDescriptor(e,n):null;r&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=e[n]}return s.default=e,i&&i.set(e,s),s}async function p(t,i){"modelTopology"in t||(t={modelTopology:t});let s=(t=t).modelTopology;null!=s.model_config&&(s=s.model_config);const o=(0,a.convertPythonicToTs)(s),n=(0,r.deserialize)(o,i);if(null!=t.weightsManifest){const i=await e.io.loadWeights(t.weightsManifest,t.pathPrefix,n.weights.map(e=>e.originalName)),s={};for(const e of n.weights)s[e.originalName]=i[e.originalName];n.loadWeights(s),(0,e.dispose)(i)}return n}async function m(t,i){if(null==i&&(i={}),"string"==typeof t){const s=e.io.getLoadHandlers(t,i);if(0===s.length)s.push(e.io.browserHTTPRequest(t,i));else if(s.length>1)throw new n.ValueError(`Found more than one (${s.length}) load handlers for `+`URL '${t}'`);t=s[0]}return c(t,void 0,i)}async function c(t,i,s){if(null==s&&(s={}),null==t.load)throw new n.ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const o=await t.load();let l=o.modelTopology;null!=l.model_config&&(l=l.model_config);const u=null==s.strict||s.strict,h=null!=o.weightData&&null!=o.weightSpecs&&u,d=(0,r.deserialize)((0,a.convertPythonicToTs)(l),i,h),p=o.trainingConfig;if(null!=p&&d.loadTrainingConfig(p),null!=o.userDefinedMetadata&&d.setUserDefinedMetadata(o.userDefinedMetadata),null!=o.weightData){if(null==o.weightSpecs)throw new n.ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:i}=f(o.weightData,o.weightSpecs);d.loadWeights(t,u),null!=d.optimizer&&i.length>0&&await d.optimizer.setWeights(i),(0,e.dispose)(t),(0,e.dispose)(i.map(e=>e.tensor))}return d}function f(t,i){const s=e.io.decodeWeights(t,i),o={},n=[];return i.forEach(e=>{"optimizer"===e.group?n.push({name:e.name,tensor:s[e.name]}):o[e.name]=s[e.name]}),{modelWeights:o,optimizerWeights:n}}class g extends o.LayersModel{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,t.getUid)("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new n.ValueError("Negative dimension size caused by adding layer "+`${e.name} with input shape [`+`${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof g||e instanceof o.LayersModel;let r;if(t){if(1!==(r=e).outputs.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==r.inputs.length)throw new n.ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new n.ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=(0,i.Input)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(1!==e.inboundNodes.length)throw new n.ValueError("A layer added to a Sequential model must not already be "+`connected somewhere else. LayersModel received layer ${e.name} `+`which has ${e.inboundNodes.length} pre-existing inbound `+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,s.getSourceInputs)(this.outputs[0])}this.inboundNodes=[],new s.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:l.pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,u.getExactlyOneShape)(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new o.LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,i=console.log){this.built||this.build(),super.summary(e,t,i)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(e,t,i)}async evaluateDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fit(e,t,i)}async fitDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(t,i,s={},o=!1){let l,a={};if(i instanceof Array){if(null==i[0].className||"Merge"===i[0].className)throw new n.ValueError("Legacy serialization format not supported yet.");l=i}else e.util.assert(null!=i.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),l=i.layers,delete i.layers,a=i;const u=new t(a);if(!(u instanceof g))throw new n.NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(const e of l){const t=void 0,i=(0,r.deserialize)(e,t,o);o&&i.setFastWeightInitDuringBuild(!0),u.add(i)}return u}set stopTraining(e){if(null==this.model)throw new n.ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new n.ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const i={};i.className=t.getClassName(),i.config=t.getConfig(),e.push(i)}return{name:this.name,layers:e}}}exports.Sequential=g,g.className="Sequential",e.serialization.registerClass(g);
},{"@tensorflow/tfjs-core":"tc6m","./backend/state":"OJz3","./engine/input_layer":"jFdK","./engine/topology":"aftd","./engine/training":"buug","./errors":"xUGZ","./layers/serialization":"kM5O","./utils/generic_utils":"q8Pr","./utils/serialization_utils":"nEpG","./utils/types_utils":"KfRc"}],"UbkS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.model=o,exports.sequential=u,exports.loadLayersModel=l,exports.input=i,exports.registerCallbackConstructor=s;var e=require("./base_callbacks"),r=require("./engine/input_layer"),t=require("./engine/training"),n=require("./models");function o(e){return new t.LayersModel(e)}function u(e){return new n.Sequential(e)}function l(e,r){return null==r&&(r={}),(0,n.loadLayersModelInternal)(e,r)}function i(e){return(0,r.Input)(e)}function s(r,t){e.CallbackConstructorRegistry.registerCallbackConstructor(r,t)}
},{"./base_callbacks":"g9nK","./engine/input_layer":"jFdK","./engine/training":"buug","./models":"MIL4"}],"CJrN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeActivation=z,exports.deserializeActivation=N,exports.getActivation=C,exports.Swish=exports.LogSoftmax=exports.Softmax=exports.Tanh=exports.Softsign=exports.Softplus=exports.HardSigmoid=exports.Sigmoid=exports.Linear=exports.Relu6=exports.Relu=exports.Selu=exports.Elu=exports.Activation=void 0;var e=a(require("@tensorflow/tfjs-core")),s=a(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function r(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:s})(e)}function a(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(s);if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}return a.default=e,t&&t.set(e,a),a}class i extends e.serialization.Serializable{getConfig(){return{}}}exports.Activation=i;class l extends i{apply(e,t=1){return s.elu(e,t)}}exports.Elu=l,l.className="elu",e.serialization.registerClass(l);class o extends i{apply(s){return e.selu(s)}}exports.Selu=o,o.className="selu",e.serialization.registerClass(o);class n extends i{apply(s){return e.relu(s)}}exports.Relu=n,n.className="relu",e.serialization.registerClass(n);class p extends i{apply(s){return(0,e.tidy)(()=>e.minimum(6,e.relu(s)))}}exports.Relu6=p,p.className="relu6",e.serialization.registerClass(p);class u extends i{apply(e){return e}}exports.Linear=u,u.className="linear",e.serialization.registerClass(u);class c extends i{apply(s){return e.sigmoid(s)}}exports.Sigmoid=c,c.className="sigmoid",e.serialization.registerClass(c);class x extends i{apply(e){return s.hardSigmoid(e)}}exports.HardSigmoid=x,x.className="hardSigmoid",e.serialization.registerClass(x);class f extends i{apply(s){return e.softplus(s)}}exports.Softplus=f,f.className="softplus",e.serialization.registerClass(f);class g extends i{apply(e){return s.softsign(e)}}exports.Softsign=g,g.className="softsign",e.serialization.registerClass(g);class d extends i{apply(s){return e.tanh(s)}}exports.Tanh=d,d.className="tanh",e.serialization.registerClass(d);class m extends i{apply(s,t=-1){return e.softmax(s,t)}}exports.Softmax=m,m.className="softmax",e.serialization.registerClass(m);class y extends i{apply(s,t=-1){return e.logSoftmax(s,t)}}exports.LogSoftmax=y,y.className="logSoftmax",e.serialization.registerClass(y);class S extends i{apply(s,t=1){return(0,e.tidy)(()=>e.sigmoid(s.mul(t)).mul(s))}}function z(e){return e.getClassName()}function N(s,r={}){return(0,t.deserializeKerasObject)(s,e.serialization.SerializationMap.getMap().classNameMap,r,"activation")}function C(e){if(null==e){const e={className:"linear",config:{}};return N(e)}if("string"==typeof e){const s={};return s.className=e,s.config={},N(s)}return e instanceof i?e:N(e)}exports.Swish=S,S.className="swish",e.serialization.registerClass(S);
},{"@tensorflow/tfjs-core":"tc6m","./backend/tfjs_backend":"FQx5","./utils/generic_utils":"q8Pr"}],"ZgAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l1=a,exports.l2=o,exports.serializeRegularizer=f,exports.deserializeRegularizer=p,exports.getRegularizer=d,exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.L1L2=exports.Regularizer=void 0;var e=n(require("@tensorflow/tfjs-core")),r=n(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function i(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+`object, but received: ${e}`)}class s extends e.serialization.Serializable{}exports.Regularizer=s;class u extends s{constructor(e){super(),i(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return(0,e.tidy)(()=>{let l=(0,e.zeros)([1]);return this.hasL1&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l1,(0,e.abs)(t))))),this.hasL2&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l2,r.square(t))))),l.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}function a(e){return i(e),new u({l1:null!=e?e.l1:null,l2:0})}function o(e){return i(e),new u({l2:null!=e?e.l2:null,l1:0})}exports.L1L2=u,u.className="L1L2",e.serialization.registerClass(u);const c={l1l2:"L1L2"};function f(e){return(0,t.serializeKerasObject)(e)}function p(r,l={}){return(0,t.deserializeKerasObject)(r,e.serialization.SerializationMap.getMap().classNameMap,l,"regularizer")}function d(e){if(null==e)return null;if("string"==typeof e){return p({className:e in c?c[e]:e,config:{}})}return e instanceof s?e:p(e)}exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=c;
},{"@tensorflow/tfjs-core":"tc6m","./backend/tfjs_backend":"FQx5","./utils/generic_utils":"q8Pr"}],"jL0W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Softmax=exports.ThresholdedReLU=exports.ELU=exports.PReLU=exports.LeakyReLU=exports.ReLU=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../activations"),s=require("../backend/tfjs_backend"),a=require("../constraints"),r=require("../engine/topology"),i=require("../errors"),l=require("../initializers"),n=require("../regularizers"),h=require("../utils/types_utils");class u extends r.Layer{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(t,s){t=(0,h.getExactlyOneTensor)(t);let a=(0,e.relu)(t);return null!=this.maxValue&&(a=(0,e.clipByValue)(a,0,this.maxValue)),a}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}exports.ReLU=u,u.className="ReLU",e.serialization.registerClass(u);class o extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,h.getExactlyOneTensor)(t);return(0,e.leakyRelu)(a,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.LeakyReLU=o,o.className="LeakyReLU",e.serialization.registerClass(o);class p extends r.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,l.getInitializer)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,n.getRegularizer)(e.alphaRegularizer),this.alphaConstraint=(0,a.getConstraint)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new i.ValueError("Expected sharedAxes to be a number or an array of numbers, "+`but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=(0,h.getExactlyOneShape)(e)).slice(1);if(null!=this.sharedAxes)for(const a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(null!=this.sharedAxes)for(let a=1;a<e.length;++a)s[a]=e[a];this.inputSpec=[new r.InputSpec({ndim:e.length,axes:s})],this.built=!0}call(t,s){return t=(0,h.getExactlyOneTensor)(t),(0,e.prelu)(t,this.alpha.read())}getConfig(){const e={alphaInitializer:(0,l.serializeInitializer)(this.alphaInitializer),alphaRegularizer:(0,n.serializeRegularizer)(this.alphaRegularizer),alphaConstraint:(0,a.serializeConstraint)(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}exports.PReLU=p,p.className="PReLU",e.serialization.registerClass(p);class c extends r.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new i.NotImplementedError(`Non-default alpha value (${e.alpha}) is not supported by the `+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,h.getExactlyOneTensor)(t);return(0,e.elu)(a)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.ELU=c,c.className="ELU",e.serialization.registerClass(c);class g extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const a=(0,h.getExactlyOneTensor)(e);return a.mul((0,s.cast)(a.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}exports.ThresholdedReLU=g,g.className="ThresholdedReLU",e.serialization.registerClass(g);class x extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new t.Softmax).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const s=(0,h.getExactlyOneTensor)(e);return this.softmax(s,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}exports.Softmax=x,x.className="Softmax",e.serialization.registerClass(x);
},{"@tensorflow/tfjs-core":"tc6m","../activations":"CJrN","../backend/tfjs_backend":"FQx5","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/types_utils":"KfRc"}],"Qnyq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArray=n,exports.convOutputLength=u,exports.deconvLength=i;var e=require("../errors"),r=require("./generic_utils"),t=require("./math_utils");function n(n,u,i){if("number"==typeof n)return(0,r.pyListRepeat)(n,u);if(n.length!==u)throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u} integers.`+` Received: ${n.length} elements.`);for(let r=0;r<u;++r){const o=n[r];if(!(0,t.isInteger)(o))throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u}`+` integers. Received: ${JSON.stringify(n)} including a`+` non-integer number ${o}`)}return n}function u(e,r,t,n,u=1){if(null==e)return e;let i;return i="same"===t?e:e-(r+(r-1)*(u-1))+1,Math.floor((i+n-1)/n)}function i(r,n,u,i){if(null==r)return null;if("valid"===i)r=r*n+(0,t.max)([u-n,0]);else{if("same"!==i)throw new e.ValueError(`Unsupport padding mode: ${i}.`);r*=n}return r}
},{"../errors":"xUGZ","./generic_utils":"q8Pr","./math_utils":"Rdwq"}],"W8AA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preprocessConv2DInput=f,exports.preprocessConv3DInput=m,exports.conv1dWithBias=z,exports.conv1d=b,exports.conv2d=k,exports.conv2dWithBiasActivation=v,exports.conv3d=w,exports.conv3dWithBias=C,exports.UpSampling2D=exports.Cropping2D=exports.Conv1D=exports.SeparableConv2D=exports.SeparableConv=exports.Conv2DTranspose=exports.Conv3D=exports.Conv2D=exports.Conv=exports.BaseConv=void 0;var e=g(require("@tensorflow/tfjs-core")),t=require("../activations"),i=require("../backend/common"),r=g(require("../backend/tfjs_backend")),n=require("../common"),s=require("../constraints"),a=require("../engine/topology"),o=require("../errors"),l=require("../initializers"),h=require("../regularizers"),p=require("../utils/conv_utils"),d=g(require("../utils/generic_utils")),u=require("../utils/types_utils");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(c=function(e){return e?i:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=c(t);if(i&&i.has(e))return i.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,i&&i.set(e,r),r}function f(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,1]):t))}function m(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,4,1]):t))}function z(t,s,a,l=1,h="valid",p,d=1){return(0,e.tidy)(()=>{if(null==p&&(p=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(p),3!==t.shape.length)throw new o.ValueError("The input of a conv1dWithBias operation should be 3, but is "+`${t.shape.length} instead.`);if(3!==s.shape.length)throw new o.ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+`${s.shape.length} instead`);if(null!=a&&1!==a.shape.length)throw new o.ValueError("The bias for a conv1dWithBias operation should be 1, but is "+`${s.shape.length} instead`);if("channelsFirst"===p&&(t=e.transpose(t,[0,2,1])),"causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let u=e.conv1d(t,s,l,"same"===h?"same":"valid","NWC",d);return null!=a&&(u=r.biasAdd(u,a)),u})}function b(t,i,r=1,s="valid",a,o=1){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),z(t,i,null,r,s,a,o)))}function k(t,i,r=[1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),v(t,i,null,r,s,a,o)))}function v(t,r,s,a=[1,1],l="valid",h,p,d=null){return(0,e.tidy)(()=>{if(null==h&&(h=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(h),3!==t.rank&&4!==t.rank)throw new o.ValueError("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+`but received ${t.rank}.`);if(3!==r.rank&&4!==r.rank)throw new o.ValueError("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+`but received ${t.rank}.`);let u=f(t,h);if("causal"===l)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=e.fused.conv2d({x:u,filter:r,strides:a,pad:"same"===l?"same":"valid",dilations:p,dataFormat:"NHWC",bias:s,activation:d}),"channelsFirst"===h&&(u=e.transpose(u,[0,3,1,2])),u})}function w(t,i,r=[1,1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),C(t,i,null,r,s,a,o)))}function C(t,s,a,l=[1,1,1],h="valid",p,d){return(0,e.tidy)(()=>{if(null==p&&(p=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(p),4!==t.rank&&5!==t.rank)throw new o.ValueError("conv3dWithBias expects input to be of rank 4 or 5, but received "+`${t.rank}.`);if(4!==s.rank&&5!==s.rank)throw new o.ValueError("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+`${t.rank}.`);let u=m(t,p);if("causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=e.conv3d(u,s,l,"same"===h?"same":"valid","NDHWC",d),null!=a&&(u=r.biasAdd(u,a)),"channelsFirst"===p&&(u=e.transpose(u,[0,4,1,2,3])),u})}class y extends a.Layer{constructor(e,i){if(super(i),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",y.verifyArgs(i),this.rank=e,d.assertPositiveInteger(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new o.NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is `+"not implemented yet.");if(this.kernelSize=(0,p.normalizeArray)(i.kernelSize,e,"kernelSize"),this.strides=(0,p.normalizeArray)(null==i.strides?1:i.strides,e,"strides"),this.padding=null==i.padding?"valid":i.padding,(0,n.checkPaddingMode)(this.padding),this.dataFormat=null==i.dataFormat?"channelsLast":i.dataFormat,(0,n.checkDataFormat)(this.dataFormat),this.activation=(0,t.getActivation)(i.activation),this.useBias=null==i.useBias||i.useBias,this.biasInitializer=(0,l.getInitializer)(i.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=(0,s.getConstraint)(i.biasConstraint),this.biasRegularizer=(0,h.getRegularizer)(i.biasRegularizer),this.activityRegularizer=(0,h.getRegularizer)(i.activityRegularizer),this.dilationRate=(0,p.normalizeArray)(null==i.dilationRate?1:i.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+`${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of two numbers for 2D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of three numbers for 3D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(d.assert("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,3))throw new o.ValueError("BaseConv expects config.kernelSize to be number or number[] with "+`length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:(0,t.serializeActivation)(this.activation),useBias:this.useBias,biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),biasRegularizer:(0,h.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,h.serializeRegularizer)(this.activityRegularizer),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}exports.BaseConv=y;class I extends y{constructor(e,t){super(e,t),this.kernel=null,I.verifyArgs(t),this.filters=t.filters,d.assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.kernelRegularizer=(0,h.getRegularizer)(t.kernelRegularizer)}build(e){e=(0,u.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the input should be defined. "+`Found ${e[t]}`);const i=e[t],r=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:i}}],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let e;t=(0,u.getExactlyOneTensor)(t);const i=null==this.bias?null:this.bias.read(),r=d.mapActivationToFusedKernel(this.activation.getClassName());if(null!=r&&2===this.rank)e=v(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=z(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=v(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new o.NotImplementedError("convolutions greater than 3D are not implemented yet.");e=C(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(e){e=(0,u.getExactlyOneShape)(e);const t=[],i="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let n=0;n<i.length;++n){const e=(0,p.convOutputLength)(i[n],this.kernelSize[n],this.padding,this.strides[n],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[n]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t)).push(this.filters):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),kernelRegularizer:(0,h.serializeRegularizer)(this.kernelRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new o.ValueError("Convolution layer expected config.filters to be a 'number' > 0 "+`but got ${JSON.stringify(e.filters)}`)}}exports.Conv=I;class S extends I{constructor(e){super(2,e),S.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,2))throw new o.ValueError("Conv2D expects config.kernelSize to be number or number[] with "+`length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv2D=S,S.className="Conv2D",e.serialization.registerClass(S);class R extends I{constructor(e){super(3,e),R.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new o.ValueError("Conv3D expects config.kernelSize to be number or"+` [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv3D=R,R.className="Conv3D",e.serialization.registerClass(R);class F extends S{constructor(e){if(super(e),this.inputSpec=[new a.InputSpec({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new o.ValueError("Conv2DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=(0,u.getExactlyOneShape)(e)).length)throw new o.ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the inputs should be defined. Found `None`.");const i=e[t],r=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new a.InputSpec({ndim:4,axes:{[t]:i}})],this.built=!0}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);if(4!==i.shape.length)throw new o.ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${i.shape.length}`);const n=i.shape,s=n[0];let a,l;"channelsFirst"===this.dataFormat?(a=2,l=3):(a=1,l=2);const h=n[a],d=n[l],c=this.kernelSize[0],g=this.kernelSize[1],f=this.strides[0],m=this.strides[1],z=[s,(0,p.deconvLength)(h,f,c,this.padding),(0,p.deconvLength)(d,m,g,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(i=e.transpose(i,[0,2,3,1]));let b=e.conv2dTranspose(i,this.kernel.read(),z,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(b=e.transpose(b,[0,3,1,2])),null!=this.bias&&(b=r.biasAdd(b,this.bias.read(),this.dataFormat)),null!=this.activation&&(b=this.activation.apply(b)),b})}computeOutputShape(e){const t=(e=(0,u.getExactlyOneShape)(e)).slice();let i,r,n;"channelsFirst"===this.dataFormat?(i=1,r=2,n=3):(i=3,r=1,n=2);const s=this.kernelSize[0],a=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[i]=this.filters,t[r]=(0,p.deconvLength)(t[r],o,s,this.padding),t[n]=(0,p.deconvLength)(t[n],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}exports.Conv2DTranspose=F,F.className="Conv2DTranspose",e.serialization.registerClass(F);class E extends I{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new o.ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new o.ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new o.ValueError(`SeparableConv${this.rank}D supports only padding modes: `+`'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=(0,h.getRegularizer)(t.depthwiseRegularizer),this.depthwiseConstraint=(0,s.getConstraint)(t.depthwiseConstraint),this.pointwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=(0,h.getRegularizer)(t.pointwiseRegularizer),this.pointwiseConstraint=(0,s.getConstraint)(t.pointwiseConstraint)}build(e){if((e=(0,u.getExactlyOneShape)(e)).length<this.rank+2)throw new o.ValueError(`Inputs to SeparableConv${this.rank}D should have rank `+`${this.rank+2}, but received input shape: `+`${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new o.ValueError("The channel dimension of the inputs should be defined, "+`but found ${JSON.stringify(e[t])}`);const i=e[t],r=this.kernelSize.concat([i,this.depthMultiplier]),n=[];for(let s=0;s<this.rank;++s)n.push(1);n.push(i*this.depthMultiplier,this.filters);this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",n,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new a.InputSpec({ndim:this.rank+2,axes:{[t]:i}})],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let i;if(t=(0,u.getExactlyOneTensor)(t),1===this.rank)throw new o.NotImplementedError("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=e.transpose(t,[0,2,3,1])),i=e.separableConv2d(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=r.biasAdd(i,this.bias.read(),this.dataFormat)),null!=this.activation&&(i=this.activation.apply(i)),"channelsFirst"===this.dataFormat&&(i=e.transpose(i,[0,3,1,2])),i})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=(0,l.serializeInitializer)(this.depthwiseInitializer),e.pointwiseInitializer=(0,l.serializeInitializer)(this.pointwiseInitializer),e.depthwiseRegularizer=(0,h.serializeRegularizer)(this.depthwiseRegularizer),e.pointwiseRegularizer=(0,h.serializeRegularizer)(this.pointwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseConstraint),e.pointwiseConstraint=(0,s.serializeConstraint)(this.pointwiseConstraint),e}}exports.SeparableConv=E,E.className="SeparableConv";class x extends E{constructor(e){super(2,e)}}exports.SeparableConv2D=x,x.className="SeparableConv2D",e.serialization.registerClass(x);class A extends I{constructor(e){super(1,e),A.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,1))throw new o.ValueError("Conv1D expects config.kernelSize to be number or number[] with "+`length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv1D=A,A.className="Conv1D",e.serialization.registerClass(A);class D extends a.Layer{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(t,i){return(0,e.tidy)(()=>{if(t=(0,u.getExactlyOneTensor)(t),"channelsLast"===this.dataFormat){const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Cropping2D=D,D.className="Cropping2D",e.serialization.registerClass(D);class N extends a.Layer{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,n.checkDataFormat)(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,(0,n.checkInterpolationFormat)(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],i=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,i]}{const t=null==e[1]?null:this.size[0]*e[1],i=null==e[2]?null:this.size[1]*e[2];return[e[0],t,i,e[3]]}}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);const r=i.shape;if("channelsFirst"===this.dataFormat){i=e.transpose(i,[0,2,3,1]);const t=this.size[0]*r[2],n=this.size[1]*r[3],s="nearest"===this.interpolation?i.resizeNearestNeighbor([t,n]):i.resizeBilinear([t,n]);return e.transpose(s,[0,3,1,2])}{const e=this.size[0]*r[1],t=this.size[1]*r[2];return"nearest"===this.interpolation?i.resizeNearestNeighbor([e,t]):i.resizeBilinear([e,t])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.UpSampling2D=N,N.className="UpSampling2D",e.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"tc6m","../activations":"CJrN","../backend/common":"EXqn","../backend/tfjs_backend":"FQx5","../common":"DKuh","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/conv_utils":"Qnyq","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc"}],"a4e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=c,exports.DepthwiseConv2D=void 0;var e=d(require("@tensorflow/tfjs-core")),t=require("../backend/common"),i=d(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../errors"),a=require("../initializers"),l=require("../regularizers"),h=require("../utils/conv_utils"),u=require("../utils/types_utils"),o=require("./convolutional");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}function c(i,s,a=[1,1],l="valid",h,u){return(0,e.tidy)(()=>{null==h&&(h=(0,t.imageDataFormat)()),(0,r.checkDataFormat)(h);let p=(0,o.preprocessConv2DInput)(i,h);if(4!==i.rank)throw new n.ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+`${i.rank}-D`);if(4!==s.rank)throw new n.ValueError("depthwiseKernel is required to be 4-D, but is instead "+`${s.rank}-D`);return p=e.depthwiseConv2d(p,s,a,"same"===l?"same":"valid","NHWC",u),"channelsFirst"===h&&(p=e.transpose(p,[0,3,1,2])),p})}class w extends o.BaseConv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,a.getInitializer)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,s.getConstraint)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,l.getRegularizer)(e.depthwiseRegularizer)}build(e){if((e=(0,u.getExactlyOneShape)(e)).length<4)throw new n.ValueError("Inputs to DepthwiseConv2D should have rank 4. "+`Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new n.ValueError("The channel dimension of the inputs to DepthwiseConv2D should "+`be defined, but is not (${e[t]}).`);const i=e[t],r=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,r){return(0,e.tidy)(()=>{let e=c(t=(0,u.getExactlyOneTensor)(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=i.biasAdd(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(e){e=(0,u.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],i="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=(0,h.convOutputLength)(t,this.kernelSize[0],this.padding,this.strides[0]),n=(0,h.convOutputLength)(i,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,s,n]:[e[0],s,n,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,a.serializeInitializer)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,l.serializeRegularizer)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseRegularizer),e}}exports.DepthwiseConv2D=w,w.className="DepthwiseConv2D",e.serialization.registerClass(w);
},{"@tensorflow/tfjs-core":"tc6m","../backend/common":"EXqn","../backend/tfjs_backend":"FQx5","../common":"DKuh","../constraints":"aG05","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/conv_utils":"Qnyq","../utils/types_utils":"KfRc","./convolutional":"W8AA"}],"MQXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeArgs=I,exports.rnn=R,exports.generateDropoutMask=E,exports.StackedRNNCells=exports.LSTM=exports.LSTMCell=exports.GRU=exports.GRUCell=exports.SimpleRNN=exports.SimpleRNNCell=exports.RNNCell=exports.RNN=void 0;var t=d(require("@tensorflow/tfjs-core")),e=require("../activations"),i=d(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../engine/topology"),a=require("../errors"),l=require("../initializers"),u=require("../regularizers"),o=require("../utils/generic_utils"),h=d(require("../utils/math_utils")),c=require("../utils/types_utils"),p=require("../variables"),g=require("./serialization");function z(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(z=function(t){return t?i:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=z(e);if(i&&i.has(t))return i.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}function I(t,e,i,r){if(Array.isArray(t)){if(null!=e||null!=i)throw new a.ValueError("When inputs is an array, neither initialState or constants should be provided");null!=r&&(i=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=s(e),constants:i=s(i)}}function R(e,i,r,s=!1,n,l,u=!1,o=!1){return t.tidy(()=>{const c=i.shape.length;if(c<3)throw new a.ValueError(`Input should be at least 3D, but is ${c}D.`);const p=[1,0].concat(h.range(2,c));if(i=t.transpose(i,p),null!=l)throw new a.NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=n&&((n=n.asType("bool").asType("float32")).rank===c-1&&(n=t.expandDims(n,-1)),n=t.transpose(n,p)),s&&(i=t.reverse(i,0),null!=n&&(n=t.reverse(n,0)));const g=[];let z,d=r;const I=i.shape[0],R=t.unstack(i);let k,f;null!=n&&(k=t.unstack(n));for(let i=0;i<I;++i){const r=R[i],s=t.tidy(()=>e(r,d));if(null==n)z=s[0],d=s[1];else{const e=t.tidy(()=>{const e=k[i],r=t.onesLike(e).sub(e);return{output:s[0].mul(e).add(d[0].mul(r)),newStates:d.map((t,i)=>s[1][i].mul(e).add(t.mul(r)))}});z=e.output,d=e.newStates}o&&g.push(z)}if(o){const e=1;f=t.stack(g,e)}return[z,f,d]})}class k extends n.Layer{constructor(t){let e;if(super(t),null==t.cell)throw new a.ValueError("cell property is missing for the constructor of RNN.");if(null==(e=Array.isArray(t.cell)?new N({cells:t.cell}):t.cell).stateSize)throw new a.ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new n.InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return h.range(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const i=e[0];let r;if(r=this.returnSequences?[t[0],t[1],i]:[t[0],i],this.returnState){const i=[];for(const r of e)i.push([t[0],r]);return[r].concat(i)}return r}computeMask(e,i){return t.tidy(()=>{Array.isArray(i)&&(i=i[0]);const t=this.returnSequences?i:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let i=0;i<t;++i)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(e){if(null!=this.numConstants)throw new a.NotImplementedError("Constants support is not implemented in RNN yet.");(0,c.isArrayOfShapes)(e)&&(e=e[0]),e=e;const i=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new n.InputSpec({shape:[i,null,...r]});const s=[e[0]].concat(e.slice(2));let l;if(this.cell.build(s),l=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!t.util.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),l))throw new a.ValueError("An initialState was passed that is not compatible with "+`cell.stateSize. Received stateSpec=${this.stateSpec}; `+`However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(t=>new n.InputSpec({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){(0,t.tidy)(()=>{if(!this.stateful)throw new a.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(null==r)throw new a.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_=[t.zeros([r,this.cell.stateSize])];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_[0]=t.zeros([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new a.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);!0===i?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],n=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[r,n];if(!t.util.arraysEqual(s.shape,l))throw new a.ValueError(`State ${i} is incompatible with layer ${this.name}: `+`expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}apply(t,e){let i=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const s=I(t,i,r,this.numConstants);t=s.inputs,i=s.initialState,r=s.constants;let a=[],l=[];if(null!=i){e.initialState=i,a=a.concat(i),this.stateSpec=[];for(const t of i)this.stateSpec.push(new n.InputSpec({shape:t.shape}));l=l.concat(this.stateSpec)}if(null!=r&&(e.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof n.SymbolicTensor){const i=[t].concat(a),r=this.inputSpec.concat(l),s=this.inputSpec;this.inputSpec=r;const n=super.apply(i,e);return this.inputSpec=s,n}return super.apply(t,e)}call(e,i){return(0,t.tidy)(()=>{const t=null==i?null:i.mask,r=null==i?null:i.training;let s=null==i?null:i.initialState;e=(0,c.getExactlyOneTensor)(e),null==s&&(s=this.stateful?this.states_:this.getInitialState(e));const n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==n)throw new a.ValueError(`RNN Layer has ${n} state(s) but was passed `+`${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=R((t,e)=>{const i=this.cell.call([t].concat(e),l);return[i[0],i.slice(1)]},e,s,this.goBackwards,t,null,this.unroll,this.returnSequences),o=u[0],h=u[1],p=u[2];this.stateful&&this.resetStates(p,r);const g=this.returnSequences?h:o;return this.returnState?[g].concat(p):g})}getInitialState(e){return(0,t.tidy)(()=>{let r=t.zeros(e.shape);return r=t.sum(r,[1,2]),r=i.expandDims(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?i.tile(r,[1,t]):r):this.cell.stateSize>1?[i.tile(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);const i=this.cell.getConfig();return this.getClassName()===k.className&&(e.cell={className:this.cell.getClassName(),config:i}),Object.assign({},i,t,e)}static fromConfig(t,e,i={}){const r=e.cell,s=(0,g.deserialize)(r,i);return new t(Object.assign(e,{cell:s}))}}exports.RNN=k,k.className="RNN",t.serialization.registerClass(k);class f extends n.Layer{}exports.RNNCell=f;class m extends f{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=(0,c.getExactlyOneShape)(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const n=null!=r.training&&r.training;let l;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:n})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(s),rate:this.recurrentDropout,training:n}));const u=this.dropoutMask,o=this.recurrentDropoutMask;l=null!=u?i.dot(t.mul(e,u),this.kernel.read()):i.dot(e,this.kernel.read()),null!=this.bias&&(l=i.biasAdd(l,this.bias.read())),null!=o&&(s=t.mul(s,o));let h=t.add(l,i.dot(s,this.recurrentKernel.read()));return null!=this.activation&&(h=this.activation.apply(h)),[h,h]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,i)}}exports.SimpleRNNCell=m,m.className="SimpleRNNCell",t.serialization.registerClass(m);class A extends k{constructor(t){t.cell=new m(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return new t(e)}}exports.SimpleRNN=A,A.className="SimpleRNN",t.serialization.registerClass(A);class S extends f{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new a.ValueError("GRUCell does not support reset_after parameter set to true.");this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){const e=(t=(0,c.getExactlyOneShape)(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+`${e.length}.`);const s=null!=r.training&&r.training;let n=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:3}));const l=this.dropoutMask,u=this.recurrentDropoutMask;let o,h,c;0<this.dropout&&this.dropout<1&&(e=t.mul(e,l[0]));let p=i.dot(e,this.kernel.read());this.useBias&&(p=i.biasAdd(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,u[0]));const g=this.recurrentKernel.read(),[z,d]=t.split(g,[2*this.units,this.units],g.rank-1),I=i.dot(n,z),[R,k,f]=t.split(p,3,p.rank-1),[m,A]=t.split(I,2,I.rank-1);o=this.recurrentActivation.apply(t.add(R,m)),h=this.recurrentActivation.apply(t.add(k,A));const S=i.dot(t.mul(h,n),d);c=this.activation.apply(t.add(f,S));const C=t.add(t.mul(o,n),t.mul(t.add(1,t.neg(o)),c));return[C,C]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,i)}}exports.GRUCell=S,S.className="GRUCell",t.serialization.registerClass(S);class C extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new S(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.GRU=C,C.className="GRU",t.serialization.registerClass(C);class b extends f{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;const r=(t=(0,c.getExactlyOneShape)(t))[t.length-1];let s;if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;s=new((e=class extends l.Initializer{apply(e,s){const n=t.apply([r]),a=(new l.Ones).apply([r]),u=t.apply([2*r]);return i.concatAlongFirstAxis(i.concatAlongFirstAxis(n,a),u)}}).className="CustomInit",e)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return(0,t.tidy)(()=>{const s=null!=r.training&&r.training;if(3!==(e=e).length)throw new a.ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);let n=e[1];const l=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:4}));const u=this.dropoutMask,o=this.recurrentDropoutMask;let h,c,p,g;0<this.dropout&&this.dropout<1&&(e=t.mul(e,u[0]));let z=i.dot(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,o[0])),z=t.add(z,i.dot(n,this.recurrentKernel.read())),this.useBias&&(z=i.biasAdd(z,this.bias.read()));const[d,I,R,k]=t.split(z,4,z.rank-1);h=this.recurrentActivation.apply(d),c=this.recurrentActivation.apply(I),p=t.add(t.mul(c,l),t.mul(h,this.activation.apply(R))),g=this.recurrentActivation.apply(k);const f=t.mul(g,this.activation.apply(p));return[f,f,p]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,i)}}exports.LSTMCell=b,b.className="LSTMCell",t.serialization.registerClass(b);class y extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new b(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.LSTM=y,y.className="LSTM",t.serialization.registerClass(y);class N extends f{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(e,i){return(0,t.tidy)(()=>{let t=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(t.splice(0,e.stateSize.length)):r.push(t.splice(0,1));r.reverse();const s=[];let n;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];t=r[a],n=0===a?[e[0]].concat(t):[n[0]].concat(t),n=l.call(n,i),s.push(n.slice(1))}t=[];for(const e of s.slice().reverse())t.push(...e);return[n[0]].concat(t)})}build(t){let e;(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t,this.cells.forEach((i,s)=>{(0,r.nameScope)(`RNNCell_${s}`,()=>{i.build(t),e=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e={cells:this.cells.map(t=>({className:t.getClassName(),config:t.getConfig()}))};return Object.assign({},t,e)}static fromConfig(t,e,i={}){const r=[];for(const s of e.cells)r.push((0,g.deserialize)(s,i));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return(0,p.batchGetValue)(t)}setWeights(t){const e=[];for(const i of this.cells){const r=i.weights.length,s=t.splice(r);for(let t=0;t<i.weights.length;++t)e.push([i.weights[t],s[t]])}(0,p.batchSetValue)(e)}}function E(e){const{ones:r,rate:s,training:n=!1,count:a=1}=e,l=()=>i.dropout(r(),s),u=()=>i.inTrainPhase(l,r,n);return!a||a<=1?t.keep(u().clone()):Array(a).fill(void 0).map(u).map(e=>t.keep(e.clone()))}exports.StackedRNNCells=N,N.className="StackedRNNCells",t.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"tc6m","../activations":"CJrN","../backend/tfjs_backend":"FQx5","../common":"DKuh","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/generic_utils":"q8Pr","../utils/math_utils":"Rdwq","../utils/types_utils":"KfRc","../variables":"jNTt","./serialization":"kM5O"}],"JxkE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConvLSTM2D=exports.ConvLSTM2DCell=void 0;var t=c(require("@tensorflow/tfjs-core")),e=c(require("../backend/tfjs_backend")),s=require("../common"),i=require("../engine/topology"),r=require("../errors"),n=require("../initializers"),a=require("../utils/conv_utils"),l=require("../utils/generic_utils"),o=require("../utils/types_utils"),u=require("./recurrent");function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(h=function(t){return t?s:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=h(e);if(s&&s.has(t))return s.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=t[n]}return i.default=t,s&&s.set(t,i),i}var p=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(s[i[r]]=t[i[r]])}return s};class d extends u.RNNCell{}class f extends u.RNN{constructor(t){if(t.unroll)throw new r.NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new r.NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new i.InputSpec({ndim:5})]}call(e,s){return t.tidy(()=>{if(null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),s&&s.constants)throw new r.ValueError("ConvRNN2D cell does not support constants");const i=null==s?null:s.mask,n=null==s?null:s.training,a=null==s?null:s.initialState;return super.call(e,{mask:i,training:n,initialState:a})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(e){return t.tidy(()=>{const{stateSize:s}=this.cell,i=e.shape,r=this.computeSingleOutputShape(i),n=[r[0],...r.slice(2)],a=t.zeros(n);return Array.isArray(s)?Array(s.length).fill(a):[a]})}resetStates(e,s=!1){t.tidy(()=>{if(!this.stateful)throw new r.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape,n=this.computeSingleOutputShape(i),a=[n[0],...n.slice(2)];if(null==i[0])throw new r.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_=[t.zeros(a)];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_[0]=t.zeros(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new r.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);s?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],n=a;if(!t.util.arraysEqual(i.shape,n))throw new r.ValueError(`State ${s} is incompatible with layer ${this.name}: `+`expected shape=${n}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:s,kernelSize:i,padding:r,strides:n,dilationRate:l}=this.cell,o="channelsFirst"===e,u=t[o?3:2],h=t[o?4:3],c=(0,a.convOutputLength)(u,i[0],r,n[0],l[0]),p=(0,a.convOutputLength)(h,i[1],r,n[1],l[1]);return[...t.slice(0,2),...o?[s,c,p]:[c,p,s]]}}f.className="ConvRNN2D";class g extends u.LSTMCell{constructor(t){const{filters:e,kernelSize:i,strides:r,padding:n,dataFormat:o,dilationRate:u}=t;super(Object.assign({},t,{units:e})),this.filters=e,(0,l.assertPositiveInteger)(this.filters,"filters"),this.kernelSize=(0,a.normalizeArray)(i,2,"kernelSize"),this.kernelSize.forEach(t=>(0,l.assertPositiveInteger)(t,"kernelSize")),this.strides=(0,a.normalizeArray)(r||1,2,"strides"),this.strides.forEach(t=>(0,l.assertPositiveInteger)(t,"strides")),this.padding=n||"valid",(0,s.checkPaddingMode)(this.padding),this.dataFormat=o||"channelsLast",(0,s.checkDataFormat)(this.dataFormat),this.dilationRate=(0,a.normalizeArray)(u||1,2,"dilationRate"),this.dilationRate.forEach(t=>(0,l.assertPositiveInteger)(t,"dilationRate"))}build(s){var i;s=(0,o.getExactlyOneShape)(s);const a="channelsFirst"===this.dataFormat?1:s.length-1;if(null==s[a])throw new r.ValueError("The channel dimension of the input should be defined. "+`Found ${s[a]}`);const l=s[a],u=this.kernelSize.concat([l,4*this.filters]);this.kernel=this.addWeight("kernel",u,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const h=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",h,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let s;if(this.unitForgetBias){const r=this.biasInitializer,a=this.filters;s=new((i=class extends n.Initializer{apply(s,i){const n=r.apply([a]),l=t.ones([a]),o=r.apply([2*a]);return e.concatenate([n,l,o])}}).className="CustomInit",i)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,s,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,s){return t.tidy(()=>{if(3!==e.length)throw new r.ValueError("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);const i=s.training||!1,n=e[0],a=e[1],l=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(n),rate:this.dropout,training:i,count:4}));const o=this.dropoutMask,h=(e,s,i)=>s&&s[i]?t.mul(s[i],e):e;let c=h(n,o,0),p=h(n,o,1),d=h(n,o,2),f=h(n,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(a),rate:this.recurrentDropout,training:i,count:4}));const g=this.recurrentDropoutMask;let y=h(a,g,0),S=h(a,g,1),v=h(a,g,2),m=h(a,g,3);const[k,b,C,z]=t.split(this.kernel.read(),4,3),[w,O,M,N]=this.useBias?t.split(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,k,w,this.padding),p=this.inputConv(p,b,O,this.padding),d=this.inputConv(d,C,M,this.padding),f=this.inputConv(f,z,N,this.padding);const[D,I,_,A]=t.split(this.recurrentKernel.read(),4,3);y=this.recurrentConv(y,D),S=this.recurrentConv(S,I),v=this.recurrentConv(v,_),m=this.recurrentConv(m,A);const R=this.recurrentActivation.apply(t.add(c,y)),F=this.recurrentActivation.apply(t.add(p,S)),j=t.add(t.mul(F,l),t.mul(R,this.activation.apply(t.add(d,v)))),x=t.mul(this.recurrentActivation.apply(t.add(f,m)),this.activation.apply(j));return[x,x,j]})}getConfig(){const t=super.getConfig(),{units:e}=t,s=p(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},s,i)}inputConv(s,i,r,n){const a=t.conv2d(s,i,this.strides,n||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return r?e.biasAdd(a,r,this.dataFormat):a}recurrentConv(e,s){return t.conv2d(e,s,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}exports.ConvLSTM2DCell=g,g.className="ConvLSTM2DCell",t.serialization.registerClass(g);class y extends f{constructor(t){const e=new g(t);super(Object.assign({},t,{cell:e}))}static fromConfig(t,e){return new t(e)}}exports.ConvLSTM2D=y,y.className="ConvLSTM2D",t.serialization.registerClass(y);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../common":"DKuh","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../utils/conv_utils":"Qnyq","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc","./recurrent":"MQXH"}],"brQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Masking=exports.Permute=exports.Reshape=exports.RepeatVector=exports.Activation=exports.Flatten=exports.Dense=exports.SpatialDropout1D=exports.Dropout=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../activations"),i=p(require("../backend/tfjs_backend")),s=require("../constraints"),r=require("../engine/topology"),n=require("../errors"),a=require("../initializers"),o=require("../regularizers"),l=require("../utils/generic_utils"),u=require("../utils/math_utils"),h=require("../utils/types_utils");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(c=function(t){return t?i:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=c(e);if(i&&i.has(t))return i.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=t[n]}return s.default=t,i&&i.set(t,s),s}class g extends r.Layer{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(null==this.noiseShape[s]?e[s]:this.noiseShape[s]);return i}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e);if(0<this.rate&&this.rate<1){const e=null!=s.training&&s.training,r=this.getNoiseShape(t);return i.inTrainPhase(()=>i.dropout(t,this.rate,r,this.seed),()=>t,e)}return e})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}exports.Dropout=g,g.className="Dropout",t.serialization.registerClass(g);class d extends g{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}exports.SpatialDropout1D=d,d.className="SpatialDropout1D",t.serialization.registerClass(d);class m extends r.Layer{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,(0,l.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=(0,a.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,a.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.kernelRegularizer=(0,o.getRegularizer)(t.kernelRegularizer),this.biasRegularizer=(0,o.getRegularizer)(t.biasRegularizer),this.activityRegularizer=(0,o.getRegularizer)(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=(0,h.getExactlyOneShape)(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return e[e.length-1]=this.units,e}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e),r=(0,l.mapActivationToFusedKernel)(this.activation.getClassName());let n;return null!=r?n=i.dot(t,this.kernel.read(),r,this.bias?this.bias.read():null):(n=i.dot(t,this.kernel.read()),null!=this.bias&&(n=i.biasAdd(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){const t={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,a.serializeInitializer)(this.kernelInitializer),biasInitializer:(0,a.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,o.serializeRegularizer)(this.kernelRegularizer),biasRegularizer:(0,o.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,o.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(t,i),t}}exports.Dense=m,m.className="Dense",t.serialization.registerClass(m);class f extends r.Layer{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=(0,h.getExactlyOneShape)(t);for(const e of t.slice(1))if(null==e)throw new n.ValueError('The shape of the input to "Flatten" is not fully defined '+`(got ${t.slice(1)}). Make sure to pass a complete `+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],(0,u.arrayProd)(t,1)]}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);let t=(0,h.getExactlyOneTensor)(e);if("channelsFirst"===this.dataFormat&&t.rank>1){const e=[0];for(let i=2;i<t.rank;++i)e.push(i);e.push(1),t=t.transpose(e)}return i.batchFlatten(t)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}exports.Flatten=f,f.className="Flatten",t.serialization.registerClass(f);class k extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.activation=(0,e.getActivation)(t.activation)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const t=(0,h.getExactlyOneTensor)(e);return this.activation.apply(t)})}getConfig(){const t={activation:(0,e.serializeActivation)(this.activation)},i=super.getConfig();return Object.assign(t,i),t}}exports.Activation=k,k.className="Activation",t.serialization.registerClass(k);class y extends r.Layer{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(e,s){return(0,t.tidy)(()=>(e=(0,h.getExactlyOneTensor)(e),i.repeat(e,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}exports.RepeatVector=y,y.className="RepeatVector",t.serialization.registerClass(y);class z extends r.Layer{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const i="Total size of new array must be unchanged.",s=e.slice();let r=1,a=null;for(let l=0;l<s.length;++l){const t=s[l];if(this.isUnknown(t)){if(null!==a)throw new n.ValueError("Can only specifiy one unknown dimension.");a=l}else r*=t}const o=(0,u.arrayProd)(t);if(null!==a){if(0===r||o%r!=0)throw new n.ValueError(i);s[a]=o/r}else if(o!==r)throw new n.ValueError(i);return s}computeOutputShape(t){let e=!1;for(let i=0;i<t.length;++i)if(this.isUnknown(t[i])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const t=(0,h.getExactlyOneTensor)(e),s=t.shape,r=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return t.reshape(r)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}exports.Reshape=z,z.className="Reshape",t.serialization.registerClass(z);class b extends r.Layer{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+`${e.dims} instead.`);const i=(0,u.range)(1,e.dims.length+1);if(!t.util.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new r.InputSpec({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return this.dims.forEach((i,s)=>{e[s+1]=t[i]}),e}call(e,i){return(0,t.transpose)((0,h.getExactlyOneTensor)(e),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}exports.Permute=b,b.className="Permute",t.serialization.registerClass(b);class S extends r.Layer{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(e,i){const s=(0,h.getExactlyOneTensor)(e);return(0,t.any)((0,t.notEqual)(s,this.maskValue),-1)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const s=(0,h.getExactlyOneTensor)(e),r=(0,t.any)((0,t.notEqual)(s,this.maskValue),-1,!0);return s.mul(r.asType(s.dtype))})}}exports.Masking=S,S.className="Masking",t.serialization.registerClass(S);
},{"@tensorflow/tfjs-core":"tc6m","../activations":"CJrN","../backend/tfjs_backend":"FQx5","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/generic_utils":"q8Pr","../utils/math_utils":"Rdwq","../utils/types_utils":"KfRc"}],"afyB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Embedding=void 0;var e=require("@tensorflow/tfjs-core"),t=h(require("../backend/tfjs_backend")),i=require("../constraints"),n=require("../engine/topology"),r=require("../errors"),s=require("../initializers"),u=require("../regularizers"),a=h(require("../utils/generic_utils")),l=require("../utils/types_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=r?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,i&&i.set(e,n),n}class p extends n.Layer{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(a.toList(e.inputLength))}this.inputDim=e.inputDim,a.assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=e.outputDim,a.assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,s.getInitializer)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,u.getRegularizer)(e.embeddingsRegularizer),this.activityRegularizer=(0,u.getRegularizer)(e.activityRegularizer),this.embeddingsConstraint=(0,i.getConstraint)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(t,i){return(0,e.tidy)(()=>this.maskZero?(t=(0,l.getExactlyOneTensor)(t),(0,e.notEqual)(t,(0,e.zerosLike)(t))):null)}computeOutputShape(e){if(e=(0,l.getExactlyOneShape)(e),null==this.inputLength)return[...e,this.outputDim];const t=a.toList(this.inputLength);if(t.length!==e.length-1)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);{let i=0;for(let n=0;n<t.length;++n){const s=t[n],u=e[n+1];if(null!=s&&null!=u&&s!==u)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);null==s&&(t[i]=u),i++}}return[e[0],...t,this.outputDim]}call(i,n){return(0,e.tidy)(()=>{this.invokeCallHook(i,n);let e=(0,l.getExactlyOneTensor)(i);return"int32"!==e.dtype&&(e=t.cast(e,"int32")),t.gather(this.embeddings.read(),e.as1D()).reshape((0,l.getExactlyOneShape)(this.computeOutputShape(e.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,s.serializeInitializer)(this.embeddingsInitializer),embeddingsRegularizer:(0,u.serializeRegularizer)(this.embeddingsRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),embeddingsConstraint:(0,i.serializeConstraint)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}exports.Embedding=p,p.className="Embedding",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc"}],"zLch":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=c,exports.multiply=g,exports.average=m,exports.maximum=x,exports.minimum=w,exports.concatenate=k,exports.Dot=exports.Concatenate=exports.Minimum=exports.Maximum=exports.Average=exports.Multiply=exports.Add=exports.Merge=void 0;var e=u(require("@tensorflow/tfjs-core")),t=u(require("../backend/tfjs_backend")),r=require("../engine/topology"),n=require("../errors"),s=require("../losses"),l=u(require("../utils/generic_utils")),a=u(require("../utils/math_utils")),i=require("../utils/types_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=s?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}class h extends r.Layer{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new n.NotImplementedError}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const l=e[e.length-t.length+s],a=t[s];if(null==l||null==a||l<0||a<0)r.push(null);else if(1===l)r.push(a);else if(1===a)r.push(l);else{if(l!==a)throw new n.ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(l)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,i.getExactlyOneShape)(e)]),(e=e).length<2)throw new n.ValueError("A merge layer should be called on an Array of at least 2 inputs."+` Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=l.unique(t)).length>1)throw new n.ValueError("Can not merge tensors with different batch sizes. "+`Got tensors with shapes: ${JSON.stringify(e)}.`);let r=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const t=null==e[n]?null:e[n].slice(1);r=this.computeElementwiseOpOutputShape(r,t)}const s=e.map(e=>e.length);-1===e.indexOf(null)&&1===l.unique(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return(0,e.tidy)(()=>{if(r=r,this.reshapeRequired){const n=[],s=r.map(e=>e.rank);if(-1===s.indexOf(null)){const e=a.max(s);for(let s of r){const r=s.rank;for(let n=0;n<e-r;++n)s=t.expandDims(s,1);n.push(s)}return this.mergeFunction(n)}{let t=!1;for(const i of r){const r=i.rank;if(null==r){const r=i.shape,s=r[0],l=r.slice(1).concat([s]);let o=i.reshape([s].concat(a.arrayProd(r.slice(1))));o=(o=e.transpose(o,[1,0])).reshape(l),n.push(o),t=!0}else if(r>1){const s=a.range(1,r).concat([0]);n.push(e.transpose(i,s)),t=!0}else n.push(i)}let s=this.mergeFunction(n);const l=s.rank;if(t)if(null==l){const t=s.shape,r=t[t.length-1],n=[r].concat(t.slice(0,t.length-1));s=e.transpose(s.reshape([-1,r]),[1,0]).reshape(n)}else if(l>1){const t=[l-1].concat(a.range(0,l-1));s=e.transpose(s,t)}return s}}return this.mergeFunction(r)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let r=[];for(const n of e)null!=n&&null!==n[0]&&r.push(n[0]);return t=1===(r=l.unique(r)).length?r.concat(t):[null].concat(t)}computeMask(t,r){return e.tidy(()=>{if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an Array");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an Array");if(r.length!==t.length)throw new n.ValueError("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+`(${t.length} vs ${r.length})`);if(r.every(e=>null==e))return null;let s=(r=r.map(t=>null==t?t:e.expandDims(t,0)))[0];for(let t=1;t<r.length-1;++t)s=e.logicalAnd(s,r[t]);return s})}}exports.Merge=h;class p extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return r})}}function c(e){if(Array.isArray(e)){return new p({}).apply(e)}return new p(e)}exports.Add=p,p.className="Add",e.serialization.registerClass(p);class f extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.mul(r,t[n]);return r})}}function g(e){if(Array.isArray(e)){return new f({}).apply(e)}return new f(e)}exports.Multiply=f,f.className="Multiply",e.serialization.registerClass(f);class y extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return e.mul(1/t.length,r)})}}function m(e){if(Array.isArray(e)){return new y({}).apply(e)}return new y(e)}exports.Average=y,y.className="Average",e.serialization.registerClass(y);class d extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.maximum(r,t[n]);return r})}}function x(e){if(Array.isArray(e)){return new d({}).apply(e)}return new d(e)}exports.Maximum=d,d.className="Maximum",e.serialization.registerClass(d);class A extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.minimum(r,t[n]);return r})}}function w(e){if(Array.isArray(e)){return new A({}).apply(e)}return new A(e)}exports.Minimum=A,A.className="Minimum",e.serialization.registerClass(A);class b extends h{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new n.ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let r=!0;for(const e of t)if(null!=e){r=!1;break}if(r)return;const s=[];for(let n=0;n<t.length;++n){const r=t[n].slice();r.splice(this.axis,1);let l=!1;for(const t of s)if(e.util.arraysEqual(t,r)){l=!0;break}l||s.push(r)}if(s.length>1)throw new n.ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(r){return(0,e.tidy)(()=>t.concatenate(r,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new n.ValueError("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const n of t.slice(1)){if(null==r[s]||null==n[s]){r[s]=null;break}r[s]+=n[s]}return r}computeMask(t,r){if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an array for Concatenate");if(r.length!==t.length)throw new n.ValueError(`Mismatch in the length of mask (${r.length}) `+`and the legnth of inputs (${t.length})`);return e.tidy(()=>{let n=!0;if(r.forEach(e=>{null==e||(n=!1)}),n)return null;const s=[];for(let a=0;a<t.length;++a)null==r[a]?s.push(e.onesLike(t[a]).asType("bool")):r[a].rank<t[a].rank?s.push(e.expandDims(r[a],-1)):s.push(r[a]);const l=e.concat(s,this.axis);return e.all(l,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function k(e){if(Array.isArray(e)){return new b({}).apply(e)}return new b(e)}function O(e,t){for(;e<0;)e+=t;return e}function E(t,r,s){if(t.shape.length>3||r.shape.length>3)throw new n.NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+`but got ${t.shape.length}`),e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+`but got ${r.shape.length}`),"number"==typeof s&&(s=[s,s]),"complex64"===t.dtype||"complex64"===r.dtype)throw new n.NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const l=t.shape.length,a=r.shape.length;null==s&&(s=[l-1,a-2]);const i=s;return e.tidy(()=>{let e,n;if(l>a){e=l-a;const t=[];for(let r=0;r<e;++r)t.push(1);r=r.reshape(r.shape.concat(t))}else if(a>l){e=a-l;const r=[];for(let t=0;t<e;++t)r.push(1);t=t.reshape(t.shape.concat(r))}else e=0;if(2===t.shape.length&&2===r.shape.length)n=i[0]===i[1]?t.mul(r).sum(i[0]):t.transpose([1,0]).mul(r).sum(i[1]);else{const e=i[0]!==t.shape.length-1,s=i[1]===r.shape.length-1;n=t.matMul(r,e,s)}if(e>0){let t;const r=[];for(let n=t=l>a?l+a-3:l-1;n<t+e;++n)r.push(n);n=n.squeeze(r)}return 1===n.shape.length&&(n=n.expandDims(1)),n})}exports.Concatenate=b,b.className="Concatenate",e.serialization.registerClass(b);class D extends h{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0],s=t[1];if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);if(r[l[0]]!==s[l[1]])throw new n.ValueError("Dimension incompatibility: "+`${r[l[0]]} !== ${s[l[1]]}`)}mergeFunction(e){if(2!==e.length)throw new n.ValueError("A `Dot` layer must be called on exactly 2 inputs, "+`but received ${e.length} input(s).`);let t,r=e[0],l=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,r)=>O(t,e[r].shape.length)):[O(this.axes,r.shape.length),O(this.axes,l.shape.length)],this.normalize&&(r=(0,s.l2Normalize)(r,t[0]),l=(0,s.l2Normalize)(l,t[1])),E(r,l,t)}interpretAxes(e,t){let r;return r=Array.isArray(this.axes)?this.axes:[O(this.axes,e.length),O(this.axes,t.length)]}computeOutputShape(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0].slice(),s=t[1].slice();if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);r.splice(l[0],1),s.splice(l[1],1),s.splice(0,1);const a=r.concat(s);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}exports.Dot=D,D.className="Dot",e.serialization.registerClass(D);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../engine/topology":"aftd","../errors":"xUGZ","../losses":"yMjd","../utils/generic_utils":"q8Pr","../utils/math_utils":"Rdwq","../utils/types_utils":"KfRc"}],"cm1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlphaDropout=exports.GaussianDropout=exports.GaussianNoise=void 0;var t=require("@tensorflow/tfjs-core"),e=n(require("../backend/tfjs_backend")),r=require("../engine/topology"),s=require("../utils/types_utils");function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,r&&r.set(t,s),s}class i extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const t=(0,s.getExactlyOneTensor)(r);return e.inTrainPhase(()=>e.randomNormal(t.shape,0,this.stddev).add(t),()=>t,a.training||!1)})}}exports.GaussianNoise=i,i.className="GaussianNoise",t.serialization.registerClass(i);class o extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const t=(0,s.getExactlyOneTensor)(r);if(this.rate>0&&this.rate<1){const r=()=>{const r=Math.sqrt(this.rate/(1-this.rate));return t.mul(e.randomNormal(t.shape,1,r))};return e.inTrainPhase(r,()=>t,a.training||!1)}return t})}}exports.GaussianDropout=o,o.className="GaussianDropout",t.serialization.registerClass(o);class u extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||(0,s.getExactlyOneTensor)(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(r),i=()=>{const a=(0,s.getExactlyOneTensor)(r),i=-1.7580993408473766;let o=(0,t.greaterEqual)((0,t.randomUniform)(n),this.rate);o=e.cast(o,"float32");const u=((1-this.rate)*(1+this.rate*i**2))**-.5,p=-u*i*this.rate;return a.mul(o).add(o.add(-1).mul(i)).mul(u).add(p)};return e.inTrainPhase(i,()=>(0,s.getExactlyOneTensor)(r),a.training||!1)}return r})}}exports.AlphaDropout=u,u.className="AlphaDropout",t.serialization.registerClass(u);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../engine/topology":"aftd","../utils/types_utils":"KfRc"}],"bah5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormalization=g,exports.normalizeBatchInTraining=z,exports.LayerNormalization=exports.BatchNormalization=void 0;var i=u(require("@tensorflow/tfjs-core")),e=require("../constraints"),t=require("../engine/topology"),a=require("../errors"),r=require("../initializers"),s=require("../regularizers"),n=u(require("../utils/generic_utils")),l=u(require("../utils/math_utils")),o=require("../utils/types_utils");function h(i){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(h=function(i){return i?t:e})(i)}function u(i,e){if(!e&&i&&i.__esModule)return i;if(null===i||"object"!=typeof i&&"function"!=typeof i)return{default:i};var t=h(e);if(t&&t.has(i))return t.get(i);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if("default"!==s&&Object.prototype.hasOwnProperty.call(i,s)){var n=r?Object.getOwnPropertyDescriptor(i,s):null;n&&(n.get||n.set)?Object.defineProperty(a,s,n):a[s]=i[s]}return a.default=i,t&&t.set(i,a),a}function g(e,t,r,s,n,l=.001){let o;if(2===e.rank)o=i.batchNorm2d(e,t,r,s,n,l);else if(3===e.rank)o=i.batchNorm3d(e,t,r,s,n,l);else{if(4!==e.rank)throw new a.NotImplementedError(`batchNormalization is not implemented for array of rank ${e.rank} `+"yet");o=i.batchNorm4d(e,t,r,s,n,l)}return o}function m(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),l=n.mean,o=n.variance;return[g(e,l,o,a,t,s),l,o]})}function c(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),o=n.mean,h=n.variance,u=[];for(const i of l.range(0,e.rank))-1!==r.indexOf(i)?u.push(1):u.push(e.shape[i]);const m=o.reshape(u),c=h.reshape(u),z=null==t?null:t.reshape(u),p=null==a?null:a.reshape(u);return[g(e,m,c,p,z,s),o,h]})}function z(e,t,a,r,s=.001){return i.util.arraysEqual(r.slice().sort(),l.range(0,e.rank-1))?m(e,t,a,r,s):c(e,t,a,r,s)}class p extends t.Layer{constructor(i){null==i&&(i={}),super(i),this.supportsMasking=!0,this.axis=null==i.axis?-1:i.axis,this.momentum=null==i.momentum?.99:i.momentum,this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.movingMeanInitializer=(0,r.getInitializer)(i.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,r.getInitializer)(i.movingVarianceInitializer||"ones"),this.betaConstraint=(0,e.getConstraint)(i.betaConstraint),this.gammaConstraint=(0,e.getConstraint)(i.gammaConstraint),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer)}build(i){i=(0,o.getExactlyOneShape)(i);const e=this.axis>=0?this.axis:this.axis+i.length,r=i[e];if(null==r)throw new a.ValueError(`Axis ${e} of input tensor should have a defined dimension but `+"the layer received an input with shape "+`${JSON.stringify(i)}.`);this.inputSpec=[new t.InputSpec({ndim:i.length,axes:{[e]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,i.tidy)(()=>{const a=null!=t.training&&t.training,r=(0,o.getExactlyOneTensor)(e),s=r.shape,h=s.length,u=l.range(0,h),m=this.axis>=0?this.axis:this.axis+h;u.splice(m,1);const c=n.pyListRepeat(1,h);c[m]=s[m];const p=u.slice();p.sort();const f=!i.util.arraysEqual(p,l.range(0,h).slice(0,h-1));if(!a)return(()=>{if(f){const i=this.movingMean.read().reshape(c),e=this.movingVariance.read().reshape(c),t=this.center?this.beta.read().reshape(c):null,a=this.scale?this.gamma.read().reshape(c):null;return g(r,i,e,t,a,this.epsilon)}return g(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[b,d,x]=z(r,this.gamma.read(),this.beta.read(),u,this.epsilon),I=(e,t,a)=>{i.tidy(()=>{const i=1-a,r=e.read(),s=r.sub(t).mul(i);e.write(r.sub(s))})};return(()=>{I(this.movingMean,d,this.momentum),I(this.movingVariance,x,this.momentum)})(),b})}getConfig(){const i={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),movingMeanInitializer:(0,r.serializeInitializer)(this.movingMeanInitializer),movingVarianceInitializer:(0,r.serializeInitializer)(this.movingVarianceInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer),betaConstraint:(0,e.serializeConstraint)(this.betaConstraint),gammaConstraint:(0,e.serializeConstraint)(this.gammaConstraint)},t=super.getConfig();return Object.assign(i,t),i}}exports.BatchNormalization=p,p.className="BatchNormalization",i.serialization.registerClass(p);class f extends t.Layer{constructor(i){if(null==i&&(i={}),super(i),this.axis=null==i.axis?-1:i.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+`but received ${JSON.stringify(this.axis)}`);for(const i of this.axis)if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+`but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer),this.supportsMasking=!0}build(i){const e=(i=(0,o.getExactlyOneShape)(i)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=e);for(const a of this.axis)if(a<0||a>=e)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==n.unique(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const t=this.axis.map(e=>i[e]);this.scale?this.gamma=this.addWeight("gamma",t,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",t,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){const a=(0,o.getExactlyOneTensor)(e),r=a.shape,s=r.length;return(0,i.tidy)(()=>{let{mean:e,variance:t}=(0,i.moments)(a,this.axis,!0);const l=n.pyListRepeat(1,s);for(const i of this.axis)l[i]=r[i];const o=i=>null!=i&&i.shape.length!==s&&this.axis!==[s-1]?i.reshape(l):i;let h=o(this.gamma.read()),u=o(this.beta.read());const m=[],c=[];for(let i=0;i<s;++i)-1!==this.axis.indexOf(i)?(m.push(r[i]),c.push(1)):(m.push(1),c.push(r[i]));return e=e.tile(m),t=t.tile(m),h=h.tile(c),u=u.tile(c),g(a,e,t,u,h,this.epsilon)})}getConfig(){const i={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer)},e=super.getConfig();return Object.assign(i,e),i}}exports.LayerNormalization=f,f.className="LayerNormalization",i.serialization.registerClass(f);
},{"@tensorflow/tfjs-core":"tc6m","../constraints":"aG05","../engine/topology":"aftd","../errors":"xUGZ","../initializers":"d5hn","../regularizers":"ZgAI","../utils/generic_utils":"q8Pr","../utils/math_utils":"Rdwq","../utils/types_utils":"KfRc"}],"o4HJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.temporalPadding=o,exports.spatial2dPadding=l,exports.ZeroPadding2D=void 0;var e=i(require("@tensorflow/tfjs-core")),t=require("../backend/common"),n=require("../engine/topology"),a=require("../errors"),r=require("../utils/types_utils");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function o(t,n){return(0,e.tidy)(()=>{if(3!==t.rank)throw new a.ValueError("temporalPadding expects input tensor to be 3-D, but received a "+`${t.rank}-D tensor.`);if(null==n&&(n=[1,1]),2!==n.length)throw new a.ValueError("temporalPadding expects input padding pattern to be a length-2 "+`array, but received a length-${n.length} array.`);const r=[[0,0],n,[0,0]];return e.pad(t,r)})}function l(n,r,d){return(0,e.tidy)(()=>{if(4!==n.rank)throw new a.ValueError("temporalPadding expects input tensor to be 4-D, but received a "+`${n.rank}-D tensor.`);if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new a.ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==d&&(d=(0,t.imageDataFormat)()),"channelsLast"!==d&&"channelsFirst"!==d)throw new a.ValueError(`Unknown data format: ${d}. `+"Supported data formats are 'channelsLast' and 'channelsFirst.");let i;return i="channelsFirst"===d?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],e.pad(n,i)})}class p extends n.Layer{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,t.imageDataFormat)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new a.ValueError("ZeroPadding2D expects padding to be a length-2 array, but "+`received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new a.ValueError("ZeroPadding2D expects height padding to be a length-2 array, "+`but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new a.ValueError("ZeroPadding2D expects width padding to be a length-2 array, "+`but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new n.InputSpec({ndim:4})]}computeOutputShape(e){let t,n;return e=(0,r.getExactlyOneShape)(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(t,n){return(0,e.tidy)(()=>l((0,r.getExactlyOneTensor)(t),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.ZeroPadding2D=p,p.className="ZeroPadding2D",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"tc6m","../backend/common":"EXqn","../engine/topology":"aftd","../errors":"xUGZ","../utils/types_utils":"KfRc"}],"foGg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool2d=u,exports.pool3d=g,exports.GlobalMaxPooling2D=exports.GlobalAveragePooling2D=exports.GlobalPooling2D=exports.GlobalMaxPooling1D=exports.GlobalAveragePooling1D=exports.GlobalPooling1D=exports.AveragePooling3D=exports.MaxPooling3D=exports.Pooling3D=exports.AveragePooling2D=exports.MaxPooling2D=exports.Pooling2D=exports.AveragePooling1D=exports.MaxPooling1D=exports.Pooling1D=void 0;var e=c(require("@tensorflow/tfjs-core")),t=require("../backend/common"),s=c(require("../backend/tfjs_backend")),o=require("../common"),i=require("../engine/topology"),r=require("../errors"),a=require("../utils/conv_utils"),n=require("../utils/generic_utils"),l=require("../utils/types_utils"),d=require("./convolutional");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(o,r,a):o[r]=e[r]}return o.default=e,s&&s.set(e,o),o}function u(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv2DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool(s,i,r,c):e.avgPool(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,3,1,2])),p})}function g(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv3DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool3d(s,i,r,c):e.avgPool3d(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,4,1,2,3])),p})}class h extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new r.ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if((0,n.assertPositiveInteger)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new r.ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.strides)}`);this.strides=e.strides}(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);const t=(0,a.convOutputLength)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(t,o){return(0,e.tidy)(()=>{this.invokeCallHook(t,o),t=s.expandDims((0,l.getExactlyOneTensor)(t),2);const i=this.poolingFunction((0,l.getExactlyOneTensor)(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return e.squeeze(i,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling1D=h;class m extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling1D=m,m.className="MaxPooling1D",e.serialization.registerClass(m);class x extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling1D=x,x.className="AveragePooling1D",e.serialization.registerClass(x);class S extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new r.ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s]:[e[0],t,s,e[3]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling2D=S;class P extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling2D=P,P.className="MaxPooling2D",e.serialization.registerClass(P);class y extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling2D=y,y.className="AveragePooling2D",e.serialization.registerClass(y);class v extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new r.ValueError("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:5})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2],o="channelsFirst"===this.dataFormat?e[4]:e[3];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),o=(0,a.convOutputLength)(o,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s,o]:[e[0],t,s,o,e[4]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling3D=v;class z extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"max")}}exports.MaxPooling3D=z,z.className="MaxPooling3D",e.serialization.registerClass(z);class D extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"avg")}}exports.AveragePooling3D=D,D.className="AveragePooling3D",e.serialization.registerClass(D);class F extends i.Layer{constructor(e){super(e),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new r.NotImplementedError}}exports.GlobalPooling1D=F;class f extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.mean(s,1)})}}exports.GlobalAveragePooling1D=f,f.className="GlobalAveragePooling1D",e.serialization.registerClass(f);class b extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.max(s,1)})}}exports.GlobalMaxPooling1D=b,b.className="GlobalMaxPooling1D",e.serialization.registerClass(b);class O extends i.Layer{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new r.NotImplementedError}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.GlobalPooling2D=O;class k extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.mean(s,[1,2]):e.mean(s,[2,3])})}}exports.GlobalAveragePooling2D=k,k.className="GlobalAveragePooling2D",e.serialization.registerClass(k);class M extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.max(s,[1,2]):e.max(s,[2,3])})}}exports.GlobalMaxPooling2D=M,M.className="GlobalMaxPooling2D",e.serialization.registerClass(M);
},{"@tensorflow/tfjs-core":"tc6m","../backend/common":"EXqn","../backend/tfjs_backend":"FQx5","../common":"DKuh","../engine/topology":"aftd","../errors":"xUGZ","../utils/conv_utils":"Qnyq","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc","./convolutional":"W8AA"}],"Dpxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkBidirectionalMergeMode=y,exports.Bidirectional=exports.TimeDistributed=exports.Wrapper=void 0;var e=h(require("@tensorflow/tfjs-core")),t=h(require("../backend/tfjs_backend")),r=require("../common"),a=require("../engine/topology"),i=require("../errors"),s=require("../keras_format/common"),n=h(require("../utils/generic_utils")),l=require("../utils/types_utils"),o=require("./recurrent"),c=require("./serialization");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(a,s,n):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}class d extends a.Layer{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const a=t.layer,i=(0,c.deserialize)(a,r);delete t.layer;const s={layer:i};return Object.assign(s,t),new e(s)}}exports.Wrapper=d;class g extends d{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,l.getExactlyOneShape)(e)).length<3)throw new i.ValueError("TimeDistributed layer expects an input shape >= 3D, but received "+`input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=(0,l.getExactlyOneShape)(e))[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),a=e[1];return[r[0],a].concat(r.slice(1))}call(t,r){return(0,e.tidy)(()=>{t=(0,l.getExactlyOneTensor)(t);return(0,o.rnn)((e,t)=>{return[(0,l.getExactlyOneTensor)(this.layer.call(e,r)),[]]},t,[],!1,null,null,!1,!0)[1]})}}function y(e){n.checkStringTypeUnionValue(s.VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",e)}exports.TimeDistributed=g,g.className="TimeDistributed",e.serialization.registerClass(g);const p="concat";class f extends d{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=(0,c.deserialize)(r),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=(0,c.deserialize)(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?p:e.mergeMode,y(this.mergeMode),e.weights)throw new i.NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t,r,a,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(a=i.slice(1),t=i[0]):t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,r=[t]):r=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?r.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):n.singletonOrArray(r)}apply(e,t){let r=null==t?null:t.initialState,s=null==t?null:t.constants;null==t&&(t={});const n=(0,o.standardizeArgs)(e,r,s,this.numConstants);if(e=n.inputs,r=n.initialState,s=n.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==s)return super.apply(e,t);const l=[],c=[];if(null!=r){const e=r.length;if(e%2>0)throw new i.ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,l.push(...r);const s=r.map(e=>new a.InputSpec({shape:e.shape}));this.forwardLayer.stateSpec=s.slice(0,e/2),this.backwardLayer.stateSpec=s.slice(e/2),c.push(...s)}if(null!=s)throw new i.NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const u=l[0]instanceof a.SymbolicTensor;for(const o of l)if(o instanceof a.SymbolicTensor!==u)throw new i.ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const r=[e].concat(l),a=this.inputSpec.concat(c),i=this.inputSpec;this.inputSpec=a;const s=super.apply(r,t);return this.inputSpec=i,s}return super.apply(e,t)}call(r,a){return(0,e.tidy)(()=>{const i=a.initialState;let s,n,l,o;if(null==i)s=this.forwardLayer.call(r,a),n=this.backwardLayer.call(r,a);else{const e=i.slice(0,i.length/2),t=i.slice(i.length/2);s=this.forwardLayer.call(r,Object.assign(a,{initialState:e})),n=this.backwardLayer.call(r,Object.assign(a,{initialState:t}))}return this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(n.slice(1))),s=s[0],n=n[0]),this.returnSequences&&(n=e.reverse(n,1)),"concat"===this.mergeMode?o=t.concatenate([s,n]):"sum"===this.mergeMode?o=e.add(s,n):"ave"===this.mergeMode?o=e.mul(.5,e.add(s,n)):"mul"===this.mergeMode?o=e.mul(s,n):null==this.mergeMode&&(o=[s,n]),this.returnState?null==this.mergeMode?o.concat(l):[o].concat(l):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,r.nameScope)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,r.nameScope)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let r;if(Array.isArray(t)&&(t=t[0]),r=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(r)?r.concat(e).concat(e):[r].concat(e).concat(e)}return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=(0,c.deserialize)(t.layer);if(delete t.layer,null!=t.numConstants)throw new i.NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=r,new e(a)}}exports.Bidirectional=f,f.className="Bidirectional",e.serialization.registerClass(f);
},{"@tensorflow/tfjs-core":"tc6m","../backend/tfjs_backend":"FQx5","../common":"DKuh","../engine/topology":"aftd","../errors":"xUGZ","../keras_format/common":"L4aa","../utils/generic_utils":"q8Pr","../utils/types_utils":"KfRc","./recurrent":"MQXH","./serialization":"kM5O"}],"qwXy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inputLayer=w,exports.elu=m,exports.reLU=v,exports.leakyReLU=P,exports.prelu=D,exports.softmax=b,exports.thresholdedReLU=y,exports.conv1d=N,exports.conv2d=C,exports.conv2dTranspose=R,exports.conv3d=L,exports.separableConv2d=M,exports.cropping2D=q,exports.upSampling2d=h,exports.depthwiseConv2d=S,exports.activation=A,exports.dense=U,exports.dropout=G,exports.spatialDropout1d=T,exports.flatten=k,exports.repeatVector=z,exports.reshape=_,exports.permute=j,exports.embedding=O,exports.add=B,exports.average=E,exports.concatenate=V,exports.maximum=F,exports.minimum=I,exports.multiply=Z,exports.dot=H,exports.batchNormalization=J,exports.layerNormalization=K,exports.zeroPadding2d=Q,exports.averagePooling1d=W,exports.avgPool1d=X,exports.avgPooling1d=Y,exports.averagePooling2d=$,exports.avgPool2d=ee,exports.avgPooling2d=ne,exports.averagePooling3d=re,exports.avgPool3d=oe,exports.avgPooling3d=te,exports.globalAveragePooling1d=ue,exports.globalAveragePooling2d=ie,exports.globalMaxPooling1d=ae,exports.globalMaxPooling2d=le,exports.maxPooling1d=se,exports.maxPooling2d=pe,exports.maxPooling3d=ce,exports.gru=xe,exports.gruCell=fe,exports.lstm=de,exports.lstmCell=ge,exports.simpleRNN=we,exports.simpleRNNCell=me,exports.convLstm2d=ve,exports.convLstm2dCell=Pe,exports.rnn=De,exports.stackedRNNCells=be,exports.bidirectional=ye,exports.timeDistributed=Ne,exports.gaussianNoise=qe,exports.gaussianDropout=he,exports.alphaDropout=Se,exports.masking=Ae,Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.Layer}}),Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return r.input}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return d.RNN}}),Object.defineProperty(exports,"RNNCell",{enumerable:!0,get:function(){return d.RNNCell}}),exports.maxPool2d=exports.maxPool1d=exports.globalMaxPool2d=exports.globalMaxPool1d=void 0;var e=require("./engine/input_layer"),n=require("./engine/topology"),r=require("./exports"),o=require("./layers/advanced_activations"),t=require("./layers/convolutional"),u=require("./layers/convolutional_depthwise"),i=require("./layers/convolutional_recurrent"),a=require("./layers/core"),l=require("./layers/embeddings"),s=require("./layers/merge"),p=require("./layers/noise"),c=require("./layers/normalization"),x=require("./layers/padding"),f=require("./layers/pooling"),d=require("./layers/recurrent"),g=require("./layers/wrappers");function w(n){return new e.InputLayer(n)}function m(e){return new o.ELU(e)}function v(e){return new o.ReLU(e)}function P(e){return new o.LeakyReLU(e)}function D(e){return new o.PReLU(e)}function b(e){return new o.Softmax(e)}function y(e){return new o.ThresholdedReLU(e)}function N(e){return new t.Conv1D(e)}function C(e){return new t.Conv2D(e)}function R(e){return new t.Conv2DTranspose(e)}function L(e){return new t.Conv3D(e)}function M(e){return new t.SeparableConv2D(e)}function q(e){return new t.Cropping2D(e)}function h(e){return new t.UpSampling2D(e)}function S(e){return new u.DepthwiseConv2D(e)}function A(e){return new a.Activation(e)}function U(e){return new a.Dense(e)}function G(e){return new a.Dropout(e)}function T(e){return new a.SpatialDropout1D(e)}function k(e){return new a.Flatten(e)}function z(e){return new a.RepeatVector(e)}function _(e){return new a.Reshape(e)}function j(e){return new a.Permute(e)}function O(e){return new l.Embedding(e)}function B(e){return new s.Add(e)}function E(e){return new s.Average(e)}function V(e){return new s.Concatenate(e)}function F(e){return new s.Maximum(e)}function I(e){return new s.Minimum(e)}function Z(e){return new s.Multiply(e)}function H(e){return new s.Dot(e)}function J(e){return new c.BatchNormalization(e)}function K(e){return new c.LayerNormalization(e)}function Q(e){return new x.ZeroPadding2D(e)}function W(e){return new f.AveragePooling1D(e)}function X(e){return W(e)}function Y(e){return W(e)}function $(e){return new f.AveragePooling2D(e)}function ee(e){return $(e)}function ne(e){return $(e)}function re(e){return new f.AveragePooling3D(e)}function oe(e){return re(e)}function te(e){return re(e)}function ue(e){return new f.GlobalAveragePooling1D(e)}function ie(e){return new f.GlobalAveragePooling2D(e)}function ae(e){return new f.GlobalMaxPooling1D(e)}function le(e){return new f.GlobalMaxPooling2D(e)}function se(e){return new f.MaxPooling1D(e)}function pe(e){return new f.MaxPooling2D(e)}function ce(e){return new f.MaxPooling3D(e)}function xe(e){return new d.GRU(e)}function fe(e){return new d.GRUCell(e)}function de(e){return new d.LSTM(e)}function ge(e){return new d.LSTMCell(e)}function we(e){return new d.SimpleRNN(e)}function me(e){return new d.SimpleRNNCell(e)}function ve(e){return new i.ConvLSTM2D(e)}function Pe(e){return new i.ConvLSTM2DCell(e)}function De(e){return new d.RNN(e)}function be(e){return new d.StackedRNNCells(e)}function ye(e){return new g.Bidirectional(e)}function Ne(e){return new g.TimeDistributed(e)}const Ce=ae;exports.globalMaxPool1d=Ce;const Re=le;exports.globalMaxPool2d=Re;const Le=se;exports.maxPool1d=Le;const Me=pe;function qe(e){return new p.GaussianNoise(e)}function he(e){return new p.GaussianDropout(e)}function Se(e){return new p.AlphaDropout(e)}function Ae(e){return new a.Masking(e)}exports.maxPool2d=Me;
},{"./engine/input_layer":"jFdK","./engine/topology":"aftd","./exports":"UbkS","./layers/advanced_activations":"jL0W","./layers/convolutional":"W8AA","./layers/convolutional_depthwise":"a4e3","./layers/convolutional_recurrent":"JxkE","./layers/core":"brQp","./layers/embeddings":"afyB","./layers/merge":"zLch","./layers/noise":"cm1M","./layers/normalization":"bah5","./layers/padding":"o4HJ","./layers/pooling":"foGg","./layers/recurrent":"MQXH","./layers/wrappers":"Dpxg"}],"lF0W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryAccuracy=o,exports.binaryCrossentropy=c,exports.sparseCategoricalAccuracy=u,exports.categoricalAccuracy=a,exports.categoricalCrossentropy=i,exports.precision=s,exports.recall=p,exports.cosineProximity=f,exports.meanAbsoluteError=l,exports.meanAbsolutePercentageError=y,exports.MAPE=x,exports.mape=b,exports.meanSquaredError=m,exports.MSE=g,exports.mse=A;var r=n(require("./losses")),e=n(require("./metrics"));function t(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(t=function(r){return r?n:e})(r)}function n(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var n=t(e);if(n&&n.has(r))return n.get(r);var o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=c?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=r[u]}return o.default=r,n&&n.set(r,o),o}function o(r,t){return e.binaryAccuracy(r,t)}function c(r,t){return e.binaryCrossentropy(r,t)}function u(r,t){return e.sparseCategoricalAccuracy(r,t)}function a(r,t){return e.categoricalAccuracy(r,t)}function i(r,t){return e.categoricalCrossentropy(r,t)}function s(r,t){return e.precision(r,t)}function p(r,t){return e.recall(r,t)}function f(e,t){return r.cosineProximity(e,t)}function l(e,t){return r.meanAbsoluteError(e,t)}function y(e,t){return r.meanAbsolutePercentageError(e,t)}function x(e,t){return r.meanAbsolutePercentageError(e,t)}function b(e,t){return r.meanAbsolutePercentageError(e,t)}function m(e,t){return r.meanSquaredError(e,t)}function g(e,t){return r.meanSquaredError(e,t)}function A(e,t){return r.meanSquaredError(e,t)}
},{"./losses":"yMjd","./metrics":"G1Yf"}],"Itru":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"modelFromJSON",{enumerable:!0,get:function(){return e.modelFromJSON}});var e=require("./models");
},{"./models":"MIL4"}],"pq4c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l1l2=n,exports.l1=u,exports.l2=o;var e=t(require("./regularizers"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function t(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var i=o?Object.getOwnPropertyDescriptor(e,f):null;i&&(i.get||i.set)?Object.defineProperty(u,f,i):u[f]=e[f]}return u.default=e,n&&n.set(e,u),u}function n(r){return new e.L1L2(r)}function u(r){return e.l1(r)}function o(r){return e.l2(r)}
},{"./regularizers":"ZgAI"}],"lL4d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.earlyStopping=l,exports.callbacks=exports.EarlyStopping=exports.Callback=void 0;var t=require("./base_callbacks"),e=require("./engine/training"),o=require("./errors"),i=require("./logs");class s extends t.BaseCallback{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof e.LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function n(t,e){return t<e}function r(t,e){return t>e}exports.Callback=s;class a extends s{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new o.NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. `+"Falling back to mode 'auto'."),this.mode="auto"),"min"===this.mode?this.monitorFunc=n:"max"===this.mode?this.monitorFunc=r:-1!==this.monitor.indexOf("acc")?this.monitorFunc=r:this.monitorFunc=n,this.monitorFunc===n&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===n?1/0:-1/0}async onEpochEnd(t,e){await(0,i.resolveScalarsInLogs)(e);const o=this.getMonitorValue(e);null!=o&&(this.monitorFunc(o-this.minDelta,this.best)?(this.best=o,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. `+`Available metrics are: ${Object.keys(t)}`),e}}function l(t){return new a(t)}exports.EarlyStopping=a;const h={earlyStopping:l};exports.callbacks=h;
},{"./base_callbacks":"g9nK","./engine/training":"buug","./errors":"xUGZ","./logs":"STYk"}],"pLvv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CallbackList",{enumerable:!0,get:function(){return u.CallbackList}}),Object.defineProperty(exports,"CustomCallback",{enumerable:!0,get:function(){return u.CustomCallback}}),Object.defineProperty(exports,"History",{enumerable:!0,get:function(){return u.History}}),Object.defineProperty(exports,"Callback",{enumerable:!0,get:function(){return a.Callback}}),Object.defineProperty(exports,"callbacks",{enumerable:!0,get:function(){return a.callbacks}}),Object.defineProperty(exports,"EarlyStopping",{enumerable:!0,get:function(){return a.EarlyStopping}}),Object.defineProperty(exports,"InputSpec",{enumerable:!0,get:function(){return s.InputSpec}}),Object.defineProperty(exports,"SymbolicTensor",{enumerable:!0,get:function(){return s.SymbolicTensor}}),Object.defineProperty(exports,"LayersModel",{enumerable:!0,get:function(){return l.LayersModel}}),Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return p.input}}),Object.defineProperty(exports,"loadLayersModel",{enumerable:!0,get:function(){return p.loadLayersModel}}),Object.defineProperty(exports,"model",{enumerable:!0,get:function(){return p.model}}),Object.defineProperty(exports,"registerCallbackConstructor",{enumerable:!0,get:function(){return p.registerCallbackConstructor}}),Object.defineProperty(exports,"sequential",{enumerable:!0,get:function(){return p.sequential}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return c.RNN}}),Object.defineProperty(exports,"Sequential",{enumerable:!0,get:function(){return b.Sequential}}),Object.defineProperty(exports,"LayerVariable",{enumerable:!0,get:function(){return f.LayerVariable}}),Object.defineProperty(exports,"version_layers",{enumerable:!0,get:function(){return y.version}}),exports.regularizers=exports.models=exports.metrics=exports.layers=exports.initializers=exports.constraints=void 0;var e=x(require("./exports_constraints"));exports.constraints=e;var r=x(require("./exports_initializers"));exports.initializers=r;var t=x(require("./exports_layers"));exports.layers=t;var n=x(require("./exports_metrics"));exports.metrics=n;var o=x(require("./exports_models"));exports.models=o;var i=x(require("./exports_regularizers"));exports.regularizers=i;var u=require("./base_callbacks"),a=require("./callbacks"),s=require("./engine/topology"),l=require("./engine/training"),p=require("./exports"),c=require("./layers/recurrent"),b=require("./models"),f=require("./variables"),y=require("./version");function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function x(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}
},{"./exports_constraints":"wkzF","./exports_initializers":"wDmZ","./exports_layers":"qwXy","./exports_metrics":"lF0W","./exports_models":"Itru","./exports_regularizers":"pq4c","./base_callbacks":"g9nK","./callbacks":"lL4d","./engine/topology":"aftd","./engine/training":"buug","./exports":"UbkS","./layers/recurrent":"MQXH","./models":"MIL4","./variables":"jNTt","./version":"SdA6"}],"pKMt":[function(require,module,exports) {
"use strict";var T,_;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaverDef=exports.DataType=void 0,exports.DataType=T,function(T){T[T.DT_INVALID=0]="DT_INVALID",T[T.DT_FLOAT=1]="DT_FLOAT",T[T.DT_DOUBLE=2]="DT_DOUBLE",T[T.DT_INT32=3]="DT_INT32",T[T.DT_UINT8=4]="DT_UINT8",T[T.DT_INT16=5]="DT_INT16",T[T.DT_INT8=6]="DT_INT8",T[T.DT_STRING=7]="DT_STRING",T[T.DT_COMPLEX64=8]="DT_COMPLEX64",T[T.DT_INT64=9]="DT_INT64",T[T.DT_BOOL=10]="DT_BOOL",T[T.DT_QINT8=11]="DT_QINT8",T[T.DT_QUINT8=12]="DT_QUINT8",T[T.DT_QINT32=13]="DT_QINT32",T[T.DT_BFLOAT16=14]="DT_BFLOAT16",T[T.DT_FLOAT_REF=101]="DT_FLOAT_REF",T[T.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",T[T.DT_INT32_REF=103]="DT_INT32_REF",T[T.DT_UINT8_REF=104]="DT_UINT8_REF",T[T.DT_INT16_REF=105]="DT_INT16_REF",T[T.DT_INT8_REF=106]="DT_INT8_REF",T[T.DT_STRING_REF=107]="DT_STRING_REF",T[T.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",T[T.DT_INT64_REF=109]="DT_INT64_REF",T[T.DT_BOOL_REF=110]="DT_BOOL_REF",T[T.DT_QINT8_REF=111]="DT_QINT8_REF",T[T.DT_QUINT8_REF=112]="DT_QUINT8_REF",T[T.DT_QINT32_REF=113]="DT_QINT32_REF",T[T.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(T||(exports.DataType=T={})),exports.SaverDef=_,function(T){let _;!function(T){T[T.LEGACY=0]="LEGACY",T[T.V1=1]="V1",T[T.V2=2]="V2"}(_=T.CheckpointFormatVersion||(T.CheckpointFormatVersion={}))}(_||(exports.SaverDef=_={}));
},{}],"gQtl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerOp=t,exports.getRegisteredOp=r,exports.deregisterOp=s;const e={};function t(t,r){const s={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:r};e[t]=s}function r(t){return e[t]}function s(t){delete e[t]}
},{}],"w10i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParamValue=e,exports.getTensor=n,exports.getTensorsForCurrentContenxt=r,exports.getNodeNameAndIndex=o,exports.parseNodeName=u,exports.split=i,exports.getPadding=c,exports.cloneTensor=p;var t=require("@tensorflow/tfjs-core");function e(e,r,o,s,u){const i=r.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,c=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return n(r.inputNames[i.inputIndexStart],o,s,u);if("tensors"===i.type){return r.inputNames.slice(e,c).map(t=>n(t,o,s,u))}const p=n(r.inputNames.slice(e)[0],o,s,u),a=p.dataSync();return"number"===i.type?a[0]:t.util.toNestedArray(p.shape,a)}const c=r.attrParams[e];return c&&c.value}function n(t,e,n,r){const[o,i]=u(t);if(null!=r){const t=r.getHashTableHandleByName(o);if(null!=t)return t}const c=n.currentContextIds.find(t=>!!e[s(o,t)]);return void 0!==c?e[s(o,c)][i]:void 0}function r(t,e,n){return e[s(t,n.currentContextId)]}function o(t,e){const[n,r]=u(t);return[s(n,e&&e.currentContextId),r]}function s(t,e){return e?`${t}-${e}`:t}function u(t){const e=t.split(":");return 1===e.length?[t,0]:[e[0],Number(e[e.length-1])]}function i(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function c(t,n,r){let o=e("pad",t,n,r);if("explicit"===o){o=e("explicitPaddings",t,n,r);const s=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)s[t][0]=o[2*t],s[t][1]=o[2*t+1];return s}return o}function p(e){return e.kept?e:(0,t.clone)(e)}
},{"@tensorflow/tfjs-core":"tc6m"}],"cO5O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"a7ub":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"sRrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}];exports.json=e;
},{}],"GT2x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];exports.json=t;
},{}],"A4xH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];exports.json=e;
},{}],"N7t0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"gtBU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];exports.json=t;
},{}],"YWEf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];exports.json=t;
},{}],"IjZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}];exports.json=e;
},{}],"ooyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}];exports.json=e;
},{}],"SvFw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"vBB5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=e;
},{}],"VBGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}];exports.json=t;
},{}],"tqog":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];exports.json=e;
},{}],"N4YI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}];exports.json=e;
},{}],"cAFT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];exports.json=t;
},{}],"Qjst":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];exports.json=t;
},{}],"SpEM":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeBase64=O,exports.parseStringParam=k,exports.getStringParam=A,exports.getBoolParam=q,exports.getNumberParam=V,exports.parseDtypeParam=I,exports.getFuncParam=w,exports.getDtypeParam=j,exports.getDtypeArrayParam=E,exports.parseTensorShapeParam=S,exports.getTensorShapeParam=M,exports.getNumericArrayParam=B,exports.getStringArrayParam=C,exports.getTensorShapeArrayParam=W,exports.getBoolArrayParam=z,exports.OperationMapper=void 0;var a=require("@tensorflow/tfjs-core"),r=P(require("../data/compiled_api")),n=require("./custom_op/register"),s=require("./executors/utils"),u=P(require("./op_list/arithmetic")),o=P(require("./op_list/basic_math")),i=P(require("./op_list/control")),p=P(require("./op_list/convolution")),l=P(require("./op_list/creation")),c=P(require("./op_list/dynamic")),f=P(require("./op_list/evaluation")),d=P(require("./op_list/graph")),m=P(require("./op_list/hash_table")),h=P(require("./op_list/image")),g=P(require("./op_list/logical")),y=P(require("./op_list/matrices")),N=P(require("./op_list/normalization")),b=P(require("./op_list/reduction")),D=P(require("./op_list/slice_join")),_=P(require("./op_list/spectral")),T=P(require("./op_list/transformation"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}class x{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[u,o,i,p,l,c,f,g,h,d,y,N,b,D,_,T,m].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const a=e.node,r=[],n=[],u=[],o=a.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?n.push(e[t.name]):null!=t.input&&0!==t.input.length||u.push(e[t.name]),e),{});let i=[];const p=[];let l={},c={};null!=t&&(l=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const f=Object.keys(o);f.forEach(e=>{const t=o[e];t.inputNames.forEach(e=>{const[a]=(0,s.getNodeNameAndIndex)(e);t.inputs.push(o[a]),o[a].children.push(t)})}),0===Object.keys(c).length?f.forEach(e=>{const t=o[e];0===t.children.length&&p.push(t)}):Object.keys(c).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];null!=a&&(a.signatureKey=c[e],p.push(a))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];a&&(a.signatureKey=l[e],i.push(a))}):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const m={nodes:o,inputs:i,outputs:p,weights:n,placeholders:r,signature:t,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,a)=>(t[e[a].name]=a,t),{})}mapNode(e){const t=(0,n.getRegisteredOp)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const a={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(a.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(a.attrParams=t.attrs.reduce((t,a)=>{const r=a.type;let n=void 0;switch(a.type){case"string":void 0===(n=A(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=A(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":void 0===(n=C(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=C(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(n=V(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(n=V(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(n=B(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=B(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(n=q(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=q(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":void 0===(n=z(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=z(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(n=M(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=M(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":void 0===(n=W(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=W(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(n=j(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=j(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":void 0===(n=E(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=E(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":void 0===(n=w(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=w(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return t[a.name]={value:n,type:r},t},{})),a}mapFunction(e){const t=e.nodeDef,a=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&a.push(e[t.name]),e),{}));const n=[],u=[];e.signature.inputArg.forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e.name),a={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:I(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,n.push(a),r[t]=a}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach(e=>{const[a]=(0,s.getNodeNameAndIndex)(e);t.inputs.push(r[a]),r[a].children.push(t)})});const o=e.ret;e.signature.outputArg.forEach(e=>{const[t,a]=(0,s.getNodeNameAndIndex)(o[e.name]),n=r[t];null!=n&&(n.defaultOutput=a,u.push(n))});const i=this.mapArgsToSignature(e);return{nodes:r,inputs:n,outputs:u,weights:a,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,a)=>(t[a.name]=this.mapArgToTensorInfo(a,e.ret),t),{})}}mapArgToTensorInfo(e,t){let a=e.name;return null!=t&&(a=t[a]),{name:a,dtype:e.type}}}function O(e){const r=(0,a.env)().global;if(void 0!==r.atob)return r.atob(e);if(void 0!==t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function k(e,t){const a=Array.isArray(e)?String.fromCharCode.apply(null,e):O(e);return t?a:a.toLowerCase()}function A(e,t,a,r=!1){const n=e[t];return null!=n?k(n.s,r):a}function q(e,t,a){const r=e[t];return r?r.b:a}function V(e,t,a){const r=e[t]||{},n=null!=r.i?r.i:null!=r.f?r.f:a;return"number"==typeof n?n:parseInt(n,10)}function I(e){switch("string"==typeof e&&(e=r.DataType[e]),e){case r.DataType.DT_FLOAT:return"float32";case r.DataType.DT_INT32:case r.DataType.DT_INT64:case r.DataType.DT_INT8:case r.DataType.DT_UINT8:return"int32";case r.DataType.DT_BOOL:return"bool";case r.DataType.DT_DOUBLE:return"float32";case r.DataType.DT_STRING:return"string";default:return null}}function w(e,t,a){const r=e[t];return r&&r.func?r.func.name:a}function j(e,t,a){const r=e[t];return r&&r.type?I(r.type):a}function E(e,t,a){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>I(e)):a}function S(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function M(e,t,a){const r=e[t];return r&&r.shape?S(r.shape):a}function B(e,t,a){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):a}function C(e,t,a,r=!1){const n=e[t];return n&&n.list&&n.list.s?n.list.s.map(e=>k(e,r)):a}function W(e,t,a){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>S(e)):a}function z(e,t,a){const r=e[t];return r&&r.list&&r.list.b?r.list.b:a}exports.OperationMapper=x;
},{"@tensorflow/tfjs-core":"tc6m","../data/compiled_api":"pKMt","./custom_op/register":"gQtl","./executors/utils":"w10i","./op_list/arithmetic":"cO5O","./op_list/basic_math":"a7ub","./op_list/control":"sRrn","./op_list/convolution":"GT2x","./op_list/creation":"A4xH","./op_list/dynamic":"N7t0","./op_list/evaluation":"gtBU","./op_list/graph":"YWEf","./op_list/hash_table":"IjZC","./op_list/image":"ooyd","./op_list/logical":"SvFw","./op_list/matrices":"vBB5","./op_list/normalization":"VBGq","./op_list/reduction":"tqog","./op_list/slice_join":"N4YI","./op_list/spectral":"cAFT","./op_list/transformation":"Qjst","buffer":"aMB2"}],"lSvz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeValueImpl=void 0;var t=require("../executors/utils"),r=require("../operation_mapper");class e{constructor(t,r,e){this.node=t,this.tensorMap=r,this.context=e,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,r)=>(t[r]=this.getAttr(r),t),{}))}getInput(r){return(0,t.getTensor)(r,this.tensorMap,this.context)}getAttr(e,s){const n=this.node.rawAttrs[e];if(null!=n.tensor)return(0,t.getTensor)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return(0,r.getNumberParam)(this.node.rawAttrs,e,s);if(null!=n.s)return(0,r.getStringParam)(this.node.rawAttrs,e,s);if(null!=n.b)return(0,r.getBoolParam)(this.node.rawAttrs,e,s);if(null!=n.shape)return(0,r.getTensorShapeParam)(this.node.rawAttrs,e,s);if(null!=n.type)return(0,r.getDtypeParam)(this.node.rawAttrs,e,s);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return(0,r.getNumericArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.s)return(0,r.getStringArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.shape)return(0,r.getTensorShapeArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.b)return(0,r.getBoolArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.type)return(0,r.getDtypeArrayParam)(this.node.rawAttrs,e,s)}return s}}exports.NodeValueImpl=e;
},{"../executors/utils":"w10i","../operation_mapper":"SpEM"}],"o43B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ops");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./ops":"R1mJ"}],"IGj9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(u,n,l):u[n]=e[n]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"BiasAdd":case"AddV2":case"Add":return[e.add((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"AddN":return[e.addN((0,a.getParamValue)("tensors",r,t,u))];case"FloorMod":case"Mod":return[e.mod((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Mul":return[e.mul((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"RealDiv":case"Div":return[e.div((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"DivNoNan":return[e.divNoNan((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"FloorDiv":return[e.floorDiv((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Sub":return[e.sub((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Minimum":return[e.minimum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Maximum":return[e.maximum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Pow":return[e.pow((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"SquaredDifference":return[e.squaredDifference((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const o="arithmetic";exports.CATEGORY=o;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"dVEs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=l?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(u,n,s):u[n]=e[n]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"Abs":case"ComplexAbs":return[e.abs((0,a.getParamValue)("x",r,t,u))];case"Acos":return[e.acos((0,a.getParamValue)("x",r,t,u))];case"Acosh":return[e.acosh((0,a.getParamValue)("x",r,t,u))];case"Asin":return[e.asin((0,a.getParamValue)("x",r,t,u))];case"Asinh":return[e.asinh((0,a.getParamValue)("x",r,t,u))];case"Atan":return[e.atan((0,a.getParamValue)("x",r,t,u))];case"Atan2":return[e.atan2((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("y",r,t,u))];case"Atanh":return[e.atanh((0,a.getParamValue)("x",r,t,u))];case"Ceil":return[e.ceil((0,a.getParamValue)("x",r,t,u))];case"Complex":return[e.complex((0,a.getParamValue)("real",r,t,u),(0,a.getParamValue)("imag",r,t,u))];case"Cos":return[e.cos((0,a.getParamValue)("x",r,t,u))];case"Cosh":return[e.cosh((0,a.getParamValue)("x",r,t,u))];case"Elu":return[e.elu((0,a.getParamValue)("x",r,t,u))];case"Erf":return[e.erf((0,a.getParamValue)("x",r,t,u))];case"Exp":return[e.exp((0,a.getParamValue)("x",r,t,u))];case"Expm1":return[e.expm1((0,a.getParamValue)("x",r,t,u))];case"Floor":return[e.floor((0,a.getParamValue)("x",r,t,u))];case"Log":return[e.log((0,a.getParamValue)("x",r,t,u))];case"Log1p":return[e.log1p((0,a.getParamValue)("x",r,t,u))];case"Imag":return[e.imag((0,a.getParamValue)("x",r,t,u))];case"Neg":return[e.neg((0,a.getParamValue)("x",r,t,u))];case"Reciprocal":return[e.reciprocal((0,a.getParamValue)("x",r,t,u))];case"Real":return[e.real((0,a.getParamValue)("x",r,t,u))];case"Relu":return[e.relu((0,a.getParamValue)("x",r,t,u))];case"Round":return[e.round((0,a.getParamValue)("x",r,t,u))];case"Selu":return[e.selu((0,a.getParamValue)("x",r,t,u))];case"Sigmoid":return[e.sigmoid((0,a.getParamValue)("x",r,t,u))];case"Sin":return[e.sin((0,a.getParamValue)("x",r,t,u))];case"Sign":return[e.sign((0,a.getParamValue)("x",r,t,u))];case"Sinh":return[e.sinh((0,a.getParamValue)("x",r,t,u))];case"Softplus":return[e.softplus((0,a.getParamValue)("x",r,t,u))];case"Sqrt":return[e.sqrt((0,a.getParamValue)("x",r,t,u))];case"Square":return[e.square((0,a.getParamValue)("x",r,t,u))];case"Tanh":return[e.tanh((0,a.getParamValue)("x",r,t,u))];case"Tan":return[e.tan((0,a.getParamValue)("x",r,t,u))];case"ClipByValue":return[e.clipByValue((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("clipValueMin",r,t,u),(0,a.getParamValue)("clipValueMax",r,t,u))];case"Relu6":return[e.relu6((0,a.getParamValue)("x",r,t,u))];case"Rsqrt":return[e.rsqrt((0,a.getTensor)(r.inputNames[0],t,u))];case"Prod":return[e.prod((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("axes",r,t,u))];case"LeakyRelu":return[e.leakyRelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"Prelu":return[e.prelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="basic_math";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"QSgK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertShapesMatchAllowUndefinedSize=t,exports.shapesEqualAllowUndefinedSize=r;var e=require("@tensorflow/tfjs-core");function t(t,n,s=""){e.util.assert(r(t,n),()=>s+` Shapes ${t} and ${n} must match`)}function r(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(-1!==e[r]&&-1!==t[r]&&e[r]!==t[r])return!1;return!0}
},{"@tensorflow/tfjs-core":"tc6m"}],"lFaL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorArray=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(t,s,r,i,n,a,h){this.name=t,this.dtype=s,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=n,this.dynamicSize=a,this.clearAfterRead=h,this.tensors=[],this.closed_=!1,this.idTensor=(0,e.scalar)(0),(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(s,r){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(s<0||!this.dynamicSize&&s>=this.maxSize)throw new Error(`Tried to write to index ${s}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[s]||{};if(r.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s},\n          because the value dtype is ${r.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=r.shape),(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${s}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been written.`);i.tensor=r,(0,e.keep)(r),i.written=!0,this.tensors[s]=i}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,s)=>this.write(e,t[s]))}gather(s,r){if(r&&r!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${r}`);if(s)s=s.slice(0,this.size());else{s=[];for(let e=0;e<this.size();e++)s.push(e)}if(0===s.length)return(0,e.tensor)([],[0].concat(this.elementShape));const i=this.readMany(s);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),(0,e.stack)(i,0)}concat(s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${s}`);if(0===this.size())return(0,e.tensor)([],[0].concat(this.elementShape));const r=[];for(let e=0;e<this.size();e++)r.push(e);const i=this.readMany(r);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),(0,e.concat)(i,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,(0,e.unstack)(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let r=0;const i=t.map(e=>r+=e);if(r!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), `+"and the TensorArray is not marked as dynamically resizeable");const n=0===r?0:s.size/r,a=[];(0,e.tidy)(()=>{s=(0,e.reshape)(s,[1,r,n]);for(let r=0;r<t.length;++r){const h=[0,0===r?0:i[r-1],0],o=[1,t[r],n];a[r]=(0,e.reshape)((0,e.slice)(s,h,o),this.elementShape)}return a});const h=[];for(let e=0;e<t.length;e++)h[e]=e;this.writeMany(h,a)}}exports.TensorArray=s;
},{"@tensorflow/tfjs-core":"tc6m","./tensor_utils":"QSgK"}],"txuj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromTensor=n,exports.reserve=r,exports.scatter=i,exports.split=h,exports.TensorList=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(s,n,r,i=-1){this.tensors=s,this.elementShape=n,this.elementDtype=r,null!=s&&s.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(n,s.shape,"TensorList shape mismatch: "),(0,e.keep)(s)}),this.idTensor=(0,e.scalar)(0),this.maxNumElements=i,(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new s([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(s,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);return(0,t.assertShapesMatchAllowUndefinedSize)(s,this.elementShape,"TensorList shape mismatch: "),(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,s));return(0,e.stack)(t,0)})}popBack(s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=this.tensors.pop();return(0,t.assertShapesMatchAllowUndefinedSize)(r.shape,s,"TensorList shape mismatch: "),(0,e.reshape)(r,s)}pushBack(s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if((0,t.assertShapesMatchAllowUndefinedSize)(s.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,e.keep)(s),this.tensors.push(s)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.tensors[e].shape,s,"TensorList shape mismatch: "),this.tensors[e]}setItem(s,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(s<0||-1!==this.maxNumElements&&s>=this.maxNumElements)throw new Error(`Trying to set element ${s} in a list with max ${this.maxNumElements} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n.shape,"TensorList shape mismatch: "),(0,e.keep)(n),this.tensors[s]=n}gather(s,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r,"TensorList shape mismatch: "),0===(s=s.slice(0,this.size())).length?(0,e.tensor)([],[0].concat(this.elementShape)):(0,e.tidy)(()=>{const t=s.map(t=>(0,e.reshape)(this.tensors[t],r));return(0,e.stack)(t,0)})}concat(s,n){if(s&&s!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${s}`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n,"TensorList shape mismatch: "),0===this.size()?(0,e.tensor)([],[0].concat(this.elementShape)):(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,n));return(0,e.concat)(t,0)})}}function n(n,r,i){const h=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==i)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${i}`);const o=n.shape.slice(1);(0,t.assertShapesMatchAllowUndefinedSize)(o,r,"TensorList shape mismatch: ");const a=(0,e.unstack)(n);return new s(a,r,h)}function r(e,t,n){return new s([],e,t,n)}function i(t,n,r,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const h=Math.max(...n);if(null!=i&&-1!==i&&h>=i)throw new Error(`Max index must be < array size (${h}  vs. ${i})`);const o=new s([],r,t.dtype,i),a=(0,e.unstack)(t,0);return n.forEach((e,t)=>{o.setItem(e,a[t])}),o}function h(t,n,r){let i=0;const h=n.map(e=>i+=e);if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${t.shape}`);const o=0===i?0:t.size/i,a=(0,e.tidy)(()=>{const s=[];t=(0,e.reshape)(t,[1,i,o]);for(let i=0;i<n.length;++i){const a=[0,0===i?0:h[i-1],0],l=[1,n[i],o];s[i]=(0,e.reshape)((0,e.slice)(t,a,l),r)}return t.dispose(),s}),l=new s([],r,t.dtype,n.length);for(let e=0;e<a.length;e++)l.setItem(e,a[e]);return l}exports.TensorList=s;
},{"@tensorflow/tfjs-core":"tc6m","./tensor_utils":"QSgK"}],"NqZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../../executor/tensor_array"),t=require("../../executor/tensor_list"),r=require("./utils");const s=async(s,n,o)=>{switch(s.op){case"If":case"StatelessIf":{const e=(0,r.getParamValue)("thenBranch",s,n,o),a=(0,r.getParamValue)("elseBranch",s,n,o),t=(0,r.getParamValue)("cond",s,n,o),i=(0,r.getParamValue)("args",s,n,o);return(await t.data())[0]?o.functionMap[e].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap):o.functionMap[a].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap)}case"While":case"StatelessWhile":{const e=(0,r.getParamValue)("body",s,n,o),a=(0,r.getParamValue)("cond",s,n,o),t=(0,r.getParamValue)("args",s,n,o),i=await o.functionMap[a].executeFunctionAsync(t,o.tensorArrayMap,o.tensorListMap),u=t.map(e=>e.id);let c=await i[0].data();i.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||e.dispose()});let l=t;for(;c[0];){const t=l,r=(l=await o.functionMap[e].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap)).map(e=>e.id);t.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()});const s=await o.functionMap[a].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap);c=await s[0].data(),s.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{const e=(0,r.getParamValue)("pred",s,n,o);return[(0,r.cloneTensor)(e)]}case"Switch":{const e=(0,r.getParamValue)("pred",s,n,o);let a=(0,r.getParamValue)("data",s,n,o);return a.kept||(a=(0,r.cloneTensor)(a)),(await e.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const e=s.inputNames.find(e=>void 0!==(0,r.getTensor)(e,n,o));if(e){const a=(0,r.getTensor)(e,n,o);return[(0,r.cloneTensor)(a)]}return}case"Enter":{const e=(0,r.getParamValue)("frameName",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o);return o.enterFrame(e),[(0,r.cloneTensor)(a)]}case"Exit":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.exitFrame(),[(0,r.cloneTensor)(e)]}case"NextIteration":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.nextIteration(),[(0,r.cloneTensor)(e)]}case"TensorArrayV3":{const t=(0,r.getParamValue)("size",s,n,o),i=(0,r.getParamValue)("dtype",s,n,o),u=(0,r.getParamValue)("elementShape",s,n,o),c=(0,r.getParamValue)("dynamicSize",s,n,o),l=(0,r.getParamValue)("clearAfterRead",s,n,o),m=(0,r.getParamValue)("identicalElementShapes",s,n,o),d=(0,r.getParamValue)("name",s,n,o),g=new a.TensorArray(d,i,t,u,m,c,l);return o.addTensorArray(g),[g.idTensor,(0,e.scalar)(1)]}case"TensorArrayWriteV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.write(a,t),[i.idTensor]}case"TensorArrayReadV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o);return[o.getTensorArray(e.id).read(a)]}case"TensorArrayGatherV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("dtype",s,n,o);return[o.getTensorArray(e.id).gather(a,t)]}case"TensorArrayScatterV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.scatter(a,t),[i.idTensor]}case"TensorArrayConcatV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id),t=(0,r.getParamValue)("dtype",s,n,o);return[a.concat(t)]}case"TensorArraySplitV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=(0,r.getParamValue)("lengths",s,n,o),i=o.getTensorArray(e.id);return i.split(t,a),[i.idTensor]}case"TensorArraySizeV3":{const a=(0,r.getParamValue)("tensorArrayId",s,n,o),t=o.getTensorArray(a.id);return[(0,e.scalar)(t.size(),"int32")]}case"TensorArrayCloseV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorList(e.id);return i.setItem(a,t),[i.idTensor]}case"TensorListGetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).getItem(a,t,i)]}case"TensorListScatterV2":case"TensorListScatter":{const e=(0,r.getParamValue)("indices",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o),u=(0,r.getParamValue)("numElements",s,n,o),c=(0,t.scatter)(a,e,i,u);return o.addTensorList(c),[c.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const e=(0,r.getParamValue)("elementShape",s,n,o),a=(0,r.getParamValue)("elementDType",s,n,o);let i;i="TensorListReserve"===s.op?"numElements":"maxNumElements";const u=(0,r.getParamValue)(i,s,n,o),c=(0,t.reserve)(e,a,u);return o.addTensorList(c),[c.idTensor]}case"TensorListGather":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).gather(a,i,t)]}case"TensorListStack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o),i=(0,r.getParamValue)("numElements",s,n,o);return[o.getTensorList(e.id).stack(a,t,i)]}case"TensorListFromTensor":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o),u=(0,t.fromTensor)(e,a,i);return o.addTensorList(u),[u.idTensor]}case"TensorListConcat":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=o.getTensorList(e.id),t=(0,r.getParamValue)("dtype",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o);return[a.concat(t,i)]}case"TensorListPushBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=o.getTensorList(e.id);return t.pushBack(a),[t.idTensor]}case"TensorListPopBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).popBack(a,t)]}case"TensorListSplit":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("lengths",s,n,o),u=(0,t.split)(e,i,a);return o.addTensorList(u),[u.idTensor]}default:throw TypeError(`Node type ${s.op} is not implemented`)}};exports.executeOp=s;const n="control";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"tc6m","../../executor/tensor_array":"lFaL","../../executor/tensor_list":"txuj","./utils":"w10i"}],"Gr2b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var a=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),e=require("./utils");function t(a){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(t=function(a){return a?r:e})(a)}function r(a,e){if(!e&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var r=t(e);if(r&&r.has(a))return r.get(a);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in a)if("default"!==u&&Object.prototype.hasOwnProperty.call(a,u)){var n=l?Object.getOwnPropertyDescriptor(a,u):null;n&&(n.get||n.set)?Object.defineProperty(o,u,n):o[u]=a[u]}return o.default=a,r&&r.set(a,o),o}function o(a,t,r){const[o,l]=(0,e.getParamValue)("fusedOps",a,t,r),u="biasadd"===o,n="prelu"===l,s="fusedbatchnorm"===o,i=(0,e.getParamValue)("numArgs",a,t,r);if(u){if(n&&2!==i)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!n&&1!==i)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(s)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const d=(0,e.getParamValue)("strides",a,t,r),g=(0,e.getPadding)(a,t,r),m=(0,e.getParamValue)("dataFormat",a,t,r).toUpperCase(),p=(0,e.getParamValue)("dilations",a,t,r),[P,c]=(0,e.getParamValue)("args",a,t,r);return{stride:d,pad:g,dataFormat:m,dilations:p,biasArg:P,preluArg:c,activationFunc:l,leakyreluAlpha:(0,e.getParamValue)("leakyreluAlpha",a,t,r)}}const l=(t,r,l)=>{switch(t.op){case"Conv1D":{const o=(0,e.getParamValue)("stride",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,e.getParamValue)("dilation",t,r,l);return[a.conv1d((0,e.getParamValue)("x",t,r,l),(0,e.getParamValue)("filter",t,r,l),o,u,n,s)]}case"Conv2D":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getPadding)(t,r,l),n=(0,e.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,e.getParamValue)("dilations",t,r,l);return[a.conv2d((0,e.getParamValue)("x",t,r,l),(0,e.getParamValue)("filter",t,r,l),[o[1],o[2]],u,n,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:u,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[a.fused.conv2d({x:(0,e.getParamValue)("x",t,r,l),filter:(0,e.getParamValue)("filter",t,r,l),strides:[u[1],u[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:u,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[a.fused.depthwiseConv2d({x:(0,e.getParamValue)("x",t,r,l),filter:(0,e.getParamValue)("filter",t,r,l),strides:[u[1],u[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=(0,e.getParamValue)("outputShape",t,r,l),u=(0,e.getParamValue)("strides",t,r,l),n=(0,e.getPadding)(t,r,l);return[a.conv2dTranspose((0,e.getParamValue)("x",t,r,l),(0,e.getParamValue)("filter",t,r,l),o,[u[1],u[2]],n)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getPadding)(t,r,l),n=(0,e.getParamValue)("dilations",t,r,l),s=(0,e.getParamValue)("dataFormat",t,r,l).toUpperCase();return[a.depthwiseConv2d((0,e.getParamValue)("input",t,r,l),(0,e.getParamValue)("filter",t,r,l),[o[1],o[2]],u,s,[n[1],n[2]])]}case"Conv3D":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,e.getParamValue)("dilations",t,r,l);return[a.conv3d((0,e.getParamValue)("x",t,r,l),(0,e.getParamValue)("filter",t,r,l),[o[1],o[2],o[3]],u,n,[s[1],s[2],s[3]])]}case"AvgPool":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("kernelSize",t,r,l);return[a.avgPool((0,e.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u)]}case"MaxPool":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("kernelSize",t,r,l);return[a.maxPool((0,e.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u)]}case"MaxPoolWithArgmax":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("kernelSize",t,r,l),s=(0,e.getParamValue)("includeBatchInIndex",t,r,l),{result:i,indexes:d}=a.maxPoolWithArgmax((0,e.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u,s);return[i,d]}case"AvgPool3D":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("kernelSize",t,r,l);return[a.avgPool3d((0,e.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[o[1],o[2],o[3]],u)]}case"MaxPool3D":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("kernelSize",t,r,l);return[a.maxPool3d((0,e.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[o[1],o[2],o[3]],u)]}case"Dilation2D":{const o=(0,e.getParamValue)("strides",t,r,l),u=(0,e.getParamValue)("pad",t,r,l),n=(0,e.getParamValue)("dilations",t,r,l),s=o[1],i=o[2],d=n[1],g=n[2];return[a.dilation2d((0,e.getParamValue)("x",t,r,l),(0,e.getParamValue)("filter",t,r,l),[s,i],u,[d,g],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=l;const u="convolution";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"BxKJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u)=>{switch(t.op){case"Fill":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("dtype",t,r,u),l=(0,a.getParamValue)("value",t,r,u);return[e.fill(n,l,o)]}case"LinSpace":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("num",t,r,u);return[e.linspace(n,o,l)]}case"Multinomial":{const n=(0,a.getParamValue)("logits",t,r,u),o=(0,a.getParamValue)("numSamples",t,r,u),l=(0,a.getParamValue)("seed",t,r,u);return[e.multinomial(n,o,l)]}case"OneHot":{const n=(0,a.getParamValue)("indices",t,r,u),o=(0,a.getParamValue)("depth",t,r,u),l=(0,a.getParamValue)("onValue",t,r,u),s=(0,a.getParamValue)("offValue",t,r,u);return[e.oneHot(n,o,l,s)]}case"Ones":return[e.ones((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"OnesLike":return[e.onesLike((0,a.getParamValue)("x",t,r,u))];case"RandomUniform":return[e.randomUniform((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("minval",t,r,u),(0,a.getParamValue)("maxval",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"Range":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("step",t,r,u);return[e.range(n,o,l,(0,a.getParamValue)("dtype",t,r,u))]}case"TruncatedNormal":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("mean",t,r,u),l=(0,a.getParamValue)("stdDev",t,r,u),s=(0,a.getParamValue)("seed",t,r,u);return[e.truncatedNormal(n,o,l,(0,a.getParamValue)("dtype",t,r,u),s)]}case"Zeros":return[e.zeros((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"ZerosLike":return[e.zerosLike((0,a.getParamValue)("x",t,r,u))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="creation";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"QjK5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=a?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(s,n,u):s[n]=e[n]}return s.default=e,o&&o.set(e,s),s}function s(e,r,o){return{boxes:(0,t.getParamValue)("boxes",e,r,o),scores:(0,t.getParamValue)("scores",e,r,o),maxOutputSize:(0,t.getParamValue)("maxOutputSize",e,r,o),iouThreshold:(0,t.getParamValue)("iouThreshold",e,r,o),scoreThreshold:(0,t.getParamValue)("scoreThreshold",e,r,o),softNmsSigma:(0,t.getParamValue)("softNmsSigma",e,r,o)}}const a=async(r,o,a)=>{switch(r.op){case"NonMaxSuppressionV5":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c,softNmsSigma:p}=s(r,o,a),l=await e.image.nonMaxSuppressionWithScoreAsync(t,n,u,i,c,p);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:n,scores:u,maxOutputSize:i,iouThreshold:c,scoreThreshold:p}=s(r,o,a),l=(0,t.getParamValue)("padToMaxOutputSize",r,o,a),d=await e.image.nonMaxSuppressionPaddedAsync(n,u,i,c,p,l);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c}=s(r,o,a);return[await e.image.nonMaxSuppressionAsync(t,n,u,i,c)]}case"Where":{const s=e.cast((0,t.getParamValue)("condition",r,o,a),"bool"),n=[await e.whereAsync(s)];return s.dispose(),n}case"ListDiff":return e.setdiff1dAsync((0,t.getParamValue)("x",r,o,a),(0,t.getParamValue)("y",r,o,a));default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=a;const n="dynamic";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"AFyh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=a?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,o&&o.set(e,n),n}const n=(r,o,n)=>{switch(r.op){case"TopKV2":{const a=(0,t.getParamValue)("x",r,o,n),u=(0,t.getParamValue)("k",r,o,n),s=(0,t.getParamValue)("sorted",r,o,n),i=e.topk(a,u,s);return[i.values,i.indices]}case"Unique":{const a=(0,t.getParamValue)("x",r,o,n),u=e.unique(a);return[u.values,u.indices]}case"UniqueV2":{const a=(0,t.getParamValue)("x",r,o,n),u=(0,t.getParamValue)("axis",r,o,n),s=e.unique(a,u);return[s.values,s.indices]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const a="evaluation";exports.CATEGORY=a;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"jyBO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}const n=(t,a,n)=>{switch(t.op){case"Const":return a[t.name];case"PlaceholderWithDefault":const o=(0,r.getParamValue)("default",t,a,n);return[(0,r.getTensor)(t.name,a,n)||o];case"Placeholder":return[(0,r.getTensor)(t.name,a,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const e=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(e)]}case"IdentityN":return(0,r.getParamValue)("x",t,a,n).map(e=>(0,r.cloneTensor)(e));case"Snapshot":const s=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(s)];case"Shape":return[e.tensor1d((0,r.getParamValue)("x",t,a,n).shape,"int32")];case"ShapeN":return(0,r.getParamValue)("x",t,a,n).map(r=>e.tensor1d(r.shape));case"Size":return[e.scalar((0,r.getParamValue)("x",t,a,n).size,"int32")];case"Rank":return[e.scalar((0,r.getParamValue)("x",t,a,n).rank,"int32")];case"NoOp":return[e.scalar(1)];case"Print":const u=(0,r.getParamValue)("x",t,a,n),c=(0,r.getParamValue)("data",t,a,n),l=(0,r.getParamValue)("message",t,a,n),p=(0,r.getParamValue)("summarize",t,a,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let e=0;e<c.length;e++)console.log(Array.prototype.slice.call(c[e].dataSync()).slice(0,p));return[u];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=n;const o="graph";exports.CATEGORY="graph";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"GkVb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashTable=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,s){this.keyDType=t,this.valueDType=s,this.handle=(0,e.scalar)(0),this.tensorMap=new Map,(0,e.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,e.tidy)(()=>{const t=(0,e.unstack)(s),n=r.length,a=t.length;e.util.assert(n===a,()=>"The number of elements doesn't match, keys has "+`${n} elements, the values has ${a} `+"elements.");for(let s=0;s<n;s++){const n=r[s],a=t[s];(0,e.keep)(a),this.tensorMap.set(n,a)}return this.handle})}async find(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return(0,e.tidy)(()=>{const t=[];for(let e=0;e<r.length;e++){const n=r[e],a=this.findWithDefault(n,s);t.push(a)}return(0,e.stack)(t)})}findWithDefault(e,t){const s=this.tensorMap.get(e);return null!=s?s:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}exports.HashTable=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"QUYr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("../../executor/hash_table"),a=require("./utils");const t=async(t,r,l,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const o=(0,a.getParamValue)("keyDType",t,r,l),u=(0,a.getParamValue)("valueDType",t,r,l),p=new e.HashTable(o,u);return s.addHashTable(t.name,p),[p.handle]}case"LookupTableImport":case"LookupTableImportV2":{const e=(0,a.getParamValue)("tableHandle",t,r,l,s),o=(0,a.getParamValue)("keys",t,r,l),u=(0,a.getParamValue)("values",t,r,l),p=s.getHashTableById(e.id);return[await p.import(o,u)]}case"LookupTableFind":case"LookupTableFindV2":{const e=(0,a.getParamValue)("tableHandle",t,r,l,s),o=(0,a.getParamValue)("keys",t,r,l),u=(0,a.getParamValue)("defaultValue",t,r,l),p=s.getHashTableById(e.id);return[await p.find(o,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=t;const r="hash_table";exports.CATEGORY=r;
},{"../../executor/hash_table":"GkVb","./utils":"w10i"}],"KNLe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=e[n]}return o.default=e,a&&a.set(e,o),o}const o=(t,a,o)=>{switch(t.op){case"ResizeBilinear":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o),u=(0,r.getParamValue)("halfPixelCenters",t,a,o);return[e.image.resizeBilinear(i,[n[0],n[1]],s,u)]}case"ResizeNearestNeighbor":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o),u=(0,r.getParamValue)("halfPixelCenters",t,a,o);return[e.image.resizeNearestNeighbor(i,[n[0],n[1]],s,u)]}case"CropAndResize":{const i=(0,r.getParamValue)("image",t,a,o),n=(0,r.getParamValue)("boxes",t,a,o),s=(0,r.getParamValue)("boxInd",t,a,o),u=(0,r.getParamValue)("cropSize",t,a,o),l=(0,r.getParamValue)("method",t,a,o),p=(0,r.getParamValue)("extrapolationValue",t,a,o);return[e.image.cropAndResize(i,n,s,u,l,p)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const i="image";exports.CATEGORY="image";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"Ehox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var n=l?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(u,o,n):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"Equal":return[e.equal((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"NotEqual":return[e.notEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Greater":return[e.greater((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"GreaterEqual":return[e.greaterEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Less":return[e.less((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LessEqual":return[e.lessEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalAnd":return[e.logicalAnd((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalNot":return[e.logicalNot((0,a.getParamValue)("a",r,t,u))];case"LogicalOr":return[e.logicalOr((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Select":case"SelectV2":return[e.where((0,a.getParamValue)("condition",r,t,u),(0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="logical";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"lcpM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var u={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var n=s?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(u,o,n):u[o]=e[o]}return u.default=e,r&&r.set(e,u),u}const u=(a,r,u)=>{switch(a.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[e.matMul((0,t.getParamValue)("a",a,r,u),(0,t.getParamValue)("b",a,r,u),(0,t.getParamValue)("transposeA",a,r,u),(0,t.getParamValue)("transposeB",a,r,u))];case"Transpose":return[e.transpose((0,t.getParamValue)("x",a,r,u),(0,t.getParamValue)("perm",a,r,u))];case"_FusedMatMul":const[s,o]=(0,t.getParamValue)("fusedOps",a,r,u),n="biasadd"===s,l="prelu"===o,p=(0,t.getParamValue)("numArgs",a,r,u),i=(0,t.getParamValue)("leakyreluAlpha",a,r,u);if(n){if(l&&2!==p)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&1!==p)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=(0,t.getParamValue)("args",a,r,u);return[e.fused.matMul({a:(0,t.getParamValue)("a",a,r,u),b:(0,t.getParamValue)("b",a,r,u),transposeA:(0,t.getParamValue)("transposeA",a,r,u),transposeB:(0,t.getParamValue)("transposeB",a,r,u),bias:c,activation:o,preluActivationWeights:f,leakyreluAlpha:i})];default:throw TypeError(`Node type ${a.op} is not implemented`)}};exports.executeOp=u;const s="matrices";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"kX2x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=u?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[e.batchNorm((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("mean",t,r,o),(0,a.getParamValue)("variance",t,r,o),(0,a.getParamValue)("offset",t,r,o),(0,a.getParamValue)("scale",t,r,o),(0,a.getParamValue)("epsilon",t,r,o))];case"LRN":return[e.localResponseNormalization((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("radius",t,r,o),(0,a.getParamValue)("bias",t,r,o),(0,a.getParamValue)("alpha",t,r,o),(0,a.getParamValue)("beta",t,r,o))];case"Softmax":return[e.softmax((0,a.getParamValue)("x",t,r,o))];case"LogSoftmax":return[e.logSoftmax((0,a.getParamValue)("x",t,r,o))];case"SparseToDense":return[e.sparseToDense((0,a.getParamValue)("sparseIndices",t,r,o),(0,a.getParamValue)("outputShape",t,r,o),(0,a.getParamValue)("sparseValues",t,r,o),(0,a.getParamValue)("defaultValue",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="normalization";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"qW2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(u,s,o):u[s]=e[s]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u)=>{switch(t.op){case"Max":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.max((0,a.getParamValue)("x",t,r,u),n,s)]}case"Mean":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.mean((0,a.getParamValue)("x",t,r,u),n,s)]}case"Min":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.min((0,a.getParamValue)("x",t,r,u),n,s)]}case"Sum":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.sum((0,a.getParamValue)("x",t,r,u),n,s)]}case"All":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.all((0,a.getParamValue)("x",t,r,u),n,s)]}case"Any":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.any((0,a.getParamValue)("x",t,r,u),n,s)]}case"ArgMax":{const n=(0,a.getParamValue)("axis",t,r,u);return[e.argMax((0,a.getParamValue)("x",t,r,u),n)]}case"ArgMin":{const n=(0,a.getParamValue)("axis",t,r,u);return[e.argMin((0,a.getParamValue)("x",t,r,u),n)]}case"Prod":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.prod((0,a.getParamValue)("x",t,r,u),n,s)]}case"Cumsum":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("exclusive",t,r,u),o=(0,a.getParamValue)("reverse",t,r,u);return[e.cumsum((0,a.getParamValue)("x",t,r,u),n,s,o)]}case"Bincount":const n=(0,a.getParamValue)("x",t,r,u),s=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u);return[e.bincount(n,s,o)];case"DenseBincount":{const n=(0,a.getParamValue)("x",t,r,u),s=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u),l=(0,a.getParamValue)("binaryOutput",t,r,u);return[e.denseBincount(n,s,o,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="reduction";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"Jy49":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=u?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(s,n,l):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}const u=(r,s,u)=>{switch(r.op){case"ConcatV2":case"Concat":{const e=(0,t.getParamValue)("n",r,s,u),n=(0,t.getParamValue)("axis",r,s,u);let l=(0,t.getParamValue)("tensors",r,s,u);return l=l.slice(0,e),[a.concat(l,n)]}case"Gather":{const e=(0,t.getParamValue)("x",r,s,u),n=(0,t.getParamValue)("indices",r,s,u);return[a.gather(e,a.cast(n,"int32"),0)]}case"GatherV2":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("batchDims",r,s,u),l=(0,t.getParamValue)("x",r,s,u),c=(0,t.getParamValue)("indices",r,s,u);return[a.gather(l,a.cast(c,"int32"),e,n)]}case"Reverse":{const e=(0,t.getParamValue)("dims",r,s,u),n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const l=(0,t.getParamValue)("x",r,s,u);return[a.reverse(l,n)]}case"ReverseV2":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("x",r,s,u);return[a.reverse(n,e)]}case"Slice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("size",r,s,u);return[a.slice((0,t.getParamValue)("x",r,s,u),e,n)]}case"StridedSlice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("end",r,s,u),l=(0,t.getParamValue)("strides",r,s,u),c=(0,t.getParamValue)("beginMask",r,s,u),o=(0,t.getParamValue)("endMask",r,s,u),i=(0,t.getParamValue)("ellipsisMask",r,s,u),p=(0,t.getParamValue)("newAxisMask",r,s,u),g=(0,t.getParamValue)("shrinkAxisMask",r,s,u),m=(0,t.getParamValue)("x",r,s,u);return[a.stridedSlice(m,e,n,l,c,o,i,p,g)]}case"Pack":return(0,e.tidy)(()=>{const n=(0,t.getParamValue)("axis",r,s,u),l=(0,t.getParamValue)("tensors",r,s,u),c=l[0].shape,o=a.squeeze(l[0]).shape,i=l.map(t=>{const r=e.util.arraysEqual(t.shape,c);if(!r&&!e.util.arraysEqual(a.squeeze(t).shape,o))throw new Error("the input tensors shape does not match");return r?t:a.reshape(t,c)});return[a.stack(i,n)]});case"Unpack":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("tensor",r,s,u);return a.unstack(n,e)}case"Tile":{const e=(0,t.getParamValue)("reps",r,s,u);return[a.tile((0,t.getParamValue)("x",r,s,u),e)]}case"Split":case"SplitV":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("numOrSizeSplits",r,s,u),l=(0,t.getParamValue)("x",r,s,u);return a.split(l,n,e)}case"ScatterNd":{const e=(0,t.getParamValue)("indices",r,s,u),n=(0,t.getParamValue)("values",r,s,u),l=(0,t.getParamValue)("shape",r,s,u);return[a.scatterND(e,n,l)]}case"GatherNd":{const e=(0,t.getParamValue)("x",r,s,u),n=(0,t.getParamValue)("indices",r,s,u);return[a.gatherND(e,n)]}case"SparseToDense":{const e=(0,t.getParamValue)("sparseIndices",r,s,u),n=(0,t.getParamValue)("outputShape",r,s,u),l=(0,t.getParamValue)("sparseValues",r,s,u),c=(0,t.getParamValue)("defaultValue",r,s,u);return[a.sparseToDense(e,l,n,l.dtype===c.dtype?c:a.cast(c,l.dtype))]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="slice_join";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"tc6m","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"A7QN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,o&&o.set(e,n),n}const n=(r,o,n)=>{switch(r.op){case"FFT":return[e.fft((0,t.getParamValue)("x",r,o,n))];case"IFFT":return[e.ifft((0,t.getParamValue)("x",r,o,n))];case"RFFT":return[e.rfft((0,t.getParamValue)("x",r,o,n))];case"IRFFT":return[e.irfft((0,t.getParamValue)("x",r,o,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const a="spectral";exports.CATEGORY=a;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"oReL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=u?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o)=>{switch(t.op){case"Cast":return[e.cast((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("dtype",t,r,o))];case"ExpandDims":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.expandDims((0,a.getParamValue)("x",t,r,o),u)]}case"Squeeze":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.squeeze((0,a.getParamValue)("x",t,r,o),u)]}case"Reshape":return[e.reshape((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"MirrorPad":return[e.mirrorPad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("mode",t,r,o))];case"PadV2":case"Pad":return[e.pad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("constantValue",t,r,o))];case"SpaceToBatchND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("paddings",t,r,o);return[e.spaceToBatchND((0,a.getParamValue)("x",t,r,o),u,s)]}case"BatchToSpaceND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("crops",t,r,o);return[e.batchToSpaceND((0,a.getParamValue)("x",t,r,o),u,s)]}case"DepthToSpace":{const u=(0,a.getParamValue)("blockSize",t,r,o),s=(0,a.getParamValue)("dataFormat",t,r,o).toUpperCase();return[e.depthToSpace((0,a.getParamValue)("x",t,r,o),u,s)]}case"BroadcastTo":return[e.broadcastTo((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="transformation";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"aGmR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=w;var e=g(require("@tensorflow/tfjs-core")),r=require("./custom_op/node_value_impl"),t=require("./custom_op/register"),u=g(require("./executors/arithmetic_executor")),c=g(require("./executors/basic_math_executor")),o=g(require("./executors/control_executor")),i=g(require("./executors/convolution_executor")),n=g(require("./executors/creation_executor")),s=g(require("./executors/dynamic_executor")),a=g(require("./executors/evaluation_executor")),x=g(require("./executors/graph_executor")),p=g(require("./executors/hash_table_executor")),l=g(require("./executors/image_executor")),d=g(require("./executors/logical_executor")),_=g(require("./executors/matrices_executor")),f=g(require("./executors/normalization_executor")),y=g(require("./executors/reduction_executor")),O=g(require("./executors/slice_join_executor")),m=g(require("./executors/spectral_executor")),q=g(require("./executors/transformation_executor"));function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function g(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h(r);if(t&&t.has(e))return t.get(e);var u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=c?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(u,o,i):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}function w(h,g,w,b){const v=((h,g,w)=>{switch(h.category){case"arithmetic":return e.tidy(()=>u.executeOp(h,g,w));case"basic_math":return e.tidy(()=>c.executeOp(h,g,w));case"control":return o.executeOp(h,g,w);case"convolution":return e.tidy(()=>i.executeOp(h,g,w));case"creation":return e.tidy(()=>n.executeOp(h,g,w));case"dynamic":return s.executeOp(h,g,w);case"evaluation":return e.tidy(()=>a.executeOp(h,g,w));case"image":return e.tidy(()=>l.executeOp(h,g,w));case"graph":return e.tidy(()=>x.executeOp(h,g,w));case"logical":return e.tidy(()=>d.executeOp(h,g,w));case"matrices":return e.tidy(()=>_.executeOp(h,g,w));case"normalization":return e.tidy(()=>f.executeOp(h,g,w));case"reduction":return e.tidy(()=>y.executeOp(h,g,w));case"slice_join":return e.tidy(()=>O.executeOp(h,g,w));case"spectral":return e.tidy(()=>m.executeOp(h,g,w));case"transformation":return e.tidy(()=>q.executeOp(h,g,w));case"hash_table":return p.executeOp(h,g,w,b);case"custom":const v=(0,t.getRegisteredOp)(h.op);if(v&&v.customExecutor)return v.customExecutor(new r.NodeValueImpl(h,g,w));throw TypeError(`Custom op ${h.op} is not registered.`);default:throw TypeError(`Unknown op '${h.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(h,g,w);return e.util.isPromise(v)?v.then(e=>[].concat(e)):[].concat(v)}
},{"@tensorflow/tfjs-core":"tc6m","./custom_op/node_value_impl":"lSvz","./custom_op/register":"gQtl","./executors/arithmetic_executor":"IGj9","./executors/basic_math_executor":"dVEs","./executors/control_executor":"NqZC","./executors/convolution_executor":"Gr2b","./executors/creation_executor":"BxKJ","./executors/dynamic_executor":"QjK5","./executors/evaluation_executor":"AFyh","./executors/graph_executor":"jyBO","./executors/hash_table_executor":"QUYr","./executors/image_executor":"KNLe","./executors/logical_executor":"Ehox","./executors/matrices_executor":"lcpM","./executors/normalization_executor":"kX2x","./executors/reduction_executor":"qW2A","./executors/slice_join_executor":"Jy49","./executors/spectral_executor":"A7QN","./executors/transformation_executor":"oReL"}],"rYIb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExecutionContext=void 0;class t{constructor(t={},e={},s={},n={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=s,this.functionMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const s=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(s))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}exports.ExecutionContext=t;
},{}],"pWc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExecutionSubgraph=n,exports.getNodesInTopologicalOrder=s,exports.isControlFlow=p,exports.isDynamicShape=r,exports.isHashTable=u;var e=require("../operations/executors/utils");function n(n,s,o,t){const a=new Set,i=[];let l=null,h=null;const c=new Set,d=Object.keys(n).map(n=>(0,e.parseNodeName)(n)[0]);let m=[];null!=t&&(m=t.map(n=>(0,e.parseNodeName)(n.name)[0]));const f=[...s];for(;f.length>0;){const e=f.pop();(p(e)||r(e)||u(e))&&null==l&&(h=(l=e).children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==o[e.name]&&(-1===d.indexOf(e.name)&&-1===m.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{c.has(e.name)||(c.add(e.name),f.push(e))}):i.push(e.name)))}return{inputs:n,outputs:s,usedNodes:a,missingInputs:i,dynamicNode:l,syncInputs:h}}function s(n,s,o){const{usedNodes:t,inputs:a}=o,p=[],r=Object.keys(a).map(n=>(0,e.parseNodeName)(n)[0]).map(e=>n.nodes[e]),u=n.initNodes;r.forEach(e=>{t.has(e.name)&&p.push(e)}),n.weights.forEach(e=>{t.has(e.name)&&p.push(e)}),null!=u&&u.forEach(e=>{t.has(e.name)&&p.push(e)});const i=new Set,l=[];for(;p.length>0;){const e=p.pop();i.add(e.name),s[e.name]||l.push(e),e.children.forEach(e=>{!i.has(e.name)&&t.has(e.name)&&e.inputs.every(e=>i.has(e.name))&&p.push(e)})}return l}const o=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],t=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],a=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function p(e){return o.indexOf(e.op)>=0}function r(e){return t.indexOf(e.op)>=0}function u(e){return a.indexOf(e.op)>=0}
},{"../operations/executors/utils":"w10i"}],"X0ED":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GraphExecutor=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../operations/executors/utils"),s=require("../operations/operation_executor"),n=require("./execution_context"),o=require("./model_analysis");class i{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new i(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const s=t.map(t=>t.name).sort(),n=e.map(t=>t.name).sort();return s.join(this.SEPERATOR)+"--"+n.join(this.SEPERATOR)}compile(t,e){const s=(0,o.getExecutionSubgraph)(t,e,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:i,syncInputs:a}=s;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has `+`the dynamic op '${i.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${a}]`);if(n.length>0){const s=e.map(t=>t.name),o=Object.keys(t);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs `+`[${o}]. Missing the following inputs: [${n}]`)}return(0,o.getNodesInTopologicalOrder)(this.graph,this.weightMap,s)}execute(o,i){o=this.mapInputs(o);const a=Object.keys(o).sort();this.checkInputs(o),this.checkInputShapeAndType(o),i=this.mapOutputs(i),this.checkOutputs(i);const r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=i.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const h=this.getCompilationKey(r,p);let c=this.compiledMap.get(h);null==c&&(c=this.compile(o,p),this.compiledMap.set(h,c));const d={},l={};return(0,t.tidy)(()=>{const a=new n.ExecutionContext(this.weightMap,d,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(o).forEach(t=>{const[s,n]=(0,e.parseNodeName)(t),i=[];i[n]=o[t],r[s]=i});const p=this.getFrozenTensorIds(r),h={};for(let e=0;e<c.length;e++){const n=c[e];if(!r[n.name]){const e=(0,s.executeOp)(n,r,a,this._resourceManager);if(t.util.isPromise(e))throw new Error(`The execution of the op '${n.op}' returned a promise. `+"Please use model.executeAsync() instead.");r[n.name]=e,this.checkTensorForDisposal(n.name,n,r,a,p,u,h)}}return null==this.parent&&a.dispose(p),i.map(t=>(0,e.getTensor)(t,r,a))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,s,n,o,i,a,r){"control"!==s.category&&-1===a.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(r[t.id]=(r[t.id]||0)+s.children.length)}),s.inputs.forEach(t=>{if("control"!==t.category){const s=(0,e.getTensorsForCurrentContenxt)(t.name,n,o);null!=s&&s.forEach(t=>{if(t&&!i.has(t.id)){const e=r[t.id];1===e?(t.dispose(),delete r[t.id]):null!=e&&r[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,s,o=!1,i={},a={}){o||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s));const r=new n.ExecutionContext(this.weightMap,i,a,this.functionExecutorMap),u=await this.executeWithControlFlow(t,r,s,o),p=s.map(t=>(0,e.getTensor)(t,u,r)),h=p.map(t=>t.id),c=Object.keys(t).map(e=>t[e].id),d=new Set([...h,...c,...this.weightIds]);return Object.keys(u).forEach(t=>{u[t].forEach(t=>{!t||t.isDisposed||d.has(t.id)||t.dispose()})}),null==this.parent&&r.dispose(d),p}async executeFunctionAsync(t,e,s){const n=t.reduce((t,e,s)=>(t[this.inputs[s].name]=e,t),{});return this._executeAsync(n,this.outputNodes,!0,e,s)}async executeWithControlFlow(t,s,n,i){const a=Object.keys(t),r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=n.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const{usedNodes:h,missingInputs:c,dynamicNode:d,syncInputs:l}=(0,o.getExecutionSubgraph)(t,p,this.weightMap,this._initNodes),m=[...r,...this.graph.weights,...this._initNodes||[]].map(t=>({node:t,contexts:s.currentContext})),g=Object.assign({},this.weightMap);Object.keys(t).forEach(s=>{const[n,o]=(0,e.parseNodeName)(s),i=[];i[o]=t[s],g[n]=i});const y={},f=this.getFrozenTensorIds(g),x={};for(;m.length>0;){const t=this.processStack(r,m,s,g,x,f,u,y,h);await Promise.all(t)}null!=d||i||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=p.filter(t=>!(0,o.isControlFlow)(t)&&!(0,e.getTensor)(t.name,g,s)).map(t=>t.name);if(w.length>0){let t="";throw null!=d&&(t="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${l}]`),new Error(`Cannot compute the outputs [${w}] from the provided `+`inputs [${a}]. Consider providing the following inputs: `+`[${c}]. ${t}`)}return g}processStack(n,o,i,a,r,u,p,h,c){const d=[];for(;o.length>0;){const n=o.pop();i.currentContext=n.contexts;let l="";if("Enter"===n.node.op&&(0,e.getParamValue)("isConstant",n.node,a,i)&&([l]=(0,e.getNodeNameAndIndex)(n.node.name,i)),null==a[n.node.name]){const m=(0,s.executeOp)(n.node,a,i,this._resourceManager);l||([l]=(0,e.getNodeNameAndIndex)(n.node.name,i));const g=i.currentContext;t.util.isPromise(m)?d.push(m.then(t=>(a[l]=t,i.currentContext=g,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c),t))):(a[l]=m,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c))}else this.processChildNodes(n.node,o,i,a,r,c)}return d}processChildNodes(t,s,n,o,i,a){t.children.forEach(t=>{const[r]=(0,e.getNodeNameAndIndex)(t.name,n);!i[r]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(s){Object.keys(s).forEach(n=>{const o=s[n],[i]=(0,e.parseNodeName)(n),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value,s=e.length===o.shape.length&&o.shape.every((t,s)=>-1===e[s]||e[s]===t);t.util.assert(s,()=>`The shape of dict['${a.name}'] provided in `+`model.execute(dict) must be [${e}], but was `+`[${o.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&t.util.assert(o.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in `+"model.execute(dict) must be "+`${a.attrParams.dtype.value}, but was ${o.dtype}`)})}mapInputs(t){const e={};for(const s in t)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[s]){e[this._signature.inputs[s].name]=t[s]}else e[s]=t[s];return e}checkInputs(t){const s=Object.keys(t).filter(t=>{const[s]=(0,e.parseNodeName)(t);return null==this.graph.nodes[s]});if(s.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${s}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]){return this._signature.outputs[t].name}return t},{})}checkOutputs(t){t.forEach(t=>{const[s]=(0,e.parseNodeName)(t);if(!this.graph.nodes[s])throw new Error(`The output '${t}' is not found in the graph`)})}}exports.GraphExecutor=i;
},{"@tensorflow/tfjs-core":"tc6m","../operations/executors/utils":"w10i","../operations/operation_executor":"aGmR","./execution_context":"rYIb","./model_analysis":"pWc7"}],"n3SY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResourceManager=void 0;class e{constructor(e={},a={}){this.hashTableNameToHandle=e,this.hashTableMap=a}addHashTable(e,a){this.hashTableNameToHandle[e]=a.handle,this.hashTableMap[a.id]=a}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}exports.ResourceManager=e;
},{}],"JWGp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadGraphModel=a,exports.GraphModel=exports.DEFAULT_MODEL_NAME=exports.TFHUB_SEARCH_PARAM=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../operations/operation_mapper"),r=require("./graph_executor"),s=require("./resource_manager");const i="?tfjs-format=file";exports.TFHUB_SEARCH_PARAM=i;const n="model.json";exports.DEFAULT_MODEL_NAME=n;class o{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new s.ResourceManager}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=e.io.browserHTTPRequest(t,this.loadOptions);else{const r=e.io.getLoadHandlers(t,this.loadOptions);if(0===r.length)r.push(e.io.browserHTTPRequest(t,this.loadOptions));else if(r.length>1)throw new Error(`Found more than one (${r.length}) load handlers for `+`URL '${[t]}'`);this.handler=r[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(s){this.artifacts=s;const i=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${i.versions.producer}.${i.versions.minConsumer}`;const o=e.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new r.GraphExecutor(t.OperationMapper.Instance.transformGraph(i,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,null!=s.modelInitializer&&null!=s.modelInitializer.node){const e=t.OperationMapper.Instance.transformGraph(s.modelInitializer);this.initializer=new r.GraphExecutor(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(t,r){if("string"==typeof t){const r=e.io.getSaveHandlers(t);if(0===r.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for `+`URL '${t}'`);t=r[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(t){if(!(t instanceof e.Tensor||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,r,s)=>(e[r]=t[s],e),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function a(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}${n}${i}`);const r=new o(e,t);return await r.load(),r}exports.GraphModel=o;
},{"@tensorflow/tfjs-core":"tc6m","../operations/operation_mapper":"SpEM","./graph_executor":"X0ED","./resource_manager":"n3SY"}],"OiNd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GraphModel",{enumerable:!0,get:function(){return e.GraphModel}}),Object.defineProperty(exports,"loadGraphModel",{enumerable:!0,get:function(){return e.loadGraphModel}}),Object.defineProperty(exports,"deregisterOp",{enumerable:!0,get:function(){return r.deregisterOp}}),Object.defineProperty(exports,"registerOp",{enumerable:!0,get:function(){return r.registerOp}}),Object.defineProperty(exports,"version_converter",{enumerable:!0,get:function(){return t.version}});var e=require("./executor/graph_model"),r=require("./operations/custom_op/register"),t=require("./version");
},{"./executor/graph_model":"JWGp","./operations/custom_op/register":"gQtl","./version":"SdA6"}],"vUrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepMap=n,exports.deepZip=u,exports.zipToList=i,exports.deepMapAndAwaitAll=s,exports.isIterable=c,exports.canTensorify=f;var e=t(require("@tensorflow/tfjs-core"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function t(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}function n(e,r){return o(e,r)}function o(e,r,t=new Map,n=new Set){if(null==e)return null;if(n.has(e))throw new Error("Circular references are not supported.");if(t.has(e))return t.get(e);const u=r(e);if(u.recurse&&null!==u.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(u.recurse){if(c(e)){const u=Array.isArray(e)?[]:{};n.add(e);for(const a in e){const i=o(e[a],r,t,n);u[a]=i}return n.delete(e),u}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return t.set(e,u.value),u.value}function u(e,r=i){return a(e,r)}function a(e,r,t=new Set){const n=e[0];if(t.has(n))throw new Error("Circular references are not supported.");const o=r(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(c(n)){const o=Array.isArray(n)?[]:{};t.add(n);for(const u in n){const n=a(e.map(e=>e[u]),r,t);o[u]=n}return t.delete(n),o}throw new Error(`Can't recurse into non-iterable type: ${n}`)}return o.value}function i(e){return null===e?null:c(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function s(r,t){const n=new Map;o(r,t,n);for(const o of Array.from(n.keys())){const r=n.get(o);if(e.util.isPromise(r)){const e=await r;n.set(o,e)}}return o(r,t,n)}function c(r){return null!=r&&!ArrayBuffer.isView(r)&&(Array.isArray(r)||"object"==typeof r&&!(r instanceof e.Tensor))}function f(r){return null==r||l(r)||Array.isArray(r)||"object"==typeof r&&r instanceof e.Tensor||e.util.isTypedArray(r)}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}
},{"@tensorflow/tfjs-core":"tc6m"}],"C2x6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepClone=u;var e=n(require("@tensorflow/tfjs-core")),r=require("./deep_map");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=o?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(u,a,f):u[a]=e[a]}return u.default=e,n&&n.set(e,u),u}function u(e){return(0,r.deepMap)(e,o)}function o(t){return t instanceof e.Tensor?{value:t.clone(),recurse:!1}:(0,r.isIterable)(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
},{"@tensorflow/tfjs-core":"tc6m","./deep_map":"vUrx"}],"pgKh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RingBuffer=void 0;class t{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,i){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=i}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const i of t)this.push(i)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const i=this.wrap(this.begin+t),e=this.get(i);return this.set(i,this.pop()),e}}exports.RingBuffer=t;
},{}],"YaTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrowingRingBuffer=void 0;var e=require("./ring_buffer");class s extends e.RingBuffer{constructor(){super(s.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,s=new Array(e),t=this.length();for(let i=0;i<t;i++)s[i]=this.get(this.wrap(this.begin+i));this.data=s,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=t}}exports.GrowingRingBuffer=s,s.INITIAL_CAPACITY=32;
},{"./ring_buffer":"pgKh"}],"lLdY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iteratorFromItems=l,exports.iteratorFromIncrementing=h,exports.iteratorFromFunction=c,exports.iteratorFromConcatenated=m,exports.iteratorFromConcatenatedFunction=d,exports.iteratorFromZipped=p,exports.ShuffleIterator=exports.PrefetchIterator=exports.ZipMismatchMode=exports.ChainedIterator=exports.OneToManyIterator=exports.LazyIterator=void 0;var t,e=o(require("@tensorflow/tfjs-core")),r=o(require("seedrandom")),s=require("../util/deep_clone"),n=require("../util/deep_map"),a=require("../util/growing_ring_buffer"),i=require("../util/ring_buffer");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=t[a]}return s.default=t,r&&r.set(t,s),s}function l(t){return new x(t)}function h(t){let e=t;return c(()=>({value:e++,done:!1}))}function c(t){return new y(t)}function m(t,e){return new E(t,e)}function d(t,e,r){return m(c(t).take(e),r)}function p(e,r=t.FAIL){return new O(e,r)}class f{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let r=await t.next();for(;!r.done;)e.push(r.value),r=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),r=t(e.value);for(;!e.done&&r;)r=t((e=await this.next()).value)}handleErrors(t){return new M(this,t)}filter(t){return new g(this,t)}map(t){return new F(this,t)}mapAsync(t){return new T(this,t)}serialMapAsync(t){return new T(this,t).serial()}flatmap(t){return new S(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new I(this,t,e)}columnMajorBatch(t,e=!0,r=n.zipToList){return this.rowMajorBatch(t,e).map(t=>(0,n.deepZip)(t,r))}concatenate(t,e){return new E(l([this,t]),e)}take(t){return t<0||null==t?this:new R(this,t)}skip(t){return t<0||null==t?this:new w(this,t)}prefetch(t){return new P(this,t)}shuffle(t,e){return new C(this,t,e)}serial(){return new v(this)}}exports.LazyIterator=f;class x extends f{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:(0,s.deepClone)(t),done:!1}}}class y extends f{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message=`Error thrown while iterating through a dataset: ${t.message}`,t}}}class v extends f{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class w extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;e.dispose(t.value)}return this.upstream.next()}}class R extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class I extends f{constructor(t,e,r=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class g extends f{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;e.dispose(t.value)}}}class F extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class M extends f{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class T extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=await this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class b extends f{constructor(){super(),this.outputQueue=new a.GrowingRingBuffer,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}exports.OneToManyIterator=b;class S extends b{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const t=await this.upstream.next();if(t.done)return!1;const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);this.outputQueue.pushAll(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return!0}}class E extends f{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}exports.ChainedIterator=E,exports.ZipMismatchMode=t,function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(t||(exports.ZipMismatchMode=t={}));class O extends f{constructor(e,r=t.FAIL){super(),this.iterators=e,this.mismatchMode=r,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let r=0,s=0;const a=await(0,n.deepMapAndAwaitAll)(this.iterators,function(t){if(t instanceof f)return{value:t.next().then(t=>(r++,t.done&&s++,t.value)),recurse:!1};return{value:null,recurse:!0}});if(r===s)return{value:null,done:!0};if(s>0)switch(this.mismatchMode){case t.FAIL:throw new Error("Zipped streams should have the same length. "+`Mismatched at element ${this.count}.`);case t.SHORTEST:return{value:null,done:!0};case t.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class P extends f{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new i.RingBuffer(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}exports.PrefetchIterator=P;class C extends P{constructor(t,s,n){super(t,s),this.upstream=t,this.windowSize=s,this.upstreamExhausted=!1,this.random=r.alea(n||e.util.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}exports.ShuffleIterator=C;
},{"@tensorflow/tfjs-core":"tc6m","seedrandom":"Kwju","../util/deep_clone":"C2x6","../util/deep_map":"vUrx","../util/growing_ring_buffer":"YaTB","../util/ring_buffer":"pgKh"}],"ACfY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.datasetFromIteratorFn=o,exports.array=u,exports.zip=l,exports.Dataset=void 0;var t=n(require("@tensorflow/tfjs-core")),e=n(require("seedrandom")),r=require("./iterators/lazy_iterator"),i=require("./util/deep_map");function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=n?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}class a{constructor(){this.size=null}batch(e,r=!0){const i=this;let s;return t.util.assert(e>0,()=>`batchSize needs to be positive, but it is\n      ${e}`),o(async()=>(await i.iterator()).columnMajorBatch(e,r,c),s=this.size===1/0||null==this.size?this.size:r?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(t){const e=this;let r;return o(async()=>(await e.iterator()).concatenate(await t.iterator()),r=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)}filter(e){const r=this;let i;return o(async()=>(await r.iterator()).filter(r=>t.tidy(()=>e(r))),i=this.size===1/0?1/0:null)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(e){const r=this;return o(async()=>(await r.iterator()).map(r=>t.tidy(()=>e(r))),this.size)}mapAsync(t){const e=this;return o(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return o(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let i;return o(async()=>{const i=(0,r.iteratorFromFunction)(async()=>({value:await e.iterator(),done:!1}));return(0,r.iteratorFromConcatenated)(i.take(t))},i=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)}skip(t){const e=this;let r;return o(async()=>(await e.iterator()).skip(t),r=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)}shuffle(r,i,s=!0){if(null==r||r<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+`bufferSize to the dataset size (${this.size} elements)`);const n=this,a=e.alea(i||t.util.now().toString());return o(async()=>{let t=a.int32();return s&&(t+=a.int32()),(await n.iterator()).shuffle(r,t.toString())},this.size)}take(t){const e=this;let r;return o(async()=>(await e.iterator()).take(t),r=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function o(t,e=null){return new class extends a{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function u(t){return o(async()=>(0,r.iteratorFromItems)(t),t.length)}function l(t){if(!(0,i.isIterable)(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let r=0;r<t.length;r++)e=null==e?t[r].size:Math.min(e,t[r].size);else if(t instanceof Object)for(const r in t)e=null==e?t[r].size:Math.min(e,t[r].size);return o(async()=>{const e=await(0,i.deepMapAndAwaitAll)(t,t=>{if(t instanceof a)return{value:t.iterator(),recurse:!1};if((0,i.isIterable)(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return(0,r.iteratorFromZipped)(e,r.ZipMismatchMode.SHORTEST)},e)}function c(t){if(null===t)return null;const e=t[0];if((0,i.canTensorify)(e)){return{value:f(t),recurse:!1}}return{value:null,recurse:!0}}function f(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof t.Tensor?t.stack(e):t.tensor(e)}exports.Dataset=a,a.MAX_BUFFER_SIZE=1e4;
},{"@tensorflow/tfjs-core":"tc6m","seedrandom":"Kwju","./iterators/lazy_iterator":"lLdY","./util/deep_map":"vUrx"}],"GwGr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLineDataset=void 0;var t=require("../dataset");class e extends t.Dataset{constructor(t){super(),this.input=t}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t))}}exports.TextLineDataset=e;
},{"../dataset":"ACfY"}],"KNgR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CSVDataset=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dataset"),s=require("./text_line_dataset");const i='"',l=Symbol("out"),a=Symbol("field"),n=Symbol("quote"),o=Symbol("quoteafterquote"),r=Symbol("quoteinquote");class u extends t.Dataset{constructor(t,i){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new s.TextLineDataset(t),i||(i={}),this.hasHeader=!1!==i.hasHeader,this.fullColumnNames=i.columnNames,this.columnConfigs=i.columnConfigs,this.configuredColumnsOnly=i.configuredColumnsOnly,i.delimWhitespace?(e.util.assert(null==i.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=i.delimiter?i.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&e.util.assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const s=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),i=Object.keys(s).filter(e=>s[e]>1);if(e.util.assert(0===i.length,()=>"Duplicate column names found: "+i.toString()),this.columnConfigs)for(const e of Object.keys(this.columnConfigs)){if(-1===this.fullColumnNames.indexOf(e))throw new Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");const s=t.value;return this.parseRow(s,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){const t=this.parseRow(e),s={},i={};for(let l=0;l<this.fullColumnNames.length;l++){const a=this.fullColumnNames[l],n=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||n){const o=t[l];let r=null;if(""===o)if(n&&void 0!==n.default)r=n.default;else{if(n&&(n.required||n.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);r=void 0}else{const e=Number(o);if(isNaN(e))r=n&&"bool"===n.dtype?this.getBoolean(o):o;else if(n&&n.dtype)switch(n.dtype){case"float32":r=e;break;case"int32":r=Math.floor(e);break;case"bool":r=this.getBoolean(o);break;default:r=e}else r=e}n&&n.isLabel?i[a]=r:s[a]=r}}return 0===Object.keys(i).length?s:{xs:s,ys:i}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const s=[];let u=0;const h=e.length;let m=l;for(let c=0;c<h;c++)switch(m){case l:switch(e.charAt(c)){case i:u=c+1,m=n;break;case this.delimiter:if(u=c+1," "===this.delimiter&&this.delimWhitespace)break;s.push(""),m=l;break;default:m=a,u=c}break;case a:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c)),m=l,u=c+1}break;case n:switch(e.charAt(c)){case i:m=o}break;case o:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c-1)),m=l,u=c+1;break;case i:m=n;break;default:m=r}break;case r:switch(e.charAt(c)){case i:m=n}}if(m===o?s.push(e.substring(u,h-1)):s.push(e.substring(u)),t&&s.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${s}`);return s}}exports.CSVDataset=u;
},{"@tensorflow/tfjs-core":"tc6m","../dataset":"ACfY","./text_line_dataset":"GwGr"}],"VUPY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MicrophoneIterator=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./lazy_iterator");class a extends e.LazyIterator{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between "+`2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if((0,t.env)().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const i=new a(e);return await i.start(),i}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(a){throw new Error(`Error thrown while initializing video stream: ${a.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: "+`Expected: ${this.sampleRateHz}; `+`Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const a=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(a.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(a.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let a=0;return new Promise(i=>{const r=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++a===this.numFrames&&(clearInterval(r),i({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,a=new Float32Array(t.length*e);return t.forEach((t,i)=>a.set(t,i*e)),a}getTensorFromAudioDataArray(e,a){const i=new Float32Array(t.util.sizeFromShape(a));return i.set(e,i.length-e.length),(0,t.tensor)(i,a)}}exports.MicrophoneIterator=a;
},{"@tensorflow/tfjs-core":"tc6m","./lazy_iterator":"lLdY"}],"kZXf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebcamIterator=void 0;var e=require("@tensorflow/tfjs-core"),i=require("./lazy_iterator");class t extends i.LazyIterator{constructor(i,t){if(super(),this.webcamVideoElement=i,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=(0,e.tensor1d)([0],"int32"),this.webcamConfig.centerCrop){const i=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,r=(1-i)/2,s=(1-t)/2,o=r+i,n=t+s;this.cropBox=(0,e.tensor2d)([s,r,n,o],[1,4])}else this.cropBox=(0,e.tensor2d)([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(i,r={}){if((0,e.env)().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!i){if(i=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");i.width=r.resizeWidth,i.height=r.resizeHeight}const s=new t(i,r);return await s.start(),s}async start(){this.webcamConfig.facingMode&&e.util.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. `+"Please provide 'user' or 'environment'");try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(i){throw i.message=`Error thrown while initializing video stream: ${i.message}`,i}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=(()=>{e()})})}async next(){if(this.isClosed)return{value:null,done:!0};let i;try{i=e.browser.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(!this.resize)return{value:i,done:!1};try{return{value:this.cropAndResizeFrame(i),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{i.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(i){return(0,e.tidy)(()=>{const t=i.toFloat().expandDims(0);let r;const s=(r=e.image.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear")).shape;return r.reshape(s.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}exports.WebcamIterator=t;
},{"@tensorflow/tfjs-core":"tc6m","./lazy_iterator":"lLdY"}],"GU1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSource=void 0;class e{}exports.DataSource=e;
},{}],"FTQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringIterator=void 0;var t=require("./lazy_iterator");class r extends t.LazyIterator{split(t){return new e(this,t)}}exports.StringIterator=r;class e extends r{constructor(t,r){super(),this.upstream=t,this.impl=new s(t,r)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class s extends t.OneToManyIterator{constructor(t,r){super(),this.upstream=t,this.separator=r,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const r=t.value.split(this.separator);r[0]=this.carryover+r[0];for(const e of r.slice(0,-1))this.outputQueue.push(e);return this.carryover=r[r.length-1],!0}}
},{"./lazy_iterator":"lLdY"}],"vbRU":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ByteChunkIterator=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./lazy_iterator"),s=require("./string_iterator");class u extends t.LazyIterator{decodeUTF8(){return new o(this)}}exports.ByteChunkIterator=u;class o extends s.StringIterator{constructor(e){super(),this.upstream=e,this.impl=new n(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class n extends t.OneToManyIterator{constructor(e){if(super(),this.upstream=e,(0,r.env)().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=require("string_decoder");this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const t=await this.upstream.next();let s,u;return!t.done&&(s=t.value,u=(0,r.env)().get("IS_BROWSER")?this.decoder.decode(s,{stream:!0}):this.decoder.write(e.from(s.buffer)),this.outputQueue.push(u),!0)}}
},{"@tensorflow/tfjs-core":"tc6m","./lazy_iterator":"lLdY","./string_iterator":"FTQk","string_decoder":"sC8V","buffer":"aMB2"}],"KvOv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileChunkIterator=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./byte_chunk_iterator");class r extends t.ByteChunkIterator{constructor(t,r={}){super(),this.file=t,this.options=r,e.util.assert(t instanceof Uint8Array||!!(0,e.env)().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=r.offset||0,this.chunkSize=r.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise((e,t)=>{const r=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,r)));else{const i=new FileReader;i.onload=(r=>{let n=i.result;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),!(n instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(n)}),i.onabort=(e=>t(new Error("Aborted"))),i.onerror=(e=>t(new Error(e.type)));const n=this.file.slice(this.offset,r);i.readAsArrayBuffer(n)}this.offset=r});return{value:await e,done:!1}}}exports.FileChunkIterator=r;
},{"@tensorflow/tfjs-core":"tc6m","./byte_chunk_iterator":"vbRU"}],"jFK3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.urlChunkIterator=t;var e=require("@tensorflow/tfjs-core"),r=require("./file_chunk_iterator");async function t(t,i={}){let n,a;"string"==typeof t?n=t:(n=t.url,a=o(t));const c=await e.util.fetch(n,a);if(c.ok){const e=new Uint8Array(await c.arrayBuffer());return new r.FileChunkIterator(e,i)}throw new Error(c.statusText)}const o=e=>{return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};
},{"@tensorflow/tfjs-core":"tc6m","./file_chunk_iterator":"KvOv"}],"E5Sd":[function(require,module,exports) {
"use strict";function e(e){return"string"==typeof e&&"file://"===e.substr(0,7)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLocalPath=e;
},{}],"ulKb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileDataSource=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../datasource"),r=require("../iterators/file_chunk_iterator"),i=require("../util/source_util");class s extends t.DataSource{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if((0,i.isLocalPath)(this.input)&&(0,e.env)().get("IS_NODE")){const e=require("fs");this.input=e.readFileSync(this.input.substr(7))}return new r.FileChunkIterator(this.input,this.options)}}exports.FileDataSource=s;
},{"@tensorflow/tfjs-core":"tc6m","../datasource":"GU1X","../iterators/file_chunk_iterator":"KvOv","../util/source_util":"E5Sd","fs":"sC8V"}],"E1bV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLDataSource=void 0;var r=require("../datasource"),e=require("../iterators/url_chunk_iterator"),t=require("../util/source_util"),i=require("./file_data_source");class s extends r.DataSource{constructor(r,e={}){super(),this.url=r,this.fileOptions=e}async iterator(){return(0,t.isLocalPath)(this.url)?new i.FileDataSource(this.url,this.fileOptions).iterator():(0,e.urlChunkIterator)(this.url,this.fileOptions)}}exports.URLDataSource=s;
},{"../datasource":"GU1X","../iterators/url_chunk_iterator":"jFK3","../util/source_util":"E5Sd","./file_data_source":"ulKb"}],"sq6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csv=s,exports.func=c,exports.generator=i,exports.webcam=u,exports.microphone=p;var r=require("./dataset"),e=require("./datasets/csv_dataset"),t=require("./iterators/lazy_iterator"),a=require("./iterators/microphone_iterator"),o=require("./iterators/webcam_iterator"),n=require("./sources/url_data_source");function s(r,t={}){return new e.CSVDataset(new n.URLDataSource(r),t)}function c(e){const a=(0,t.iteratorFromFunction)(e);return(0,r.datasetFromIteratorFn)(async()=>a)}function i(e){return(0,r.datasetFromIteratorFn)(async()=>{const r=await e();return(0,t.iteratorFromFunction)(()=>r.next())})}async function u(r,e){return o.WebcamIterator.create(r,e)}async function p(r){return a.MicrophoneIterator.create(r)}
},{"./dataset":"ACfY","./datasets/csv_dataset":"KNgR","./iterators/lazy_iterator":"lLdY","./iterators/microphone_iterator":"VUPY","./iterators/webcam_iterator":"kZXf","./sources/url_data_source":"E1bV"}],"zesW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"array",{enumerable:!0,get:function(){return e.array}}),Object.defineProperty(exports,"Dataset",{enumerable:!0,get:function(){return e.Dataset}}),Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return e.zip}}),Object.defineProperty(exports,"CSVDataset",{enumerable:!0,get:function(){return r.CSVDataset}}),Object.defineProperty(exports,"TextLineDataset",{enumerable:!0,get:function(){return t.TextLineDataset}}),Object.defineProperty(exports,"csv",{enumerable:!0,get:function(){return n.csv}}),Object.defineProperty(exports,"func",{enumerable:!0,get:function(){return n.func}}),Object.defineProperty(exports,"generator",{enumerable:!0,get:function(){return n.generator}}),Object.defineProperty(exports,"microphone",{enumerable:!0,get:function(){return n.microphone}}),Object.defineProperty(exports,"webcam",{enumerable:!0,get:function(){return n.webcam}}),Object.defineProperty(exports,"FileDataSource",{enumerable:!0,get:function(){return a.FileDataSource}}),Object.defineProperty(exports,"URLDataSource",{enumerable:!0,get:function(){return u.URLDataSource}}),Object.defineProperty(exports,"version_data",{enumerable:!0,get:function(){return o.version}});var e=require("./dataset"),r=require("./datasets/csv_dataset"),t=require("./datasets/text_line_dataset"),n=require("./readers"),a=require("./sources/file_data_source"),u=require("./sources/url_data_source"),o=require("./version");
},{"./dataset":"ACfY","./datasets/csv_dataset":"KNgR","./datasets/text_line_dataset":"GwGr","./readers":"sq6k","./sources/file_data_source":"ulKb","./sources/url_data_source":"E1bV","./version":"SdA6"}],"y22L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=r;var e=require("@tensorflow/tfjs-core");function r(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}
},{"@tensorflow/tfjs-core":"tc6m"}],"cLLj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathBackendCPU=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./cpu_util");const s=e.kernel_impls.whereImpl;class r extends e.KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new e.DataStorage(this,(0,e.engine)())}write(t,s,r){this.firstUse&&(this.firstUse=!1,(0,e.env)().get("IS_NODE")&&e.backend_util.warn("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const a={};return this.data.set(a,{values:t,dtype:r,refCount:1}),a}makeTensorInfo(t,s,r){let a;if("string"===s&&null!=r&&r.length>0&&e.util.isString(r[0])){const n=r.map(t=>e.util.encodeString(t));a=this.write(n,t,s)}else a=this.write(r,t,s);return{dataId:a,shape:t,dtype:s}}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,s,r){this.data.set(e,{values:t,dtype:r,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(t){const{dtype:s,complexTensorInfos:r}=this.data.get(t);if("complex64"===s){const t=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return e.backend_util.mergeRealAndImagArrays(t,s)}return this.data.get(t).values}bufferSync(t){const s=this.readSync(t.dataId);let r=s;if("string"===t.dtype)try{r=s.map(t=>e.util.decodeString(t))}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,e.buffer)(t.shape,t.dtype,r)}makeOutput(t,s,r){const a=this.write(t,s,r);return(0,e.engine)().makeTensorFromDataId(a,s,r,this)}disposeData(e){if(this.data.has(e)){const{complexTensorInfos:t}=this.data.get(e);null!=t&&(this.disposeData(t.real.dataId),this.disposeData(t.imag.dataId)),this.data.delete(e)}}disposeIntermediateTensorInfo(e){const t=e.dataId;if(this.data.has(t)){const e=this.data.get(t);e.refCount--,e.refCount<1&&this.disposeData(t)}}async time(t){const s=e.util.now();return t(),{kernelMs:e.util.now()-s}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){(0,t.assertNotComplex)([e],"where");const r=this.readSync(e.dataId);return s(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}exports.MathBackendCPU=r;
},{"@tensorflow/tfjs-core":"tc6m","./cpu_util":"y22L"}],"EOu3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simpleAbsImpl=s,exports.absConfig=exports.abs=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(e){const t=new Float32Array(e.length);for(let s=0;s<e.length;++s)t[s]=Math.abs(e[s]);return t}const r=r=>{const{x:a}=r.inputs,o=r.backend;(0,t.assertNotComplex)(a,"abs");let n=new Float32Array(e.util.sizeFromShape(a.shape));return n=s(o.data.get(a.dataId).values),o.makeOutput(n,a.shape,"float32")};exports.abs=r;const a={kernelName:e.Abs,backendName:"cpu",kernelFunc:r};exports.absConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"iqlH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleBinaryKernelImpl=t;var e=require("@tensorflow/tfjs-core");function t(t){return(l,r,o,n,i)=>{const c=e.backend_util.assertAndGetBroadcastShape(l,r),s=c.length,u=e.util.computeStrides(c),a=e.util.sizeFromShape(c),d=e.util.getTypedArrayFromDType(i,a),h=l.length,g=r.length,p=e.util.computeStrides(l),f=e.util.computeStrides(r),m=e.backend_util.getBroadcastDims(l,c),S=e.backend_util.getBroadcastDims(r,c);if(m.length+S.length===0)for(let e=0;e<d.length;++e)d[e]=t(o[e%o.length],n[e%n.length]);else for(let x=0;x<d.length;++x){const l=e.util.indexToLoc(x,s,u),r=l.slice(-h);m.forEach(e=>r[e]=0);const i=e.util.locToIndex(r,h,p),c=l.slice(-g);S.forEach(e=>c[e]=0);const a=e.util.locToIndex(c,g,f);d[x]=t(o[i],n[a])}return[d,c]}}
},{"@tensorflow/tfjs-core":"tc6m"}],"mGbr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=a,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core");function a(e){const{inputs:a,backend:o}=e,{real:t,imag:n}=a,r=o.data.get(t.dataId).values,s=o.data.get(n.dataId).values,l=o.makeTensorInfo(t.shape,"complex64");return o.data.get(l.dataId).complexTensorInfos={real:o.makeTensorInfo(t.shape,"float32",r),imag:o.makeTensorInfo(n.shape,"float32",s)},l}const o={kernelName:e.Complex,backendName:"cpu",kernelFunc:a};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"j6Wu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=o;var e=require("@tensorflow/tfjs-core"),r=require("../kernels/Complex");function o(t,s,l="float32"){if("complex64"===l){const e=o(t,s,"float32"),l=o(t,s,"float32");return(0,r.complex)({inputs:{real:e,imag:l},backend:t})}const n=e.util.makeZerosTypedArray(e.util.sizeFromShape(s),l);return t.makeTensorInfo(s,l,n)}
},{"@tensorflow/tfjs-core":"tc6m","../kernels/Complex":"mGbr"}],"Fyri":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"cpu",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"M7V4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=t,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:r}=t,n=a.data.get(r.dataId).complexTensorInfos.real,o=a.data.get(n.dataId).values;return a.makeTensorInfo(n.shape,n.dtype,o)}const a={kernelName:e.Real,backendName:"cpu",kernelFunc:t};exports.realConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"qg0y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=o,exports.castConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/binary_impl"),r=require("../utils/zeros_impl"),n=require("./Complex"),a=require("./Identity"),s=require("./Real");function o(i){const{inputs:d,backend:p,attrs:u}=i,{x:c}=d,{dtype:l}=u;if("complex64"===l){if("complex64"===c.dtype)return(0,a.identity)({inputs:{x:c},backend:p});const e=(0,r.zeros)(p,c.shape,c.dtype),t=o({inputs:{x:c},backend:p,attrs:{dtype:"float32"}}),s=(0,n.complex)({inputs:{real:t,imag:e},backend:p});return p.disposeIntermediateTensorInfo(e),p.disposeIntermediateTensorInfo(t),s}if("complex64"===c.dtype){const e=(0,s.real)({inputs:{input:c},backend:p}),t=o({inputs:{x:e},backend:p,attrs:{dtype:l}});return p.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(c.dtype,l)){const e=(0,a.identity)({inputs:{x:c},backend:p});return{dataId:e.dataId,shape:e.shape,dtype:l}}if("int32"===l){const e=p.data.get(c.dataId).values,t=Int32Array.from(e);return p.makeTensorInfo(c.shape,"int32",t)}if("bool"===l){const r=p.data.get(c.dataId).values,n=e.util.toTypedArray([0],c.dtype),[a,s]=(0,t.createSimpleBinaryKernelImpl)((e,t)=>e!==t?1:0)(c.shape,[],r,n,"bool");return p.makeTensorInfo(s,"bool",a)}throw new Error(`Error in Cast: failed to cast ${c.dtype} to ${l}`)}const i={kernelName:e.Cast,backendName:"cpu",kernelFunc:o};exports.castConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/zeros_impl":"j6Wu","./Complex":"mGbr","./Identity":"Fyri","./Real":"M7V4"}],"R0y1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryKernelFunc=s,exports.createComplexBinaryKernelImpl=o;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("../kernels/Cast"),n=require("../kernels/Complex");function s(e,s,o,r){return null==o?({inputs:a,backend:n})=>{const{a:o,b:l}=a,d=n;(0,t.assertNotComplex)([o,l],e);const i=d.data.get(o.dataId).values,c=d.data.get(l.dataId).values,u=r||o.dtype,[p,m]=s(o.shape,l.shape,i,c,u);return d.makeTensorInfo(m,u,p)}:({inputs:e,backend:t})=>{const{a:l,b:d}=e,i=t;if("complex64"===l.dtype||"complex64"===d.dtype){const e=(0,a.cast)({inputs:{x:l},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),s=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,c=i.data.get(s.dataId).values,u=i.data.get(r.dataId).values,p=(0,a.cast)({inputs:{x:d},backend:i,attrs:{dtype:"complex64"}}),m=i.data.get(p.dataId),g=m.complexTensorInfos.real,I=m.complexTensorInfos.imag,f=i.data.get(g.dataId).values,x=i.data.get(I.dataId).values,[h,T,y]=o(l.shape,d.shape,c,u,f,x),k=i.makeTensorInfo(y,"float32",h),b=i.makeTensorInfo(y,"float32",T),v=(0,n.complex)({inputs:{real:k,imag:b},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(b),v}{const e=i.data.get(l.dataId).values,t=i.data.get(d.dataId).values,a=r||l.dtype,[n,o]=s(l.shape,d.shape,e,t,a);return i.makeTensorInfo(o,a,n)}}}function o(t){return(a,n,s,o,r,l)=>{const d=e.backend_util.assertAndGetBroadcastShape(a,n),i=e.util.sizeFromShape(d),c=d.length,u=e.util.computeStrides(d),p=e.util.getTypedArrayFromDType("float32",i),m=e.util.getTypedArrayFromDType("float32",i),g=e.backend_util.getBroadcastDims(a,d),I=e.backend_util.getBroadcastDims(n,d),f=e.backend_util.mergeRealAndImagArrays(s,o),x=e.backend_util.mergeRealAndImagArrays(r,l),h=a.length,T=e.util.computeStrides(a),y=n.length,k=e.util.computeStrides(n);if(g.length+I.length===0)for(let e=0;e<p.length;e++){const a=e%f.length,n=e%x.length,s=t(f[2*a],f[2*a+1],x[2*n],x[2*n+1]);p[e]=s.real,m[e]=s.imag}else for(let b=0;b<p.length;b++){const a=e.util.indexToLoc(b,c,u),n=a.slice(-h);g.forEach(e=>n[e]=0);const s=e.util.locToIndex(n,h,T),o=a.slice(-y);I.forEach(e=>o[e]=0);const r=e.util.locToIndex(o,y,k),l=t(f[2*s],f[2*s+1],x[2*r],x[2*r+1]);p[b]=l.real,m[b]=l.imag}return[p,m,d]}}
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../kernels/Cast":"qg0y","../kernels/Complex":"mGbr"}],"aUQi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addConfig=exports.add=exports.addComplexImpl=exports.addImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),d=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e+r);exports.addImpl=o;const t=(0,d.createComplexBinaryKernelImpl)((e,r,d,o)=>({real:e+d,imag:r+o}));exports.addComplexImpl=t;const l=(0,d.binaryKernelFunc)(e.Add,o,t);exports.add=l;const a={kernelName:e.Add,backendName:"cpu",kernelFunc:l};exports.addConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"LNa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincountImpl=t,exports.bincountReduceImpl=r;var e=require("@tensorflow/tfjs-core");function t(t,r,n,o,s){const u=e.util.sizeFromShape(o),i=e.util.makeZerosTypedArray(s,n);for(let e=0;e<t.length;e++){const n=t[e];if(n<0)throw new Error("Input x must be non-negative!");n>=s||(i[n]+=u>0?r[e]:1)}return i}function r(t,r,n,o=!1){const s=t.shape[0],u=t.shape[1],i=(0,e.buffer)([s,n],r.dtype);for(let e=0;e<s;e++)for(let s=0;s<u;s++){const u=t.get(e,s);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(o?i.set(1,e,u):r.size>0?i.set(i.get(e,u)+r.get(e,s),e,u):i.set(i.get(e,u)+1,e,u))}return i}
},{"@tensorflow/tfjs-core":"tc6m"}],"CDgT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleUnaryImpl=r;var e=require("@tensorflow/tfjs-core");function r(r){return(t,o,n)=>{const l=e.util.getTypedArrayFromDType(o,t.length);for(let e=0;e<t.length;++e)l[e]=r(t[e],n);return l}}
},{"@tensorflow/tfjs-core":"tc6m"}],"uG3T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=r,exports.unaryKernelFuncFromImpl=n;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function r(r,n,o){return({inputs:s,attrs:u,backend:a})=>{const{x:p}=s;if((0,e.assertNotComplex)(p,r),"string"===p.dtype||"string"===o)throw new Error("unaryKernelFunc does not support string input/output");const i=a,c=i.data.get(p.dataId).values,d=t.util.sizeFromShape(p.shape),l=o||p.dtype,y=t.util.getArrayFromDType(l,d);for(let t=0;t<d;++t)y[t]=n(c[t],u);return i.makeTensorInfo(p.shape,l,y)}}function n(t,r,n){return({inputs:o,attrs:s,backend:u})=>{const{x:a}=o;if((0,e.assertNotComplex)(a,t),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const p=u,i=p.data.get(a.dataId).values,c=n||a.dtype,d=r(i,c,s);return p.makeTensorInfo(a.shape,c,d)}}
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"RbeZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=exports.ceil=exports.ceilImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),l=require("../utils/unary_utils");const i=(0,r.createSimpleUnaryImpl)(e=>Math.ceil(e));exports.ceilImpl=i;const t=(0,l.unaryKernelFuncFromImpl)(e.Ceil,i);exports.ceil=t;const o={kernelName:e.Ceil,backendName:"cpu",kernelFunc:t};exports.ceilConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"m9me":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,s,o){const a=e.util.getArrayFromDType(s,e.util.sizeFromShape(r));if(o&&"string"!==s){let r=0;t.forEach(t=>{const s=e.util.sizeFromShape(t.shape);a.set(t.vals,r),r+=s})}else{let o=0;t.forEach(t=>{const l="string"===s?e.backend_util.fromUint8ToStringArray(t.vals):t.vals;let i=0;for(let e=0;e<t.shape[0];++e){const s=e*r[1]+o;for(let e=0;e<t.shape[1];++e)a[s+e]=l[i++]}o+=t.shape[1]})}return a}
},{"@tensorflow/tfjs-core":"tc6m"}],"RWap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=exports.exp=exports.expImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.exp(e));exports.expImpl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Exp,t);exports.exp=o;const s={kernelName:e.Exp,backendName:"cpu",kernelFunc:o};exports.expConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"KHQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Config=exports.expm1=exports.expm1Impl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.expm1(e));exports.expm1Impl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Expm1,t);exports.expm1=o;const m={kernelName:e.Expm1,backendName:"cpu",kernelFunc:o};exports.expm1Config=m;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"W4sW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=exports.floor=exports.floorImpl=void 0;var o=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),e=require("../utils/unary_utils");const l=(0,r.createSimpleUnaryImpl)(o=>Math.floor(o));exports.floorImpl=l;const t=(0,e.unaryKernelFuncFromImpl)(o.Floor,l);exports.floor=t;const s={kernelName:o.Floor,backendName:"cpu",kernelFunc:t};exports.floorConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"cCTc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2Impl=o;var e=require("@tensorflow/tfjs-core");function o(o,t,r){const s=(0,e.buffer)(r,o.dtype);for(let e=0;e<s.size;++e){const r=s.indexToLoc(e).slice(),c=r[0],l=r[2],n=t.locToIndex([c,l]);r[2]=t.values[n];const u=o.locToIndex(r);s.values[e]=o.values[u]}return s}
},{"@tensorflow/tfjs-core":"tc6m"}],"dYhv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterConfig=exports.greater=exports.greaterImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>r?1:0);exports.greaterImpl=o;const n=(0,t.binaryKernelFunc)(e.Greater,o,null,"bool");exports.greater=n;const a={kernelName:e.Greater,backendName:"cpu",kernelFunc:n};exports.greaterConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"ZgLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessConfig=exports.less=exports.lessImpl=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),r=require("../utils/binary_utils");const l=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<s?1:0);exports.lessImpl=l;const o=(0,r.binaryKernelFunc)(e.Less,l,null,"bool");exports.less=o;const t={kernelName:e.Less,backendName:"cpu",kernelFunc:o};exports.lessConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"bxs4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpaceImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o){const l=(t-r)/(o-1),s=e.util.makeZerosTypedArray(o,"float32");s[0]=r;for(let e=1;e<s.length;e++)s[e]=s[e-1]+l;return s}
},{"@tensorflow/tfjs-core":"tc6m"}],"F40R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=exports.log=exports.logImpl=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_impl"),r=require("../utils/unary_utils");const l=(0,o.createSimpleUnaryImpl)(e=>Math.log(e));exports.logImpl=l;const t=(0,r.unaryKernelFuncFromImpl)(e.Log,l);exports.log=t;const s={kernelName:e.Log,backendName:"cpu",kernelFunc:t};exports.logConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"tYJo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const l=e.util.getTypedArrayFromDType(s,e.util.sizeFromShape(o));for(let e=0;e<l.length;++e){const o=e*r;let s=t[o];for(let e=0;e<r;++e){const r=t[o+e];r>s&&(s=r)}l[e]=s}return l}
},{"@tensorflow/tfjs-core":"tc6m"}],"g8Wa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumConfig=exports.maximum=exports.maximumImpl=void 0;var e=require("@tensorflow/tfjs-core"),m=require("../utils/binary_impl"),r=require("../utils/binary_utils");const i=(0,m.createSimpleBinaryKernelImpl)((e,m)=>Math.max(e,m));exports.maximumImpl=i;const t=(0,r.binaryKernelFunc)(e.Maximum,i);exports.maximum=t;const a={kernelName:e.Maximum,backendName:"cpu",kernelFunc:t};exports.maximumConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"mPmM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumConfig=exports.minimum=exports.minimumImpl=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/binary_impl"),m=require("../utils/binary_utils");const r=(0,i.createSimpleBinaryKernelImpl)((e,i)=>Math.min(e,i));exports.minimumImpl=r;const n=(0,m.binaryKernelFunc)(e.Minimum,r);exports.minimum=n;const t={kernelName:e.Minimum,backendName:"cpu",kernelFunc:n};exports.minimumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"SyJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyConfig=exports.multiply=exports.multiplyComplexImpl=exports.multiplyImpl=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e*l);exports.multiplyImpl=t;const p=(0,r.createComplexBinaryKernelImpl)((e,l,r,t)=>({real:e*r-l*t,imag:e*t+l*r}));exports.multiplyComplexImpl=p;const i=(0,r.binaryKernelFunc)(e.Multiply,t,p);exports.multiply=i;const o={kernelName:e.Multiply,backendName:"cpu",kernelFunc:i};exports.multiplyConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"NmyW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.negImpl=r,exports.neg=o,exports.negConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Multiply");function r(t,r,o){const s=e.util.createScalarValue(-1,o);return(0,n.multiplyImpl)([],r,s,t,o)}function o(e){const{inputs:n,backend:o}=e,{x:s}=n;(0,t.assertNotComplex)(s,"neg");const u=o.data.get(s.dataId).values,[a,l]=r(u,s.shape,s.dtype);return o.makeTensorInfo(l,s.dtype,a)}const s={kernelName:e.Neg,backendName:"cpu",kernelFunc:o};exports.negConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Multiply":"SyJk"}],"l8fw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=exports.notEqualImpl=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,o.createSimpleBinaryKernelImpl)((e,o)=>e!==o?1:0);exports.notEqualImpl=t;const l=(0,r.binaryKernelFunc)(e.NotEqual,t,null,"bool");exports.notEqual=l;const n={kernelName:e.NotEqual,backendName:"cpu",kernelFunc:l};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"HbWh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,l,i){const s=r.length,u=e.util.sizeFromShape(r),n=e.util.computeStrides(r),p=e.util.computeStrides(i),c=e.util.getTypedArrayFromDType(o,e.util.sizeFromShape(i));for(let a=0;a<u;++a){const r=e.util.indexToLoc(a,s,n),o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[l[e]];c[e.util.locToIndex(o,s,p)]=t[a]}return c}
},{"@tensorflow/tfjs-core":"tc6m"}],"bZg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=r,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose_impl");function r(e){const{inputs:r,attrs:a,backend:n}=e,{x:o}=r,{perm:p}=a;(0,t.assertNotComplex)(o,"transpose");const d=o.shape.length,u=new Array(d);for(let t=0;t<u.length;t++)u[t]=o.shape[p[t]];const c=n.data.get(o.dataId).values,i=(0,s.transposeImpl)(c,o.shape,o.dtype,p,u);return{dataId:n.write(i,u,o.dtype),shape:u,dtype:o.dtype}}const a={kernelName:e.Transpose,backendName:"cpu",kernelFunc:r};exports.transposeConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose_impl":"HbWh"}],"jzsq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prodImpl=r,exports.prod=s,exports.prodConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("./Transpose");function r(t,o,r,s){const[n,a]=e.backend_util.computeOutAndReduceShapes(t,s),p=(0,e.upcastType)(o,"int32"),u=e.util.makeZerosTypedArray(e.util.sizeFromShape(n),p),i=e.util.sizeFromShape(a);for(let e=0;e<u.length;++e){const t=e*i;let o=1;for(let e=0;e<i;++e)o*=r[t+e];u[e]=o}return{outVals:u,outShape:n,outDtype:p}}function s(s){const{inputs:n,backend:a,attrs:p}=s,{x:u}=n,{axis:i,keepDims:l}=p;(0,t.assertNotComplex)(u,"prod");const c=u.shape.length,d=e.util.parseAxisParam(i,u.shape),m=e.backend_util.getAxesPermutation(d,c);let h=d,x=u;const f=[];null!=m&&(x=(0,o.transpose)({inputs:{x:u},backend:a,attrs:{perm:m}}),f.push(x),h=e.backend_util.getInnerMostAxes(h.length,c));const k=a.data.get(x.dataId).values,{outVals:b,outShape:g,outDtype:y}=r(x.shape,x.dtype,k,h);let _=g;return l&&(_=e.backend_util.expandShapeToKeepDim(g,d)),f.forEach(e=>a.disposeIntermediateTensorInfo(e)),a.makeTensorInfo(_,y,b)}const n={kernelName:e.Prod,backendName:"cpu",kernelFunc:s};exports.prodConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose":"bZg9"}],"N0y5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o,s){if(r===t||r<t&&o<0||t<r&&o>1)return e.util.makeZerosTypedArray(0,s);const a=Math.abs(Math.ceil((t-r)/o)),l=e.util.makeZerosTypedArray(a,s);t<r&&1===o&&(o=-1),l[0]=r;for(let e=1;e<l.length;e++)l[e]=l[e-1]+o;return l}
},{"@tensorflow/tfjs-core":"tc6m"}],"ftC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=exports.rsqrt=exports.rsqrtImpl=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>1/Math.sqrt(r));exports.rsqrtImpl=s;const o=(0,t.unaryKernelFuncFromImpl)(r.Rsqrt,s);exports.rsqrt=o;const n={kernelName:r.Rsqrt,backendName:"cpu",kernelFunc:o};exports.rsqrtConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"Pog2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceImpl=s,exports.slice=i,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(t,s,i,r,n){const o=e.slice_util.isSliceContinous(r,s,i),c=e.util.sizeFromShape(i),l=e.util.computeStrides(r);if(o){const i=e.slice_util.computeFlatOffset(s,l);return"string"===n?t.slice(i,i+c):t.subarray(i,i+c)}const a="string"===n?e.backend_util.fromUint8ToStringArray(t):t,u=(0,e.buffer)(r,n,a),p=(0,e.buffer)(i,n);for(let e=0;e<p.size;++e){const t=p.indexToLoc(e),i=t.map((e,t)=>e+s[t]);p.set(u.get(...i),...t)}return"string"===n?e.backend_util.fromStringArrayToUint8(p.values):p.values}function i(i){const{inputs:r,backend:n,attrs:o}=i,{x:c}=r,{begin:l,size:a}=o;(0,t.assertNotComplex)(c,"slice");const[u,p]=e.slice_util.parseSliceParams(c,l,a);e.slice_util.assertParamsValid(c,u,p);const f=s(n.data.get(c.dataId).values,u,p,c.shape,c.dtype);return n.makeTensorInfo(p,c.dtype,f)}const r={kernelName:e.Slice,backendName:"cpu",kernelFunc:i};exports.sliceConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"c27v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=exports.squaredDifferenceImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),n=require("../utils/binary_utils");const i=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const n=e-r;return n*n});exports.squaredDifferenceImpl=i;const s=(0,n.binaryKernelFunc)(e.SquaredDifference,i);exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"cpu",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"t7QJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSliceImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const n=(0,e.buffer)(t,r.dtype);for(let e=0;e<n.size;e++){const t=n.indexToLoc(e),l=new Array(t.length);for(let e=0;e<l.length;e++)l[e]=t[e]*o[e]+s[e];n.set(r.get(...l),...t)}return n}
},{"@tensorflow/tfjs-core":"tc6m"}],"Nkhd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.sub=exports.subComplexImpl=exports.subImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),s=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e-r);exports.subImpl=o;const t=(0,s.createComplexBinaryKernelImpl)((e,r,s,o)=>({real:e-s,imag:r-o}));exports.subComplexImpl=t;const l=(0,s.binaryKernelFunc)(e.Sub,o,t);exports.sub=l;const p={kernelName:e.Sub,backendName:"cpu",kernelFunc:l};exports.subConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"r7Er":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t){const o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*t[e];const n=(0,e.buffer)(o,r.dtype);for(let e=0;e<n.values.length;++e){const t=n.indexToLoc(e),o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=t[e]%r.shape[e];const s=r.locToIndex(o);n.values[e]=r.values[s]}return n}
},{"@tensorflow/tfjs-core":"tc6m"}],"QzYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topKImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o,l,u){const n=t[t.length-1],[s,a]=[r.length/n,n],f=e.util.getTypedArrayFromDType(o,s*l),i=e.util.getTypedArrayFromDType("int32",s*l);for(let e=0;e<s;e++){const t=e*a,o=r.subarray(t,t+a),u=[];for(let e=0;e<o.length;e++)u.push({value:o[e],index:e});u.sort((e,r)=>r.value-e.value);const n=e*l,s=f.subarray(n,n+l),p=i.subarray(n,n+l);for(let e=0;e<l;e++)s[e]=u[e].value,p[e]=u[e].index}const p=t.slice();return p[p.length-1]=l,[(0,e.buffer)(p,o,f),(0,e.buffer)(p,"int32",i)]}
},{"@tensorflow/tfjs-core":"tc6m"}],"IsnU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,s,r){const n=e.util.parseAxisParam(o,s)[0],l=[1,s[0],1];for(let e=0;e<n;e++)l[0]*=s[e];l[1]=s[n];for(let e=n+1;e<s.length;e++)l[2]*=s[e];const u={},f=new Int32Array(s[n]),c=new e.TensorBuffer(l,r,t),i=[],a=1===l[0]&&1===l[2];for(let e=0;e<s[n];e++){let o;if(a)o=t[e].toString();else{const t=[];for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)t.push(c.get(o,e,s));o=t.join(",")}if(void 0!==u[o])f[e]=u[o];else{const t=Object.keys(u).length;u[o]=t,f[e]=t,i.push(e)}}const p=l.slice();p[1]=Object.keys(u).length;const h=new e.TensorBuffer(p,r);i.forEach((e,t)=>{for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)h.set(c.get(o,e,s),o,t,s)});const g=s.slice();return g[n]=p[1],{outputValues:h.values,outputShape:g,indices:f}}
},{"@tensorflow/tfjs-core":"tc6m"}],"X8ov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"simpleAbsImpl",{enumerable:!0,get:function(){return e.simpleAbsImpl}}),Object.defineProperty(exports,"addImpl",{enumerable:!0,get:function(){return r.addImpl}}),Object.defineProperty(exports,"bincountImpl",{enumerable:!0,get:function(){return t.bincountImpl}}),Object.defineProperty(exports,"bincountReduceImpl",{enumerable:!0,get:function(){return t.bincountReduceImpl}}),Object.defineProperty(exports,"ceilImpl",{enumerable:!0,get:function(){return n.ceilImpl}}),Object.defineProperty(exports,"concatImpl",{enumerable:!0,get:function(){return l.concatImpl}}),Object.defineProperty(exports,"expImpl",{enumerable:!0,get:function(){return p.expImpl}}),Object.defineProperty(exports,"expm1Impl",{enumerable:!0,get:function(){return u.expm1Impl}}),Object.defineProperty(exports,"floorImpl",{enumerable:!0,get:function(){return i.floorImpl}}),Object.defineProperty(exports,"gatherV2Impl",{enumerable:!0,get:function(){return m.gatherV2Impl}}),Object.defineProperty(exports,"greaterImpl",{enumerable:!0,get:function(){return o.greaterImpl}}),Object.defineProperty(exports,"lessImpl",{enumerable:!0,get:function(){return s.lessImpl}}),Object.defineProperty(exports,"linSpaceImpl",{enumerable:!0,get:function(){return c.linSpaceImpl}}),Object.defineProperty(exports,"logImpl",{enumerable:!0,get:function(){return b.logImpl}}),Object.defineProperty(exports,"maxImpl",{enumerable:!0,get:function(){return f.maxImpl}}),Object.defineProperty(exports,"maximumImpl",{enumerable:!0,get:function(){return a.maximumImpl}}),Object.defineProperty(exports,"minimumImpl",{enumerable:!0,get:function(){return I.minimumImpl}}),Object.defineProperty(exports,"multiplyImpl",{enumerable:!0,get:function(){return d.multiplyImpl}}),Object.defineProperty(exports,"negImpl",{enumerable:!0,get:function(){return g.negImpl}}),Object.defineProperty(exports,"notEqualImpl",{enumerable:!0,get:function(){return x.notEqualImpl}}),Object.defineProperty(exports,"prodImpl",{enumerable:!0,get:function(){return q.prodImpl}}),Object.defineProperty(exports,"rangeImpl",{enumerable:!0,get:function(){return y.rangeImpl}}),Object.defineProperty(exports,"rsqrtImpl",{enumerable:!0,get:function(){return P.rsqrtImpl}}),Object.defineProperty(exports,"sliceImpl",{enumerable:!0,get:function(){return j.sliceImpl}}),Object.defineProperty(exports,"squaredDifferenceImpl",{enumerable:!0,get:function(){return O.squaredDifferenceImpl}}),Object.defineProperty(exports,"stridedSliceImpl",{enumerable:!0,get:function(){return k.stridedSliceImpl}}),Object.defineProperty(exports,"subImpl",{enumerable:!0,get:function(){return _.subImpl}}),Object.defineProperty(exports,"tileImpl",{enumerable:!0,get:function(){return S.tileImpl}}),Object.defineProperty(exports,"topKImpl",{enumerable:!0,get:function(){return E.topKImpl}}),Object.defineProperty(exports,"transposeImpl",{enumerable:!0,get:function(){return M.transposeImpl}}),Object.defineProperty(exports,"uniqueImpl",{enumerable:!0,get:function(){return A.uniqueImpl}});var e=require("./kernels/Abs"),r=require("./kernels/Add"),t=require("./kernels/Bincount_impl"),n=require("./kernels/Ceil"),l=require("./kernels/Concat_impl"),p=require("./kernels/Exp"),u=require("./kernels/Expm1"),i=require("./kernels/Floor"),m=require("./kernels/GatherV2_impl"),o=require("./kernels/Greater"),s=require("./kernels/Less"),c=require("./kernels/LinSpace_impl"),b=require("./kernels/Log"),f=require("./kernels/Max_impl"),a=require("./kernels/Maximum"),I=require("./kernels/Minimum"),d=require("./kernels/Multiply"),g=require("./kernels/Neg"),x=require("./kernels/NotEqual"),q=require("./kernels/Prod"),y=require("./kernels/Range_impl"),P=require("./kernels/Rsqrt"),j=require("./kernels/Slice"),O=require("./kernels/SquaredDifference"),k=require("./kernels/StridedSlice_impl"),_=require("./kernels/Sub"),S=require("./kernels/Tile_impl"),E=require("./kernels/TopK_impl"),M=require("./kernels/Transpose_impl"),A=require("./kernels/Unique_impl");
},{"./kernels/Abs":"EOu3","./kernels/Add":"aUQi","./kernels/Bincount_impl":"LNa4","./kernels/Ceil":"RbeZ","./kernels/Concat_impl":"m9me","./kernels/Exp":"RWap","./kernels/Expm1":"KHQU","./kernels/Floor":"W4sW","./kernels/GatherV2_impl":"cCTc","./kernels/Greater":"dYhv","./kernels/Less":"ZgLX","./kernels/LinSpace_impl":"bxs4","./kernels/Log":"F40R","./kernels/Max_impl":"tYJo","./kernels/Maximum":"g8Wa","./kernels/Minimum":"mPmM","./kernels/Multiply":"SyJk","./kernels/Neg":"NmyW","./kernels/NotEqual":"l8fw","./kernels/Prod":"jzsq","./kernels/Range_impl":"N0y5","./kernels/Rsqrt":"ftC2","./kernels/Slice":"Pog2","./kernels/SquaredDifference":"c27v","./kernels/StridedSlice_impl":"t7QJ","./kernels/Sub":"Nkhd","./kernels/Tile_impl":"r7Er","./kernels/TopK_impl":"QzYa","./kernels/Transpose_impl":"HbWh","./kernels/Unique_impl":"IsnU"}],"W0Bm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MathBackendCPU",{enumerable:!0,get:function(){return r.MathBackendCPU}}),Object.defineProperty(exports,"version_cpu",{enumerable:!0,get:function(){return n.version}}),exports.shared=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./backend_cpu"),t=u(require("./shared"));exports.shared=t;var n=require("./version");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(0,e.registerBackend)("cpu",()=>new r.MathBackendCPU,1);
},{"@tensorflow/tfjs-core":"tc6m","./backend_cpu":"cLLj","./shared":"X8ov","./version":"SdA6"}],"qyBK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=exports.elu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Elu,e=>e>=0?e:Math.exp(e)-1);exports.elu=u;const t={kernelName:e.Elu,backendName:"cpu",kernelFunc:u};exports.eluConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"X7FT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=a,exports.leakyReluConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:r,backend:o,attrs:l}=a,{x:s}=r,{alpha:u}=l;(0,t.assertNotComplex)([s],"leakyRelu");const n=e.util.sizeFromShape(s.shape),p=o.data.get(s.dataId).values,i=e.util.getTypedArrayFromDType("float32",n);for(let e=0;e<p.length;e++)i[e]=p[e]<0?u*p[e]:p[e];return o.makeTensorInfo(s.shape,"float32",i)}const r={kernelName:e.LeakyRelu,backendName:"cpu",kernelFunc:a};exports.leakyReluConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"VJyU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=n,exports.preluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util"),t=require("../utils/binary_impl");const a=(0,t.createSimpleBinaryKernelImpl)((e,r)=>e<0?r*e:e);function n(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;(0,r.assertNotComplex)([s,o],"prelu");const p=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[l,i]=a(s.shape,o.shape,p,u,s.dtype);return n.makeTensorInfo(i,s.dtype,l)}const s={kernelName:e.Prelu,backendName:"cpu",kernelFunc:n};exports.preluConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/binary_impl":"iqlH"}],"EplF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu,e=>Math.max(0,e));exports.relu=u;const t={kernelName:e.Relu,backendName:"cpu",kernelFunc:u};exports.reluConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"MXC7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu6,e=>Math.min(Math.max(0,e),6));exports.relu6=u;const t={kernelName:e.Relu6,backendName:"cpu",kernelFunc:u};exports.relu6Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"E9FC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyActivation=l;var e=require("../kernels/Elu"),r=require("../kernels/Identity"),n=require("../kernels/LeakyRelu"),u=require("../kernels/Prelu"),t=require("../kernels/Relu"),i=require("../kernels/Relu6");function l(l,a,s,k,p){if("linear"===s)return(0,r.identity)({inputs:{x:a},backend:l});if("relu"===s)return(0,t.relu)({inputs:{x:a},backend:l});if("elu"===s)return(0,e.elu)({inputs:{x:a},backend:l});if("relu6"===s)return(0,i.relu6)({inputs:{x:a},backend:l});if("prelu"===s)return(0,u.prelu)({inputs:{x:a,alpha:k},backend:l});if("leakyrelu"===s)return(0,n.leakyRelu)({inputs:{x:a},backend:l,attrs:{alpha:p}});throw new Error(`Activation ${s} has not been implemented for the CPU backend.`)}
},{"../kernels/Elu":"qyBK","../kernels/Identity":"Fyri","../kernels/LeakyRelu":"X7FT","../kernels/Prelu":"VJyU","../kernels/Relu":"EplF","../kernels/Relu6":"MXC7"}],"SVZg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=s,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core");function s(s){const{inputs:a,backend:t,attrs:n}=s,{x:o}=a,{shape:p}=n,r=e.util.sizeFromShape(o.shape),h=e.util.inferFromImplicitShape(p,r),l=e.util.sizeFromShape(h);e.util.assert(r===l,()=>`The new shape (${h}) has ${l} elements and the old `+`shape (${o.shape}) has ${r} elements. The new shape and old `+"shape must have the same number of elements."),t.incRef(o.dataId);const d=t.data.get(o.dataId);if(null!=d.complexTensorInfos){const e=d.complexTensorInfos.real,s=d.complexTensorInfos.imag;e.shape=h,s.shape=h}return{dataId:o.dataId,shape:h,dtype:o.dtype}}const a={kernelName:e.Reshape,backendName:"cpu",kernelFunc:s};exports.reshapeConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"rygW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=a,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape");function a(a){const{inputs:n,backend:r,attrs:o}=a,{a:p,b:h}=n,{transposeA:i,transposeB:u}=o;(0,t.assertNotComplex)([p,h],"matMul");const l=p.shape.length,c=h.shape.length,d=i?p.shape[l-2]:p.shape[l-1],m=u?h.shape[c-1]:h.shape[c-2],f=i?p.shape[l-1]:p.shape[l-2],M=u?h.shape[c-2]:h.shape[c-1],b=p.shape.slice(0,-2),k=h.shape.slice(0,-2),x=e.util.sizeFromShape(b),$=e.util.sizeFromShape(k),v=x===$||1===x||1===$;e.util.assert(l>=2&&c>=2&&v,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${b}) and (${k}).`);const I=(x>$?p.shape.slice(0,-2):h.shape.slice(0,-2)).concat([f,M]);e.util.assert(d===m,()=>`Error in matMul: inner shapes (${d}) and (`+`${m}) of Tensors with shapes ${p.shape} and `+`${h.shape} and transposeA=${i}`+` and transposeB=${u} must match.`);const g=i?[x,d,f]:[x,f,d],S=u?[$,M,m]:[$,m,M],T=(0,s.reshape)({inputs:{x:p},backend:r,attrs:{shape:g}}),q=(0,s.reshape)({inputs:{x:h},backend:r,attrs:{shape:S}}),y=i?T.shape[1]:T.shape[2],z=i?T.shape[2]:T.shape[1],B=u?q.shape[1]:q.shape[2],C=Math.max(x,$),F=r.data.get(T.dataId).values,N=r.data.get(q.dataId).values,_=e.util.computeStrides(T.shape),j=e.util.computeStrides(q.shape),[w,A,E]=i?[_[0],1,_[1]]:[_[0],_[1],1],[G,O,P]=u?[1,j[1],j[0]]:[j[1],1,j[0]],R=z*B,D=(0,e.buffer)([C,z,B],T.dtype),H=D.values,J=r.blockSize;for(let e=0;e<C;e++)for(let t=0;t<z;t+=J)for(let s=0;s<B;s+=J)for(let a=0;a<y;a+=J){const n=Math.min(t+J,z),r=Math.min(s+J,B),o=Math.min(a+J,y);for(let p=t;p<n;p++)for(let t=s;t<r;t++){let s=0;for(let n=a;n<o;n++){const a=Math.min(e,x-1)*w,r=Math.min(e,$-1)*P;s+=F[a+p*A+n*E]*N[n*G+t*O+r]}H[e*R+(p*B+t)]+=s}}return r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(q),r.makeTensorInfo(I,D.dtype,D.values)}const n={kernelName:e.BatchMatMul,backendName:"cpu",kernelFunc:a};exports.batchMatMulConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg"}],"j64o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=r,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),s=require("./Add"),a=require("./BatchMatMul");function r(e){const{inputs:r,backend:n,attrs:u}=e,{a:o,b:i,bias:p,preluActivationWeights:c}=r,{transposeA:l,transposeB:d,activation:f,leakyreluAlpha:M}=u;let b,k,_;const h=[];b=(0,a.batchMatMul)({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:d},backend:n}),p&&(k=(0,s.add)({inputs:{a:b,b:p},backend:n}),h.push(b),b=k),f&&(_=(0,t.applyActivation)(n,b,f,c,M),h.push(b),b=_);for(const t of h)n.disposeIntermediateTensorInfo(t);return b}const n={kernelName:e._FusedMatMul,backendName:"cpu",kernelFunc:r};exports._fusedMatMulConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/fused_utils":"E9FC","./Add":"aUQi","./BatchMatMul":"rygW"}],"uRRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acos,e=>Math.acos(e));exports.acos=s;const r={kernelName:e.Acos,backendName:"cpu",kernelFunc:s};exports.acosConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"neCb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acosh,e=>Math.acosh(e));exports.acosh=s;const r={kernelName:e.Acosh,backendName:"cpu",kernelFunc:s};exports.acoshConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"fo9H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=o,exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:r,backend:a}=o,s=r;(0,t.assertNotComplex)(r,"addN");const n=s.map(e=>a.data.get(e.dataId).values),d=(0,e.buffer)(s[0].shape,s[0].dtype),u=d.values;for(let e=0;e<s.length;e++){const t=n[e];for(let e=0;e<u.length;e++)u[e]+=t[e]}return a.makeTensorInfo(d.shape,d.dtype,d.values)}const r={kernelName:e.AddN,backendName:"cpu",kernelFunc:o};exports.addNConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"NeFx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=a,exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:o,attrs:l}=a,{x:i}=r,{axis:p,keepDims:u}=l;(0,t.assertNotComplex)(i,"all");const c=e.util.parseAxisParam(p,i.shape);let d=c;const h=e.backend_util.getAxesPermutation(d,i.shape.length);let m=i;null!=h&&(m=(0,n.transpose)({inputs:{x:i},backend:o,attrs:{perm:h}}),d=e.backend_util.getInnerMostAxes(d.length,i.shape.length)),e.backend_util.assertAxesAreInnerMostDims("all",d,m.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(m.shape,d),f=e.util.sizeFromShape(x),b=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),m.dtype),g=o.data.get(m.dataId).values;for(let e=0;e<b.length;++e){const t=e*f;let s=g[t];for(let e=0;e<f;++e){const n=g[t+e];s=s&&n}b[e]=s}null!=h&&o.disposeIntermediateTensorInfo(m);const A=o.makeTensorInfo(k,m.dtype,b);if(u){const t=e.backend_util.expandShapeToKeepDim(k,c),n=(0,s.reshape)({inputs:{x:A},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(A),n}return A}const r={kernelName:e.All,backendName:"cpu",kernelFunc:a};exports.allConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg","./Transpose":"bZg9"}],"tjST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=a,exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Reshape"),s=require("./Transpose");function a(a){const{inputs:r,backend:o,attrs:i}=a,{x:p}=r,{axis:u,keepDims:l}=i;(0,t.assertNotComplex)(p,"any");const c=e.util.parseAxisParam(u,p.shape);let d=c;const h=e.backend_util.getAxesPermutation(d,p.shape.length);let m=p;null!=h&&(m=(0,s.transpose)({inputs:{x:p},backend:o,attrs:{perm:h}}),d=e.backend_util.getInnerMostAxes(d.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("any",d,m.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(m.shape,d),f=e.util.sizeFromShape(x),y=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),m.dtype),b=o.data.get(m.dataId).values;for(let e=0;e<y.length;++e){const t=e*f;let n=b[t];for(let e=0;e<f;++e){const s=b[t+e];n=n||s}y[e]=n}null!=h&&o.disposeIntermediateTensorInfo(m);const g=o.makeTensorInfo(k,m.dtype,y);if(l){const t=e.backend_util.expandShapeToKeepDim(k,c),s=(0,n.reshape)({inputs:{x:g},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(g),s}return g}const r={kernelName:e.Any,backendName:"cpu",kernelFunc:a};exports.anyConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg","./Transpose":"bZg9"}],"whlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=a,exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose");function a(a){const{inputs:r,backend:n,attrs:o}=a,{x:i}=r,{axis:u}=o;(0,t.assertNotComplex)(i,"argMax");let l=e.util.parseAxisParam(u,i.shape);const p=e.backend_util.getAxesPermutation(l,i.shape.length);let c=i;const d=[];null!=p&&(c=(0,s.transpose)({inputs:{x:i},backend:n,attrs:{perm:p}}),d.push(c),l=e.backend_util.getInnerMostAxes(l.length,c.shape.length)),l=[l[0]],e.backend_util.assertAxesAreInnerMostDims("argMax",l,c.shape.length);const[x,g]=e.backend_util.computeOutAndReduceShapes(c.shape,l),h=e.util.sizeFromShape(x),m=e.util.makeZerosTypedArray(h,"int32"),f=e.util.sizeFromShape(g),k=n.data.get(c.dataId).values;for(let e=0;e<m.length;++e){const t=e*f;let s=k[t],a=0;for(let e=0;e<f;++e){const r=k[t+e];r>s&&(s=r,a=e)}m[e]=a}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(x,"int32",m)}const r={kernelName:e.ArgMax,backendName:"cpu",kernelFunc:a};exports.argMaxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose":"bZg9"}],"mecE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=s,exports.argMinConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Transpose");function s(s){const{inputs:r,backend:a,attrs:o}=s,{x:i}=r,{axis:u}=o;(0,t.assertNotComplex)(i,"argMin");let l=e.util.parseAxisParam(u,i.shape);const p=e.backend_util.getAxesPermutation(l,i.shape.length);let c=i;const d=[];null!=p&&(c=(0,n.transpose)({inputs:{x:i},backend:a,attrs:{perm:p}}),d.push(c),l=e.backend_util.getInnerMostAxes(l.length,c.shape.length)),l=[l[0]],e.backend_util.assertAxesAreInnerMostDims("argMin",l,c.shape.length);const[g,h]=e.backend_util.computeOutAndReduceShapes(c.shape,l),m=e.util.sizeFromShape(g),x=e.util.makeZerosTypedArray(m,"int32"),f=e.util.sizeFromShape(h),k=a.data.get(c.dataId).values;for(let e=0;e<x.length;++e){const t=e*f;let n=k[t],s=0;for(let e=0;e<f;++e){const r=k[t+e];r<n&&(n=r,s=e)}x[e]=s}return d.forEach(e=>a.disposeIntermediateTensorInfo(e)),a.makeTensorInfo(g,"int32",x)}const r={kernelName:e.ArgMin,backendName:"cpu",kernelFunc:s};exports.argMinConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose":"bZg9"}],"NYXs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asin,e=>Math.asin(e));exports.asin=s;const r={kernelName:e.Asin,backendName:"cpu",kernelFunc:s};exports.asinConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"JC8f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asinh,e=>Math.asinh(e));exports.asinh=s;const r={kernelName:e.Asinh,backendName:"cpu",kernelFunc:s};exports.asinhConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"V6fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atan,e=>Math.atan(e));exports.atan=n;const a={kernelName:e.Atan,backendName:"cpu",kernelFunc:n};exports.atanConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"WPuq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Config=exports.atan2=exports.atan2Impl=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/binary_impl"),r=require("../utils/binary_utils");const a=(0,t.createSimpleBinaryKernelImpl)((e,t)=>Math.atan2(e,t));exports.atan2Impl=a;const n=(0,r.binaryKernelFunc)(e.Atan2,a);exports.atan2=n;const o={kernelName:e.Atan2,backendName:"cpu",kernelFunc:n};exports.atan2Config=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"E8Ii":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atanh,e=>Math.atanh(e));exports.atanh=n;const a={kernelName:e.Atanh,backendName:"cpu",kernelFunc:n};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"ZDaf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=e,exports.maxPoolPositions=o,exports.pool3d=i,exports.maxPool3dPositions=n;var t=require("@tensorflow/tfjs-core");function e(e,o,i,n,h,r){const f=h.strideHeight,a=h.strideWidth,l=h.dilationHeight,s=h.dilationWidth,d=h.effectiveFilterHeight,c=h.effectiveFilterWidth,u=h.padInfo.top,p=h.padInfo.left,I="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,N=(0,t.buffer)(h.outShape,i),g=N.values,S=h.outShape[1]*h.outShape[2]*h.outShape[3],m=h.outShape[2]*h.outShape[3],W=h.outShape[3];for(let t=0;t<h.batchSize;++t){const o=t*S,i=t*n[0];for(let t=0;t<h.inChannels;++t)for(let N=0;N<h.outHeight;++N){const S=N*f-u,H=Math.max(0,S),b=Math.min(h.inHeight,d+S),v=o+N*m;for(let o=0;o<h.outWidth;++o){const f=o*a-p,d=Math.max(0,f),u=Math.min(h.inWidth,c+f);let N=I,S=0,m=0;for(let o=H;o<b;o+=l){const h=i+o*n[1];for(let o=d;o<u;o+=s){const i=e[h+o*n[2]+t];"max"===r&&i>N?N=i:"avg"===r&&(S+=i,m++)}if(isNaN(N))break}g[v+o*W+t]="avg"===r?S/m:N}}}return N}function o(e,o,i,n,h=!1,r=!1){const f=(0,t.buffer)(n.outShape,"int32"),a=n.strideHeight,l=n.strideWidth,s=n.dilationHeight,d=n.dilationWidth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,p=n.padInfo.top,I=n.padInfo.left,N=(0,t.buffer)(o,i,e);for(let t=0;t<n.batchSize;++t)for(let e=0;e<n.inChannels;++e)for(let o=0;o<n.outHeight;++o){const i=o*a-p;let g=i;for(;g<0;)g+=s;const S=Math.min(n.inHeight,c+i);for(let a=0;a<n.outWidth;++a){const c=a*l-I;let p=c;for(;p<0;)p+=d;const m=Math.min(n.inWidth,u+c);let W=Number.NEGATIVE_INFINITY,H=-1;for(let o=g;o<S;o+=s){const f=o-i;for(let i=p;i<m;i+=d){const a=i-c,l=N.get(t,o,i,e);l>W&&(W=l,H=h?r?((t*n.inHeight+o)*n.inWidth+i)*n.inChannels+e:(o*n.inWidth+i)*n.inChannels+e:f*u+a)}}f.set(H,t,o,a,e)}}return f}function i(e,o,i,n,h,r){const f=h.strideDepth,a=h.strideHeight,l=h.strideWidth,s=h.dilationDepth,d=h.dilationHeight,c=h.dilationWidth,u=h.effectiveFilterDepth,p=h.effectiveFilterHeight,I=h.effectiveFilterWidth,N=h.padInfo.front,g=h.padInfo.top,S=h.padInfo.left,m="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,W=(0,t.buffer)(h.outShape,i),H=W.values,b=h.outShape[1]*h.outShape[2]*h.outShape[3]*h.outShape[4],v=h.outShape[2]*h.outShape[3]*h.outShape[4],F=h.outShape[3]*h.outShape[4],x=h.outShape[4];for(let t=0;t<h.batchSize;++t){const o=t*b,i=t*n[0];for(let t=0;t<h.inChannels;++t)for(let W=0;W<h.outDepth;++W){const b=W*f-N;let M=b;for(;M<0;)M+=s;const T=Math.min(h.inDepth,u+b),D=o+W*v;for(let o=0;o<h.outHeight;++o){const f=o*a-g;let u=f;for(;u<0;)u+=d;const N=Math.min(h.inHeight,p+f),W=D+o*F;for(let o=0;o<h.outWidth;++o){const f=o*l-S;let a=f;for(;a<0;)a+=c;const p=Math.min(h.inWidth,I+f),g=W+o*x;let b=m,v=0,F=0;for(let o=M;o<T;o+=s){const h=i+o*n[1];for(let o=u;o<N;o+=d){const i=h+o*n[2];for(let o=a;o<p;o+=c){const h=e[i+o*n[3]+t];if("max"===r&&h>b?b=h:"avg"===r&&(v+=h,F++),isNaN(b))break}if(isNaN(b))break}if(isNaN(b))break}H[g+t]="avg"===r?v/F:b}}}}return W}function n(e,o){const i=(0,t.buffer)(o.outShape,"int32"),n=o.strideDepth,h=o.strideHeight,r=o.strideWidth,f=o.dilationDepth,a=o.dilationHeight,l=o.dilationWidth,s=o.effectiveFilterDepth,d=o.effectiveFilterHeight,c=o.effectiveFilterWidth,u=o.padInfo.front,p=o.padInfo.top,I=o.padInfo.left;for(let t=0;t<o.batchSize;++t)for(let N=0;N<o.inChannels;++N)for(let g=0;g<o.outDepth;++g){const S=g*n-u;let m=S;for(;m<0;)m+=f;const W=Math.min(o.inDepth,s+S);for(let n=0;n<o.outHeight;++n){const s=n*h-p;let u=s;for(;u<0;)u+=a;const H=Math.min(o.inHeight,d+s);for(let h=0;h<o.outWidth;++h){const p=h*r-I;let b=p;for(;b<0;)b+=l;const v=Math.min(o.inWidth,c+p);let F=Number.NEGATIVE_INFINITY,x=-1;for(let o=m;o<W;o+=f){const i=o-S;for(let n=u;n<H;n+=a){const h=n-s;for(let r=b;r<v;r+=l){const f=r-p,a=e.get(t,o,n,r,N);a>=F&&(F=a,x=i*d*c+h*d+f)}}}i.set(x,t,g,n,h,N)}}}return i}
},{"@tensorflow/tfjs-core":"tc6m"}],"ruJT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=r,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const f=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let g;if(1===f.filterWidth&&1===f.filterHeight&&e.util.arraysEqual(f.inShape,f.outShape))g=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,f,"avg");g=a.makeTensorInfo(f.outShape,l.dtype,r.values)}return g}const s={kernelName:e.AvgPool,backendName:"cpu",kernelFunc:r};exports.avgPoolConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf","./Identity":"Fyri"}],"FWnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3D=a,exports.avgPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util"),t=require("../utils/pool_utils");function a(a){const{inputs:s,backend:l,attrs:r}=a,{x:n}=s,{filterSize:i,strides:u,pad:d,dimRoundingMode:p,dataFormat:c,dilations:v}=r;(0,o.assertNotComplex)(n,"avgPool3d");let f=v;null==f&&(f=[1,1,1]);const g=e.backend_util.computePool3DInfo(n.shape,i,u,f,d,p,c),m=l.data.get(n.dataId).values,P=(0,t.pool3d)(m,n.shape,n.dtype,e.util.computeStrides(n.shape),g,"avg");return l.makeTensorInfo(P.shape,"float32",P.values)}const s={kernelName:e.AvgPool3D,backendName:"cpu",kernelFunc:a};exports.avgPool3DConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf"}],"XjjJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGrad=o,exports.avgPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:i,backend:r,attrs:n}=o,{dy:f,input:l}=i,{filterSize:a,strides:d,pad:s,dilations:h,dimRoundingMode:p}=n;(0,t.assertNotComplex)([f,l],"avgPool3DGrad");const c=e.backend_util.computePool3DInfo(l.shape,a,d,h,s,p),u=c.strideDepth,g=c.strideHeight,v=c.strideWidth,D=c.filterDepth,b=c.filterHeight,P=c.filterWidth,k=c.dilationDepth,m=c.dilationHeight,H=c.dilationWidth,W=c.effectiveFilterDepth,x=c.effectiveFilterHeight,G=c.effectiveFilterWidth,I=W-1-c.padInfo.front,M=G-1-c.padInfo.left,y=x-1-c.padInfo.top,C=(0,e.buffer)(l.shape,"float32"),F=1/(D*b*P),_=r.bufferSync(f);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let o=0;o<c.inDepth;++o)for(let i=0;i<c.inHeight;++i)for(let r=0;r<c.inWidth;++r){const n=o-I,f=i-y,l=r-M;let a=0;for(let o=0;o<W;o+=k){const i=(n+o)/u;if(!(i<0||i>=c.outDepth||Math.floor(i)!==i))for(let o=0;o<x;o+=m){const r=(f+o)/g;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let o=0;o<G;o+=H){const n=(l+o)/v;n<0||n>=c.outWidth||Math.floor(n)!==n||(a+=_.get(e,i,r,n,t))}}}C.set(a*F,e,o,i,r,t)}return r.makeTensorInfo(C.shape,C.dtype,C.values)}const i={kernelName:e.AvgPool3DGrad,backendName:"cpu",kernelFunc:o};exports.avgPool3DGradConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"bIUn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=o,exports.avgPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:i,backend:r,attrs:a}=o,{dy:l,input:f}=i,n=f;(0,t.assertNotComplex)([l,f],"avgPoolGrad");const{filterSize:s,strides:d,pad:u}=a,c=e.backend_util.computePool2DInfo(n.shape,s,d,1,u),h=c.strideHeight,p=c.strideWidth,g=c.filterHeight,v=c.filterWidth,b=c.dilationHeight,P=c.dilationWidth,k=c.effectiveFilterHeight,H=c.effectiveFilterWidth,W=H-1-c.padInfo.left,m=k-1-c.padInfo.top,x=(0,e.buffer)(n.shape,"float32"),G=1/(g*v),I=r.data.get(l.dataId).values,C=(0,e.buffer)(l.shape,"float32",I);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let o=0;o<c.inHeight;++o)for(let i=0;i<c.inWidth;++i){const r=o-m,a=i-W;let l=0;for(let o=0;o<k;o+=b){const i=(r+o)/h;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let o=0;o<H;o+=P){const r=(a+o)/p;r<0||r>=c.outWidth||Math.floor(r)!==r||(l+=C.get(e,i,r,t))}}x.set(l*G,e,o,i,t)}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const i={kernelName:e.AvgPoolGrad,backendName:"cpu",kernelFunc:o};exports.avgPoolGradConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"Aa0Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=t,exports.batchNormConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util");function t(t){const{inputs:n,backend:r,attrs:l}=t,{x:s,scale:o,offset:h,mean:u,variance:i}=n;e.util.assert(u.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==h||u.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==o||u.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),(0,a.assertNotComplex)([s,u,i,o,h],"batchNorm");let{varianceEpsilon:d}=l;null==d&&(d=.001);const c=r.data.get(s.dataId).values,g=r.data.get(u.dataId).values,p=r.data.get(i.dataId).values,m=o?r.data.get(o.dataId).values:new Float32Array([1]),v=h?r.data.get(h.dataId).values:new Float32Array([0]),f=new Float32Array(c.length),q=v.length,k=m.length,N=p.length,b=g.length;let x=0,I=0,y=0,F=0;for(let e=0;e<c.length;++e)f[e]=v[x++]+(c[e]-g[I++])*m[y++]/Math.sqrt(p[F++]+d),x>=q&&(x=0),I>=b&&(I=0),y>=k&&(y=0),F>=N&&(F=0);return r.makeTensorInfo(s.shape,s.dtype,f)}const n={kernelName:e.FusedBatchNorm,backendName:"cpu",kernelFunc:t};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"tSN6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=r,exports.batchToSpaceNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape"),a=require("./Slice"),n=require("./Transpose");function r(r){const{inputs:c,backend:o,attrs:i}=r,{x:p}=c,{blockShape:u,crops:d}=i;(0,t.assertNotComplex)([p],"batchToSpaceND");const l=u.reduce((e,t)=>e*t),h=e.backend_util.getReshaped(p.shape,u,l),b=e.backend_util.getPermuted(h.length,u.length),k=e.backend_util.getReshapedPermuted(p.shape,u,l),g=e.backend_util.getSliceBeginCoords(d,u.length),x=e.backend_util.getSliceSize(k,d,u.length),S=(0,s.reshape)({inputs:{x:p},backend:o,attrs:{shape:h}}),f=(0,n.transpose)({inputs:{x:S},backend:o,attrs:{perm:b}}),m=(0,s.reshape)({inputs:{x:f},backend:o,attrs:{shape:k}}),T=(0,a.slice)({inputs:{x:m},backend:o,attrs:{begin:g,size:x}});return o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(m),T}const c={kernelName:e.BatchToSpaceND,backendName:"cpu",kernelFunc:r};exports.batchToSpaceNDConfig=c;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg","./Slice":"Pog2","./Transpose":"bZg9"}],"N0FU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=n,exports.bincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Bincount_impl");function n(e){const{inputs:n,backend:o,attrs:r}=e,{x:a,weights:s}=n,{size:i}=r,u=o.data.get(a.dataId).values,c=o.data.get(s.dataId).values,d=(0,t.bincountImpl)(u,c,s.dtype,s.shape,i);return o.makeTensorInfo([i],s.dtype,d)}const o={kernelName:e.Bincount,backendName:"cpu",kernelFunc:n};exports.bincountConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Bincount_impl":"LNa4"}],"q2il":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipConfig=exports.clip=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/unary_utils");const r=(0,l.unaryKernelFunc)(e.ClipByValue,(e,l)=>{const r=l;return e>r.clipValueMax?r.clipValueMax:e<r.clipValueMin?r.clipValueMin:e});exports.clip=r;const i={kernelName:e.ClipByValue,backendName:"cpu",kernelFunc:r};exports.clipConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"tISz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbsConfig=exports.complexAbs=void 0;var e=require("@tensorflow/tfjs-core");const t=t=>{const{x:o}=t.inputs,a=t.backend,s=new Float32Array(e.util.sizeFromShape(o.shape)),r=a.data.get(o.dataId),n=r.complexTensorInfos.real,l=r.complexTensorInfos.imag,p=a.data.get(n.dataId).values,c=a.data.get(l.dataId).values;for(let e=0;e<p.length;e++){const t=p[e],o=c[e];s[e]=Math.hypot(t,o)}return a.makeOutput(s,o.shape,"float32")};exports.complexAbs=t;const o={kernelName:e.ComplexAbs,backendName:"cpu",kernelFunc:t};exports.complexAbsConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"Lk6f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=t,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:n}=t,o=a.data.get(n.dataId).complexTensorInfos.imag,r=a.data.get(o.dataId).values;return a.makeTensorInfo(o.shape,o.dtype,r)}const a={kernelName:e.Imag,backendName:"cpu",kernelFunc:t};exports.imagConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"YWb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=i,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Complex"),a=require("./Concat_impl"),n=require("./Identity"),s=require("./Imag"),r=require("./Real"),p=require("./Reshape");function i(o){const{inputs:c,backend:u,attrs:d}=o,{axis:m}=d,l=e.util.parseAxisParam(m,c[0].shape)[0];let h=e.backend_util.computeOutShape(c.map(e=>e.shape),l);if(0===e.util.sizeFromShape(h))return u.makeTensorInfo(h,c[0].dtype,[]);const f=c.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===f.length)return(0,n.identity)({inputs:{x:f[0]},backend:u});const k=f.map(e=>e.shape);if(e.backend_util.assertParamsConsistent(k,l),"complex64"===f[0].dtype){const e=f.map(e=>(0,r.real)({inputs:{input:e},backend:u})),a=f.map(e=>(0,s.imag)({inputs:{input:e},backend:u})),n=i({inputs:e,backend:u,attrs:{axis:l}}),p=i({inputs:a,backend:u,attrs:{axis:l}}),o=(0,t.complex)({inputs:{real:n,imag:p},backend:u});return e.forEach(e=>u.disposeIntermediateTensorInfo(e)),a.forEach(e=>u.disposeIntermediateTensorInfo(e)),u.disposeIntermediateTensorInfo(n),u.disposeIntermediateTensorInfo(p),o}const I=f.map(t=>{const a=[-1,e.util.sizeFromShape(t.shape.slice(l))];return(0,p.reshape)({inputs:{x:t},backend:u,attrs:{shape:a}})}),b=I.map(e=>({vals:u.data.get(e.dataId).values,shape:e.shape}));h=e.backend_util.computeOutShape(I.map(e=>e.shape),1);const x=1===I[0].shape[0],g=(0,a.concatImpl)(b,h,c[0].dtype,x),q=e.backend_util.computeOutShape(f.map(e=>e.shape),l),y=u.makeTensorInfo(q,c[0].dtype,g);return I.forEach(e=>u.disposeIntermediateTensorInfo(e)),y}const o={kernelName:e.Concat,backendName:"cpu",kernelFunc:i};exports.concatConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"mGbr","./Concat_impl":"m9me","./Identity":"Fyri","./Imag":"Lk6f","./Real":"M7V4","./Reshape":"SVZg"}],"iHLP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2D=o,exports.conv2DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:a,filter:r}=n,{strides:d,pad:c,dataFormat:l,dilations:u,dimRoundingMode:f}=i;(0,e.assertNotComplex)([a,r],"conv2d");const p=t.backend_util.convertConv2DDataFormat(l),h=t.backend_util.computeConv2DInfo(a.shape,r.shape,d,u,c,f,!1,p),v=h.filterHeight,m=h.filterWidth,g=h.dilationHeight,C=h.dilationWidth,k=h.padInfo.left,D=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new t.TensorBuffer(h.outShape,a.dtype),I=t.util.computeStrides(a.shape),H=t.util.computeStrides(r.shape),W=I[0],_=b?I[1]:I[2],F=b?I[2]:1,S=b?1:I[1],y=x.strides[0],N=b?x.strides[1]:x.strides[2],j=b?x.strides[2]:1,q=b?1:x.strides[1],w=s.data.get(a.dataId).values,M=s.data.get(r.dataId).values,T=x.values;for(let t=0;t<h.batchSize;++t){const e=t*W,o=t*y;for(let t=0;t<h.outHeight;++t){const n=o+t*N,s=t*h.strideHeight-D;for(let t=0;t<v;++t){const o=s+t*g;if(o<0||o>=h.inHeight)continue;const i=t*H[0],a=e+o*_;for(let t=0;t<h.outWidth;++t){const e=n+t*j,o=t*h.strideWidth-k;for(let t=0;t<m;++t){const n=o+t*C;if(n<0||n>=h.inWidth)continue;const s=a+n*F;let r=i+t*H[1];for(let t=0;t<h.inChannels;++t){const o=w[s+t*S];for(let t=0;t<h.outChannels;++t)T[e+t*q]+=o*M[r+t];r+=h.outChannels}}}}}}return s.makeTensorInfo(x.shape,x.dtype,T)}const n={kernelName:t.Conv2D,backendName:"cpu",kernelFunc:o};exports.conv2DConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"DYBF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:r,attrs:n}=o,{x:i,dy:s}=a,{strides:l,pad:c,dataFormat:d,dimRoundingMode:p,filterShape:f}=n;(0,t.assertNotComplex)([i,s],"conv2dBackpropFilter");const u=e.backend_util.convertConv2DDataFormat(d),h=e.backend_util.computeConv2DInfo(i.shape,f,l,1,c,p,!1,u),{strideHeight:v,strideWidth:g,filterHeight:m,filterWidth:k}=h,F="channelsLast"===h.dataFormat,x=new e.TensorBuffer(h.filterShape,"float32"),B=h.padInfo.left,C=h.padInfo.top,M=r.data.get(i.dataId).values,D=r.data.get(s.dataId).values,b=new e.TensorBuffer(i.shape,i.dtype,M),I=new e.TensorBuffer(s.shape,s.dtype,D);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((C-e)/v)),o=Math.min(h.outHeight,(h.inHeight+C-e)/v);for(let a=0;a<k;++a){const r=Math.max(0,Math.ceil((B-a)/g)),n=Math.min(h.outWidth,(h.inWidth+B-a)/g);for(let i=0;i<h.inChannels;++i)for(let s=0;s<h.outChannels;++s){let l=0;for(let c=0;c<h.batchSize;++c)for(let d=t;d<o;++d){const t=e+d*v-C;for(let e=r;e<n;++e){const o=a+e*g-B;l+=F?b.get(c,t,o,i)*I.get(c,d,e,s):b.get(c,i,t,o)*I.get(c,s,d,e)}}x.set(l,e,a,i,s)}}}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const a={kernelName:e.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"UEkT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=o,exports.conv2DBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:r}=o,{dy:s,filter:i}=a,{inputShape:p,strides:d,pad:c,dataFormat:l,dimRoundingMode:u}=r;(0,e.assertNotComplex)([s,i],"conv2dBackpropInput");const f=t.util.computeStrides(i.shape),h=t.util.computeStrides(s.shape);let m=t.backend_util.convertConv2DDataFormat(l);const v=t.backend_util.computeConv2DInfo(p,i.shape,d,1,c,u,!1,m),k=new t.TensorBuffer(v.inShape,"float32"),I=k.values,g=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,[M,x,D]=f,{batchSize:b,filterHeight:B,filterWidth:S,inChannels:_,inHeight:F,inWidth:H,outChannels:W,outHeight:y,outWidth:N,strideHeight:j,strideWidth:q}=v;m=v.dataFormat;const w=B-1-v.padInfo.top,T=S-1-v.padInfo.left,z="channelsLast"===m,L=k.strides[0],O=z?k.strides[1]:k.strides[2],P=z?k.strides[2]:1,R=z?1:k.strides[1],A=h[0],E=z?h[1]:h[2],G=z?h[2]:1,J=z?1:h[1];for(let t=0;t<b;++t)for(let e=0;e<_;++e)for(let o=0;o<F;++o){const a=o-w,n=Math.max(0,Math.ceil(a/j)),r=Math.min(y,(B+a)/j);for(let s=0;s<H;++s){const i=s-T,p=Math.max(0,Math.ceil(i/q)),d=Math.min(N,(S+i)/q);let c=0;for(let o=n;o<r;++o){const n=o*j-a;for(let a=p;a<d;++a){const r=A*t+E*o+G*a,s=M*(B-1-n)+x*(S-1-(a*q-i))+D*e;for(let t=0;t<W;++t){c+=g[r+J*t]*C[s+t]}}}I[L*t+O*o+P*s+R*e]=c}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:t.Conv2DBackpropInput,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"cHuk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=o,exports.conv3DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:r,filter:a}=n,{strides:l,pad:c,dilations:d}=i;(0,e.assertNotComplex)([r,a],"conv3d");const u=t.backend_util.computeConv3DInfo(r.shape,a.shape,l,d,c),{filterDepth:f,filterHeight:p,filterWidth:h,dilationDepth:v,dilationHeight:C,dilationWidth:D,padInfo:g}=u,m=g.front,k=g.left,x=g.top,b=new t.TensorBuffer(u.outShape,r.dtype),H=s.data.get(r.dataId).values,I=s.data.get(a.dataId).values,W=b.values,S=t.util.computeStrides(r.shape),_=t.util.computeStrides(a.shape);for(let t=0;t<u.batchSize;++t){const e=t*S[0],o=t*b.strides[0];for(let t=0;t<u.outDepth;++t){const n=o+t*b.strides[1],s=t*u.strideDepth-m;for(let t=0;t<f;++t){const o=s+t*v;if(o<0||o>=u.inDepth)continue;const i=t*_[0],r=e+o*S[1];for(let t=0;t<u.outHeight;++t){const e=n+t*b.strides[2],o=t*u.strideHeight-x;for(let t=0;t<p;++t){const n=o+t*C;if(n<0||n>=u.inHeight)continue;const s=i+t*_[1],a=r+n*S[2];for(let t=0;t<u.outWidth;++t){const o=e+t*u.outChannels,n=t*u.strideWidth-k;for(let t=0;t<h;++t){const e=n+t*D;if(e<0||e>=u.inWidth)continue;const i=s+t*_[2],r=a+e*u.inChannels;let l=i;for(let t=0;t<u.inChannels;++t){const e=H[r+t];for(let t=0;t<u.outChannels;++t)W[o+t]+=e*I[l+t];l+=u.outChannels}}}}}}}}return s.makeTensorInfo(b.shape,b.dtype,b.values)}const n={kernelName:t.Conv3D,backendName:"cpu",kernelFunc:o};exports.conv3DConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"ZvYi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:r,backend:a,attrs:n}=o,{x:i,dy:s}=r,{strides:l,pad:p,filterShape:c}=n;(0,e.assertNotComplex)([i,s],"conv3dBackpropFilterV2");const d=t.util.computeStrides(i.shape),f=t.util.computeStrides(s.shape),h=t.backend_util.computeConv3DInfo(i.shape,c,l,1,p),u=h.strideDepth,m=h.strideHeight,v=h.strideWidth,k=h.filterDepth,M=h.filterHeight,x=h.filterWidth,D=new t.TensorBuffer(h.filterShape,"float32"),g=D.values,[C,I,B,F]=D.strides,b=a.data.get(s.dataId).values,[S,V,H,W]=f,_=a.data.get(i.dataId).values,[y,N,j,q]=d,w=h.padInfo.front,T=h.padInfo.left,z=h.padInfo.top;for(let t=0;t<k;++t){const e=Math.max(0,Math.ceil((w-t)/u)),o=Math.min(h.outDepth,(h.inDepth+w-t)/u),r=t*C;for(let a=0;a<M;++a){const n=Math.max(0,Math.ceil((z-a)/m)),i=Math.min(h.outHeight,(h.inHeight+z-a)/m),s=a*I+r;for(let r=0;r<x;++r){const l=Math.max(0,Math.ceil((T-r)/v)),p=Math.min(h.outWidth,(h.inWidth+T-r)/v),c=r*B+s;for(let s=0;s<h.inChannels;++s){const d=s*F+c;for(let c=0;c<h.outChannels;++c){let f=0;for(let d=0;d<h.batchSize;++d){const h=d*y,k=d*S;for(let d=e;d<o;++d){const e=(t+d*u-w)*N+h,o=d*V+k;for(let t=n;t<i;++t){const n=(a+t*m-z)*j+e,i=t*H+o;for(let t=l;t<p;++t){const e=t*W+i;f+=_[(r+t*v-T)*q+n+s]*b[e+c]}}}}g[d+c]=f}}}}}return a.makeTensorInfo(D.shape,D.dtype,D.values)}const r={kernelName:t.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropFilterV2Config=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"gxyo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInputV2=o,exports.conv3DBackpropInputV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:a,attrs:r}=o,{dy:i,filter:p}=n,{pad:s,strides:c,inputShape:l}=r;(0,e.assertNotComplex)([i],"conv3dBackpropInputV2");const u=t.util.computeStrides(i.shape),d=t.util.computeStrides(p.shape),h=t.backend_util.computeConv3DInfo(l,p.shape,c,1,s),f=new t.TensorBuffer(h.inShape,"float32"),m=f.values,[v,I,k,M]=f.strides,D=a.data.get(i.dataId).values,[g,x,C,B]=u,b=a.data.get(p.dataId).values,[S,V,H,W]=d,{batchSize:_,filterDepth:y,filterHeight:N,filterWidth:j,inChannels:q,inDepth:w,inHeight:T,inWidth:z,outChannels:F,outDepth:O,outHeight:P,outWidth:A,strideDepth:E,strideHeight:G,strideWidth:J}=h,K=y-1-h.padInfo.front,L=N-1-h.padInfo.top,Q=j-1-h.padInfo.left;for(let t=0;t<_;++t)for(let e=0;e<q;++e)for(let o=0;o<w;++o){const n=o-K,a=Math.max(0,Math.ceil(n/E)),r=Math.min(O,(y+n)/E);for(let i=0;i<T;++i){const p=i-L,s=Math.max(0,Math.ceil(p/G)),c=Math.min(P,(N+p)/G);for(let l=0;l<z;++l){const u=l-Q,d=Math.max(0,Math.ceil(u/J)),h=Math.min(A,(j+u)/J);let f=0;for(let o=a;o<r;++o){const a=o*E-n;for(let n=s;n<c;++n){const r=n*G-p;for(let i=d;i<h;++i){const p=g*t+x*o+C*n+B*i,s=S*(y-1-a)+V*(N-1-r)+H*(j-1-(i*J-u))+W*e;for(let t=0;t<F;++t){f+=D[p+t]*b[s+t]}}}}m[v*t+I*o+k*i+M*l+e]=f}}}return a.makeTensorInfo(f.shape,f.dtype,f.values)}const n={kernelName:t.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropInputV2Config=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"lhKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cos,e=>Math.cos(e));exports.cos=s;const r={kernelName:e.Cos,backendName:"cpu",kernelFunc:s};exports.cosConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"gNxy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cosh,e=>Math.cosh(e));exports.cosh=s;const r={kernelName:e.Cosh,backendName:"cpu",kernelFunc:s};exports.coshConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"Ezb1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=t,exports.cropAndResizeConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:o,backend:s,attrs:a}=t,{image:n,boxes:r,boxInd:l}=o,{cropSize:c,method:i,extrapolationValue:u}=a,[f,d,p,h]=n.shape,v=r.shape[0],[b,m]=c,x=(0,e.buffer)([v,b,m,h],"float32"),M=s.data.get(r.dataId).values,g=s.data.get(l.dataId).values,k=s.data.get(n.dataId).values,z=e.util.computeStrides(n.shape),I=e.util.computeStrides(x.shape);for(let e=0;e<v;e++){const t=4*e,o=M[t],s=M[t+1],a=M[t+2],n=M[t+3],r=g[e];if(r>=f)continue;const l=b>1?(a-o)*(d-1)/(b-1):0,c=m>1?(n-s)*(p-1)/(m-1):0;for(let f=0;f<b;f++){const t=b>1?o*(d-1)+f*l:.5*(o+a)*(d-1);if(t<0||t>d-1)for(let o=0;o<m;o++)for(let t=0;t<h;t++){const s=t+o*I[2]+f*I[1]+e*I[0];x.values[s]=u}else if("bilinear"===i){const o=Math.floor(t),a=Math.ceil(t),l=t-o;for(let t=0;t<m;t++){const i=m>1?s*(p-1)+t*c:.5*(s+n)*(p-1);if(i<0||i>p-1){for(let o=0;o<h;o++){const s=o+t*I[2]+f*I[1]+e*I[0];x.values[s]=u}continue}const d=Math.floor(i),v=Math.ceil(i),b=i-d;for(let s=0;s<h;s++){let n=s+d*z[2]+o*z[1]+r*z[0];const c=k[n],i=k[n=s+v*z[2]+o*z[1]+r*z[0]],u=k[n=s+d*z[2]+a*z[1]+r*z[0]],p=c+(i-c)*b,h=u+(k[n=s+v*z[2]+a*z[1]+r*z[0]]-u)*b;n=s+t*I[2]+f*I[1]+e*I[0],x.values[n]=p+(h-p)*l}}}else for(let o=0;o<m;++o){const a=m>1?s*(p-1)+o*c:.5*(s+n)*(p-1);if(a<0||a>p-1){for(let t=0;t<h;t++){const s=t+o*I[2]+f*I[1]+e*I[0];x.values[s]=u}continue}const l=Math.round(a),i=Math.round(t);for(let t=0;t<h;t++){const s=t+l*z[2]+i*z[1]+r*z[0],a=t+o*I[2]+f*I[1]+e*I[0];x.values[a]=k[s]}}}}return s.makeTensorInfo(x.shape,x.dtype,x.values)}const o={kernelName:e.CropAndResize,backendName:"cpu",kernelFunc:t};exports.cropAndResizeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"uVMc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=n,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose");function n(n){const{inputs:r,backend:o,attrs:a}=n,{x:u}=r,{axis:i,exclusive:c,reverse:p}=a;(0,t.assertNotComplex)(u,"cumsum");const l=e.backend_util.getAxesPermutation([i],u.shape.length);let m=u;null!=l&&(m=(0,s.transpose)({inputs:{x:u},backend:o,attrs:{perm:l}}));const d=e.backend_util.getInnerMostAxes(1,u.shape.length)[0];if(d!==m.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+`axis=${m.shape.length-1} but got axis=${d}`);const h=(0,e.upcastType)(m.dtype,"int32"),x=e.util.makeZerosTypedArray(e.util.sizeFromShape(m.shape),h),f=o.data.get(m.dataId).values,g=m.shape[m.shape.length-1],k=p?(e,t)=>e+g-t-1:(e,t)=>e+t;for(let e=0;e<f.length;e+=g)for(let t=0;t<g;t++){const s=k(e,t);if(0===t)x[s]=c?0:f[s];else{const n=k(e,t-1);x[s]=c?f[n]+x[n]:f[s]+x[n]}}const b=o.makeTensorInfo(m.shape,h,x);if(null!=l){const t=e.backend_util.getUndoAxesPermutation(l),n=(0,s.transpose)({inputs:{x:b},backend:o,attrs:{perm:t}});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(m),n}return b}const r={kernelName:e.Cumsum,backendName:"cpu",kernelFunc:n};exports.cumsumConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose":"bZg9"}],"JTeC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=t,exports.denseBincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Bincount_impl");function t(e){const{inputs:t,backend:r,attrs:o}=e,{x:s,weights:u}=t,{size:a,binaryOutput:i}=o;if(1===s.shape.length){const e=r.data.get(s.dataId).values,t=r.data.get(u.dataId).values,o=(0,n.bincountImpl)(e,t,u.dtype,u.shape,a);return r.makeTensorInfo([a],u.dtype,o)}if(2===s.shape.length){const e=r.bufferSync(s),t=r.bufferSync(u),o=(0,n.bincountReduceImpl)(e,t,a,i);return r.makeTensorInfo(o.shape,u.dtype,o.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${s.shape.length}.`)}const r={kernelName:e.DenseBincount,backendName:"cpu",kernelFunc:t};exports.denseBincountConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Bincount_impl":"LNa4"}],"fcaL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=t,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:o,backend:a,attrs:r}=t,{x:s}=o,{blockSize:p,dataFormat:n}=r;e.util.assert("NHWC"===n,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${n}`),e.util.assert(p>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${p}`);const c=s.shape[0],l=s.shape[1],d=s.shape[2],f=s.shape[3],u=l*p,h=d*p,i=f/(p*p),S=a.data.get(s.dataId).values,b=new Float32Array(c*u*h*i);let k=0;for(let e=0;e<c;++e)for(let t=0;t<u;++t){const o=Math.floor(t/p),a=t%p;for(let t=0;t<h;++t){const r=Math.floor(t/p),s=(a*p+t%p)*i;for(let t=0;t<i;++t){const a=t+s+f*(r+d*(o+l*e));b[k++]=S[a]}}}return a.makeTensorInfo([c,u,h,i],s.dtype,b)}const o={kernelName:e.DepthToSpace,backendName:"cpu",kernelFunc:t};exports.depthToSpaceConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"nfuA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=i,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function i(i){const{inputs:s,backend:n,attrs:o}=i,{x:r,filter:d}=s,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;(0,t.assertNotComplex)([r,d],"depthwiseConv2DNative");const h=e.util.computeStrides(r.shape),p=e.util.computeStrides(d.shape);let f=u;null==f&&(f=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(a,f),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${a} and dilations '${f}'`);const v=e.backend_util.computeConv2DInfo(r.shape,d.shape,a,f,l,c,!0),{filterHeight:C,filterWidth:g,dilationHeight:m,dilationWidth:w,padInfo:N}=v,b=N.left,k=N.top,x=v.outChannels/v.inChannels,H=new e.TensorBuffer(v.outShape,r.dtype),I=n.data.get(r.dataId).values,S=n.data.get(d.dataId).values,W=H.values;for(let e=0;e<v.batchSize;++e){const t=e*h[0],i=e*H.strides[0];for(let e=0;e<v.outHeight;++e){const s=i+e*H.strides[1],n=e*v.strideHeight-b;for(let e=0;e<C;++e){const i=n+e*m;if(i<0||i>=v.inHeight)continue;const o=e*p[0],r=t+i*h[1];for(let e=0;e<v.outWidth;++e){const t=s+e*H.strides[2],i=e*v.strideWidth-k;for(let e=0;e<g;++e){const s=i+e*w;if(s<0||s>=v.inWidth)continue;const n=o+e*p[1],d=r+s*v.inChannels;let a=t,l=n;for(let e=0;e<v.inChannels;++e){const t=I[d+e];for(let e=0;e<x;++e)W[a+e]+=t*S[l+e];a+=x,l+=x}}}}}}return n.makeTensorInfo(H.shape,H.dtype,H.values)}const s={kernelName:e.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:i};exports.depthwiseConv2dNativeConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"BR4d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=o,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:i}=o,{x:r,dy:s}=a,{strides:d,dilations:p,pad:l,dimRoundingMode:h,filterShape:c}=i;(0,t.assertNotComplex)([r,s],"depthwiseConv2dNativeBackpropFilter");const f=e.backend_util.computeConv2DInfo(r.shape,c,d,p,l,h,!0),{strideHeight:u,strideWidth:v,filterHeight:C,filterWidth:g}=f,k=new e.TensorBuffer(f.filterShape,"float32"),m=f.padInfo.left,w=f.padInfo.top,M=f.outChannels/f.inChannels,x=n.data.get(r.dataId).values,B=new e.TensorBuffer(r.shape,r.dtype,x),N=n.data.get(s.dataId).values,F=new e.TensorBuffer(s.shape,s.dtype,N);for(let e=0;e<C;++e){const t=Math.max(0,Math.ceil((w-e)/u)),o=Math.min(f.outHeight,(f.inHeight+w-e)/u);for(let a=0;a<g;++a){const n=Math.max(0,Math.ceil((m-a)/v)),i=Math.min(f.outWidth,(f.inWidth+m-a)/v);for(let r=0;r<f.outChannels;++r){const s=Math.trunc(r/M),d=r%M;let p=0;for(let l=0;l<f.batchSize;++l)for(let d=t;d<o;++d){const t=e+d*u-w;for(let e=n;e<i;++e){const o=a+e*v-m;p+=B.get(l,t,o,s)*F.get(l,d,e,r)}}k.set(p,e,a,s,d)}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"e7S3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=o,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:i,attrs:n}=o,{dy:s,filter:p}=a,{strides:r,dilations:d,pad:u,dimRoundingMode:l,inputShape:c}=n;(0,t.assertNotComplex)([s,p],"depthwiseConv2DNativeBackpropInput");const h=e.util.computeStrides(s.shape),f=e.util.computeStrides(p.shape),v=e.backend_util.computeConv2DInfo(c,p.shape,r,d,u,l,!0),m=new e.TensorBuffer(v.inShape,"float32"),k=m.values,[C,I,g]=m.strides,M=i.data.get(s.dataId).values,[N,w,x]=h,B=i.data.get(p.dataId).values,[b,S,H]=f,{batchSize:W,filterHeight:_,filterWidth:y,inChannels:D,inHeight:j,inWidth:q,outChannels:T,outHeight:z,outWidth:F,strideHeight:O,strideWidth:P}=v,R=_-1-v.padInfo.top,A=y-1-v.padInfo.left,E=T/D;for(let e=0;e<W;++e)for(let t=0;t<D;++t)for(let o=0;o<j;++o){const a=o-R,i=Math.max(0,Math.ceil(a/O)),n=Math.min(z,(_+a)/O);for(let s=0;s<q;++s){const p=s-A,r=Math.max(0,Math.ceil(p/P)),d=Math.min(F,(y+p)/P);let u=0;for(let o=i;o<n;++o){const i=o*O-a;for(let a=r;a<d;++a){const n=N*e+w*o+x*a,s=b*(_-1-i)+S*(y-1-(a*P-p))+H*t;for(let e=0;e<E;++e){u+=M[n+(t*E+e)]*B[s+e]}}}k[C*e+I*o+g*s+t]=u}}return i.makeTensorInfo(m.shape,m.dtype,m.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"uX1z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=t,exports.diagConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:a,backend:s}=t,{x:o}=a,r=e.util.sizeFromShape(o.shape),n=s.data.get(o.dataId).values,i=(0,e.buffer)([r,r],o.dtype),u=i.values;for(let e=0;e<n.length;e++)u[e*r+e]=n[e];const d=[...o.shape,...o.shape];return s.makeTensorInfo(d,i.dtype,i.values)}const a={kernelName:e.Diag,backendName:"cpu",kernelFunc:t};exports.diagConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"N0iv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:i,attrs:o})=>{const{x:d,filter:a}=e,{strides:l,pad:n,dilations:r}=o,s=i,p=s.data.get(d.dataId).values,u=d.shape.length,h=s.data.get(a.dataId).values,c=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:I,outHeight:m,outWidth:x,padInfo:S,strideHeight:b,strideWidth:H,filterHeight:N,filterWidth:T,dilationHeight:W,dilationWidth:k,outShape:v}=t.backend_util.computeDilation2DInfo(d.shape,a.shape,l,n,"NHWC",r),D=t.util.sizeFromShape(v),_=v.length,C=t.util.getArrayFromDType(d.dtype,D);for(let F=0;F<f;++F)for(let e=0;e<m;++e){const i=e*b-S.top;for(let o=0;o<x;++o){const l=o*H-S.left;for(let n=0;n<I;++n){let r=Number.MIN_SAFE_INTEGER;for(let e=0;e<N;++e){const o=i+e*W;if(o>=0&&o<g)for(let i=0;i<T;++i){const s=l+i*k;if(s>=0&&s<y){const l=t.util.locToIndex([F,o,s,n],u,t.util.computeStrides(d.shape)),f=t.util.locToIndex([e,i,n],c,t.util.computeStrides(a.shape)),g=p[l]+h[f];g>r&&(r=g)}}}C[t.util.locToIndex([F,e,o,n],_,t.util.computeStrides(v))]=r}}}return{dataId:s.write(t.util.toTypedArray(C,d.dtype),v,d.dtype),shape:v,dtype:d.dtype}}};exports.dilation2dConfig=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"WxeS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dBackpropFilterConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:r,filter:o,dy:d}=e,{strides:s,pad:l,dilations:n}=i,p=a,u=t.util.toNestedArray(r.shape,p.data.get(r.dataId).values),h=t.util.toNestedArray(o.shape,p.data.get(o.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:N,padInfo:I,strideHeight:b,strideWidth:m,filterHeight:v,filterWidth:A,dilationHeight:D,dilationWidth:F,outShape:H}=t.backend_util.computeDilation2DInfo(r.shape,o.shape,s,l,"NHWC",n);t.util.assert(d.rank===H.length,()=>`Error in ${t.Dilation2DBackpropFilter}, dy `+`must have the same rank as output ${H.length}, but got `+`${d.rank}`);const W=t.util.toNestedArray(H,p.data.get(d.dataId).values),_=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*b-I.top;for(let i=0;i<N;++i){const r=i*m-I.left;for(let o=0;o<g;++o){let d=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let e=0;e<v;++e){const i=a+e*D;if(i>=0&&i<f)for(let a=0;a<A;++a){const n=r+a*F;if(n>=0&&n<y){const r=u[t][i][n][o]+h[e][a][o];r>d&&(d=r,s=e,l=a)}}}_[s][l][o]+=W[t][e][i][o]}}}return{dataId:p.write(t.util.toTypedArray(_,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2dBackpropFilterConfig=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"dpjq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:o,filter:r,dy:d}=e,{strides:n,pad:s,dilations:p}=i,l=a,u=t.util.toNestedArray(o.shape,l.data.get(o.dataId).values),h=t.util.toNestedArray(r.shape,l.data.get(r.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:I,padInfo:N,strideHeight:b,strideWidth:m,filterHeight:v,filterWidth:A,dilationHeight:D,dilationWidth:H,outShape:W}=t.backend_util.computeDilation2DInfo(o.shape,r.shape,n,s,"NHWC",p);t.util.assert(d.rank===W.length,()=>`Error in ${t.Dilation2DBackpropInput}, dy `+`must have the same rank as output ${W.length}, but got `+`${d.rank}`);const _=t.util.toNestedArray(W,l.data.get(d.dataId).values),x=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*b-N.top;for(let i=0;i<I;++i){const o=i*m-N.left;for(let r=0;r<g;++r){let d=Number.MIN_SAFE_INTEGER,n=a<0?0:a,s=o<0?0:o;for(let e=0;e<v;++e){const i=a+e*D;if(i>=0&&i<f)for(let a=0;a<A;++a){const p=o+a*H;if(p>=0&&p<y){const o=u[t][i][p][r]+h[e][a][r];o>d&&(d=o,n=i,s=p)}}}x[t][n][s][r]+=_[t][e][i][r]}}}return{dataId:l.write(t.util.toTypedArray(x,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2dBackpropInputConfig=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"tXTa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGrad=a,exports.eluGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:r,backend:o}=a,{dy:s,y:n}=r;(0,t.assertNotComplex)([s,n],"eluGrad");const u=new Float32Array(e.util.sizeFromShape(n.shape)),l=o.data.get(n.dataId).values,d=o.data.get(s.dataId).values;for(let e=0;e<l.length;++e){const t=l[e];u[e]=t>=1?d[e]:d[e]*(t+1)}return o.makeTensorInfo(n.shape,"float32",u)}const r={kernelName:e.EluGrad,backendName:"cpu",kernelFunc:a};exports.eluGradConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"dh2X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalConfig=exports.equal=exports.equalImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),l=require("../utils/binary_utils");const u=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e===r?1:0);exports.equalImpl=u;const o=(0,l.binaryKernelFunc)(e.Equal,u,null,"bool");exports.equal=o;const t={kernelName:e.Equal,backendName:"cpu",kernelFunc:o};exports.equalConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"z3eB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const t=e.backend_util.ERF_P,n=e.backend_util.ERF_A1,u=e.backend_util.ERF_A2,a=e.backend_util.ERF_A3,s=e.backend_util.ERF_A4,c=e.backend_util.ERF_A5,i=(0,r.unaryKernelFunc)(e.Erf,e=>{const r=Math.sign(e),i=Math.abs(e),o=1/(1+t*i);return r*(1-((((c*o+s)*o+a)*o+u)*o+n)*o*Math.exp(-i*i))});exports.erf=i;const o={kernelName:e.Erf,backendName:"cpu",kernelFunc:i};exports.erfConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"GjMh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,backend:r,attrs:i}=t,{input:a}=n,{dim:p}=i,o=a.shape.length,u=a.shape.slice();let c=p;return p<0&&(e.util.assert(-(o+1)<=p,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+p+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:a},backend:r,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"cpu",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"SVZg"}],"wNwL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivConfig=exports.div=exports.realDivImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),i=require("../utils/binary_utils");const l=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e/r);exports.realDivImpl=l;const t=(0,i.binaryKernelFunc)(e.RealDiv,l);exports.div=t;const n={kernelName:e.RealDiv,backendName:"cpu",kernelFunc:t};exports.realDivConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"dWTE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftBatch=m,exports.fftImpl=p;var e=require("@tensorflow/tfjs-core"),n=require("../kernels/Add"),a=require("../kernels/Complex"),t=require("../kernels/Concat"),o=require("../kernels/Identity"),r=require("../kernels/Imag"),s=require("../kernels/Multiply"),i=require("../kernels/Real"),d=require("../kernels/RealDiv"),l=require("../kernels/Slice"),I=require("../kernels/Sub");function m(n,t,o){const r=n.shape,s=r[0],i=r[1],d=o.data.get(n.dataId),I=d.complexTensorInfos.real,m=d.complexTensorInfos.imag,f=[s,i],u=e.util.sizeFromShape(f),c=e.util.getTypedArrayFromDType("float32",u),T=e.util.getTypedArrayFromDType("float32",u);for(let x=0;x<s;x++){const n=(0,l.slice)({inputs:{x:I},backend:o,attrs:{begin:[x,0],size:[1,i]}}),r=(0,l.slice)({inputs:{x:m},backend:o,attrs:{begin:[x,0],size:[1,i]}}),s=(0,a.complex)({inputs:{real:n,imag:r},backend:o}),{real:d,imag:f}=p(s,t,o),u=e.backend_util.mergeRealAndImagArrays(d,f);for(let a=0;a<i;a++){const n=e.backend_util.getComplexWithIndex(u,a);c[x*i+a]=n.real,T[x*i+a]=n.imag}o.disposeIntermediateTensorInfo(n),o.disposeIntermediateTensorInfo(r),o.disposeIntermediateTensorInfo(s)}const k=o.makeTensorInfo(f,"float32",c),g=o.makeTensorInfo(f,"float32",T),b=(0,a.complex)({inputs:{real:k,imag:g},backend:o});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(g),b}function p(n,a,t){const r=e.util.sizeFromShape(n.shape),s=t.data.get(n.dataId),i=t.data.get(s.complexTensorInfos.real.dataId).values,l=t.data.get(s.complexTensorInfos.imag.dataId).values;if(f(r)){const s=u(i,l,r,a,t),I=[n.shape[0],n.shape[1]];if(a){const n=t.makeTensorInfo(I,"float32",s.real),a=t.makeTensorInfo(I,"float32",s.imag),i=t.makeTensorInfo([],"float32",e.util.createScalarValue(r,"float32")),l=(0,o.identity)({inputs:{x:i},backend:t}),m=d.realDivConfig.kernelFunc({inputs:{a:n,b:i},backend:t}),p=d.realDivConfig.kernelFunc({inputs:{a:a,b:l},backend:t}),f=t.data.get(m.dataId).values,u=t.data.get(p.dataId).values;return t.disposeIntermediateTensorInfo(n),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(l),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(p),{real:f,imag:u}}return s}{const n=c(e.backend_util.mergeRealAndImagArrays(i,l),r,a);return e.backend_util.splitRealAndImagArrays(n)}}function f(e){return 0==(e&e-1)}function u(o,d,l,m,p){if(1===l)return{real:o,imag:d};const f=e.backend_util.mergeRealAndImagArrays(o,d),c=l/2,T=e.backend_util.complexWithEvenIndex(f),k=T.real,g=T.imag,b=[k.length],x=p.makeTensorInfo(b,"float32",k),y=p.makeTensorInfo(b,"float32",g),h=(0,a.complex)({inputs:{real:x,imag:y},backend:p}),A=e.backend_util.complexWithOddIndex(f),_=A.real,v=A.imag,q=[_.length],F=p.makeTensorInfo(q,"float32",_),C=p.makeTensorInfo(q,"float32",v),R=(0,a.complex)({inputs:{real:F,imag:C},backend:p}),D=u(k,g,c,m,p),S=D.real,z=D.imag,W=[S.length],j=p.makeTensorInfo(W,"float32",S),w=p.makeTensorInfo(W,"float32",z),M=(0,a.complex)({inputs:{real:j,imag:w},backend:p}),O=u(_,v,c,m,p),B=O.real,E=O.imag,P=[B.length],V=p.makeTensorInfo(P,"float32",B),G=p.makeTensorInfo(P,"float32",E),H=(0,a.complex)({inputs:{real:V,imag:G},backend:p}),J=e.backend_util.exponents(l,m),K=[J.real.length],L=p.makeTensorInfo(K,"float32",J.real),N=p.makeTensorInfo(K,"float32",J.imag),Q=(0,a.complex)({inputs:{real:L,imag:N},backend:p}),U=(0,s.multiply)({inputs:{a:Q,b:H},backend:p}),X=(0,n.add)({inputs:{a:M,b:U},backend:p}),Y=(0,I.sub)({inputs:{a:M,b:U},backend:p}),Z=(0,i.real)({inputs:{input:X},backend:p}),$=(0,i.real)({inputs:{input:Y},backend:p}),ee=(0,r.imag)({inputs:{input:X},backend:p}),ne=(0,r.imag)({inputs:{input:Y},backend:p}),ae=(0,t.concat)({inputs:[Z,$],backend:p,attrs:{axis:0}}),te=(0,t.concat)({inputs:[ee,ne],backend:p,attrs:{axis:0}}),oe=p.data.get(ae.dataId).values,re=p.data.get(te.dataId).values;return p.disposeIntermediateTensorInfo(x),p.disposeIntermediateTensorInfo(y),p.disposeIntermediateTensorInfo(h),p.disposeIntermediateTensorInfo(F),p.disposeIntermediateTensorInfo(C),p.disposeIntermediateTensorInfo(R),p.disposeIntermediateTensorInfo(j),p.disposeIntermediateTensorInfo(w),p.disposeIntermediateTensorInfo(M),p.disposeIntermediateTensorInfo(V),p.disposeIntermediateTensorInfo(G),p.disposeIntermediateTensorInfo(H),p.disposeIntermediateTensorInfo(L),p.disposeIntermediateTensorInfo(N),p.disposeIntermediateTensorInfo(Q),p.disposeIntermediateTensorInfo(U),p.disposeIntermediateTensorInfo(X),p.disposeIntermediateTensorInfo(Y),p.disposeIntermediateTensorInfo(Z),p.disposeIntermediateTensorInfo(ee),p.disposeIntermediateTensorInfo($),p.disposeIntermediateTensorInfo(ne),p.disposeIntermediateTensorInfo(ae),p.disposeIntermediateTensorInfo(te),{real:oe,imag:re}}function c(n,a,t){const o=new Float32Array(2*a);for(let r=0;r<a;r++){let s=0,i=0;for(let o=0;o<a;o++){const d=e.backend_util.exponent(r*o,a,t),l=e.backend_util.getComplexWithIndex(n,o);s+=l.real*d.real-l.imag*d.imag,i+=l.real*d.imag+l.imag*d.real}t&&(s/=a,i/=a),e.backend_util.assignToTypedArray(o,s,i,r)}return o}
},{"@tensorflow/tfjs-core":"tc6m","../kernels/Add":"aUQi","../kernels/Complex":"mGbr","../kernels/Concat":"YWb4","../kernels/Identity":"Fyri","../kernels/Imag":"Lk6f","../kernels/Multiply":"SyJk","../kernels/Real":"M7V4","../kernels/RealDiv":"wNwL","../kernels/Slice":"Pog2","../kernels/Sub":"Nkhd"}],"P4N1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:a}=r,{input:o}=n,p=e.util.sizeFromShape(o.shape),i=o.shape[o.shape.length-1],f=p/i,u=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:[f,i]}}),c=(0,t.fftBatch)(u,!1,a),h=(0,s.reshape)({inputs:{x:c},backend:a,attrs:{shape:o.shape}});return a.disposeIntermediateTensorInfo(u),a.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.FFT,backendName:"cpu",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/fft_utils":"dWTE","./Reshape":"SVZg"}],"A8l9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=r,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(r){const{backend:t,attrs:l}=r,{shape:n,value:i,dtype:s}=l,f=s||e.util.inferDtype(i),u=e.util.getArrayFromDType(f,e.util.sizeFromShape(n));return o(u,i,f),t.makeTensorInfo(n,f,u)}const t={kernelName:e.Fill,backendName:"cpu",kernelFunc:r};function o(e,r,t){e.fill(r)}exports.fillConfig=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"k0nT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:o})=>{const{image:a}=t,s=o,p=e.util.getTypedArrayFromDType(a.dtype,e.util.sizeFromShape(a.shape)),[i,n,d,l]=a.shape,f=s.data.get(a.dataId).values;for(let e=0;e<i;e++){const t=e*d*n*l;for(let e=0;e<n;e++){const r=e*(d*l);for(let o=0;o<d;o++){const a=o*l;for(let s=0;s<l;s++){const n=[i,e,o,s][2],c=Math.round(d-n),u=t+r+a+s;let h=f[u];if(c>=0&&c<d){h=f[t+r+c*l+s]}p[u]=h}}}}return{dataId:s.write(p,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.flipLeftRightConfig=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"GdQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivConfig=exports.floorDiv=exports.floorDivImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const i=(0,r.createSimpleBinaryKernelImpl)((e,r)=>Math.floor(e/r));exports.floorDivImpl=i;const l=(0,o.binaryKernelFunc)(e.FloorDiv,i,null,"int32");exports.floorDiv=l;const t={kernelName:e.FloorDiv,backendName:"cpu",kernelFunc:l};exports.floorDivConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"saT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2D=o,exports.fusedConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),n=require("./Add"),i=require("./Conv2D");function o(e){const{inputs:o,backend:s,attrs:r}=e,{x:d,filter:a,bias:u,preluActivationWeights:c}=o,{strides:l,pad:p,dataFormat:f,dilations:v,dimRoundingMode:m,activation:b,leakyreluAlpha:k}=r;let C=(0,i.conv2D)({inputs:{x:d,filter:a},backend:s,attrs:{strides:l,pad:p,dataFormat:f,dilations:v,dimRoundingMode:m}});if(u){const e=C;C=(0,n.add)({inputs:{a:C,b:u},backend:s}),s.disposeIntermediateTensorInfo(e)}if(b){const e=C;C=(0,t.applyActivation)(s,C,b,c,k),s.disposeIntermediateTensorInfo(e)}return C}const s={kernelName:e.FusedConv2D,backendName:"cpu",kernelFunc:o};exports.fusedConv2DConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/fused_utils":"E9FC","./Add":"aUQi","./Conv2D":"iHLP"}],"sHQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=n,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),i=require("./Add"),s=require("./DepthwiseConv2dNative");function n(e){const{inputs:n,backend:o,attrs:d}=e,{x:r,filter:a,bias:u,preluActivationWeights:p}=n,{strides:c,pad:l,dataFormat:f,dilations:v,dimRoundingMode:D,activation:h,leakyreluAlpha:m}=d;let C=(0,s.depthwiseConv2dNative)({inputs:{x:r,filter:a},backend:o,attrs:{strides:c,pad:l,dataFormat:f,dilations:v,dimRoundingMode:D}});if(u){const e=C;C=(0,i.add)({inputs:{a:C,b:u},backend:o}),o.disposeIntermediateTensorInfo(e)}if(h){const e=C;C=(0,t.applyActivation)(o,C,h,p,m),o.disposeIntermediateTensorInfo(e)}return C}const o={kernelName:e.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:n};exports.fusedDepthwiseConv2DConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/fused_utils":"E9FC","./Add":"aUQi","./DepthwiseConv2dNative":"nfuA"}],"nJ8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNd=t,exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:r,backend:a}=t,{params:n,indices:o}=r,s=e.util.sizeFromShape(n.shape),d=o.shape,i=d[d.length-1],[l,p,u,c]=e.backend_util.prepareAndValidate(n,o);if(0===p)return a.makeTensorInfo(l,n.dtype,[]);const f=(0,e.buffer)([p,u],n.dtype),h=a.data.get(o.dataId).values,g=a.data.get(n.dataId).values;for(let e=0;e<p;e++){const t=[];let r=0;for(let a=0;a<i;a++){const n=h[e*i+a];r+=n*c[a],t.push(n)}if(r<0||r>=s/u)throw new Error(`Invalid indices: ${t} does not index into ${n.shape}`);for(let a=0;a<u;a++)f.values[e*u+a]=g[r*u+a]}return a.makeTensorInfo(l,f.dtype,f.values)}const r={kernelName:e.GatherNd,backendName:"cpu",kernelFunc:t};exports.gatherNdConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"LnKQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2=s,exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),r=require("./GatherV2_impl"),a=require("./Reshape");function s(s){const{inputs:i,backend:n,attrs:o}=s,{x:p,indices:c}=i,{axis:u,batchDims:h}=o;(0,t.assertNotComplex)([p,c],"gatherV2");let l=h;null==h&&(l=0);const d=e.util.sizeFromShape(c.shape),S=e.util.parseAxisParam(u,p.shape)[0],b=e.backend_util.segment_util.collectGatherOpShapeInfo(p,c,S,l),f=(0,a.reshape)({inputs:{x:p},backend:n,attrs:{shape:[b.batchSize,b.outerSize,b.dimSize,b.sliceSize]}}),m=(0,a.reshape)({inputs:{x:c},backend:n,attrs:{shape:[b.batchSize,d/b.batchSize]}}),z=[b.batchSize,b.outerSize,d/b.batchSize,b.sliceSize],x=n.bufferSync(m),g=n.bufferSync(f),k=(0,r.gatherV2Impl)(g,x,z);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(b.outputShape,k.dtype,k.values)}const i={kernelName:e.GatherV2,backendName:"cpu",kernelFunc:s};exports.gatherV2Config=i;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./GatherV2_impl":"cCTc","./Reshape":"SVZg"}],"G76X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualConfig=exports.greaterEqual=exports.greaterEqualImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const a=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>=r?1:0);exports.greaterEqualImpl=a;const l=(0,t.binaryKernelFunc)(e.GreaterEqual,a,null,"bool");exports.greaterEqual=l;const u={kernelName:e.GreaterEqual,backendName:"cpu",kernelFunc:l};exports.greaterEqualConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"ebBe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:i}=r,{input:a}=n,o=e.util.sizeFromShape(a.shape),p=a.shape[a.shape.length-1],f=o/p,u=(0,s.reshape)({inputs:{x:a},backend:i,attrs:{shape:[f,p]}}),c=(0,t.fftBatch)(u,!0,i),h=(0,s.reshape)({inputs:{x:c},backend:i,attrs:{shape:a.shape}});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.IFFT,backendName:"cpu",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/fft_utils":"dWTE","./Reshape":"SVZg"}],"vrFX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_utils");const t=(0,i.unaryKernelFunc)(e.IsFinite,e=>Number.isFinite(e)?1:0,"bool");exports.isFinite=t;const n={kernelName:e.IsFinite,backendName:"cpu",kernelFunc:t};exports.isFiniteConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"tG90":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/unary_utils");const n=(0,s.unaryKernelFunc)(e.IsInf,e=>Math.abs(e)===1/0?1:0,"bool");exports.isInf=n;const r={kernelName:e.IsInf,backendName:"cpu",kernelFunc:n};exports.isInfConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"vwsp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const s=(0,r.unaryKernelFunc)(e.IsNan,e=>Number.isNaN(e)?1:0,"bool");exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"cpu",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"opLN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualConfig=exports.lessEqual=exports.lessEqualImpl=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),l=require("../utils/binary_utils");const r=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<=s?1:0);exports.lessEqualImpl=r;const u=(0,l.binaryKernelFunc)(e.LessEqual,r,null,"bool");exports.lessEqual=u;const o={kernelName:e.LessEqual,backendName:"cpu",kernelFunc:u};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"HCUU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpace=r,exports.linSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./LinSpace_impl");function r(e){const{backend:r,attrs:t}=e,{start:o,stop:a,num:c}=t,i=(0,n.linSpaceImpl)(o,a,c);return r.makeTensorInfo([i.length],"float32",i)}const t={kernelName:e.LinSpace,backendName:"cpu",kernelFunc:r};exports.linSpaceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./LinSpace_impl":"bxs4"}],"UckU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const r=(0,o.unaryKernelFunc)(e.Log1p,e=>Math.log1p(e));exports.log1p=r;const t={kernelName:e.Log1p,backendName:"cpu",kernelFunc:r};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"ns11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndConfig=exports.logicalAnd=exports.logicalAndImpl=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),o=require("../utils/binary_utils");const r=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e&&l);exports.logicalAndImpl=r;const n=(0,o.binaryKernelFunc)(e.LogicalAnd,r,null,"bool");exports.logicalAnd=n;const i={kernelName:e.LogicalAnd,backendName:"cpu",kernelFunc:n};exports.logicalAndConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"VtLB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var o=require("@tensorflow/tfjs-core"),e=require("../utils/unary_utils");const t=(0,e.unaryKernelFunc)(o.LogicalNot,o=>o?0:1,"bool");exports.logicalNot=t;const r={kernelName:o.LogicalNot,backendName:"cpu",kernelFunc:t};exports.logicalNotConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"qXPb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOrConfig=exports.logicalOr=exports.logicalOrImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),l=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e||r);exports.logicalOrImpl=o;const i=(0,l.binaryKernelFunc)(e.LogicalOr,o,null,"bool");exports.logicalOr=i;const t={kernelName:e.LogicalOr,backendName:"cpu",kernelFunc:i};exports.logicalOrConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"WY1K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lRN=o,exports.lRNConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:r,attrs:s}=o,{x:n}=a,{depthRadius:c,bias:l,alpha:p,beta:u}=s;(0,t.assertNotComplex)(n,"LRN");const i=n.shape[3],d=i-1,f=r.data.get(n.dataId).values,h=e.util.sizeFromShape(n.shape),N=new Float32Array(h);function m(e){const t=e%i;let o=e-t+Math.max(0,t-c);const a=e-t+Math.min(t+c,d);let r=0;for(;o<=a;o++){const e=f[o];r+=e*e}return r}for(let e=0;e<h;e++){const t=m(e),o=f[e]*Math.pow(l+p*t,-u);N[e]=o}return r.makeTensorInfo(n.shape,n.dtype,N)}const a={kernelName:e.LRN,backendName:"cpu",kernelFunc:o};exports.lRNConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"ZpBS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lRNGrad=t,exports.lRNGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util");function t(t){const{inputs:r,backend:o,attrs:s}=t,{x:d,y:l,dy:n}=r,{depthRadius:p,bias:u,alpha:i,beta:c}=s;(0,a.assertNotComplex)(n,"LRNGrad");const f=e.util.sizeFromShape(n.shape),h=n.shape[3],N=o.data.get(n.dataId).values,m=o.data.get(d.dataId).values,x=o.data.get(l.dataId).values,v=new Float32Array(f),R=f;for(let e=0;e<R;e++){const a=e%h,t=e-a+Math.max(0,a-p),r=e-a+Math.min(h,a+p+1);let o=0;for(let e=t;e<r;e++)o+=Math.pow(m[e],2);o=i*o+u;for(let s=t;s<r;s++){let a=-2*i*c*m[s]*x[e]/o;e===s&&(a+=Math.pow(o,-c)),a*=N[e],v[s]+=a}}return o.makeTensorInfo(n.shape,d.dtype,v)}const r={kernelName:e.LRNGrad,backendName:"cpu",kernelFunc:t};exports.lRNGradConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"p4SG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=s,exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./Max_impl"),n=require("./Transpose_impl");function s(s){const{inputs:r,backend:i,attrs:o}=s,{x:p}=r,{reductionIndices:l,keepDims:u}=o,d=i;let c=p.shape;const m=c.length,x=e.util.parseAxisParam(l,c);let k=x;const _=e.backend_util.getAxesPermutation(k,m);let f=d.data.get(p.dataId).values;if(null!=_){const t=new Array(m);for(let e=0;e<t.length;e++)t[e]=c[_[e]];f=(0,n.transposeImpl)(f,c,p.dtype,_,t),k=e.backend_util.getInnerMostAxes(k.length,m),c=t}(0,t.assertNotComplex)(p,"max"),e.backend_util.assertAxesAreInnerMostDims("max",k,m);const[b,g]=e.backend_util.computeOutAndReduceShapes(c,k),h=e.util.sizeFromShape(g),y=(0,a.maxImpl)(f,h,b,p.dtype),A=d.write(y,b,p.dtype);let I=b;if(u){I=e.backend_util.expandShapeToKeepDim(b,x)}return{dataId:A,shape:I,dtype:p.dtype}}const r={kernelName:e.Max,backendName:"cpu",kernelFunc:s};exports.maxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Max_impl":"tYJo","./Transpose_impl":"HbWh"}],"Qrjn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=r,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let x;if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))x=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,m,"max");x=a.makeTensorInfo(m.outShape,l.dtype,r.values)}return x}const s={kernelName:e.MaxPool,backendName:"cpu",kernelFunc:r};exports.maxPoolConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf","./Identity":"Fyri"}],"jH2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3D=a,exports.maxPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util"),t=require("../utils/pool_utils");function a(a){const{inputs:s,backend:l,attrs:r}=a,{x:n}=s,{filterSize:i,strides:u,pad:d,dimRoundingMode:p,dataFormat:c,dilations:m}=r;(0,o.assertNotComplex)(n,"maxPool3d");let x=m;null==x&&(x=[1,1,1]);const f=e.backend_util.computePool3DInfo(n.shape,i,u,x,d,p,c),P=l.data.get(n.dataId).values,k=(0,t.pool3d)(P,n.shape,n.dtype,e.util.computeStrides(n.shape),f,"max");return l.makeTensorInfo(k.shape,"float32",k.values)}const s={kernelName:e.MaxPool3D,backendName:"cpu",kernelFunc:a};exports.maxPool3DConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf"}],"kfKR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGrad=i,exports.maxPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils");function i(i){const{inputs:r,backend:n,attrs:l}=i,{dy:f,input:a}=r,{filterSize:s,strides:d,pad:u,dilations:c,dimRoundingMode:p}=l;(0,t.assertNotComplex)([f,a],"maxPool3DGrad");const h=e.backend_util.computePool3DInfo(a.shape,s,d,c,u,p),m=n.bufferSync(a),x=(0,o.maxPool3dPositions)(m,h),D=h.strideDepth,g=h.strideHeight,P=h.strideWidth,b=h.dilationDepth,v=h.dilationHeight,k=h.dilationWidth,M=h.effectiveFilterDepth,y=h.effectiveFilterHeight,G=h.effectiveFilterWidth,H=M-1-h.padInfo.front,I=G-1-h.padInfo.left,W=y-1-h.padInfo.top,_=(0,e.buffer)(a.shape,"float32"),C=n.bufferSync(f);for(let e=0;e<h.batchSize;++e)for(let t=0;t<h.inChannels;++t)for(let o=0;o<h.inDepth;++o)for(let i=0;i<h.inHeight;++i)for(let r=0;r<h.inWidth;++r){const n=o-H,l=i-W,f=r-I;let a=0;for(let o=0;o<M;o+=b){const i=(n+o)/D;if(!(i<0||i>=h.outDepth||Math.floor(i)!==i))for(let r=0;r<y;r+=v){const n=(l+r)/g;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let l=0;l<G;l+=k){const s=(f+l)/P;if(s<0||s>=h.outWidth||Math.floor(s)!==s)continue;const d=M*y*G-1-x.get(e,i,n,s,t)===o*y*G+r*G+l?1:0;0!==d&&(a+=C.get(e,i,n,s,t)*d)}}}_.set(a,e,o,i,r,t)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const r={kernelName:e.MaxPool3DGrad,backendName:"cpu",kernelFunc:i};exports.maxPool3DGradConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf"}],"c7bW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=a,exports.maxPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils");function a(a){const{inputs:i,backend:r,attrs:l}=a,{dy:s,input:n,output:d}=i,f=n;(0,t.assertNotComplex)([n,d],"maxPoolGrad");const{filterSize:u,strides:p,pad:c,dimRoundingMode:h}=l,g=e.backend_util.computePool2DInfo(f.shape,u,p,1,c,h),m=r.data.get(f.dataId).values,x=(0,e.buffer)(g.outShape,f.dtype,(0,o.maxPoolPositions)(m,f.shape,f.dtype,g).values),v=g.strideHeight,P=g.strideWidth,b=g.dilationHeight,k=g.dilationWidth,I=g.effectiveFilterHeight,y=g.effectiveFilterWidth,G=y-1-g.padInfo.left,H=I-1-g.padInfo.top,M=(0,e.buffer)(f.shape,"float32"),W=r.data.get(s.dataId).values,_=(0,e.buffer)(s.shape,"float32",W);for(let e=0;e<g.batchSize;++e)for(let t=0;t<g.inChannels;++t)for(let o=0;o<g.inHeight;++o)for(let a=0;a<g.inWidth;++a){const i=o-H,r=a-G;let l=0;for(let o=0;o<I;o+=b){const a=(i+o)/v;if(!(a<0||a>=g.outHeight||Math.floor(a)!==a))for(let i=0;i<y;i+=k){const s=(r+i)/P;if(s<0||s>=g.outWidth||Math.floor(s)!==s)continue;const n=I*y-1-x.get(e,a,s,t)===o*y+i?1:0;0!==n&&(l+=_.get(e,a,s,t)*n)}}M.set(l,e,o,a,t)}return r.makeTensorInfo(M.shape,M.dtype,M.values)}const i={kernelName:e.MaxPoolGrad,backendName:"cpu",kernelFunc:a};exports.maxPoolGradConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/pool_utils":"ZDaf"}],"xIUV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=t;var e=require("@tensorflow/tfjs-core"),o=require("../utils/pool_utils");function t(t,r,s,l,u){const i=e.util.computeStrides(r),a=(0,o.pool)(t,r,s,i,u,"max"),n=(0,o.maxPoolPositions)(t,r,s,u,!0,l);return[a.values,n.values]}
},{"@tensorflow/tfjs-core":"tc6m","../utils/pool_utils":"ZDaf"}],"jxcV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./MaxPoolWithArgmax_impl");const o={kernelName:e.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:o,attrs:r,backend:p})=>{const{x:i}=o,{filterSize:d,strides:s,pad:l,includeBatchInIndex:n}=r,u=p;(0,t.assertNotComplex)(i,"MaxPoolWithArgmax");const x=u.data.get(i.dataId).values,c=e.backend_util.computePool2DInfo(i.shape,d,s,[1,1],l),[h,m]=(0,a.maxPoolWithArgmaxImpl)(x,i.shape,i.dtype,n,c),g=u.write(h,c.outShape,i.dtype),P=u.write(m,c.outShape,i.dtype);return[{dataId:g,shape:c.outShape,dtype:i.dtype},{dataId:P,shape:c.outShape,dtype:"int32"}]}};exports.maxPoolWithArgmaxConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./MaxPoolWithArgmax_impl":"xIUV"}],"Elst":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=o,exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("../utils/zeros_impl"),n=require("./Cast"),a=require("./Identity"),r=require("./Reshape"),i=require("./Transpose");function o(o){const{inputs:u,backend:p,attrs:d}=o,{x:l}=u,{axis:c,keepDims:m}=d;let x;(0,t.assertNotComplex)(l,"sum");const h=(x="bool"===l.dtype?(0,n.cast)({inputs:{x:l},backend:p,attrs:{dtype:"int32"}}):(0,a.identity)({inputs:{x:l},backend:p})).shape.length,k=e.util.parseAxisParam(c,x.shape),b=e.backend_util.getAxesPermutation(k,h);let f=k,I=x;null!=b&&(I=(0,i.transpose)({inputs:{x:x},backend:p,attrs:{perm:b}}),f=e.backend_util.getInnerMostAxes(f.length,h)),e.backend_util.assertAxesAreInnerMostDims("sum",f,I.shape.length);const[g,_]=e.backend_util.computeOutAndReduceShapes(I.shape,f),q=e.backend_util.upcastType(I.dtype,"int32");let y=(0,s.zeros)(p,g,q);const A=e.util.sizeFromShape(_),T=p.data.get(y.dataId).values,v=p.data.get(I.dataId).values;for(let e=0;e<T.length;++e){const t=e*A;let s=0;for(let e=0;e<A;++e)s+=v[t+e];T[e]=s}if(m){const t=e.backend_util.expandShapeToKeepDim(y.shape,k),s=y;y=(0,r.reshape)({inputs:{x:y},backend:p,attrs:{shape:t}}),p.disposeIntermediateTensorInfo(s)}return p.disposeIntermediateTensorInfo(x),null!=b&&p.disposeIntermediateTensorInfo(I),y}const u={kernelName:e.Sum,backendName:"cpu",kernelFunc:o};exports.sumConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../utils/zeros_impl":"j6Wu","./Cast":"qg0y","./Identity":"Fyri","./Reshape":"SVZg","./Transpose":"bZg9"}],"tB29":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=n,exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Cast"),t=require("./RealDiv"),a=require("./Sum");function n(n){const{inputs:r,backend:o,attrs:i}=n,{x:u}=r,{axis:p,keepDims:c}=i,d=e.util.parseAxisParam(p,u.shape),m=e.backend_util.computeOutAndReduceShapes(u.shape,d)[1],l=e.util.sizeFromShape(m),f=[],k=o.makeTensorInfo([],"float32",new Float32Array([l]));f.push(k);const x=(0,s.cast)({inputs:{x:u},backend:o,attrs:{dtype:"float32"}});f.push(x);const b=(0,t.div)({inputs:{a:x,b:k},backend:o});f.push(b);const h=(0,a.sum)({inputs:{x:b},backend:o,attrs:{axis:p,keepDims:c}});return f.forEach(e=>o.disposeIntermediateTensorInfo(e)),h}const r={kernelName:e.Mean,backendName:"cpu",kernelFunc:n};exports.meanConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Cast":"qg0y","./RealDiv":"wNwL","./Sum":"Elst"}],"Zzwg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=r,exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Reshape"),s=require("./Transpose");function r(r){const{inputs:a,backend:o,attrs:i}=r,{x:p}=a,{axis:u,keepDims:l}=i;(0,t.assertNotComplex)(p,"min");const c=e.util.parseAxisParam(u,p.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,p.shape.length);let h=p;null!=m&&(h=(0,s.transpose)({inputs:{x:p},backend:o,attrs:{perm:m}}),d=e.backend_util.getInnerMostAxes(d.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("min",d,h.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(h.shape,d),f=e.util.sizeFromShape(x),b=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),h.dtype),g=o.data.get(h.dataId).values;for(let e=0;e<b.length;++e){const t=e*f;let n=g[t];for(let e=0;e<f;++e){const s=g[t+e];s<n&&(n=s)}b[e]=n}null!=m&&o.disposeIntermediateTensorInfo(h);const I=o.makeTensorInfo(k,h.dtype,b);if(l){const t=e.backend_util.expandShapeToKeepDim(k,c),s=(0,n.reshape)({inputs:{x:I},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(I),s}return I}const a={kernelName:e.Min,backendName:"cpu",kernelFunc:r};exports.minConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg","./Transpose":"bZg9"}],"h3vA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=r,exports.mirrorPadConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:a,attrs:p}=r,{x:d}=o,{paddings:i,mode:s}=p;(0,t.assertNotComplex)(d,"mirrorPad");const n=i.map((e,t)=>e[0]+d.shape[t]+e[1]),l=i.map(e=>e[0]),u=i.map((e,t)=>e[0]+d.shape[t]),c="reflect"===s?0:1,m=a.data.get(d.dataId).values,f=d.shape.length,h=e.util.computeStrides(d.shape),x=e.util.sizeFromShape(n),y=n.length,g=e.util.computeStrides(n),P=e.util.getTypedArrayFromDType(d.dtype,x);for(let t=0;t<x;t++){let r=e.util.indexToLoc(t,y,g);for(let e=0;e<y;e++)r[e]<l[e]?r[e]=2*l[e]-r[e]-c:r[e]>=u[e]&&(r[e]=2*(u[e]-1)-r[e]+c);r=r.map((e,t)=>e-l[t]);const o=e.util.locToIndex(r,f,h);P[t]=m[o]}return{dataId:a.write(P,n,d.dtype),shape:n,dtype:d.dtype}}const o={kernelName:e.MirrorPad,backendName:"cpu",kernelFunc:r};exports.mirrorPadConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"OI15":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modConfig=exports.mod=exports.modImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const t=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const o=e%r;return e<0&&r<0||e>=0&&r>=0?o:(o+r)%r});exports.modImpl=t;const n=(0,o.binaryKernelFunc)(e.Mod,t);exports.mod=n;const s={kernelName:e.Mod,backendName:"cpu",kernelFunc:n};exports.modConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"uZBo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=o,exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Exp"),t=require("./Max"),n=require("./RealDiv"),a=require("./Reshape"),r=require("./Sub"),i=require("./Sum");function o(o){const{inputs:p,backend:d,attrs:u}=o,{logits:m}=p,{dim:c}=u,x=m.shape.length;let f=c;if(-1===f&&(f=x-1),f!==x-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${x} and dim was ${f}`);const b=e.util.parseAxisParam([f],m.shape),k=(0,t.max)({inputs:{x:m},backend:d,attrs:{reductionIndices:b,keepDims:!1}}),l=e.backend_util.expandShapeToKeepDim(k.shape,b),I=(0,a.reshape)({inputs:{x:k},backend:d,attrs:{shape:l}}),h=(0,r.sub)({inputs:{a:m,b:I},backend:d}),q=(0,s.exp)({inputs:{x:h},backend:d}),T=(0,i.sum)({inputs:{x:q},backend:d,attrs:{axis:b,keepDims:!1}}),g=(0,a.reshape)({inputs:{x:T},backend:d,attrs:{shape:l}}),v=(0,n.div)({inputs:{a:q,b:g},backend:d});return d.disposeIntermediateTensorInfo(k),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(h),d.disposeIntermediateTensorInfo(q),d.disposeIntermediateTensorInfo(T),d.disposeIntermediateTensorInfo(g),v}const p={kernelName:e.Softmax,backendName:"cpu",kernelFunc:o};exports.softmaxConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Exp":"RWap","./Max":"p4SG","./RealDiv":"wNwL","./Reshape":"SVZg","./Sub":"Nkhd","./Sum":"Elst"}],"fpeR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=i,exports.multinomialConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=a(require("seedrandom")),r=require("../cpu_util"),n=require("./Softmax");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function i(o){const{inputs:a,backend:i,attrs:l}=o,{logits:s}=a,{numSamples:u,seed:f,normalized:p}=l;(0,r.assertNotComplex)(s,"multinomial");const c=p?s:(0,n.softmax)({inputs:{logits:s},backend:i,attrs:{dim:-1}}),d=c.shape[0],m=c.shape[1],g=i.data.get(c.dataId).values,y=[d,u],b=e.util.makeZerosTypedArray(e.util.sizeFromShape(y),"int32");for(let e=0;e<d;++e){const r=e*m,n=new Float32Array(m-1);n[0]=g[r];for(let e=1;e<n.length;++e)n[e]=n[e-1]+g[r+e];const o=t.alea(f.toString()),a=e*u;for(let e=0;e<u;++e){const t=o();b[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){b[a+e]=r;break}}}return p||i.disposeIntermediateTensorInfo(c),i.makeTensorInfo(y,"int32",b)}const l={kernelName:e.Multinomial,backendName:"cpu",kernelFunc:i};exports.multinomialConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","seedrandom":"Kwju","../cpu_util":"y22L","./Softmax":"uZBo"}],"M7yX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3=o,exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV3Impl;function o(e){const{inputs:o,backend:r,attrs:t}=e,{boxes:a,scores:p}=o,{maxOutputSize:u,iouThreshold:i,scoreThreshold:c}=t;(0,n.assertNotComplex)(a,"NonMaxSuppression");const l=r.data.get(a.dataId).values,d=r.data.get(p.dataId).values,{selectedIndices:x}=s(l,d,u,i,c);return r.makeTensorInfo([x.length],"int32",new Int32Array(x))}const r={kernelName:e.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:o};exports.nonMaxSuppressionV3Config=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"N3CZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4=o,exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV4Impl;function o(e){const{inputs:o,backend:t,attrs:r}=e,{boxes:a,scores:p}=o,{maxOutputSize:u,iouThreshold:i,scoreThreshold:d,padToMaxOutputSize:c}=r;(0,n.assertNotComplex)(a,"NonMaxSuppressionPadded");const l=t.data.get(a.dataId).values,x=t.data.get(p.dataId).values,{selectedIndices:f,validOutputs:m}=s(l,x,u,i,d,c);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([m]))]}const t={kernelName:e.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:o};exports.nonMaxSuppressionV4Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"nMlJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5=n,exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV5Impl;function n(e){const{inputs:n,backend:t,attrs:r}=e,{boxes:a,scores:p}=n,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,softNmsSigma:l}=r;(0,o.assertNotComplex)(a,"NonMaxSuppressionWithScore");const d=t.data.get(a.dataId).values,x=t.data.get(p.dataId).values,f=i,m=u,S=c,g=l,{selectedIndices:h,selectedScores:k}=s(d,x,f,m,S,g);return[t.makeTensorInfo([h.length],"int32",new Int32Array(h)),t.makeTensorInfo([k.length],"float32",new Float32Array(k))]}const t={kernelName:e.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:n};exports.nonMaxSuppressionV5Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"unSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=t,exports.oneHotConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util");function t(t){const{inputs:n,backend:r,attrs:s}=t,{indices:a}=n,{depth:i,onValue:u,offValue:l}=s;(0,o.assertNotComplex)(a,"oneHot");const c=e.util.sizeFromShape(a.shape),p=new Float32Array(c*i);p.fill(l);const f=r.data.get(a.dataId).values;for(let e=0;e<c;++e)f[e]>=0&&f[e]<i&&(p[e*i+f[e]]=u);return r.makeTensorInfo([...a.shape,i],"int32",p)}const n={kernelName:e.OneHot,backendName:"cpu",kernelFunc:t};exports.oneHotConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"WPTr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=o,exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Complex"),n=require("./Fill"),s=require("./Imag"),t=require("./Real");function o(e){const{inputs:i,backend:p}=e,{x:a}=i;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){const e=(0,t.real)({inputs:{input:a},backend:p}),n=o({inputs:{x:e},backend:p}),i=(0,s.imag)({inputs:{input:a},backend:p}),d=o({inputs:{x:i},backend:p}),u=(0,r.complex)({inputs:{real:n,imag:d},backend:p});return p.disposeIntermediateTensorInfo(e),p.disposeIntermediateTensorInfo(n),p.disposeIntermediateTensorInfo(i),p.disposeIntermediateTensorInfo(d),u}return(0,n.fill)({backend:p,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}const i={kernelName:e.ZerosLike,backendName:"cpu",kernelFunc:o};exports.zerosLikeConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"mGbr","./Fill":"A8l9","./Imag":"Lk6f","./Real":"M7V4"}],"GMg8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=o,exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),s=require("./Imag"),i=require("./Real"),t=require("./ZerosLike");function o(e){const{inputs:p,backend:a}=e,{x:d}=p;if("string"===d.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===d.dtype){const e=(0,i.real)({inputs:{input:d},backend:a}),r=o({inputs:{x:e},backend:a}),p=(0,s.imag)({inputs:{input:d},backend:a}),u=(0,t.zerosLike)({inputs:{x:p},backend:a}),c=(0,n.complex)({inputs:{real:r,imag:u},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),c}return(0,r.fill)({backend:a,attrs:{shape:d.shape,value:1,dtype:d.dtype}})}const p={kernelName:e.OnesLike,backendName:"cpu",kernelFunc:o};exports.onesLikeConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"mGbr","./Fill":"A8l9","./Imag":"Lk6f","./Real":"M7V4","./ZerosLike":"WPTr"}],"xpNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:p}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:p}});const i=n[0].shape,o=n[0].dtype;n.forEach(t=>{e.util.assertShapesMatch(i,t.shape,"All tensors passed to stack must have matching shapes"),e.util.assert(o===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(e=>{const t=(0,s.expandDims)({inputs:{input:e},backend:r,attrs:{dim:p}});return u.push(t),t}),h=(0,t.concat)({inputs:d,backend:r,attrs:{axis:p}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}const n={kernelName:e.Pack,backendName:"cpu",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Concat":"YWb4","./ExpandDims":"GjMh"}],"nx6M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2=a,exports.padV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:p,backend:o,attrs:r}=a,{x:s}=p,{paddings:d,constantValue:i}=r;(0,t.assertNotComplex)(s,"pad");const n=d.map((e,t)=>e[0]+s.shape[t]+e[1]),u=d.map(e=>e[0]),l=o.data.get(s.dataId).values,c=e.util.sizeFromShape(s.shape),m=s.shape.length,h=e.util.computeStrides(s.shape),f=e.util.sizeFromShape(n),x=n.length,y=e.util.computeStrides(n),g=e.util.getTypedArrayFromDType(s.dtype,f);0!==i&&g.fill(i);for(let t=0;t<c;t++){const a=e.util.indexToLoc(t,m,h).map((e,t)=>e+u[t]);g[e.util.locToIndex(a,x,y)]=l[t]}return{dataId:o.write(g,n,s.dtype),shape:n,dtype:s.dtype}}const p={kernelName:e.PadV2,backendName:"cpu",kernelFunc:a};exports.padV2Config=p;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"kJ6Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powConfig=exports.pow=exports.powImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const p=(0,r.createSimpleBinaryKernelImpl)((e,r)=>Math.pow(e,r));exports.powImpl=p;const t=(0,o.binaryKernelFunc)(e.Pow,p);exports.pow=t;const n={kernelName:e.Pow,backendName:"cpu",kernelFunc:t};exports.powConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"Ms2u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=n,exports.rangeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Range_impl");function n(e){const{backend:n,attrs:t}=e,{start:o,stop:s,dtype:a,step:p}=t,c=(0,r.rangeImpl)(o,s,p,a);return n.makeTensorInfo([c.length],a,c)}const t={kernelName:e.Range,backendName:"cpu",kernelFunc:n};exports.rangeConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./Range_impl":"N0y5"}],"gvWP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const c=(0,r.unaryKernelFunc)(e.Reciprocal,e=>1/e);exports.reciprocal=c;const o={kernelName:e.Reciprocal,backendName:"cpu",kernelFunc:c};exports.reciprocalConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"EUBW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=r,exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:a,backend:i,attrs:o}=r,{images:s}=a,{alignCorners:n,halfPixelCenters:l,size:c}=o;(0,t.assertNotComplex)(s,"resizeBilinear");const u=e.util.computeStrides(s.shape),[f,p]=c,[h,m,d,M]=s.shape,x=i.data.get(s.dataId).values,z=new Float32Array(e.util.sizeFromShape([h,f,p,M])),g=[n&&f>1?m-1:m,n&&p>1?d-1:d],k=[n&&f>1?f-1:f,n&&p>1?p-1:p];let B=0;const C=g[0]/k[0],v=g[1]/k[1];for(let e=0;e<h;e++)for(let t=0;t<f;t++){let r;r=l?C*(t+.5)-.5:C*t;const a=Math.max(0,Math.floor(r)),i=r-a,o=Math.min(m-1,Math.ceil(r)),s=e*u[0]+a*u[1],n=e*u[0]+o*u[1];for(let e=0;e<p;e++){let t;t=l?v*(e+.5)-.5:v*e;const r=Math.max(0,Math.floor(t)),a=t-r,o=Math.min(d-1,Math.ceil(t)),c=s+r*u[2],f=n+r*u[2],p=s+o*u[2],h=n+o*u[2];for(let e=0;e<M;e++){const t=x[c+e],r=x[f+e],o=t+(x[p+e]-t)*a,s=o+(r+(x[h+e]-r)*a-o)*i;z[B++]=s}}}return i.makeTensorInfo([h,f,p,M],"float32",z)}const a={kernelName:e.ResizeBilinear,backendName:"cpu",kernelFunc:r};exports.resizeBilinearConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"SmUw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGrad=t,exports.resizeBilinearGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util");function t(t){const{inputs:a,backend:o,attrs:i}=t,{images:s,dy:n}=a,{alignCorners:l}=i;(0,r.assertNotComplex)([n,s],"resizeBilinearGrad");const c=e.util.computeStrides(s.shape),[d,u,f,p]=s.shape,[,h,m]=n.shape,M=new Float32Array(d*u*f*p),g=[l&&h>1?u-1:u,l&&m>1?f-1:f],k=[l&&h>1?h-1:h,l&&m>1?m-1:m],x=g[0]/k[0],z=g[1]/k[1],B=o.data.get(n.dataId).values;let G=0;for(let e=0;e<d;e++){const r=e*c[0];for(let e=0;e<h;e++){const t=e*x,a=Math.floor(t),o=Math.min(Math.ceil(t),u-1),i=r+a*c[1],s=r+o*c[1],n=t-a,l=1-n;for(let e=0;e<m;e++){const r=e*z,t=Math.floor(r),a=Math.min(Math.ceil(r),f-1),o=r-t,d=1-o,u=i+t*c[2],h=i+a*c[2],m=s+t*c[2],g=s+a*c[2],k=l*d,x=l*o,v=n*d,C=n*o;for(let e=0;e<p;e++){const r=B[G++];M[u+e]+=r*k,M[h+e]+=r*x,M[m+e]+=r*v,M[g+e]+=r*C}}}}return o.makeTensorInfo([d,f,u,p],"float32",M)}const a={kernelName:e.ResizeBilinearGrad,backendName:"cpu",kernelFunc:t};exports.resizeBilinearGradConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"IxLC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=r,exports.resizeNearestNeighborConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:s,attrs:a}=r,{images:n}=o,{alignCorners:i,halfPixelCenters:l,size:c}=a;(0,t.assertNotComplex)(n,"resizeNearestNeighbor");const u=e.util.computeStrides(n.shape),[h,f]=c,[p,N,d,g]=n.shape,m=s.data.get(n.dataId).values,M=new Float32Array(p*h*f*g),b=[i&&h>1?N-1:N,i&&f>1?d-1:d],x=[i&&h>1?h-1:h,i&&f>1?f-1:f],z=b[0]/x[0],k=b[1]/x[1];let C=0;for(let e=0;e<p;e++){const t=e*u[0];for(let e=0;e<h;e++){const r=l?z*(e+.5):z*e;let o=Math.min(N-1,i?Math.round(r):Math.floor(r));l&&(o=Math.max(0,o));const s=t+o*u[1];for(let e=0;e<f;e++){const t=l?k*(e+.5):k*e;let r=Math.min(d-1,i?Math.round(t):Math.floor(t));l&&(r=Math.max(0,r));const o=s+r*u[2];for(let e=0;e<g;e++){const t=m[o+e];M[C++]=t}}}}return s.makeTensorInfo([p,h,f,g],n.dtype,M)}const o={kernelName:e.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:r};exports.resizeNearestNeighborConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"A4SI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGrad=r,exports.resizeNearestNeighborGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:a,attrs:s}=r,{images:n,dy:i}=o,{alignCorners:l}=s;(0,t.assertNotComplex)([i,n],"resizeNearestNeighborGrad");const c=e.util.computeStrides(n.shape),f=e.util.computeStrides(i.shape),[h,u,d,p]=n.shape,[,M,N]=i.shape,g=new Float32Array(h*u*d*p),m=a.data.get(i.dataId).values,b=[l&&M>1?u-1:u,l&&N>1?d-1:d],k=[l&&M>1?M-1:M,l&&N>1?N-1:N],x=b[0]/k[0],z=b[1]/k[1],G=1/x,v=1/z,y=2*Math.ceil(G)+2,C=2*Math.ceil(v)+2;for(let e=0;e<h;e++){const t=e*c[0];for(let e=0;e<u;e++){const r=t+e*c[1],o=Math.floor(e*G),a=Math.floor(o-y/2);for(let s=0;s<d;s++){const o=r+s*c[2],n=Math.floor(s*v),i=Math.floor(n-C/2);for(let r=0;r<p;r++){let n=0;for(let o=0;o<y;o++){const c=o+a;if(c<0||c>=M)continue;const h=t+c*f[1],p=c*x;if(e===Math.min(u-1,l?Math.round(p):Math.floor(p)))for(let e=0;e<C;e++){const t=e+i;if(t<0||t>=N)continue;const o=h+t*f[2],a=t*z;s===Math.min(d-1,l?Math.round(a):Math.floor(a))&&(n+=m[o+r])}}g[o+r]=n}}}}return a.makeTensorInfo(n.shape,n.dtype,g)}const o={kernelName:e.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:r};exports.resizeNearestNeighborGradConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"uKst":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=t,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util"),s=require("./Identity");function t(t){const{inputs:n,backend:o,attrs:i}=t,{x:a}=n,{dims:c}=i;(0,r.assertNotComplex)(a,"reverse");const u=a.shape.length,p=e.util.parseAxisParam(c,a.shape);if(0===u)return(0,s.identity)({inputs:{x:a},backend:o});const f=new e.TensorBuffer(a.shape,a.dtype),d=o.bufferSync(a);for(let e=0;e<f.size;e++){const r=f.indexToLoc(e),s=r.slice();p.forEach(e=>s[e]=a.shape[e]-1-s[e]),f.set(d.get(...s),...r)}return o.makeTensorInfo(f.shape,f.dtype,f.values)}const n={kernelName:e.Reverse,backendName:"cpu",kernelFunc:t};exports.reverseConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Identity":"Fyri"}],"QVVA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:t,attrs:a,backend:r})=>{const{image:o}=t,{radians:s,fillValue:n,center:i}=a,d=r,p=e.util.getTypedArrayFromDType(o.dtype,e.util.sizeFromShape(o.shape)),[f,l,c,u]=o.shape,[h,y]=e.backend_util.getImageCenter(i,l,c),g=Math.sin(s),m=Math.cos(s),b=d.data.get(o.dataId).values;for(let e=0;e<f;e++){const t=e*c*l*u;for(let e=0;e<l;e++){const a=e*(c*u);for(let r=0;r<c;r++){const o=r*u;for(let s=0;s<u;s++){const i=[f,e,r,s],d=i[2],k=i[1];let M=(d-h)*m-(k-y)*g,v=(d-h)*g+(k-y)*m;M=Math.round(M+h),v=Math.round(v+y);let O=n;if("number"!=typeof n&&(O=3===s?255:n[s]),M>=0&&M<c&&v>=0&&v<l){O=b[t+v*(c*u)+M*u+s]}p[t+a+o+s]=O}}}}return{dataId:d.write(p,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.rotateWithOffsetConfig=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"BkfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const o=(0,r.unaryKernelFunc)(e.Round,e=>{const r=Math.floor(e);return e-r<.5?Math.floor(e):e-r>.5?Math.ceil(e):r%2==0?r:r+1});exports.round=o;const n={kernelName:e.Round,backendName:"cpu",kernelFunc:o};exports.roundConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"MQOZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s,n,l,u,f,i,a){const c=[s/n,n],d=t.values,v=r.values;if(0===s)return(0,e.buffer)(o,r.dtype);const p=(0,e.buffer)(c,r.dtype);p.values.fill(i);for(let e=0;e<l;e++){const t=[];let l=0;for(let r=0;r<u;r++){const o=d[e*u+r];t.push(o),l+=o*f[r]}if(l<0||l>=s/n)throw new Error(`Invalid indices: ${t} does not index into ${o}`);for(let o=0;o<n;o++)a?p.values[l*n+o]+=v[e*n+o]:p.values[l*n+o]=0===r.rank?v[0]:v[e*n+o]}return p}
},{"@tensorflow/tfjs-core":"tc6m"}],"oXq2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNd=r,exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Scatter_impl");function r(r){const{inputs:s,backend:c,attrs:a}=r,{indices:n,updates:u}=s,{shape:i}=a,{sliceRank:o,numUpdates:d,sliceSize:p,strides:l,outputSize:f}=e.backend_util.calculateShapes(u,n,i),k=c.bufferSync(n),S=c.bufferSync(u),b=(0,t.scatterImpl)(k,S,i,f,p,d,o,l,0,!0);return c.makeTensorInfo(i,b.dtype,b.values)}const s={kernelName:e.ScatterNd,backendName:"cpu",kernelFunc:r};exports.scatterNdConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./Scatter_impl":"MQOZ"}],"Y8mA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=s,exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(s){const{inputs:a,backend:o}=s,{condition:r,t:l,e:n}=a;(0,t.assertNotComplex)([r,l,n],"select");const c=r.shape.length,p=o.data.get(r.dataId).values,u=o.data.get(l.dataId).values,d=o.data.get(n.dataId).values,i=(0,e.upcastType)(l.dtype,n.dtype),h=e.util.makeZerosTypedArray(e.util.sizeFromShape(l.shape),i);let f=0;const g=0===c||c>1||1===l.shape.length?1:e.util.sizeFromShape(l.shape.slice(1));for(let e=0;e<p.length;e++)for(let t=0;t<g;t++)1===p[e]?h[f++]=u[e]:h[f++]=d[e];return o.makeTensorInfo(l.shape,i,h)}const a={kernelName:e.Select,backendName:"cpu",kernelFunc:s};exports.selectConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"ibTb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=e.backend_util.SELU_SCALEALPHA,s=e.backend_util.SELU_SCALE,t=(0,r.unaryKernelFunc)(e.Selu,e=>e>=0?s*e:u*(Math.exp(e)-1));exports.selu=t;const l={kernelName:e.Selu,backendName:"cpu",kernelFunc:t};exports.seluConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"tM8u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_utils");const o=(0,i.unaryKernelFunc)(e.Sigmoid,e=>1/(1+Math.exp(-e)));exports.sigmoid=o;const r={kernelName:e.Sigmoid,backendName:"cpu",kernelFunc:o};exports.sigmoidConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"rAH0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sign,e=>e<0?-1:e>0?1:0);exports.sign=r;const s={kernelName:e.Sign,backendName:"cpu",kernelFunc:r};exports.signConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"ox7p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sin,e=>Math.sin(e));exports.sin=r;const s={kernelName:e.Sin,backendName:"cpu",kernelFunc:r};exports.sinConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"d0K6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sinh,e=>Math.sinh(e));exports.sinh=r;const s={kernelName:e.Sinh,backendName:"cpu",kernelFunc:r};exports.sinhConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"FnBP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const s=1.1920928955078125e-7,o=Math.log(s)+2,r=(0,t.unaryKernelFunc)(e.Softplus,e=>{const t=e>-o,s=e<o,r=Math.exp(e);let u;return u=s?r:t?e:Math.log(1+r)});exports.softplus=r;const u={kernelName:e.Softplus,backendName:"cpu",kernelFunc:r};exports.softplusConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"azMN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=r,exports.spaceToBatchNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./PadV2"),a=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:p,backend:o,attrs:c}=r,{x:i}=p,{blockShape:u,paddings:d}=c;(0,t.assertNotComplex)([i],"spaceToBatchND");const h=e.util.sizeFromShape(u),l=[[0,0]];l.push(...d);for(let e=1+u.length;e<i.shape.length;++e)l.push([0,0]);const k=s.padV2Config.kernelFunc({inputs:{x:i},backend:o,attrs:{paddings:l,constantValue:0}}),g=e.backend_util.getReshaped(k.shape,u,h,!1),b=e.backend_util.getPermuted(g.length,u.length,!1),f=e.backend_util.getReshapedPermuted(k.shape,u,h,!1),m={x:k},x={shape:g},T=(0,a.reshape)({inputs:m,backend:o,attrs:x}),N={x:T},I={perm:b},_=(0,n.transpose)({inputs:N,backend:o,attrs:I}),q={x:_},B={shape:f},D=(0,a.reshape)({inputs:q,backend:o,attrs:B});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(_),D}const p={kernelName:e.SpaceToBatchND,backendName:"cpu",kernelFunc:r};exports.spaceToBatchNDConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./PadV2":"nx6M","./Reshape":"SVZg","./Transpose":"bZg9"}],"ywCH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=t,exports.sparseToDenseConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Scatter_impl");function t(t){const{inputs:a,backend:r,attrs:n}=t,{sparseIndices:u,sparseValues:o,defaultValue:p}=a,{outputShape:c}=n,{sliceRank:i,numUpdates:l,sliceSize:d,strides:f,outputSize:S}=e.backend_util.calculateShapes(o,u,c),k=r.bufferSync(u),b=r.bufferSync(o),m=r.data.get(p.dataId).values[0],v=(0,s.scatterImpl)(k,b,c,S,d,l,i,f,m,!1);return r.makeTensorInfo(c,v.dtype,v.values)}const a={kernelName:e.SparseToDense,backendName:"cpu",kernelFunc:t};exports.sparseToDenseConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","./Scatter_impl":"MQOZ"}],"yJk1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,backend:i,attrs:n}=s,{x:p}=r,{numOrSizeSplits:a,axis:l}=n,c=e.util.parseAxisParam(l,p.shape)[0],o=e.backend_util.prepareSplitSize(p,a,c),u=new Array(p.shape.length).fill(0),x=p.shape.slice();return o.map(e=>{const s=[...x];s[c]=e;const r=(0,t.slice)({inputs:{x:p},backend:i,attrs:{begin:u,size:s}});return u[c]+=e,r})}const r={kernelName:e.SplitV,backendName:"cpu",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Slice":"Pog2"}],"fe9g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=exports.sqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const t=(0,r.unaryKernelFunc)(e.Sqrt,e=>Math.sqrt(e));exports.sqrt=t;const s={kernelName:e.Sqrt,backendName:"cpu",kernelFunc:t};exports.sqrtConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"P37N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");const r={kernelName:e.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:r})=>{const{x:a}=e,s=r;(0,t.assertNotComplex)(a,"square");const o=s.data.get(a.dataId).values,n=new Float32Array(o.length);for(let t=0;t<o.length;++t){const e=o[t];n[t]=e*e}return{dataId:s.write(n,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.squareConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"X69z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepConfig=exports.step=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const r=(0,t.unaryKernelFunc)(e.Step,(e,t)=>{const r=t;return isNaN(e)?NaN:e>0?1:r.alpha});exports.step=r;const s={kernelName:e.Step,backendName:"cpu",kernelFunc:r};exports.stepConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"AeFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=r,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../cpu_util"),i=require("./Reshape"),t=require("./Slice"),n=require("./StridedSlice_impl");function r(r){const{inputs:a,backend:o,attrs:d}=r,{x:p}=a,{begin:c,end:l,strides:u,beginMask:f,endMask:k,ellipsisMask:S,newAxisMask:b,shrinkAxisMask:h}=d;(0,s.assertNotComplex)(p,"stridedSlice");const{nonStrided:x,$begin:m,$strides:I,size:g,newShape:M,outShape:q}=e.slice_util.sliceInfo(p.shape,c,l,u,f,k,S,b,h),T=(0,i.reshape)({inputs:{x:p},backend:o,attrs:{shape:M}});let _;if(x){const e=(0,t.slice)({inputs:{x:T},backend:o,attrs:{begin:m,size:g}});_=(0,i.reshape)({inputs:{x:e},backend:o,attrs:{shape:q}}),o.disposeIntermediateTensorInfo(e)}else if(q.some(e=>0===e))_=o.makeTensorInfo(q,p.dtype,[]);else{const e=o.bufferSync(T),s=(0,n.stridedSliceImpl)(q,e,I,m);_=o.makeTensorInfo(s.shape,s.dtype,s.values)}const v=(0,i.reshape)({inputs:{x:_},backend:o,attrs:{shape:q}});return o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(_),v}const a={kernelName:e.StridedSlice,backendName:"cpu",kernelFunc:r};exports.stridedSliceConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Reshape":"SVZg","./Slice":"Pog2","./StridedSlice_impl":"t7QJ"}],"hepf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tan,e=>Math.tan(e));exports.tan=t;const r={kernelName:e.Tan,backendName:"cpu",kernelFunc:t};exports.tanConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"PBCX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tanh,e=>Math.tanh(e));exports.tanh=t;const r={kernelName:e.Tanh,backendName:"cpu",kernelFunc:t};exports.tanhConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_utils":"uG3T"}],"NWyQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=o,exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),r=require("./Tile_impl");function o(e){const{inputs:o,backend:s,attrs:i}=e,{x:n}=o,{reps:l}=i;(0,t.assertNotComplex)(n,"tile");const u=(0,r.tileImpl)(s.bufferSync(n),l);return s.makeTensorInfo(u.shape,u.dtype,u.values)}const s={kernelName:e.Tile,backendName:"cpu",kernelFunc:o};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Tile_impl":"r7Er"}],"cBRR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topK=r,exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("./TopK_impl");function r(e){const{inputs:r,backend:s,attrs:p}=e,{x:a}=r,{k:n,sorted:u}=p;(0,t.assertNotComplex)(a,"topk");const c=s.data.get(a.dataId).values,[d,i]=(0,o.topKImpl)(c,a.shape,a.dtype,n,u);return[s.makeTensorInfo(d.shape,d.dtype,d.values),s.makeTensorInfo(i.shape,i.dtype,i.values)]}const s={kernelName:e.TopK,backendName:"cpu",kernelFunc:r};exports.topKConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./TopK_impl":"QzYa"}],"BWA3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=n,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),u=require("./Unique_impl");function n(e){const{inputs:n,attrs:o,backend:r}=e,{axis:i}=o,{x:s}=n;(0,t.assertNotComplex)(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:p,outputShape:c,indices:l}=(0,u.uniqueImpl)(a,i,s.shape,s.dtype);return[r.makeTensorInfo(c,s.dtype,p),r.makeTensorInfo([l.length],"int32",l)]}const o={kernelName:e.Unique,backendName:"cpu",kernelFunc:n};exports.uniqueConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Unique_impl":"IsnU"}],"dwft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=t,exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Reshape"),s=require("./Slice");function t(e){const{inputs:t,backend:r,attrs:a}=e,{value:o}=t;let{axis:c}=a;c<0&&(c+=o.shape.length);const p=o.shape.length,i=o.shape[c],l=new Array(p-1);let u=0;for(let n=0;n<p;n++)n!==c&&(l[u++]=o.shape[n]);const h=new Array(p).fill(0),f=o.shape.slice();f[c]=1;const k=new Array(i);for(let d=0;d<k.length;d++){h[c]=d;const e=(0,s.slice)({inputs:{x:o},backend:r,attrs:{begin:h,size:f}});k[d]=(0,n.reshape)({inputs:{x:e},backend:r,attrs:{shape:l}}),r.disposeIntermediateTensorInfo(e)}return k}const r={kernelName:e.Unpack,backendName:"cpu",kernelFunc:t};exports.unpackConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"SVZg","./Slice":"Pog2"}],"Mmz1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=o,exports.unsortedSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Cast"),n=require("./Equal"),u=require("./ExpandDims"),r=require("./Multiply"),a=require("./Pack"),i=require("./Sum");function o(o){const{inputs:p,backend:c,attrs:m}=o,{x:d,segmentIds:l}=p,{numSegments:k}=m;(0,t.assertNotComplex)(d,"unsortedSegmentSum");const S=[],f=[],h=d.shape.length-l.shape.length;let x=l;for(let e=0;e<h;++e){const t=(0,u.expandDims)({inputs:{input:x},backend:c,attrs:{dim:e+1}});x=t,f.push(t)}for(let t=0;t<k;++t){const u=e.util.createScalarValue(t,"int32"),a=c.makeTensorInfo([],"int32",u),o=(0,n.equal)({inputs:{a:a,b:x},backend:c}),p=(0,s.cast)({inputs:{x:o},backend:c,attrs:{dtype:"float32"}}),m=(0,r.multiply)({inputs:{a:p,b:d},backend:c}),l=(0,i.sum)({inputs:{x:m},backend:c,attrs:{axis:0,keepDims:!1}});S.push(l),f.push(a),f.push(o),f.push(p),f.push(m),f.push(l)}const b=(0,a.pack)({inputs:S,backend:c,attrs:{axis:0}});return f.forEach(e=>c.disposeIntermediateTensorInfo(e)),b}const p={kernelName:e.UnsortedSegmentSum,backendName:"cpu",kernelFunc:o};exports.unsortedSegmentSumConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Cast":"qg0y","./Equal":"dh2X","./ExpandDims":"GjMh","./Multiply":"SyJk","./Pack":"xpNQ","./Sum":"Elst"}],"Iy4x":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),l=require("./kernels/Add"),s=require("./kernels/AddN"),u=require("./kernels/All"),g=require("./kernels/Any"),a=require("./kernels/ArgMax"),f=require("./kernels/ArgMin"),k=require("./kernels/Asin"),C=require("./kernels/Asinh"),q=require("./kernels/Atan"),t=require("./kernels/Atan2"),p=require("./kernels/Atanh"),c=require("./kernels/AvgPool"),d=require("./kernels/AvgPool3D"),m=require("./kernels/AvgPool3DGrad"),D=require("./kernels/AvgPoolGrad"),h=require("./kernels/BatchMatMul"),v=require("./kernels/BatchNorm"),N=require("./kernels/BatchToSpaceND"),S=require("./kernels/Bincount"),x=require("./kernels/Cast"),M=require("./kernels/Ceil"),B=require("./kernels/Clip"),A=require("./kernels/Complex"),P=require("./kernels/ComplexAbs"),R=require("./kernels/Concat"),F=require("./kernels/Conv2D"),G=require("./kernels/Conv2DBackpropFilter"),L=require("./kernels/Conv2DBackpropInput"),I=require("./kernels/Conv3D"),V=require("./kernels/Conv3DBackpropFilterV2"),T=require("./kernels/Conv3DBackpropInputV2"),b=require("./kernels/Cos"),E=require("./kernels/Cosh"),w=require("./kernels/CropAndResize"),z=require("./kernels/Cumsum"),y=require("./kernels/DenseBincount"),O=require("./kernels/DepthToSpace"),W=require("./kernels/DepthwiseConv2dNative"),K=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),U=require("./kernels/DepthwiseConv2dNativeBackpropInput"),H=require("./kernels/Diag"),_=require("./kernels/Dilation2D"),j=require("./kernels/Dilation2DBackpropFilter"),Z=require("./kernels/Dilation2DBackpropInput"),J=require("./kernels/Elu"),Q=require("./kernels/EluGrad"),X=require("./kernels/Equal"),Y=require("./kernels/Erf"),$=require("./kernels/Exp"),ee=require("./kernels/ExpandDims"),re=require("./kernels/Expm1"),ie=require("./kernels/FFT"),ne=require("./kernels/Fill"),oe=require("./kernels/FlipLeftRight"),le=require("./kernels/Floor"),se=require("./kernels/FloorDiv"),ue=require("./kernels/FusedConv2D"),ge=require("./kernels/FusedDepthwiseConv2D"),ae=require("./kernels/GatherNd"),fe=require("./kernels/GatherV2"),ke=require("./kernels/Greater"),Ce=require("./kernels/GreaterEqual"),qe=require("./kernels/Identity"),te=require("./kernels/IFFT"),pe=require("./kernels/Imag"),ce=require("./kernels/IsFinite"),de=require("./kernels/IsInf"),me=require("./kernels/IsNaN"),De=require("./kernels/LeakyRelu"),he=require("./kernels/Less"),ve=require("./kernels/LessEqual"),Ne=require("./kernels/LinSpace"),Se=require("./kernels/Log"),xe=require("./kernels/Log1p"),Me=require("./kernels/LogicalAnd"),Be=require("./kernels/LogicalNot"),Ae=require("./kernels/LogicalOr"),Pe=require("./kernels/LRN"),Re=require("./kernels/LRNGrad"),Fe=require("./kernels/Max"),Ge=require("./kernels/Maximum"),Le=require("./kernels/MaxPool"),Ie=require("./kernels/MaxPool3D"),Ve=require("./kernels/MaxPool3DGrad"),Te=require("./kernels/MaxPoolGrad"),be=require("./kernels/MaxPoolWithArgmax"),Ee=require("./kernels/Mean"),we=require("./kernels/Min"),ze=require("./kernels/Minimum"),ye=require("./kernels/MirrorPad"),Oe=require("./kernels/Mod"),We=require("./kernels/Multinomial"),Ke=require("./kernels/Multiply"),Ue=require("./kernels/Neg"),He=require("./kernels/NonMaxSuppressionV3"),_e=require("./kernels/NonMaxSuppressionV4"),je=require("./kernels/NonMaxSuppressionV5"),Ze=require("./kernels/NotEqual"),Je=require("./kernels/OneHot"),Qe=require("./kernels/OnesLike"),Xe=require("./kernels/Pack"),Ye=require("./kernels/PadV2"),$e=require("./kernels/Pow"),er=require("./kernels/Prelu"),rr=require("./kernels/Prod"),ir=require("./kernels/Range"),nr=require("./kernels/Real"),or=require("./kernels/RealDiv"),lr=require("./kernels/Reciprocal"),sr=require("./kernels/Relu"),ur=require("./kernels/Relu6"),gr=require("./kernels/Reshape"),ar=require("./kernels/ResizeBilinear"),fr=require("./kernels/ResizeBilinearGrad"),kr=require("./kernels/ResizeNearestNeighbor"),Cr=require("./kernels/ResizeNearestNeighborGrad"),qr=require("./kernels/Reverse"),tr=require("./kernels/RotateWithOffset"),pr=require("./kernels/Round"),cr=require("./kernels/Rsqrt"),dr=require("./kernels/ScatterNd"),mr=require("./kernels/Select"),Dr=require("./kernels/Selu"),hr=require("./kernels/Sigmoid"),vr=require("./kernels/Sign"),Nr=require("./kernels/Sin"),Sr=require("./kernels/Sinh"),xr=require("./kernels/Slice"),Mr=require("./kernels/Softmax"),Br=require("./kernels/Softplus"),Ar=require("./kernels/SpaceToBatchND"),Pr=require("./kernels/SparseToDense"),Rr=require("./kernels/SplitV"),Fr=require("./kernels/Sqrt"),Gr=require("./kernels/Square"),Lr=require("./kernels/SquaredDifference"),Ir=require("./kernels/Step"),Vr=require("./kernels/StridedSlice"),Tr=require("./kernels/Sub"),br=require("./kernels/Sum"),Er=require("./kernels/Tan"),wr=require("./kernels/Tanh"),zr=require("./kernels/Tile"),yr=require("./kernels/TopK"),Or=require("./kernels/Transpose"),Wr=require("./kernels/Unique"),Kr=require("./kernels/Unpack"),Ur=require("./kernels/UnsortedSegmentSum"),Hr=require("./kernels/ZerosLike");const _r=[r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,l.addConfig,s.addNConfig,u.allConfig,g.anyConfig,a.argMaxConfig,f.argMinConfig,k.asinConfig,C.asinhConfig,q.atanConfig,t.atan2Config,p.atanhConfig,c.avgPoolConfig,d.avgPool3DConfig,m.avgPool3DGradConfig,D.avgPoolGradConfig,h.batchMatMulConfig,v.batchNormConfig,N.batchToSpaceNDConfig,S.bincountConfig,x.castConfig,M.ceilConfig,B.clipConfig,A.complexConfig,P.complexAbsConfig,R.concatConfig,G.conv2DBackpropFilterConfig,L.conv2DBackpropInputConfig,F.conv2DConfig,V.conv3DBackpropFilterV2Config,T.conv3DBackpropInputV2Config,I.conv3DConfig,b.cosConfig,E.coshConfig,w.cropAndResizeConfig,z.cumsumConfig,y.denseBincountConfig,O.depthToSpaceConfig,W.depthwiseConv2dNativeConfig,K.depthwiseConv2dNativeBackpropFilterConfig,U.depthwiseConv2dNativeBackpropInputConfig,H.diagConfig,_.dilation2dConfig,Z.dilation2dBackpropInputConfig,j.dilation2dBackpropFilterConfig,or.realDivConfig,J.eluConfig,Q.eluGradConfig,X.equalConfig,Y.erfConfig,$.expConfig,ee.expandDimsConfig,re.expm1Config,ie.fftConfig,ne.fillConfig,oe.flipLeftRightConfig,le.floorConfig,se.floorDivConfig,ue.fusedConv2DConfig,ge.fusedDepthwiseConv2DConfig,ae.gatherNdConfig,fe.gatherV2Config,ke.greaterConfig,Ce.greaterEqualConfig,qe.identityConfig,te.ifftConfig,pe.imagConfig,ce.isFiniteConfig,de.isInfConfig,me.isNaNConfig,De.leakyReluConfig,he.lessConfig,ve.lessEqualConfig,Ne.linSpaceConfig,Se.logConfig,xe.log1pConfig,Me.logicalAndConfig,Be.logicalNotConfig,Ae.logicalOrConfig,Pe.lRNConfig,Re.lRNGradConfig,Ge.maximumConfig,Le.maxPoolConfig,Ie.maxPool3DConfig,Ve.maxPool3DGradConfig,Te.maxPoolGradConfig,be.maxPoolWithArgmaxConfig,Fe.maxConfig,Ee.meanConfig,we.minConfig,ze.minimumConfig,ye.mirrorPadConfig,Oe.modConfig,We.multinomialConfig,Ke.multiplyConfig,Ue.negConfig,He.nonMaxSuppressionV3Config,_e.nonMaxSuppressionV4Config,je.nonMaxSuppressionV5Config,Ze.notEqualConfig,Je.oneHotConfig,Qe.onesLikeConfig,Xe.packConfig,Ye.padV2Config,$e.powConfig,er.preluConfig,rr.prodConfig,ir.rangeConfig,nr.realConfig,lr.reciprocalConfig,sr.reluConfig,ur.relu6Config,gr.reshapeConfig,ar.resizeBilinearConfig,fr.resizeBilinearGradConfig,kr.resizeNearestNeighborConfig,Cr.resizeNearestNeighborGradConfig,qr.reverseConfig,tr.rotateWithOffsetConfig,pr.roundConfig,cr.rsqrtConfig,dr.scatterNdConfig,mr.selectConfig,Dr.seluConfig,hr.sigmoidConfig,vr.signConfig,Nr.sinConfig,Sr.sinhConfig,xr.sliceConfig,Mr.softmaxConfig,Br.softplusConfig,Ar.spaceToBatchNDConfig,Pr.sparseToDenseConfig,Rr.splitVConfig,Fr.sqrtConfig,Gr.squareConfig,Lr.squaredDifferenceConfig,Ir.stepConfig,Vr.stridedSliceConfig,Tr.subConfig,br.sumConfig,Er.tanConfig,wr.tanhConfig,zr.tileConfig,yr.topKConfig,Or.transposeConfig,Wr.uniqueConfig,Kr.unpackConfig,Ur.unsortedSegmentSumConfig,Hr.zerosLikeConfig];for(const jr of _r)(0,e.registerKernel)(jr);
},{"@tensorflow/tfjs-core":"tc6m","./kernels/_FusedMatMul":"j64o","./kernels/Abs":"EOu3","./kernels/Acos":"uRRw","./kernels/Acosh":"neCb","./kernels/Add":"aUQi","./kernels/AddN":"fo9H","./kernels/All":"NeFx","./kernels/Any":"tjST","./kernels/ArgMax":"whlU","./kernels/ArgMin":"mecE","./kernels/Asin":"NYXs","./kernels/Asinh":"JC8f","./kernels/Atan":"V6fo","./kernels/Atan2":"WPuq","./kernels/Atanh":"E8Ii","./kernels/AvgPool":"ruJT","./kernels/AvgPool3D":"FWnK","./kernels/AvgPool3DGrad":"XjjJ","./kernels/AvgPoolGrad":"bIUn","./kernels/BatchMatMul":"rygW","./kernels/BatchNorm":"Aa0Q","./kernels/BatchToSpaceND":"tSN6","./kernels/Bincount":"N0FU","./kernels/Cast":"qg0y","./kernels/Ceil":"RbeZ","./kernels/Clip":"q2il","./kernels/Complex":"mGbr","./kernels/ComplexAbs":"tISz","./kernels/Concat":"YWb4","./kernels/Conv2D":"iHLP","./kernels/Conv2DBackpropFilter":"DYBF","./kernels/Conv2DBackpropInput":"UEkT","./kernels/Conv3D":"cHuk","./kernels/Conv3DBackpropFilterV2":"ZvYi","./kernels/Conv3DBackpropInputV2":"gxyo","./kernels/Cos":"lhKB","./kernels/Cosh":"gNxy","./kernels/CropAndResize":"Ezb1","./kernels/Cumsum":"uVMc","./kernels/DenseBincount":"JTeC","./kernels/DepthToSpace":"fcaL","./kernels/DepthwiseConv2dNative":"nfuA","./kernels/DepthwiseConv2dNativeBackpropFilter":"BR4d","./kernels/DepthwiseConv2dNativeBackpropInput":"e7S3","./kernels/Diag":"uX1z","./kernels/Dilation2D":"N0iv","./kernels/Dilation2DBackpropFilter":"WxeS","./kernels/Dilation2DBackpropInput":"dpjq","./kernels/Elu":"qyBK","./kernels/EluGrad":"tXTa","./kernels/Equal":"dh2X","./kernels/Erf":"z3eB","./kernels/Exp":"RWap","./kernels/ExpandDims":"GjMh","./kernels/Expm1":"KHQU","./kernels/FFT":"P4N1","./kernels/Fill":"A8l9","./kernels/FlipLeftRight":"k0nT","./kernels/Floor":"W4sW","./kernels/FloorDiv":"GdQU","./kernels/FusedConv2D":"saT9","./kernels/FusedDepthwiseConv2D":"sHQY","./kernels/GatherNd":"nJ8P","./kernels/GatherV2":"LnKQ","./kernels/Greater":"dYhv","./kernels/GreaterEqual":"G76X","./kernels/Identity":"Fyri","./kernels/IFFT":"ebBe","./kernels/Imag":"Lk6f","./kernels/IsFinite":"vrFX","./kernels/IsInf":"tG90","./kernels/IsNaN":"vwsp","./kernels/LeakyRelu":"X7FT","./kernels/Less":"ZgLX","./kernels/LessEqual":"opLN","./kernels/LinSpace":"HCUU","./kernels/Log":"F40R","./kernels/Log1p":"UckU","./kernels/LogicalAnd":"ns11","./kernels/LogicalNot":"VtLB","./kernels/LogicalOr":"qXPb","./kernels/LRN":"WY1K","./kernels/LRNGrad":"ZpBS","./kernels/Max":"p4SG","./kernels/Maximum":"g8Wa","./kernels/MaxPool":"Qrjn","./kernels/MaxPool3D":"jH2m","./kernels/MaxPool3DGrad":"kfKR","./kernels/MaxPoolGrad":"c7bW","./kernels/MaxPoolWithArgmax":"jxcV","./kernels/Mean":"tB29","./kernels/Min":"Zzwg","./kernels/Minimum":"mPmM","./kernels/MirrorPad":"h3vA","./kernels/Mod":"OI15","./kernels/Multinomial":"fpeR","./kernels/Multiply":"SyJk","./kernels/Neg":"NmyW","./kernels/NonMaxSuppressionV3":"M7yX","./kernels/NonMaxSuppressionV4":"N3CZ","./kernels/NonMaxSuppressionV5":"nMlJ","./kernels/NotEqual":"l8fw","./kernels/OneHot":"unSv","./kernels/OnesLike":"GMg8","./kernels/Pack":"xpNQ","./kernels/PadV2":"nx6M","./kernels/Pow":"kJ6Q","./kernels/Prelu":"VJyU","./kernels/Prod":"jzsq","./kernels/Range":"Ms2u","./kernels/Real":"M7V4","./kernels/RealDiv":"wNwL","./kernels/Reciprocal":"gvWP","./kernels/Relu":"EplF","./kernels/Relu6":"MXC7","./kernels/Reshape":"SVZg","./kernels/ResizeBilinear":"EUBW","./kernels/ResizeBilinearGrad":"SmUw","./kernels/ResizeNearestNeighbor":"IxLC","./kernels/ResizeNearestNeighborGrad":"A4SI","./kernels/Reverse":"uKst","./kernels/RotateWithOffset":"QVVA","./kernels/Round":"BkfE","./kernels/Rsqrt":"ftC2","./kernels/ScatterNd":"oXq2","./kernels/Select":"Y8mA","./kernels/Selu":"ibTb","./kernels/Sigmoid":"tM8u","./kernels/Sign":"rAH0","./kernels/Sin":"ox7p","./kernels/Sinh":"d0K6","./kernels/Slice":"Pog2","./kernels/Softmax":"uZBo","./kernels/Softplus":"FnBP","./kernels/SpaceToBatchND":"azMN","./kernels/SparseToDense":"ywCH","./kernels/SplitV":"yJk1","./kernels/Sqrt":"fe9g","./kernels/Square":"P37N","./kernels/SquaredDifference":"c27v","./kernels/Step":"X69z","./kernels/StridedSlice":"AeFe","./kernels/Sub":"Nkhd","./kernels/Sum":"Elst","./kernels/Tan":"hepf","./kernels/Tanh":"PBCX","./kernels/Tile":"NWyQ","./kernels/TopK":"cBRR","./kernels/Transpose":"bZg9","./kernels/Unique":"BWA3","./kernels/Unpack":"dwft","./kernels/UnsortedSegmentSum":"Mmz1","./kernels/ZerosLike":"WPTr"}],"hUUT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_kernels");
},{"./base":"W0Bm","./register_all_kernels":"Iy4x"}],"S11S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearWebGLContext=n,exports.setWebGLContext=o,exports.getWebGLContext=r;const e={},t={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function n(t){delete e[t]}function o(t,n){e[t]=n}function r(t){if(!(t in e)){const n=l(t);if(null===n)return console.log("Could not get context for WebGL version",t),null;e[t]=n}const n=e[t];return n.isContextLost()?(delete e[t],r(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),e[t])}function a(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function l(n){if(1!==n&&2!==n)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const o=a(n);return o.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete e[n]},!1),1===n?o.getContext("webgl",t)||o.getContext("experimental-webgl",t):o.getContext("webgl2",t)}
},{}],"hBHG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUnpackedMatrixTextureShapeWidthHeight=a,exports.getUnpackedArraySizeFromMatrixSize=n,exports.getColorMatrixTextureShapeWidthHeight=i,exports.getDenseTexShape=u,exports.getMatrixSizeFromUnpackedArraySize=l,exports.decodeMatrixFromUnpackedColorRGBAArray=A,exports.getPackedMatrixTextureShapeWidthHeight=x,exports.getPackedRGBAArraySizeFromMatrixShape=c,exports.getTextureConfig=s,exports.PhysicalTextureType=exports.TextureUsage=exports.PackingScheme=void 0;var e,t,r,o=require("@tensorflow/tfjs-core");function a(e,t){return[t,e]}function n(e,t){return e*t}function i(e,t){return[4*t,e]}function u(e){const t=o.util.sizeFromShape(e),r=Math.ceil(t/4);return o.util.sizeToSquarishShape(r)}function l(e,t){if(e%t!=0)throw new Error(`unpackedSize (${e}) must be a multiple of `+`${t}`);return e/t}function A(e,t,r){const o=e.length*r/4;if(t.length<o)throw new Error(`matrix length (${t.length}) must be >= ${o}`);let a=0;for(let n=0;n<e.length;n+=4)for(let o=0;o<r;o++)t[a++]=e[n+o]}function x(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c(e,t){const[r,o]=x(e,t);return r*o*4}function s(e,t){const r=e;let a,n,i,u,l,A,x,c,s,p;return 2===(0,o.env)().getNumber("WEBGL_VERSION")?(a=r.R32F,n=r.R16F,i=r.RGBA16F,u=r.RGBA32F,l=r.RED,x=4,c=1,s=r.HALF_FLOAT,p=r.FLOAT):(a=e.RGBA,n=e.RGBA,i=e.RGBA,u=r.RGBA,l=e.RGBA,x=4,c=4,s=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT),{internalFormatFloat:a,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:u,textureFormatFloat:l,downloadTextureFormat:A=e.RGBA,downloadUnpackNumChannels:x,defaultNumChannels:c,textureTypeHalfFloat:s,textureTypeFloat:p}}exports.PackingScheme=e,function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(e||(exports.PackingScheme=e={})),exports.TextureUsage=t,function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(t||(exports.TextureUsage=t={})),exports.PhysicalTextureType=r,function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(r||(exports.PhysicalTextureType=r={}));
},{"@tensorflow/tfjs-core":"tc6m"}],"p3g2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.callAndCheck=n,exports.canBeRepresented=i,exports.getWebGLErrorMessage=E,exports.getExtensionOrThrow=f,exports.createVertexShader=s,exports.createFragmentShader=l,exports.createProgram=F,exports.linkProgram=R,exports.validateProgram=g,exports.createStaticVertexBuffer=x,exports.createStaticIndexBuffer=_,exports.getNumChannels=b,exports.createTexture=h,exports.validateTextureSize=m,exports.createFramebuffer=A,exports.bindVertexBufferToProgramAttribute=d,exports.bindTextureUnit=U,exports.unbindTextureUnit=p,exports.getProgramUniformLocationOrThrow=M,exports.getProgramUniformLocation=L,exports.bindTextureToProgramUniformSampler=S,exports.bindCanvasToFramebuffer=I,exports.bindColorTextureToFramebuffer=O,exports.unbindColorTextureFromFramebuffer=B,exports.validateFramebuffer=N,exports.getFramebufferErrorMessage=C,exports.getBatchDim=w,exports.getRowsCols=G,exports.getShapeAs3D=X,exports.getTextureShapeFromLogicalShape=W,exports.isReshapeFree=V,exports.getWebGLMaxTextureSize=H,exports.resetMaxTextureSize=k,exports.resetMaxTexturesInShader=q,exports.getMaxTexturesInShader=z,exports.getWebGLDisjointQueryTimerVersion=j,exports.hasExtension=Y,exports.isWebGLVersionEnabled=Z,exports.isCapableOfRenderingToFloatTexture=K,exports.isDownloadFloatTextureEnabled=Q,exports.isWebGLFenceEnabled=re,exports.assertNotComplex=te;var e=require("@tensorflow/tfjs-core"),r=require("./canvas_util"),t=require("./tex_util");function n(r,t){const n=t();return(0,e.env)().getBool("DEBUG")&&o(r),n}function o(e){const r=e.getError();if(r!==e.NO_ERROR)throw new Error("WebGL Error: "+E(e,r))}const u=5.96e-8,a=65504;function i(r){return!!((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===r||u<Math.abs(r)&&Math.abs(r)<a)}function E(e,r){switch(r){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function f(e,r){return D(e,()=>e.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function s(e,r){const t=D(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function l(e,r){const t=D(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw T(r,e.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const c=/ERROR: [0-9]+:([0-9]+):/g;function T(r,t){const n=c.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(r);const o=+n[1],u=r.split("\n"),a=u.length.toString().length+2,i=u.map((r,t)=>e.util.rightPad((t+1).toString(),a)+r);let E=0;for(let e=0;e<i.length;e++)E=Math.max(i[e].length,E);const f=i.slice(0,o-1),s=i.slice(o-1,o),l=i.slice(o);console.log(f.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${e.util.rightPad(s[0],E)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function F(e){return D(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function R(e,r){if(n(e,()=>e.linkProgram(r)),!1===e.getProgramParameter(r,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function g(e,r){if(n(e,()=>e.validateProgram(r)),!1===e.getProgramParameter(r,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function x(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function _(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function b(){return 2===(0,e.env)().getNumber("WEBGL_VERSION")?1:4}function h(e){return D(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function m(r,t){const n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||t<=0){throw new Error("Requested texture size "+`[${r}x${t}]`+" is invalid.")}if(r>n||t>n){throw new Error("Requested texture size "+`[${r}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function A(e){return D(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function d(e,r,t,o,u,a,i){const E=e.getAttribLocation(r,t);return-1!==E&&(n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,o)),n(e,()=>e.vertexAttribPointer(E,u,e.FLOAT,!1,a,i)),n(e,()=>e.enableVertexAttribArray(E)),!0)}function U(e,r,t){P(e,t),n(e,()=>e.activeTexture(e.TEXTURE0+t)),n(e,()=>e.bindTexture(e.TEXTURE_2D,r))}function p(e,r){P(e,r),n(e,()=>e.activeTexture(e.TEXTURE0+r)),n(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function M(e,r,t){return D(e,()=>e.getUniformLocation(r,t),'uniform "'+t+'" not present in program.')}function L(e,r,t){return e.getUniformLocation(r,t)}function S(e,r,t,o){n(e,()=>U(e,r,o)),n(e,()=>e.uniform1i(t,o))}function I(e){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),n(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),n(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function O(e,r,t){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0))}function B(e,r){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function N(e){const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+C(e,r))}function C(e,r){switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function D(e,r,t){const o=n(e,()=>r());if(null==o)throw new Error(t);return o}function P(e,r){const t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=r+e.TEXTURE0;if(n<e.TEXTURE0||n>t){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${t}]`}.`)}}function w(r,t=2){return e.util.sizeFromShape(r.slice(0,r.length-t))}function G(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function X(e){let r=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(r=[w(e),...G(e)]),r}function W(r,t=!1){let n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(r=r.map((t,n)=>n>=r.length-2?e.util.nearestLargerEven(r[n]):r[n])).length&&(r=[2,r[0]])),2!==r.length){const t=e.util.squeezeShape(r);r=t.newShape}let o=e.util.sizeFromShape(r);if(r.length<=1&&o<=n)return[1,o];if(2===r.length&&r[0]<=n&&r[1]<=n)return r;if(3===r.length&&r[0]*r[1]<=n&&r[2]<=n)return[r[0]*r[1],r[2]];if(3===r.length&&r[0]<=n&&r[1]*r[2]<=n)return[r[0],r[1]*r[2]];if(4===r.length&&r[0]*r[1]*r[2]<=n&&r[3]<=n)return[r[0]*r[1]*r[2],r[3]];if(4===r.length&&r[0]<=n&&r[1]*r[2]*r[3]<=n)return[r[0],r[1]*r[2]*r[3]];if(t){const t=w(r);let n=2,u=2;return r.length&&([n,u]=G(r)),o=t*(n/2)*(u/2),e.util.sizeToSquarishShape(o).map(e=>2*e)}return e.util.sizeToSquarishShape(o)}function v(e){return e%2==0}function V(r,t){if(r=r.slice(-2),t=t.slice(-2),e.util.arraysEqual(r,t))return!0;if(!r.length||!t.length)return!0;if(0===r[0]||0===r[1]||0===t[0]||0===t[1])return!0;if(r.length!==t.length){const e=r.slice(-1)[0],n=t.slice(-1)[0];if(e===n)return!0;if(v(e)&&v(n)&&(1===r[0]||1===t[0]))return!0}return r[1]===t[1]&&v(r[0])&&v(t[0])}let y,$;function H(e){if(null==y){const t=(0,r.getWebGLContext)(e);y=t.getParameter(t.MAX_TEXTURE_SIZE)}return y}function k(){y=null}function q(){$=null}function z(e){if(null==$){const t=(0,r.getWebGLContext)(e);$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$)}function j(e){if(0===e)return 0;let t;const n=(0,r.getWebGLContext)(e);return t=Y(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Y(n,"EXT_disjoint_timer_query")?1:0}function Y(e,r){return null!=e.getExtension(r)}function Z(e){try{if(null!=(0,r.getWebGLContext)(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function K(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1===e){if(!Y(t,"OES_texture_float"))return!1}else if(!Y(t,"EXT_color_buffer_float"))return!1;return J(t)}function Q(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1!==e){if(Y(t,"EXT_color_buffer_float"))return J(t);const e="EXT_color_buffer_half_float";if(Y(t,e)){const r=t.getExtension(e);return ee(t,r)}return!1}return!!Y(t,"OES_texture_float")&&(!!Y(t,"WEBGL_color_buffer_float")&&J(t))}function J(e){const r=(0,t.getTextureConfig)(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),u}function ee(e,r){const n=(0,t.getTextureConfig)(e,r),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const u=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(o),e.deleteFramebuffer(u),a}function re(e){if(2!==e)return!1;return null!=(0,r.getWebGLContext)(e).fenceSync}function te(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}
},{"@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./tex_util":"hBHG"}],"YNu6":[function(require,module,exports) {
"use strict";var E=require("@tensorflow/tfjs-core"),e=require("./webgl_util");const _=(0,E.env)();_.registerFlag("HAS_WEBGL",()=>_.getNumber("WEBGL_VERSION")>0),_.registerFlag("WEBGL_VERSION",()=>(0,e.isWebGLVersionEnabled)(2)?2:(0,e.isWebGLVersionEnabled)(1)?1:0),_.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),_.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===_.get("WEBGL_VERSION")),_.registerFlag("WEBGL_CPU_FORWARD",()=>!0),_.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),_.registerFlag("WEBGL_PACK",()=>_.getBool("HAS_WEBGL")),_.registerFlag("WEBGL_PACK_NORMALIZATION",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_CLIP",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),_.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_REDUCE",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_LAZILY_UNPACK",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_CONV_IM2COL",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(0,e.getWebGLMaxTextureSize)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(0,e.getMaxTexturesInShader)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const E=_.getNumber("WEBGL_VERSION");return 0===E?0:(0,e.getWebGLDisjointQueryTimerVersion)(E)}),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>_.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!E.device_util.isMobile()),_.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(0,e.isCapableOfRenderingToFloatTexture)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!_.getBool("WEBGL_FORCE_F16_TEXTURES")&&_.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),_.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(0,e.isDownloadFloatTextureEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(0,e.isWebGLFenceEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{return _.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),_.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,E=>{if(E<0&&-1!==E)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${E}.`)});
},{"@tensorflow/tfjs-core":"tc6m","./webgl_util":"p3g2"}],"QbWp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlslDifferences=e;var n=require("@tensorflow/tfjs-core");function e(){let e,a,t,u,l,v,o,r,i,s;return 2===(0,n.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",a="in",t="out",u="in",l="texture",v="outputColor",o="out vec4 outputColor;",r="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",i="",s="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",a="attribute",t="varying",u="varying",l="texture2D",v="gl_FragColor",o="",r="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",i="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",s="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:a,varyingVs:t,varyingFs:u,texture2D:l,output:v,defineOutput:o,defineSpecialNaN:r,defineSpecialInf:i,defineRound:s}}
},{"@tensorflow/tfjs-core":"tc6m"}],"vOsJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLogicalCoordinatesFromFlatIndex=e,exports.dotify=o,exports.getFlatIndexFrom3D=r,exports.ENCODE_FLOAT_SNIPPET=void 0;var n=require("@tensorflow/tfjs-core");function e(e,t,o="index"){const r=n.util.computeStrides(t);return r.map((n,t)=>{return`${`int ${e[t]} = ${o} / ${n}`}; ${t===r.length-1?`int ${e[t+1]} = ${o} - ${e[t]} * ${n}`:`index -= ${e[t]} * ${n}`};`}).join("")}function t(n){return 1===n.length?`${n[0]}`:`vec${n.length}(${n.join(",")})`}function o(n,e){if(n.length!==e.length)throw new Error("Vectors to be dotted must be of the same length -"+`got ${n.length} and ${e.length}`);const o=[],r=Math.floor(n.length/4),c=n.length%4;for(let l=0;l<r;l++){const r=n.slice(4*l,4*l+4),c=e.slice(4*l,4*l+4);o.push(`${t(r)}, ${t(c)}`)}if(0!==c){let c=n.slice(4*r),l=e.slice(4*r);1===c.length&&(c=c.map(n=>`float(${n})`),l=l.map(n=>`float(${n})`)),o.push(`${t(c)}, ${t(l)}`)}return o.map((n,e)=>`dot(${n})`).join("+")}function r(e){const t=n.util.computeStrides(e).map(n=>n.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}const c="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";exports.ENCODE_FLOAT_SNIPPET=c;
},{"@tensorflow/tfjs-core":"tc6m"}],"tZX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixProgram=void 0;var e=require("./glsl_version"),t=i(require("./shader_compiler_util")),r=require("./tex_util");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var u=o?Object.getOwnPropertyDescriptor(e,c):null;u&&(u.get||u.set)?Object.defineProperty(i,c,u):i[c]=e[c]}return i.default=e,r&&r.set(e,i),i}class o{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=r.PackingScheme.DENSE;const i=(0,r.getDenseTexShape)(n),o=(0,e.getGlslDifferences)();this.outputShape=n,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${i[0]}, ${i[1]}));\n        int index = 4 * (resTexRC.x * ${i[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixProgram=o;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"kOP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=i(require("./shader_compiler_util")),r=require("./tex_util");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var a=o?Object.getOwnPropertyDescriptor(e,c):null;a&&(a.get||a.set)?Object.defineProperty(i,c,a):i[c]=e[c]}return i.default=e,r&&r.set(e,i),i}class o{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=r.PackingScheme.DENSE;const i=(0,r.getDenseTexShape)(n),o=(0,e.getGlslDifferences)();this.outputShape=n,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${i[0]}, ${i[1]}));\n        int index = 4 * (resTexRC.x * ${i[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixPackedProgram=o;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"KyTh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatProgram=r;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"zODu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatPackedProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatPackedProgram=r;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"JBcV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixProgram=void 0;var e=require("./glsl_version"),t=r(require("./shader_compiler_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=l?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class o{constructor(n,r,o=!1){this.variableNames=["A"];const l=(0,e.getGlslDifferences)(),[s,u]=r;this.outputShape=n;let a="result";o&&(a="floor(result * 255. + 0.5)"),this.userCode=`\n      ${t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${u};\n        int c = imod(flatIndex, ${u});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${u}.0, ${s}.0);\n        vec4 values = ${l.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${l.output} = vec4(${a}, 0., 0., 0.);\n      }\n    `}}exports.EncodeMatrixProgram=o;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ"}],"dH5p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=r(require("./shader_compiler_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=l?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class o{constructor(n,r,o=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const l=(0,e.getGlslDifferences)(),[s,a]=r;this.outputShape=n;let u="",c="result";o&&(c="floor(result * 255. + 0.5)");for(let e=0;e<=1;e++)for(let t=0;t<=1;t++){const r=2*e+t;u+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${n[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${e} < ${n[1]}) {\n              localCoords[1] += ${e};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${a};\n              c = imod(flatIndex, ${a});\n              uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${s}.0);\n              values = ${l.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${r}] = values[0];\n              } else if(offset == 1) {\n                result[${r}] = values[1];\n              } else if(offset == 2) {\n                result[${r}] = values[2];\n              } else {\n                result[${r}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${u}\n\n        ${l.output} = ${c};\n      }\n    `}}exports.EncodeMatrixPackedProgram=o;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ"}],"LB6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createVertexShader=o,exports.createVertexBuffer=u,exports.createIndexBuffer=i,exports.getInternalFormatForFloat32MatrixTexture=l,exports.createFloat32MatrixTexture=x,exports.getInternalFormatForFloat16MatrixTexture=d,exports.createFloat16MatrixTexture=f,exports.getInternalFormatForUnsignedBytesMatrixTexture=T,exports.createUnsignedBytesMatrixTexture=F,exports.getInternalFormatForPackedMatrixTexture=A,exports.createPackedMatrixTexture=s,exports.getInternalFormatForFloat16PackedMatrixTexture=E,exports.createFloat16PackedMatrixTexture=p,exports.bindVertexProgramAttributeStreams=P,exports.uploadDenseMatrixToTexture=_,exports.uploadPixelDataToTexture=h,exports.createBufferFromOutputTexture=B,exports.downloadFloat32MatrixFromBuffer=R,exports.downloadByteEncodedFloatMatrixFromOutputTexture=U,exports.downloadPackedMatrixFromBuffer=g,exports.downloadMatrixFromPackedOutputTexture=k;var e=require("./glsl_version"),t=a(require("./tex_util")),r=a(require("./webgl_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}function o(t){const n=(0,e.getGlslDifferences)(),a=`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return r.createVertexShader(t,a)}function u(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return r.createStaticVertexBuffer(e,t)}function i(e){const t=new Uint16Array([0,1,2,2,1,3]);return r.createStaticIndexBuffer(e,t)}function c(e,t,n,a,o,u){r.validateTextureSize(t,n);const i=r.createTexture(e),c=e.TEXTURE_2D;return r.callAndCheck(e,()=>e.bindTexture(c,i)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texImage2D(c,0,a,t,n,0,o,u,null)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function l(e){return e.internalFormatFloat}function x(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,l(a),a.textureFormatFloat,e.FLOAT)}function d(e){return e.internalFormatHalfFloat}function f(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,d(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function T(e){return e.downloadTextureFormat}function F(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,T(a),e.RGBA,e.UNSIGNED_BYTE)}function A(e){return e.internalFormatPackedFloat}function s(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,A(a),e.RGBA,e.FLOAT)}function E(e){return e.internalFormatPackedHalfFloat}function p(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,E(a),e.RGBA,a.textureTypeHalfFloat)}function P(e,t,n){return r.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),r.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",n,3,20,0)&&r.bindVertexBufferToProgramAttribute(e,t,"uv",n,2,20,12)}function _(e,t,n,a,o,u){let i,c,l;r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),o instanceof Uint8Array?(i=new Uint8Array(n*a*4),c=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*a*4),c=e.FLOAT,l=u.internalFormatPackedFloat),i.set(o),r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,c,i)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function h(e,t,n){r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function B(e,t,n,a){const o=e.createBuffer();r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const u=16*t*n;return r.callAndCheck(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,u,e.STREAM_READ)),r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function R(e,t,r){const n=e,a=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,a),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),a}function U(e,n,a,o){const[u,i]=t.getUnpackedMatrixTextureShapeWidthHeight(n,a),c=new Uint8Array(t.getUnpackedArraySizeFromMatrixSize(n*a,4));return r.callAndCheck(e,()=>e.readPixels(0,0,u,i,o.downloadTextureFormat,e.UNSIGNED_BYTE,c)),new Float32Array(c.buffer)}function g(e,r,n,a,o,u,i,c){const l=e,x=new Float32Array(t.getPackedRGBAArraySizeFromMatrixShape(u,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,r),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,x),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),x}function k(e,t,n){const a=new Float32Array(t*n*4);return r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a)),a}
},{"./glsl_version":"QbWp","./tex_util":"hBHG","./webgl_util":"p3g2"}],"AZP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearSearchLastTrue=l,exports.GPGPUContext=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),r=n(require("./gpgpu_util")),i=n(require("./tex_util")),o=n(require("./webgl_util"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(i,n,u):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}class u{constructor(s){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=(0,e.env)().getNumber("WEBGL_VERSION");null!=s?(this.gl=s,(0,t.setWebGLContext)(n,s)):this.gl=(0,t.getWebGLContext)(n);let u="WEBGL_color_buffer_float";if(1===(0,e.env)().getNumber("WEBGL_VERSION")){const t="OES_texture_float",r="OES_texture_half_float";if(this.textureFloatExtension=o.getExtensionOrThrow(this.gl,t),o.hasExtension(this.gl,r))this.textureHalfFloatExtension=o.getExtensionOrThrow(this.gl,r);else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(u),o.hasExtension(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=o.getExtensionOrThrow(this.gl,"EXT_color_buffer_half_float");else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(u="EXT_color_buffer_float",o.hasExtension(this.gl,u))this.colorBufferFloatExtension=this.gl.getExtension(u);else{if(!o.hasExtension(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=r.createVertexBuffer(this.gl),this.indexBuffer=r.createIndexBuffer(this.gl),this.framebuffer=o.createFramebuffer(this.gl),this.textureConfig=i.getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,e.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;o.callAndCheck(e,()=>e.finish()),o.callAndCheck(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),o.callAndCheck(e,()=>e.deleteFramebuffer(this.framebuffer)),o.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat32MatrixTexture(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16MatrixTexture(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),r.createUnsignedBytesMatrixTexture(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),r.uploadPixelDataToTexture(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,i,o){this.throwIfDisposed(),r.uploadDenseMatrixToTexture(this.gl,e,t,i,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16PackedMatrixTexture(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createPackedMatrixTexture(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),o.callAndCheck(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,t,i,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,i,o,s,n){return r.downloadPackedMatrixFromBuffer(this.gl,e,t,i,o,s,n,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return r.downloadFloat32MatrixFromBuffer(this.gl,e,t)}createBufferFromTexture(e,t,i){this.bindTextureToFrameBuffer(e);const o=r.createBufferFromOutputTexture(this.gl,t,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(t){let r,i;if((0,e.env)().getBool("WEBGL_FENCE_API_ENABLED")){const e=t,o=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),i=(()=>{const t=e.clientWaitSync(o,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}),r=o}else(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),i=(()=>this.isQueryAvailable(r,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))):i=(()=>!0);return{query:r,isFencePassed:i}}downloadMatrixFromPackedTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadMatrixFromPackedOutputTexture(this.gl,t,i))}createProgram(e){this.throwIfDisposed();const t=this.gl,i=o.createFragmentShader(t,e),s=r.createVertexShader(t),n=o.createProgram(t);return o.callAndCheck(t,()=>t.attachShader(n,s)),o.callAndCheck(t,()=>t.attachShader(n,i)),o.linkProgram(t,n),this.debug&&o.validateProgram(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=r.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&o.callAndCheck(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&o.validateProgram(this.gl,this.program),o.callAndCheck(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?o.getProgramUniformLocationOrThrow(this.gl,e,t):o.getProgramUniformLocation(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),o.bindTextureToProgramUniformSampler(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[o,s]=i.getPackedMatrixTextureShapeWidthHeight(t,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&o.validateProgram(this.gl,this.program),o.validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),o.callAndCheck(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=o.getExtensionOrThrow(this.gl,2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),r=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,r),r}endQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await e.util.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=l(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(t,r){this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||e.util.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(o.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)):o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;o.bindColorTextureToFramebuffer(i,e,this.framebuffer),this.debug&&o.validateFramebuffer(i),this.outputTexture=e,o.callAndCheck(i,()=>i.viewport(0,0,t,r)),o.callAndCheck(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function l(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}exports.GPGPUContext=u;
},{"@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./gpgpu_util":"LB6l","./tex_util":"hBHG","./webgl_util":"p3g2"}],"DIKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeShader=c,exports.getCoordsDataType=W;var n=require("@tensorflow/tfjs-core"),e=require("./glsl_version"),t=o(require("./shader_compiler_util"));function r(n){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(r=function(n){return n?t:e})(n)}function o(n,e){if(!e&&n&&n.__esModule)return n;if(null===n||"object"!=typeof n&&"function"!=typeof n)return{default:n};var t=r(e);if(t&&t.has(n))return t.get(n);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in n)if("default"!==c&&Object.prototype.hasOwnProperty.call(n,c)){var u=i?Object.getOwnPropertyDescriptor(n,c):null;u&&(u.get||u.set)?Object.defineProperty(o,c,u):o[c]=n[c]}return o.default=n,t&&t.set(n,o),o}const{getBroadcastDims:i}=n.backend_util;function c(t,r,o,i){const c=[];t.forEach(e=>{const t=n.util.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?c.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(c.push(`uniform sampler2D ${e.name};`),c.push(`uniform int offset${e.name};`))});const u=c.join("\n"),l=t.map(n=>a(n,r,i)).join("\n"),x=r.texShape,v=(0,e.getGlslDifferences)(),g=$(v);let m,w,R=f(v);return r.isPacked?(m=s(r.logicalShape,x),w=h(v)):(m=p(r.logicalShape,x),w=d(v)),i&&(R+=C),[R,g,w,u,m,l,o].join("\n")}function u(n){const e=n.shapeInfo.logicalShape;switch(e.length){case 0:return N(n);case 1:return k(n);case 2:return j(n);case 3:return E(n);case 4:return L(n);case 5:return P(n);case 6:return _(n);default:throw new Error(`${e.length}-D input sampling`+" is not yet supported")}}function l(n){switch(n.shapeInfo.logicalShape.length){case 0:return M(n);case 1:return F(n);case 2:return A(n);case 3:return z(n);default:return q(n)}}function a(n,e,t=!1){let r="";r+=t?l(n):u(n);const o=n.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(r+=t?H(n,e):B(n,e)),r}function s(n,e){switch(n.length){case 0:return m();case 1:return w(n,e);case 2:return V(n,e);case 3:return y(n,e);default:return I(n,e)}}function p(n,e){switch(n.length){case 0:return m();case 1:return R(n,e);case 2:return D(n,e);case 3:return S(n,e);case 4:return T(n,e);case 5:return U(n,e);case 6:return O(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function $(n){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${n.texture2D}(textureSampler, uv).r;\n    }\n  `}function d(n){return`\n    void setOutput(float val) {\n      ${n.output} = vec4(val, 0, 0, 0);\n    }\n  `}function h(n){return`\n    void setOutput(vec4 val) {\n      ${n.output} = val;\n    }\n  `}function f(n){return`${n.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${n.varyingFs} vec2 resultUV;\n    ${n.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${n.defineSpecialNaN}\n    ${n.defineSpecialInf}\n    ${n.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${x}\n    ${v}\n    ${g}\n  `}const x="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",v="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",g="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function m(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function w(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===t[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${t[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return 2 * (resTexRC.x * ${t[1]} + resTexRC.y);\n    }\n  `}function R(n,e){return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function y(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[2]/2),o=r*Math.ceil(n[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function S(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}function I(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[n.length-1]/2),o=r*Math.ceil(n[n.length-2]/2);let i=o,c="",u="b, r, c";for(let l=2;l<n.length-1;l++)c=`\n      int b${l} = index / ${i*=n[n.length-l-1]};\n      index -= b${l} * ${i};\n    `+c,u=`b${l}, `+u;return`\n    ivec${n.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${c}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${n.length}(${u});\n    }\n  `}function T(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],n);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}function U(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],n);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function O(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],n);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function V(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(n.util.arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function D(e,t){return n.util.arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}function b(n){return`offset${n}`}function M(n){const t=n.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${(0,e.getGlslDifferences)().texture2D}(${t}, halfCR);\n    }\n  `}function N(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`float ${t}() {return ${e};}`;const[r,o]=n.shapeInfo.texShape;if(1===r&&1===o)return`\n      float ${t}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[i,c]=n.shapeInfo.texShape;return`\n    float ${t}() {\n      vec2 uv = uvFromFlat(${i}, ${c}, ${b(e)});\n      return sampleTexture(${e}, uv);\n    }\n  `}function F(n){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),o=n.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=(0,e.getGlslDifferences)();return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${c.texture2D}(${t}, uv);\n    }\n  `}function k(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`\n      float ${t}(int index) {\n        ${G(n)}\n      }\n    `;const r=n.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return`\n      float ${t}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const c=b(e);return 1===i?`\n      float ${t}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / ${o}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===o?`\n      float ${t}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${t}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${i}, index + ${c});\n      return sampleTexture(${e}, uv);\n    }\n  `}function A(t){const r=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),c=t.shapeInfo.texShape,u=c[0],l=c[1],a=(0,e.getGlslDifferences)();if(null!=c&&n.util.arraysEqual(r,c))return`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);\n\n        return ${a.texture2D}(${o}, uv);\n      }\n    `;const s=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(r[1]/2)}, ${s[0]}, ${s[1]}, row, col);\n      return ${a.texture2D}(${o}, uv);\n    }\n  `}function j(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&n.util.arraysEqual(t,i)){const n=i[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i[1]}.0, ${n}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:c,keptDims:l}=n.util.squeezeShape(t),a=c;if(a.length<t.length){const n=["row","col"];return`\n      ${u(J(e,a))}\n      float ${o}(int row, int col) {\n        return ${o}(${K(n,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${G(e)}\n      }\n    `;const s=i[0],p=i[1],$=b(r);return 1===p?`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${$}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===s?`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${$}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${$};\n    vec2 uv = uvFromFlat(${s}, ${p}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}function z(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n.shapeInfo.texShape,c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0]){const e=[1,2],r=["b","row","col"];return`\n        ${l(J(n,t.slice(1)))}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${K(r,e)});\n        }\n      `}const u=c[0],a=c[1],s=Math.ceil(t[2]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${u}, ${a}, ${s*Math.ceil(t[1]/2)}, ${s}, b, row, col);\n      return ${(0,e.getGlslDifferences)().texture2D}(${r}, uv);\n    }\n  `}function E(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[1]*t[2],c=t[2],{newShape:l,keptDims:a}=n.util.squeezeShape(t),s=l;if(s.length<t.length){const n=["row","col","depth"];return`\n        ${u(J(e,s))}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${K(n,a)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${c}, 1)));\n        ${G(e)}\n      }\n    `;const p=e.shapeInfo.texShape,$=p[0],d=p[1],h=e.shapeInfo.flatOffset;return d===i&&null==h?`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${c}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${$}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `:d===c&&null==h?`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${$}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${c} + depth + ${b(r)};\n        vec2 uv = uvFromFlat(${$}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}function q(n){const t=n.shapeInfo.logicalShape,r=t.length,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),c=n.shapeInfo.texShape,u=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],l=u[0],a=u[1],s=Math.ceil(t[r-1]/2);let p=s*Math.ceil(t[r-2]/2),$="int b, int row, int col",d=`b * ${p} + (row / 2) * ${s} + (col / 2)`;for(let e=2;e<r-1;e++)$=`int b${e}, `+$,d=`b${e} * ${p*=t[r-e-1]} + `+d;return`\n    vec4 ${i}(${$}) {\n      int index = ${d};\n      int texR = index / ${a};\n      int texC = index - texR * ${a};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}, ${l});\n      return ${(0,e.getGlslDifferences)().texture2D}(${o}, uv);\n    }\n  `}function L(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[3],c=t[2]*i,l=t[1]*c,{newShape:a,keptDims:s}=n.util.squeezeShape(t);if(a.length<t.length){const n=["row","col","depth","depth2"];return`\n      ${u(J(e,a))}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${K(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${l}, ${c}, ${i}, 1)));\n        ${G(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,$=e.shapeInfo.texShape,d=$[0],h=$[1];return h===l&&null==p?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${c}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:h===i&&null==p?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${c} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${b(r)});\n      return sampleTexture(${r}, uv);\n    }\n  `}function P(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[4],c=t[3]*i,l=t[2]*c,a=t[1]*l,{newShape:s,keptDims:p}=n.util.squeezeShape(t);if(s.length<t.length){const n=["row","col","depth","depth2","depth3"];return`\n      ${u(J(e,s))}\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        return ${o}(${K(n,p)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${a}, ${l}, ${c}, ${i})) +\n          depth3;\n        ${G(e)}\n      }\n    `;const $=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];return f===a&&null==$?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${l}, ${c}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:f===i&&null==$?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${l} + depth * ${c} +\n          depth2 * ${i} + depth3 + ${b(r)};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function _(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:i,keptDims:c}=n.util.squeezeShape(t);if(i.length<t.length){const n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${u(J(e,i))}\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${o}(${K(n,c)});\n      }\n    `}const l=t[5],a=t[4]*l,s=t[3]*a,p=t[2]*s,$=t[1]*p;if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${$}, ${p}, ${s}, ${a})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${l}, 1)));\n        ${G(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],x=h[1];return x===$&&null==d?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${p}, ${s}, ${a}, ${l})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${x}.0, ${f}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:x===l&&null==d?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${x}.0, ${f}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${$} + col * ${p} + depth * ${s} +\n          depth2 * ${a} + depth3 * ${l} + depth4 + ${b(r)};\n      vec2 uv = uvFromFlat(${f}, ${x}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function G(e){const t=e.name,r=n.util.sizeFromShape(e.shapeInfo.logicalShape);return r<2?`return ${t};`:`\n    for (int i = 0; i < ${r}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function H(e,t){const r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),c="get"+o+"AtOutCoords",u=e.shapeInfo.logicalShape.length,l=t.logicalShape.length,a=i(e.shapeInfo.logicalShape,t.logicalShape),s=W(l),p=l-u;let $;const d=["x","y","z","w","u","v"];$=0===u?"":l<2&&a.length>=1?"coords = 0;":a.map(n=>`coords.${d[n+p]} = 0;`).join("\n");let h="";h=l<2&&u>0?"coords":e.shapeInfo.logicalShape.map((n,e)=>`coords.${d[e+p]}`).join(", ");let f="return outputValue;";const x=1===n.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===n.util.sizeFromShape(t.logicalShape);if(1!==u||x||v){if(x&&!v)f=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const n=u-2,e=u-1;a.indexOf(n)>-1&&a.indexOf(e)>-1?f="return vec4(outputValue.x);":a.indexOf(n)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(e)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${c}() {\n      ${s} coords = getOutputCoords();\n      ${$}\n      vec4 outputValue = get${o}(${h});\n      ${f}\n    }\n  `}function B(e,t){const r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),c="get"+o+"AtOutCoords",u=t.texShape,l=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===s&&null==e.shapeInfo.flatOffset&&n.util.arraysEqual(l,u))return`\n      float ${c}() {\n        return sampleTexture(${r}, resultUV);\n      }\n    `;const p=W(s),$=i(e.shapeInfo.logicalShape,t.logicalShape),d=s-a;let h;const f=["x","y","z","w","u","v"];let x="";return`\n    float ${c}() {\n      ${p} coords = getOutputCoords();\n      ${h=0===a?"":s<2&&$.length>=1?"coords = 0;":$.map(n=>`coords.${f[n+d]} = 0;`).join("\n")}\n      return get${o}(${x=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((n,e)=>`coords.${f[e+d]}`).join(", ")});\n    }\n  `}function W(n){if(n<=1)return"int";if(2===n)return"ivec2";if(3===n)return"ivec3";if(4===n)return"ivec4";if(5===n)return"ivec5";if(6===n)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function J(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function K(n,e){return e.map(e=>n[e]).join(", ")}
},{"@tensorflow/tfjs-core":"tc6m","./glsl_version":"QbWp","./shader_compiler_util":"vOsJ"}],"hS5V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileProgram=n,exports.runProgram=i,exports.makeShaderKey=s;var e=require("@tensorflow/tfjs-core"),t=r(require("./shader_compiler"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function n(a,r,n,o){const i=r.userCode,s=n.map((e,t)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:r.variableNames[t],shapeInfo:a}}),f=s.map(e=>e.shapeInfo),l={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},u=t.makeShader(s,l,i,r.packedInputs),c=a.createProgram(u);let p=null;const m=a.getUniformLocation(c,"NAN",!1);1===(0,e.env)().getNumber("WEBGL_VERSION")&&(p=a.getUniformLocation(c,"INFINITY",!1));const h={};for(let e=0;e<r.variableNames.length;e++){const t=r.variableNames[e],n=!1;h[t]=a.getUniformLocation(c,t,n),h[`offset${t}`]=a.getUniformLocation(c,`offset${t}`,n)}return{program:r,source:u,webGLProgram:c,uniformLocations:h,inShapeInfos:f,outShapeInfo:l,infLoc:p,nanLoc:m}}function o(t,a){if(t.length!==a.length)throw Error(`Binary was compiled with ${t.length} inputs, but `+`was executed with ${a.length} inputs`);t.forEach((t,r)=>{const n=t.logicalShape,o=a[r],i=o.shape;if(!e.util.arraysEqual(n,i))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${n} and ${i} must match`);if(t.isUniform&&o.isUniform)return;const s=t.texShape,f=o.isUniform?null:o.texData.texShape;if(!e.util.arraysEqual(s,f))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${s} and ${f} must match`)})}function i(t,a,r,n,i){o(a.inShapeInfos,r),o([a.outShapeInfo],[n]);const s=n.texData.texture,f=n.texData.texShape;n.texData.isPacked?t.setOutputPackedMatrixTexture(s,f[0],f[1]):t.setOutputMatrixTexture(s,f[0],f[1]),t.setProgram(a.webGLProgram),1===(0,e.env)().getNumber("WEBGL_VERSION")&&null!==a.infLoc&&t.gl.uniform1f(a.infLoc,1/0),null!==a.nanLoc&&t.gl.uniform1f(a.nanLoc,NaN),r.forEach((r,n)=>{const o=a.program.variableNames[n],i=a.uniformLocations[o],s=a.uniformLocations[`offset${o}`];if(null!=i)if(r.isUniform)if(e.util.sizeFromShape(r.shape)<2)t.gl.uniform1f(i,r.uniformValues[0]);else{let e=r.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(i,e)}else null!=r.texData.slice&&null!=s&&t.gl.uniform1i(s,r.texData.slice.flatOffset),t.setInputMatrixTexture(r.texData.texture,i,n)}),null!=i&&i(t,a.webGLProgram),t.executeProgram()}function s(e,t,a){let r="";t.concat(a).forEach(e=>{const t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,a=e.isUniform?"uniform":e.texData.texShape;r+=`${e.shape}_${a}_${t}`});const n=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+n}
},{"@tensorflow/tfjs-core":"tc6m","./shader_compiler":"DIKY"}],"tfp0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImplCPU=exports.transposeImplCPU=exports.topKImplCPU=exports.tileImplCPU=exports.rsqrtImplCPU=exports.rangeImplCPU=exports.subImplCPU=exports.stridedSliceImplCPU=exports.sliceImplCPU=exports.simpleAbsImplCPU=exports.prodImplCPU=exports.negImplCPU=exports.multiplyImplCPU=exports.minimumImplCPU=exports.maximumImplCPU=exports.maxImplCPU=exports.logImplCPU=exports.linSpaceImplCPU=exports.lessImplCPU=exports.greaterImplCPU=exports.gatherV2ImplCPU=exports.floorImplCPU=exports.expm1ImplCPU=exports.expImplCPU=exports.concatImplCPU=exports.ceilImplCPU=exports.bincountReduceImplCPU=exports.bincountImplCPU=exports.addImplCPU=void 0;var p=t(require("@tensorflow/tfjs-backend-cpu/dist/shared"));function e(p){if("function"!=typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(e=function(p){return p?l:t})(p)}function t(p,t){if(!t&&p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var l=e(t);if(l&&l.has(p))return l.get(p);var r={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in p)if("default"!==o&&Object.prototype.hasOwnProperty.call(p,o)){var s=m?Object.getOwnPropertyDescriptor(p,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=p[o]}return r.default=p,l&&l.set(p,r),r}const{addImpl:l,bincountImpl:r,bincountReduceImpl:m,ceilImpl:o,concatImpl:s,expImpl:I,expm1Impl:x,floorImpl:n,gatherV2Impl:P,greaterImpl:i,lessImpl:C,linSpaceImpl:U,logImpl:u,maxImpl:a,maximumImpl:c,minimumImpl:d,multiplyImpl:f,negImpl:b,prodImpl:g,rangeImpl:y,rsqrtImpl:O,simpleAbsImpl:j,sliceImpl:v,stridedSliceImpl:q,subImpl:h,tileImpl:w,topKImpl:S,transposeImpl:M,uniqueImpl:k}=p;exports.uniqueImplCPU=k,exports.transposeImplCPU=M,exports.topKImplCPU=S,exports.tileImplCPU=w,exports.subImplCPU=h,exports.stridedSliceImplCPU=q,exports.sliceImplCPU=v,exports.simpleAbsImplCPU=j,exports.rsqrtImplCPU=O,exports.rangeImplCPU=y,exports.prodImplCPU=g,exports.negImplCPU=b,exports.multiplyImplCPU=f,exports.minimumImplCPU=d,exports.maximumImplCPU=c,exports.maxImplCPU=a,exports.logImplCPU=u,exports.linSpaceImplCPU=U,exports.lessImplCPU=C,exports.greaterImplCPU=i,exports.gatherV2ImplCPU=P,exports.floorImplCPU=n,exports.expm1ImplCPU=x,exports.expImplCPU=I,exports.concatImplCPU=s,exports.ceilImplCPU=o,exports.bincountReduceImplCPU=m,exports.bincountImplCPU=r,exports.addImplCPU=l;
},{"@tensorflow/tfjs-backend-cpu/dist/shared":"X8ov"}],"Axn8":[function(require,module,exports) {
"use strict";function e(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function t(t,r){return 1===r?[t]:e(t,r)}function r(e,t){if(1===e)return"rc";let r="";for(let n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVecChannels=e,exports.getChannels=t,exports.getSourceCoords=r;
},{}],"kEpT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PackProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;const r=n.length;if(0===r)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const u=(0,t.getChannels)("rc",r),i=(0,e.getCoordsDataType)(r),g=c(r,n,u),p=o(r,n[n.length-1],n[n.length-2],u),l=s(n,u);this.userCode=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${g}) {\n            setOutput(vec4(0));\n          } else {\n            ${p}\n\n            setOutput(vec4(${l}));\n          }\n        }\n      `}}}function r(t,e){const n=[];for(let r=0;r<=1;r++)for(let c=0;c<=1;c++){let o=`${0===r?"r":"rp1"}, ${0===c?"c":"cp1"}`;for(let n=2;n<t;n++)o=`${e[e.length-1-n]},`+o;n.push(o)}return n}function c(t,e,n){if(1===t)return`rc > ${e[0]}`;let r="";for(let c=t-2;c<t;c++)r+=`${n[c]} >= ${e[c]}`,c<t-1&&(r+="||");return r}function o(t,e,n,r){if(1===t)return"";const c=r.slice(-2);return`\n    int r = ${c[0]};\n    int c = ${c[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}function s(t,e){const n=t.length,c=r(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${c[0]}),\n          cEdge ? 0. : getA(${c[1]}),\n          rEdge ? 0. : getA(${c[2]}),\n          rEdge || cEdge ? 0. : getA(${c[3]})`}exports.PackProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"K4kf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReshapePackedProgram=void 0;var e=n(require("./shader_compiler_util"));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}function n(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}class r{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let r="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),r+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}this.userCode=`\n      ${i(n)}\n      ${e.getFlatIndexFrom3D(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${r}\n\n        setOutput(result);\n      }\n    `}}function i(t){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${e.getLogicalCoordinatesFromFlatIndex(["r","c","d"],t)}\n      return ivec3(r, c, d);\n    }\n  `}exports.ReshapePackedProgram=r;
},{"./shader_compiler_util":"vOsJ"}],"herW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeBytes=i,exports.TextureManager=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_util"),r=require("./tex_util");class s{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,s){const u=h(t,s),n=a(e,u,s);n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextures||(this.usedTextures[n]=[]);const T=i(e,u,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[n].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=T,this.log();const e=this.freeTextures[n].shift();return this.usedTextures[n].push(e),e}let x;return u===r.PhysicalTextureType.PACKED_2X2_FLOAT32?x=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_2X2_FLOAT16?x=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT32?x=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT16?x=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(x=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[n].push(x),this.numUsedTextures++,this._numBytesAllocated+=T,this.log(),x}releaseTexture(t,r,s,u){if(null==this.freeTextures)return;const n=h(s,u),T=a(r,n,u);T in this.freeTextures||(this.freeTextures[T]=[]);const x=i(r,n,this.gpgpu.gl,this.gpgpu.textureConfig,u),o=(0,e.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=x):(this.freeTextures[T].push(t),this.numFreeTextures++,this._numBytesFree+=x),this.numUsedTextures--;const l=this.usedTextures[T],c=l.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function u(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}function i(e,t,s,i,T){const h=n(t,i);let a;if(T){const[t,s]=(0,r.getPackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}else{const[t,s]=(0,r.getUnpackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}return a*u(s,h)}function n(e,s){switch(e){case r.PhysicalTextureType.PACKED_2X2_FLOAT32:return(0,t.getInternalFormatForPackedMatrixTexture)(s);case r.PhysicalTextureType.PACKED_2X2_FLOAT16:return(0,t.getInternalFormatForFloat16PackedMatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT32:return(0,t.getInternalFormatForFloat32MatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT16:return(0,t.getInternalFormatForFloat16MatrixTexture)(s);case r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return(0,t.getInternalFormatForUnsignedBytesMatrixTexture)(s);default:throw new Error(`Unknown physical texture type ${e}`)}}function T(t){return(0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?r.PhysicalTextureType.PACKED_2X2_FLOAT32:r.PhysicalTextureType.UNPACKED_FLOAT32:t?r.PhysicalTextureType.PACKED_2X2_FLOAT16:r.PhysicalTextureType.UNPACKED_FLOAT16}function h(e,t){if(e===r.TextureUsage.UPLOAD)return r.PhysicalTextureType.PACKED_2X2_FLOAT32;if(e===r.TextureUsage.RENDER||null==e)return T(t);if(e===r.TextureUsage.DOWNLOAD||e===r.TextureUsage.PIXELS)return r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function a(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}exports.TextureManager=s;
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_util":"LB6l","./tex_util":"hBHG"}],"uzBV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STEP=o,exports.CLONE=exports.RELU6=exports.RELU=exports.ELU=exports.ABS=exports.LINEAR=exports.CHECK_NAN_SNIPPET=exports.UnaryOpProgram=void 0;class t{constructor(t,r){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${r}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpProgram=t;const r="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET=r;const n="return x;";exports.LINEAR=n;const e="return abs(x);";function o(t=0){return r+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}exports.ABS=e;const s="return (x >= 0.0) ? x : (exp(x) - 1.0);";exports.ELU=s;const x=r+"\n  return (x < 0.0) ? 0.0 : x;\n";exports.RELU=x;const p=r+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";exports.RELU6=p;const a="return x;";exports.CLONE=a;
},{}],"yBSN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnaryOpPackedProgram=exports.RELU6=exports.RELU=exports.ELU=exports.LINEAR=void 0;const e="return x;";exports.LINEAR=e;const r="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";exports.ELU=r;const t="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU=t;const s="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU6=s;class n{constructor(e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${r}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpPackedProgram=n;
},{}],"J76R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnpackProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r;const s=r.length,n=(0,e.getChannels)("rc",s),o=(0,t.getCoordsDataType)(s),a=(0,e.getSourceCoords)(s,n),c=n.slice(-2),p=s<=1?"rc":`vec2(${c.join(",")})`;this.userCode=`\n      void main() {\n        ${o} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${p}));\n      }\n    `}}exports.UnpackProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"YZpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBinaryCache=k,exports.MathBackendWebGL=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0,require("./flags_webgl");var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),a=require("./decode_matrix_gpu"),n=require("./decode_matrix_packed_gpu"),r=require("./encode_float_gpu"),s=require("./encode_float_packed_gpu"),i=require("./encode_matrix_gpu"),o=require("./encode_matrix_packed_gpu"),u=require("./gpgpu_context"),d=I(require("./gpgpu_math")),h=require("./kernel_utils/shared"),l=require("./pack_gpu"),p=require("./reshape_packed_gpu"),c=I(require("./tex_util")),g=require("./texture_manager"),m=I(require("./unaryop_gpu")),f=require("./unaryop_packed_gpu"),x=require("./unpack_gpu"),P=I(require("./webgl_util"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=r?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}const E=e.kernel_impls.whereImpl,D=1e-7;exports.EPSILON_FLOAT32=D;const T=1e-4;exports.EPSILON_FLOAT16=T;const _={};function k(e){return e in _?_[e]:(_[e]={},_[e])}const w=128,B=600;function v(){return null==(0,e.env)().global.screen?1024:(0,e.env)().global.screen.height*(0,e.env)().global.screen.width*window.devicePixelRatio*B/1024/1024}class L extends e.KernelBackend{constructor(a){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!(0,e.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==a){const a=(0,t.getWebGLContext)((0,e.env)().getNumber("WEBGL_VERSION"));this.binaryCache=k((0,e.env)().getNumber("WEBGL_VERSION")),this.gpgpu=new u.GPGPUContext(a),this.canvas=a.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=a,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=a.gl.canvas;this.textureManager=new g.TextureManager(this.gpgpu),this.numMBBeforeWarning=v(),this.texData=new e.DataStorage(this,(0,e.engine)())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,a,n){if(((0,e.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,e.env)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={};return this.texData.set(r,{shape:a,dtype:n,values:t,usage:c.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),r}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}decComplexRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.complexParentRefCount>0&&t.refCount--}}move(t,a,n,r){if((0,e.env)().getBool("DEBUG")&&this.checkNumericalProblems(a),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:a,usage:c.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(e){const t=e.dataId;if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--,e.refCount<1&&this.disposeData(t)}}readSync(t){const a=this.texData.get(t),{values:n,dtype:r,complexTensorInfos:s,slice:i,shape:o,isPacked:u}=a;if(null!=i){let e;e=u?new f.UnaryOpPackedProgram(o,m.CLONE):new m.UnaryOpProgram(o,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:r}],r),n=this.readSync(a.dataId);return this.disposeIntermediateTensorInfo(a),n}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;const d=null!=this.activeTimers;let h,l;if(d&&(h=e.util.now()),"complex64"===r){const t=this.readSync(s.real.dataId),a=this.readSync(s.imag.dataId);l=e.backend_util.mergeRealAndImagArrays(t,a)}else l=this.getValuesFromTexture(t);return d&&(this.downloadWaitMs+=e.util.now()-h),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const a=this.texData.get(t),{values:n,shape:r,slice:s,dtype:i,complexTensorInfos:o,isPacked:u}=a;if(null!=s){let e;e=u?new f.UnaryOpPackedProgram(r,m.CLONE):new m.UnaryOpProgram(r,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:r,dtype:i}],i),n=this.read(a.dataId);return this.disposeIntermediateTensorInfo(a),n}if(null!=n)return this.convertAndCacheOnCPU(t);if(!(0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,e.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let d,h,l=null;if("complex64"!==i&&(0,e.env)().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(t);const e=this.texData.get(d.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...c.getDenseTexShape(r))}if(this.pendingRead.set(t,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const t=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),a=t[0],n=t[1];h=e.backend_util.mergeRealAndImagArrays(a,n)}else if(null==l)h=this.getValuesFromTexture(t);else{const t=e.util.sizeFromShape(r);h=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}null!=d&&this.disposeIntermediateTensorInfo(d);const p=this.convertAndCacheOnCPU(t,h),g=this.pendingRead.get(t);return this.pendingRead.delete(t),g.forEach(e=>e(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),p}bufferSync(t){const a=this.readSync(t.dataId);let n=a;if("string"===t.dtype)try{n=a.map(t=>e.util.decodeString(t))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,e.buffer)(t.shape,t.dtype,n)}checkNumericalProblems(t){if(null!=t)for(let a=0;a<t.length;a++){const n=t[a];if(!P.canBeRepresented(n)){if((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:a,dtype:n,isPacked:i}=this.texData.get(t),o=e.util.sizeFromShape(a);if((0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const e=this.decode(t),n=this.texData.get(e.dataId),r=this.gpgpu.downloadMatrixFromPackedTexture(n.texture,...c.getDenseTexShape(a)).subarray(0,o);return this.disposeIntermediateTensorInfo(e),r}const u=(0,e.env)().getBool("WEBGL_PACK")&&!0===i,d=u?P.getShapeAs3D(a):a,h=u?new s.EncodeFloatPackedProgram(d):new r.EncodeFloatProgram(d),l=this.runWebGLProgram(h,[{shape:d,dtype:n,dataId:t}],"float32"),p=this.texData.get(l.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),g}async time(t){const a=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const s=e.util.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=e.util.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=a,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(s);o.kernelMs=e.util.sum(t),o.getExtraProfileInfo=(()=>t.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", "))}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:e.util.now(),endMs:null}}endTimer(t){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=e.util.now(),t)}async getQueryTime(t){if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const a=t;return a.endMs-a.startMs}disposeData(e){if(this.pendingDisposal.has(e))return;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(!this.texData.has(e))return;if(this.texData.get(e).complexParentRefCount>0)return void this.texData.get(e).refCount--;this.releaseGPUData(e);const{complexTensorInfos:t}=this.texData.get(e);null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)}releaseGPUData(e){const{texture:t,dtype:a,texShape:n,usage:r,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,u=this.dataRefCount.get(o);u>1?this.dataRefCount.set(o,u-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(n,a),this.textureManager.releaseTexture(t,n,r,s)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return(0,e.env)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=(0,e.engine)().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,a=w){const n=this.getCPUBackend();return(0,e.env)().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=n||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&t.every(t=>null==this.texData.get(t.dataId).texture&&e.util.sizeFromShape(t.shape)<a)}getGPGPUContext(){return this.gpgpu}where(t){e.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const a=t.dataSync();return E(t.shape,a)}packedUnaryOp(e,t,a){const n=new f.UnaryOpPackedProgram(e.shape,t);return this.compileAndRun(n,[e],a)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=(0,h.simpleAbsImplCPU)(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,m.ABS,t.dtype);const a=new m.UnaryOpProgram(t.shape,m.ABS);return this.compileAndRun(a,[t])}makeTensorInfo(t,a,n){let r;if("string"===a&&null!=n&&n.length>0&&e.util.isString(n[0])){const s=n.map(t=>e.util.encodeString(t));r=this.write(s,t,a)}else r=this.write(n,t,a);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:a}}makeOutput(t,a,n){const{dataId:r}=this.makeTensorInfo(t,a,n);return(0,e.engine)().makeTensorFromDataId(r,t,a,this)}unpackTensor(e){const t=new x.UnpackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new l.PackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const a=[P.getBatchDim(e.shape),...P.getRowsCols(e.shape)],n={dtype:e.dtype,shape:a,dataId:e.dataId},r=[P.getBatchDim(t),...P.getRowsCols(t)],s=new p.ReshapePackedProgram(r,a),i=this.runWebGLProgram(s,[n],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:r,shape:s,dtype:i}=t,o=P.getShapeAs3D(s);let u;u=r?new n.DecodeMatrixPackedProgram(o):new a.DecodeMatrixProgram(o);return{dtype:i,shape:s,dataId:this.runWebGLProgram(u,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}}runWebGLProgram(t,a,n,r,s=!1){const i=this.makeTensorInfo(t.outputShape,n),o=this.texData.get(i.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===c.PackingScheme.DENSE){const e=c.getDenseTexShape(t.outputShape);o.texShape=e.map(e=>2*e)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===e.util.sizeFromShape(i.shape))return o.values=e.util.getTypedArrayFromDType(i.dtype,0),i;const u=[],h=a.map(a=>{if("complex64"===a.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(a.dataId);if(null==n.texture){if(!t.packedInputs&&e.util.sizeFromShape(a.shape)<=(0,e.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:a.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=a.shape)}else if(!!n.isPacked!=!!t.packedInputs)a=n.isPacked?this.unpackTensor(a):this.packTensor(a),u.push(a),n=this.texData.get(a.dataId);else if(n.isPacked&&!P.isReshapeFree(n.shape,a.shape)){const e=a,t=a.shape;a.shape=n.shape,a=this.packedReshape(a,t),u.push(a),n=this.texData.get(a.dataId),e.shape=t}return this.uploadToGPU(a.dataId),{shape:a.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);const l={shape:i.shape,texData:o,isUniform:!1},p=d.makeShaderKey(t,h,l),g=this.getAndSaveBinary(p,()=>d.compileProgram(this.gpgpu,t,h,l)),m=null!=this.activeTimers;let f;if(m&&(f=this.startTimer()),d.runProgram(this.gpgpu,g,h,l,r),u.forEach(e=>this.disposeIntermediateTensorInfo(e)),m&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)})),!(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===s){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(t,a,n,r,s=!1){n=n||a[0].dtype;const i=this.runWebGLProgram(t,a,n,r,s);return(0,e.engine)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,e.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,e.tidy)(()=>{if(!(0,e.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=(0,e.env)().getBool("DEBUG");(0,e.env)().set("DEBUG",!1);const a=this.abs((0,e.scalar)(1e-8)).dataSync()[0];if((0,e.env)().set("DEBUG",t),a>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?D:T}uploadToGPU(t){const a=this.texData.get(t),{shape:n,dtype:r,values:s,texture:u,usage:d,isPacked:h}=a;if(null!=u)return;const l=null!=this.activeTimers;let p;l&&(p=e.util.now());let g=a.texShape;if(null==g&&(g=P.getTextureShapeFromLogicalShape(n,h),a.texShape=g),null!=s){const t=P.getShapeAs3D(n);let u,d=g[1],m=g[0];const f=s instanceof Uint8Array;h?([d,m]=c.getPackedMatrixTextureShapeWidthHeight(g[0],g[1]),u=new o.EncodeMatrixPackedProgram(t,[m,d],f)):u=new i.EncodeMatrixProgram(t,[m,d],f);const x=this.makeTensorInfo([m,d],r);this.texData.get(x.dataId).usage=f?c.TextureUsage.PIXELS:c.TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),d,m,s);const y=!0,I=this.runWebGLProgram(u,[x],r,null,y),E=this.texData.get(I.dataId);a.texture=E.texture,a.texShape=E.texShape,a.isPacked=E.isPacked,a.usage=E.usage,this.disposeIntermediateTensorInfo(x),this.texData.delete(I.dataId),a.values=null,l&&(this.uploadWaitMs+=e.util.now()-p)}else{const e=this.acquireTexture(g,d,r,h);a.texture=e}}convertAndCacheOnCPU(e,t){const a=this.texData.get(e),{dtype:n}=a;return this.releaseGPUData(e),null!=t&&(a.values=b(t,n)),a.values}acquireTexture(e,t,a,n){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,n)}computeBytes(t,a){return t[0]*t[1]*e.util.bytesPerElement(a)}}function b(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const a="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<a.length;++t)a[t]=Math.round(e[t]);return a}throw new Error(`Unknown dtype ${t}`)}exports.MathBackendWebGL=L;
},{"./flags_webgl":"YNu6","@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./decode_matrix_gpu":"tZX6","./decode_matrix_packed_gpu":"kOP2","./encode_float_gpu":"KyTh","./encode_float_packed_gpu":"zODu","./encode_matrix_gpu":"JBcV","./encode_matrix_packed_gpu":"dH5p","./gpgpu_context":"AZP2","./gpgpu_math":"hS5V","./kernel_utils/shared":"tfp0","./pack_gpu":"kEpT","./reshape_packed_gpu":"K4kf","./tex_util":"hBHG","./texture_manager":"herW","./unaryop_gpu":"uzBV","./unaryop_packed_gpu":"yBSN","./unpack_gpu":"J76R","./webgl_util":"p3g2"}],"BRLE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceHalfFloat=a,Object.defineProperty(exports,"MathBackendWebGL",{enumerable:!0,get:function(){return n.MathBackendWebGL}}),Object.defineProperty(exports,"setWebGLContext",{enumerable:!0,get:function(){return o.setWebGLContext}}),Object.defineProperty(exports,"GPGPUContext",{enumerable:!0,get:function(){return u.GPGPUContext}}),exports.webgl_util=exports.gpgpu_util=void 0;var e=require("@tensorflow/tfjs-core"),t=p(require("./gpgpu_util"));exports.gpgpu_util=t;var r=p(require("./webgl_util"));exports.webgl_util=r;var n=require("./backend_webgl"),o=require("./canvas_util"),u=require("./gpgpu_context");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=o?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(n,u,p):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(){(0,e.env)().set("WEBGL_FORCE_F16_TEXTURES",!0)}
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_util":"LB6l","./webgl_util":"p3g2","./backend_webgl":"YZpX","./canvas_util":"S11S","./gpgpu_context":"AZP2"}],"yAt8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={webgl:!0,version_webgl:!0};Object.defineProperty(exports,"version_webgl",{enumerable:!0,get:function(){return o.version}}),exports.webgl=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./backend_webgl"),o=require("./version"),n=require("./webgl");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))}),r.device_util.isBrowser()&&(0,r.registerBackend)("webgl",()=>new t.MathBackendWebGL,2);const s={forceHalfFloat:n.forceHalfFloat};exports.webgl=s;
},{"@tensorflow/tfjs-core":"tc6m","./backend_webgl":"YZpX","./version":"SdA6","./webgl":"BRLE"}],"r3Zb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpProgram=exports.SQUARED_DIFFERENCE=exports.CHECK_NAN_SNIPPET=void 0;var t=require("@tensorflow/tfjs-core");const r="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET=r;const e="return (a - b) * (a - b);";exports.SQUARED_DIFFERENCE=e;class a{constructor(r,e,a){this.variableNames=["A","B"],this.outputShape=t.backend_util.assertAndGetBroadcastShape(e,a),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${r}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}exports.BinaryOpProgram=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"MEci":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpPackedProgram=exports.NOT_EQUAL=exports.ELU_DER=exports.CHECK_NAN_SNIPPET=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./packing_util"),s=require("./shader_compiler");const r="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";exports.CHECK_NAN_SNIPPET=r;const n="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n";exports.ELU_DER=n;const o="\n  return vec4(notEqual(a, b));\n";exports.NOT_EQUAL=o;class u{constructor(r,n,o,u=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.backend_util.assertAndGetBroadcastShape(n,o);const a=this.outputShape.length;let l="";if(u)if(0===a||1===t.util.sizeFromShape(this.outputShape))l="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(l=`\n          ${(0,s.getCoordsDataType)(a)} coords = getOutputCoords();\n        `,1===a)l+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=(0,e.getChannels)("coords",a);l+=`\n            bool nextRowOutOfBounds =\n              (${t[a-2]} + 1) >= ${this.outputShape[a-2]};\n            bool nextColOutOfBounds =\n              (${t[a-1]} + 1) >= ${this.outputShape[a-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${r}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${l}\n\n        setOutput(result);\n      }\n    `}}exports.BinaryOpPackedProgram=u;
},{"@tensorflow/tfjs-core":"tc6m","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"Gwwj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"webgl",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"vWXR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=n,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:o}=e,{real:a,imag:r}=n,c=o.makeTensorInfo(a.shape,"complex64"),s=o.texData.get(c.dataId),i=(0,t.identity)({inputs:{x:a},backend:o});o.texData.get(i.dataId).complexParentRefCount++;const p=(0,t.identity)({inputs:{x:r},backend:o});return o.texData.get(p.dataId).complexParentRefCount++,s.complexTensorInfos={real:i,imag:p},c}const o={kernelName:e.Complex,backendName:"webgl",kernelFunc:n};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"eiHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=s,exports.leakyReluConfig=exports.LEAKYRELU_PACKED=exports.LEAKYRELU=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (a < 0.) ? b * a : a;";exports.LEAKYRELU=n;const o="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:t,backend:p,attrs:l}=s,{x:u}=t,{alpha:c}=l,i=p.makeTensorInfo([],"float32",e.util.createScalarValue(c,"float32")),L=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,u.shape,i.shape):new r.BinaryOpProgram(n,u.shape,i.shape),E=p.runWebGLProgram(L,[u,i],u.dtype);return p.disposeIntermediateTensorInfo(i),E}exports.LEAKYRELU_PACKED=o;const t={kernelName:e.LeakyRelu,backendName:"webgl",kernelFunc:s};exports.leakyReluConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"k80A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=s,exports.preluConfig=exports.PRELU_PACKED=exports.PRELU=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (a < 0.) ? b * a : a;";exports.PRELU=n;const o="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:p,backend:t}=s,{x:u,alpha:c}=p,i=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,u.shape,c.shape):new r.BinaryOpProgram(n,u.shape,c.shape);return t.runWebGLProgram(i,[u,c],u.dtype)}exports.PRELU_PACKED=o;const p={kernelName:e.Prelu,backendName:"webgl",kernelFunc:s};exports.preluConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"uLeB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=f,exports.binaryKernelFunc=N,exports.mapActivationToShaderProgram=P,exports.CHECK_NAN_SNIPPET_BINARY_PACKED=exports.CHECK_NAN_SNIPPET_BINARY=exports.CHECK_NAN_SNIPPET_UNARY=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),t=require("../binaryop_packed_gpu"),n=require("../kernels/Complex"),a=require("../kernels/LeakyRelu"),p=require("../kernels/Prelu"),o=i(require("../unaryop_gpu")),u=i(require("../unaryop_packed_gpu"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var o=a?Object.getOwnPropertyDescriptor(e,p):null;o&&(o.get||o.set)?Object.defineProperty(n,p,o):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}const l="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET_UNARY=l;const d="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET_BINARY=d;const c="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function f({opSnippet:r,packedOpSnippet:t,cpuKernelImpl:n,dtype:a}){return({inputs:p,backend:s})=>{const{x:i}=p,l=s,d=a||i.dtype;if(l.shouldExecuteOnCPU([i])&&null!=n){const e=l.texData.get(i.dataId),r=n(e.values,d);return l.makeTensorInfo(i.shape,d,r)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new u.UnaryOpPackedProgram(i.shape,t):new o.UnaryOpProgram(i.shape,r),l.runWebGLProgram(c,[i],d)}}function N({opSnippet:a,packedOpSnippet:p,checkOutOfBounds:o=!1,supportsComplex:u=!1,cpuKernelImpl:s,dtype:i}){return({inputs:l,backend:d})=>{const{a:c,b:f}=l,N=d;if(u&&"complex64"===c.dtype){const t=N.texData.get(c.dataId),p=N.texData.get(f.dataId),[o,u]=[[t.complexTensorInfos.real,p.complexTensorInfos.real],[t.complexTensorInfos.imag,p.complexTensorInfos.imag]].map(t=>{const[n,p]=t,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},u={dataId:p.dataId,dtype:p.dtype,shape:f.shape},s=new r.BinaryOpProgram(a,c.shape,f.shape);return N.runWebGLProgram(s,[o,u],(0,e.upcastType)(n.dtype,p.dtype))}),s=(0,n.complex)({inputs:{real:o,imag:u},backend:N});return N.disposeIntermediateTensorInfo(o),N.disposeIntermediateTensorInfo(u),s}const P=i||(0,e.upcastType)(c.dtype,f.dtype);if(N.shouldExecuteOnCPU([c,f])&&null!=s){const e=N.texData.get(c.dataId),r=N.texData.get(f.dataId),[t,n]=s(c.shape,f.shape,e.values,r.values,P),a=N.makeTensorInfo(n,P);return N.texData.get(a.dataId).values=t,a}let _;return _=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=p?new t.BinaryOpPackedProgram(p,c.shape,f.shape,o):new r.BinaryOpProgram(a,c.shape,f.shape),N.runWebGLProgram(_,[c,f],P)}}function P(e,r=!1){if("linear"===e)return r?u.LINEAR:o.LINEAR;if("relu"===e)return r?u.RELU:o.RELU;if("elu"===e)return r?u.ELU:o.ELU;if("relu6"===e)return r?u.RELU6:o.RELU6;if("prelu"===e)return r?p.PRELU_PACKED:p.PRELU;if("leakyrelu"===e)return r?a.LEAKYRELU_PACKED:a.LEAKYRELU;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}exports.CHECK_NAN_SNIPPET_BINARY_PACKED=c;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernels/Complex":"vWXR","../kernels/LeakyRelu":"eiHO","../kernels/Prelu":"k80A","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"UauI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatMulPackedProgram=void 0;class t{constructor(t,e,n,a=!1,i=!1,s=!1,r=null,c=!1,o=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const u=a?t[1]:t[2],l=Math.ceil(u/2),v=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",d=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let p="",b="";r&&(p=c?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`vec4 activation(vec4 x) {\n          ${r}\n        }`,b="result = activation(result);");const $=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha");let y="rc.x",m="rc.x";t[0]<e[0]?y=`int(min(float(rc.x), ${t[0]-1}.))`:e[0]<t[0]&&(m=`int(min(float(rc.x), ${e[0]-1}.))`),this.userCode=`\n      ${p}\n\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${y};\n          int batchB = ${m};\n          vec4 a = getMatrixA(batchA, ${v});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${x[0]});\n          result += (${d[1]} * ${x[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${$}\n\n        ${b}\n\n        setOutput(result);\n      }\n    `}}exports.MatMulPackedProgram=t;
},{}],"eCLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpComplexProgram=exports.COMPLEX_MULTIPLY=void 0;var a=require("@tensorflow/tfjs-core");const e={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};exports.COMPLEX_MULTIPLY=e;class t{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}exports.BinaryOpComplexProgram=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"dTvy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiply=d,exports.multiplyConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("../binaryop_complex_gpu")),t=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/shared"),o=require("./Complex");function p(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(a);if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}const l="return a * b;";function d(p){const{inputs:s,backend:d}=p,{a:u,b:i}=s,c=e.backend_util.upcastType(u.dtype,i.dtype);if("complex64"===u.dtype){const e=d.texData.get(u.dataId),t=d.texData.get(i.dataId),r=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.REAL,u.shape,i.shape),n=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.IMAG,u.shape,i.shape),p=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:u.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:u.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],s=d.runWebGLProgram(r,p,"float32"),l=d.runWebGLProgram(n,p,"float32"),c=(0,o.complex)({inputs:{real:s,imag:l},backend:d});return d.disposeIntermediateTensorInfo(s),d.disposeIntermediateTensorInfo(l),c}if(d.shouldExecuteOnCPU([u,i])){const e=d.texData.get(u.dataId),a=d.texData.get(i.dataId),[t,r]=(0,n.multiplyImplCPU)(u.shape,i.shape,e.values,a.values,c),o=d.makeTensorInfo(r,c);return d.texData.get(o.dataId).values=t,o}let f;return f=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(l,u.shape,i.shape):new t.BinaryOpProgram(l,u.shape,i.shape),d.runWebGLProgram(f,[u,i],c)}const u={kernelName:e.Multiply,backendName:"webgl",kernelFunc:d};exports.multiplyConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_complex_gpu":"eCLc","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/shared":"tfp0","./Complex":"vWXR"}],"hfnj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packedReshape=a;var e=require("../reshape_packed_gpu"),t=require("../webgl_util");function a(a,d,p){const r=[(0,t.getBatchDim)(a.shape),...(0,t.getRowsCols)(a.shape)],s={dtype:a.dtype,shape:r,dataId:a.dataId},o=[(0,t.getBatchDim)(d),...(0,t.getRowsCols)(d)],u=new e.ReshapePackedProgram(o,r),c=p.runWebGLProgram(u,[s],a.dtype,null,!0);return{dataId:c.dataId,shape:d,dtype:c.dtype}}
},{"../reshape_packed_gpu":"K4kf","../webgl_util":"p3g2"}],"k4TP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=t,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/reshape"),s=require("../webgl_util");function t(t){const{inputs:r,backend:p,attrs:h}=t,{x:n}=r,{shape:i}=h,l=p,o=e.util.sizeFromShape(n.shape),d=e.util.inferFromImplicitShape(i,o),u=e.util.sizeFromShape(d);e.util.assert(o===u,()=>`The new shape (${d}) has ${u} elements and the old `+`shape (${n.shape}) has ${o} elements. The new shape and old `+"shape must have the same number of elements.");const c=l.texData.get(n.dataId);return!c.isPacked||(0,s.isReshapeFree)(n.shape,d)||null!==c.texture&&(0,s.isReshapeFree)(c.shape,d)?(l.incRef(n.dataId),{dataId:n.dataId,shape:d,dtype:n.dtype}):(0,a.packedReshape)(n,d,l)}const r={kernelName:e.Reshape,backendName:"webgl",kernelFunc:t};exports.reshapeConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reshape":"hfnj","../webgl_util":"p3g2"}],"mDOg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeanProgram=void 0;var n=require("@tensorflow/tfjs-core");class e{constructor(e,t){this.variableNames=["x"];const{windowSize:i,batchSize:a,inSize:s,outSize:o}=e;this.outputShape=[a,o];const u=4*Math.floor(i/4),c=i%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${n.util.isInt(e)?e.toPrecision(2):e}, ones);`}let d="";s%i>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.MeanProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"cqVi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReduceProgram=void 0;class n{constructor(n,e){this.variableNames=["x"];const{windowSize:a,batchSize:l,inSize:t,outSize:i}=n;this.outputShape=[l,i];let u="0.0",o="";"prod"===e?u="1.0":"min"===e?(u="1.0 / 1e-20",o="min"):"max"===e&&(u="-1.0 / 1e-20",o="max");let d=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?d="sumValue":"prod"===e?d="prodValue":"all"===e?d="allValue":"any"===e&&(d="anyValue");const s=4*Math.floor(a/4),V=a%4;let c=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n      }\n    `,r="vec4";"all"===e?(u="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",r="bvec4"):"any"===e&&(u="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",r="bvec4");let f="";t%a>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${t}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${u};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${a};\n\n        vec4 minMaxValue = vec4(${u});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${d});\n      }\n    `}}exports.ReduceProgram=n;
},{}],"rKxH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reduce=o;var e=require("@tensorflow/tfjs-core"),i=require("../mean_gpu"),t=require("../reduce_gpu");function n(i){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:i[1],o=e.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return t}function o(e,o,r,u){const a=n(e.shape);let z=e;for(let n=0;n<a.length;n++){const{inSize:S,windowSize:s,outSize:c}=a[n];let d,w;d="mean"===r?0===n?new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},S):new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c}):new t.ReduceProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},r),w=z,z=u.runWebGLProgram(d,[z],o),w.dataId!==e.dataId&&u.disposeIntermediateTensorInfo(w)}return z}
},{"@tensorflow/tfjs-core":"tc6m","../mean_gpu":"mDOg","../reduce_gpu":"cqVi"}],"JPQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposeProgram=void 0;var r=require("./shader_compiler");class e{constructor(e,s){this.variableNames=["A"];const o=new Array(e.length);for(let r=0;r<o.length;r++)o[r]=e[s[r]];this.outputShape=o,this.rank=o.length;const n=(0,r.getCoordsDataType)(this.rank),a=t(s);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}function t(r){const e=r.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<r.length;o++)s[r[o]]=t[o];return s.join()}exports.TransposeProgram=e;
},{"./shader_compiler":"DIKY"}],"TCui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposePackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class r{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(r.length);for(let t=0;t<s.length;t++)s[t]=r[n[t]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=(0,e.getCoordsDataType)(this.rank),i=(0,t.getVecChannels)("rc",this.rank),o=new Array(this.rank);for(let t=0;t<n.length;t++)o[n[t]]=i[t];const h=`vec2(${o.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${h})`;this.userCode=`\n    void main() {\n      ${a} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${u}) {\n        result[1] = ${c};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${s[this.rank-2]}) {\n        result[2] = ${c};\n        if(${u}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}exports.TransposePackedProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"nCXe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=o,Object.defineProperty(exports,"transposeImplCPU",{enumerable:!0,get:function(){return r.transposeImplCPU}});var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),s=require("../transpose_gpu"),t=require("../transpose_packed_gpu");function o(r,o,n){const p=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t.TransposePackedProgram(r.shape,o):new s.TransposeProgram(r.shape,o);return n.runWebGLProgram(p,[r],r.dtype)}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../transpose_gpu":"JPQj","../transpose_packed_gpu":"TCui"}],"mchI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumImpl=n;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),r=require("./Transpose_impl");function n(n,a,p,u){const i=a,o=n.shape.length,l=e.util.parseAxisParam(i,n.shape);let d=l;const c=e.backend_util.getAxesPermutation(d,o),m=null!=c;let h=n;m&&(h=(0,r.transposeImpl)(n,c,u),d=e.backend_util.getInnerMostAxes(d.length,o)),e.backend_util.assertAxesAreInnerMostDims("sum",d,o);const[I,x]=e.backend_util.computeOutAndReduceShapes(h.shape,d);let _=I;p&&(_=e.backend_util.expandShapeToKeepDim(I,l));const b=e.util.sizeFromShape(x),k=e.util.sizeFromShape(n.shape)/b,f=(0,t.reshape)({inputs:{x:h},attrs:{shape:[k,b]},backend:u}),A=(0,e.sumOutType)(n.dtype),T=(0,s.reduce)(f,A,"sum",u),g=(0,t.reshape)({inputs:{x:T},attrs:{shape:_},backend:u});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(T),m&&u.disposeIntermediateTensorInfo(h),g}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose_impl":"nCXe"}],"RVri":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=s,exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Sum_impl");function s(e){const{inputs:s,backend:t,attrs:n}=e,{x:o}=s,{axis:u,keepDims:i}=n;return(0,r.sumImpl)(o,u,i,t)}const t={kernelName:e.Sum,backendName:"webgl",kernelFunc:s};exports.sumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./Sum_impl":"mchI"}],"hS8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=s,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Transpose_impl");function s(e){const{inputs:s,backend:r,attrs:a}=e,{x:n}=s,{perm:o}=a,p=r,l=n.shape.length,u=new Array(l);for(let t=0;t<u.length;t++)u[t]=n.shape[o[t]];let d;if(p.shouldExecuteOnCPU([n])){const e=p.texData.get(n.dataId).values,s=(0,t.transposeImplCPU)(e,n.shape,n.dtype,o,u);d=p.makeTensorInfo(u,n.dtype),p.texData.get(d.dataId).values=s}else d=(0,t.transposeImpl)(n,o,p);return d}const r={kernelName:e.Transpose,backendName:"webgl",kernelFunc:s};exports.transposeConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Transpose_impl":"nCXe"}],"mEDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulImpl=i,exports.MATMUL_SHARED_DIM_THRESHOLD=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),t=require("../mulmat_packed_gpu"),a=require("./Multiply"),n=require("./Reshape"),p=require("./Sum"),r=require("./Transpose");const u=1e3;function i({a:i,b:l,transposeA:o,transposeB:h,backend:c,bias:d=null,preluActivationWeights:m=null,leakyreluAlpha:b=0,activation:k=null}){const f=i.shape.length,M=l.shape.length,x=o?i.shape[f-2]:i.shape[f-1],_=h?l.shape[M-1]:l.shape[M-2],T=o?i.shape[f-1]:i.shape[f-2],A=h?l.shape[M-2]:l.shape[M-1],S=i.shape.slice(0,-2),y=l.shape.slice(0,-2),$=e.util.sizeFromShape(S),g=e.util.sizeFromShape(y),q=$===g||1===$||1===g;e.util.assert(f>=2&&M>=2&&q,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${S}) and (${y}).`);const D=($>g?i.shape.slice(0,-2):l.shape.slice(0,-2)).concat([T,A]);e.util.assert(x===_,()=>`Error in matMul: inner shapes (${x}) and (`+`${_}) of Tensors with shapes ${i.shape} and `+`${l.shape} and transposeA=${o}`+` and transposeB=${h} must match.`);const v=o?[$,x,T]:[$,T,x],E=h?[g,A,_]:[g,_,A],H=(0,n.reshape)({inputs:{x:i},backend:c,attrs:{shape:v}}),I=(0,n.reshape)({inputs:{x:l},backend:c,attrs:{shape:E}}),L=[H,I],P=Math.max($,g),R=o?H.shape[1]:H.shape[2],w=null!=d,O=null!=m,j="leakyrelu"===k,z=null!=k?(0,s.mapActivationToShaderProgram)(k,!0):null;let B;if((1===T||1===A)&&R>u&&!1===(w||O||j||null!=z)){let e=H,s=I;o&&(e=(0,r.transpose)({inputs:{x:H},backend:c,attrs:{perm:[0,2,1]}}),L.push(e)),h&&(s=(0,r.transpose)({inputs:{x:I},backend:c,attrs:{perm:[0,2,1]}}),L.push(s));const t=1===A;let u=e;1!==A&&(u=(0,n.reshape)({inputs:{x:e},backend:c,attrs:{shape:[P,R,1]}}),L.push(u));const i=1===A?2:1;let l=s;t&&(l=(0,n.reshape)({inputs:{x:s},backend:c,attrs:{shape:[P,1,R]}}),L.push(l));const d=(0,a.multiply)({inputs:{a:u,b:l},backend:c});B=(0,p.sum)({inputs:{x:d},backend:c,attrs:{axis:i,keepDims:!0}}),L.push(d)}else{const s=(0,e.upcastType)(i.dtype,l.dtype),a=new t.MatMulPackedProgram(v,E,[P,T,A],o,h,w,z,O,j),n=[H,I];if(null!=d&&n.push(d),O&&n.push(m),j){const s=c.makeTensorInfo([],"float32",e.util.createScalarValue(b,"float32"));n.push(s),L.push(s)}B=c.runWebGLProgram(a,n,s)}const F=(0,n.reshape)({inputs:{x:B},backend:c,attrs:{shape:D}});L.push(B);for(const e of L)c.disposeIntermediateTensorInfo(e);return F}exports.MATMUL_SHARED_DIM_THRESHOLD=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../mulmat_packed_gpu":"UauI","./Multiply":"dTvy","./Reshape":"k4TP","./Sum":"RVri","./Transpose":"hS8R"}],"xSMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=a,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:s,attrs:r}=e,{a:n,b:o,bias:u,preluActivationWeights:i}=a,{transposeA:l,transposeB:c,activation:p,leakyreluAlpha:M}=r;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:l,transposeB:c,backend:s,bias:u,preluActivationWeights:i,leakyreluAlpha:M,activation:p})}const s={kernelName:e._FusedMatMul,backendName:"webgl",kernelFunc:a};exports._fusedMatMulConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./BatchMatMul_impl":"mEDx"}],"cuxj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=s,exports.absConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const a="return abs(x);";function s(s){const{inputs:o,backend:p}=s,{x:u}=o;if(p.shouldExecuteOnCPU([u])&&"complex64"!==u.dtype){const e=p.texData.get(u.dataId),n=(0,r.simpleAbsImplCPU)(e.values);return p.makeTensorInfo(u.shape,u.dtype,n)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(u.shape,a):new n.UnaryOpProgram(u.shape,a),p.runWebGLProgram(c,[u],u.dtype)}const o={kernelName:e.Abs,backendName:"webgl",kernelFunc:s};exports.absConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"FCN5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const o=n.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.acos=s;const t={kernelName:e.Acos,backendName:"webgl",kernelFunc:s};exports.acosConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"WORC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../unaryop_gpu");const n=o.CHECK_NAN_SNIPPET+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",s=(0,r.unaryKernelFunc)({opSnippet:n});exports.acosh=s;const t={kernelName:e.Acosh,backendName:"webgl",kernelFunc:s};exports.acoshConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"qsoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addConfig=exports.addKernelFunc=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const t="return a + b;",l=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:t,supportsComplex:!0,cpuKernelImpl:n.addImplCPU});exports.addKernelFunc=l;const p={kernelName:e.Add,backendName:"webgl",kernelFunc:l};exports.addConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"DioZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNProgram=void 0;class t{constructor(t,s){this.outputShape=[],this.outputShape=t,this.variableNames=s.map((t,s)=>`T${s}`);const e=[];this.variableNames.forEach(t=>{e.push(`float v${t} = get${t}AtOutCoords();`)});const o=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${e.join("\n        ")}\n\n        float result = ${o};\n        setOutput(result);\n      }\n    `}}exports.AddNProgram=t;
},{}],"BmoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNPackedProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const s=[];this.variableNames.forEach(t=>{s.push(`vec4 v${t} = get${t}AtOutCoords();`)});const a=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${s.join("\n        ")}\n\n        vec4 result = ${a};\n        setOutput(result);\n      }\n    `}}exports.AddNPackedProgram=t;
},{}],"hFFr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=d,exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../addn_gpu"),r=require("../addn_packed_gpu"),t=require("./Identity");function d(a){const{inputs:o,backend:s}=a,i=o;if(1===i.length)return(0,t.identity)({inputs:{x:i[0]},backend:s});if(i.length>(0,e.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(i.length/2),n=d({inputs:i.slice(0,e),backend:s}),r=d({inputs:i.slice(e),backend:s});return d({inputs:[n,r],backend:s})}const u=i.map(e=>e.dtype).reduce((n,r)=>(0,e.upcastType)(n,r)),c=i.map(e=>e.shape),p=(0,e.env)().getBool("WEBGL_PACK")?new r.AddNPackedProgram(i[0].shape,c):new n.AddNProgram(i[0].shape,c);return s.runWebGLProgram(p,i,u)}const a={kernelName:e.AddN,backendName:"webgl",kernelFunc:d};exports.addNConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../addn_gpu":"DioZ","../addn_packed_gpu":"BmoR","./Identity":"Gwwj"}],"n0H3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=a,exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:l}=a,{x:o}=r,{axis:p,keepDims:u}=l,d=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let h=c;const k=e.backend_util.getAxesPermutation(h,d);let x=o;null!=k&&(x=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,d)),e.backend_util.assertAxesAreInnerMostDims("all",h,d);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),I=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),_=(0,s.reduce)(I,I.dtype,"all",i);let g;if(u){const s=e.backend_util.expandShapeToKeepDim(b,c);g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:s}})}else g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(_),null!=k&&i.disposeIntermediateTensorInfo(x),g}const r={kernelName:e.All,backendName:"webgl",kernelFunc:a};exports.allConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"VDwi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=a,exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:o}=a,{x:p}=r,{axis:u,keepDims:d}=o,c=p.shape.length,l=e.util.parseAxisParam(u,p.shape);let h=l;const k=e.backend_util.getAxesPermutation(h,c);let x=p;null!=k&&(x=(0,n.transpose)({inputs:{x:p},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,c)),e.backend_util.assertAxesAreInnerMostDims("any",h,c);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),y=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(y,y.dtype,"any",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(b,l);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(I),null!=k&&i.disposeIntermediateTensorInfo(x),_}const r={kernelName:e.Any,backendName:"webgl",kernelFunc:a};exports.anyConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"Pm0r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxProgram=void 0;class t{constructor(t,e,n){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o="max"===e?">":"<",d=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${i}; i++) {\n          int inIdx = ${d};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}exports.ArgMinMaxProgram=t;
},{}],"TNMy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./packing_util"),t=require("./shader_compiler");class c{constructor(c,o,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,e.util.assert(c.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const i=c[c.length-1],r=Math.ceil(i/o);this.outputShape=c.slice(0,-1),r>1&&this.outputShape.push(r),a||this.variableNames.push("bestIndicesA");const d=this.outputShape,l=d.length,$=(0,t.getCoordsDataType)(l),u=(0,n.getChannels)("coords",l);let h,p;if(1===r){p=l+1;const e=(0,t.getCoordsDataType)(p);h=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[l-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[l-2]};`}else p=l,h=`\n        ${$} sourceLocR = coords;\n        ++${u[l-1]};\n        ${$} sourceLocG = coords;\n        ++${u[l-2]};\n        ${$} sourceLocA = coords;\n        --${u[l-1]};\n        ${$} sourceLocB = coords;\n        --${u[l-2]};`;const x=["x","y","z","w","u","v"].slice(0,p),g="."+x[p-1],v=x.map(e=>"int "+e),C=(0,n.getChannels)("sourceLocR",p-1).concat("inIdx.r"),I=(0,n.getChannels)("sourceLocG",p-1).concat("inIdx.g"),b=(0,n.getChannels)("sourceLocB",p-1).concat("inIdx.b"),A=(0,n.getChannels)("sourceLocA",p-1).concat("inIdx.a"),j="max"===s?"greaterThan":"lessThan",L=a?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),\n                             getBestIndicesAChannel(${I.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${A.join()})));`,B=`vec4(\n            getAChannel(${C.join()}),\n            hasNextCol ? getAChannel(${I.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${A.join()}) : 0.)`,m=a?"":`\n      float getBestIndicesAChannel(${v.join()}) {\n        return getChannel(getBestIndicesA(${x.join()}),\n                                          vec2(${x.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${v.join()}) {\n        return getChannel(getA(${x.join()}),\n                               vec2(${x.slice(-2).join()}));\n      }\n      ${m}\n      void main() {\n        ${$} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${d[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${d[l-2]-1};\n        ${h}\n        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},\n          sourceLocB${g}, sourceLocA${g}) * ${o};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${B};\n\n        for (int i = 0; i < ${o}; i++) {\n          inIdx = srcIdx;\n          ${L}\n          vec4 candidate = ${B};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${j}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}exports.ArgMinMaxPackedProgram=c;
},{"@tensorflow/tfjs-core":"tc6m","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"x6ZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinMaxReduce=i;var e=require("@tensorflow/tfjs-core"),n=require("../argminmax_gpu"),t=require("../argminmax_packed_gpu"),r=require("../kernels/Reshape");function s(t,r,a,i=null){let o=r.shape[0],u=r.shape[1];null!=i&&(o=i.shape[0],u=i.shape[1]);const p=e.backend_util.computeOptimalWindowSize(u),l={windowSize:p,inSize:u,batchSize:o,outSize:Math.ceil(u/p)},c=new n.ArgMinMaxProgram(l,a,null==i),h=[r];null!=i&&h.push(i);const d=t.runWebGLProgram(c,h,"int32");if(1===d.shape[1])return d;const g=s(t,r,a,d);return t.disposeIntermediateTensorInfo(d),g}function a(n,r,s,i=null){const o=null!=i?i.shape:r.shape,u=o[o.length-1],p=e.backend_util.computeOptimalWindowSize(u),l=new t.ArgMinMaxPackedProgram(o,p,s,null==i),c=null==i?[r]:[r,i],h=n.runWebGLProgram(l,c,"int32");if(h.shape.length===r.shape.length){const e=a(n,r,s,h);return n.disposeIntermediateTensorInfo(h),e}return h}function i(n,t,i,o){const u=[i];if(e.backend_util.assertAxesAreInnerMostDims("arg"+o.charAt(0).toUpperCase()+o.slice(1),u,t.shape.length),!(0,e.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const a=[],[i,p]=e.backend_util.computeOutAndReduceShapes(t.shape,u),l=e.util.sizeFromShape(p),c=(0,r.reshape)({inputs:{x:t},backend:n,attrs:{shape:[-1,l]}});a.push(c);const h=s(n,c,o);a.push(h);const d=(0,r.reshape)({inputs:{x:h},backend:n,attrs:{shape:i}});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}return a(n,t,o)}
},{"@tensorflow/tfjs-core":"tc6m","../argminmax_gpu":"Pm0r","../argminmax_packed_gpu":"TNMy","../kernels/Reshape":"k4TP"}],"ZL6O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=s,exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/arg_min_max"),r=require("./Transpose");function s(s){const{inputs:n,backend:a,attrs:o}=s,{x:i}=n,{axis:l}=o;let u=e.util.parseAxisParam(l,i.shape);const x=e.backend_util.getAxesPermutation(u,i.shape.length);let c=i;const p=[];null!=x&&(c=(0,r.transpose)({inputs:{x:i},backend:a,attrs:{perm:x}}),p.push(c),u=e.backend_util.getInnerMostAxes(u.length,c.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMax",[u[0]],c.shape.length);const g=(0,t.argMinMaxReduce)(a,c,u[0],"max");return p.forEach(e=>a.disposeIntermediateTensorInfo(e)),g}const n={kernelName:e.ArgMax,backendName:"webgl",kernelFunc:s};exports.argMaxConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/arg_min_max":"x6ZC","./Transpose":"hS8R"}],"cvsE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=r,exports.argMinConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/arg_min_max"),t=require("./Transpose");function r(r){const{inputs:s,backend:a,attrs:i}=r,{x:o}=s,{axis:l}=i;let u=e.util.parseAxisParam(l,o.shape);const c=e.backend_util.getAxesPermutation(u,o.shape.length);let p=o;const g=[];null!=c&&(p=(0,t.transpose)({inputs:{x:o},backend:a,attrs:{perm:c}}),g.push(p),u=e.backend_util.getInnerMostAxes(u.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMin",[u[0]],p.shape.length);const x=(0,n.argMinMaxReduce)(a,p,u[0],"min");return g.forEach(e=>a.disposeIntermediateTensorInfo(e)),x}const s={kernelName:e.ArgMin,backendName:"webgl",kernelFunc:r};exports.argMinConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/arg_min_max":"x6ZC","./Transpose":"hS8R"}],"UkOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const s=r.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",i=(0,n.unaryKernelFunc)({opSnippet:s});exports.asin=i;const t={kernelName:e.Asin,backendName:"webgl",kernelFunc:i};exports.asinConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"HHor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const s=n.CHECK_NAN_SNIPPET+"return log(x + sqrt(x * x + 1.0));",o=(0,r.unaryKernelFunc)({opSnippet:s});exports.asinh=o;const t={kernelName:e.Asinh,backendName:"webgl",kernelFunc:o};exports.asinhConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"zhx4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const t=r.CHECK_NAN_SNIPPET+"\n  return atan(x);\n",a=(0,n.unaryKernelFunc)({opSnippet:t});exports.atan=a;const o={kernelName:e.Atan,backendName:"webgl",kernelFunc:a};exports.atanConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"kDp7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Config=exports.atan2=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=n.CHECK_NAN_SNIPPET_BINARY+"\n  return atan(a, b);\n",r="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET_BINARY_PACKED+"\n  return result;\n",a=(0,n.binaryKernelFunc)({opSnippet:t,packedOpSnippet:r});exports.atan2=a;const s={kernelName:e.Atan2,backendName:"webgl",kernelFunc:a};exports.atan2Config=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"b0w5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const t=n.CHECK_NAN_SNIPPET+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",o=(0,r.unaryKernelFunc)({opSnippet:t});exports.atanh=o;const a={kernelName:e.Atanh,backendName:"webgl",kernelFunc:o};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"DAMt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pool3DProgram=exports.Pool2DProgram=void 0;class n{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideHeight,r=n.strideWidth,c=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,s=n.effectiveFilterWidth,C=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;const $="avg"===e,h=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`;let f="0.0";if($||(f="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${x}, ${r});\n        const ivec2 pads = ivec2(${C}, ${d});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${s};\n                wC += ${l}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${i?a?h:v:`wR * ${s} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let R=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(R="avgValue / count");const V=4*Math.floor(o/4),g=o%4,m=`\n      if (${$}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${x}, ${r});\n      const ivec2 pads = ivec2(${C}, ${d});\n      const float initializationValue = ${f};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${f});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${V}; wC += 4) {\n            int xC = xCCorner + wC * ${l};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              getValue(batch, xR, xC + 3 * ${l}, d)\n            );\n\n            ${m}\n          }\n\n          int xC = xCCorner + ${V};\n          if (${1===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${2===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${3===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              initializationValue\n            );\n\n            ${m}\n          }\n        }\n        setOutput(${R});\n      }\n    `}}exports.Pool2DProgram=n;class e{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideDepth,r=n.strideHeight,c=n.strideWidth,l=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,C=n.effectiveFilterDepth,d=n.effectiveFilterHeight,$=n.effectiveFilterWidth,h=n.padInfo.front,v=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;const R="avg"===e;let V="0.0";if(R||(V="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${x}, ${r}, ${c});\n        const ivec3 pads = ivec3(${h}, ${v}, ${f});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${C};\n              wD += ${l}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${d};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${$};\n                  wC += ${s}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${i?a?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${d} * ${$} +\n                      wR * ${$} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let g=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(g="avgValue / count");const m=4*Math.floor(o/4),w=o%4,p=`\n      if (${R}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${x}, ${r}, ${c});\n      const ivec3 pads = ivec3(${h}, ${v}, ${f});\n      const float initializationValue = ${V};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${V});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${C};\n            wD += ${l}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${m}; wC += 4) {\n              int xC = xCCorner + wC * ${s};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${s}, ch)\n              );\n\n              ${p}\n            }\n\n            int xC = xCCorner + ${m};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                initializationValue\n              );\n\n              ${p}\n            }\n          }\n          setOutput(${g});\n        }\n      }\n    `}}exports.Pool3DProgram=e;
},{}],"LyOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=i,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:g}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const p=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,g);if(1===p.filterWidth&&1===p.filterHeight&&e.util.arraysEqual(p.inShape,p.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const f=new t.Pool2DProgram(p,"avg",!1);return s.runWebGLProgram(f,[l],"float32")}const n={kernelName:e.AvgPool,backendName:"webgl",kernelFunc:i};exports.avgPoolConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt","../webgl_util":"p3g2","./Identity":"Gwwj"}],"ZH0i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3D=r,exports.avgPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:l}=t,{filterSize:s,strides:i,pad:u,dimRoundingMode:d,dataFormat:g}=a,c=e.backend_util.computePool3DInfo(l.shape,s,i,[1,1,1],u,d,g),p=new o.Pool3DProgram(c,"avg",!1);return n.runWebGLProgram(p,[l],"float32")}const t={kernelName:e.AvgPool3D,backendName:"webgl",kernelFunc:r};exports.avgPool3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt"}],"vgTo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvgPool3DBackpropProgram=exports.AvgPool2DBackpropProgram=void 0;class t{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,i=t.strideHeight,d=t.strideWidth,e=t.dilationHeight,r=t.dilationWidth,a=t.effectiveFilterHeight,y=t.effectiveFilterWidth,l=a-1-t.padInfo.top,s=y-1-t.padInfo.left,c=1/(n*o);this.userCode=`\n      const ivec2 pads = ivec2(${l}, ${s});\n      const float avgMultiplier = float(${c});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n            wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${i}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${y};\n            wC+= ${r}) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool2DBackpropProgram=t;class n{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,o=t.filterHeight,i=t.filterWidth,d=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,y=t.dilationHeight,l=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,C=s-1-t.padInfo.front,p=c-1-t.padInfo.top,h=f-1-t.padInfo.left,u=1/(n*o*i);this.userCode=`\n      const ivec3 pads = ivec3(${C}, ${p}, ${h});\n      const float avgMultiplier = float(${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n            wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${d}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${y}) {\n            float dyR = float(dyRCorner + wR) / ${e}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${f};\n                wC += ${l}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool3DBackpropProgram=n;
},{}],"XJOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGrad=r,exports.avgPoolGrad3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu");function r(r){const{inputs:t,backend:a,attrs:n}=r,{dy:d,input:p}=t,i=p,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=n,g=e.backend_util.computePool3DInfo(i.shape,s,l,[1,1,1],u,c),v=new o.AvgPool3DBackpropProgram(g);return a.runWebGLProgram(v,[d],i.dtype)}const t={kernelName:e.AvgPool3DGrad,backendName:"webgl",kernelFunc:r};exports.avgPoolGrad3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../avg_pool_backprop_gpu":"vgTo"}],"EkY0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=t,exports.avgPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu"),r=require("../webgl_util");function t(t){const{inputs:a,backend:n,attrs:l}=t,{dy:s,input:p}=a,i=p;(0,r.assertNotComplex)([s,p],"avgPoolGrad");const{filterSize:u,strides:d,pad:c}=l,g=e.backend_util.computePool2DInfo(i.shape,u,d,1,c),v=new o.AvgPool2DBackpropProgram(g);return n.runWebGLProgram(v,[s],i.dtype)}const a={kernelName:e.AvgPoolGrad,backendName:"webgl",kernelFunc:t};exports.avgPoolGradConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../avg_pool_backprop_gpu":"vgTo","../webgl_util":"p3g2"}],"trp3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=a,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:r,attrs:s}=e,{a:n,b:o}=a,{transposeA:c,transposeB:u}=s;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:c,transposeB:u,backend:r})}const r={kernelName:e.BatchMatMul,backendName:"webgl",kernelFunc:a};exports.batchMatMulConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./BatchMatMul_impl":"mEDx"}],"IgN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e,a,s,o,r,n){this.outputShape=[],this.variableNames=["x","mean","variance"],t.backend_util.assertAndGetBroadcastShape(e,a),t.backend_util.assertAndGetBroadcastShape(e,s);let l="0.0";null!=o&&(t.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let i="1.0";null!=r&&(t.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${l};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${n}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}exports.BatchNormProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"DUWz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormPackedProgram=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,a,s,r,n,c){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],e.backend_util.assertAndGetBroadcastShape(t,a),e.backend_util.assertAndGetBroadcastShape(t,s);let o="vec4(0.0)";null!=r&&(e.backend_util.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=n&&(e.backend_util.assertAndGetBroadcastShape(t,n),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${c}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}exports.BatchNormPackedProgram=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"f4ut":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormConfig=exports.batchNorm=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../batchnorm_gpu"),t=require("../batchnorm_packed_gpu");const r=({inputs:r,backend:n,attrs:s})=>{const{x:o,mean:l,variance:h,offset:u,scale:c}=r;e.util.assert(l.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==u||l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==c||l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:i}=s;null==i&&(i=.001);const p=[o,l,h];let m=null;null!=u&&(m=u.shape,p.push(u));let g=null;null!=c&&(g=c.shape,p.push(c));const d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new t.BatchNormPackedProgram(o.shape,l.shape,h.shape,m,g,i):new a.BatchNormProgram(o.shape,l.shape,h.shape,m,g,i);return n.runWebGLProgram(d,p,p[0].dtype)};exports.batchNorm=r;const n={kernelName:e.FusedBatchNorm,backendName:"webgl",kernelFunc:r};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../batchnorm_gpu":"IgN9","../batchnorm_packed_gpu":"DUWz"}],"SBwi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SliceProgram=void 0;var t=require("./shader_compiler");class r{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;const s=(0,t.getCoordsDataType)(this.rank),n=`uniform int start[${this.rank}];`,i=e(this.rank);let a;a=`\n        ${s} sourceLoc;\n        ${s} coords = getOutputCoords();\n        ${r.map((t,r)=>`sourceLoc.${o[r]} = start[${r}] + coords.${o[r]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${a}\n        setOutput(getSource(${i}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(r,o)=>{null==this.startLoc&&(this.startLoc=r.getUniformLocationNoThrow(o,"start"),null==this.startLoc)||r.gl.uniform1iv(this.startLoc,t)}}}exports.SliceProgram=r;const o=["x","y","z","w","u","v"];function e(t){if(1===t)return"sourceLoc";if(t<=6)return o.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}
},{"./shader_compiler":"DIKY"}],"BaFQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlicePackedProgram=void 0;var t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length;const s=(0,n.getCoordsDataType)(this.rank),e=(0,t.getChannels)("coords",this.rank),i=(0,t.getChannels)("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,h=`\n      result.x = ${o};\n      if (++${e[this.rank-1]} < ${r[this.rank-1]}) {\n        ++${i[this.rank-1]};\n        result.y = ${o};\n        --${i[this.rank-1]};\n      }\n    `,c=1===this.rank?"":`\n      --${e[this.rank-1]};\n      if (++${e[this.rank-2]} < ${r[this.rank-2]}) {\n        ++${i[this.rank-2]};\n        result.z = ${o};\n        if (++${e[this.rank-1]} < ${r[this.rank-1]}) {\n          ++${i[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${s}(${r.map((t,n)=>`start[${n}]`).join()});`:r.map((t,n)=>`${i[n]} = ${e[n]} + start[${n}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${s} coords = getOutputCoords();\n        ${s} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${h}\n        ${c}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(n,r)=>{null==this.startLoc&&(this.startLoc=n.getUniformLocationNoThrow(r,"start"),null==this.startLoc)||n.gl.uniform1iv(this.startLoc,t)}}}exports.SlicePackedProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"uanA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=r,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("../slice_gpu"),s=require("../slice_packed_gpu");function i(t,a,s,i){const r=i.texData.get(t.dataId),o=i.makeTensorInfo(s,t.dtype),n=i.texData.get(o.dataId);Object.assign(n,r),n.complexParentRefCount=0,n.refCount=1,n.shape=s,n.dtype=t.dtype;let l=e.slice_util.computeFlatOffset(a,e.util.computeStrides(t.shape));r.slice&&(l+=r.slice.flatOffset),n.slice={flatOffset:l,origDataId:r.slice&&r.slice.origDataId||t.dataId};const c=i.dataRefCount.get(n.slice.origDataId)||1;return i.dataRefCount.set(n.slice.origDataId,c+1),o}function r(r){const{inputs:o,backend:n,attrs:l}=r,{x:c}=o,{begin:u,size:d}=l,[p,f]=e.slice_util.parseSliceParams(c,u,d);if(e.slice_util.assertParamsValid(c,p,f),0===e.util.sizeFromShape(f))return n.makeTensorInfo(f,c.dtype,[]);if(n.shouldExecuteOnCPU([c])||"string"===c.dtype){const e=n.texData.get(c.dataId),a=(0,t.sliceImplCPU)(e.values,p,f,c.shape,c.dtype);return n.makeTensorInfo(f,c.dtype,a)}const{isPacked:g}=n.texData.get(c.dataId),m=e.slice_util.isSliceContinous(c.shape,p,f);if(g||!m){const t=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.SlicePackedProgram(f):new a.SliceProgram(f),i=t.getCustomSetupFunc(p);return n.runWebGLProgram(t,[c],c.dtype,i)}return n.uploadToGPU(c.dataId),i(c,p,f,n)}const o={kernelName:e.Slice,backendName:"webgl",kernelFunc:r};exports.sliceConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../slice_gpu":"SBwi","../slice_packed_gpu":"BaFQ"}],"CeXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDConfig=exports.batchToSpaceND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),a=require("./Slice"),s=require("./Transpose");const n=n=>{const{inputs:r,backend:c,attrs:p}=n,{x:o}=r,{blockShape:i,crops:h}=p;e.util.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=i.reduce((e,t)=>e*t),d=e.backend_util.getReshaped(o.shape,i,u),l=e.backend_util.getPermuted(d.length,i.length),b=e.backend_util.getReshapedPermuted(o.shape,i,u),k=e.backend_util.getSliceBeginCoords(h,i.length),g=e.backend_util.getSliceSize(b,h,i.length),S=[],x=(0,t.reshape)({inputs:{x:o},backend:c,attrs:{shape:d}}),f=(0,s.transpose)({inputs:{x:x},backend:c,attrs:{perm:l}}),m=(0,t.reshape)({inputs:{x:f},backend:c,attrs:{shape:b}}),N=(0,a.slice)({inputs:{x:m},backend:c,attrs:{begin:k,size:g}});return S.push(x),S.push(f),S.push(m),S.forEach(e=>c.disposeIntermediateTensorInfo(e)),N};exports.batchToSpaceND=n;const r={kernelName:e.BatchToSpaceND,backendName:"webgl",kernelFunc:n};exports.batchToSpaceNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP","./Slice":"uanA","./Transpose":"hS8R"}],"gQI3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=t,exports.bincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:o}=e,{x:s,weights:i}=t,{size:a}=o,c=r.readSync(s.dataId),u=r.readSync(i.dataId),d=(0,n.bincountImplCPU)(c,u,i.dtype,i.shape,a);return r.makeTensorInfo([a],i.dtype,d)}const r={kernelName:e.Bincount,backendName:"webgl",kernelFunc:t};exports.bincountConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"m7Px":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const t="return float(a != b);",r=(0,o.binaryKernelFunc)({opSnippet:t,dtype:"bool"});exports.notEqual=r;const n={kernelName:e.NotEqual,backendName:"webgl",kernelFunc:r};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"mH9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=r,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function r(e){const{inputs:r,backend:n}=e,{input:o}=r,a=n.texData.get(o.dataId);return(0,t.identity)({inputs:{x:a.complexTensorInfos.real},backend:n})}const n={kernelName:e.Real,backendName:"webgl",kernelFunc:r};exports.realConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"lwT4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.int=t;var e=require("../unaryop_gpu");const r="return float(int(x));";function t(t,a){const n=new e.UnaryOpProgram(t.shape,r),o=a.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}
},{"../unaryop_gpu":"uzBV"}],"JirG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=p,exports.castConfig=void 0;var e=s(require("@tensorflow/tfjs-core")),t=require("./Complex"),r=require("./Identity"),n=require("./NotEqual"),o=require("./Real"),i=require("../kernel_utils/int");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function p(a){const{inputs:s,backend:u,attrs:c}=a,{x:d}=s,{dtype:f}=c;if("complex64"===f){if("complex64"===d.dtype)return(0,r.identity)({inputs:{x:d},backend:u});const n=e.zeros(d.shape),o=p({inputs:{x:d},backend:u,attrs:{dtype:"float32"}}),i=(0,t.complex)({inputs:{real:o,imag:n},backend:u});return n.dispose(),u.disposeIntermediateTensorInfo(o),i}if("complex64"===d.dtype){const e=(0,o.real)({inputs:{input:d},backend:u}),t=p({inputs:{x:e},backend:u,attrs:{dtype:f}});return u.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(d.dtype,f)){const e=(0,r.identity)({inputs:{x:d},backend:u});return{dataId:e.dataId,shape:e.shape,dtype:f}}if("int32"===f)return(0,i.int)(d,u);if("bool"===f){const t=u.makeTensorInfo([],"bool",e.util.getTypedArrayFromDType("bool",1)),r={a:d,b:t},o=(0,n.notEqual)({inputs:r,backend:u});return u.disposeIntermediateTensorInfo(t),o}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${f}`)}const u={kernelName:e.Cast,backendName:"webgl",kernelFunc:p};exports.castConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Identity":"Gwwj","./NotEqual":"m7Px","./Real":"mH9E","../kernel_utils/int":"lwT4"}],"E0aZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=exports.ceil=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="return ceil(x);",i=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:l.ceilImplCPU});exports.ceil=i;const t={kernelName:e.Ceil,backendName:"webgl",kernelFunc:i};exports.ceilConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"rjZd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipProgram=void 0;class t{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,o){return(n,i)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(i,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(i,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,o)}}}exports.ClipProgram=t;
},{}],"QdXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipPackedProgram=void 0;class t{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,n){return(o,e)=>{null==this.minLoc&&(this.minLoc=o.getUniformLocationNoThrow(e,"minVal"),this.maxLoc=o.getUniformLocationNoThrow(e,"maxVal")),o.gl.uniform1f(this.minLoc,t),o.gl.uniform1f(this.maxLoc,n)}}}exports.ClipPackedProgram=t;
},{}],"IbyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=t,exports.clipByValueConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../clip_gpu"),l=require("../clip_packed_gpu");function t(t){const{inputs:p,backend:n,attrs:o}=t,{x:u}=p,{clipValueMin:a,clipValueMax:i}=o;let c;const s=(c=(0,e.env)().getBool("WEBGL_PACK_CLIP")?new l.ClipPackedProgram(u.shape):new r.ClipProgram(u.shape)).getCustomSetupFunc(a,i);return n.runWebGLProgram(c,[u],u.dtype,s)}const p={kernelName:e.ClipByValue,backendName:"webgl",kernelFunc:t};exports.clipByValueConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../clip_gpu":"rjZd","../clip_packed_gpu":"QdXF"}],"w3Ul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComplexAbsProgram=void 0;class e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}exports.ComplexAbsProgram=e;
},{}],"Kuhq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbs=t,exports.complexAbsConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../complex_abs_gpu");function r(e,o){return{dataId:o.dataId,dtype:o.dtype,shape:e.shape}}function t(e){const{inputs:t,backend:s}=e,{x:n}=t,a=s.texData.get(n.dataId),p=new o.ComplexAbsProgram(n.shape),c=[r(n,a.complexTensorInfos.real),r(n,a.complexTensorInfos.imag)];return s.runWebGLProgram(p,c,c[0].dtype)}const s={kernelName:e.ComplexAbs,backendName:"webgl",kernelFunc:t};exports.complexAbsConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../complex_abs_gpu":"w3Ul"}],"loEe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e){this.outputShape=[],this.outputShape=t.backend_util.computeOutShape(e,1),this.variableNames=e.map((t,e)=>`T${e}`);const o=new Array(e.length-1);o[0]=e[0][1];for(let t=1;t<o.length;t++)o[t]=o[t-1]+e[t][1];const s=[`if (yC < ${o[0]}) setOutput(getT0(yR, yC));`];for(let t=1;t<o.length;t++){const e=o[t-1];s.push(`else if (yC < ${o[t]}) `+`setOutput(getT${t}(yR, yC-${e}));`)}const n=o.length,r=o[o.length-1];s.push(`else setOutput(getT${n}(yR, yC-${r}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${s.join("\n        ")}\n      }\n    `}}exports.ConcatProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"nB6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=e.backend_util.computeOutShape(r,s);const u=this.outputShape,a=u.length,$=(0,n.getCoordsDataType)(a),l=(0,t.getChannels)("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=r.map((e,t)=>`T${t}`);const c=new Array(r.length-1);c[0]=r[0][s];for(let e=1;e<c.length;e++)c[e]=c[e-1]+r[e][s];const g=i[s],p=i.slice(-2),h=i.join();let d=`if (${g} < ${c[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${p.join()}));\n        }`;for(let e=1;e<c.length;e++){const t=c[e-1];d+=`\n        if (${g} < ${c[e]}  && ${g} >= ${c[e-1]}) {\n          return getChannel(\n            getT${e}(${o(i,g,t)}),\n            vec2(${o(p,g,t)}));\n        }`}const f=c.length,v=c[c.length-1];d+=`\n        return getChannel(\n          getT${f}(${o(i,g,v)}),\n          vec2(${o(p,g,v)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${d}\n      }\n\n      void main() {\n        ${$} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${l}), 0., 0., 0.);\n\n        ${l[a-1]} = ${l[a-1]} + 1;\n        if (${l[a-1]} < ${u[a-1]}) {\n          result.g = getValue(${l});\n        }\n\n        ${l[a-2]} = ${l[a-2]} + 1;\n        if (${l[a-2]} < ${u[a-2]}) {\n          result.a = getValue(${l});\n        }\n\n        ${l[a-1]} = ${l[a-1]} - 1;\n        if (${l[a-2]} < ${u[a-2]} &&\n            ${l[a-1]} < ${u[a-1]}) {\n          result.b = getValue(${l});\n        }\n        setOutput(result);\n      }\n    `}}function o(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}exports.ConcatPackedProgram=r;
},{"@tensorflow/tfjs-core":"tc6m","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"U9t0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=n,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:r}=e,{input:i}=n,o=r.texData.get(i.dataId);return(0,t.identity)({inputs:{x:o.complexTensorInfos.imag},backend:r})}const r={kernelName:e.Imag,backendName:"webgl",kernelFunc:n};exports.imagConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"ec9V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=i;var e=require("@tensorflow/tfjs-core"),r=require("../concat_gpu"),n=require("../concat_packed_gpu"),t=require("../kernel_utils/shared"),s=require("./Complex"),a=require("./Imag"),o=require("./Real"),p=require("./Reshape");function i(u,d,m){const h=u[0].dtype;if("complex64"===h){const e=u.map(e=>(0,o.real)({inputs:{input:e},backend:m})),r=u.map(e=>(0,a.imag)({inputs:{input:e},backend:m})),n=i(e,d,m),t=i(r,d,m),p=(0,s.complex)({inputs:{real:n,imag:t},backend:m});return e.forEach(e=>m.disposeIntermediateTensorInfo(e)),r.forEach(e=>m.disposeIntermediateTensorInfo(e)),m.disposeIntermediateTensorInfo(n),m.disposeIntermediateTensorInfo(t),p}if("string"===h){const{tensors2D:r,outShape:n}=c(u,d,m),s=r.map(e=>({vals:m.readSync(e.dataId),shape:e.shape})),a=1===r[0].shape[0],o=(0,t.concatImplCPU)(s,n,h,a),p=e.backend_util.computeOutShape(u.map(e=>e.shape),d),i=m.makeTensorInfo(p,h,o);return r.forEach(e=>m.disposeIntermediateTensorInfo(e)),i}if(u.length>(0,e.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(u.length/2),r=i(u.slice(0,e),d,m),n=i(u.slice(e),d,m),t=i([r,n],d,m);return m.disposeIntermediateTensorInfo(r),m.disposeIntermediateTensorInfo(n),t}if((0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&u[0].shape.length>1){const e=new n.ConcatPackedProgram(u.map(e=>e.shape),d);return m.runWebGLProgram(e,u,h)}const{tensors2D:l,outShape:I}=c(u,d,m),f=new r.ConcatProgram(l.map(e=>e.shape)),g=m.runWebGLProgram(f,l,h);l.forEach(e=>m.disposeIntermediateTensorInfo(e));const _=(0,p.reshape)({inputs:{x:g},attrs:{shape:I},backend:m});return m.disposeIntermediateTensorInfo(g),_}function c(r,n,t){const s=e.backend_util.computeOutShape(r.map(e=>e.shape),n);return{tensors2D:r.map(r=>(0,p.reshape)({inputs:{x:r},attrs:{shape:[-1,e.util.sizeFromShape(r.shape.slice(n))]},backend:t})),outShape:s}}
},{"@tensorflow/tfjs-core":"tc6m","../concat_gpu":"loEe","../concat_packed_gpu":"nB6G","../kernel_utils/shared":"tfp0","./Complex":"vWXR","./Imag":"U9t0","./Real":"mH9E","./Reshape":"k4TP"}],"SH0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=a,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat_impl"),n=require("./Identity");function a(a){const{inputs:r,backend:s,attrs:o}=a,{axis:i}=o,c=e.util.parseAxisParam(i,r[0].shape)[0],p=e.backend_util.computeOutShape(r.map(e=>e.shape),c);if(0===e.util.sizeFromShape(p))return s.makeTensorInfo(p,r[0].dtype,[]);const u=r.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===u.length)return(0,n.identity)({inputs:{x:u[0]},backend:s});const l=u.map(e=>e.shape);return e.backend_util.assertParamsConsistent(l,c),(0,t.concatImpl)(u,c,s)}const r={kernelName:e.Concat,backendName:"webgl",kernelFunc:a};exports.concatConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Concat_impl":"ec9V","./Identity":"Gwwj"}],"LHRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DProgram=exports.Conv2DProgram=void 0;class n{constructor(n,t=!1,e=null,o=!1,a=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const d=n.padInfo.top,i=n.padInfo.left,s=n.strideHeight,x=n.strideWidth,r=n.dilationHeight,c=n.dilationWidth,C=n.filterHeight,l=n.filterWidth,w=4*Math.floor(n.inChannels/4),h=n.inChannels%4,u="channelsLast"===n.dataFormat,R=u?1:2,$=u?2:3,g=u?3:1;let v="",f="";e&&(v=o?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${e}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${e}\n        }`:`\n          float activation(float x) {\n            ${e}\n          }\n        `,f="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${s}, ${x});\n      const ivec2 pads = ivec2(${d}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${g}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${R}], coords[${$}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${C}; wR++) {\n          int xR = xRCorner + wR * ${r};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${l}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${w}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${u}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===h}) {\n\n              if (${u}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${w}) *\n                    getW(wR, wC, ${w}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${w}, xR, xC) *\n                    getW(wR, wC, ${w}, d2);\n              }\n\n            } else if (${2===h}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${w}, d2),\n                getW(wR, wC, ${w} + 1, d2)\n              );\n\n              if (${u}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${w}),\n                  getX(batch, xR, xC, ${w} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${w}, xR, xC),\n                  getX(batch, ${w} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===h}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${w}, d2),\n                getW(wR, wC, ${w} + 1, d2),\n                getW(wR, wC, ${w} + 2, d2)\n              );\n\n              if (${u}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${w}),\n                  getX(batch, xR, xC, ${w} + 1),\n                  getX(batch, xR, xC, ${w} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${w}, xR, xC),\n                  getX(batch, ${w} + 1, xR, xC),\n                  getX(batch, ${w} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${f}\n        setOutput(result);\n      }\n    `}}exports.Conv2DProgram=n;class t{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const t=n.padInfo.front,e=n.padInfo.top,o=n.padInfo.left,a=n.strideDepth,d=n.strideHeight,i=n.strideWidth,s=n.dilationDepth,x=n.dilationHeight,r=n.dilationWidth,c=n.filterDepth,C=n.filterHeight,l=n.filterWidth,w=4*Math.floor(n.inChannels/4),h=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${d}, ${i});\n      const ivec3 pads = ivec3(${t}, ${e}, ${o});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${C}; wR++) {\n            int xR = xRCorner + wR * ${x};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${l}; wC++) {\n              int xC = xCCorner + wC * ${r};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${w}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===h}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${w}) *\n                  getW(wF, wR, wC, ${w}, d2);\n              } else if (${2===h}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===h}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1),\n                  getX(batch, xF, xR, xC, ${w} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2),\n                  getW(wF, wR, wC, ${w} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DProgram=t;
},{}],"j6dQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Im2ColPackedProgram=void 0;var n=require("./glsl_version");class e{constructor(e,t,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:s,inChannels:o,strideWidth:r,strideHeight:d,padInfo:l,outWidth:c,dilationWidth:a,dilationHeight:f,dataFormat:$}=i,{left:h,top:p}=l,u=o*s,m=(0,n.getGlslDifferences)(),v="channelsLast"===$,g=v?0:1,x=v?1:2;let D="";for(let n=0;n<=1;n++)for(let i=0;i<=1;i++)D+=`\n          blockIndex = rc.y + ${i};\n          pos = rc.x + ${n};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${c})) * ${d} - ${p};\n            d0 = offsetY + ${f} * (pos / ${u});\n\n            if(d0 < ${t[g]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${c}.) * ${r}. - ${h}.);\n              d1 = offsetX + ${a} * (int(mod(float(pos), ${u}.) / ${o}.));\n\n              if(d1 < ${t[x]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${o}.));\n\n                if (${v}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*n+i}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*n+i}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${D}\n\n        ${m.output} = result;\n      }\n    `}}exports.Im2ColPackedProgram=e;
},{"./glsl_version":"QbWp"}],"Ld10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dByMatMul=i,exports.conv2dWithIm2Row=h;var e=require("@tensorflow/tfjs-core"),t=require("../im2col_packed_gpu"),a=require("../kernel_utils/kernel_funcs_utils"),n=require("../mulmat_packed_gpu"),s=l(require("../webgl_util")),r=require("./BatchMatMul_impl"),p=require("./Identity"),o=require("./Reshape");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var p=s?Object.getOwnPropertyDescriptor(e,r):null;p&&(p.get||p.set)?Object.defineProperty(n,r,p):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function i({x:t,filter:a,convInfo:n,backend:u,bias:l=null,preluActivationWeights:i=null,leakyreluAlpha:h=0,activation:c=null}){const d=t.shape,f=u.texData.get(t.dataId),b=n.inChannels,k=d[0]*d[1]*d[2],g=n.outChannels,v="channelsLast"===n.dataFormat;let _;const m=[],y=(1===k||1===g)&&b>r.MATMUL_SHARED_DIM_THRESHOLD,I=d[2]%2!=0&&!!f.isPacked;if(!y&&(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")&&(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&I){const b=v?d[0]*d[1]*(d[2]+1):d[0]*d[2]*(d[3]+1),k={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},g=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,e.util.assert(s.isReshapeFree(f.shape,k.shape),()=>`packed reshape ${f.shape} to ${k.shape} isn't free`);const y=(0,o.reshape)({inputs:{x:a},backend:u,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(y);const I=(0,r.batchMatMulImpl)({a:k,b:y,backend:u,transposeA:!1,transposeB:!1,bias:l,activation:c,preluActivationWeights:i,leakyreluAlpha:h}),M=u.texData.get(I.dataId);e.util.assert(M.isPacked,()=>"batchMatMul result is expected to be packed"),f.shape=g,M.shape=n.outShape,(_=(0,p.identity)({inputs:{x:I},backend:u})).shape=n.outShape,m.push(I)}else{const e=v?d[0]*d[1]*d[2]:d[0]*d[2]*d[3],s=(0,o.reshape)({inputs:{x:t},backend:u,attrs:{shape:[1,e,n.inChannels]}}),p=(0,o.reshape)({inputs:{x:a},backend:u,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=(0,r.batchMatMulImpl)({a:s,b:p,transposeA:!1,transposeB:!1,backend:u,bias:l,activation:c,preluActivationWeights:i,leakyreluAlpha:h});_=(0,o.reshape)({inputs:{x:f},backend:u,attrs:{shape:n.outShape}}),m.push(s),m.push(p),m.push(f)}for(const e of m)u.disposeIntermediateTensorInfo(e);return _}function h({x:s,filter:r,convInfo:p,backend:u,bias:l=null,preluActivationWeights:i=null,leakyreluAlpha:h=0,activation:c=null}){const{filterWidth:d,filterHeight:f,inChannels:b,outWidth:k,outHeight:g,dataFormat:v}=p,_="channelsLast"===v,m=d*f*b,y=g*k,I=[m,y],M=[],A=(0,o.reshape)({inputs:{x:s},backend:u,attrs:{shape:s.shape.slice(1)}}),P=(0,o.reshape)({inputs:{x:r},backend:u,attrs:{shape:[1,m,e.util.sizeFromShape(r.shape)/m]}});M.push(A),M.push(P);const x=new t.Im2ColPackedProgram(I,A.shape,p),C=u.runWebGLProgram(x,[A],"float32"),W=(0,o.reshape)({inputs:{x:C},backend:u,attrs:{shape:[1,I[0],I[1]]}});M.push(C),M.push(W);const O=null!=l,w=null!=i,L="leakyrelu"===c,B=c?(0,a.mapActivationToShaderProgram)(c,!0):null,S=new n.MatMulPackedProgram(W.shape,P.shape,[1,y,p.outChannels],!0,!1,O,B,w,L),j=[W,P];if(l&&j.push(l),w&&j.push(i),L){const t=u.makeTensorInfo([],"float32",e.util.createScalarValue(h,"float32"));j.push(t),M.push(t)}const q=u.runWebGLProgram(S,j,"float32"),D=_?[1,g,k,p.outChannels]:[1,p.outChannels,g,k],R=(0,o.reshape)({inputs:{x:q},backend:u,attrs:{shape:D}});M.push(q);for(const e of M)u.disposeIntermediateTensorInfo(e);return R}
},{"@tensorflow/tfjs-core":"tc6m","../im2col_packed_gpu":"j6dQ","../kernel_utils/kernel_funcs_utils":"uLeB","../mulmat_packed_gpu":"UauI","../webgl_util":"p3g2","./BatchMatMul_impl":"mEDx","./Identity":"Gwwj","./Reshape":"k4TP"}],"lE4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=r,exports.conv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),o=require("./Conv2D_impl"),n=require("./Reshape");function r(r){const{inputs:i,backend:a,attrs:s}=r,{x:d,filter:c}=i,{strides:l,pad:p,dataFormat:f,dilations:u,dimRoundingMode:v}=s,h=e.backend_util.convertConv2DDataFormat(f),g=e.backend_util.computeConv2DInfo(d.shape,c.shape,l,u,p,v,!1,h);let m;if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===d.shape[0])m=(0,o.conv2dWithIm2Row)({x:d,filter:c,convInfo:g,backend:a});else{const e=new t.Conv2DProgram(g);m=a.runWebGLProgram(e,[d,c],"float32")}else m=(0,o.conv2dByMatMul)({x:d,filter:c,convInfo:g,backend:a});const b=(0,n.reshape)({inputs:{x:m},backend:a,attrs:{shape:g.outShape}});return a.disposeIntermediateTensorInfo(m),b}const i={kernelName:e.Conv2D,backendName:"webgl",kernelFunc:r};exports.conv2DConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ","./Conv2D_impl":"Ld10","./Reshape":"k4TP"}],"y8Ea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DDerInputProgram=exports.Conv3DDerFilterProgram=exports.Conv2DDerInputProgram=exports.Conv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i="channelsLast"===n.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              if (${i}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i="channelsLast"===n.dataFormat,r=t-1-n.padInfo.top,a=o-1-n.padInfo.left,s=i?1:2,y=i?2:3,C=i?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${C}];\n\n        ivec2 dyCorner = ivec2(coords[${s}], coords[${y}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${i}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerInputProgram=t;class o{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,d=n.padInfo.front,i=n.padInfo.top,r=n.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${d};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${o} - ${i};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${e} - ${r};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerFilterProgram=o;class e{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterDepth,o=n.filterHeight,e=n.filterWidth,d=n.strideDepth,i=n.strideHeight,r=n.strideWidth,a=t-1-n.padInfo.front,s=o-1-n.padInfo.top,y=e-1-n.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${a}, ${s}, ${y});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${d}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${o}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${i}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${o} - 1 - wR;\n\n            for (int wC = 0; wC < ${e}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${e} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerInputProgram=e;
},{}],"r9Be":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:a}=o,{x:c,dy:p}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:d}=a,v=e.backend_util.convertConv2DDataFormat(l),k=e.backend_util.computeConv2DInfo(c.shape,d,i,1,s,u,!1,v),f=new r.Conv2DDerFilterProgram(k);return n.runWebGLProgram(f,[c,p],"float32")}const t={kernelName:e.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:o};exports.conv2DBackpropFilterConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"cVvr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=n,exports.conv2DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_backprop_gpu");function n(n){const{inputs:r,backend:t,attrs:p}=n,{dy:a,filter:c}=r,{inputShape:u,strides:i,pad:s,dataFormat:d,dimRoundingMode:v}=p,k=e.backend_util.convertConv2DDataFormat(d),l=e.backend_util.computeConv2DInfo(u,c.shape,i,1,s,v,!1,k),f=new o.Conv2DDerInputProgram(l);return t.runWebGLProgram(f,[a,c],"float32")}const r={kernelName:e.Conv2DBackpropInput,backendName:"webgl",kernelFunc:n};exports.conv2DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"AezV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=n,exports.conv3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_gpu");function n(n){const{inputs:r,backend:t,attrs:s}=n,{x:a,filter:c}=r,{strides:i,pad:u,dilations:p}=s,l=e.backend_util.computeConv3DInfo(a.shape,c.shape,i,p,u),v=new o.Conv3DProgram(l);return t.runWebGLProgram(v,[a,c],"float32")}const r={kernelName:e.Conv3D,backendName:"webgl",kernelFunc:n};exports.conv3DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ"}],"lhL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:p}=o,{x:c,dy:a}=t,{strides:i,pad:s,filterShape:l}=p,u=e.backend_util.computeConv3DInfo(c.shape,l,i,1,s),k=new r.Conv3DDerFilterProgram(u);return n.runWebGLProgram(k,[c,a],"float32")}const t={kernelName:e.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropFilterV2Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"BTZj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=o,exports.conv3DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../conv_backprop_gpu");function o(o){const{inputs:r,backend:t,attrs:p}=o,{dy:c,filter:a}=r,{pad:u,strides:s,inputShape:i}=p,k=e.backend_util.computeConv3DInfo(i,a.shape,s,1,u),v=new n.Conv3DDerInputProgram(k);return t.runWebGLProgram(v,[c,a],"float32")}const r={kernelName:e.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"nlDp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o=r.CHECK_NAN_SNIPPET_UNARY+"\n  return cos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.cos=s;const n={kernelName:e.Cos,backendName:"webgl",kernelFunc:s};exports.cosConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"Bb26":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.cosh=n;const s={kernelName:e.Cosh,backendName:"webgl",kernelFunc:n};exports.coshConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"nc6W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CropAndResizeProgram=void 0;class e{constructor(e,t,o,n,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,c]=e,[l]=t,[u,f]=o;this.outputShape=[l,u,f,c];const d="bilinear"===n?1:0,[x,C]=[`${i-1}.0`,`${s-1}.0`],[g,R,b]=u>1?[`${(i-1)/(u-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[h,p,m]=f>1?[`${(s-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${C} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${C}`];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${h});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${R};\n        float width_scale = ${p};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${x} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${m};\n        if( in_x < 0.0 || in_x > ${C} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}exports.CropAndResizeProgram=e;
},{}],"ECMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResizeConfig=exports.cropAndResize=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../crop_and_resize_gpu");const o=e=>{const{inputs:o,backend:n,attrs:s}=e,{image:t,boxes:p,boxInd:i}=o,{cropSize:a,method:c,extrapolationValue:d}=s,u=new r.CropAndResizeProgram(t.shape,p.shape,a,c,d);return n.runWebGLProgram(u,[t,p,i],"float32")};exports.cropAndResize=o;const n={kernelName:e.CropAndResize,backendName:"webgl",kernelFunc:o};exports.cropAndResizeConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../crop_and_resize_gpu":"nc6W"}],"h31s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CumSumProgram=void 0;var t=require("./shader_compiler");class e{constructor(e,o,i){this.variableNames=["x"],this.outputShape=e;const u=e.length,s=o?"0.0":`getX(${n(u,"coords")})`,d=e[e.length-1];let $="",a="";o?($=i?`end != ${d-1}`:"end != 0",a=i?"end + 1":"end - 1"):($=i?`end + pow2 < ${d}`:"end >= pow2",a=i?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${(0,t.getCoordsDataType)(u)} coords = getOutputCoords();\n        int end = ${r(u,"coords")};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${$}) {\n          int idx = ${a};\n          ${r(u,"coords")} = idx;\n          val += getX(${n(u,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function n(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function r(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}exports.CumSumProgram=e;
},{"./shader_compiler":"DIKY"}],"elV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=r,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cumsum_gpu"),n=require("./Identity"),s=require("./Transpose");function r(r){const{inputs:o,backend:u,attrs:a}=r,{x:i}=o,{axis:m,exclusive:c,reverse:p}=a,d=i.shape.length,l=e.backend_util.getAxesPermutation([m],d);let g=i;null!=l&&(g=(0,s.transpose)({inputs:{x:i},backend:u,attrs:{perm:l}}));const x=e.backend_util.getInnerMostAxes(1,d)[0];if(x!==d-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${i.shape.length-1} `+`but got axis=${m}`);const b=g.shape[x];let f=(0,n.identity)({inputs:{x:g},backend:u});for(let e=0;e<=Math.ceil(Math.log2(b))-1;e++){const n=new t.CumSumProgram(g.shape,!1,p),s=n.getCustomSetupFunc(e),r=f;f=u.runWebGLProgram(n,[f],f.dtype,s),u.disposeIntermediateTensorInfo(r)}if(c){const e=new t.CumSumProgram(g.shape,c,p),n=f;f=u.runWebGLProgram(e,[f],f.dtype),u.disposeIntermediateTensorInfo(n)}if(null!=l){const t=e.backend_util.getUndoAxesPermutation(l),n=(0,s.transpose)({inputs:{x:f},backend:u,attrs:{perm:t}});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(g),n}return f}const o={kernelName:e.Cumsum,backendName:"webgl",kernelFunc:r};exports.cumsumConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cumsum_gpu":"h31s","./Identity":"Gwwj","./Transpose":"hS8R"}],"MOld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=t,exports.denseBincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,weights:u}=t,{size:a,binaryOutput:i}=s;if(1===o.shape.length){const e=r.readSync(o.dataId),t=r.readSync(u.dataId),s=(0,n.bincountImplCPU)(e,t,u.dtype,u.shape,a);return r.makeTensorInfo([a],u.dtype,s)}if(2===o.shape.length){const e=r.bufferSync(o),t=r.bufferSync(u),s=(0,n.bincountReduceImplCPU)(e,t,a,i);return r.makeTensorInfo(s.shape,u.dtype,s.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${o.shape.length}.`)}const r={kernelName:e.DenseBincount,backendName:"webgl",kernelFunc:t};exports.denseBincountConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"KXiR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthToSpaceProgram=void 0;class t{constructor(t,o,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=o,this.dataFormat=i,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${o};\n      int offset_h = imod(h, ${o});\n      int in_w = w / ${o};\n      int offset_w = imod(w, ${o});\n      int offset_d = (offset_h * ${o} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}exports.DepthToSpaceProgram=t;
},{}],"WKMn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=o,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../depth_to_space_gpu");function o(o){const{inputs:p,backend:a,attrs:r}=o,{x:s}=p,{blockSize:c,dataFormat:n}=r;e.util.assert(c>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${c}`);const h=s.shape[0],u="NHWC"===n?s.shape[1]:s.shape[2],d="NHWC"===n?s.shape[2]:s.shape[3],i="NHWC"===n?s.shape[3]:s.shape[1],l=u*c,b=d*c,S=i/(c*c),f="NHWC"===n?[h,l,b,S]:[h,S,l,b],g=new t.DepthToSpaceProgram(f,c,n);return a.runWebGLProgram(g,[s],s.dtype)}const p={kernelName:e.DepthToSpace,backendName:"webgl",kernelFunc:o};exports.depthToSpaceConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../depth_to_space_gpu":"KXiR"}],"tZKH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DProgram=void 0;class t{constructor(t,n=!1,o=null,e=!1,i=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const a=t.inHeight,s=t.inWidth,r=t.padInfo.top,l=t.padInfo.left,d=t.strideHeight,h=t.strideWidth,u=t.dilationHeight,C=t.dilationWidth,c=t.filterHeight,v=t.filterWidth,x=t.outChannels/t.inChannels;let p="",f="";o&&(p=e?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`\n          float activation(float x) {\n            ${o}\n          }\n        `,f="result = activation(result);");const w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      const ivec2 strides = ivec2(${d}, ${h});\n      const ivec2 pads = ivec2(${r}, ${l});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${x};\n        int q = d2 - d1 * ${x};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${a}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${v}; wC++) {\n            int xC = xCCorner + wC * ${C};\n\n            if (xC < 0 || xC >= ${s}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${f}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConv2DProgram=t;
},{}],"najp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConvPacked2DProgram=void 0;var e=require("@tensorflow/tfjs-core");class n{constructor(n,x=!1,t=null,$=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;const s=n.inHeight,f=n.inWidth,i=n.padInfo.top,l=n.padInfo.left,c=n.strideHeight,r=n.strideWidth,R=n.dilationHeight,o=n.dilationWidth,a=n.filterHeight,v=n.filterWidth,d=v;let u="int xR; int xC; int xCOffset;";for(let e=0;e<a;e++)for(let n=0;n<v;n++)u+=`\n          vec4 xTexelR${e}C${2*n} = vec4(0.);\n          vec4 wR${e}C${n} = vec4(0.);\n          vec4 xR${e}C${n} = vec4(0.);`;for(let p=0;p<a;p++)for(let n=0;n<d;n++){const x=2*n;if(u+=`\n          xR = xRCorner + ${p*R};\n          xC = xCCorner + ${x*o};\n        `,1===r){if(x<v&&(u+=l%2==1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${f}) {\n                  xTexelR${p}C${x} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${f}) {\n                    xTexelR${p}C${x}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${p}C${x} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${f}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${f}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${p}C${x} = vec4(previous.zw, xTexelR${p}C${x}.xy);\n                } else {\n                  xR${p}C${x} = vec4(0, 0, xTexelR${p}C${x}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${s} && xC >= 0 && xC < ${f}) {\n                  xTexelR${p}C${x} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${p}C${x} = vec4(0.);\n                }\n\n                xR${p}C${x} = xTexelR${p}C${x};\n              `,x+1<v)){const n=l%2==0?e.util.nearestLargerEven(o):o;o%2==0&&l%2==1||o%2!=0&&l%2!=1?(u+=`\n                  xCOffset = xC + ${l%2} + ${n};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${f}) {\n                    xTexelR${p}C${x+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,o>1&&(u+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${s} &&\n                      xCOffset >= 0 && xCOffset < ${f}) {\n                      xTexelR${p}C${x} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${p}C${x} = vec4(0.);\n                    }\n                  `),u+=`\n                  xR${p}C${x+1} = vec4(\n                    xTexelR${p}C${x}.zw, xTexelR${p}C${x+2}.xy);\n                `):u+=`\n                  xCOffset = xC + ${n};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${f}) {\n                    xTexelR${p}C${x+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${p}C${x+1} = xTexelR${p}C${x+2};\n                `}}else x<v&&(u+=`\n              if(xR >= 0 && xR < ${s}) {\n            `,l%2==1?(u+=`\n                xCOffset = xC + 1 - ${r};\n                if(xCOffset >= 0 && xCOffset < ${f}) {\n                  xTexelR${p}C${x} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${p}C${x} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${f}) {\n                  xTexelR${p}C${x+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${p}C${x+2} = vec4(0.);\n                }\n\n                xR${p}C${x} = vec4(\n                  xTexelR${p}C${x}.zw, xTexelR${p}C${x+2}.zw);\n              `,x+1<v&&(u+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${r};\n                  if(xCOffset >= 0 && xCOffset < ${f}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${p}C${x+1} = vec4(xTexelR${p}C${x+2}.xy, final.xy);\n                `)):(u+=`\n                if(xC >= 0 && xC < ${f}) {\n                  xTexelR${p}C${x} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${p}C${x} = vec4(0.);\n                }\n\n                xCOffset = xC + ${r};\n                if(xCOffset >= 0 && xCOffset < ${f}) {\n                  xTexelR${p}C${x+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${p}C${x+2} = vec4(0.);\n                }\n\n                xR${p}C${x} = vec4(\n                  xTexelR${p}C${x}.xy, xTexelR${p}C${x+2}.xy);\n              `,x+1<v&&(u+=`\n                  xR${p}C${x+1} = vec4(\n                    xTexelR${p}C${x}.zw, xTexelR${p}C${x+2}.zw);\n                `)),u+="}");x<v&&(u+=`\n            vec4 wTexelR${p}C${x} = getW(${p}, ${x}, d1, q);\n            wR${p}C${x} = vec4(wTexelR${p}C${x}.xz, wTexelR${p}C${x}.xz);\n          `,x+1<v&&(u+=`\n              vec4 wTexelR${p}C${x+1} = getW(${p}, ${x+1}, d1, q);\n              wR${p}C${x+1} =\n                vec4(wTexelR${p}C${x+1}.xz, wTexelR${p}C${x+1}.xz);`))}for(let e=0;e<a;e++)for(let n=0;n<v;n++)u+=`dotProd += xR${e}C${n} * wR${e}C${n};`;let O="",h="";t&&(O=$?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${t}\n        }`:C?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${t}\n        }`:`vec4 activation(vec4 x) {\n          ${t}\n        }`,h="result = activation(result);");const T=x?"result += getBiasAtOutCoords();":"";x&&this.variableNames.push("bias"),$&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${O}\n\n      const ivec2 strides = ivec2(${c}, ${r});\n      const ivec2 pads = ivec2(${i}, ${l});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${u}\n\n        vec4 result = dotProd;\n        ${T}\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConvPacked2DProgram=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"UmRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=i,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),n=require("../conv_packed_gpu_depthwise");function i(i){const{inputs:o,backend:r,attrs:s}=i,{x:d,filter:a}=o,{strides:l,pad:p,dilations:u,dimRoundingMode:v}=s;let c=u;null==c&&(c=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(l,c),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${l} and dilations '${c}'`);const h=e.backend_util.computeConv2DInfo(d.shape,a.shape,l,c,p,v,!0);let C;return C=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels==1?new n.DepthwiseConvPacked2DProgram(h):new t.DepthwiseConv2DProgram(h),r.runWebGLProgram(C,[d,a],"float32")}const o={kernelName:e.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:i};exports.depthwiseConv2dNativeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu_depthwise":"tZKH","../conv_packed_gpu_depthwise":"najp"}],"QU4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DDerInputProgram=exports.DepthwiseConv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${i} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i=t-1-n.padInfo.top,r=o-1-n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${r});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerInputProgram=t;
},{}],"pKxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=r,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function r(r){const{inputs:o,backend:i,attrs:n}=r,{x:p,dy:a}=o,{strides:s,dilations:d,pad:c,dimRoundingMode:l,filterShape:u}=n,v=e.backend_util.computeConv2DInfo(p.shape,u,s,d,c,l,!0),k=new t.DepthwiseConv2DDerFilterProgram(v);return i.runWebGLProgram(k,[p,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:r};exports.depthwiseConv2dNativeBackpropFilterConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu_depthwise":"QU4a"}],"RVP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=n,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function n(n){const{inputs:o,backend:p,attrs:r}=n,{dy:i,filter:a}=o,{strides:s,dilations:d,pad:u,dimRoundingMode:c,inputShape:v}=r,k=e.backend_util.computeConv2DInfo(v,a.shape,s,d,u,c,!0),l=new t.DepthwiseConv2DDerInputProgram(k);return p.runWebGLProgram(l,[i,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:n};exports.depthwiseConv2dNativeBackpropInputConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu_depthwise":"QU4a"}],"V8Cn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiagProgram=void 0;class o{constructor(o){this.variableNames=["X"],this.outputShape=[o,o],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}exports.DiagProgram=o;
},{}],"nCDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=a,exports.diagConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../diag_gpu"),s=require("./Reshape");function a(a){const{inputs:n,backend:t}=a,{x:i}=n,o=[...i.shape,...i.shape],p=e.util.sizeFromShape(i.shape),d=(0,s.reshape)({inputs:{x:i},backend:t,attrs:{shape:[p]}}),u=new r.DiagProgram(p),g=t.runWebGLProgram(u,[d],d.dtype),c=(0,s.reshape)({inputs:{x:g},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(g),c}const n={kernelName:e.Diag,backendName:"webgl",kernelFunc:a};exports.diagConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../diag_gpu":"V8Cn","./Reshape":"k4TP"}],"zpON":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dilation2DProgram=void 0;class n{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const{inHeight:t,inWidth:i,padInfo:e,strideHeight:o,strideWidth:r,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:d}=n,{top:h,left:c}=e;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${r});\n      const ivec2 pads = ivec2(${h}, ${c});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${d};\n\n              if (wIn >= 0 && wIn < ${i}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}exports.Dilation2DProgram=n;
},{}],"exAg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2D=o,exports.dilation2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dilation_gpu"),n=require("./Reshape");function o(o){const{inputs:i,backend:r,attrs:a}=o,{x:s,filter:l}=i,{strides:p,pad:d,dilations:u}=a,c=e.backend_util.computeDilation2DInfo(s.shape,l.shape,p,d,"NHWC",u);let f;const D=new t.Dilation2DProgram(c);f=r.runWebGLProgram(D,[s,l],"float32");const b=(0,n.reshape)({inputs:{x:f},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(f),b}const i={kernelName:e.Dilation2D,backendName:"webgl",kernelFunc:o};exports.dilation2DConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../dilation_gpu":"zpON","./Reshape":"k4TP"}],"Xush":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (x >= 0.0) ? x : (exp(x) - 1.0);",x="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:x}),u={kernelName:e.Elu,backendName:"webgl",kernelFunc:t};exports.eluConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"O3E0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=exports.eluGrad=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (b >= 1.0) ? a : a * (b + 1.0);",o="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t=t=>{const{inputs:u,backend:p}=t,{dy:s,y:c}=u,b=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,s.shape,c.shape):new r.BinaryOpProgram(n,s.shape,c.shape);return p.runWebGLProgram(b,[s,c],s.dtype)};exports.eluGrad=t;const u={kernelName:e.EluGrad,backendName:"webgl",kernelFunc:t};exports.eluGradConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"btqb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalConfig=exports.equal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="\n  return vec4(equal(a, b));\n",t="return float(a == b);",l=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:n,dtype:"bool"});exports.equal=l;const o={kernelName:e.Equal,backendName:"webgl",kernelFunc:l};exports.equalConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"a80B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${e.backend_util.ERF_P};\n  float a1 = ${e.backend_util.ERF_A1};\n  float a2 = ${e.backend_util.ERF_A2};\n  float a3 = ${e.backend_util.ERF_A3};\n  float a4 = ${e.backend_util.ERF_A4};\n  float a5 = ${e.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,a=(0,n.unaryKernelFunc)({opSnippet:t});exports.erf=a;const r={kernelName:e.Erf,backendName:"webgl",kernelFunc:a};exports.erfConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"gRCN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=exports.exp=exports.EXP=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),p=require("../kernel_utils/shared");const n="return exp(x);";exports.EXP=n;const t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:p.expImplCPU});exports.exp=t;const s={kernelName:e.Exp,backendName:"webgl",kernelFunc:t};exports.expConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"LRvM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,attrs:r,backend:i}=t,{dim:a}=r,{input:p}=n,o=p.shape.length,u=p.shape.slice();let c=a;return a<0&&(e.util.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+a+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"webgl",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP"}],"vGDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Config=exports.expm1=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),p=require("../kernel_utils/shared");const n="return exp(x) - 1.0;",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:p.expm1ImplCPU});exports.expm1=t;const s={kernelName:e.Expm1,backendName:"webgl",kernelFunc:t};exports.expm1Config=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"LwKt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FFTProgram=void 0;class e{constructor(e,t,n){this.variableNames=["real","imag"];const o=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=n?`${o}.0`:"1.0";let l;if("real"===e)l="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);l="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${l}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${o});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${o}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}exports.FFTProgram=e;
},{}],"VKcD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftImpl=t;var e=require("@tensorflow/tfjs-core"),a=require("../fft_gpu"),r=require("./Complex"),s=require("./Reshape");function t(t,o,n){const p=n.texData.get(t.dataId),d=e.util.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],m=d/i,f=(0,s.reshape)({inputs:{x:t},backend:n,attrs:{shape:[m,i]}}),l=f.shape,I=new a.FFTProgram("real",l,o),u=new a.FFTProgram("imag",l,o),c=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:l},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(I,c,"float32"),g=n.runWebGLProgram(u,c,"float32"),x=(0,r.complex)({inputs:{real:h,imag:g},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g);const T=(0,s.reshape)({inputs:{x:x},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(x),T}
},{"@tensorflow/tfjs-core":"tc6m","../fft_gpu":"LwKt","./Complex":"vWXR","./Reshape":"k4TP"}],"Bx4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!1,n)}const n={kernelName:e.FFT,backendName:"webgl",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./FFT_impl":"VKcD"}],"A8rF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FillProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,o)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(o,"value")),e.gl.uniform1f(this.valueLoc,t)}}}exports.FillProgram=t;
},{}],"vLYI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=t,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../fill_gpu");function t(t){const{backend:l,attrs:n}=t,{shape:o,value:i}=n;let{dtype:s}=n;if("string"===(s=s||e.util.inferDtype(i))){const r=e.util.getArrayFromDType(s,e.util.sizeFromShape(o));return r.fill(i),l.makeTensorInfo(o,s,r)}{const e=new r.FillProgram(o,i),t=e.getCustomSetupFunc(i);return l.runWebGLProgram(e,[],s,t)}}const l={kernelName:e.Fill,backendName:"webgl",kernelFunc:t};exports.fillConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../fill_gpu":"A8rF"}],"gwWQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlipLeftRightProgram=void 0;class o{constructor(o){this.variableNames=["Image"],this.outputShape=[];const t=o[2];this.outputShape=o,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.FlipLeftRightProgram=o;
},{}],"gRW5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../flip_left_right_gpu");const r={kernelName:e.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:r})=>{const{image:i}=e,n=r,o=new t.FlipLeftRightProgram(i.shape);return n.runWebGLProgram(o,[i],i.dtype)}};exports.flipLeftRightConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../flip_left_right_gpu":"gwWQ"}],"Yy57":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=exports.floor=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../kernel_utils/shared");const l="return floor(x);",n=(0,r.unaryKernelFunc)({opSnippet:l,packedOpSnippet:l,cpuKernelImpl:o.floorImplCPU});exports.floor=n;const t={kernelName:e.Floor,backendName:"webgl",kernelFunc:n};exports.floorConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"rAwh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivConfig=exports.floorDiv=void 0;var n=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const e="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",o="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",r=(0,i.binaryKernelFunc)({opSnippet:e,packedOpSnippet:o,dtype:"int32"});exports.floorDiv=r;const t={kernelName:n.FloorDiv,backendName:"webgl",kernelFunc:r};exports.floorDivConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"LnXj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"];const s=(0,e.getGlslDifferences)(),[n,o]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${n}.0);\n\n        vec4 values = ${s.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}exports.FromPixelsProgram=t;
},{"../../glsl_version":"QbWp"}],"ljIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsPackedProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const o=(0,e.getGlslDifferences)(),[n,s]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${n}.0);\n            vec4 values = ${o.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.FromPixelsPackedProgram=t;
},{"../../glsl_version":"QbWp"}],"MRz7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixelsConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../tex_util"),n=require("./FromPixels_utils/from_pixels_gpu"),a=require("./FromPixels_utils/from_pixels_packed_gpu");const o={kernelName:e.FromPixels,backendName:"webgl",kernelFunc:r};let i;function r(o){const{inputs:r,backend:s,attrs:l}=o;let{pixels:d}=r;const{numChannels:m}=l,u="undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement,g="undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement,c="undefined"!=typeof ImageBitmap&&d instanceof ImageBitmap,[f,p]=u?[d.videoWidth,d.videoHeight]:[d.width,d.height],x=[p,f],P=[p,f,m];(g||u||c)&&(null==i&&(i=document.createElement("canvas").getContext("2d")),i.canvas.width=f,i.canvas.height=p,i.drawImage(d,0,0,f,p),d=i.canvas);const _=s.makeTensorInfo(x,"int32");s.texData.get(_.dataId).usage=t.TextureUsage.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(_.dataId),d);const v=(0,e.env)().getBool("WEBGL_PACK")?new a.FromPixelsPackedProgram(P):new n.FromPixelsProgram(P),I=s.runWebGLProgram(v,[_],"int32");return s.disposeData(_.dataId),I}exports.fromPixelsConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../tex_util":"hBHG","./FromPixels_utils/from_pixels_gpu":"LnXj","./FromPixels_utils/from_pixels_packed_gpu":"ljIp"}],"sHbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2d=i,exports.fusedConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),n=require("../kernel_utils/kernel_funcs_utils"),o=require("./Conv2D_impl"),a=require("./Reshape");function i(i){const{inputs:r,backend:s,attrs:l}=i,{x:u,filter:c,bias:d,preluActivationWeights:p}=r,{strides:f,pad:h,dataFormat:v,dilations:k,dimRoundingMode:g,activation:m,leakyreluAlpha:b}=l,C=e.backend_util.convertConv2DDataFormat(v),I=e.backend_util.computeConv2DInfo(u.shape,c.shape,f,k,h,g,!1,C);let _;const A=[];if(1!==I.filterHeight||1!==I.filterWidth||1!==I.dilationHeight||1!==I.dilationWidth||1!==I.strideHeight||1!==I.strideWidth||"SAME"!==I.padInfo.type&&"VALID"!==I.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===u.shape[0])_=(0,o.conv2dWithIm2Row)({x:u,filter:c,convInfo:I,backend:s,bias:d,activation:m,preluActivationWeights:p,leakyreluAlpha:b});else{const o=null!=d,a=null!=p,i="leakyrelu"===m,r=m?(0,n.mapActivationToShaderProgram)(m,!1):null,l=new t.Conv2DProgram(I,o,r,a,i),f=[u,c];if(d&&f.push(d),p&&f.push(p),i){const t=s.makeTensorInfo([],"float32",e.util.createScalarValue(b,"float32"));f.push(t),A.push(t)}_=s.runWebGLProgram(l,f,"float32")}else _=(0,o.conv2dByMatMul)({x:u,filter:c,convInfo:I,backend:s,bias:d,activation:m,preluActivationWeights:p,leakyreluAlpha:b});const D=(0,a.reshape)({inputs:{x:_},backend:s,attrs:{shape:I.outShape}});return A.push(_),A.forEach(e=>s.disposeIntermediateTensorInfo(e)),D}const r={kernelName:e.FusedConv2D,backendName:"webgl",kernelFunc:i};exports.fusedConv2DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ","../kernel_utils/kernel_funcs_utils":"uLeB","./Conv2D_impl":"Ld10","./Reshape":"k4TP"}],"yLUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=o,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),n=require("../conv_packed_gpu_depthwise"),s=require("../kernel_utils/kernel_funcs_utils");function o(o){const{inputs:r,backend:i,attrs:a}=o,{x:l,filter:u,bias:d,preluActivationWeights:p}=r,{strides:c,pad:h,dilations:f,dimRoundingMode:v,activation:D,leakyreluAlpha:C}=a,_=[];let k=f;null==k&&(k=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(c,k),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${c} and dilations '${k}'`);const w=e.backend_util.computeConv2DInfo(l.shape,u.shape,c,k,h,v,!0),g=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&w.strideWidth<=2&&w.outChannels/w.inChannels==1,m=D?(0,s.mapActivationToShaderProgram)(D,g):null,b=[l,u],P=null!=d,E=null!=p,x="leakyrelu"===D;if(P&&b.push(d),E&&b.push(p),x){const t=i.makeTensorInfo([],"float32",e.util.createScalarValue(C,"float32"));b.push(t),_.push(t)}let A;A=g?new n.DepthwiseConvPacked2DProgram(w,P,m,E,x):new t.DepthwiseConv2DProgram(w,P,m,E,x);const I=i.runWebGLProgram(A,b,"float32");return _.forEach(e=>i.disposeIntermediateTensorInfo(e)),I}const r={kernelName:e.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:o};exports.fusedDepthwiseConv2DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu_depthwise":"tZKH","../conv_packed_gpu_depthwise":"najp","../kernel_utils/kernel_funcs_utils":"uLeB"}],"gSio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherNDProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,i){this.sliceDim=t,this.strides=s,this.variableNames=["x","indices"],this.outputShape=i;const r=(0,e.getCoordsDataType)(s.length),n=(0,e.getCoordsDataType)(i.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${n} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}exports.GatherNDProgram=t;
},{"./shader_compiler":"DIKY"}],"oqms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNd=a,exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../gather_nd_gpu"),t=require("./Reshape");function a(a){const{inputs:s,backend:n}=a,{params:o,indices:p}=s,i=p.shape,d=i[i.length-1],[h,u,c,g]=e.backend_util.prepareAndValidate(o,p),l=(0,t.reshape)({inputs:{x:p},backend:n,attrs:{shape:[u,d]}}),b=(0,t.reshape)({inputs:{x:o},backend:n,attrs:{shape:[e.util.sizeFromShape(o.shape)/c,c]}}),f=new r.GatherNDProgram(d,g,[u,c]),m=n.runWebGLProgram(f,[b,l],b.dtype),k=(0,t.reshape)({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),k}const s={kernelName:e.GatherNd,backendName:"webgl",kernelFunc:a};exports.gatherNdConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../gather_nd_gpu":"gSio","./Reshape":"k4TP"}],"sYl6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s){this.variableNames=["A","indices"],this.outputShape=s,this.rank=s.length;const o=(0,e.getCoordsDataType)(this.rank),n=r(t,2);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        setOutput(getA(${n}));\n      }\n    `}}function r(e,t){const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)2===o?s.push("int(getIndices(resRC.x, resRC.z))"):s.push(`${r[o]}`);return s.join()}exports.GatherProgram=t;
},{"./shader_compiler":"DIKY"}],"ZQ9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2=a,exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../gather_gpu"),r=require("../kernel_utils/shared"),s=require("./Reshape");function a(a){const{inputs:n,backend:i,attrs:o}=a,{x:p,indices:u}=n,{axis:h,batchDims:c}=o,d=e.util.parseAxisParam(h,p.shape)[0],l=e.backend_util.segment_util.collectGatherOpShapeInfo(p,u,d,c),b=e.util.sizeFromShape(u.shape),f=[],S=(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),g=(0,s.reshape)({inputs:{x:u},backend:i,attrs:{shape:[l.batchSize,b/l.batchSize]}});f.push(S),f.push(g);const m=[l.batchSize,l.outerSize,b/l.batchSize,l.sliceSize];if(i.shouldExecuteOnCPU([p,u])||"string"===p.dtype){const e=i.bufferSync(g),t=i.bufferSync(S),s=(0,r.gatherV2ImplCPU)(t,e,m);return f.forEach(e=>i.disposeIntermediateTensorInfo(e)),i.makeTensorInfo(l.outputShape,s.dtype,s.values)}const x=new t.GatherProgram(S.shape,m),z=i.runWebGLProgram(x,[S,g],S.dtype);f.push(z);const k=(0,s.reshape)({inputs:{x:z},backend:i,attrs:{shape:l.outputShape}});return f.forEach(e=>i.disposeIntermediateTensorInfo(e)),k}const n={kernelName:e.GatherV2,backendName:"webgl",kernelFunc:a};exports.gatherV2Config=n;
},{"@tensorflow/tfjs-core":"tc6m","../gather_gpu":"sYl6","../kernel_utils/shared":"tfp0","./Reshape":"k4TP"}],"yKvx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterConfig=exports.greater=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const n="return float(a > b);",a="\n  return vec4(greaterThan(a, b));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:a,cpuKernelImpl:t.greaterImplCPU,dtype:"bool"});exports.greater=o;const l={kernelName:e.Greater,backendName:"webgl",kernelFunc:o};exports.greaterConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"AkAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualConfig=exports.greaterEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const t="return float(a >= b);",a="\n  return vec4(greaterThanEqual(a, b));\n",n=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:a,dtype:"bool"});exports.greaterEqual=n;const l={kernelName:e.GreaterEqual,backendName:"webgl",kernelFunc:n};exports.greaterEqualConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"Z5jD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!0,n)}const n={kernelName:e.IFFT,backendName:"webgl",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./FFT_impl":"VKcD"}],"uPGo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const n="return float(!isnan(x) && !isinf(x));",t=(0,i.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isFinite=t;const r={kernelName:e.IsFinite,backendName:"webgl",kernelFunc:t};exports.isFiniteConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"EVDd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(isinf(x));",s=(0,n.unaryKernelFunc)({opSnippet:r,dtype:"bool"});exports.isInf=s;const o={kernelName:e.IsInf,backendName:"webgl",kernelFunc:s};exports.isInfConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"amu0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(isnan(x));",s=(0,r.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"webgl",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"j3SB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessConfig=exports.less=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),r=require("../kernel_utils/shared");const n="return float(a < b);",l="\n  return vec4(lessThan(a, b));\n",t=(0,s.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,cpuKernelImpl:r.lessImplCPU,dtype:"bool"});exports.less=t;const o={kernelName:e.Less,backendName:"webgl",kernelFunc:t};exports.lessConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"PgfX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualConfig=exports.lessEqual=exports.LESS_EQUAL_PACKED=exports.LESS_EQUAL=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils");const r="return float(a <= b);";exports.LESS_EQUAL=r;const t="\n  return vec4(lessThanEqual(a, b));\n";exports.LESS_EQUAL_PACKED=t;const n=(0,s.binaryKernelFunc)({opSnippet:r,packedOpSnippet:t,dtype:"bool"});exports.lessEqual=n;const o={kernelName:e.LessEqual,backendName:"webgl",kernelFunc:n};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"sU1o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpace=r,exports.linSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function r(e){const{backend:r,attrs:t}=e,{start:o,stop:s,num:a}=t,l=(0,n.linSpaceImplCPU)(o,s,a);return r.makeTensorInfo([l.length],"float32",l)}const t={kernelName:e.LinSpace,backendName:"webgl",kernelFunc:r};exports.linSpaceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"cxva":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=exports.log=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="if (x < 0.0) return NAN;\n  return log(x);",s="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:s,cpuKernelImpl:l.logImplCPU});exports.log=t;const u={kernelName:e.Log,backendName:"webgl",kernelFunc:t};exports.logConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"VTAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return log(1.0 + x);",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.log1p=n;const t={kernelName:e.Log1p,backendName:"webgl",kernelFunc:n};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"QvN7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndConfig=exports.logicalAnd=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(a >= 1.0 && b >= 1.0);",l="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",o=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:l,dtype:"bool"});exports.logicalAnd=o;const t={kernelName:e.LogicalAnd,backendName:"webgl",kernelFunc:o};exports.logicalAndConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"wovn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const r="return float(!(x >= 1.0));",t=(0,o.unaryKernelFunc)({opSnippet:r});exports.logicalNot=t;const l={kernelName:e.LogicalNot,backendName:"webgl",kernelFunc:t};exports.logicalNotConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"M59B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOrConfig=exports.logicalOr=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(a >= 1.0 || b >= 1.0);",l="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,dtype:"bool"});exports.logicalOr=o;const t={kernelName:e.LogicalOr,backendName:"webgl",kernelFunc:o};exports.logicalOrConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"DLwU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNProgram=void 0;class t{constructor(t,o,n,s,e){this.variableNames=["x"],this.outputShape=[];const r=o,i=t[3]-1;let a;this.outputShape=t;const d=`float(${n}) + float(${s}) * sum`;a=.5===e?`inversesqrt(${d})`:1===e?`1.0/(${d})`:`exp(log(${d}) * float(-${e}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${r}; j <= ${r}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}exports.LRNProgram=t;
},{}],"sdWO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNPackedProgram=void 0;class e{constructor(e,n,t,o,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const r=n,c=e[3]-1;let s;this.outputShape=e;const u=`float(${t}) + float(${o}) * sum`;s=.5===a?`inversesqrt(${u})`:1===a?`1.0/(${u})`:`exp(log(${u}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${r};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${r}; j <= ${r}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${c}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}exports.LRNPackedProgram=e;
},{}],"MLAU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNConfig=exports.lrn=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_gpu"),n=require("../lrn_packed_gpu");const t=t=>{const{inputs:o,backend:a,attrs:s}=t,{x:p}=o,{depthRadius:u,bias:l,alpha:c,beta:i}=s,d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new n.LRNPackedProgram(p.shape,u,l,c,i):new r.LRNProgram(p.shape,u,l,c,i);return a.runWebGLProgram(d,[p],p.dtype)};exports.lrn=t;const o={kernelName:e.LRN,backendName:"webgl",kernelFunc:t};exports.LRNConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../lrn_gpu":"DLwU","../lrn_packed_gpu":"sdWO"}],"xmP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNGradProgram=void 0;class n{constructor(n,t,e,i,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=i,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${i}) * norm + float(${e});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${i})\n                * float(${o})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}exports.LRNGradProgram=n;
},{}],"z49d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNGradConfig=exports.lrnGrad=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_grad_gpu");const a=e=>{const{inputs:a,backend:t,attrs:n}=e,{x:o,y:s,dy:d}=a,{depthRadius:p,bias:u,alpha:i,beta:l}=n,c=new r.LRNGradProgram(o.shape,p,u,i,l);return t.runWebGLProgram(c,[o,s,d],o.dtype)};exports.lrnGrad=a;const t={kernelName:e.LRNGrad,backendName:"webgl",kernelFunc:a};exports.LRNGradConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../lrn_grad_gpu":"xmP3"}],"mDKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,a,n,i){const o=e.util.sizeFromShape(a),p=e.util.sizeFromShape(t.shape)/o,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,o]},backend:i}),d=(0,r.reduce)(u,t.dtype,"max",i),c=(0,s.reshape)({inputs:{x:d},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(d),c}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernels/Reshape":"k4TP"}],"SOPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=n,exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("./Max_impl"),s=require("./Transpose_impl");function n(n){const{inputs:r,backend:o,attrs:l}=n,{x:i}=r,{reductionIndices:p,keepDims:d}=l,u=i.shape.length,c=e.util.parseAxisParam(p,i.shape);let m=c;const x=e.backend_util.getAxesPermutation(m,u),I=null!=x,f=o.shouldExecuteOnCPU([i]);let h=i;if(I){if(f){const e=o.texData.get(h.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=i.shape[x[s]];const a=(0,s.transposeImplCPU)(e,i.shape,i.dtype,x,t);h=o.makeTensorInfo(t,i.dtype),o.texData.get(h.dataId).values=a}else h=(0,s.transposeImpl)(i,x,o);m=e.backend_util.getInnerMostAxes(m.length,u)}e.backend_util.assertAxesAreInnerMostDims("max",m,u);const[k,g]=e.backend_util.computeOutAndReduceShapes(h.shape,m);let _,b=k;if(d&&(b=e.backend_util.expandShapeToKeepDim(k,c)),f){const a=o.texData.get(h.dataId).values,s=(0,t.maxImplCPU)(a,e.util.sizeFromShape(g),b,i.dtype);_=o.makeTensorInfo(b,i.dtype),o.texData.get(_.dataId).values=s}else _=(0,a.maxImpl)(h,g,b,o);return I&&o.disposeIntermediateTensorInfo(h),_}const r={kernelName:e.Max,backendName:"webgl",kernelFunc:n};exports.maxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","./Max_impl":"mDKU","./Transpose_impl":"nCXe"}],"IMhY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumConfig=exports.maximum=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),n=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const a=r.CHECK_NAN_SNIPPET+"\n  return max(a, b);\n",m="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,i.binaryKernelFunc)({opSnippet:a,packedOpSnippet:m,cpuKernelImpl:u.maximumImplCPU});exports.maximum=s;const t={kernelName:e.Maximum,backendName:"webgl",kernelFunc:s};exports.maximumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"I2MZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=i,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:p}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,p);if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const x=new t.Pool2DProgram(m,"max",!1);return s.runWebGLProgram(x,[l],l.dtype)}const n={kernelName:e.MaxPool,backendName:"webgl",kernelFunc:i};exports.maxPoolConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt","../webgl_util":"p3g2","./Identity":"Gwwj"}],"fXYl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=r,exports.maxPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:s}=t,{filterSize:i,strides:l,pad:d,dataFormat:u,dimRoundingMode:p}=a,c=e.backend_util.computePool3DInfo(s.shape,i,l,[1,1,1],d,p,u),m=new o.Pool3DProgram(c,"max",!1);return n.runWebGLProgram(m,[s],s.dtype)}const t={kernelName:e.MaxPool3D,backendName:"webgl",kernelFunc:r};exports.maxPool3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt"}],"trD0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaxPool3DBackpropProgram=exports.MaxPool2DBackpropProgram=void 0;class n{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideHeight,o=n.strideWidth,e=n.dilationHeight,i=n.effectiveFilterHeight,d=n.effectiveFilterWidth,r=i-1-n.padInfo.top,a=d-1-n.padInfo.left,s=i*d-1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${s} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${d} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool2DBackpropProgram=n;class t{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,i=n.dilationDepth,d=n.dilationHeight,r=n.dilationWidth,a=n.effectiveFilterDepth,s=n.effectiveFilterHeight,y=n.effectiveFilterWidth,c=a-1-n.padInfo.front,l=s-1-n.padInfo.top,C=y-1-n.padInfo.left,f=a*s*y-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${l}, ${C});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${a};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${s};\n              wR += ${d}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${y};\n                wC += ${r}) {\n              float dyC = float(dyCCorner + wC) / ${e}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${f} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${s} * ${y} +\n                  wR * ${y} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool3DBackpropProgram=t;
},{}],"Vwrr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGrad=a,exports.maxPoolGrad3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu");function a(a){const{inputs:n,backend:t,attrs:p}=a,{dy:d,input:i}=n,s=i,{filterSize:u,strides:l,pad:m,dimRoundingMode:c}=p,P=e.backend_util.computePool3DInfo(s.shape,u,l,[1,1,1],m,c),x=new r.Pool3DProgram(P,"max",!0),g=t.runWebGLProgram(x,[s],s.dtype),f=new o.MaxPool3DBackpropProgram(P),b=t.runWebGLProgram(f,[d,g],s.dtype);return t.disposeIntermediateTensorInfo(g),b}const n={kernelName:e.MaxPool3DGrad,backendName:"webgl",kernelFunc:a};exports.maxPoolGrad3DConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt"}],"iKnw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=a,exports.maxPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu"),t=require("../webgl_util");function a(a){const{inputs:n,backend:p,attrs:s}=a,{dy:u,input:d,output:i}=n,l=d;(0,t.assertNotComplex)([d,i],"maxPoolGrad");const{filterSize:m,strides:c,pad:x,dimRoundingMode:P}=s,g=e.backend_util.computePool2DInfo(l.shape,m,c,1,x,P),b=new r.Pool2DProgram(g,"max",!0),f=p.runWebGLProgram(b,[l],l.dtype),_=new o.MaxPool2DBackpropProgram(g),k=p.runWebGLProgram(_,[u,f],l.dtype);return p.disposeIntermediateTensorInfo(f),k}const n={kernelName:e.MaxPoolGrad,backendName:"webgl",kernelFunc:a};exports.maxPoolGradConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt","../webgl_util":"p3g2"}],"ujBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=o;var r=require("../pool_gpu");function o(o,e,t,a){let l=new r.Pool2DProgram(t,"max",!1);const m=a.runWebGLProgram(l,[o],"float32");return l=new r.Pool2DProgram(t,"max",!0,!0,e),[m,a.runWebGLProgram(l,[o],"float32")]}
},{"../pool_gpu":"DAMt"}],"yFKv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./MaxPoolWithArgmax_impl");const r={kernelName:e.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:r,attrs:o,backend:i})=>{const{x:a}=r,{filterSize:n,strides:s,pad:l,includeBatchInIndex:u}=o,d=i;e.util.assert(4===a.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);const m=[1,1];e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(s,m),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${m}'`);const x=e.backend_util.computePool2DInfo(a.shape,n,s,m,l),[c,h]=(0,t.maxPoolWithArgmaxImpl)(a,u,x,d);return[c,h]}};exports.maxPoolWithArgmaxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./MaxPoolWithArgmax_impl":"ujBb"}],"Wwo8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,n,a,o){const i=e.util.sizeFromShape(n),p=e.util.sizeFromShape(t.shape)/i,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,i]},backend:o}),d=(0,r.reduce)(u,"float32","mean",o),l=(0,s.reshape)({inputs:{x:d},attrs:{shape:a},backend:o});return o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(d),l}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernels/Reshape":"k4TP"}],"rbfu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Mean_impl"),s=require("./Transpose_impl");const n={kernelName:e.Mean,backendName:"webgl",kernelFunc:({inputs:n,attrs:a,backend:r})=>{const{x:o}=n,{keepDims:l,axis:p}=a,i=r,u=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,u),x=null!=m,f=i.shouldExecuteOnCPU([o]),h=[];let k=o;if(x){if(f){const e=i.texData.get(k.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=o.shape[m[s]];const n=(0,s.transposeImplCPU)(e,o.shape,o.dtype,m,t);k=i.makeTensorInfo(t,o.dtype),i.texData.get(k.dataId).values=n}else k=(0,s.transposeImpl)(o,m,i);h.push(k),d=e.backend_util.getInnerMostAxes(d.length,u)}e.backend_util.assertAxesAreInnerMostDims("sum",d,u);const[g,I]=e.backend_util.computeOutAndReduceShapes(k.shape,d);let b=g;l&&(b=e.backend_util.expandShapeToKeepDim(g,c));const _=(0,t.meanImpl)(k,I,b,i);for(const e of h)i.disposeIntermediateTensorInfo(e);return _}};exports.meanConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Mean_impl":"Wwo8","./Transpose_impl":"nCXe"}],"xq7h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=r,exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:a,backend:i,attrs:p}=r,{x:o}=a,{axis:u,keepDims:d}=p,l=o.shape.length,c=e.util.parseAxisParam(u,o.shape);let m=c;const h=e.backend_util.getAxesPermutation(m,l);let k=o;null!=h&&(k=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:h}}),m=e.backend_util.getInnerMostAxes(m.length,o.shape.length)),e.backend_util.assertAxesAreInnerMostDims("min",m,l);const[x,b]=e.backend_util.computeOutAndReduceShapes(k.shape,m),f=e.util.sizeFromShape(b),g=(0,t.reshape)({inputs:{x:k},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(g,g.dtype,"min",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(x,c);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:x}});return i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(I),null!=h&&i.disposeIntermediateTensorInfo(k),_}const a={kernelName:e.Min,backendName:"webgl",kernelFunc:r};exports.minConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"GafU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumConfig=exports.minimum=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const m=n.CHECK_NAN_SNIPPET+"\n  return min(a, b);\n",s="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,i.binaryKernelFunc)({opSnippet:m,packedOpSnippet:s,cpuKernelImpl:u.minimumImplCPU});exports.minimum=t;const p={kernelName:e.Minimum,backendName:"webgl",kernelFunc:t};exports.minimumConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"hmnb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadProgram=void 0;var t=require("./shader_compiler");class o{constructor(o,n,r){this.variableNames=["x"],this.outputShape=n.map((t,n)=>t[0]+o[n]+t[1]);const e=o.length,i=(0,t.getCoordsDataType)(e),s=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+o[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e),d="reflect"===r?0:1;this.userCode=1!==e?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${u});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${e}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${d};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${d};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${d};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${d};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}exports.MirrorPadProgram=o;
},{"./shader_compiler":"DIKY"}],"wu6r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadPackedProgram=void 0;var e=require("./packing_util"),n=require("./shader_compiler");class t{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((e,n)=>e[0]+t[n]+e[1]);const o=t.length,u=(0,n.getCoordsDataType)(o),$=r.map(e=>e[0]).join(","),c=r.map((e,n)=>e[0]+t[n]).join(","),a=(0,e.getChannels)("rc",o),i=(0,e.getChannels)("source",o),l=`${a[o-1]} < ${this.outputShape[o-1]}`,g=1===o?"source":`vec2(${i.slice(-2).join()})`,p="reflect"===s?0:1;let h="";if(1===o){const e=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n      `}else{const e=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n        rc = outputLoc;\n        ${a[o-2]} += 1;\n        if(${a[o-2]} < ${this.outputShape[o-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${i.join()}), ${g});\n          ${a[o-1]} += 1;\n          if(${l}) {\n            ${e}\n            result[3] = getChannel(getX(${i.join()}), ${g});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${$});\n      const ${u} end = ${u}(${c});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.MirrorPadPackedProgram=t;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"iBor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadConfig=exports.mirrorPadKernelFunc=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../mirror_pad_gpu"),o=require("../mirror_pad_packed_gpu");const a=({inputs:a,backend:n,attrs:d})=>{const{x:t}=a,{paddings:i,mode:s}=d,p=(0,r.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new o.MirrorPadPackedProgram(t.shape,i,s):new e.MirrorPadProgram(t.shape,i,s);return n.runWebGLProgram(p,[t],t.dtype)};exports.mirrorPadKernelFunc=a;const n={kernelName:r.MirrorPad,backendName:"webgl",kernelFunc:a};exports.mirrorPadConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../mirror_pad_gpu":"hmnb","../mirror_pad_packed_gpu":"wu6r"}],"B26M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modConfig=exports.mod=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/kernel_funcs_utils");const o="if (b == 0.0) return NAN;\n  return mod(a, b);",t="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,n.binaryKernelFunc)({opSnippet:o,packedOpSnippet:t});exports.mod=s;const u={kernelName:e.Mod,backendName:"webgl",kernelFunc:s};exports.modConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB"}],"j5oG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultinomialProgram=void 0;class t{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}exports.MultinomialProgram=t;
},{}],"aUUN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivConfig=exports.realDiv=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",l=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:t,checkOutOfBounds:!0});exports.realDiv=l;const u={kernelName:e.RealDiv,backendName:"webgl",kernelFunc:l};exports.realDivConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"MkXb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.sub=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const n="return a - b;",u=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n,supportsComplex:!0,cpuKernelImpl:s.subImplCPU});exports.sub=u;const t={kernelName:e.Sub,backendName:"webgl",kernelFunc:u};exports.subConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"YZuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=o,exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Exp"),t=require("./Max"),n=require("./RealDiv"),r=require("./Reshape"),a=require("./Sub"),i=require("./Sum");function o(o){const{inputs:p,backend:d,attrs:u}=o,{logits:m}=p,{dim:x}=u,c=e.util.parseAxisParam([x],m.shape),b=(0,t.max)({inputs:{x:m},backend:d,attrs:{reductionIndices:c,keepDims:!1}}),f=e.backend_util.expandShapeToKeepDim(b.shape,c),k=(0,r.reshape)({inputs:{x:b},backend:d,attrs:{shape:f}}),I=(0,a.sub)({inputs:{a:m,b:k},backend:d}),l=(0,s.exp)({inputs:{x:I},backend:d}),h=(0,i.sum)({inputs:{x:l},backend:d,attrs:{axis:c,keepDims:!1}}),q=(0,r.reshape)({inputs:{x:h},backend:d,attrs:{shape:f}}),T=(0,n.realDiv)({inputs:{a:l,b:q},backend:d});return d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(k),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(l),d.disposeIntermediateTensorInfo(h),d.disposeIntermediateTensorInfo(q),T}const p={kernelName:e.Softmax,backendName:"webgl",kernelFunc:o};exports.softmaxConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Exp":"gRCN","./Max":"SOPS","./RealDiv":"aUUN","./Reshape":"k4TP","./Sub":"MkXb","./Sum":"RVri"}],"Zmu3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=o,exports.multinomialConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../multinomial_gpu"),n=require("./Softmax");function o(e){const{inputs:o,backend:i,attrs:r}=e,{logits:s}=o,{numSamples:a,seed:l,normalized:u}=r,m=u?s:(0,n.softmax)({inputs:{logits:s},backend:i,attrs:{dim:s.shape.length-1}}),p=m.shape[0],c=m.shape[1],d=new t.MultinomialProgram(p,c,a),g=d.getCustomSetupFunc(l),f=i.runWebGLProgram(d,[m],"int32",g);return u||i.disposeIntermediateTensorInfo(m),f}const i={kernelName:e.Multinomial,backendName:"webgl",kernelFunc:o};exports.multinomialConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../multinomial_gpu":"j5oG","./Softmax":"YZuw"}],"Tjo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=a,exports.negConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const o="return -x;";function a(a){const{inputs:s,backend:u}=a,{x:p}=s;if(u.shouldExecuteOnCPU([p])){const e=u.texData.get(p.dataId),[n,t]=(0,r.negImplCPU)(e.values,p.shape,p.dtype);return u.makeTensorInfo(t,p.dtype,n)}let g;return g=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(p.shape,o):new n.UnaryOpProgram(p.shape,o),u.runWebGLProgram(g,[p],p.dtype)}const s={kernelName:e.Neg,backendName:"webgl",kernelFunc:a};exports.negConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"GVyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3=s,exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV3Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:c,scoreThreshold:u}=t,d=r.readSync(a.dataId),l=r.readSync(i.dataId),{selectedIndices:x}=n(d,l,p,c,u);return r.makeTensorInfo([x.length],"int32",new Int32Array(x))}const o={kernelName:e.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV3Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"DAkH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4=s,exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV4Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:c}=t,l=r.readSync(a.dataId),x=r.readSync(i.dataId),{selectedIndices:S,validOutputs:f}=n(l,x,p,u,d,c);return[r.makeTensorInfo([S.length],"int32",new Int32Array(S)),r.makeTensorInfo([],"int32",new Int32Array([f]))]}const o={kernelName:e.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV4Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"VwrN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5=s,exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV5Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:l,scoreThreshold:c,softNmsSigma:d}=t,u=r.readSync(a.dataId),x=r.readSync(i.dataId),f=p,S=l,k=c,m=d,{selectedIndices:h,selectedScores:I}=n(u,x,f,S,k,m);return[r.makeTensorInfo([h.length],"int32",new Int32Array(h)),r.makeTensorInfo([I.length],"float32",new Float32Array(I))]}const o={kernelName:e.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV5Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"Nv1m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneHotProgram=void 0;class o{constructor(o,t,e,s){this.variableNames=["indices"],this.outputShape=[o,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${e}),\n                      float(index == coords.y)));\n      }\n    `}}exports.OneHotProgram=o;
},{}],"wBT7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotConfig=exports.oneHot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../onehot_gpu"),t=require("./Reshape");const n=n=>{const{inputs:r,backend:s,attrs:a}=n,{indices:p}=r,{depth:i,onValue:u,offValue:d}=a,c=e.util.sizeFromShape(p.shape),h=new o.OneHotProgram(c,i,u,d),f=(0,t.reshape)({inputs:{x:p},backend:s,attrs:{shape:[c]}}),l=s.runWebGLProgram(h,[f],p.dtype);s.disposeIntermediateTensorInfo(f);const b=[...p.shape,i],m=(0,t.reshape)({inputs:{x:l},backend:s,attrs:{shape:b}});return s.disposeIntermediateTensorInfo(l),m};exports.oneHot=n;const r={kernelName:e.OneHot,backendName:"webgl",kernelFunc:n};exports.oneHotConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../onehot_gpu":"Nv1m","./Reshape":"k4TP"}],"PG0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=i,exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),t=require("./Imag"),s=require("./Real");function i(e){const{inputs:o,backend:a}=e,{x:p}=o;if("complex64"===p.dtype){const e=(0,s.real)({inputs:{input:p},backend:a}),r=i({inputs:{x:e},backend:a}),o=(0,t.imag)({inputs:{input:p},backend:a}),d=i({inputs:{x:o},backend:a}),u=(0,n.complex)({inputs:{real:r,imag:d},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(d),u}return(0,r.fill)({attrs:{shape:p.shape,dtype:p.dtype,value:"string"===p.dtype?"":0},backend:a})}const o={kernelName:e.ZerosLike,backendName:"webgl",kernelFunc:i};exports.zerosLikeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Fill":"vLYI","./Imag":"U9t0","./Real":"mH9E"}],"VyEl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=o,exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),i=require("./Imag"),s=require("./Real"),t=require("./ZerosLike");function o(e){const{inputs:p,backend:a}=e,{x:d}=p;if("string"===d.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===d.dtype){const e=(0,s.real)({inputs:{input:d},backend:a}),r=o({inputs:{x:e},backend:a}),p=(0,i.imag)({inputs:{input:d},backend:a}),u=(0,t.zerosLike)({inputs:{x:p},backend:a}),c=(0,n.complex)({inputs:{real:r,imag:u},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),c}return(0,r.fill)({attrs:{shape:d.shape,dtype:d.dtype,value:1},backend:a})}const p={kernelName:e.OnesLike,backendName:"webgl",kernelFunc:o};exports.onesLikeConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Fill":"vLYI","./Imag":"U9t0","./Real":"mH9E","./ZerosLike":"PG0L"}],"pf3x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:i}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:i}});const o=n[0].shape,p=n[0].dtype;n.forEach(t=>{e.util.assertShapesMatch(o,t.shape,"All tensors passed to stack must have matching shapes"),e.util.assert(p===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(e=>{const t=(0,s.expandDims)({inputs:{input:e},backend:r,attrs:{dim:i}});return u.push(t),t}),h=(0,t.concat)({inputs:d,backend:r,attrs:{axis:i}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}const n={kernelName:e.Pack,backendName:"webgl",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Concat":"SH0J","./ExpandDims":"LRvM"}],"psrI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadProgram=void 0;var t=require("./shader_compiler");class n{constructor(n,o,e){this.variableNames=["x"],this.outputShape=o.map((t,o)=>t[0]+n[o]+t[1]);const s=n.length,r=(0,t.getCoordsDataType)(s),a=o.map(t=>t[0]).join(","),u=o.map((t,o)=>t[0]+n[o]).join(","),d=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${r} start = ${r}(${a});\n      ${r} end = ${r}(${u});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${e}));\n        } else {\n          ${r} coords = outC - start;\n          setOutput(getX(${d}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${e}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}exports.PadProgram=n;
},{"./shader_compiler":"DIKY"}],"oRHP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadPackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((t,e)=>t[0]+n[e]+t[1]);const a=n.length,o=(0,e.getCoordsDataType)(a),u=r.map(t=>t[0]).join(","),c=r.map((t,e)=>t[0]+n[e]).join(","),i=(0,t.getChannels)("rc",a),$=(0,t.getChannels)("source",a),p=`${i[a-1]} < ${this.outputShape[a-1]}`,l=1===a?"source":`vec2(${$.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${i[a-1]} += 1;\n       if(${p}) {\n      `,1===a?"":`}\n       rc = outputLoc;\n       ${i[a-2]} += 1;\n       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;\n         if(${p}) {`],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let t=0,e=1===a?2:4;t<e;t++)g+=`\n        ${d[t]}\n        if (${h}) {\n          result[${t}] = float(${s});\n        } else {\n          ${o} source = rc - start;\n          result[${t}] = getChannel(getX(${$.join()}), ${l});\n        }\n      `;g+=1===a?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${u});\n      const ${o} end = ${o}(${c});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${g}\n        setOutput(result);\n      }\n    `}}exports.PadPackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"pC66":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2Config=exports.padV2=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../pad_gpu"),a=require("../pad_packed_gpu");const o=o=>{const{inputs:t,backend:n,attrs:p}=o,{x:d}=t,{paddings:s,constantValue:u}=p,c=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a.PadPackedProgram(d.shape,s,u):new r.PadProgram(d.shape,s,u);return n.runWebGLProgram(c,[d],d.dtype)};exports.padV2=o;const t={kernelName:e.PadV2,backendName:"webgl",kernelFunc:o};exports.padV2Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../pad_gpu":"psrI","../pad_packed_gpu":"oRHP"}],"hHx4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powConfig=exports.pow=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_packed_gpu"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",s="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,r.binaryKernelFunc)({opSnippet:o,packedOpSnippet:s});exports.pow=t;const u={kernelName:e.Pow,backendName:"webgl",kernelFunc:t};exports.powConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB"}],"qRnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=n,exports.prodConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("../kernel_utils/shared"),r=require("./Reshape"),a=require("./Transpose");function n(n){const{inputs:p,backend:o,attrs:u}=n,{x:i}=p,{axis:d,keepDims:c}=u,l=i.shape.length,h=[],k=e.util.parseAxisParam(d,i.shape);let x=k;const m=e.backend_util.getAxesPermutation(x,l);let b,f=i;if(null!=m&&(f=(0,a.transpose)({inputs:{x:i},backend:o,attrs:{perm:m}}),x=e.backend_util.getInnerMostAxes(x.length,l),h.push(f)),e.backend_util.assertAxesAreInnerMostDims("prod",x,l),o.shouldExecuteOnCPU([f])){const e=o.texData.get(f.dataId).values,{outVals:s,outShape:r,outDtype:a}=(0,t.prodImplCPU)(f.shape,f.dtype,e,x);b=o.makeTensorInfo(r,a,s)}else{const[t,a]=e.backend_util.computeOutAndReduceShapes(f.shape,x),n=e.util.sizeFromShape(a),p=(0,r.reshape)({inputs:{x:f},backend:o,attrs:{shape:[-1,n]}}),u=(0,e.sumOutType)(i.dtype),d=(0,s.reduce)(p,u,"prod",o);b=(0,r.reshape)({inputs:{x:d},backend:o,attrs:{shape:t}}),h.push(p),h.push(d)}if(c){h.push(b);const s=e.backend_util.expandShapeToKeepDim(b.shape,k);b=(0,r.reshape)({inputs:{x:b},backend:o,attrs:{shape:s}})}return h.forEach(e=>o.disposeIntermediateTensorInfo(e)),b}const p={kernelName:e.Prod,backendName:"webgl",kernelFunc:n};exports.prodConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernel_utils/shared":"tfp0","./Reshape":"k4TP","./Transpose":"hS8R"}],"QYnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeConfig=exports.range=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");const t=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:a,dtype:g}=n,l=(0,r.rangeImplCPU)(s,o,a,g);return t.makeTensorInfo([l.length],g,l)};exports.range=t;const n={kernelName:e.Range,backendName:"webgl",kernelFunc:t};exports.rangeConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"Pc2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return 1.0 / x;",c=(0,r.unaryKernelFunc)({opSnippet:o});exports.reciprocal=c;const n={kernelName:e.Reciprocal,backendName:"webgl",kernelFunc:c};exports.reciprocalConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"SV6U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : x;\n",s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu=t;const l={kernelName:e.Relu,backendName:"webgl",kernelFunc:t};exports.reluConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"JPeF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",s="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu6=t;const l={kernelName:e.Relu6,backendName:"webgl",kernelFunc:t};exports.relu6Config=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"BAHS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearProgram=void 0;class e{constructor(e,t,o,c,n){this.variableNames=["A"],this.outputShape=[];const[r,i,s,u]=e;this.outputShape=[r,t,o,u];const a=[c&&t>1?i-1:i,c&&o>1?s-1:s],R=[c&&t>1?t-1:t,c&&o>1?o-1:o];let C;C=n?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/R[0]},\n          ${a[1]/R[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${C};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearProgram=e;
},{}],"QNLw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearPackedProgram=void 0;class e{constructor(e,o,t,n,c){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[r,u,s,l]=e;this.outputShape=[r,o,t,l];const C=[n&&o>1?u-1:u,n&&t>1?s-1:s],a=[n&&o>1?o-1:o,n&&t>1?t-1:t];let i;i=c?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${C[0]/a[0]},\n          ${C[1]/a[1]},\n          ${C[1]/a[1]});\n      const vec3 inputShapeRC = vec3(${u}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${i};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${t-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearPackedProgram=e;
},{}],"u0TF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=n,exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_gpu"),i=require("../resize_bilinear_packed_gpu");function n(n){const{inputs:s,backend:a,attrs:o}=n,{images:t}=s,{alignCorners:l,halfPixelCenters:u,size:c}=o,[g,p]=c,_=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new i.ResizeBilinearPackedProgram(t.shape,g,p,l,u):new r.ResizeBilinearProgram(t.shape,g,p,l,u);return a.runWebGLProgram(_,[t],"float32")}const s={kernelName:e.ResizeBilinear,backendName:"webgl",kernelFunc:n};exports.resizeBilinearConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../resize_bilinear_gpu":"BAHS","../resize_bilinear_packed_gpu":"QNLw"}],"bHYm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearBackpropProgram=void 0;class t{constructor(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,i]=n,[,d,r]=t,a=[e&&d>1?o-1:o,e&&r>1?i-1:i],f=[e&&d>1?d-1:d,e&&r>1?r-1:r],l=a[0]/f[0],s=a[1]/f[1],x=1/l,c=1/s,p=2*Math.ceil(x)+2,y=2*Math.ceil(c)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${s});\n\n        const float invHeightScale = float(${x});\n        const float invWidthScale = float(${c});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${y});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${d}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${r}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeBilinearBackpropProgram=t;
},{}],"bVdd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGrad=i,exports.resizeBilinearGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_backprop_gpu");function i(e){const{inputs:i,backend:a,attrs:n}=e,{images:s,dy:o}=i,{alignCorners:t}=n,p=new r.ResizeBilinearBackpropProgram(o.shape,s.shape,t);return a.runWebGLProgram(p,[o],o.dtype)}const a={kernelName:e.ResizeBilinearGrad,backendName:"webgl",kernelFunc:i};exports.resizeBilinearGradConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../resize_bilinear_backprop_gpu":"bHYm"}],"T9BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeighborProgram=void 0;class e{constructor(e,t,o,n,r){this.variableNames=["A"],this.outputShape=[];const[s,c,i,u]=e;this.outputShape=[s,t,o,u];const a=[n&&t>1?c-1:c,n&&o>1?i-1:i],v=[n&&t>1?t-1:t,n&&o>1?o-1:o],p=n?"0.5":"0.0";let R;R=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/v[0]},\n          ${a[1]/v[1]});\n      const vec2 inputShapeRC = vec2(${c}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${R};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeNearestNeighborProgram=e;
},{}],"UWlN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=s,exports.resizeNearestNeighborConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_gpu");function s(e){const{inputs:s,backend:i,attrs:t}=e,{images:o}=s,{alignCorners:n,halfPixelCenters:a,size:g}=t,[N,b]=g,u=new r.ResizeNearestNeighborProgram(o.shape,N,b,n,a);return i.runWebGLProgram(u,[o],o.dtype)}const i={kernelName:e.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:s};exports.resizeNearestNeighborConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../resize_nearest_neighbor_gpu":"T9BX"}],"hkPU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeigborBackpropProgram=void 0;class t{constructor(t,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,e,a]=n,[,r,i]=t,s=[o&&r>1?e-1:e,o&&i>1?a-1:a],f=[o&&r>1?r-1:r,o&&i>1?i-1:i],l=s[0]/f[0],c=s[1]/f[1],d=1/l,u=1/c,y=2*Math.ceil(d)+2,h=2*Math.ceil(u)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${u});\n\n        const int winHeight = int(${y});\n        const int winWidth = int(${h});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${r}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${f[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${f[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${e}) - 1),\n                ${o} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${o} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeNearestNeigborBackpropProgram=t;
},{}],"V6wq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGrad=s,exports.resizeNearestNeighborGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_backprop_gpu");function s(e){const{inputs:s,backend:o,attrs:a}=e,{images:t,dy:i}=s,{alignCorners:n}=a,g=new r.ResizeNearestNeigborBackpropProgram(i.shape,t.shape,n);return o.runWebGLProgram(g,[i],i.dtype)}const o={kernelName:e.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:s};exports.resizeNearestNeighborGradConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../resize_nearest_neighbor_backprop_gpu":"hkPU"}],"dGqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReverseProgram=void 0;var e=require("./shader_compiler");class o{constructor(o,t){this.variableNames=["x"];const r=o.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=o,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${o[0]} - coord - 1));\n        }\n      `);const s=o.map((e,r)=>(e=>-1!==t.indexOf(e)&&1!==o[e]?`${o[e]} - coords[${e}] - 1`:`coords[${e}]`)(r)).join(","),n=(0,e.getCoordsDataType)(r);this.userCode=`\n      void main() {\n        ${n} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}exports.ReverseProgram=o;
},{"./shader_compiler":"DIKY"}],"b6t2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReversePackedProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class n{constructor(n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=n.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=n;const u=(0,e.getChannels)("rc",s),i=`${u[s-1]} + 1 < ${this.outputShape[s-1]}`,o=`${u[s-2]} + 1 < ${this.outputShape[s-2]}`,c=(0,t.getCoordsDataType)(s);function a(e){const t=n.map((t,s)=>(function(e,t){return-1!==r.indexOf(e)&&1!==n[e]?`${n[e]} - ${t[e]} - 1`:`${t[e]}`})(s,e));return`getChannel(getX(${t.join(",")}), vec2(${t.slice(-2).join(",")}))`}this.userCode=1===s?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${c} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return a(e)}(u.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",a(e)}(u.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}exports.ReversePackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"AqaL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=n,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../reverse_gpu"),s=require("../reverse_packed_gpu"),t=require("./Identity");function n(n){const{inputs:o,backend:a,attrs:i}=n,{x:u}=o,{dims:p}=i,c=u.shape.length,d=e.util.parseAxisParam(p,u.shape);if(0===c)return(0,t.identity)({inputs:{x:u},backend:a});const v=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.ReversePackedProgram(u.shape,d):new r.ReverseProgram(u.shape,d);return a.runWebGLProgram(v,[u],u.dtype)}const o={kernelName:e.Reverse,backendName:"webgl",kernelFunc:n};exports.reverseConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../reverse_gpu":"dGqg","../reverse_packed_gpu":"b6t2","./Identity":"Gwwj"}],"MkU1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RotateProgram=void 0;var o=require("@tensorflow/tfjs-core");class t{constructor(t,e,r,n){this.variableNames=["Image"],this.outputShape=[];const a=t[1],d=t[2],c=Math.sin(e).toFixed(3),u=Math.cos(e).toFixed(3);this.outputShape=t;const[i,s]=o.backend_util.getImageCenter(n,a,d),l=i.toFixed(3),f=s.toFixed(3);let p="";p="number"==typeof r?`float outputValue = ${r.toFixed(2)};`:`\n        vec3 fill = vec3(${r.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${l}) * ${u} - (float(y) - ${f}) * ${c};\n          float coordYFloat = (float(x) - ${l}) * ${c} + (float(y) - ${f}) * ${u};\n          int coordX = int(round(coordXFloat + ${l}));\n          int coordY = int(round(coordYFloat + ${f}));\n          ${p}\n          if(coordX >= 0 && coordX < ${d} && coordY >= 0 && coordY < ${a}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.RotateProgram=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"RJ8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../rotate_gpu");const r={kernelName:e.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:e,attrs:r,backend:o})=>{const{image:a}=e,{radians:n,fillValue:s,center:i}=r,f=o,u=new t.RotateProgram(a.shape,n,s,i);return f.runWebGLProgram(u,[a],a.dtype)}};exports.rotateWithOffsetConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../rotate_gpu":"MkU1"}],"QlOI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",o=(0,n.unaryKernelFunc)({opSnippet:r});exports.round=o;const s={kernelName:e.Round,backendName:"webgl",kernelFunc:o};exports.roundConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"y5S8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=exports.rsqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const t="return inversesqrt(x);",n=(0,r.unaryKernelFunc)({opSnippet:t,cpuKernelImpl:s.rsqrtImplCPU});exports.rsqrt=n;const l={kernelName:e.Rsqrt,backendName:"webgl",kernelFunc:n};exports.rsqrtConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"ugST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,n,o,s,r,d,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=d;const a=(0,e.getCoordsDataType)(r.length),u=(0,e.getCoordsDataType)(d.length);let l="";1===o?l="i":2===o&&(l="i, j");const c=`getIndices(${l})`;let f="";1===s?f="i":2===s&&(f="i, coords[1]");const p=`getUpdates(${f})`,$=n>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${n}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${$};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}exports.ScatterProgram=t;
},{"./shader_compiler":"DIKY"}],"ibAo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNd=r,exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../scatter_gpu"),s=require("./Reshape");function r(r){const{inputs:n,backend:a,attrs:o}=r,{indices:i,updates:p}=n,{shape:d}=o,{sliceRank:c,numUpdates:u,sliceSize:l,strides:f,outputSize:h}=e.backend_util.calculateShapes(p,i,d),k=[h/l,l];if(0===h)return a.makeTensorInfo(d,i.dtype);const m=(0,s.reshape)({inputs:{x:i},backend:a,attrs:{shape:[u,c]}}),I=(0,s.reshape)({inputs:{x:p},backend:a,attrs:{shape:[u,l]}}),b=a.makeTensorInfo([],"float32",new Float32Array([0])),g=new t.ScatterProgram(u,c,m.shape.length,I.shape.length,f,k),x=a.runWebGLProgram(g,[I,m,b],I.dtype),N=(0,s.reshape)({inputs:{x:x},backend:a,attrs:{shape:d}});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(b),N}const n={kernelName:e.ScatterNd,backendName:"webgl",kernelFunc:r};exports.scatterNdConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../scatter_gpu":"ugST","./Reshape":"k4TP"}],"CDzy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,r,s){let o,n;if(this.variableNames=["c","a","b"],this.outputShape=r,s>4)throw Error(`Where for rank ${s} is not yet supported`);if(1===s)n="resRC",o="resRC";else{const e=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[];for(let o=0;o<r.length;o++)a.push(`${e[o]}`),o<t&&s.push(`${e[o]}`);o=s.join(),n=a.join()}const a=(0,e.getCoordsDataType)(s);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${o});\n        if (cVal >= 1.0) {\n          setOutput(getA(${n}));\n        } else {\n          setOutput(getB(${n}));\n        }\n      }\n    `}}exports.SelectProgram=t;
},{"./shader_compiler":"DIKY"}],"I7xd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=r,exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../select_gpu");function r(r){const{inputs:n,backend:s}=r,{condition:o,t:c,e:l}=n,p=new t.SelectProgram(o.shape.length,c.shape,c.shape.length);return s.runWebGLProgram(p,[o,c,l],(0,e.upcastType)(c.dtype,l.dtype))}const n={kernelName:e.Select,backendName:"webgl",kernelFunc:r};exports.selectConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../select_gpu":"CDzy"}],"PKN0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${e.backend_util.SELU_SCALEALPHA};\n  float scale = ${e.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,l=(0,n.unaryKernelFunc)({opSnippet:t});exports.selu=l;const r={kernelName:e.Selu,backendName:"webgl",kernelFunc:l};exports.seluConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"m5AY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return 1.0 / (1.0 + exp(-1.0 * x));",i=(0,r.unaryKernelFunc)({opSnippet:o});exports.sigmoid=i;const s={kernelName:e.Sigmoid,backendName:"webgl",kernelFunc:i};exports.sigmoidConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"zXMg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sign=s;const i={kernelName:e.Sign,backendName:"webgl",kernelFunc:s};exports.signConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"mypX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r=n.CHECK_NAN_SNIPPET_UNARY+"\n  return sin(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sin=s;const t={kernelName:e.Sin,backendName:"webgl",kernelFunc:s};exports.sinConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"X9PA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sinh=s;const t={kernelName:e.Sinh,backendName:"webgl",kernelFunc:s};exports.sinhConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"lUJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const l="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",n=(0,o.unaryKernelFunc)({opSnippet:l});exports.softplus=n;const s={kernelName:e.Softplus,backendName:"webgl",kernelFunc:n};exports.softplusConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"zeUh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDConfig=exports.spaceToBatchND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./PadV2"),s=require("./Reshape"),a=require("./Transpose");const n=n=>{const{inputs:r,backend:p,attrs:c}=n,{x:o}=r,{blockShape:h,paddings:d}=c;e.util.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=h.reduce((e,t)=>e*t),i=[[0,0]];i.push(...d);for(let e=1+h.length;e<o.shape.length;++e)i.push([0,0]);const l=[],b=(0,t.padV2)({inputs:{x:o},backend:p,attrs:{paddings:i,constantValue:0}}),k=e.backend_util.getReshaped(b.shape,h,u,!1),g=e.backend_util.getPermuted(k.length,h.length,!1),x=e.backend_util.getReshapedPermuted(b.shape,h,u,!1),f=(0,s.reshape)({inputs:{x:b},backend:p,attrs:{shape:k}}),m=(0,a.transpose)({inputs:{x:f},backend:p,attrs:{perm:g}}),N=(0,s.reshape)({inputs:{x:m},backend:p,attrs:{shape:x}});return l.push(b),l.push(f),l.push(m),l.forEach(e=>p.disposeIntermediateTensorInfo(e)),N};exports.spaceToBatchND=n;const r={kernelName:e.SpaceToBatchND,backendName:"webgl",kernelFunc:n};exports.spaceToBatchNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./PadV2":"pC66","./Reshape":"k4TP","./Transpose":"hS8R"}],"VCsw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=t,exports.sparseToDenseConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../scatter_gpu"),r=require("./Reshape");function t(t){const{inputs:a,backend:n,attrs:o}=t,{sparseIndices:p,sparseValues:u,defaultValue:i}=a,{outputShape:c}=o,{sliceRank:l,numUpdates:d,strides:h,outputSize:f}=e.backend_util.calculateShapes(u,p,c),g=new s.ScatterProgram(d,l,p.shape.length,u.shape.length,h,[f,1],!1),b=n.runWebGLProgram(g,[u,p,i],u.dtype),k=(0,r.reshape)({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(b),k}const a={kernelName:e.SparseToDense,backendName:"webgl",kernelFunc:t};exports.sparseToDenseConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../scatter_gpu":"ugST","./Reshape":"k4TP"}],"Gbq7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,backend:i,attrs:n}=s,{x:a}=r,{numOrSizeSplits:l,axis:p}=n,o=e.util.parseAxisParam(p,a.shape)[0],c=e.backend_util.prepareSplitSize(a,l,o),u=a.shape.length,x=new Array(u).fill(0),b=a.shape.slice();return c.map(e=>{const s=[...b];s[o]=e;const r=(0,t.slice)({inputs:{x:a},backend:i,attrs:{begin:x,size:s}});return x[o]+=e,r})}const r={kernelName:e.SplitV,backendName:"webgl",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Slice":"uanA"}],"G8Yg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=exports.sqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const t="return sqrt(x);",s=(0,r.unaryKernelFunc)({opSnippet:t});exports.sqrt=s;const n={kernelName:e.Sqrt,backendName:"webgl",kernelFunc:s};exports.sqrtConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"aHQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=exports.square=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const s="return x * x;",n=(0,r.unaryKernelFunc)({opSnippet:s});exports.square=n;const t={kernelName:e.Square,backendName:"webgl",kernelFunc:n};exports.squareConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"OSij":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (a - b) * (a - b);",s=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n});exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"webgl",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"WvS0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=t,exports.stepConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../unaryop_gpu");function t({inputs:e,attrs:t,backend:n}){const{x:o}=e,s=r.CHECK_NAN_SNIPPET+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,p=new r.UnaryOpProgram(o.shape,s);return n.runWebGLProgram(p,[o],o.dtype)}const n={kernelName:e.Step,backendName:"webgl",kernelFunc:t};exports.stepConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../unaryop_gpu":"uzBV"}],"N1kZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StridedSliceProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,i=(0,e.getCoordsDataType)(r.length),d=(0,e.getCoordsDataType)(r.length);let n="";if(1===o)n="coords * strides + begin";else{let e=0;n=r.map((t,s)=>(e++,1===r.length?`coords * strides[${s}] + begin[${s}]`:`coords[${e-1}] * strides[${s}] + begin[${s}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${s});\n\n      void main() {\n        ${d} coords = getOutputCoords();\n        setOutput(getX(${n}));\n      }\n    `}}exports.StridedSliceProgram=t;
},{"./shader_compiler":"DIKY"}],"s4SJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=n,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/shared"),t=require("../strided_slice_gpu"),i=require("./Reshape"),r=require("./Slice");function n(n){const{inputs:a,backend:d,attrs:o}=n,{x:p}=a,{begin:l,end:c,strides:u,beginMask:f,endMask:k,ellipsisMask:b,newAxisMask:h,shrinkAxisMask:x}=o,{nonStrided:S,$begin:g,$strides:m,size:I,newShape:M,outShape:_}=e.slice_util.sliceInfo(p.shape,l,c,u,f,k,b,h,x),q=(0,i.reshape)({inputs:{x:p},backend:d,attrs:{shape:M}});let v;if(S){const e=(0,r.slice)({inputs:{x:q},backend:d,attrs:{begin:g,size:I}});v=(0,i.reshape)({inputs:{x:e},backend:d,attrs:{shape:_}}),d.disposeIntermediateTensorInfo(e)}else if(_.some(e=>0===e))v=d.makeTensorInfo(_,p.dtype,[]);else{if(d.shouldExecuteOnCPU([q])){const t=d.texData.get(q.dataId).values,i=(0,e.buffer)(q.shape,q.dtype,t),r=(0,s.stridedSliceImplCPU)(_,i,m,g);v=d.makeTensorInfo(_,q.dtype,r.values)}else{const e=new t.StridedSliceProgram(g,m,_);v=d.runWebGLProgram(e,[q],q.dtype)}}const w=(0,i.reshape)({inputs:{x:v},backend:d,attrs:{shape:_}});return d.disposeIntermediateTensorInfo(q),d.disposeIntermediateTensorInfo(v),w}const a={kernelName:e.StridedSlice,backendName:"webgl",kernelFunc:n};exports.stridedSliceConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../strided_slice_gpu":"N1kZ","./Reshape":"k4TP","./Slice":"uanA"}],"K2EB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return tan(x);",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tan=t;const o={kernelName:e.Tan,backendName:"webgl",kernelFunc:t};exports.tanConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"nmaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tanh=t;const o={kernelName:e.Tanh,backendName:"webgl",kernelFunc:t};exports.tanhConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"lZtF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TileProgram=void 0;var e=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*s[e];this.outputShape=o,this.rank=o.length;const n=(0,e.getCoordsDataType)(this.rank),i=t(r);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function t(e){const r=e.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(1===r)return`imod(resRC, ${e[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${t[o]}, ${e[o]})`);return s.join()}exports.TileProgram=r;
},{"./shader_compiler":"DIKY"}],"IeZJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=n,exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),t=require("../tile_gpu");function n(n){const{inputs:s,backend:i,attrs:o}=n,{x:a}=s,{reps:l}=o;if("string"===a.dtype){const t=i.readSync(a.dataId).map(r=>e.util.decodeString(r)),n=(0,e.buffer)(a.shape,a.dtype,t),s=(0,r.tileImplCPU)(n,l);return i.makeTensorInfo(s.shape,s.dtype,s.values)}const p=new t.TileProgram(a.shape,l);return i.runWebGLProgram(p,[a],a.dtype)}const s={kernelName:e.Tile,backendName:"webgl",kernelFunc:n};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../tile_gpu":"lZtF"}],"nadS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topK=o,exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared");function o(e){const{inputs:o,backend:r,attrs:s}=e,{x:n}=o,{k:a,sorted:p}=s,d=r.readSync(n.dataId),[u,l]=(0,t.topKImplCPU)(d,n.shape,n.dtype,a,p);return[r.makeTensorInfo(u.shape,u.dtype,u.values),r.makeTensorInfo(l.shape,l.dtype,l.values)]}const r={kernelName:e.TopK,backendName:"webgl",kernelFunc:o};exports.topKConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"Byf5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=o,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared"),t=require("../webgl_util");function o(e){const{inputs:o,attrs:r,backend:u}=e,{axis:s}=r,{x:i}=o;(0,t.assertNotComplex)(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=u.readSync(i.dataId),{outputValues:l,outputShape:d,indices:p}=(0,n.uniqueImplCPU)(a,s,i.shape,i.dtype);return[u.makeTensorInfo(d,i.dtype,l),u.makeTensorInfo([p.length],"int32",p)]}const r={kernelName:e.Unique,backendName:"webgl",kernelFunc:o};exports.uniqueConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../webgl_util":"p3g2"}],"Fia1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=t,exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Reshape"),s=require("./Slice");function t(e){const{inputs:t,backend:r,attrs:a}=e,{value:o}=t;let{axis:c}=a;c<0&&(c+=o.shape.length);const p=o,i=p.shape.length,l=o.shape[c],u=new Array(i-1);let h=0;for(let n=0;n<i;n++)n!==c&&(u[h++]=p.shape[n]);const f=[],k=new Array(i).fill(0),d=p.shape.slice();d[c]=1;const b=new Array(l);for(let g=0;g<b.length;g++){k[c]=g;const e=(0,s.slice)({inputs:{x:p},backend:r,attrs:{begin:k,size:d}}),t=(0,n.reshape)({inputs:{x:e},backend:r,attrs:{shape:u}});b[g]=t,f.push(e)}return f.forEach(e=>r.disposeIntermediateTensorInfo(e)),b}const r={kernelName:e.Unpack,backendName:"webgl",kernelFunc:t};exports.unpackConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP","./Slice":"uanA"}],"x8Mt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SegmentOpProgram=void 0;class n{constructor(n,e){this.variableNames=["x","segmentIds"];const t=n.windowSize,i=n.batchSize,a=n.inSize,d=n.numSegments,g=d*Math.ceil(a/t);this.outputShape=[i,g];const I=4*Math.floor(t/4),l=t%4,u="\n        sumValue += dot(values, segFilter);\n    ";let r="";a%t>0&&(r=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%t>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${r}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${d})) * float(${t}));\n        int currentSeg = int(mod(float(outIdx), float(${d})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${I}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${I};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.SegmentOpProgram=n;
},{}],"bWqJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=a,exports.unsortedSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../segment_gpu"),n=require("./Range"),s=require("./Reshape"),r=require("./Tile"),u=require("./Transpose");function a(a){const{inputs:p,backend:o,attrs:i}=a,{x:m,segmentIds:c}=p,{numSegments:d}=i,l=m.shape.length,g=[];let h=0;const S=e.backend_util.getAxesPermutation([h],l);let b=m;null!=S&&(b=(0,u.transpose)({inputs:{x:m},backend:o,attrs:{perm:S}}),g.push(b),h=e.backend_util.getInnerMostAxes(1,l)[0]);const k=e.backend_util.segment_util.computeOutShape(b.shape,h,d),x=e.util.sizeFromShape([b.shape[h]]),f=(0,s.reshape)({inputs:{x:b},backend:o,attrs:{shape:[-1,x]}});g.push(f);const _=(0,e.sumOutType)(m.dtype),q=(s,u,a,p,i)=>{const m=s.shape[0],c=s.shape[1],d=e.backend_util.segment_util.segOpComputeOptimalWindowSize(c,i),l={windowSize:d,inSize:c,batchSize:m,numSegments:i},h=new t.SegmentOpProgram(l,u),S=o.compileAndRun(h,[s,a],p);if(g.push(S),S.shape[1]===i)return S;const b=(0,n.range)({backend:o,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),k=(0,r.tile)({inputs:{x:b},backend:o,attrs:{reps:[c/d]}});return g.push(b),g.push(k),q(S,u,k,p,i)},w=q(f,"unsortedSegmentSum",c,_,d),O=(0,s.reshape)({inputs:{x:w},backend:o,attrs:{shape:k}});let z=O;if(null!=S){g.push(O);const t=e.backend_util.getUndoAxesPermutation(S);z=(0,u.transpose)({inputs:{x:z},backend:o,attrs:{perm:t}})}return g.forEach(e=>o.disposeIntermediateTensorInfo(e)),z}const p={kernelName:e.UnsortedSegmentSum,backendName:"webgl",kernelFunc:a};exports.unsortedSegmentSumConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../segment_gpu":"x8Mt","./Range":"QYnk","./Reshape":"k4TP","./Tile":"IeZJ","./Transpose":"hS8R"}],"FAdT":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),s=require("./kernels/Add"),l=require("./kernels/AddN"),u=require("./kernels/All"),g=require("./kernels/Any"),a=require("./kernels/ArgMax"),f=require("./kernels/ArgMin"),C=require("./kernels/Asin"),k=require("./kernels/Asinh"),q=require("./kernels/Atan"),t=require("./kernels/Atan2"),p=require("./kernels/Atanh"),c=require("./kernels/AvgPool"),d=require("./kernels/AvgPool3D"),m=require("./kernels/AvgPool3DGrad"),D=require("./kernels/AvgPoolGrad"),h=require("./kernels/BatchMatMul"),v=require("./kernels/BatchNorm"),N=require("./kernels/BatchToSpaceND"),x=require("./kernels/Bincount"),S=require("./kernels/Cast"),M=require("./kernels/Ceil"),P=require("./kernels/ClipByValue"),A=require("./kernels/Complex"),B=require("./kernels/ComplexAbs"),R=require("./kernels/Concat"),F=require("./kernels/Conv2D"),G=require("./kernels/Conv2DBackpropFilter"),L=require("./kernels/Conv2DBackpropInput"),V=require("./kernels/Conv3D"),T=require("./kernels/Conv3DBackpropFilterV2"),b=require("./kernels/Conv3DBackpropInputV2"),I=require("./kernels/Cos"),E=require("./kernels/Cosh"),w=require("./kernels/CropAndResize"),z=require("./kernels/Cumsum"),y=require("./kernels/DenseBincount"),O=require("./kernels/DepthToSpace"),W=require("./kernels/DepthwiseConv2dNative"),K=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),U=require("./kernels/DepthwiseConv2dNativeBackpropInput"),H=require("./kernels/Diag"),_=require("./kernels/Dilation2D"),j=require("./kernels/Elu"),Z=require("./kernels/EluGrad"),J=require("./kernels/Equal"),Q=require("./kernels/Erf"),X=require("./kernels/Exp"),Y=require("./kernels/ExpandDims"),$=require("./kernels/Expm1"),ee=require("./kernels/FFT"),re=require("./kernels/Fill"),ie=require("./kernels/FlipLeftRight"),ne=require("./kernels/Floor"),oe=require("./kernels/FloorDiv"),se=require("./kernels/FromPixels"),le=require("./kernels/FusedConv2D"),ue=require("./kernels/FusedDepthwiseConv2D"),ge=require("./kernels/GatherNd"),ae=require("./kernels/GatherV2"),fe=require("./kernels/Greater"),Ce=require("./kernels/GreaterEqual"),ke=require("./kernels/Identity"),qe=require("./kernels/IFFT"),te=require("./kernels/Imag"),pe=require("./kernels/IsFinite"),ce=require("./kernels/IsInf"),de=require("./kernels/IsNaN"),me=require("./kernels/LeakyRelu"),De=require("./kernels/Less"),he=require("./kernels/LessEqual"),ve=require("./kernels/LinSpace"),Ne=require("./kernels/Log"),xe=require("./kernels/Log1p"),Se=require("./kernels/LogicalAnd"),Me=require("./kernels/LogicalNot"),Pe=require("./kernels/LogicalOr"),Ae=require("./kernels/LRN"),Be=require("./kernels/LRNGrad"),Re=require("./kernels/Max"),Fe=require("./kernels/Maximum"),Ge=require("./kernels/MaxPool"),Le=require("./kernels/MaxPool3D"),Ve=require("./kernels/MaxPool3DGrad"),Te=require("./kernels/MaxPoolGrad"),be=require("./kernels/MaxPoolWithArgmax"),Ie=require("./kernels/Mean"),Ee=require("./kernels/Min"),we=require("./kernels/Minimum"),ze=require("./kernels/MirrorPad"),ye=require("./kernels/Mod"),Oe=require("./kernels/Multinomial"),We=require("./kernels/Multiply"),Ke=require("./kernels/Neg"),Ue=require("./kernels/NonMaxSuppressionV3"),He=require("./kernels/NonMaxSuppressionV4"),_e=require("./kernels/NonMaxSuppressionV5"),je=require("./kernels/NotEqual"),Ze=require("./kernels/OneHot"),Je=require("./kernels/OnesLike"),Qe=require("./kernels/Pack"),Xe=require("./kernels/PadV2"),Ye=require("./kernels/Pow"),$e=require("./kernels/Prelu"),er=require("./kernels/Prod"),rr=require("./kernels/Range"),ir=require("./kernels/Real"),nr=require("./kernels/RealDiv"),or=require("./kernels/Reciprocal"),sr=require("./kernels/Relu"),lr=require("./kernels/Relu6"),ur=require("./kernels/Reshape"),gr=require("./kernels/ResizeBilinear"),ar=require("./kernels/ResizeBilinearGrad"),fr=require("./kernels/ResizeNearestNeighbor"),Cr=require("./kernels/ResizeNearestNeighborGrad"),kr=require("./kernels/Reverse"),qr=require("./kernels/RotateWithOffset"),tr=require("./kernels/Round"),pr=require("./kernels/Rsqrt"),cr=require("./kernels/ScatterNd"),dr=require("./kernels/Select"),mr=require("./kernels/Selu"),Dr=require("./kernels/Sigmoid"),hr=require("./kernels/Sign"),vr=require("./kernels/Sin"),Nr=require("./kernels/Sinh"),xr=require("./kernels/Slice"),Sr=require("./kernels/Softmax"),Mr=require("./kernels/Softplus"),Pr=require("./kernels/SpaceToBatchND"),Ar=require("./kernels/SparseToDense"),Br=require("./kernels/SplitV"),Rr=require("./kernels/Sqrt"),Fr=require("./kernels/Square"),Gr=require("./kernels/SquaredDifference"),Lr=require("./kernels/Step"),Vr=require("./kernels/StridedSlice"),Tr=require("./kernels/Sub"),br=require("./kernels/Sum"),Ir=require("./kernels/Tan"),Er=require("./kernels/Tanh"),wr=require("./kernels/Tile"),zr=require("./kernels/TopK"),yr=require("./kernels/Transpose"),Or=require("./kernels/Unique"),Wr=require("./kernels/Unpack"),Kr=require("./kernels/UnsortedSegmentSum"),Ur=require("./kernels/ZerosLike");const Hr=[Ae.LRNConfig,Be.LRNGradConfig,r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,s.addConfig,l.addNConfig,u.allConfig,g.anyConfig,a.argMaxConfig,f.argMinConfig,C.asinConfig,k.asinhConfig,t.atan2Config,q.atanConfig,p.atanhConfig,d.avgPool3DConfig,c.avgPoolConfig,m.avgPoolGrad3DConfig,D.avgPoolGradConfig,h.batchMatMulConfig,v.batchNormConfig,N.batchToSpaceNDConfig,x.bincountConfig,S.castConfig,M.ceilConfig,P.clipByValueConfig,B.complexAbsConfig,A.complexConfig,R.concatConfig,G.conv2DBackpropFilterConfig,L.conv2DBackpropInputConfig,F.conv2DConfig,T.conv3DBackpropFilterV2Config,b.conv3DBackpropInputConfig,V.conv3DConfig,I.cosConfig,E.coshConfig,w.cropAndResizeConfig,z.cumsumConfig,y.denseBincountConfig,O.depthToSpaceConfig,K.depthwiseConv2dNativeBackpropFilterConfig,U.depthwiseConv2dNativeBackpropInputConfig,W.depthwiseConv2dNativeConfig,H.diagConfig,_.dilation2DConfig,j.eluConfig,Z.eluGradConfig,J.equalConfig,Q.erfConfig,X.expConfig,Y.expandDimsConfig,$.expm1Config,ee.fftConfig,re.fillConfig,ie.flipLeftRightConfig,ne.floorConfig,oe.floorDivConfig,se.fromPixelsConfig,le.fusedConv2DConfig,ue.fusedDepthwiseConv2DConfig,ge.gatherNdConfig,ae.gatherV2Config,fe.greaterConfig,Ce.greaterEqualConfig,ke.identityConfig,qe.ifftConfig,te.imagConfig,pe.isFiniteConfig,ce.isInfConfig,de.isNaNConfig,me.leakyReluConfig,De.lessConfig,he.lessEqualConfig,ve.linSpaceConfig,xe.log1pConfig,Ne.logConfig,Se.logicalAndConfig,Me.logicalNotConfig,Pe.logicalOrConfig,Re.maxConfig,Le.maxPool3DConfig,Ge.maxPoolConfig,Ve.maxPoolGrad3DConfig,Te.maxPoolGradConfig,be.maxPoolWithArgmaxConfig,Fe.maximumConfig,Ie.meanConfig,Ee.minConfig,we.minimumConfig,ze.mirrorPadConfig,ye.modConfig,Oe.multinomialConfig,We.multiplyConfig,Ke.negConfig,Ue.nonMaxSuppressionV3Config,He.nonMaxSuppressionV4Config,_e.nonMaxSuppressionV5Config,je.notEqualConfig,Ze.oneHotConfig,Je.onesLikeConfig,Qe.packConfig,Xe.padV2Config,Ye.powConfig,$e.preluConfig,er.prodConfig,rr.rangeConfig,ir.realConfig,nr.realDivConfig,or.reciprocalConfig,lr.relu6Config,sr.reluConfig,ur.reshapeConfig,gr.resizeBilinearConfig,ar.resizeBilinearGradConfig,fr.resizeNearestNeighborConfig,Cr.resizeNearestNeighborGradConfig,kr.reverseConfig,qr.rotateWithOffsetConfig,tr.roundConfig,pr.rsqrtConfig,cr.scatterNdConfig,dr.selectConfig,mr.seluConfig,Dr.sigmoidConfig,hr.signConfig,vr.sinConfig,Nr.sinhConfig,xr.sliceConfig,Sr.softmaxConfig,Mr.softplusConfig,Pr.spaceToBatchNDConfig,Ar.sparseToDenseConfig,Br.splitVConfig,Rr.sqrtConfig,Fr.squareConfig,Gr.squaredDifferenceConfig,Lr.stepConfig,Vr.stridedSliceConfig,Tr.subConfig,br.sumConfig,Ir.tanConfig,Er.tanhConfig,wr.tileConfig,zr.topKConfig,yr.transposeConfig,Or.uniqueConfig,Wr.unpackConfig,Kr.unsortedSegmentSumConfig,Ur.zerosLikeConfig];for(const _r of Hr)(0,e.registerKernel)(_r);
},{"@tensorflow/tfjs-core":"tc6m","./kernels/_FusedMatMul":"xSMk","./kernels/Abs":"cuxj","./kernels/Acos":"FCN5","./kernels/Acosh":"WORC","./kernels/Add":"qsoR","./kernels/AddN":"hFFr","./kernels/All":"n0H3","./kernels/Any":"VDwi","./kernels/ArgMax":"ZL6O","./kernels/ArgMin":"cvsE","./kernels/Asin":"UkOR","./kernels/Asinh":"HHor","./kernels/Atan":"zhx4","./kernels/Atan2":"kDp7","./kernels/Atanh":"b0w5","./kernels/AvgPool":"LyOc","./kernels/AvgPool3D":"ZH0i","./kernels/AvgPool3DGrad":"XJOJ","./kernels/AvgPoolGrad":"EkY0","./kernels/BatchMatMul":"trp3","./kernels/BatchNorm":"f4ut","./kernels/BatchToSpaceND":"CeXw","./kernels/Bincount":"gQI3","./kernels/Cast":"JirG","./kernels/Ceil":"E0aZ","./kernels/ClipByValue":"IbyP","./kernels/Complex":"vWXR","./kernels/ComplexAbs":"Kuhq","./kernels/Concat":"SH0J","./kernels/Conv2D":"lE4o","./kernels/Conv2DBackpropFilter":"r9Be","./kernels/Conv2DBackpropInput":"cVvr","./kernels/Conv3D":"AezV","./kernels/Conv3DBackpropFilterV2":"lhL0","./kernels/Conv3DBackpropInputV2":"BTZj","./kernels/Cos":"nlDp","./kernels/Cosh":"Bb26","./kernels/CropAndResize":"ECMk","./kernels/Cumsum":"elV2","./kernels/DenseBincount":"MOld","./kernels/DepthToSpace":"WKMn","./kernels/DepthwiseConv2dNative":"UmRJ","./kernels/DepthwiseConv2dNativeBackpropFilter":"pKxb","./kernels/DepthwiseConv2dNativeBackpropInput":"RVP9","./kernels/Diag":"nCDM","./kernels/Dilation2D":"exAg","./kernels/Elu":"Xush","./kernels/EluGrad":"O3E0","./kernels/Equal":"btqb","./kernels/Erf":"a80B","./kernels/Exp":"gRCN","./kernels/ExpandDims":"LRvM","./kernels/Expm1":"vGDz","./kernels/FFT":"Bx4q","./kernels/Fill":"vLYI","./kernels/FlipLeftRight":"gRW5","./kernels/Floor":"Yy57","./kernels/FloorDiv":"rAwh","./kernels/FromPixels":"MRz7","./kernels/FusedConv2D":"sHbe","./kernels/FusedDepthwiseConv2D":"yLUC","./kernels/GatherNd":"oqms","./kernels/GatherV2":"ZQ9T","./kernels/Greater":"yKvx","./kernels/GreaterEqual":"AkAn","./kernels/Identity":"Gwwj","./kernels/IFFT":"Z5jD","./kernels/Imag":"U9t0","./kernels/IsFinite":"uPGo","./kernels/IsInf":"EVDd","./kernels/IsNaN":"amu0","./kernels/LeakyRelu":"eiHO","./kernels/Less":"j3SB","./kernels/LessEqual":"PgfX","./kernels/LinSpace":"sU1o","./kernels/Log":"cxva","./kernels/Log1p":"VTAF","./kernels/LogicalAnd":"QvN7","./kernels/LogicalNot":"wovn","./kernels/LogicalOr":"M59B","./kernels/LRN":"MLAU","./kernels/LRNGrad":"z49d","./kernels/Max":"SOPS","./kernels/Maximum":"IMhY","./kernels/MaxPool":"I2MZ","./kernels/MaxPool3D":"fXYl","./kernels/MaxPool3DGrad":"Vwrr","./kernels/MaxPoolGrad":"iKnw","./kernels/MaxPoolWithArgmax":"yFKv","./kernels/Mean":"rbfu","./kernels/Min":"xq7h","./kernels/Minimum":"GafU","./kernels/MirrorPad":"iBor","./kernels/Mod":"B26M","./kernels/Multinomial":"Zmu3","./kernels/Multiply":"dTvy","./kernels/Neg":"Tjo1","./kernels/NonMaxSuppressionV3":"GVyX","./kernels/NonMaxSuppressionV4":"DAkH","./kernels/NonMaxSuppressionV5":"VwrN","./kernels/NotEqual":"m7Px","./kernels/OneHot":"wBT7","./kernels/OnesLike":"VyEl","./kernels/Pack":"pf3x","./kernels/PadV2":"pC66","./kernels/Pow":"hHx4","./kernels/Prelu":"k80A","./kernels/Prod":"qRnd","./kernels/Range":"QYnk","./kernels/Real":"mH9E","./kernels/RealDiv":"aUUN","./kernels/Reciprocal":"Pc2w","./kernels/Relu":"SV6U","./kernels/Relu6":"JPeF","./kernels/Reshape":"k4TP","./kernels/ResizeBilinear":"u0TF","./kernels/ResizeBilinearGrad":"bVdd","./kernels/ResizeNearestNeighbor":"UWlN","./kernels/ResizeNearestNeighborGrad":"V6wq","./kernels/Reverse":"AqaL","./kernels/RotateWithOffset":"RJ8j","./kernels/Round":"QlOI","./kernels/Rsqrt":"y5S8","./kernels/ScatterNd":"ibAo","./kernels/Select":"I7xd","./kernels/Selu":"PKN0","./kernels/Sigmoid":"m5AY","./kernels/Sign":"zXMg","./kernels/Sin":"mypX","./kernels/Sinh":"X9PA","./kernels/Slice":"uanA","./kernels/Softmax":"YZuw","./kernels/Softplus":"lUJN","./kernels/SpaceToBatchND":"zeUh","./kernels/SparseToDense":"VCsw","./kernels/SplitV":"Gbq7","./kernels/Sqrt":"G8Yg","./kernels/Square":"aHQY","./kernels/SquaredDifference":"OSij","./kernels/Step":"WvS0","./kernels/StridedSlice":"s4SJ","./kernels/Sub":"MkXb","./kernels/Sum":"RVri","./kernels/Tan":"K2EB","./kernels/Tanh":"nmaU","./kernels/Tile":"IeZJ","./kernels/TopK":"nadS","./kernels/Transpose":"hS8R","./kernels/Unique":"Byf5","./kernels/Unpack":"Fia1","./kernels/UnsortedSegmentSum":"bWqJ","./kernels/ZerosLike":"PG0L"}],"kg9U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_kernels");
},{"./base":"yAt8","./register_all_kernels":"FAdT"}],"fHyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,data:!0};exports.data=exports.version=void 0;var r=require("@tensorflow/tfjs-core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("@tensorflow/tfjs-layers");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("@tensorflow/tfjs-converter");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=u(require("@tensorflow/tfjs-data"));exports.data=n;var s=require("@tensorflow/tfjs-backend-cpu"),a=require("@tensorflow/tfjs-backend-webgl"),f=require("./version");function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const i={"tfjs-core":r.version_core,"tfjs-backend-cpu":s.version_cpu,"tfjs-backend-webgl":a.version_webgl,"tfjs-data":n.version_data,"tfjs-layers":t.version_layers,"tfjs-converter":o.version_converter,tfjs:f.version};exports.version=i;
},{"@tensorflow/tfjs-core":"tc6m","@tensorflow/tfjs-layers":"pLvv","@tensorflow/tfjs-converter":"OiNd","@tensorflow/tfjs-data":"zesW","@tensorflow/tfjs-backend-cpu":"hUUT","@tensorflow/tfjs-backend-webgl":"kg9U","./version":"SdA6"}],"rohI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.auxiliaryInputFromSpec=n,exports.BinaryCounter=exports.AuxiliaryInput=void 0;var t=r(require("@tensorflow/tfjs"));function e(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(e=function(t){return t?n:r})(t)}function r(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e(r);if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var i=u?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(o,s,i):o[s]=t[s]}return o.default=t,n&&n.set(t,o),o}function n(t){switch(t.type){case"BinaryCounter":return new u(t.args);default:throw new Error(`Unknown auxiliary input: ${t}`)}}class o{constructor(t){this.depth=t}}exports.AuxiliaryInput=o;class u extends o{constructor(t){super(t.numBits)}getTensors(e){const r=t.buffer([e,this.depth]);for(let t=0;t<e;++t)for(let e=0;e<this.depth;++e)r.set(Math.floor((t+1)/Math.pow(2,e))%2?1:-1,t,e);return r.toTensor().as2D(e,this.depth)}}exports.BinaryCounter=u;
},{"@tensorflow/tfjs":"fHyk"}],"lsVQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tokenize=u,exports.fromMidi=O,exports.enharmonic=exports.simplify=exports.build=exports.from=exports.altToAcc=exports.stepToLetter=exports.oct=exports.chroma=exports.freqToMidi=exports.freq=exports.midiToFreq=exports.midi=exports.pc=exports.name=exports.props=exports.names=void 0;var r="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),t=function(t){return"string"!=typeof t?r.slice():r.filter(function(r){var e=r[1]||" ";return-1!==t.indexOf(e)})};exports.names=t;var e=t(" #"),n=t(" b"),o=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function u(r){"string"!=typeof r&&(r="");var t=o.exec(r);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var i=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),l=[0,2,4,5,7,9,11],a=function(r){var t=u(r);if(""===t[0]||""!==t[3])return i;var e=t[0],n=t[1],o=t[2],a={letter:e,acc:n,octStr:o,pc:e+n,name:e+n+o,step:(e.charCodeAt(0)+3)%7,alt:"b"===n[0]?-n.length:n.length,oct:o.length?+o:null,chroma:0,midi:null,freq:null};return a.chroma=(l[a.step]+a.alt+120)%12,a.midi=null!==a.oct?l[a.step]+a.alt+12*(a.oct+1):null,a.freq=m(a.midi),Object.freeze(a)},p=function(r,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=r(e))}},c=p(a);exports.props=c;var s=function(r){return c(r).name};exports.name=s;var f=function(r){return c(r).pc};exports.pc=f;var x=function(r){return r>=0&&r<=127},v=function(r){if("number"!=typeof r&&"string"!=typeof r)return null;var t=c(r).midi,e=t||0===t?t:+r;return x(e)?e:null};exports.midi=v;var m=function(r,t){return void 0===t&&(t=440),"number"==typeof r?Math.pow(2,(r-69)/12)*t:null};exports.midiToFreq=m;var d=function(r){return c(r).freq||m(r)};exports.freq=d;var h=Math.log(2),b=Math.log(440),g=function(r){var t=12*(Math.log(r)-b)/h+69;return Math.round(100*t)/100};exports.freqToMidi=g;var y=function(r){return c(r).chroma};exports.chroma=y;var M=function(r){return c(r).oct};exports.oct=M;var q="CDEFGAB",A=function(r){return q[r]};exports.stepToLetter=A;var T=function(r,t){return Array(t+1).join(r)},j=function(r,t){return"number"!=typeof r?"":t(r)},C=function(r){return j(r,function(r){return r<0?T("b",-r):T("#",r)})};exports.altToAcc=C;var F=function(r,t){void 0===r&&(r={}),void 0===t&&(t=null);var e=t?Object.assign({},c(t),r):r,n=e.step,o=e.alt,u=e.oct;if("number"!=typeof n)return null;var i=A(n);if(!i)return null;var l=i+C(o);return u||0===u?l+u:l};exports.from=F;var G=F;function O(r,t){return void 0===t&&(t=!1),r=Math.round(r),(!0===t?e:n)[r%12]+(Math.floor(r/12)-1)}exports.build=G;var D=function(r,t){void 0===t&&(t=!0);var e=c(r),n=e.alt,o=e.chroma,u=e.midi;if(null===o)return null;var i=!1===t?n<0:n>0;return null===u?f(O(o,i)):O(u,i)};exports.simplify=D;var z=function(r){return D(r,!1)};exports.enharmonic=z;
},{}],"ICs3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=e,exports.rotate=o,exports.sort=c,exports.unique=a,exports.permutations=exports.shuffle=exports.compact=void 0;var r=require("tonal-note");function t(r,t){for(var n=[];t--;n[t]=t+r);return n}function n(r,t){for(var n=[];t--;n[t]=r-t);return n}function e(r,e){return null===r||null===e?[]:r<e?t(r,e-r+1):n(r,r-e+1)}function o(r,t){var n=t.length,e=(r%n+n)%n;return t.slice(e,n).concat(t.slice(0,e))}var u=function(r){return r.filter(function(r){return 0===r||r})};exports.compact=u;var i=function(t){var n=(0,r.props)(t).midi;return null!==n?n:(0,r.props)(t+"-100").midi};function c(t){return u(t.map(r.name)).sort(function(r,t){return i(r)>i(t)})}function a(r){return c(r).filter(function(r,t,n){return 0===t||r!==n[t-1]})}var s=function(r,t){var n,e;void 0===t&&(t=Math.random);for(var o=r.length;o;)n=t()*o--|0,e=r[o],r[o]=r[n],r[n]=e;return r};exports.shuffle=s;var f=function(r){return 0===r.length?[[]]:f(r.slice(1)).reduce(function(t,n){return t.concat(r.map(function(t,e){var o=n.slice();return o.splice(e,0,r[0]),o}))},[])};exports.permutations=f;
},{"tonal-note":"lsVQ"}],"a5qI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.props=d,exports.fromSemitones=exports.invert=exports.simplify=exports.build=exports.ic=exports.chroma=exports.semitones=exports.name=exports.num=exports.altToQ=exports.qToAlt=exports.tokenize=exports.names=void 0;var t="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",e="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+t+"|"+e+"$"),n=[0,2,4,5,7,9,11],o="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],s="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),l=function(t){return"string"!=typeof t?s.slice():s.filter(function(e){return-1!==t.indexOf(e[1])})};exports.names=l;var i=function(t){var e=r.exec(""+t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]};exports.tokenize=i;var a=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),p=function(t,e){return Array(Math.abs(e)+1).join(t)},m=function(t,e){return"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null};exports.qToAlt=m;var c=function(t,e){return 0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?p("A",e):e<0?p("d","P"===t?e:e+1):null};exports.altToQ=c;var f=function(t){return(Math.abs(t)-1)%7},v=function(t){var e=i(t);if(null===e)return a;var r={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return r.num=+e[0],r.q=e[1],r.step=f(r.num),r.type=o[r.step],"M"===r.type&&"P"===r.q?a:(r.name=""+r.num+r.q,r.dir=r.num<0?-1:1,r.simple=8===r.num||-8===r.num?r.num:r.dir*(r.step+1),r.alt=m(r.type,r.q),r.oct=Math.floor((Math.abs(r.num)-1)/7),r.semitones=r.dir*(n[r.step]+r.alt+12*r.oct),r.chroma=(r.dir*(n[r.step]+r.alt)%12+12)%12,Object.freeze(r))},x={};function d(t){return"string"!=typeof t?a:x[t]||(x[t]=v(t))}var M=function(t){return d(t).num};exports.num=M;var P=function(t){return d(t).name};exports.name=P;var h=function(t){return d(t).semitones};exports.semitones=h;var y=function(t){return d(t).chroma};exports.chroma=y;var b=function(t){return"string"==typeof t&&(t=d(t).chroma),"number"==typeof t?u[t%12]:null};exports.ic=b;var q=function(t){var e=void 0===t?{}:t,r=e.num,n=e.step,u=e.alt,s=e.oct,l=void 0===s?1:s,i=e.dir;if(void 0!==n&&(r=n+1+7*l),void 0===r)return null;if("number"!=typeof u)return null;var a="number"!=typeof i?"":i<0?"-":"",p=o[f(r)];return a+r+c(p,u)};exports.build=q;var A=function(t){var e=d(t);if(e===a)return null;var r=e;return r.simple+r.q};exports.simplify=A;var g=function(t){var e=d(t);if(e===a)return null;var r=e,n=(7-r.step)%7,o="P"===r.type?-r.alt:-(r.alt+1);return q({step:n,alt:o,oct:r.oct,dir:r.dir})};exports.invert=g;var j=[1,2,2,3,3,4,5,5,6,6,7,7],z="P m M m M P d P m M m M".split(" "),O=function(t){var e=t<0?-1:1,r=Math.abs(t),n=r%12,o=Math.floor(r/12);return e*(j[n]+7*o)+z[n]};exports.fromSemitones=O;
},{}],"tvuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=v,exports.trFifths=h,exports.fifths=d,exports.transposeBy=g,exports.addIntervals=b,exports.add=M,exports.subtract=q,exports.interval=y,exports.semitones=_;var n=require("tonal-note"),r=require("tonal-interval"),t=[0,2,4,-1,1,3,5],u=function(n){return Math.floor(7*n/12)},e=t.map(u),l=function(n){var r=n.step,u=n.alt,l=n.oct,o=n.dir;void 0===o&&(o=1);var i=t[r]+7*u;return null===l?[o*i]:[o*i,o*(l-e[r]-4*u)]},o=[3,0,4,1,5,2,6];function i(n){var r=(n+1)%7;return r<0?7+r:r}var f=function(n,r,t){var u=o[i(n)],l=Math.floor((n+1)/7);return void 0===r?{step:u,alt:l,dir:t}:{step:u,alt:l,oct:r+4*l+e[u],dir:t}},a=function(n,r){return void 0===r&&(r={}),function(t){return r[t]||(r[t]=n(t))}},c=function(n){return a(function(r){var t=n(r);return null===t.name?null:l(t)})},s=c(n.props),p=c(r.props);function v(r,t){if(1===arguments.length)return function(n){return v(r,n)};var u=s(r),e=p(t);if(null===u||null===e)return null;var l=1===u.length?[u[0]+e[0]]:[u[0]+e[0],u[1]+e[1]];return(0,n.build)(f(l[0],l[1]))}function h(r,t){if(1===arguments.length)return function(n){return h(r,n)};var u=s(r);return null===u?null:(0,n.build)(f(u[0]+t))}function d(n,r){if(1===arguments.length)return function(r){return d(n,r)};var t=s(n),u=s(r);return null===u||null===t?null:u[0]-t[0]}function g(n,r){return 1===arguments.length?function(r){return v(r,n)}:v(r,n)}var m=function(n){return 7*n[0]+12*n[1]<0},x=function(n){return m(n)?f(-n[0],-n[1],-1):f(n[0],n[1],1)};function b(n,t,u){var e=p(n),l=p(t);if(null===e||null===l)return null;var o=[e[0]+u*l[0],e[1]+u*l[1]];return(0,r.build)(x(o))}function M(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,1)}function q(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,-1)}function y(n,t){if(1===arguments.length)return function(r){return y(n,r)};var u=s(n),e=s(t);if(null===u||null===e||u.length!==e.length)return null;var l=1===u.length?[e[0]-u[0],-Math.floor(7*(e[0]-u[0])/12)]:[e[0]-u[0],e[1]-u[1]];return(0,r.build)(x(l))}function _(r,t){if(1===arguments.length)return function(n){return _(r,n)};var u=(0,n.props)(r),e=(0,n.props)(t);return null!==u.midi&&null!==e.midi?e.midi-u.midi:null!==u.chroma&&null!==e.chroma?(e.chroma-u.chroma+12)%12:null}
},{"tonal-note":"lsVQ","tonal-interval":"a5qI"}],"figa":[function(require,module,exports) {
module.exports={chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished:["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]};
},{}],"FpUa":[function(require,module,exports) {
module.exports={4:["1P 4P 7m 10m",["quartal"]],64:["5P 8P 10M"],5:["1P 5P"],M:["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],Maddb9:["1P 3M 5P 9m"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"]};
},{}],"ObyF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=i,exports.chromas=a,exports.modes=f,exports.isChroma=l,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=v,exports.includes=g,exports.filter=d;var r=require("tonal-note"),n=require("tonal-interval"),t=require("tonal-array"),e=function(t){return(0,r.chroma)(t)||(0,n.chroma)(t)||0},u=function(r){return parseInt(i(r),2)},o=function(r){return r.replace(/0/g,"").length};function i(r){if(l(r))return r;if(!Array.isArray(r))return"";var n=[0,0,0,0,0,0,0,0,0,0,0,0];return r.map(e).forEach(function(r){n[r]=1}),n.join("")}var c=null;function a(r){return c=c||(0,t.range)(2048,4095).map(function(r){return r.toString(2)}),"number"==typeof r?c.filter(function(n){return o(n)===r}):c.slice()}function f(r,n){n=!1!==n;var e=i(r).split("");return(0,t.compact)(e.map(function(r,u){var o=(0,t.rotate)(u,e);return n&&"0"===o[0]?null:o.join("")}))}var s=/^[01]{12}$/;function l(r){return s.test(r)}var p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(r){return l(r)?(0,t.compact)(r.split("").map(function(r,n){return"1"===r?p[n]:null})):[]}function h(r,n){return 1===arguments.length?function(n){return h(r,n)}:i(r)===i(n)}function x(r,n){return arguments.length>1?x(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n&r)===n})}function v(r,n){return arguments.length>1?v(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n|r)===n})}function g(r,n){return arguments.length>1?g(r)(n):(r=i(r),function(n){return"1"===r[e(n)]})}function d(r,n){return 1===arguments.length?function(n){return d(r,n)}:n.filter(g(r))}
},{"tonal-note":"lsVQ","tonal-interval":"a5qI","tonal-array":"ICs3"}],"FKU5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pcset=exports.chord=exports.scale=exports.combine=exports.dictionary=void 0;var e=n(require("./data/scales.json")),r=n(require("./data/chords.json")),t=require("tonal-pcset");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var r=Object.keys(e).sort(),n=[],o=[],s=function(e,r,t){n[e]=r,o[t]=o[t]||[],o[t].push(e)};r.forEach(function(r){var n=e[r][0].split(" "),o=e[r][1],c=(0,t.chroma)(n);s(r,n,c),o&&o.forEach(function(e){return s(e,n,c)})});var c=Object.keys(n).sort(),a=function(e){return n[e]};return a.names=function(e){return"string"==typeof e?(o[e]||[]).slice():(!0===e?c:r).slice()},a};exports.dictionary=o;var s=function(e,r){var t=function(t){return e(t)||r(t)};return t.names=function(t){return e.names(t).concat(r.names(t))},t};exports.combine=s;var c=o(e.default);exports.scale=c;var a=o(r.default);exports.chord=a;var u=s(c,a);exports.pcset=u;
},{"./data/scales.json":"figa","./data/chords.json":"FpUa","tonal-pcset":"ObyF"}],"tcHv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.exists=f,exports.tokenize=m,exports.subsets=exports.supersets=exports.toScale=exports.chords=exports.modeNames=exports.intervals=exports.names=exports.props=void 0;var e=require("tonal-note"),r=require("tonal-pcset"),t=require("tonal-distance"),n=require("tonal-dictionary"),s=require("tonal-array"),a=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),o=function(e){var t=(0,n.scale)(e);if(!t)return a;var s={intervals:t,name:e};return s.chroma=(0,r.chroma)(t),s.setnum=parseInt(s.chroma,2),s.names=n.scale.names(s.chroma),Object.freeze(s)},u=function(e,r){return function(t){return r[t]||(r[t]=e(t))}},i=u(o,{});exports.props=i;var c=n.scale.names;exports.names=c;var l=function(e){var r=m(e);return i(r[1]).intervals};function p(e,r){var n=m(e);return r=r||n[1],l(r).map((0,t.transpose)(n[0]))}function f(e){var r=m(e);return void 0!==(0,n.scale)(r[1])}function m(r){if("string"!=typeof r)return["",""];var t=r.indexOf(" "),n=(0,e.name)(r.substring(0,t))||(0,e.name)(r)||"",s=""!==n?r.substring(n.length+1):r;return[n,s.length?s:""]}exports.intervals=l;var v=function(e){var t=l(e),s=p(e);return(0,r.modes)(t).map(function(e,r){var a=n.scale.names(e)[0];if(a)return[s[r]||t[r],a]}).filter(function(e){return e})};exports.modeNames=v;var x=function(e){var t=(0,r.isSubsetOf)(l(e));return n.chord.names().filter(function(e){return t((0,n.chord)(e))})};exports.chords=x;var d=function(r){var t=(0,s.compact)(r.map(e.pc));if(!t.length)return t;var n=t[0],a=(0,s.unique)(t);return(0,s.rotate)(a.indexOf(n),a)};exports.toScale=d;var h=function(e){if(!l(e).length)return[];var t=(0,r.isSupersetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.supersets=h;var b=function(e){var t=(0,r.isSubsetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.subsets=b;
},{"tonal-note":"lsVQ","tonal-pcset":"ObyF","tonal-distance":"tvuV","tonal-dictionary":"FKU5","tonal-array":"ICs3"}],"zkYd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.tokenize=x,exports.subsets=exports.supersets=exports.exists=exports.intervals=exports.props=exports.names=void 0;var r=require("tonal-note"),e=require("tonal-distance"),t=require("tonal-dictionary"),n=require("tonal-pcset"),s=t.chord.names;exports.names=s;var o=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),a=function(r){var e=(0,t.chord)(r);if(!e)return o;var s={intervals:e,name:r};return s.chroma=(0,n.chroma)(e),s.setnum=parseInt(s.chroma,2),s.names=t.chord.names(s.chroma),s},u=function(r,e){return void 0===e&&(e={}),function(t){return e[t]||(e[t]=r(t))}},i=u(a);exports.props=i;var c=function(r){return i(x(r)[1]).intervals};function p(r,t){if(t)return i(t).intervals.map((0,e.transpose)(r));var n=x(r),s=n[0],o=n[1];return i(o).intervals.map((0,e.transpose)(s))}exports.intervals=c;var v=function(r){return void 0!==(0,t.chord)(x(r)[1])};exports.exists=v;var l=function(r){if(!c(r).length)return[];var e=(0,n.isSupersetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.supersets=l;var f=function(r){var e=(0,n.isSubsetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.subsets=f;var m=/^(6|64|7|9|11|13)$/;function x(e){var t=(0,r.tokenize)(e);return""===t[0]?["",e]:"A"===t[0]&&"ug"===t[3]?["","aug"]:m.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}
},{"tonal-note":"lsVQ","tonal-distance":"tvuV","tonal-dictionary":"FKU5","tonal-pcset":"ObyF"}],"WZzl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PcSet=exports.Chord=exports.Scale=exports.Dictionary=exports.Distance=exports.Interval=exports.Note=exports.Array=exports.scale=exports.chord=exports.freq=exports.midi=exports.note=exports.interval=exports.transpose=void 0;var e=c(require("tonal-array"));exports.Array=e;var r=c(require("tonal-note"));exports.Note=r;var t=c(require("tonal-interval"));exports.Interval=t;var o=c(require("tonal-distance"));exports.Distance=o;var s=c(require("tonal-dictionary"));exports.Dictionary=s;var n=c(require("tonal-scale"));exports.Scale=n;var a=c(require("tonal-chord"));exports.Chord=a;var p=c(require("tonal-pcset"));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,t&&t.set(e,o),o}exports.PcSet=p;const l=o.transpose;exports.transpose=l;const x=o.interval;exports.interval=x;const u=r.props;exports.note=u;const f=r.midi;exports.midi=f;const v=r.freq;exports.freq=v;const d=s.chord;exports.chord=d;const y=s.scale;exports.scale=y;
},{"tonal-array":"ICs3","tonal-note":"lsVQ","tonal-interval":"a5qI","tonal-distance":"tvuV","tonal-dictionary":"FKU5","tonal-scale":"tcHv","tonal-chord":"zkYd","tonal-pcset":"ObyF"}],"kGvI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HI_CLICK_CLASS=exports.LO_CLICK_CLASS=exports.HI_CLICK_PITCH=exports.LO_CLICK_PITCH=exports.MAX_MIDI_PROGRAM=exports.MIN_MIDI_PROGRAM=exports.MAX_DRUM_PITCH=exports.MIN_DRUM_PITCH=exports.MAX_PIANO_PITCH=exports.MIN_PIANO_PITCH=exports.MIDI_PITCHES=exports.MAX_MIDI_PITCH=exports.MIN_MIDI_PITCH=exports.NUM_PITCH_CLASSES=exports.NO_CHORD=exports.MIDI_VELOCITIES=exports.MAX_MIDI_VELOCITY=exports.MIN_MIDI_VELOCITY=exports.DEFAULT_DRUM_PITCH_CLASSES=exports.NON_DRUM_CHANNELS=exports.DRUM_CHANNEL=exports.DEFAULT_CHANNEL=exports.DEFAULT_TICKS_PER_QUARTER=exports.DEFAULT_PROGRAM=exports.DEFAULT_VELOCITY=exports.DEFAULT_STEPS_PER_SECOND=exports.DEFAULT_STEPS_PER_QUARTER=exports.DEFAULT_STEPS_PER_BAR=exports.DEFAULT_QUARTERS_PER_MINUTE=void 0;const _=120;exports.DEFAULT_QUARTERS_PER_MINUTE=120;const I=16;exports.DEFAULT_STEPS_PER_BAR=16;const t=4;exports.DEFAULT_STEPS_PER_QUARTER=4;const o=100;exports.DEFAULT_STEPS_PER_SECOND=100;const s=80;exports.DEFAULT_VELOCITY=80;const C=0;exports.DEFAULT_PROGRAM=0;const e=220;exports.DEFAULT_TICKS_PER_QUARTER=220;const E=0;exports.DEFAULT_CHANNEL=0;const T=9;exports.DRUM_CHANNEL=9;const r=[0,1,2,3,4,5,6,7,8,10,11,12,13,14,15];exports.NON_DRUM_CHANNELS=r;const p=[[36,35],[38,27,28,31,32,33,34,37,39,40,56,65,66,75,85],[42,44,54,68,69,70,71,73,78,80],[46,67,72,74,79,81],[45,29,41,61,64,84],[48,47,60,63,77,86,87],[50,30,43,62,76,83],[49,55,57,58],[51,52,53,59,82]];exports.DEFAULT_DRUM_PITCH_CLASSES=p;const A=0;exports.MIN_MIDI_VELOCITY=0;const x=127;exports.MAX_MIDI_VELOCITY=127;const M=128;exports.MIDI_VELOCITIES=128;const L="N.C.";exports.NO_CHORD="N.C.";const P=12;exports.NUM_PITCH_CLASSES=12;const D=0;exports.MIN_MIDI_PITCH=0;const R=127;exports.MAX_MIDI_PITCH=127;const S=128;exports.MIDI_PITCHES=128;const N=21;exports.MIN_PIANO_PITCH=21;const U=108;exports.MAX_PIANO_PITCH=108;const H=35;exports.MIN_DRUM_PITCH=35;const c=81;exports.MAX_DRUM_PITCH=81;const O=0;exports.MIN_MIDI_PROGRAM=0;const n=127;exports.MAX_MIDI_PROGRAM=127;const F=89;exports.LO_CLICK_PITCH=89;const K=90;exports.HI_CLICK_PITCH=90;const X=9;exports.LO_CLICK_CLASS=9;const V=10;exports.HI_CLICK_CLASS=10;
},{}],"AqtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chordEncoderFromType=p,exports.PitchChordEncoder=exports.TriadChordEncoder=exports.MajorMinorChordEncoder=exports.ChordEncoder=exports.ChordSymbols=exports.ChordEncodingException=exports.ChordSymbolException=exports.ChordQuality=void 0;var r=n(require("@tensorflow/tfjs")),e=require("tonal"),t=n(require("./constants"));function o(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(o=function(r){return r?t:e})(r)}function n(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o(e);if(t&&t.has(r))return t.get(r);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in r)if("default"!==d&&Object.prototype.hasOwnProperty.call(r,d)){var i=s?Object.getOwnPropertyDescriptor(r,d):null;i&&(i.get||i.set)?Object.defineProperty(n,d,i):n[d]=r[d]}return n.default=r,t&&t.set(r,n),n}const s=[["1P","3M","5P"],["1P","3m","5P"],["1P","3M","5A"],["1P","3m","5d"]];var d;exports.ChordQuality=d,function(r){r[r.Major=0]="Major",r[r.Minor=1]="Minor",r[r.Augmented=2]="Augmented",r[r.Diminished=3]="Diminished",r[r.Other=4]="Other"}(d||(exports.ChordQuality=d={}));class i extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}exports.ChordSymbolException=i;class c extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}exports.ChordEncodingException=c;class h{static pitches(r){if(!e.Chord.tokenize(r)[0]||!e.Chord.exists(r))throw new i(`Unrecognized chord symbol: ${r}`);return e.Chord.notes(r).map(e.Note.chroma)}static root(r){const t=e.Chord.tokenize(r)[0];if(!t)throw new i(`Chord symbol has unknown root: ${r}`);return e.Note.chroma(t)}static quality(r){if(!e.Chord.exists(r))throw new i(`Unrecognized chord symbol: ${r}`);const t=e.Chord.intervals(r),o=s.map(r=>r.every(r=>t.includes(r))),n=o.indexOf(!0),c=o.lastIndexOf(!0);return n>=0&&n===c?n:d.Other}}exports.ChordSymbols=h;class a{encodeProgression(e,t){const o=e.map(r=>this.encode(r)),n=Array.from(Array(t).keys()).map(r=>Math.floor(r*o.length/t));return r.stack(n.map(r=>o[r]))}}function p(r){switch(r){case"MajorMinorChordEncoder":return new u;case"TriadChordEncoder":return new C;case"PitchChordEncoder":return new f;default:throw new Error(`Unknown chord encoder type: ${r}`)}}exports.ChordEncoder=a;class u extends a{constructor(){super(...arguments),this.depth=1+2*t.NUM_PITCH_CLASSES}index(r){if(r===t.NO_CHORD)return 0;const e=h.root(r),o=1+h.quality(r)*t.NUM_PITCH_CLASSES+e;if(o>=this.depth)throw new c(`Chord is neither major nor minor: ${r}`);return o}encode(e){return r.tidy(()=>r.oneHot(r.tensor1d([this.index(e)],"int32"),this.depth).as1D())}}exports.MajorMinorChordEncoder=u;class C extends a{constructor(){super(...arguments),this.depth=1+4*t.NUM_PITCH_CLASSES}index(r){if(r===t.NO_CHORD)return 0;const e=h.root(r),o=1+h.quality(r)*t.NUM_PITCH_CLASSES+e;if(o>=this.depth)throw new c(`Chord is not a standard triad: ${r}`);return o}encode(e){return r.tidy(()=>r.oneHot(r.tensor1d([this.index(e)],"int32"),this.depth).as1D())}}exports.TriadChordEncoder=C;class f extends a{constructor(){super(...arguments),this.depth=1+3*t.NUM_PITCH_CLASSES}encode(e){return r.tidy(()=>{if(e===t.NO_CHORD)return r.oneHot(r.tensor1d([0],"int32"),this.depth).as1D();const o=h.root(e),n=r.oneHot(r.tensor1d([o],"int32"),t.NUM_PITCH_CLASSES).as1D(),s=r.buffer([t.NUM_PITCH_CLASSES]);h.pitches(e).forEach(r=>s.set(1,r));const d=s.toTensor().as1D(),i=n;return r.concat1d([r.tensor1d([0]),n,d,i])})}}exports.PitchChordEncoder=f;
},{"@tensorflow/tfjs":"fHyk","tonal":"WZzl","./constants":"kGvI"}],"EzcF":[function(require,module,exports) {
"use strict";function n(n,e){for(var r=new Array(arguments.length-1),t=0,l=2,o=!0;l<arguments.length;)r[t++]=arguments[l++];return new Promise(function(l,u){r[t]=function(n){if(o)if(o=!1,n)u(n);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];l.apply(null,e)}};try{n.apply(e||null,r)}catch(a){o&&(o=!1,u(a))}})}module.exports=n;
},{}],"FsFQ":[function(require,module,exports) {
"use strict";var r=exports;r.length=function(r){var e=r.length;if(!e)return 0;for(var a=0;--e%4>1&&"="===r.charAt(e);)++a;return Math.ceil(3*r.length)/4-a};for(var e=new Array(64),a=new Array(123),t=0;t<64;)a[e[t]=t<26?t+65:t<52?t+71:t<62?t-4:t-59|43]=t++;r.encode=function(r,a,t){for(var n,i=null,o=[],c=0,s=0;a<t;){var h=r[a++];switch(s){case 0:o[c++]=e[h>>2],n=(3&h)<<4,s=1;break;case 1:o[c++]=e[n|h>>4],n=(15&h)<<2,s=2;break;case 2:o[c++]=e[n|h>>6],o[c++]=e[63&h],s=0}c>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),c=0)}return s&&(o[c++]=e[n],o[c++]=61,1===s&&(o[c++]=61)),i?(c&&i.push(String.fromCharCode.apply(String,o.slice(0,c))),i.join("")):String.fromCharCode.apply(String,o.slice(0,c))};var n="invalid encoding";r.decode=function(r,e,t){for(var i,o=t,c=0,s=0;s<r.length;){var h=r.charCodeAt(s++);if(61===h&&c>1)break;if(void 0===(h=a[h]))throw Error(n);switch(c){case 0:i=h,c=1;break;case 1:e[t++]=i<<2|(48&h)>>4,i=h,c=2;break;case 2:e[t++]=(15&i)<<4|(60&h)>>2,i=h,c=3;break;case 3:e[t++]=(3&i)<<6|h,c=0}}if(1===c)throw Error(n);return t-o},r.test=function(r){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(r)};
},{}],"JI1S":[function(require,module,exports) {
"use strict";function t(){this._listeners={}}module.exports=t,t.prototype.on=function(t,s,e){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:s,ctx:e||this}),this},t.prototype.off=function(t,s){if(void 0===t)this._listeners={};else if(void 0===s)this._listeners[t]=[];else for(var e=this._listeners[t],i=0;i<e.length;)e[i].fn===s?e.splice(i,1):++i;return this},t.prototype.emit=function(t){var s=this._listeners[t];if(s){for(var e=[],i=1;i<arguments.length;)e.push(arguments[i++]);for(i=0;i<s.length;)s[i].fn.apply(s[i++].ctx,e)}return this};
},{}],"M11I":[function(require,module,exports) {
"use strict";function n(n){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),r=128===t[3];function o(n,r,o){e[0]=n,r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3]}function u(n,r,o){e[0]=n,r[o]=t[3],r[o+1]=t[2],r[o+2]=t[1],r[o+3]=t[0]}function i(n,r){return t[0]=n[r],t[1]=n[r+1],t[2]=n[r+2],t[3]=n[r+3],e[0]}function a(n,r){return t[3]=n[r],t[2]=n[r+1],t[1]=n[r+2],t[0]=n[r+3],e[0]}n.writeFloatLE=r?o:u,n.writeFloatBE=r?u:o,n.readFloatLE=r?i:a,n.readFloatBE=r?a:i}():function(){function u(n,e,t,r){var o=e<0?1:0;if(o&&(e=-e),0===e)n(1/e>0?0:2147483648,t,r);else if(isNaN(e))n(2143289344,t,r);else if(e>3.4028234663852886e38)n((o<<31|2139095040)>>>0,t,r);else if(e<1.1754943508222875e-38)n((o<<31|Math.round(e/1.401298464324817e-45))>>>0,t,r);else{var u=Math.floor(Math.log(e)/Math.LN2);n((o<<31|u+127<<23|8388607&Math.round(e*Math.pow(2,-u)*8388608))>>>0,t,r)}}function i(n,e,t){var r=n(e,t),o=2*(r>>31)+1,u=r>>>23&255,i=8388607&r;return 255===u?i?NaN:o*(1/0):0===u?1.401298464324817e-45*o*i:o*Math.pow(2,u-150)*(i+8388608)}n.writeFloatLE=u.bind(null,e),n.writeFloatBE=u.bind(null,t),n.readFloatLE=i.bind(null,r),n.readFloatBE=i.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),r=128===t[7];function o(n,r,o){e[0]=n,r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3],r[o+4]=t[4],r[o+5]=t[5],r[o+6]=t[6],r[o+7]=t[7]}function u(n,r,o){e[0]=n,r[o]=t[7],r[o+1]=t[6],r[o+2]=t[5],r[o+3]=t[4],r[o+4]=t[3],r[o+5]=t[2],r[o+6]=t[1],r[o+7]=t[0]}function i(n,r){return t[0]=n[r],t[1]=n[r+1],t[2]=n[r+2],t[3]=n[r+3],t[4]=n[r+4],t[5]=n[r+5],t[6]=n[r+6],t[7]=n[r+7],e[0]}function a(n,r){return t[7]=n[r],t[6]=n[r+1],t[5]=n[r+2],t[4]=n[r+3],t[3]=n[r+4],t[2]=n[r+5],t[1]=n[r+6],t[0]=n[r+7],e[0]}n.writeDoubleLE=r?o:u,n.writeDoubleBE=r?u:o,n.readDoubleLE=r?i:a,n.readDoubleBE=r?a:i}():function(){function u(n,e,t,r,o,u){var i=r<0?1:0;if(i&&(r=-r),0===r)n(0,o,u+e),n(1/r>0?0:2147483648,o,u+t);else if(isNaN(r))n(0,o,u+e),n(2146959360,o,u+t);else if(r>1.7976931348623157e308)n(0,o,u+e),n((i<<31|2146435072)>>>0,o,u+t);else{var a;if(r<2.2250738585072014e-308)n((a=r/5e-324)>>>0,o,u+e),n((i<<31|a/4294967296)>>>0,o,u+t);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),n(4503599627370496*(a=r*Math.pow(2,-l))>>>0,o,u+e),n((i<<31|l+1023<<20|1048576*a&1048575)>>>0,o,u+t)}}}function i(n,e,t,r,o){var u=n(r,o+e),i=n(r,o+t),a=2*(i>>31)+1,l=i>>>20&2047,f=4294967296*(1048575&i)+u;return 2047===l?f?NaN:a*(1/0):0===l?5e-324*a*f:a*Math.pow(2,l-1075)*(f+4503599627370496)}n.writeDoubleLE=u.bind(null,e,0,4),n.writeDoubleBE=u.bind(null,t,4,0),n.readDoubleLE=i.bind(null,r,0,4),n.readDoubleBE=i.bind(null,o,4,0)}(),n}function e(n,e,t){e[t]=255&n,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function t(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=255&n}function r(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function o(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}module.exports=n(n);
},{}],"MXG9":[function(require,module,exports) {
"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire;
},{}],"HIDA":[function(require,module,exports) {
"use strict";var r=exports;r.length=function(r){for(var t=0,n=0,e=0;e<r.length;++e)(n=r.charCodeAt(e))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&r.charCodeAt(e+1))?(++e,t+=4):t+=3;return t},r.read=function(r,t,n){if(n-t<1)return"";for(var e,o=null,a=[],i=0;t<n;)(e=r[t++])<128?a[i++]=e:e>191&&e<224?a[i++]=(31&e)<<6|63&r[t++]:e>239&&e<365?(e=((7&e)<<18|(63&r[t++])<<12|(63&r[t++])<<6|63&r[t++])-65536,a[i++]=55296+(e>>10),a[i++]=56320+(1023&e)):a[i++]=(15&e)<<12|(63&r[t++])<<6|63&r[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))},r.write=function(r,t,n){for(var e,o,a=n,i=0;i<r.length;++i)(e=r.charCodeAt(i))<128?t[n++]=e:e<2048?(t[n++]=e>>6|192,t[n++]=63&e|128):55296==(64512&e)&&56320==(64512&(o=r.charCodeAt(i+1)))?(e=65536+((1023&e)<<10)+(1023&o),++i,t[n++]=e>>18|240,t[n++]=e>>12&63|128,t[n++]=e>>6&63|128,t[n++]=63&e|128):(t[n++]=e>>12|224,t[n++]=e>>6&63|128,t[n++]=63&e|128);return n-a};
},{}],"yqBl":[function(require,module,exports) {
"use strict";function r(r,n,t){var u=t||8192,e=u>>>1,l=null,c=u;return function(t){if(t<1||t>e)return r(t);c+t>u&&(l=r(u),c=0);var i=n.call(l,c,c+=t);return 7&c&&(c=1+(7|c)),i}}module.exports=r;
},{}],"mM8D":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("../util/minimal");function i(t,i){this.lo=t>>>0,this.hi=i>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var r=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var r=t<0;r&&(t=-t);var h=t>>>0,n=(t-h)/4294967296>>>0;return r&&(n=~n>>>0,h=~h>>>0,++h>4294967295&&(h=0,++n>4294967295&&(n=0))),new i(h,n)},i.from=function(r){if("number"==typeof r)return i.fromNumber(r);if(t.isString(r)){if(!t.Long)return i.fromNumber(parseInt(r,10));r=t.Long.fromString(r)}return r.low||r.high?new i(r.low>>>0,r.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,o=~this.hi>>>0;return i||(o=o+1>>>0),-(i+4294967296*o)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(i){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(i)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(i)}};var h=String.prototype.charCodeAt;i.fromHash=function(t){return t===r?o:new i((h.call(t,0)|h.call(t,1)<<8|h.call(t,2)<<16|h.call(t,3)<<24)>>>0,(h.call(t,4)|h.call(t,5)<<8|h.call(t,6)<<16|h.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:o<128?9:10};
},{"../util/minimal":"OqZT"}],"OqZT":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],r=require("buffer").Buffer,t=exports;function n(e,r,t){for(var n=Object.keys(r),o=0;o<n.length;++o)void 0!==e[n[o]]&&t||(e[n[o]]=r[n[o]]);return e}function o(e){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&n(this,t)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return e}}),r.prototype.toString=function(){return this.name+": "+this.message},r}t.asPromise=require("@protobufjs/aspromise"),t.base64=require("@protobufjs/base64"),t.EventEmitter=require("@protobufjs/eventemitter"),t.float=require("@protobufjs/float"),t.inquire=require("@protobufjs/inquire"),t.utf8=require("@protobufjs/utf8"),t.pool=require("@protobufjs/pool"),t.LongBits=require("./longbits"),t.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),t.global=t.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,r){var t=e[r];return!(null==t||!e.hasOwnProperty(r))&&("object"!=typeof t||(Array.isArray(t)?t.length:Object.keys(t).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(r){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(e){for(var r={},t=0;t<e.length;++t)r[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(1===r[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},t.oneOfSetter=function(e){return function(r){for(var t=0;t<e.length;++t)e[t]!==r&&delete this[e[t]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,t){return new e(r,t)},t._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}):t._Buffer_from=t._Buffer_allocUnsafe=null};
},{"@protobufjs/aspromise":"EzcF","@protobufjs/base64":"FsFQ","@protobufjs/eventemitter":"JI1S","@protobufjs/float":"M11I","@protobufjs/inquire":"MXG9","@protobufjs/utf8":"HIDA","@protobufjs/pool":"yqBl","./longbits":"mM8D","buffer":"aMB2"}],"uteQ":[function(require,module,exports) {
"use strict";module.exports=u;var t,i=require("./util/minimal"),n=i.LongBits,e=i.base64,o=i.utf8;function r(t,i,n){this.fn=t,this.len=i,this.next=void 0,this.val=n}function s(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new r(s,0,0),this.tail=this.head,this.states=null}var l=function(){return i.Buffer?function(){return(u.create=function(){return new t})()}:function(){return new u}};function p(t,i,n){i[n]=255&t}function a(t,i,n){for(;t>127;)i[n++]=127&t|128,t>>>=7;i[n]=t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function c(t,i,n){for(;t.hi;)i[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[n++]=127&t.lo|128,t.lo=t.lo>>>7;i[n++]=t.lo}function y(t,i,n){i[n]=255&t,i[n+1]=t>>>8&255,i[n+2]=t>>>16&255,i[n+3]=t>>>24}u.create=l(),u.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(t,i,n){return this.tail=this.tail.next=new r(t,i,n),this.len+=i,this},f.prototype=Object.create(r.prototype),f.prototype.fn=a,u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this._push(c,10,n.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var i=n.from(t);return this._push(c,i.length(),i)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var i=n.from(t).zzEncode();return this._push(c,i.length(),i)},u.prototype.bool=function(t){return this._push(p,1,t?1:0)},u.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var i=n.from(t);return this._push(y,4,i.lo)._push(y,4,i.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var d=i.Array.prototype.set?function(t,i,n){i.set(t,n)}:function(t,i,n){for(var e=0;e<t.length;++e)i[n+e]=t[e]};u.prototype.bytes=function(t){var n=t.length>>>0;if(!n)return this._push(p,1,0);if(i.isString(t)){var o=u.alloc(n=e.length(t));e.decode(t,o,0),t=o}return this.uint32(n)._push(d,n,t)},u.prototype.string=function(t){var i=o.length(t);return i?this.uint32(i)._push(o.write,i,t):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new r(s,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(s,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,i=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=i,this.len+=n),this},u.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,i,n),n+=t.len,t=t.next;return i},u._configure=function(i){t=i,u.create=l(),t._configure()};
},{"./util/minimal":"OqZT"}],"CkBE":[function(require,module,exports) {
"use strict";module.exports=r;var t=require("./writer");(r.prototype=Object.create(t.prototype)).constructor=r;var e=require("./util/minimal");function r(){t.call(this)}function i(t,r,i){t.length<40?e.utf8.write(t,r,i):r.utf8Write?r.utf8Write(t,i):r.write(t,i)}r._configure=function(){r.alloc=e._Buffer_allocUnsafe,r.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var i=0;i<t.length;)e[r++]=t[i++]}},r.prototype.bytes=function(t){e.isString(t)&&(t=e._Buffer_from(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this._push(r.writeBytesBuffer,i,t),this},r.prototype.string=function(t){var r=e.Buffer.byteLength(t);return this.uint32(r),r&&this._push(i,r,t),this},r._configure();
},{"./writer":"uteQ","./util/minimal":"OqZT"}],"nX4I":[function(require,module,exports) {
"use strict";module.exports=h;var t,i=require("./util/minimal"),s=i.LongBits,r=i.utf8;function o(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}var n="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")},e=function(){return i.Buffer?function(s){return(h.create=function(s){return i.Buffer.isBuffer(s)?new t(s):n(s)})(s)}:n};function u(){var t=new s(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw o(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw o(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw o(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}h.create=e(),h.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,h.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return t}}(),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return f(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|f(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),i=this.pos,s=this.pos+t;if(s>this.len)throw o(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,s):i===s?new this.buf.constructor(0):this._slice.call(this.buf,i,s)},h.prototype.string=function(){var t=this.bytes();return r.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw o(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h._configure=function(s){t=s,h.create=e(),t._configure();var r=i.Long?"toLong":"toNumber";i.merge(h.prototype,{int64:function(){return u.call(this)[r](!1)},uint64:function(){return u.call(this)[r](!0)},sint64:function(){return u.call(this).zzDecode()[r](!1)},fixed64:function(){return p.call(this)[r](!0)},sfixed64:function(){return p.call(this)[r](!1)}})};
},{"./util/minimal":"OqZT"}],"pJQ5":[function(require,module,exports) {
"use strict";module.exports=e;var t=require("./reader");(e.prototype=Object.create(t.prototype)).constructor=e;var i=require("./util/minimal");function e(i){t.call(this,i)}e._configure=function(){i.Buffer&&(e.prototype._slice=i.Buffer.prototype.slice)},e.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},e._configure();
},{"./reader":"nX4I","./util/minimal":"OqZT"}],"uviC":[function(require,module,exports) {
"use strict";module.exports=t;var e=require("../util/minimal");function t(t,r,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(i)}(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(r,i,n,o,l){if(!o)throw TypeError("request must be specified");var u=this;if(!l)return e.asPromise(t,u,r,i,n,o);if(u.rpcImpl)try{return u.rpcImpl(r,i[u.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,t){if(e)return u.emit("error",e,r),l(e);if(null!==t){if(!(t instanceof n))try{t=n[u.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return u.emit("error",e,r),l(e)}return u.emit("data",t,r),l(null,t)}u.end(!0)})}catch(c){return u.emit("error",c,r),void setTimeout(function(){l(c)},0)}else setTimeout(function(){l(Error("already ended"))},0)},t.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};
},{"../util/minimal":"OqZT"}],"j3cJ":[function(require,module,exports) {
"use strict";var e=exports;e.Service=require("./rpc/service");
},{"./rpc/service":"uviC"}],"SPDi":[function(require,module,exports) {
"use strict";module.exports={};
},{}],"BiIR":[function(require,module,exports) {
"use strict";var r=exports;function e(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=require("./writer"),r.BufferWriter=require("./writer_buffer"),r.Reader=require("./reader"),r.BufferReader=require("./reader_buffer"),r.util=require("./util/minimal"),r.rpc=require("./rpc"),r.roots=require("./roots"),r.configure=e,e();
},{"./writer":"uteQ","./writer_buffer":"CkBE","./reader":"nX4I","./reader_buffer":"pJQ5","./util/minimal":"OqZT","./rpc":"j3cJ","./roots":"SPDi"}],"fCoP":[function(require,module,exports) {
"use strict";module.exports=require("./src/index-minimal");
},{"./src/index-minimal":"BiIR"}],"mVj2":[function(require,module,exports) {
"use strict";var e=require("protobufjs/minimal"),t=e.Reader,n=e.Writer,r=e.util,o=e.roots.default||(e.roots.default={});o.tensorflow=function(){var i,a={};return a.magenta=((i={}).NoteSequence=function(){function i(e){if(this.timeSignatures=[],this.keySignatures=[],this.tempos=[],this.notes=[],this.pitchBends=[],this.controlChanges=[],this.partInfos=[],this.textAnnotations=[],this.sectionAnnotations=[],this.sectionGroups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a,s;return i.prototype.id="",i.prototype.filename="",i.prototype.referenceNumber=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.collectionName="",i.prototype.ticksPerQuarter=0,i.prototype.timeSignatures=r.emptyArray,i.prototype.keySignatures=r.emptyArray,i.prototype.tempos=r.emptyArray,i.prototype.notes=r.emptyArray,i.prototype.totalTime=0,i.prototype.totalQuantizedSteps=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.pitchBends=r.emptyArray,i.prototype.controlChanges=r.emptyArray,i.prototype.partInfos=r.emptyArray,i.prototype.sourceInfo=null,i.prototype.textAnnotations=r.emptyArray,i.prototype.sectionAnnotations=r.emptyArray,i.prototype.sectionGroups=r.emptyArray,i.prototype.quantizationInfo=null,i.prototype.subsequenceInfo=null,i.prototype.sequenceMetadata=null,i.create=function(e){return new i(e)},i.encode=function(e,t){if(t||(t=n.create()),null!=e.id&&e.hasOwnProperty("id")&&t.uint32(10).string(e.id),null!=e.filename&&e.hasOwnProperty("filename")&&t.uint32(18).string(e.filename),null!=e.collectionName&&e.hasOwnProperty("collectionName")&&t.uint32(26).string(e.collectionName),null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&t.uint32(32).int32(e.ticksPerQuarter),null!=e.timeSignatures&&e.timeSignatures.length)for(var r=0;r<e.timeSignatures.length;++r)o.tensorflow.magenta.NoteSequence.TimeSignature.encode(e.timeSignatures[r],t.uint32(42).fork()).ldelim();if(null!=e.keySignatures&&e.keySignatures.length)for(r=0;r<e.keySignatures.length;++r)o.tensorflow.magenta.NoteSequence.KeySignature.encode(e.keySignatures[r],t.uint32(50).fork()).ldelim();if(null!=e.tempos&&e.tempos.length)for(r=0;r<e.tempos.length;++r)o.tensorflow.magenta.NoteSequence.Tempo.encode(e.tempos[r],t.uint32(58).fork()).ldelim();if(null!=e.notes&&e.notes.length)for(r=0;r<e.notes.length;++r)o.tensorflow.magenta.NoteSequence.Note.encode(e.notes[r],t.uint32(66).fork()).ldelim();if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&t.uint32(73).double(e.totalTime),null!=e.pitchBends&&e.pitchBends.length)for(r=0;r<e.pitchBends.length;++r)o.tensorflow.magenta.NoteSequence.PitchBend.encode(e.pitchBends[r],t.uint32(82).fork()).ldelim();if(null!=e.controlChanges&&e.controlChanges.length)for(r=0;r<e.controlChanges.length;++r)o.tensorflow.magenta.NoteSequence.ControlChange.encode(e.controlChanges[r],t.uint32(90).fork()).ldelim();if(null!=e.partInfos&&e.partInfos.length)for(r=0;r<e.partInfos.length;++r)o.tensorflow.magenta.NoteSequence.PartInfo.encode(e.partInfos[r],t.uint32(98).fork()).ldelim();if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&o.tensorflow.magenta.NoteSequence.SourceInfo.encode(e.sourceInfo,t.uint32(106).fork()).ldelim(),null!=e.textAnnotations&&e.textAnnotations.length)for(r=0;r<e.textAnnotations.length;++r)o.tensorflow.magenta.NoteSequence.TextAnnotation.encode(e.textAnnotations[r],t.uint32(114).fork()).ldelim();if(null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&o.tensorflow.magenta.NoteSequence.QuantizationInfo.encode(e.quantizationInfo,t.uint32(122).fork()).ldelim(),null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&t.uint32(128).int64(e.totalQuantizedSteps),null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&o.tensorflow.magenta.NoteSequence.SubsequenceInfo.encode(e.subsequenceInfo,t.uint32(138).fork()).ldelim(),null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&t.uint32(144).int64(e.referenceNumber),null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&o.tensorflow.magenta.SequenceMetadata.encode(e.sequenceMetadata,t.uint32(154).fork()).ldelim(),null!=e.sectionAnnotations&&e.sectionAnnotations.length)for(r=0;r<e.sectionAnnotations.length;++r)o.tensorflow.magenta.NoteSequence.SectionAnnotation.encode(e.sectionAnnotations[r],t.uint32(162).fork()).ldelim();if(null!=e.sectionGroups&&e.sectionGroups.length)for(r=0;r<e.sectionGroups.length;++r)o.tensorflow.magenta.NoteSequence.SectionGroup.encode(e.sectionGroups[r],t.uint32(170).fork()).ldelim();return t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.id=e.string();break;case 2:a.filename=e.string();break;case 18:a.referenceNumber=r.Long?e.int64().toNumber():e.int64();break;case 3:a.collectionName=e.string();break;case 4:a.ticksPerQuarter=e.int32();break;case 5:a.timeSignatures&&a.timeSignatures.length||(a.timeSignatures=[]),a.timeSignatures.push(o.tensorflow.magenta.NoteSequence.TimeSignature.decode(e,e.uint32()));break;case 6:a.keySignatures&&a.keySignatures.length||(a.keySignatures=[]),a.keySignatures.push(o.tensorflow.magenta.NoteSequence.KeySignature.decode(e,e.uint32()));break;case 7:a.tempos&&a.tempos.length||(a.tempos=[]),a.tempos.push(o.tensorflow.magenta.NoteSequence.Tempo.decode(e,e.uint32()));break;case 8:a.notes&&a.notes.length||(a.notes=[]),a.notes.push(o.tensorflow.magenta.NoteSequence.Note.decode(e,e.uint32()));break;case 9:a.totalTime=e.double();break;case 16:a.totalQuantizedSteps=r.Long?e.int64().toNumber():e.int64();break;case 10:a.pitchBends&&a.pitchBends.length||(a.pitchBends=[]),a.pitchBends.push(o.tensorflow.magenta.NoteSequence.PitchBend.decode(e,e.uint32()));break;case 11:a.controlChanges&&a.controlChanges.length||(a.controlChanges=[]),a.controlChanges.push(o.tensorflow.magenta.NoteSequence.ControlChange.decode(e,e.uint32()));break;case 12:a.partInfos&&a.partInfos.length||(a.partInfos=[]),a.partInfos.push(o.tensorflow.magenta.NoteSequence.PartInfo.decode(e,e.uint32()));break;case 13:a.sourceInfo=o.tensorflow.magenta.NoteSequence.SourceInfo.decode(e,e.uint32());break;case 14:a.textAnnotations&&a.textAnnotations.length||(a.textAnnotations=[]),a.textAnnotations.push(o.tensorflow.magenta.NoteSequence.TextAnnotation.decode(e,e.uint32()));break;case 20:a.sectionAnnotations&&a.sectionAnnotations.length||(a.sectionAnnotations=[]),a.sectionAnnotations.push(o.tensorflow.magenta.NoteSequence.SectionAnnotation.decode(e,e.uint32()));break;case 21:a.sectionGroups&&a.sectionGroups.length||(a.sectionGroups=[]),a.sectionGroups.push(o.tensorflow.magenta.NoteSequence.SectionGroup.decode(e,e.uint32()));break;case 15:a.quantizationInfo=o.tensorflow.magenta.NoteSequence.QuantizationInfo.decode(e,e.uint32());break;case 17:a.subsequenceInfo=o.tensorflow.magenta.NoteSequence.SubsequenceInfo.decode(e,e.uint32());break;case 19:a.sequenceMetadata=o.tensorflow.magenta.SequenceMetadata.decode(e,e.uint32());break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!r.isString(e.id))return"id: string expected";if(null!=e.filename&&e.hasOwnProperty("filename")&&!r.isString(e.filename))return"filename: string expected";if(null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&!(r.isInteger(e.referenceNumber)||e.referenceNumber&&r.isInteger(e.referenceNumber.low)&&r.isInteger(e.referenceNumber.high)))return"referenceNumber: integer|Long expected";if(null!=e.collectionName&&e.hasOwnProperty("collectionName")&&!r.isString(e.collectionName))return"collectionName: string expected";if(null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&!r.isInteger(e.ticksPerQuarter))return"ticksPerQuarter: integer expected";if(null!=e.timeSignatures&&e.hasOwnProperty("timeSignatures")){if(!Array.isArray(e.timeSignatures))return"timeSignatures: array expected";for(var t=0;t<e.timeSignatures.length;++t)if(n=o.tensorflow.magenta.NoteSequence.TimeSignature.verify(e.timeSignatures[t]))return"timeSignatures."+n}if(null!=e.keySignatures&&e.hasOwnProperty("keySignatures")){if(!Array.isArray(e.keySignatures))return"keySignatures: array expected";for(t=0;t<e.keySignatures.length;++t)if(n=o.tensorflow.magenta.NoteSequence.KeySignature.verify(e.keySignatures[t]))return"keySignatures."+n}if(null!=e.tempos&&e.hasOwnProperty("tempos")){if(!Array.isArray(e.tempos))return"tempos: array expected";for(t=0;t<e.tempos.length;++t)if(n=o.tensorflow.magenta.NoteSequence.Tempo.verify(e.tempos[t]))return"tempos."+n}if(null!=e.notes&&e.hasOwnProperty("notes")){if(!Array.isArray(e.notes))return"notes: array expected";for(t=0;t<e.notes.length;++t)if(n=o.tensorflow.magenta.NoteSequence.Note.verify(e.notes[t]))return"notes."+n}if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&"number"!=typeof e.totalTime)return"totalTime: number expected";if(null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&!(r.isInteger(e.totalQuantizedSteps)||e.totalQuantizedSteps&&r.isInteger(e.totalQuantizedSteps.low)&&r.isInteger(e.totalQuantizedSteps.high)))return"totalQuantizedSteps: integer|Long expected";if(null!=e.pitchBends&&e.hasOwnProperty("pitchBends")){if(!Array.isArray(e.pitchBends))return"pitchBends: array expected";for(t=0;t<e.pitchBends.length;++t)if(n=o.tensorflow.magenta.NoteSequence.PitchBend.verify(e.pitchBends[t]))return"pitchBends."+n}if(null!=e.controlChanges&&e.hasOwnProperty("controlChanges")){if(!Array.isArray(e.controlChanges))return"controlChanges: array expected";for(t=0;t<e.controlChanges.length;++t)if(n=o.tensorflow.magenta.NoteSequence.ControlChange.verify(e.controlChanges[t]))return"controlChanges."+n}if(null!=e.partInfos&&e.hasOwnProperty("partInfos")){if(!Array.isArray(e.partInfos))return"partInfos: array expected";for(t=0;t<e.partInfos.length;++t)if(n=o.tensorflow.magenta.NoteSequence.PartInfo.verify(e.partInfos[t]))return"partInfos."+n}if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&(n=o.tensorflow.magenta.NoteSequence.SourceInfo.verify(e.sourceInfo)))return"sourceInfo."+n;if(null!=e.textAnnotations&&e.hasOwnProperty("textAnnotations")){if(!Array.isArray(e.textAnnotations))return"textAnnotations: array expected";for(t=0;t<e.textAnnotations.length;++t)if(n=o.tensorflow.magenta.NoteSequence.TextAnnotation.verify(e.textAnnotations[t]))return"textAnnotations."+n}if(null!=e.sectionAnnotations&&e.hasOwnProperty("sectionAnnotations")){if(!Array.isArray(e.sectionAnnotations))return"sectionAnnotations: array expected";for(t=0;t<e.sectionAnnotations.length;++t)if(n=o.tensorflow.magenta.NoteSequence.SectionAnnotation.verify(e.sectionAnnotations[t]))return"sectionAnnotations."+n}if(null!=e.sectionGroups&&e.hasOwnProperty("sectionGroups")){if(!Array.isArray(e.sectionGroups))return"sectionGroups: array expected";for(t=0;t<e.sectionGroups.length;++t){var n;if(n=o.tensorflow.magenta.NoteSequence.SectionGroup.verify(e.sectionGroups[t]))return"sectionGroups."+n}}return null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&(n=o.tensorflow.magenta.NoteSequence.QuantizationInfo.verify(e.quantizationInfo))?"quantizationInfo."+n:null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&(n=o.tensorflow.magenta.NoteSequence.SubsequenceInfo.verify(e.subsequenceInfo))?"subsequenceInfo."+n:null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&(n=o.tensorflow.magenta.SequenceMetadata.verify(e.sequenceMetadata))?"sequenceMetadata."+n:null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence)return e;var t=new o.tensorflow.magenta.NoteSequence;if(null!=e.id&&(t.id=String(e.id)),null!=e.filename&&(t.filename=String(e.filename)),null!=e.referenceNumber&&(r.Long?(t.referenceNumber=r.Long.fromValue(e.referenceNumber)).unsigned=!1:"string"==typeof e.referenceNumber?t.referenceNumber=parseInt(e.referenceNumber,10):"number"==typeof e.referenceNumber?t.referenceNumber=e.referenceNumber:"object"==typeof e.referenceNumber&&(t.referenceNumber=new r.LongBits(e.referenceNumber.low>>>0,e.referenceNumber.high>>>0).toNumber())),null!=e.collectionName&&(t.collectionName=String(e.collectionName)),null!=e.ticksPerQuarter&&(t.ticksPerQuarter=0|e.ticksPerQuarter),e.timeSignatures){if(!Array.isArray(e.timeSignatures))throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: array expected");t.timeSignatures=[];for(var n=0;n<e.timeSignatures.length;++n){if("object"!=typeof e.timeSignatures[n])throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: object expected");t.timeSignatures[n]=o.tensorflow.magenta.NoteSequence.TimeSignature.fromObject(e.timeSignatures[n])}}if(e.keySignatures){if(!Array.isArray(e.keySignatures))throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: array expected");for(t.keySignatures=[],n=0;n<e.keySignatures.length;++n){if("object"!=typeof e.keySignatures[n])throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: object expected");t.keySignatures[n]=o.tensorflow.magenta.NoteSequence.KeySignature.fromObject(e.keySignatures[n])}}if(e.tempos){if(!Array.isArray(e.tempos))throw TypeError(".tensorflow.magenta.NoteSequence.tempos: array expected");for(t.tempos=[],n=0;n<e.tempos.length;++n){if("object"!=typeof e.tempos[n])throw TypeError(".tensorflow.magenta.NoteSequence.tempos: object expected");t.tempos[n]=o.tensorflow.magenta.NoteSequence.Tempo.fromObject(e.tempos[n])}}if(e.notes){if(!Array.isArray(e.notes))throw TypeError(".tensorflow.magenta.NoteSequence.notes: array expected");for(t.notes=[],n=0;n<e.notes.length;++n){if("object"!=typeof e.notes[n])throw TypeError(".tensorflow.magenta.NoteSequence.notes: object expected");t.notes[n]=o.tensorflow.magenta.NoteSequence.Note.fromObject(e.notes[n])}}if(null!=e.totalTime&&(t.totalTime=Number(e.totalTime)),null!=e.totalQuantizedSteps&&(r.Long?(t.totalQuantizedSteps=r.Long.fromValue(e.totalQuantizedSteps)).unsigned=!1:"string"==typeof e.totalQuantizedSteps?t.totalQuantizedSteps=parseInt(e.totalQuantizedSteps,10):"number"==typeof e.totalQuantizedSteps?t.totalQuantizedSteps=e.totalQuantizedSteps:"object"==typeof e.totalQuantizedSteps&&(t.totalQuantizedSteps=new r.LongBits(e.totalQuantizedSteps.low>>>0,e.totalQuantizedSteps.high>>>0).toNumber())),e.pitchBends){if(!Array.isArray(e.pitchBends))throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: array expected");for(t.pitchBends=[],n=0;n<e.pitchBends.length;++n){if("object"!=typeof e.pitchBends[n])throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: object expected");t.pitchBends[n]=o.tensorflow.magenta.NoteSequence.PitchBend.fromObject(e.pitchBends[n])}}if(e.controlChanges){if(!Array.isArray(e.controlChanges))throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: array expected");for(t.controlChanges=[],n=0;n<e.controlChanges.length;++n){if("object"!=typeof e.controlChanges[n])throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: object expected");t.controlChanges[n]=o.tensorflow.magenta.NoteSequence.ControlChange.fromObject(e.controlChanges[n])}}if(e.partInfos){if(!Array.isArray(e.partInfos))throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: array expected");for(t.partInfos=[],n=0;n<e.partInfos.length;++n){if("object"!=typeof e.partInfos[n])throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: object expected");t.partInfos[n]=o.tensorflow.magenta.NoteSequence.PartInfo.fromObject(e.partInfos[n])}}if(null!=e.sourceInfo){if("object"!=typeof e.sourceInfo)throw TypeError(".tensorflow.magenta.NoteSequence.sourceInfo: object expected");t.sourceInfo=o.tensorflow.magenta.NoteSequence.SourceInfo.fromObject(e.sourceInfo)}if(e.textAnnotations){if(!Array.isArray(e.textAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: array expected");for(t.textAnnotations=[],n=0;n<e.textAnnotations.length;++n){if("object"!=typeof e.textAnnotations[n])throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: object expected");t.textAnnotations[n]=o.tensorflow.magenta.NoteSequence.TextAnnotation.fromObject(e.textAnnotations[n])}}if(e.sectionAnnotations){if(!Array.isArray(e.sectionAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: array expected");for(t.sectionAnnotations=[],n=0;n<e.sectionAnnotations.length;++n){if("object"!=typeof e.sectionAnnotations[n])throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: object expected");t.sectionAnnotations[n]=o.tensorflow.magenta.NoteSequence.SectionAnnotation.fromObject(e.sectionAnnotations[n])}}if(e.sectionGroups){if(!Array.isArray(e.sectionGroups))throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: array expected");for(t.sectionGroups=[],n=0;n<e.sectionGroups.length;++n){if("object"!=typeof e.sectionGroups[n])throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: object expected");t.sectionGroups[n]=o.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(e.sectionGroups[n])}}if(null!=e.quantizationInfo){if("object"!=typeof e.quantizationInfo)throw TypeError(".tensorflow.magenta.NoteSequence.quantizationInfo: object expected");t.quantizationInfo=o.tensorflow.magenta.NoteSequence.QuantizationInfo.fromObject(e.quantizationInfo)}if(null!=e.subsequenceInfo){if("object"!=typeof e.subsequenceInfo)throw TypeError(".tensorflow.magenta.NoteSequence.subsequenceInfo: object expected");t.subsequenceInfo=o.tensorflow.magenta.NoteSequence.SubsequenceInfo.fromObject(e.subsequenceInfo)}if(null!=e.sequenceMetadata){if("object"!=typeof e.sequenceMetadata)throw TypeError(".tensorflow.magenta.NoteSequence.sequenceMetadata: object expected");t.sequenceMetadata=o.tensorflow.magenta.SequenceMetadata.fromObject(e.sequenceMetadata)}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.timeSignatures=[],n.keySignatures=[],n.tempos=[],n.notes=[],n.pitchBends=[],n.controlChanges=[],n.partInfos=[],n.textAnnotations=[],n.sectionAnnotations=[],n.sectionGroups=[]),t.defaults){if(n.id="",n.filename="",n.collectionName="",n.ticksPerQuarter=0,n.totalTime=0,n.sourceInfo=null,n.quantizationInfo=null,r.Long){var i=new r.Long(0,0,!1);n.totalQuantizedSteps=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.totalQuantizedSteps=t.longs===String?"0":0;n.subsequenceInfo=null,r.Long?(i=new r.Long(0,0,!1),n.referenceNumber=t.longs===String?i.toString():t.longs===Number?i.toNumber():i):n.referenceNumber=t.longs===String?"0":0,n.sequenceMetadata=null}if(null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.filename&&e.hasOwnProperty("filename")&&(n.filename=e.filename),null!=e.collectionName&&e.hasOwnProperty("collectionName")&&(n.collectionName=e.collectionName),null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&(n.ticksPerQuarter=e.ticksPerQuarter),e.timeSignatures&&e.timeSignatures.length){n.timeSignatures=[];for(var a=0;a<e.timeSignatures.length;++a)n.timeSignatures[a]=o.tensorflow.magenta.NoteSequence.TimeSignature.toObject(e.timeSignatures[a],t)}if(e.keySignatures&&e.keySignatures.length)for(n.keySignatures=[],a=0;a<e.keySignatures.length;++a)n.keySignatures[a]=o.tensorflow.magenta.NoteSequence.KeySignature.toObject(e.keySignatures[a],t);if(e.tempos&&e.tempos.length)for(n.tempos=[],a=0;a<e.tempos.length;++a)n.tempos[a]=o.tensorflow.magenta.NoteSequence.Tempo.toObject(e.tempos[a],t);if(e.notes&&e.notes.length)for(n.notes=[],a=0;a<e.notes.length;++a)n.notes[a]=o.tensorflow.magenta.NoteSequence.Note.toObject(e.notes[a],t);if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&(n.totalTime=t.json&&!isFinite(e.totalTime)?String(e.totalTime):e.totalTime),e.pitchBends&&e.pitchBends.length)for(n.pitchBends=[],a=0;a<e.pitchBends.length;++a)n.pitchBends[a]=o.tensorflow.magenta.NoteSequence.PitchBend.toObject(e.pitchBends[a],t);if(e.controlChanges&&e.controlChanges.length)for(n.controlChanges=[],a=0;a<e.controlChanges.length;++a)n.controlChanges[a]=o.tensorflow.magenta.NoteSequence.ControlChange.toObject(e.controlChanges[a],t);if(e.partInfos&&e.partInfos.length)for(n.partInfos=[],a=0;a<e.partInfos.length;++a)n.partInfos[a]=o.tensorflow.magenta.NoteSequence.PartInfo.toObject(e.partInfos[a],t);if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&(n.sourceInfo=o.tensorflow.magenta.NoteSequence.SourceInfo.toObject(e.sourceInfo,t)),e.textAnnotations&&e.textAnnotations.length)for(n.textAnnotations=[],a=0;a<e.textAnnotations.length;++a)n.textAnnotations[a]=o.tensorflow.magenta.NoteSequence.TextAnnotation.toObject(e.textAnnotations[a],t);if(null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&(n.quantizationInfo=o.tensorflow.magenta.NoteSequence.QuantizationInfo.toObject(e.quantizationInfo,t)),null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&("number"==typeof e.totalQuantizedSteps?n.totalQuantizedSteps=t.longs===String?String(e.totalQuantizedSteps):e.totalQuantizedSteps:n.totalQuantizedSteps=t.longs===String?r.Long.prototype.toString.call(e.totalQuantizedSteps):t.longs===Number?new r.LongBits(e.totalQuantizedSteps.low>>>0,e.totalQuantizedSteps.high>>>0).toNumber():e.totalQuantizedSteps),null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&(n.subsequenceInfo=o.tensorflow.magenta.NoteSequence.SubsequenceInfo.toObject(e.subsequenceInfo,t)),null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&("number"==typeof e.referenceNumber?n.referenceNumber=t.longs===String?String(e.referenceNumber):e.referenceNumber:n.referenceNumber=t.longs===String?r.Long.prototype.toString.call(e.referenceNumber):t.longs===Number?new r.LongBits(e.referenceNumber.low>>>0,e.referenceNumber.high>>>0).toNumber():e.referenceNumber),null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&(n.sequenceMetadata=o.tensorflow.magenta.SequenceMetadata.toObject(e.sequenceMetadata,t)),e.sectionAnnotations&&e.sectionAnnotations.length)for(n.sectionAnnotations=[],a=0;a<e.sectionAnnotations.length;++a)n.sectionAnnotations[a]=o.tensorflow.magenta.NoteSequence.SectionAnnotation.toObject(e.sectionAnnotations[a],t);if(e.sectionGroups&&e.sectionGroups.length)for(n.sectionGroups=[],a=0;a<e.sectionGroups.length;++a)n.sectionGroups[a]=o.tensorflow.magenta.NoteSequence.SectionGroup.toObject(e.sectionGroups[a],t);return n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i.Note=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.pitch=0,i.prototype.pitchName=0,i.prototype.velocity=0,i.prototype.startTime=0,i.prototype.quantizedStartStep=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.endTime=0,i.prototype.quantizedEndStep=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.numerator=0,i.prototype.denominator=0,i.prototype.instrument=0,i.prototype.program=0,i.prototype.isDrum=!1,i.prototype.part=0,i.prototype.voice=0,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.pitch&&e.hasOwnProperty("pitch")&&t.uint32(8).int32(e.pitch),null!=e.velocity&&e.hasOwnProperty("velocity")&&t.uint32(16).int32(e.velocity),null!=e.startTime&&e.hasOwnProperty("startTime")&&t.uint32(25).double(e.startTime),null!=e.endTime&&e.hasOwnProperty("endTime")&&t.uint32(33).double(e.endTime),null!=e.numerator&&e.hasOwnProperty("numerator")&&t.uint32(40).int32(e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&t.uint32(48).int32(e.denominator),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(56).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(64).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(72).bool(e.isDrum),null!=e.part&&e.hasOwnProperty("part")&&t.uint32(80).int32(e.part),null!=e.pitchName&&e.hasOwnProperty("pitchName")&&t.uint32(88).int32(e.pitchName),null!=e.voice&&e.hasOwnProperty("voice")&&t.uint32(96).int32(e.voice),null!=e.quantizedStartStep&&e.hasOwnProperty("quantizedStartStep")&&t.uint32(104).int64(e.quantizedStartStep),null!=e.quantizedEndStep&&e.hasOwnProperty("quantizedEndStep")&&t.uint32(112).int64(e.quantizedEndStep),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence.Note;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.pitch=e.int32();break;case 11:a.pitchName=e.int32();break;case 2:a.velocity=e.int32();break;case 3:a.startTime=e.double();break;case 13:a.quantizedStartStep=r.Long?e.int64().toNumber():e.int64();break;case 4:a.endTime=e.double();break;case 14:a.quantizedEndStep=r.Long?e.int64().toNumber():e.int64();break;case 5:a.numerator=e.int32();break;case 6:a.denominator=e.int32();break;case 7:a.instrument=e.int32();break;case 8:a.program=e.int32();break;case 9:a.isDrum=e.bool();break;case 10:a.part=e.int32();break;case 12:a.voice=e.int32();break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.pitch&&e.hasOwnProperty("pitch")&&!r.isInteger(e.pitch))return"pitch: integer expected";if(null!=e.pitchName&&e.hasOwnProperty("pitchName"))switch(e.pitchName){default:return"pitchName: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:}return null!=e.velocity&&e.hasOwnProperty("velocity")&&!r.isInteger(e.velocity)?"velocity: integer expected":null!=e.startTime&&e.hasOwnProperty("startTime")&&"number"!=typeof e.startTime?"startTime: number expected":null!=e.quantizedStartStep&&e.hasOwnProperty("quantizedStartStep")&&!(r.isInteger(e.quantizedStartStep)||e.quantizedStartStep&&r.isInteger(e.quantizedStartStep.low)&&r.isInteger(e.quantizedStartStep.high))?"quantizedStartStep: integer|Long expected":null!=e.endTime&&e.hasOwnProperty("endTime")&&"number"!=typeof e.endTime?"endTime: number expected":null!=e.quantizedEndStep&&e.hasOwnProperty("quantizedEndStep")&&!(r.isInteger(e.quantizedEndStep)||e.quantizedEndStep&&r.isInteger(e.quantizedEndStep.low)&&r.isInteger(e.quantizedEndStep.high))?"quantizedEndStep: integer|Long expected":null!=e.numerator&&e.hasOwnProperty("numerator")&&!r.isInteger(e.numerator)?"numerator: integer expected":null!=e.denominator&&e.hasOwnProperty("denominator")&&!r.isInteger(e.denominator)?"denominator: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!r.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!r.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!=typeof e.isDrum?"isDrum: boolean expected":null!=e.part&&e.hasOwnProperty("part")&&!r.isInteger(e.part)?"part: integer expected":null!=e.voice&&e.hasOwnProperty("voice")&&!r.isInteger(e.voice)?"voice: integer expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.Note)return e;var t=new o.tensorflow.magenta.NoteSequence.Note;switch(null!=e.pitch&&(t.pitch=0|e.pitch),e.pitchName){case"UNKNOWN_PITCH_NAME":case 0:t.pitchName=0;break;case"F_FLAT_FLAT":case 1:t.pitchName=1;break;case"C_FLAT_FLAT":case 2:t.pitchName=2;break;case"G_FLAT_FLAT":case 3:t.pitchName=3;break;case"D_FLAT_FLAT":case 4:t.pitchName=4;break;case"A_FLAT_FLAT":case 5:t.pitchName=5;break;case"E_FLAT_FLAT":case 6:t.pitchName=6;break;case"B_FLAT_FLAT":case 7:t.pitchName=7;break;case"F_FLAT":case 8:t.pitchName=8;break;case"C_FLAT":case 9:t.pitchName=9;break;case"G_FLAT":case 10:t.pitchName=10;break;case"D_FLAT":case 11:t.pitchName=11;break;case"A_FLAT":case 12:t.pitchName=12;break;case"E_FLAT":case 13:t.pitchName=13;break;case"B_FLAT":case 14:t.pitchName=14;break;case"F":case 15:t.pitchName=15;break;case"C":case 16:t.pitchName=16;break;case"G":case 17:t.pitchName=17;break;case"D":case 18:t.pitchName=18;break;case"A":case 19:t.pitchName=19;break;case"E":case 20:t.pitchName=20;break;case"B":case 21:t.pitchName=21;break;case"F_SHARP":case 22:t.pitchName=22;break;case"C_SHARP":case 23:t.pitchName=23;break;case"G_SHARP":case 24:t.pitchName=24;break;case"D_SHARP":case 25:t.pitchName=25;break;case"A_SHARP":case 26:t.pitchName=26;break;case"E_SHARP":case 27:t.pitchName=27;break;case"B_SHARP":case 28:t.pitchName=28;break;case"F_SHARP_SHARP":case 29:t.pitchName=29;break;case"C_SHARP_SHARP":case 30:t.pitchName=30;break;case"G_SHARP_SHARP":case 31:t.pitchName=31;break;case"D_SHARP_SHARP":case 32:t.pitchName=32;break;case"A_SHARP_SHARP":case 33:t.pitchName=33;break;case"E_SHARP_SHARP":case 34:t.pitchName=34;break;case"B_SHARP_SHARP":case 35:t.pitchName=35}return null!=e.velocity&&(t.velocity=0|e.velocity),null!=e.startTime&&(t.startTime=Number(e.startTime)),null!=e.quantizedStartStep&&(r.Long?(t.quantizedStartStep=r.Long.fromValue(e.quantizedStartStep)).unsigned=!1:"string"==typeof e.quantizedStartStep?t.quantizedStartStep=parseInt(e.quantizedStartStep,10):"number"==typeof e.quantizedStartStep?t.quantizedStartStep=e.quantizedStartStep:"object"==typeof e.quantizedStartStep&&(t.quantizedStartStep=new r.LongBits(e.quantizedStartStep.low>>>0,e.quantizedStartStep.high>>>0).toNumber())),null!=e.endTime&&(t.endTime=Number(e.endTime)),null!=e.quantizedEndStep&&(r.Long?(t.quantizedEndStep=r.Long.fromValue(e.quantizedEndStep)).unsigned=!1:"string"==typeof e.quantizedEndStep?t.quantizedEndStep=parseInt(e.quantizedEndStep,10):"number"==typeof e.quantizedEndStep?t.quantizedEndStep=e.quantizedEndStep:"object"==typeof e.quantizedEndStep&&(t.quantizedEndStep=new r.LongBits(e.quantizedEndStep.low>>>0,e.quantizedEndStep.high>>>0).toNumber())),null!=e.numerator&&(t.numerator=0|e.numerator),null!=e.denominator&&(t.denominator=0|e.denominator),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),null!=e.part&&(t.part=0|e.part),null!=e.voice&&(t.voice=0|e.voice),t},i.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.pitch=0,n.velocity=0,n.startTime=0,n.endTime=0,n.numerator=0,n.denominator=0,n.instrument=0,n.program=0,n.isDrum=!1,n.part=0,n.pitchName=t.enums===String?"UNKNOWN_PITCH_NAME":0,n.voice=0,r.Long){var i=new r.Long(0,0,!1);n.quantizedStartStep=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.quantizedStartStep=t.longs===String?"0":0;r.Long?(i=new r.Long(0,0,!1),n.quantizedEndStep=t.longs===String?i.toString():t.longs===Number?i.toNumber():i):n.quantizedEndStep=t.longs===String?"0":0}return null!=e.pitch&&e.hasOwnProperty("pitch")&&(n.pitch=e.pitch),null!=e.velocity&&e.hasOwnProperty("velocity")&&(n.velocity=e.velocity),null!=e.startTime&&e.hasOwnProperty("startTime")&&(n.startTime=t.json&&!isFinite(e.startTime)?String(e.startTime):e.startTime),null!=e.endTime&&e.hasOwnProperty("endTime")&&(n.endTime=t.json&&!isFinite(e.endTime)?String(e.endTime):e.endTime),null!=e.numerator&&e.hasOwnProperty("numerator")&&(n.numerator=e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&(n.denominator=e.denominator),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),null!=e.part&&e.hasOwnProperty("part")&&(n.part=e.part),null!=e.pitchName&&e.hasOwnProperty("pitchName")&&(n.pitchName=t.enums===String?o.tensorflow.magenta.NoteSequence.PitchName[e.pitchName]:e.pitchName),null!=e.voice&&e.hasOwnProperty("voice")&&(n.voice=e.voice),null!=e.quantizedStartStep&&e.hasOwnProperty("quantizedStartStep")&&("number"==typeof e.quantizedStartStep?n.quantizedStartStep=t.longs===String?String(e.quantizedStartStep):e.quantizedStartStep:n.quantizedStartStep=t.longs===String?r.Long.prototype.toString.call(e.quantizedStartStep):t.longs===Number?new r.LongBits(e.quantizedStartStep.low>>>0,e.quantizedStartStep.high>>>0).toNumber():e.quantizedStartStep),null!=e.quantizedEndStep&&e.hasOwnProperty("quantizedEndStep")&&("number"==typeof e.quantizedEndStep?n.quantizedEndStep=t.longs===String?String(e.quantizedEndStep):e.quantizedEndStep:n.quantizedEndStep=t.longs===String?r.Long.prototype.toString.call(e.quantizedEndStep):t.longs===Number?new r.LongBits(e.quantizedEndStep.low>>>0,e.quantizedEndStep.high>>>0).toNumber():e.quantizedEndStep),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.PitchName=(a={},(s=Object.create(a))[a[0]="UNKNOWN_PITCH_NAME"]=0,s[a[1]="F_FLAT_FLAT"]=1,s[a[2]="C_FLAT_FLAT"]=2,s[a[3]="G_FLAT_FLAT"]=3,s[a[4]="D_FLAT_FLAT"]=4,s[a[5]="A_FLAT_FLAT"]=5,s[a[6]="E_FLAT_FLAT"]=6,s[a[7]="B_FLAT_FLAT"]=7,s[a[8]="F_FLAT"]=8,s[a[9]="C_FLAT"]=9,s[a[10]="G_FLAT"]=10,s[a[11]="D_FLAT"]=11,s[a[12]="A_FLAT"]=12,s[a[13]="E_FLAT"]=13,s[a[14]="B_FLAT"]=14,s[a[15]="F"]=15,s[a[16]="C"]=16,s[a[17]="G"]=17,s[a[18]="D"]=18,s[a[19]="A"]=19,s[a[20]="E"]=20,s[a[21]="B"]=21,s[a[22]="F_SHARP"]=22,s[a[23]="C_SHARP"]=23,s[a[24]="G_SHARP"]=24,s[a[25]="D_SHARP"]=25,s[a[26]="A_SHARP"]=26,s[a[27]="E_SHARP"]=27,s[a[28]="B_SHARP"]=28,s[a[29]="F_SHARP_SHARP"]=29,s[a[30]="C_SHARP_SHARP"]=30,s[a[31]="G_SHARP_SHARP"]=31,s[a[32]="D_SHARP_SHARP"]=32,s[a[33]="A_SHARP_SHARP"]=33,s[a[34]="E_SHARP_SHARP"]=34,s[a[35]="B_SHARP_SHARP"]=35,s),i.TimeSignature=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.time=0,i.prototype.numerator=0,i.prototype.denominator=0,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.numerator&&e.hasOwnProperty("numerator")&&t.uint32(16).int32(e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&t.uint32(24).int32(e.denominator),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.TimeSignature;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.time=e.double();break;case 2:i.numerator=e.int32();break;case 3:i.denominator=e.int32();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time?"time: number expected":null!=e.numerator&&e.hasOwnProperty("numerator")&&!r.isInteger(e.numerator)?"numerator: integer expected":null!=e.denominator&&e.hasOwnProperty("denominator")&&!r.isInteger(e.denominator)?"denominator: integer expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.TimeSignature)return e;var t=new o.tensorflow.magenta.NoteSequence.TimeSignature;return null!=e.time&&(t.time=Number(e.time)),null!=e.numerator&&(t.numerator=0|e.numerator),null!=e.denominator&&(t.denominator=0|e.denominator),t},i.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.numerator=0,n.denominator=0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.numerator&&e.hasOwnProperty("numerator")&&(n.numerator=e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&(n.denominator=e.denominator),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.KeySignature=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i,a;return r.prototype.time=0,r.prototype.key=0,r.prototype.mode=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(16).int32(e.key),null!=e.mode&&e.hasOwnProperty("mode")&&t.uint32(24).int32(e.mode),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.KeySignature;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.time=e.double();break;case 2:i.key=e.int32();break;case 3:i.mode=e.int32();break;default:e.skipType(7&a)}}return i},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time)return"time: number expected";if(null!=e.key&&e.hasOwnProperty("key"))switch(e.key){default:return"key: enum value expected";case 0:case 1:case 1:case 2:case 3:case 3:case 4:case 5:case 6:case 6:case 7:case 8:case 8:case 9:case 10:case 10:case 11:}if(null!=e.mode&&e.hasOwnProperty("mode"))switch(e.mode){default:return"mode: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:}return null},r.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.KeySignature)return e;var t=new o.tensorflow.magenta.NoteSequence.KeySignature;switch(null!=e.time&&(t.time=Number(e.time)),e.key){case"C":case 0:t.key=0;break;case"C_SHARP":case 1:t.key=1;break;case"D_FLAT":case 1:t.key=1;break;case"D":case 2:t.key=2;break;case"D_SHARP":case 3:t.key=3;break;case"E_FLAT":case 3:t.key=3;break;case"E":case 4:t.key=4;break;case"F":case 5:t.key=5;break;case"F_SHARP":case 6:t.key=6;break;case"G_FLAT":case 6:t.key=6;break;case"G":case 7:t.key=7;break;case"G_SHARP":case 8:t.key=8;break;case"A_FLAT":case 8:t.key=8;break;case"A":case 9:t.key=9;break;case"A_SHARP":case 10:t.key=10;break;case"B_FLAT":case 10:t.key=10;break;case"B":case 11:t.key=11}switch(e.mode){case"MAJOR":case 0:t.mode=0;break;case"MINOR":case 1:t.mode=1;break;case"NOT_SPECIFIED":case 2:t.mode=2;break;case"MIXOLYDIAN":case 3:t.mode=3;break;case"DORIAN":case 4:t.mode=4;break;case"PHRYGIAN":case 5:t.mode=5;break;case"LYDIAN":case 6:t.mode=6;break;case"LOCRIAN":case 7:t.mode=7}return t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.key=t.enums===String?"C":0,n.mode=t.enums===String?"MAJOR":0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.key&&e.hasOwnProperty("key")&&(n.key=t.enums===String?o.tensorflow.magenta.NoteSequence.KeySignature.Key[e.key]:e.key),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=t.enums===String?o.tensorflow.magenta.NoteSequence.KeySignature.Mode[e.mode]:e.mode),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r.Key=(i={},(a=Object.create(i))[i[0]="C"]=0,a[i[1]="C_SHARP"]=1,a.D_FLAT=1,a[i[2]="D"]=2,a[i[3]="D_SHARP"]=3,a.E_FLAT=3,a[i[4]="E"]=4,a[i[5]="F"]=5,a[i[6]="F_SHARP"]=6,a.G_FLAT=6,a[i[7]="G"]=7,a[i[8]="G_SHARP"]=8,a.A_FLAT=8,a[i[9]="A"]=9,a[i[10]="A_SHARP"]=10,a.B_FLAT=10,a[i[11]="B"]=11,a),r.Mode=function(){var e={},t=Object.create(e);return t[e[0]="MAJOR"]=0,t[e[1]="MINOR"]=1,t[e[2]="NOT_SPECIFIED"]=2,t[e[3]="MIXOLYDIAN"]=3,t[e[4]="DORIAN"]=4,t[e[5]="PHRYGIAN"]=5,t[e[6]="LYDIAN"]=6,t[e[7]="LOCRIAN"]=7,t}(),r}(),i.Tempo=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.time=0,r.prototype.qpm=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.qpm&&e.hasOwnProperty("qpm")&&t.uint32(17).double(e.qpm),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.Tempo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.time=e.double();break;case 2:i.qpm=e.double();break;default:e.skipType(7&a)}}return i},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time?"time: number expected":null!=e.qpm&&e.hasOwnProperty("qpm")&&"number"!=typeof e.qpm?"qpm: number expected":null},r.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.Tempo)return e;var t=new o.tensorflow.magenta.NoteSequence.Tempo;return null!=e.time&&(t.time=Number(e.time)),null!=e.qpm&&(t.qpm=Number(e.qpm)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.qpm=0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.qpm&&e.hasOwnProperty("qpm")&&(n.qpm=t.json&&!isFinite(e.qpm)?String(e.qpm):e.qpm),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.PitchBend=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.time=0,i.prototype.bend=0,i.prototype.instrument=0,i.prototype.program=0,i.prototype.isDrum=!1,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.bend&&e.hasOwnProperty("bend")&&t.uint32(16).int32(e.bend),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(24).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(32).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(40).bool(e.isDrum),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.PitchBend;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.time=e.double();break;case 2:i.bend=e.int32();break;case 3:i.instrument=e.int32();break;case 4:i.program=e.int32();break;case 5:i.isDrum=e.bool();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time?"time: number expected":null!=e.bend&&e.hasOwnProperty("bend")&&!r.isInteger(e.bend)?"bend: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!r.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!r.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!=typeof e.isDrum?"isDrum: boolean expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.PitchBend)return e;var t=new o.tensorflow.magenta.NoteSequence.PitchBend;return null!=e.time&&(t.time=Number(e.time)),null!=e.bend&&(t.bend=0|e.bend),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),t},i.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.bend=0,n.instrument=0,n.program=0,n.isDrum=!1),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.bend&&e.hasOwnProperty("bend")&&(n.bend=e.bend),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlChange=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.time=0,i.prototype.quantizedStep=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.controlNumber=0,i.prototype.controlValue=0,i.prototype.instrument=0,i.prototype.program=0,i.prototype.isDrum=!1,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&t.uint32(16).int32(e.controlNumber),null!=e.controlValue&&e.hasOwnProperty("controlValue")&&t.uint32(24).int32(e.controlValue),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(32).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(40).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(48).bool(e.isDrum),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&t.uint32(56).int64(e.quantizedStep),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence.ControlChange;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.time=e.double();break;case 7:a.quantizedStep=r.Long?e.int64().toNumber():e.int64();break;case 2:a.controlNumber=e.int32();break;case 3:a.controlValue=e.int32();break;case 4:a.instrument=e.int32();break;case 5:a.program=e.int32();break;case 6:a.isDrum=e.bool();break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time?"time: number expected":null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&!(r.isInteger(e.quantizedStep)||e.quantizedStep&&r.isInteger(e.quantizedStep.low)&&r.isInteger(e.quantizedStep.high))?"quantizedStep: integer|Long expected":null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&!r.isInteger(e.controlNumber)?"controlNumber: integer expected":null!=e.controlValue&&e.hasOwnProperty("controlValue")&&!r.isInteger(e.controlValue)?"controlValue: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!r.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!r.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!=typeof e.isDrum?"isDrum: boolean expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.ControlChange)return e;var t=new o.tensorflow.magenta.NoteSequence.ControlChange;return null!=e.time&&(t.time=Number(e.time)),null!=e.quantizedStep&&(r.Long?(t.quantizedStep=r.Long.fromValue(e.quantizedStep)).unsigned=!1:"string"==typeof e.quantizedStep?t.quantizedStep=parseInt(e.quantizedStep,10):"number"==typeof e.quantizedStep?t.quantizedStep=e.quantizedStep:"object"==typeof e.quantizedStep&&(t.quantizedStep=new r.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber())),null!=e.controlNumber&&(t.controlNumber=0|e.controlNumber),null!=e.controlValue&&(t.controlValue=0|e.controlValue),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),t},i.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,n.controlNumber=0,n.controlValue=0,n.instrument=0,n.program=0,n.isDrum=!1,r.Long){var o=new r.Long(0,0,!1);n.quantizedStep=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.quantizedStep=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&(n.controlNumber=e.controlNumber),null!=e.controlValue&&e.hasOwnProperty("controlValue")&&(n.controlValue=e.controlValue),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&("number"==typeof e.quantizedStep?n.quantizedStep=t.longs===String?String(e.quantizedStep):e.quantizedStep:n.quantizedStep=t.longs===String?r.Long.prototype.toString.call(e.quantizedStep):t.longs===Number?new r.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber():e.quantizedStep),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.PartInfo=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.part=0,i.prototype.name="",i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.part&&e.hasOwnProperty("part")&&t.uint32(8).int32(e.part),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.PartInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.part=e.int32();break;case 2:i.name=e.string();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.part&&e.hasOwnProperty("part")&&!r.isInteger(e.part)?"part: integer expected":null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name)?"name: string expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.PartInfo)return e;var t=new o.tensorflow.magenta.NoteSequence.PartInfo;return null!=e.part&&(t.part=0|e.part),null!=e.name&&(t.name=String(e.name)),t},i.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.part=0,n.name=""),null!=e.part&&e.hasOwnProperty("part")&&(n.part=e.part),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.SourceInfo=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var i,a;return r.prototype.sourceType=0,r.prototype.encodingType=0,r.prototype.parser=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.sourceType&&e.hasOwnProperty("sourceType")&&t.uint32(8).int32(e.sourceType),null!=e.encodingType&&e.hasOwnProperty("encodingType")&&t.uint32(16).int32(e.encodingType),null!=e.parser&&e.hasOwnProperty("parser")&&t.uint32(24).int32(e.parser),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.SourceInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.sourceType=e.int32();break;case 2:i.encodingType=e.int32();break;case 3:i.parser=e.int32();break;default:e.skipType(7&a)}}return i},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.sourceType&&e.hasOwnProperty("sourceType"))switch(e.sourceType){default:return"sourceType: enum value expected";case 0:case 1:case 2:}if(null!=e.encodingType&&e.hasOwnProperty("encodingType"))switch(e.encodingType){default:return"encodingType: enum value expected";case 0:case 1:case 2:case 3:case 4:}if(null!=e.parser&&e.hasOwnProperty("parser"))switch(e.parser){default:return"parser: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null},r.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.SourceInfo)return e;var t=new o.tensorflow.magenta.NoteSequence.SourceInfo;switch(e.sourceType){case"UNKNOWN_SOURCE_TYPE":case 0:t.sourceType=0;break;case"SCORE_BASED":case 1:t.sourceType=1;break;case"PERFORMANCE_BASED":case 2:t.sourceType=2}switch(e.encodingType){case"UNKNOWN_ENCODING_TYPE":case 0:t.encodingType=0;break;case"MUSIC_XML":case 1:t.encodingType=1;break;case"ABC":case 2:t.encodingType=2;break;case"MIDI":case 3:t.encodingType=3;break;case"MUSICNET":case 4:t.encodingType=4}switch(e.parser){case"UNKNOWN_PARSER":case 0:t.parser=0;break;case"MUSIC21":case 1:t.parser=1;break;case"PRETTY_MIDI":case 2:t.parser=2;break;case"MAGENTA_MUSIC_XML":case 3:t.parser=3;break;case"MAGENTA_MUSICNET":case 4:t.parser=4;break;case"MAGENTA_ABC":case 5:t.parser=5;break;case"TONEJS_MIDI_CONVERT":case 6:t.parser=6}return t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceType=t.enums===String?"UNKNOWN_SOURCE_TYPE":0,n.encodingType=t.enums===String?"UNKNOWN_ENCODING_TYPE":0,n.parser=t.enums===String?"UNKNOWN_PARSER":0),null!=e.sourceType&&e.hasOwnProperty("sourceType")&&(n.sourceType=t.enums===String?o.tensorflow.magenta.NoteSequence.SourceInfo.SourceType[e.sourceType]:e.sourceType),null!=e.encodingType&&e.hasOwnProperty("encodingType")&&(n.encodingType=t.enums===String?o.tensorflow.magenta.NoteSequence.SourceInfo.EncodingType[e.encodingType]:e.encodingType),null!=e.parser&&e.hasOwnProperty("parser")&&(n.parser=t.enums===String?o.tensorflow.magenta.NoteSequence.SourceInfo.Parser[e.parser]:e.parser),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r.SourceType=(i={},(a=Object.create(i))[i[0]="UNKNOWN_SOURCE_TYPE"]=0,a[i[1]="SCORE_BASED"]=1,a[i[2]="PERFORMANCE_BASED"]=2,a),r.EncodingType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_ENCODING_TYPE"]=0,t[e[1]="MUSIC_XML"]=1,t[e[2]="ABC"]=2,t[e[3]="MIDI"]=3,t[e[4]="MUSICNET"]=4,t}(),r.Parser=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_PARSER"]=0,t[e[1]="MUSIC21"]=1,t[e[2]="PRETTY_MIDI"]=2,t[e[3]="MAGENTA_MUSIC_XML"]=3,t[e[4]="MAGENTA_MUSICNET"]=4,t[e[5]="MAGENTA_ABC"]=5,t[e[6]="TONEJS_MIDI_CONVERT"]=6,t}(),r}(),i.TextAnnotation=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a,s;return i.prototype.time=0,i.prototype.quantizedStep=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.text="",i.prototype.annotationType=0,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.text&&e.hasOwnProperty("text")&&t.uint32(18).string(e.text),null!=e.annotationType&&e.hasOwnProperty("annotationType")&&t.uint32(24).int32(e.annotationType),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&t.uint32(32).int64(e.quantizedStep),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence.TextAnnotation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.time=e.double();break;case 4:a.quantizedStep=r.Long?e.int64().toNumber():e.int64();break;case 2:a.text=e.string();break;case 3:a.annotationType=e.int32();break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time)return"time: number expected";if(null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&!(r.isInteger(e.quantizedStep)||e.quantizedStep&&r.isInteger(e.quantizedStep.low)&&r.isInteger(e.quantizedStep.high)))return"quantizedStep: integer|Long expected";if(null!=e.text&&e.hasOwnProperty("text")&&!r.isString(e.text))return"text: string expected";if(null!=e.annotationType&&e.hasOwnProperty("annotationType"))switch(e.annotationType){default:return"annotationType: enum value expected";case 0:case 1:case 2:}return null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.TextAnnotation)return e;var t=new o.tensorflow.magenta.NoteSequence.TextAnnotation;switch(null!=e.time&&(t.time=Number(e.time)),null!=e.quantizedStep&&(r.Long?(t.quantizedStep=r.Long.fromValue(e.quantizedStep)).unsigned=!1:"string"==typeof e.quantizedStep?t.quantizedStep=parseInt(e.quantizedStep,10):"number"==typeof e.quantizedStep?t.quantizedStep=e.quantizedStep:"object"==typeof e.quantizedStep&&(t.quantizedStep=new r.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber())),null!=e.text&&(t.text=String(e.text)),e.annotationType){case"UNKNOWN":case 0:t.annotationType=0;break;case"CHORD_SYMBOL":case 1:t.annotationType=1;break;case"BEAT":case 2:t.annotationType=2}return t},i.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,n.text="",n.annotationType=t.enums===String?"UNKNOWN":0,r.Long){var i=new r.Long(0,0,!1);n.quantizedStep=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.quantizedStep=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.text&&e.hasOwnProperty("text")&&(n.text=e.text),null!=e.annotationType&&e.hasOwnProperty("annotationType")&&(n.annotationType=t.enums===String?o.tensorflow.magenta.NoteSequence.TextAnnotation.TextAnnotationType[e.annotationType]:e.annotationType),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&("number"==typeof e.quantizedStep?n.quantizedStep=t.longs===String?String(e.quantizedStep):e.quantizedStep:n.quantizedStep=t.longs===String?r.Long.prototype.toString.call(e.quantizedStep):t.longs===Number?new r.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber():e.quantizedStep),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i.TextAnnotationType=(a={},(s=Object.create(a))[a[0]="UNKNOWN"]=0,s[a[1]="CHORD_SYMBOL"]=1,s[a[2]="BEAT"]=2,s),i}(),i.QuantizationInfo=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.stepsPerQuarter=0,i.prototype.stepsPerSecond=0,Object.defineProperty(i.prototype,"resolution",{get:r.oneOfGetter(a=["stepsPerQuarter","stepsPerSecond"]),set:r.oneOfSetter(a)}),i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&t.uint32(8).int32(e.stepsPerQuarter),null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")&&t.uint32(16).int32(e.stepsPerSecond),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.QuantizationInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.stepsPerQuarter=e.int32();break;case 2:i.stepsPerSecond=e.int32();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&(t.resolution=1,!r.isInteger(e.stepsPerQuarter)))return"stepsPerQuarter: integer expected";if(null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")){if(1===t.resolution)return"resolution: multiple values";if(t.resolution=1,!r.isInteger(e.stepsPerSecond))return"stepsPerSecond: integer expected"}return null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.QuantizationInfo)return e;var t=new o.tensorflow.magenta.NoteSequence.QuantizationInfo;return null!=e.stepsPerQuarter&&(t.stepsPerQuarter=0|e.stepsPerQuarter),null!=e.stepsPerSecond&&(t.stepsPerSecond=0|e.stepsPerSecond),t},i.toObject=function(e,t){t||(t={});var n={};return null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&(n.stepsPerQuarter=e.stepsPerQuarter,t.oneofs&&(n.resolution="stepsPerQuarter")),null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")&&(n.stepsPerSecond=e.stepsPerSecond,t.oneofs&&(n.resolution="stepsPerSecond")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.SubsequenceInfo=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.startTimeOffset=0,r.prototype.endTimeOffset=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&t.uint32(9).double(e.startTimeOffset),null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&t.uint32(17).double(e.endTimeOffset),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.SubsequenceInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.startTimeOffset=e.double();break;case 2:i.endTimeOffset=e.double();break;default:e.skipType(7&a)}}return i},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&"number"!=typeof e.startTimeOffset?"startTimeOffset: number expected":null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&"number"!=typeof e.endTimeOffset?"endTimeOffset: number expected":null},r.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.SubsequenceInfo)return e;var t=new o.tensorflow.magenta.NoteSequence.SubsequenceInfo;return null!=e.startTimeOffset&&(t.startTimeOffset=Number(e.startTimeOffset)),null!=e.endTimeOffset&&(t.endTimeOffset=Number(e.endTimeOffset)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.startTimeOffset=0,n.endTimeOffset=0),null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&(n.startTimeOffset=t.json&&!isFinite(e.startTimeOffset)?String(e.startTimeOffset):e.startTimeOffset),null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&(n.endTimeOffset=t.json&&!isFinite(e.endTimeOffset)?String(e.endTimeOffset):e.endTimeOffset),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.SectionAnnotation=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.time=0,i.prototype.sectionId=r.Long?r.Long.fromBits(0,0,!1):0,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&t.uint32(32).int64(e.sectionId),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence.SectionAnnotation;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.time=e.double();break;case 4:a.sectionId=r.Long?e.int64().toNumber():e.int64();break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!=typeof e.time?"time: number expected":null!=e.sectionId&&e.hasOwnProperty("sectionId")&&!(r.isInteger(e.sectionId)||e.sectionId&&r.isInteger(e.sectionId.low)&&r.isInteger(e.sectionId.high))?"sectionId: integer|Long expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.SectionAnnotation)return e;var t=new o.tensorflow.magenta.NoteSequence.SectionAnnotation;return null!=e.time&&(t.time=Number(e.time)),null!=e.sectionId&&(r.Long?(t.sectionId=r.Long.fromValue(e.sectionId)).unsigned=!1:"string"==typeof e.sectionId?t.sectionId=parseInt(e.sectionId,10):"number"==typeof e.sectionId?t.sectionId=e.sectionId:"object"==typeof e.sectionId&&(t.sectionId=new r.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber())),t},i.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,r.Long){var o=new r.Long(0,0,!1);n.sectionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.sectionId=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&("number"==typeof e.sectionId?n.sectionId=t.longs===String?String(e.sectionId):e.sectionId:n.sectionId=t.longs===String?r.Long.prototype.toString.call(e.sectionId):t.longs===Number?new r.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber():e.sectionId),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.Section=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.sectionId=r.Long?r.Long.fromBits(0,0,!1):0,i.prototype.sectionGroup=null,Object.defineProperty(i.prototype,"sectionType",{get:r.oneOfGetter(a=["sectionId","sectionGroup"]),set:r.oneOfSetter(a)}),i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&t.uint32(8).int64(e.sectionId),null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")&&o.tensorflow.magenta.NoteSequence.SectionGroup.encode(e.sectionGroup,t.uint32(18).fork()).ldelim(),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new o.tensorflow.magenta.NoteSequence.Section;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:a.sectionId=r.Long?e.int64().toNumber():e.int64();break;case 2:a.sectionGroup=o.tensorflow.magenta.NoteSequence.SectionGroup.decode(e,e.uint32());break;default:e.skipType(7&s)}}return a},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.sectionId&&e.hasOwnProperty("sectionId")&&(t.sectionType=1,!(r.isInteger(e.sectionId)||e.sectionId&&r.isInteger(e.sectionId.low)&&r.isInteger(e.sectionId.high))))return"sectionId: integer|Long expected";if(null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")){if(1===t.sectionType)return"sectionType: multiple values";t.sectionType=1;var n=o.tensorflow.magenta.NoteSequence.SectionGroup.verify(e.sectionGroup);if(n)return"sectionGroup."+n}return null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.Section)return e;var t=new o.tensorflow.magenta.NoteSequence.Section;if(null!=e.sectionId&&(r.Long?(t.sectionId=r.Long.fromValue(e.sectionId)).unsigned=!1:"string"==typeof e.sectionId?t.sectionId=parseInt(e.sectionId,10):"number"==typeof e.sectionId?t.sectionId=e.sectionId:"object"==typeof e.sectionId&&(t.sectionId=new r.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber())),null!=e.sectionGroup){if("object"!=typeof e.sectionGroup)throw TypeError(".tensorflow.magenta.NoteSequence.Section.sectionGroup: object expected");t.sectionGroup=o.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(e.sectionGroup)}return t},i.toObject=function(e,t){t||(t={});var n={};return null!=e.sectionId&&e.hasOwnProperty("sectionId")&&("number"==typeof e.sectionId?n.sectionId=t.longs===String?String(e.sectionId):e.sectionId:n.sectionId=t.longs===String?r.Long.prototype.toString.call(e.sectionId):t.longs===Number?new r.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber():e.sectionId,t.oneofs&&(n.sectionType="sectionId")),null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")&&(n.sectionGroup=o.tensorflow.magenta.NoteSequence.SectionGroup.toObject(e.sectionGroup,t),t.oneofs&&(n.sectionType="sectionGroup")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.SectionGroup=function(){function i(e){if(this.sections=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.sections=r.emptyArray,i.prototype.numTimes=0,i.create=function(e){return new i(e)},i.encode=function(e,t){if(t||(t=n.create()),null!=e.sections&&e.sections.length)for(var r=0;r<e.sections.length;++r)o.tensorflow.magenta.NoteSequence.Section.encode(e.sections[r],t.uint32(10).fork()).ldelim();return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&t.uint32(16).int32(e.numTimes),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.NoteSequence.SectionGroup;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.sections&&i.sections.length||(i.sections=[]),i.sections.push(o.tensorflow.magenta.NoteSequence.Section.decode(e,e.uint32()));break;case 2:i.numTimes=e.int32();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.sections&&e.hasOwnProperty("sections")){if(!Array.isArray(e.sections))return"sections: array expected";for(var t=0;t<e.sections.length;++t){var n=o.tensorflow.magenta.NoteSequence.Section.verify(e.sections[t]);if(n)return"sections."+n}}return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&!r.isInteger(e.numTimes)?"numTimes: integer expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.NoteSequence.SectionGroup)return e;var t=new o.tensorflow.magenta.NoteSequence.SectionGroup;if(e.sections){if(!Array.isArray(e.sections))throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: array expected");t.sections=[];for(var n=0;n<e.sections.length;++n){if("object"!=typeof e.sections[n])throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: object expected");t.sections[n]=o.tensorflow.magenta.NoteSequence.Section.fromObject(e.sections[n])}}return null!=e.numTimes&&(t.numTimes=0|e.numTimes),t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sections=[]),t.defaults&&(n.numTimes=0),e.sections&&e.sections.length){n.sections=[];for(var r=0;r<e.sections.length;++r)n.sections[r]=o.tensorflow.magenta.NoteSequence.Section.toObject(e.sections[r],t)}return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&(n.numTimes=e.numTimes),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i}(),i.SequenceMetadata=function(){function i(e){if(this.genre=[],this.composers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.title="",i.prototype.artist="",i.prototype.genre=r.emptyArray,i.prototype.composers=r.emptyArray,i.create=function(e){return new i(e)},i.encode=function(e,t){if(t||(t=n.create()),null!=e.title&&e.hasOwnProperty("title")&&t.uint32(10).string(e.title),null!=e.artist&&e.hasOwnProperty("artist")&&t.uint32(18).string(e.artist),null!=e.genre&&e.genre.length)for(var r=0;r<e.genre.length;++r)t.uint32(26).string(e.genre[r]);if(null!=e.composers&&e.composers.length)for(r=0;r<e.composers.length;++r)t.uint32(34).string(e.composers[r]);return t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.SequenceMetadata;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.title=e.string();break;case 2:i.artist=e.string();break;case 3:i.genre&&i.genre.length||(i.genre=[]),i.genre.push(e.string());break;case 4:i.composers&&i.composers.length||(i.composers=[]),i.composers.push(e.string());break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.title&&e.hasOwnProperty("title")&&!r.isString(e.title))return"title: string expected";if(null!=e.artist&&e.hasOwnProperty("artist")&&!r.isString(e.artist))return"artist: string expected";if(null!=e.genre&&e.hasOwnProperty("genre")){if(!Array.isArray(e.genre))return"genre: array expected";for(var t=0;t<e.genre.length;++t)if(!r.isString(e.genre[t]))return"genre: string[] expected"}if(null!=e.composers&&e.hasOwnProperty("composers")){if(!Array.isArray(e.composers))return"composers: array expected";for(t=0;t<e.composers.length;++t)if(!r.isString(e.composers[t]))return"composers: string[] expected"}return null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.SequenceMetadata)return e;var t=new o.tensorflow.magenta.SequenceMetadata;if(null!=e.title&&(t.title=String(e.title)),null!=e.artist&&(t.artist=String(e.artist)),e.genre){if(!Array.isArray(e.genre))throw TypeError(".tensorflow.magenta.SequenceMetadata.genre: array expected");t.genre=[];for(var n=0;n<e.genre.length;++n)t.genre[n]=String(e.genre[n])}if(e.composers){if(!Array.isArray(e.composers))throw TypeError(".tensorflow.magenta.SequenceMetadata.composers: array expected");for(t.composers=[],n=0;n<e.composers.length;++n)t.composers[n]=String(e.composers[n])}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.genre=[],n.composers=[]),t.defaults&&(n.title="",n.artist=""),null!=e.title&&e.hasOwnProperty("title")&&(n.title=e.title),null!=e.artist&&e.hasOwnProperty("artist")&&(n.artist=e.artist),e.genre&&e.genre.length){n.genre=[];for(var r=0;r<e.genre.length;++r)n.genre[r]=e.genre[r]}if(e.composers&&e.composers.length)for(n.composers=[],r=0;r<e.composers.length;++r)n.composers[r]=e.composers[r];return n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.VelocityRange=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.min=0,i.prototype.max=0,i.create=function(e){return new i(e)},i.encode=function(e,t){return t||(t=n.create()),null!=e.min&&e.hasOwnProperty("min")&&t.uint32(8).int32(e.min),null!=e.max&&e.hasOwnProperty("max")&&t.uint32(16).int32(e.max),t},i.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new o.tensorflow.magenta.VelocityRange;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.min=e.int32();break;case 2:i.max=e.int32();break;default:e.skipType(7&a)}}return i},i.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},i.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.min&&e.hasOwnProperty("min")&&!r.isInteger(e.min)?"min: integer expected":null!=e.max&&e.hasOwnProperty("max")&&!r.isInteger(e.max)?"max: integer expected":null},i.fromObject=function(e){if(e instanceof o.tensorflow.magenta.VelocityRange)return e;var t=new o.tensorflow.magenta.VelocityRange;return null!=e.min&&(t.min=0|e.min),null!=e.max&&(t.max=0|e.max),t},i.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.min=0,n.max=0),null!=e.min&&e.hasOwnProperty("min")&&(n.min=e.min),null!=e.max&&e.hasOwnProperty("max")&&(n.max=e.max),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i),a}(),module.exports=o;
},{"protobufjs/minimal":"fCoP"}],"t75P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoteSequence=void 0;var e=require("./proto"),o=e.tensorflow.magenta.NoteSequence;exports.NoteSequence=o;
},{"./proto":"mVj2"}],"z2hx":[function(require,module,exports) {

"use strict";var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")},t=e();module.exports=exports=t.fetch,t.fetch&&(exports.default=t.fetch.bind(t)),exports.Headers=t.Headers,exports.Request=t.Request,exports.Response=t.Response;
},{}],"G6jN":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.timing=exports.now=void 0;const t=1e9,o=e.process.hrtime(),r=()=>{const t=e.process.hrtime(o);return t[0]+t[1]/1e9};exports.now=r;const s={navigationStart:Date.now()};exports.timing=s;
},{}],"h8YE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.userAgent=void 0;const e="";exports.userAgent="";
},{}],"fTaP":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function o(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("cannot find the global object")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOfflineAudioContext=a,exports.isSafari=exports.navigator=exports.performance=exports.fetch=void 0;const t=o(),n=t.fetch.bind(t);exports.fetch=n;const r=t.performance;exports.performance=r;const i=t.navigator;exports.navigator=i;const f=!!t.webkitOfflineAudioContext;exports.isSafari=f;const s=void 0!==t.WorkerGlobalScope;function a(e){if(e=f?44100:e,s)throw new Error("Cannot use offline audio context in a web worker.");const o=t.webkitOfflineAudioContext;return f?new o(1,e,e):new t.OfflineAudioContext(1,e,e)}
},{}],"cgxr":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isSafari",{enumerable:!0,get:function(){return r.isSafari}}),Object.defineProperty(exports,"getOfflineAudioContext",{enumerable:!0,get:function(){return r.getOfflineAudioContext}}),exports.navigator=exports.performance=exports.fetch=void 0;var r=require("./global_browser");const o=void 0!==e&&void 0!==e.process,t=o?require("node-fetch"):window.fetch.bind(window);exports.fetch=t;const n=o?require("./performance_node"):window.performance;exports.performance=n;const i=o?require("./navigator_node"):window.navigator;exports.navigator=i;
},{"node-fetch":"z2hx","./performance_node":"G6jN","./navigator_node":"h8YE","./global_browser":"fTaP"}],"HDYb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setVerbosity=r,exports.log=n,exports.logWithDuration=s,exports.verbosity=exports.Level=void 0;var e,o=require("../core/compat/global");exports.Level=e,function(e){e[e.NONE=0]="NONE",e[e.WARN=5]="WARN",e[e.INFO=10]="INFO",e[e.DEBUG=20]="DEBUG"}(e||(exports.Level=e={}));let t=10;function r(e){e=e}function n(e,o="Magenta.js",r=10){if(0===r)throw Error("Logging level cannot be NONE.");if(t>=r){(5===r?console.warn:console.log)(`%c ${o} `,"background:magenta; color:white",e)}}function s(e,t,r="Magenta.js",s=10){n(`${e} in ${((o.performance.now()-t)/1e3).toPrecision(3)}s`,r,s)}exports.verbosity=t;
},{"../core/compat/global":"cgxr"}],"x6ox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=c,exports.stepsPerQuarterToStepsPerSecond=S,exports.quantizeToStep=d,exports.quantizeNoteSequence=z,exports.isQuantizedSequence=h,exports.assertIsQuantizedSequence=E,exports.isRelativeQuantizedSequence=T,exports.assertIsRelativeQuantizedSequence=g,exports.isAbsoluteQuantizedSequence=N,exports.assertIsAbsoluteQuantizedSequence=x,exports.unquantizeSequence=w,exports.createQuantizedNoteSequence=O,exports.mergeInstruments=_,exports.replaceInstruments=I,exports.mergeConsecutiveNotes=Q,exports.applySustainControlChanges=y,exports.concatenate=P,exports.trim=v,exports.split=U,exports.QuantizationStatusException=exports.MultipleTempoException=exports.NegativeTimeException=exports.BadTimeSignatureException=exports.MultipleTimeSignatureException=void 0;var t=require("../protobuf/index"),e=o(require("./constants"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(n=function(t){return t?o:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=n(e);if(o&&o.has(t))return o.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,o&&o.set(t,i),i}const i=.5;class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}exports.MultipleTimeSignatureException=r;class s extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}exports.BadTimeSignatureException=s;class a extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}exports.NegativeTimeException=a;class u extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}exports.MultipleTempoException=u;class p extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}function m(t){return t&&0==(t&t-1)}function c(e){return t.NoteSequence.decode(t.NoteSequence.encode(e).finish())}function S(t,e){return t*e/60}function d(t,e,n=i){const o=t*e;return Math.floor(o+(1-n))}function f(t){return t.controlChanges.concat(t.textAnnotations)}function q(t,e){for(const n of t.notes){if(n.quantizedStartStep=d(n.startTime,e),n.quantizedEndStep=d(n.endTime,e),n.quantizedEndStep===n.quantizedStartStep&&(n.quantizedEndStep+=1),n.quantizedStartStep<0||n.quantizedEndStep<0)throw new a("Got negative note time: start_step = "+`${n.quantizedStartStep}, end_step = `+`${n.quantizedEndStep}`);n.quantizedEndStep>t.totalQuantizedSteps&&(t.totalQuantizedSteps=n.quantizedEndStep)}f(t).forEach(t=>{if(t.quantizedStep=d(t.time,e),t.quantizedStep<0)throw new a(`Got negative event time: step = ${t.quantizedStep}`)})}function l(t){if(t.tempos&&0!==t.tempos.length){if(t.tempos.sort((t,e)=>t.time-e.time),0!==t.tempos[0].time&&t.tempos[0].qpm!==e.DEFAULT_QUARTERS_PER_MINUTE)throw new u("NoteSequence has an implicit tempo change from initial "+`${e.DEFAULT_QUARTERS_PER_MINUTE} qpm to `+`${t.tempos[0].qpm} qpm at ${t.tempos[0].time} seconds.`);for(let e=1;e<t.tempos.length;e++)if(t.tempos[e].qpm!==t.tempos[0].qpm)throw new u("NoteSequence has at least one tempo change from "+`${t.tempos[0].qpm} qpm to ${t.tempos[e].qpm}`+`qpm at ${t.tempos[e].time} seconds.`)}}function z(n,o){const i=c(n);if(i.quantizationInfo=t.NoteSequence.QuantizationInfo.create({stepsPerQuarter:o}),i.timeSignatures.length>0){if(i.timeSignatures.sort((t,e)=>t.time-e.time),0!==i.timeSignatures[0].time&&(4!==i.timeSignatures[0].numerator||4!==i.timeSignatures[0].denominator))throw new r("NoteSequence has an implicit change from initial 4/4 time "+`signature to ${i.timeSignatures[0].numerator}/`+`${i.timeSignatures[0].denominator} at `+`${i.timeSignatures[0].time} seconds.`);for(let t=1;t<i.timeSignatures.length;t++){const e=i.timeSignatures[t];if(e.numerator!==i.timeSignatures[0].numerator||e.denominator!==i.timeSignatures[0].denominator)throw new r("NoteSequence has at least one time signature change from "+`${i.timeSignatures[0].numerator}/`+`${i.timeSignatures[0].denominator} to `+`${e.numerator}/${e.denominator} `+`at ${e.time} seconds`)}i.timeSignatures[0].time=0,i.timeSignatures=[i.timeSignatures[0]]}else{const e=t.NoteSequence.TimeSignature.create({numerator:4,denominator:4,time:0});i.timeSignatures.push(e)}const a=i.timeSignatures[0];if(!m(a.denominator))throw new s("Denominator is not a power of 2. Time signature: "+`${a.numerator}/${a.denominator}`);if(0===a.numerator)throw new s("Numerator is 0. Time signature: "+`${a.numerator}/${a.denominator}`);if(i.tempos.length>0)l(i),i.tempos[0].time=0,i.tempos=[i.tempos[0]];else{const n=t.NoteSequence.Tempo.create({qpm:e.DEFAULT_QUARTERS_PER_MINUTE,time:0});i.tempos.push(n)}const u=S(o,i.tempos[0].qpm);return i.totalQuantizedSteps=d(n.totalTime,u),q(i,u),i}function h(t){return t.quantizationInfo&&(t.quantizationInfo.stepsPerQuarter>0||t.quantizationInfo.stepsPerSecond>0)}function E(t){if(!h(t))throw new p(`NoteSequence ${t.id} is not quantized (missing quantizationInfo)`)}function T(t){return t.quantizationInfo&&t.quantizationInfo.stepsPerQuarter>0}function g(t){if(!T(t))throw new p(`NoteSequence ${t.id} is not quantized or is quantized based on absolute timing`)}function N(t){return t.quantizationInfo&&t.quantizationInfo.stepsPerSecond>0}function x(t){if(!N(t))throw new p(`NoteSequence ${t.id} is not quantized or is quantized based on relative timing`)}function w(n,o){g(n),l(n);const i=c(n);o?i.tempos&&i.tempos.length>0?i.tempos[0].qpm=o:i.tempos.push(t.NoteSequence.Tempo.create({time:0,qpm:o})):o=n.tempos&&n.tempos.length>0?i.tempos[0].qpm:e.DEFAULT_QUARTERS_PER_MINUTE;const r=t=>t/i.quantizationInfo.stepsPerQuarter*(60/o);return i.totalTime=r(i.totalQuantizedSteps),i.notes.forEach(t=>{t.startTime=r(t.quantizedStartStep),t.endTime=r(t.quantizedEndStep),i.totalTime=Math.max(i.totalTime,t.endTime),delete t.quantizedStartStep,delete t.quantizedEndStep}),f(i).forEach(t=>{t.time=r(t.time)}),delete i.totalQuantizedSteps,delete i.quantizationInfo,i}function O(n=e.DEFAULT_STEPS_PER_QUARTER,o=e.DEFAULT_QUARTERS_PER_MINUTE){return t.NoteSequence.create({quantizationInfo:{stepsPerQuarter:n},tempos:[{qpm:o}]})}function _(t){const e=c(t),n=e.notes.concat(e.pitchBends).concat(e.controlChanges),o=Array.from(new Set(n.filter(t=>!t.isDrum).map(t=>t.program)));return n.forEach(t=>{t.isDrum?(t.program=0,t.instrument=o.length):t.instrument=o.indexOf(t.program)}),e}function I(e,n){const o=new Set(e.notes.map(t=>t.instrument)),i=new Set(n.notes.map(t=>t.instrument)),r=[];e.notes.forEach(e=>{i.has(e.instrument)||r.push(t.NoteSequence.Note.create(e))}),n.notes.forEach(e=>{o.has(e.instrument)&&r.push(t.NoteSequence.Note.create(e))});const s=c(e);return s.notes=r.sort((t,e)=>{const n=t.instrument-e.instrument;return n||t.quantizedStartStep-e.quantizedStartStep}),s}function Q(e){E(e);const n=c(e);n.notes=[];const o=e.notes.sort((t,e)=>{const n=t.instrument-e.instrument;return n||t.quantizedStartStep-e.quantizedStartStep}),i=new t.NoteSequence.Note;i.pitch=o[0].pitch,i.instrument=o[0].instrument,i.quantizedStartStep=o[0].quantizedStartStep,i.quantizedEndStep=o[0].quantizedEndStep,n.notes.push(i);let r=0;for(let s=1;s<o.length;s++){const e=o[s],i=n.notes[r];if(i.instrument===e.instrument&&i.pitch===e.pitch&&e.quantizedStartStep===i.quantizedEndStep&&e.quantizedStartStep%16!=0)n.notes[r].quantizedEndStep+=e.quantizedEndStep-e.quantizedStartStep;else{const e=new t.NoteSequence.Note;e.pitch=o[s].pitch,e.instrument=o[s].instrument,e.quantizedStartStep=o[s].quantizedStartStep,e.quantizedEndStep=o[s].quantizedEndStep,n.notes.push(e),r++}}return n}function y(t,e=64){let n;if(function(t){t[t.SUSTAIN_ON=0]="SUSTAIN_ON",t[t.SUSTAIN_OFF=1]="SUSTAIN_OFF",t[t.NOTE_ON=2]="NOTE_ON",t[t.NOTE_OFF=3]="NOTE_OFF"}(n||(n={})),h(t))throw new Error("Can only apply sustain to unquantized NoteSequence.");const o=c(t),i=[];for(const u of o.notes)!1===u.isDrum&&(null!==u.startTime&&i.push({time:u.startTime,type:n.NOTE_ON,event:u}),null!==u.endTime&&i.push({time:u.endTime,type:n.NOTE_OFF,event:u}));for(const u of o.controlChanges)if(u.controlNumber===e){const t=u.controlValue;t>=64?i.push({time:u.time,type:n.SUSTAIN_ON,event:u}):t<64&&i.push({time:u.time,type:n.SUSTAIN_OFF,event:u})}i.sort((t,e)=>t.time-e.time);const r={},s={};let a=0;for(const u of i){a=u.time;const t=u.type,e=u.event;if(t===n.SUSTAIN_ON)s[e.instrument]=!0;else if(t===n.SUSTAIN_OFF){s[e.instrument]=!1;const t=[];e.instrument in r||(r[e.instrument]=[]);for(const n of r[e.instrument])n.endTime<a?(n.endTime=a,a>o.totalTime&&(o.totalTime=a)):t.push(n);r[e.instrument]=t}else if(t===n.NOTE_ON){if(!0===s[e.instrument]){const t=[];e.instrument in r||(r[e.instrument]=[]);for(const n of r[e.instrument])n.pitch===e.pitch?(n.endTime=a,n.startTime===n.endTime&&o.notes.push(n)):t.push(n);r[e.instrument]=t}e.instrument in r||(r[e.instrument]=[]),r[e.instrument].push(e)}else if(t===n.NOTE_OFF)if(!0===s[e.instrument]);else{const t=r[e.instrument].indexOf(e);t>-1&&r[e.instrument].splice(t,1)}}for(const u of Object.values(r))for(const t of u)t.endTime=a,o.totalTime=a;return o}function P(t,e){if(e&&e.length!==t.length)throw new Error("Number of sequences to concatenate and their individual\n durations does not match.");if(h(t[0])){for(let e=0;e<t.length;++e)if(E(t[e]),t[e].quantizationInfo.stepsPerQuarter!==t[0].quantizationInfo.stepsPerQuarter)throw new Error("Not all sequences have the same quantizationInfo");return $(t,"totalQuantizedSteps","quantizedStartStep","quantizedEndStep",e)}return $(t,"totalTime","startTime","endTime",e)}function v(t,e,n,o){return h(t)?A(t,e,n,"totalQuantizedSteps","quantizedStartStep","quantizedEndStep",o):A(t,e,n,"totalTime","startTime","endTime",o)}function $(e,n,o,i,r){let s,a=0;for(let u=0;u<e.length;++u){const p=r?r[u]:e[u][n];if(0===p)throw Error(`Sequence ${e[u].id} has no ${n}, and no individual duration was provided.`);0===u?s=c(e[0]):Array.prototype.push.apply(s.notes,e[u].notes.map(e=>{const n=t.NoteSequence.Note.create(e);return n[o]+=a,n[i]+=a,n})),a+=p}return s[n]=a,s}function A(t,e,n,o,i,r,s){const a=c(t);a[o]=n,a.notes=a.notes.filter(t=>t[i]>=e&&t[i]<=n&&(s||t[r]<=n)),a[o]-=e;for(let u=0;u<a.notes.length;u++)a.notes[u][i]-=e,a.notes[u][r]-=e,s&&(a.notes[u][r]=Math.min(a.notes[u][r],a[o]));return a}function U(e,n){E(e);const o=c(e),i=o.notes.sort((t,e)=>t.quantizedStartStep-e.quantizedStartStep),r=[];let s=0,a=[];for(let u=0;u<i.length;u++){const e=i[u],p=e.quantizedStartStep,m=e.quantizedEndStep;if(e.quantizedStartStep-=s,e.quantizedEndStep-=s,!(e.quantizedStartStep<0))if(e.quantizedEndStep<=n)a.push(e);else{if(e.quantizedStartStep<n){const o=t.NoteSequence.Note.create(e);o.quantizedEndStep=n,o.startTime=o.endTime=void 0,a.push(o),e.quantizedStartStep=s+n,e.quantizedEndStep=m}else e.quantizedStartStep=p,e.quantizedEndStep=m;if((e.quantizedEndStep>n||e.quantizedStartStep>n)&&(u-=1),0!==a.length){const t=c(o);t.notes=a,t.totalQuantizedSteps=n,r.push(t)}a=[],s+=n}}if(0!==a.length){const t=c(o);t.notes=a,t.totalQuantizedSteps=n,r.push(t)}return r}exports.QuantizationStatusException=p;
},{"../protobuf/index":"t75P","./constants":"kGvI"}],"Kde6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MelodyRegister=exports.MelodyShape=exports.MelodyRhythm=exports.Melody=exports.NOTE_OFF=exports.NO_EVENT=void 0;var e=s(require("@tensorflow/tfjs")),t=require("../protobuf/index"),n=s(require("./sequences"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(s,i,u):s[i]=e[i]}return s.default=e,n&&n.set(e,s),s}const o=0;exports.NO_EVENT=o;const i=1;exports.NOTE_OFF=i;const u=2;class l{constructor(e,t,n){this.events=e,this.minPitch=t,this.maxPitch=n}static fromNoteSequence(e,t,r,s=!0,o){n.assertIsQuantizedSequence(e);const a=e.notes.sort((e,t)=>e.quantizedStartStep===t.quantizedStartStep?t.pitch-e.pitch:e.quantizedStartStep-t.quantizedStartStep),c=new Int32Array(o||e.totalQuantizedSteps);let h=-1;return a.forEach(e=>{if(e.quantizedStartStep===h){if(s)return;throw new Error("`NoteSequence` is not monophonic.")}if(e.pitch<t||e.pitch>r)throw Error("`NoteSequence` has a pitch outside of the valid range: "+`${e.pitch}`);c[e.quantizedStartStep]=e.pitch-t+u,c[e.quantizedEndStep]=i,h=e.quantizedStartStep}),new l(c,t,r)}toNoteSequence(e,r){const s=n.createQuantizedNoteSequence(e,r);let l=null;for(let n=0;n<this.events.length;++n){const e=this.events[n];switch(e){case o:break;case i:l&&(l.quantizedEndStep=n,s.notes.push(l),l=null);break;default:l&&(l.quantizedEndStep=n,s.notes.push(l)),l=t.NoteSequence.Note.create({pitch:e-u+this.minPitch,quantizedStartStep:n})}}return l&&(l.quantizedEndStep=this.events.length,s.notes.push(l)),s.totalQuantizedSteps=this.events.length,s}}exports.Melody=l;class a{constructor(){this.depth=1}extract(t){const n=t.events.length,r=e.buffer([n,1]);for(let e=0;e<n;++e)r.set(t.events[e]>=u?1:0,e,0);return r.toTensor().as2D(n,1)}}exports.MelodyRhythm=a;class c{constructor(){this.depth=3}extract(t){const n=t.events.length,r=e.buffer([n,3]);let s=null,o=null;for(let e=0;e<n;++e)if(t.events[e]>=u){if(null!==s){let n;0===r.get(s,0)&&0===r.get(s,1)&&0===r.get(s,2)&&(s=-1),n=t.events[e]<o?0:t.events[e]>o?2:1;for(let t=e;t>s;--t)r.set(1,t,n)}s=e,o=t.events[e]}if(s!==n-1)if(null===s||0===r.get(s,0)&&0===r.get(s,1)&&0===r.get(s,2))for(let e=0;e<n;++e)r.set(1,e,1);else for(let e=n-1;e>s;--e)for(let t=0;t<3;t++)r.set(r.get(s,t),e,t);return r.toTensor().as2D(n,3)}}exports.MelodyShape=c;class h{constructor(e){this.boundaryPitches=e,this.depth=e.length+1}meanMelodyPitch(e){let t=0,n=0,r=null;for(let s=0;s<e.events.length;++s)e.events[s]===i?r=null:e.events[s]>=u&&(r=e.minPitch+e.events[s]-u),null!==r&&(t+=r,n+=1);return n?t/n:null}extract(t){const n=t.events.length,r=this.meanMelodyPitch(t);if(null===r)return e.zeros([n,this.depth]);let s=0;for(;s<this.boundaryPitches.length&&r>=this.boundaryPitches[s];)s++;const o=e.buffer([n,this.depth]);for(let e=0;e<n;++e)o.set(1,e,s);return o.toTensor().as2D(n,this.depth)}}exports.MelodyRegister=h;
},{"@tensorflow/tfjs":"fHyk","../protobuf/index":"t75P","./sequences":"x6ox"}],"KrkV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Performance=void 0;var e=require("../protobuf/index"),t=r(require("./constants")),s=r(require("./sequences")),i=r(require("./logging"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(n=function(e){return e?s:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=n(t);if(s&&s.has(e))return s.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var p=r?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(i,o,p):i[o]=e[o]}return i.default=e,s&&s.set(e,i),i}class o{constructor(e,t,s,i,n){this.events=e,this.maxShiftSteps=t,this.numVelocityBins=s,this.program=i,this.isDrum=n}static fromNoteSequence(e,i,n,r){s.assertIsQuantizedSequence(e);const p=e.notes.filter((e,t)=>void 0===r||e.instrument===r),c=p.sort((e,t)=>e.startTime===t.startTime?e.pitch-t.pitch:e.startTime-t.startTime),h=c.map((e,t)=>({step:e.quantizedStartStep,index:t,isOffset:0})),a=c.map((e,t)=>({step:e.quantizedEndStep,index:t,isOffset:1})),f=h.concat(a).sort((e,t)=>e.step===t.step?e.index===t.index?e.isOffset-t.isOffset:e.index-t.index:e.step-t.step),u=n?Math.ceil((t.MIDI_VELOCITIES-1)/n):void 0,m=[];let l=0,d=n;for(const s of f){if(s.step>l){for(;s.step>l+i;)m.push({type:"time-shift",steps:i}),l+=i;m.push({type:"time-shift",steps:s.step-l}),l=s.step}if(s.isOffset)m.push({type:"note-off",pitch:c[s.index].pitch});else{if(u){const e=Math.floor((c[s.index].velocity-t.MIN_MIDI_VELOCITY-1)/u)+1;e!==d&&(m.push({type:"velocity-change",velocityBin:e}),d=e)}m.push({type:"note-on",pitch:c[s.index].pitch})}}const g=!!p.some(e=>e.isDrum)&&(!p.some(e=>!e.isDrum)||void 0),v=Array.from(new Set(p.map(e=>e.program))),S=g||1!==v.length?void 0:v[0],y=new o(m,i,n,S,g);return y.setNumSteps(e.totalQuantizedSteps),y}getNumSteps(){return this.events.filter(e=>"time-shift"===e.type).map(e=>e.steps).reduce((e,t)=>e+t,0)}setNumSteps(e){let t=this.getNumSteps();if(t<e){if(this.events.length){const s=this.events[this.events.length-1];if("time-shift"===s.type){const i=Math.min(e-t,this.maxShiftSteps-s.steps);s.steps+=i,t+=i}}for(;t<e;)t+this.maxShiftSteps>e?(this.events.push({type:"time-shift",steps:e-t}),t=e):(this.events.push({type:"time-shift",steps:this.maxShiftSteps}),t+=this.maxShiftSteps)}else if(t>e)for(;this.events.length&&t>e;){const s=this.events[this.events.length-1];"time-shift"===s.type?t-s.steps<e?(s.steps-=t-e,t=e):(this.events.pop(),t-=s.steps):this.events.pop()}}toNoteSequence(s){const n=this.numVelocityBins?Math.ceil((t.MIDI_VELOCITIES-1)/this.numVelocityBins):void 0,r=e.NoteSequence.create();let o=0,p=void 0;const c=new Map;for(let e=t.MIN_MIDI_PITCH;e<=t.MAX_MIDI_PITCH;++e)c.set(e,[]);for(const h of this.events)switch(h.type){case"note-on":c.get(h.pitch).push([o,p]);break;case"note-off":const a=c.get(h.pitch);if(a.length){const[t,n]=a.shift();o>t?r.notes.push(e.NoteSequence.Note.create({pitch:h.pitch,velocity:n,instrument:s,quantizedStartStep:t,quantizedEndStep:o,program:this.program,isDrum:this.isDrum})):i.log("Ignoring zero-length note: "+`(pitch = ${h.pitch}, step = ${o})`,"Performance")}else i.log("Ignoring note-off with no previous note-on:"+`(pitch = ${h.pitch}, step = ${o})`,"Performance");break;case"time-shift":o+=h.steps;break;case"velocity-change":if(!n)throw new Error(`Unexpected velocity change event: ${h}`);p=t.MIN_MIDI_VELOCITY+(h.velocityBin-1)*n+1;break;default:throw new Error(`Unrecognized performance event: ${h}`)}return c.forEach((t,n)=>{for(const[p,c]of t)o>p?r.notes.push(e.NoteSequence.Note.create({pitch:n,velocity:c,instrument:s,quantizedStartStep:p,quantizedEndStep:o,program:this.program,isDrum:this.isDrum})):i.log("Ignoring zero-length note: "+`(pitch = ${n}, step = ${o})`,"Performance")}),r.totalQuantizedSteps=o,r}}exports.Performance=o;
},{"../protobuf/index":"t75P","./constants":"kGvI","./sequences":"x6ox","./logging":"HDYb"}],"Zl09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.converterFromSpec=c,Object.defineProperty(exports,"DEFAULT_DRUM_PITCH_CLASSES",{enumerable:!0,get:function(){return s.DEFAULT_DRUM_PITCH_CLASSES}}),exports.GrooveConverter=exports.MultitrackConverter=exports.TrioRhythmConverter=exports.TrioConverter=exports.MelodyShapeConverter=exports.MelodyRhythmConverter=exports.MelodyConverter=exports.DrumsOneHotConverter=exports.DrumRollConverter=exports.DrumsConverter=exports.DataConverter=void 0;var t=a(require("@tensorflow/tfjs")),e=require("../protobuf/index"),s=a(require("./constants")),r=a(require("./logging")),n=require("./melodies"),o=a(require("./performance")),i=a(require("./sequences"));function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(h=function(t){return t?s:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=h(e);if(s&&s.has(t))return s.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var i=n?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=t[o]}return r.default=t,s&&s.set(t,r),r}function c(t){switch(t.type){case"MelodyConverter":return new d(t.args);case"MelodyRhythmConverter":return new f(t.args);case"MelodyShapeConverter":return new P(t.args);case"DrumsConverter":return new u(t.args);case"DrumRollConverter":return new l(t.args);case"TrioConverter":return new C(t.args);case"TrioRhythmConverter":return new g(t.args);case"DrumsOneHotConverter":return new m(t.args);case"MultitrackConverter":return new v(t.args);case"GrooveConverter":return new y(t.args);default:throw new Error(`Unknown DataConverter type: ${t}`)}}class p{constructor(t){this.NUM_SPLITS=0,this.SEGMENTED_BY_TRACK=!1,this.numSteps=t.numSteps,this.numSegments=t.numSegments}tensorSteps(e){return t.scalar(e.shape[0],"int32")}}exports.DataConverter=p;class u extends p{constructor(t){super(t),this.pitchClasses=t.pitchClasses||s.DEFAULT_DRUM_PITCH_CLASSES,this.pitchToClass=new Map;for(let e=0;e<this.pitchClasses.length;++e)this.pitchClasses[e].forEach(t=>{this.pitchToClass.set(t,e)});this.depth=this.pitchClasses.length+1}toTensor(e){i.assertIsQuantizedSequence(e);const s=this.numSteps||e.totalQuantizedSteps,r=t.buffer([s,this.pitchClasses.length+1],"int32");for(let t=0;t<s;++t)r.set(1,t,-1);return e.notes.forEach(t=>{r.set(1,t.quantizedStartStep,this.pitchToClass.get(t.pitch)),r.set(0,t.quantizedStartStep,-1)}),r.toTensor()}async toNoteSequence(t,s,r){const n=i.createQuantizedNoteSequence(s,r),o=t.argMax(1),h=await o.data();o.dispose();for(let i=0;i<h.length;++i)for(let t=0;t<this.pitchClasses.length;t++)h[i]>>t&1&&n.notes.push(e.NoteSequence.Note.create({pitch:this.pitchClasses[t][0],quantizedStartStep:i,quantizedEndStep:i+1,isDrum:!0}));return n.totalQuantizedSteps=h.length,n}}exports.DrumsConverter=u;class l extends u{async toNoteSequence(t,s,r){const n=i.createQuantizedNoteSequence(s,r),o=await t.data();for(let i=0;i<t.shape[0];++i){const t=o.slice(i*this.pitchClasses.length,(i+1)*this.pitchClasses.length);for(let s=0;s<t.length;++s)t[s]&&n.notes.push(e.NoteSequence.Note.create({pitch:this.pitchClasses[s][0],quantizedStartStep:i,quantizedEndStep:i+1,isDrum:!0}))}return n.totalQuantizedSteps=t.shape[0],n}}exports.DrumRollConverter=l;class m extends u{constructor(t){super(t),this.depth=Math.pow(2,this.pitchClasses.length)}toTensor(e){i.assertIsRelativeQuantizedSequence(e);const s=this.numSteps||e.totalQuantizedSteps,r=Array(s).fill(0);for(const{pitch:t,quantizedStartStep:n}of e.notes)r[n]+=Math.pow(2,this.pitchToClass.get(t));return t.tidy(()=>t.oneHot(t.tensor1d(r,"int32"),this.depth))}}exports.DrumsOneHotConverter=m;class d extends p{constructor(t){super(t),this.NOTE_OFF=1,this.FIRST_PITCH=2,this.minPitch=t.minPitch,this.maxPitch=t.maxPitch,this.ignorePolyphony=t.ignorePolyphony,this.depth=t.maxPitch-t.minPitch+1+this.FIRST_PITCH}toTensor(e){const s=n.Melody.fromNoteSequence(e,this.minPitch,this.maxPitch,this.ignorePolyphony,this.numSteps);return t.tidy(()=>t.oneHot(t.tensor(s.events,[s.events.length],"int32"),this.depth))}async toNoteSequence(t,e,s){const r=t.argMax(1),o=await r.data();return r.dispose(),new n.Melody(o,this.minPitch,this.maxPitch).toNoteSequence(e,s)}}exports.MelodyConverter=d;class S extends p{constructor(t,e){super(t),this.minPitch=t.minPitch,this.maxPitch=t.maxPitch,this.ignorePolyphony=t.ignorePolyphony,this.melodyControl=e,this.depth=e.depth}toTensor(t){const e=n.Melody.fromNoteSequence(t,this.minPitch,this.maxPitch,this.ignorePolyphony,this.numSteps);return this.melodyControl.extract(e)}}class f extends S{constructor(t){super(t,new n.MelodyRhythm)}async toNoteSequence(t,r,n){const o=i.createQuantizedNoteSequence(r,n),h=await t.data();for(let i=0;i<h.length;++i)h[i]&&o.notes.push(e.NoteSequence.Note.create({pitch:s.DEFAULT_DRUM_PITCH_CLASSES[1][0],quantizedStartStep:i,quantizedEndStep:i+1,isDrum:!0}));return o.totalQuantizedSteps=h.length,o}}exports.MelodyRhythmConverter=f;class P extends S{constructor(t){super(t,new n.MelodyShape)}async toNoteSequence(t,s,n){const o=i.createQuantizedNoteSequence(s,n),h=t.argMax(1),a=await h.data();h.dispose();let c=Math.round((this.maxPitch+this.minPitch)/2);for(let i=0;i<a.length;++i){switch(a[i]){case 0:(c-=1)<this.minPitch&&(c=this.minPitch,r.log("Pitch range exceeded when creating NoteSequence from shape.","MelodyShapeConverter"));break;case 2:(c+=1)>this.maxPitch&&(c=this.maxPitch,r.log("Pitch range exceeded when creating NoteSequence from shape.","MelodyShapeConverter"))}o.notes.push(e.NoteSequence.Note.create({pitch:c,quantizedStartStep:i,quantizedEndStep:i+1}))}return o.totalQuantizedSteps=a.length,o}}exports.MelodyShapeConverter=P;class C extends p{constructor(t){super(t),this.NUM_SPLITS=3,this.MEL_PROG_RANGE=[0,31],this.BASS_PROG_RANGE=[32,39],t.melArgs.numSteps=t.numSteps,t.bassArgs.numSteps=t.numSteps,t.drumsArgs.numSteps=t.numSteps,this.melConverter=new d(t.melArgs),this.bassConverter=new d(t.bassArgs),this.drumsConverter=new m(t.drumsArgs),this.depth=this.melConverter.depth+this.bassConverter.depth+this.drumsConverter.depth}toTensor(e){i.assertIsQuantizedSequence(e);const s=i.clone(e),r=i.clone(e),n=i.clone(e);return s.notes=e.notes.filter(t=>!t.isDrum&&t.program>=this.MEL_PROG_RANGE[0]&&t.program<=this.MEL_PROG_RANGE[1]),r.notes=e.notes.filter(t=>!t.isDrum&&t.program>=this.BASS_PROG_RANGE[0]&&t.program<=this.BASS_PROG_RANGE[1]),n.notes=e.notes.filter(t=>t.isDrum),t.tidy(()=>t.concat([this.melConverter.toTensor(s),this.bassConverter.toTensor(r),this.drumsConverter.toTensor(n)],-1))}async toNoteSequence(e,s,r){const n=t.split(e,[this.melConverter.depth,this.bassConverter.depth,this.drumsConverter.depth],-1),o=await this.melConverter.toNoteSequence(n[0],s,r);o.notes.forEach(t=>{t.instrument=0,t.program=0});const i=await this.bassConverter.toNoteSequence(n[1],s,r);o.notes.push(...i.notes.map(t=>(t.instrument=1,t.program=this.BASS_PROG_RANGE[0],t)));const h=await this.drumsConverter.toNoteSequence(n[2],s,r);return o.notes.push(...h.notes.map(t=>(t.instrument=2,t))),n.forEach(t=>t.dispose()),o}}exports.TrioConverter=C;class g extends p{constructor(t){super(t),this.NUM_SPLITS=3,this.trioConverter=new C(t),this.depth=3}toTensor(e){return t.tidy(()=>{const s=this.trioConverter.toTensor(e),r=t.split(s,[this.trioConverter.melConverter.depth,this.trioConverter.bassConverter.depth,this.trioConverter.drumsConverter.depth],1),n=t.argMax(r[0],1),o=t.argMax(r[1],1),i=t.argMax(r[2],1),h=t.greater(n,1),a=t.greater(o,1),c=t.greater(i,0);return t.stack([h,a,c],1)})}async toNoteSequence(r,n,o){const h=t.split(r,3,1),a=await Promise.all(h.map(t=>t.data())),c=i.createQuantizedNoteSequence(n,o);for(let t=0;t<this.numSteps;++t)a[0][t]&&c.notes.push(e.NoteSequence.Note.create({pitch:72,quantizedStartStep:t,quantizedEndStep:t+1,instrument:0,program:0})),a[1][t]&&c.notes.push(e.NoteSequence.Note.create({pitch:36,quantizedStartStep:t,quantizedEndStep:t+1,instrument:1,program:32})),a[2][t]&&c.notes.push(e.NoteSequence.Note.create({pitch:s.DEFAULT_DRUM_PITCH_CLASSES[1][0],quantizedStartStep:t,quantizedEndStep:t+1,instrument:2,isDrum:!0}));return c.totalQuantizedSteps=this.numSteps,c}}exports.TrioRhythmConverter=g;class v extends p{constructor(e){super(e),this.SEGMENTED_BY_TRACK=!0,this.stepsPerQuarter=e.stepsPerQuarter,this.totalSteps=e.totalSteps,this.numVelocityBins=e.numVelocityBins,this.minPitch=e.minPitch?e.minPitch:s.MIN_MIDI_PITCH,this.maxPitch=e.maxPitch?e.maxPitch:s.MAX_MIDI_PITCH,this.numPitches=this.maxPitch-this.minPitch+1,this.performanceEventDepth=2*this.numPitches+this.totalSteps+this.numVelocityBins,this.numPrograms=s.MAX_MIDI_PROGRAM-s.MIN_MIDI_PROGRAM+2,this.endToken=this.performanceEventDepth+this.numPrograms,this.depth=this.endToken+1,this.endTensor=t.tidy(()=>t.oneHot(t.tensor1d([this.endToken],"int32"),this.depth).as1D())}trackToTensor(e){const s=this.numSteps/this.numSegments;let r=void 0;if(e){for(;e.events.length>s-2;)e.events.pop();(r=t.buffer([e.events.length+2],"int32")).set(this.performanceEventDepth+(e.isDrum?this.numPrograms-1:e.program),0),e.events.forEach((t,e)=>{switch(t.type){case"note-on":r.set(t.pitch-this.minPitch,e+1);break;case"note-off":r.set(this.numPitches+t.pitch-this.minPitch,e+1);break;case"time-shift":r.set(2*this.numPitches+t.steps-1,e+1);break;case"velocity-change":r.set(2*this.numPitches+this.totalSteps+t.velocityBin-1,e+1);break;default:throw new Error(`Unrecognized performance event: ${t}`)}}),r.set(this.endToken,e.events.length+1)}else r=t.buffer([1],"int32",new Int32Array([this.endToken]));return t.tidy(()=>{const e=t.oneHot(r.toTensor(),this.depth);return e.pad([[0,s-e.shape[0]],[0,0]])})}toTensor(e){if(i.assertIsRelativeQuantizedSequence(e),e.quantizationInfo.stepsPerQuarter!==this.stepsPerQuarter)throw new Error(`Steps per quarter note mismatch: ${e.quantizationInfo.stepsPerQuarter} != ${this.stepsPerQuarter}`);const s=i.clone(e);s.notes=e.notes.filter(t=>t.pitch>=this.minPitch&&t.pitch<=this.maxPitch);const r=new Set(s.notes.map(t=>t.instrument)),n=Array.from(r).map(t=>o.Performance.fromNoteSequence(s,this.totalSteps,this.numVelocityBins,t)).sort((t,e)=>e.isDrum?-1:t.isDrum?1:t.program-e.program);for(;n.length>this.numSegments;)n.pop();for(n.forEach(t=>t.setNumSteps(this.totalSteps));n.length<this.numSegments;)n.push(void 0);return t.tidy(()=>t.concat(n.map(t=>this.trackToTensor(t)),0))}tokensToTrack(t){const e=t.indexOf(this.endToken),s=e>=0?e:t.length,r=t.slice(0,s),n=r.filter(t=>t<this.performanceEventDepth),i=r.filter(t=>t>=this.performanceEventDepth),[h,a]=i.length?i[0]-this.performanceEventDepth<this.numPrograms-1?[i[0]-this.performanceEventDepth,!1]:[0,!0]:[0,!1],c=Array.from(n).map(t=>{if(t<this.numPitches)return{type:"note-on",pitch:this.minPitch+t};if(t<2*this.numPitches)return{type:"note-off",pitch:this.minPitch+t-this.numPitches};if(t<2*this.numPitches+this.totalSteps)return{type:"time-shift",steps:t-2*this.numPitches+1};if(t<2*this.numPitches+this.totalSteps+this.numVelocityBins)return{type:"velocity-change",velocityBin:t-2*this.numPitches-this.totalSteps+1};throw new Error(`Invalid performance event token: ${t}`)});return new o.Performance(c,this.totalSteps,this.numVelocityBins,h,a)}async toNoteSequence(e,s=this.stepsPerQuarter,r){const n=i.createQuantizedNoteSequence(s,r);n.totalQuantizedSteps=this.totalSteps;const o=t.tidy(()=>t.split(e.argMax(1),this.numSegments));return(await Promise.all(o.map(async t=>{const e=await t.data(),s=this.tokensToTrack(e);return t.dispose(),s}))).forEach((t,e)=>{t.setNumSteps(this.totalSteps),n.notes.push(...t.toNoteSequence(e).notes)}),n}}exports.MultitrackConverter=v;class y extends p{constructor(t){super(t),this.TAPIFY_CHANNEL=3,this.stepsPerQuarter=t.stepsPerQuarter||s.DEFAULT_STEPS_PER_QUARTER,this.pitchClasses=t.pitchClasses||s.DEFAULT_DRUM_PITCH_CLASSES,this.pitchToClass=new Map;for(let e=0;e<this.pitchClasses.length;++e)this.pitchClasses[e].forEach(t=>{this.pitchToClass.set(t,e)});this.humanize=t.humanize||!1,this.tapify=t.tapify||!1,this.splitInstruments=t.splitInstruments||!1,this.depth=3}toTensor(e){const r=i.isRelativeQuantizedSequence(e)?e:i.quantizeNoteSequence(e,this.stepsPerQuarter),n=this.numSteps,o=r.tempos&&r.tempos.length?r.tempos[0].qpm:s.DEFAULT_QUARTERS_PER_MINUTE,h=60/o/this.stepsPerQuarter,a=[];for(let t=0;t<n;++t)a.push(new Map);r.notes.forEach(t=>{if(!this.tapify&&!this.pitchToClass.has(t.pitch))return;const e=t.quantizedStartStep;if(e>=a.length)throw Error(`Model does not support sequences with more than ${n} steps (${n*h} seconds at qpm ${o}).`);const s=this.tapify?this.TAPIFY_CHANNEL:this.pitchToClass.get(t.pitch);(!a[e].has(s)||a[e].get(s).velocity<t.velocity)&&a[e].set(s,t)});const c=this.pitchClasses.length,p=t.buffer([n,c]),u=t.buffer([n,c]),l=t.buffer([n,c]);function m(t){if(void 0===t.startTime)return 0;const e=t.startTime;return 2*(t.quantizedStartStep*h-e)/h}for(let t=0;t<n;++t)for(let e=0;e<c;++e){const r=a[t].get(e);p.set(r?1:0,t,e),this.humanize||this.tapify||u.set(r?r.velocity/s.MAX_MIDI_VELOCITY:0,t,e),this.humanize||l.set(r?m(r):0,t,e)}return t.tidy(()=>{const e=p.toTensor(),s=u.toTensor(),r=l.toTensor(),o=this.splitInstruments?n*c:n;return t.concat([e.as2D(o,-1),s.as2D(o,-1),r.as2D(o,-1)],1)})}async toNoteSequence(t,r,n=s.DEFAULT_QUARTERS_PER_MINUTE){if(r&&r!==this.stepsPerQuarter)throw Error("`stepsPerQuarter` is set by the model.");r=this.stepsPerQuarter;const o=this.splitInstruments?t.shape[0]/this.pitchClasses.length:t.shape[0],i=60/n/this.stepsPerQuarter,h=e.NoteSequence.create({totalTime:o*i,tempos:[{qpm:n}]}),a=await t.data();function c(t,e,s){return Math.min(Math.max(t,e),s)}const p=this.pitchClasses.length;for(let u=0;u<o;++u){const t=a.slice(u*p*this.depth,(u+1)*p*this.depth);for(let r=0;r<p;++r){const n=t[this.splitInstruments?r*this.depth:r],o=t[this.splitInstruments?r*this.depth+1:p+r],a=t[this.splitInstruments?r*this.depth+2:2*p+r];if(n>.5){const t=c(Math.round(o*s.MAX_MIDI_VELOCITY),s.MIN_MIDI_VELOCITY,s.MAX_MIDI_VELOCITY),n=c(a/2,-.5,.5);h.notes.push(e.NoteSequence.Note.create({pitch:this.pitchClasses[r][0],startTime:(u-n)*i,endTime:(u-n+1)*i,velocity:t,isDrum:!0}))}}}return h}}exports.GrooveConverter=y;
},{"@tensorflow/tfjs":"fHyk","../protobuf/index":"t75P","./constants":"kGvI","./logging":"HDYb","./melodies":"Kde6","./performance":"KrkV","./sequences":"x6ox"}],"j5m7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="14.7.77";exports.version=e;
},{}],"e7Sb":[function(require,module,exports) {
function e(e){if(Array.isArray(e))return e}module.exports=e,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"nyVk":[function(require,module,exports) {
function l(l,e){var r=null==l?null:"undefined"!=typeof Symbol&&l[Symbol.iterator]||l["@@iterator"];if(null!=r){var t,o,u=[],n=!0,a=!1;try{for(r=r.call(l);!(n=(t=r.next()).done)&&(u.push(t.value),!e||u.length!==e);n=!0);}catch(d){a=!0,o=d}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}return u}}module.exports=l,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"ixeg":[function(require,module,exports) {
function e(e,o){(null==o||o>e.length)&&(o=e.length);for(var l=0,r=new Array(o);l<o;l++)r[l]=e[l];return r}module.exports=e,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"IOZJ":[function(require,module,exports) {
var r=require("./arrayLikeToArray.js");function e(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}module.exports=e,module.exports.default=module.exports,module.exports.__esModule=!0;
},{"./arrayLikeToArray.js":"ixeg"}],"yJnk":[function(require,module,exports) {
function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}module.exports=e,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"xw6J":[function(require,module,exports) {
var e=require("./arrayWithHoles.js"),r=require("./iterableToArrayLimit.js"),o=require("./unsupportedIterableToArray.js"),t=require("./nonIterableRest.js");function u(u,s){return e(u)||r(u,s)||o(u,s)||t()}module.exports=u,module.exports.default=module.exports,module.exports.__esModule=!0;
},{"./arrayWithHoles.js":"e7Sb","./iterableToArrayLimit.js":"nyVk","./unsupportedIterableToArray.js":"IOZJ","./nonIterableRest.js":"yJnk"}],"ZBnv":[function(require,module,exports) {
function o(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}module.exports=o,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"NoOd":[function(require,module,exports) {
function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}module.exports=o,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"HRmD":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,a){"object"===("undefined"==typeof exports?"undefined":n(exports))&&"undefined"!=typeof module?a(exports,require("@babel/runtime/helpers/slicedToArray"),require("@babel/runtime/helpers/classCallCheck"),require("@babel/runtime/helpers/createClass")):"function"==typeof t&&t.amd?t(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).automationEvents={},e._slicedToArray,e._classCallCheck,e._createClass)}(this,function(t,e,a,i){"use strict";function u(t){return t&&"object"===n(t)&&"default"in t?t:{default:t}}var r=u(e),o=u(a),s=u(i),l=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},m=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},v=function(t,e){return{startTime:e,type:"setValue",value:t}},c=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},f=function(t,e,n){var a=n.startTime,i=n.target,u=n.timeConstant;return i+(e-i)*Math.exp((a-t)/u)},d=function(t){return"exponentialRampToValue"===t.type},h=function(t){return"linearRampToValue"===t.type},T=function(t){return d(t)||h(t)},p=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},y=function t(e,n,a,i){var u=e[n];return void 0===u?i:T(u)||p(u)?u.value:_(u)?u.values[u.values.length-1]:f(a,t(e,n-1,u.startTime,i),u)},E=function(t,e,n,a,i){return void 0===n?[a.insertTime,i]:T(n)?[n.endTime,n.value]:p(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,i)]},b=function(t){return"cancelAndHold"===t.type},V=function(t){return"cancelScheduledValues"===t.type},g=function(t){return b(t)||V(t)?t.cancelTime:d(t)||h(t)?t.endTime:t.startTime},C=function(t,e,n,a){var i=a.endTime,u=a.value;return n===u?u:0<n&&0<u||n<0&&u<0?n*Math.pow(u/n,(t-e)/(i-e)):0},A=function(t,e,n,a){return n+(t-e)/(a.endTime-e)*(a.value-n)},x=function(t,e){var n=e.duration,a=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),a=Math.ceil(e);return n===a?t[n]:(1-(e-n))*t[n]+(1-(a-e))*t[a]}(i,(t-a)/n*(i.length-1))},S=function(t){return"setTarget"===t.type},R=function(t){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return s.default(e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=g(t);if(b(t)||V(t)){var n=this._automationEvents.findIndex(function(n){return V(t)&&_(n)?n.startTime+n.duration>=e:g(n)>=e}),a=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==a&&T(a)){if(S(i))throw new Error("The internal list is malformed.");var u=_(i)?i.startTime+i.duration:g(i),r=_(i)?i.values[i.values.length-1]:i.value,o=d(a)?C(e,u,r,a):A(e,u,r,a),s=d(a)?l(o,e,this._currenTime):m(o,e,this._currenTime);this._automationEvents.push(s)}void 0!==i&&S(i)&&this._automationEvents.push(v(this.getValue(e),e)),void 0!==i&&_(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=c(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var f=this._automationEvents.findIndex(function(t){return g(t)>e}),p=-1===f?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[f-1];if(void 0!==p&&_(p)&&g(p)+p.duration>e)return!1;var y=d(t)?l(t.value,t.endTime,this._currenTime):h(t)?m(t.value,e,this._currenTime):t;if(-1===f)this._automationEvents.push(y);else{if(_(t)&&e+t.duration>g(this._automationEvents[f]))return!1;this._automationEvents.splice(f,0,y)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return g(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),a=n[0];S(a)&&n.unshift(v(y(this._automationEvents,e-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex(function(e){return g(e)>t}),n=this._automationEvents[e],a=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[a];if(void 0!==i&&S(i)&&(void 0===n||!T(n)||n.insertTime>t))return f(t,y(this._automationEvents,a-1,i.startTime,this._defaultValue),i);if(void 0!==i&&p(i)&&(void 0===n||!T(n)))return i.value;if(void 0!==i&&_(i)&&(void 0===n||!T(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?x(t,i):i.values[i.values.length-1];if(void 0!==i&&T(i)&&(void 0===n||!T(n)))return i.value;if(void 0!==n&&d(n)){var u=E(this._automationEvents,a,i,n,this._defaultValue),o=r.default(u,2),s=o[0],l=o[1];return C(t,s,l,n)}if(void 0!==n&&h(n)){var m=E(this._automationEvents,a,i,n,this._defaultValue),v=r.default(m,2),c=v[0],b=v[1];return A(t,c,b,n)}return this._defaultValue}}]),e}(Symbol.iterator);t.AutomationEventList=R,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=v,t.createSetValueCurveAutomationEvent=c,Object.defineProperty(t,"__esModule",{value:!0})});
},{"@babel/runtime/helpers/slicedToArray":"xw6J","@babel/runtime/helpers/classCallCheck":"ZBnv","@babel/runtime/helpers/createClass":"NoOd"}],"reNM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAbortError=void 0;const r=()=>new DOMException("","AbortError");exports.createAbortError=r;
},{}],"iQEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddActiveInputConnectionToAudioNode=void 0;const e=e=>(o,t,[d,n,c],i)=>{e(o[n],[t,d,c],e=>e[0]===t&&e[1]===d,i)};exports.createAddActiveInputConnectionToAudioNode=e;
},{}],"wI6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioNodeConnections=void 0;const e=e=>(t,o,s)=>{const n=[];for(let e=0;e<s.numberOfInputs;e+=1)n.push(new Set);e.set(t,{activeInputs:n,outputs:new Set,passiveInputs:new WeakMap,renderer:o})};exports.createAddAudioNodeConnections=e;
},{}],"YEH2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioParamConnections=void 0;const e=e=>(t,s)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:s})};exports.createAddAudioParamConnections=e;
},{}],"Q1Wz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NODE_TO_PROCESSOR_MAPS=exports.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=exports.CYCLE_COUNTERS=exports.EVENT_LISTENERS=exports.CONTEXT_STORE=exports.AUDIO_PARAM_STORE=exports.AUDIO_PARAM_CONNECTIONS_STORE=exports.AUDIO_NODE_STORE=exports.AUDIO_NODE_CONNECTIONS_STORE=exports.ACTIVE_AUDIO_NODE_STORE=void 0;const O=new WeakSet;exports.ACTIVE_AUDIO_NODE_STORE=O;const e=new WeakMap;exports.AUDIO_NODE_CONNECTIONS_STORE=e;const _=new WeakMap;exports.AUDIO_NODE_STORE=_;const E=new WeakMap;exports.AUDIO_PARAM_CONNECTIONS_STORE=E;const S=new WeakMap;exports.AUDIO_PARAM_STORE=S;const t=new WeakMap;exports.CONTEXT_STORE=t;const T=new WeakMap;exports.EVENT_LISTENERS=T;const o=new WeakMap;exports.CYCLE_COUNTERS=o;const s=new WeakMap;exports.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=s;const N=new WeakMap;exports.NODE_TO_PROCESSOR_MAPS=N;
},{}],"ixRn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isConstructible=void 0;const t={construct:()=>t},e=e=>{try{new new Proxy(e,t)}catch{return!1}return!0};exports.isConstructible=e;
},{}],"itQN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitImportStatements=void 0;const s=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,e=(e,t)=>{const r=[];let o=e.replace(/^[\s]+/,""),l=o.match(s);for(;null!==l;){const e=l[1].slice(1,-1),p=l[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());r.push(p),l=(o=o.slice(l[0].length).replace(/^[\s]+/,"")).match(s)}return[r.join(";"),o]};exports.splitImportStatements=e;
},{}],"EhZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioWorkletModule=void 0;var e=require("../globals"),r=require("../helpers/is-constructible"),t=require("../helpers/split-import-statements");const o=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},s=e=>{if(!(0,r.isConstructible)(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},i=(r,i,a,n,c,l,p,d,u,h,_,f,v)=>{let w=0;return(m,y,b={credentials:"omit"})=>{const g=_.get(m);if(void 0!==g&&g.has(y))return Promise.resolve();const A=h.get(m);if(void 0!==A){const e=A.get(y);if(void 0!==e)return e}const P=l(m),S=void 0===P.audioWorklet?c(y).then(([e,r])=>{const[o,s]=(0,t.splitImportStatements)(e,r);return a(`${o};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${s}\n})})(window,'_AWGS')`)}).then(()=>{const r=v._AWGS.pop();if(void 0===r)throw new SyntaxError;n(P.currentTime,P.sampleRate,()=>r(class{},void 0,(r,t)=>{if(""===r.trim())throw i();const a=e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(P);if(void 0!==a){if(a.has(r))throw i();s(t),o(t.parameterDescriptors),a.set(r,t)}else s(t),o(t.parameterDescriptors),e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(P,new Map([[r,t]]))},P.sampleRate,void 0,void 0))}):Promise.all([c(y),Promise.resolve(r(f,f))]).then(([[e,r],o])=>{const s=w+1;w=s;const[i,a]=(0,t.splitImportStatements)(e,r),n=new Blob([`${i};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${o?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${o?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${o?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${s}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(n);return P.audioWorklet.addModule(c,b).then(()=>{if(d(P))return P;const e=p(P);return e.audioWorklet.addModule(c,b).then(()=>e)}).then(e=>{if(null===u)throw new SyntaxError;try{new u(e,`__sac${s}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(c))});return void 0===A?h.set(m,new Map([[y,S]])):A.set(y,S),S.then(()=>{const e=_.get(m);void 0===e?_.set(m,new Set([y])):e.add(y)}).finally(()=>{const e=h.get(m);void 0!==e&&e.delete(y)}),S}};exports.createAddAudioWorkletModule=i;
},{"../globals":"Q1Wz","../helpers/is-constructible":"ixRn","../helpers/split-import-statements":"itQN"}],"ynZW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getValueForKey=void 0;const e=(e,t)=>{const o=e.get(t);if(void 0===o)throw new Error("A value with the given key could not be found.");return o};exports.getValueForKey=e;
},{}],"msoE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pickElementFromSet=void 0;const e=(e,t)=>{const r=Array.from(e).filter(t);if(r.length>1)throw Error("More than one element was found.");if(0===r.length)throw Error("No element was found.");const[o]=r;return e.delete(o),o};exports.pickElementFromSet=e;
},{}],"WRY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deletePassiveInputConnectionToAudioNode=void 0;var e=require("./get-value-for-key"),t=require("./pick-element-from-set");const o=(o,r,i,n)=>{const s=(0,e.getValueForKey)(o,r),u=(0,t.pickElementFromSet)(s,e=>e[0]===i&&e[1]===n);return 0===s.size&&o.delete(r),u};exports.deletePassiveInputConnectionToAudioNode=o;
},{"./get-value-for-key":"ynZW","./pick-element-from-set":"msoE"}],"BvJn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEventListenersOfAudioNode=void 0;var e=require("../globals"),t=require("./get-value-for-key");const r=r=>(0,t.getValueForKey)(e.EVENT_LISTENERS,r);exports.getEventListenersOfAudioNode=r;
},{"../globals":"Q1Wz","./get-value-for-key":"ynZW"}],"fI6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToActive=void 0;var e=require("../globals"),t=require("./get-event-listeners-of-audio-node");const r=r=>{if(e.ACTIVE_AUDIO_NODE_STORE.has(r))throw new Error("The AudioNode is already stored.");e.ACTIVE_AUDIO_NODE_STORE.add(r),(0,t.getEventListenersOfAudioNode)(r).forEach(e=>e(!0))};exports.setInternalStateToActive=r;
},{"../globals":"Q1Wz","./get-event-listeners-of-audio-node":"BvJn"}],"o848":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioWorkletNode=void 0;const e=e=>"port"in e;exports.isAudioWorkletNode=e;
},{}],"MCKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToPassive=void 0;var e=require("../globals"),t=require("./get-event-listeners-of-audio-node");const o=o=>{if(!e.ACTIVE_AUDIO_NODE_STORE.has(o))throw new Error("The AudioNode is not stored.");e.ACTIVE_AUDIO_NODE_STORE.delete(o),(0,t.getEventListenersOfAudioNode)(o).forEach(e=>e(!1))};exports.setInternalStateToPassive=o;
},{"../globals":"Q1Wz","./get-event-listeners-of-audio-node":"BvJn"}],"UwY9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToPassiveWhenNecessary=void 0;var e=require("../guards/audio-worklet-node"),s=require("./set-internal-state-to-passive");const t=(t,r)=>{!(0,e.isAudioWorkletNode)(t)&&r.every(e=>0===e.size)&&(0,s.setInternalStateToPassive)(t)};exports.setInternalStateToPassiveWhenNecessary=t;
},{"../guards/audio-worklet-node":"o848","./set-internal-state-to-passive":"MCKE"}],"rZkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddConnectionToAudioNode=void 0;var e=require("../helpers/delete-passive-input-connection-to-audio-node"),t=require("../helpers/set-internal-state-to-active"),s=require("../helpers/set-internal-state-to-passive-when-necessary");const n=(n,o,i,r,a,c,d,u,p,l,v,T,h)=>{const A=new WeakMap;return(I,N,y,P,f)=>{const{activeInputs:q,passiveInputs:x}=c(N),{outputs:C}=c(I),S=u(I),W=c=>{const u=p(N),l=p(I);if(c){const s=(0,e.deletePassiveInputConnectionToAudioNode)(x,I,y,P);n(q,I,s,!1),f||T(I)||i(l,u,y,P),h(N)&&(0,t.setInternalStateToActive)(N)}else{const e=r(q,I,y,P);o(x,P,e,!1),f||T(I)||a(l,u,y,P);const t=d(N);if(0===t)v(N)&&(0,s.setInternalStateToPassiveWhenNecessary)(N,q);else{const e=A.get(N);void 0!==e&&clearTimeout(e),A.set(N,setTimeout(()=>{v(N)&&(0,s.setInternalStateToPassiveWhenNecessary)(N,q)},1e3*t))}}};return!!l(C,[N,y,P],e=>e[0]===N&&e[1]===y&&e[2]===P,!0)&&(S.add(W),v(I)?n(q,I,[y,P,W],!0):o(x,P,[I,y,W],!0),!0)}};exports.createAddConnectionToAudioNode=n;
},{"../helpers/delete-passive-input-connection-to-audio-node":"WRY8","../helpers/set-internal-state-to-active":"fI6l","../helpers/set-internal-state-to-passive-when-necessary":"UwY9"}],"hh7k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddPassiveInputConnectionToAudioNode=void 0;const e=e=>(o,t,[s,d,n],i)=>{const c=o.get(s);void 0===c?o.set(s,new Set([[d,t,n]])):e(c,[d,t,n],e=>e[0]===d&&e[1]===t,i)};exports.createAddPassiveInputConnectionToAudioNode=e;
},{}],"iZQe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddSilentConnection=void 0;const e=e=>(n,t)=>{const o=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(o).connect(n.destination);const c=()=>{t.removeEventListener("ended",c),t.disconnect(o),o.disconnect()};t.addEventListener("ended",c)};exports.createAddSilentConnection=e;
},{}],"Nj5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddUnrenderedAudioWorkletNode=void 0;const e=e=>(d,r)=>{e(d).add(r)};exports.createAddUnrenderedAudioWorkletNode=e;
},{}],"A0tf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAnalyserNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},t=(t,n,i,s,a,o)=>(class extends t{constructor(t,i){const r=a(t),l={...e,...i},c=s(r,l);super(t,!1,c,o(r)?n():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,i()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,i()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}});exports.createAnalyserNodeConstructor=t;
},{}],"c92a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isOwnedByContext=void 0;const e=(e,t)=>e.context===t;exports.isOwnedByContext=e;
},{}],"KjBg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAnalyserNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,o)=>()=>{const r=new WeakMap;return{render(s,a,i){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(s,a,i)=>{let c=t(s);if(!(0,e.isOwnedByContext)(c,a)){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(a,e)}return r.set(a,c),await o(s,a,c,i),c})(s,a,i)}}};exports.createAnalyserNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"c92a"}],"QcFX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioBufferCopyChannelMethodsOutOfBoundsSupport=void 0;const e=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};exports.testAudioBufferCopyChannelMethodsOutOfBoundsSupport=e;
},{}],"i4K8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndexSizeError=void 0;const e=()=>new DOMException("","IndexSizeError");exports.createIndexSizeError=e;
},{}],"twCl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferGetChannelDataMethod=void 0;var e=require("../factories/index-size-error");const r=r=>{r.getChannelData=(t=>a=>{try{return t.call(r,a)}catch(o){if(12===o.code)throw(0,e.createIndexSizeError)();throw o}})(r.getChannelData)};exports.wrapAudioBufferGetChannelDataMethod=r;
},{"../factories/index-size-error":"i4K8"}],"buyp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferConstructor=void 0;var e=require("../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support"),t=require("../helpers/wrap-audio-buffer-get-channel-data-method");const n={numberOfChannels:1},o=(o,r,u,s,a,f,l,p)=>{let c=null;return class h{constructor(h){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:i,sampleRate:C}={...n,...h};null===c&&(c=new a(1,1,44100));const O=null!==s&&r(f,f)?new s({length:d,numberOfChannels:i,sampleRate:C}):c.createBuffer(i,d,C);if(0===O.numberOfChannels)throw u();return"function"!=typeof O.copyFromChannel?(l(O),(0,t.wrapAudioBufferGetChannelDataMethod)(O)):r(e.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>(0,e.testAudioBufferCopyChannelMethodsOutOfBoundsSupport)(O))||p(O),o.add(O),O}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===h.prototype||o.has(e)}}};exports.createAudioBufferConstructor=o;
},{"../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support":"QcFX","../helpers/wrap-audio-buffer-get-channel-data-method":"twCl"}],"nOFp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MOST_POSITIVE_SINGLE_FLOAT=exports.MOST_NEGATIVE_SINGLE_FLOAT=void 0;const e=-3.4028234663852886e38;exports.MOST_NEGATIVE_SINGLE_FLOAT=-3.4028234663852886e38;const _=3.4028234663852886e38;exports.MOST_POSITIVE_SINGLE_FLOAT=3.4028234663852886e38;
},{}],"Zs9Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isActiveAudioNode=void 0;var e=require("../globals");const o=o=>e.ACTIVE_AUDIO_NODE_STORE.has(o);exports.isActiveAudioNode=o;
},{"../globals":"Q1Wz"}],"Km0H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferSourceNodeConstructor=void 0;var e=require("../constants"),t=require("../helpers/is-active-audio-node"),o=require("../helpers/set-internal-state-to-active"),r=require("../helpers/set-internal-state-to-passive");const u={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},i=(i,n,s,d,f,a,l,c)=>(class extends i{constructor(t,o){const r=a(t),i={...u,...o},d=f(r,i),c=l(r),h=c?n():null;super(t,!1,d,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==i.buffer,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=s(this,c,d.playbackRate,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw d();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?c(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const o=this._nativeAudioBufferSourceNode.onended;this._onended=null!==o&&o===t?e:o}get playbackRate(){return this._playbackRate}start(e=0,u=0,i){if(this._nativeAudioBufferSourceNode.start(e,u,i),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===i?[e,u]:[e,u,i]),"closed"!==this.context.state){(0,o.setInternalStateToActive)(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),(0,t.isActiveAudioNode)(this)&&(0,r.setInternalStateToPassive)(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}});exports.createAudioBufferSourceNodeConstructor=i;
},{"../constants":"nOFp","../helpers/is-active-audio-node":"Zs9Z","../helpers/set-internal-state-to-active":"fI6l","../helpers/set-internal-state-to-passive":"MCKE"}],"LJKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferSourceNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,o,a,n,r)=>()=>{const l=new WeakMap;let c=null,s=null;return{set start(e){c=e},set stop(e){s=e},render(u,p,d){const i=l.get(p);return void 0!==i?Promise.resolve(i):(async(u,p,d)=>{let i=a(u);const y=(0,e.isOwnedByContext)(i,p);if(!y){const e={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,loop:i.loop,loopEnd:i.loopEnd,loopStart:i.loopStart,playbackRate:i.playbackRate.value};i=o(p,e),null!==c&&i.start(...c),null!==s&&i.stop(s)}return l.set(p,i),y?await t(p,u.playbackRate,i.playbackRate,d):await n(p,u.playbackRate,i.playbackRate,d),await r(u,p,i,d),i})(u,p,d)}}};exports.createAudioBufferSourceNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"koWC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioBufferSourceNode=void 0;const e=e=>"playbackRate"in e;exports.isAudioBufferSourceNode=e;
},{}],"kCBt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBiquadFilterNode=void 0;const e=e=>"frequency"in e&&"gain"in e;exports.isBiquadFilterNode=e;
},{}],"sRaq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isConstantSourceNode=void 0;const e=e=>"offset"in e;exports.isConstantSourceNode=e;
},{}],"c37I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGainNode=void 0;const e=e=>!("frequency"in e)&&"gain"in e;exports.isGainNode=e;
},{}],"RCh0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isOscillatorNode=void 0;const e=e=>"detune"in e&&"frequency"in e;exports.isOscillatorNode=e;
},{}],"x6y6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isStereoPannerNode=void 0;const e=e=>"pan"in e;exports.isStereoPannerNode=e;
},{}],"uvM4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioNodeConnections=void 0;var e=require("../globals"),o=require("./get-value-for-key");const t=t=>(0,o.getValueForKey)(e.AUDIO_NODE_CONNECTIONS_STORE,t);exports.getAudioNodeConnections=t;
},{"../globals":"Q1Wz","./get-value-for-key":"ynZW"}],"pZqr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioParamConnections=void 0;var e=require("../globals"),o=require("./get-value-for-key");const r=r=>(0,o.getValueForKey)(e.AUDIO_PARAM_CONNECTIONS_STORE,r);exports.getAudioParamConnections=r;
},{"../globals":"Q1Wz","./get-value-for-key":"ynZW"}],"JxnR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deactivateActiveAudioNodeInputConnections=void 0;var e=require("../guards/audio-buffer-source-node"),o=require("../guards/audio-worklet-node"),r=require("../guards/biquad-filter-node"),i=require("../guards/constant-source-node"),t=require("../guards/gain-node"),n=require("../guards/oscillator-node"),a=require("../guards/stereo-panner-node"),s=require("./get-audio-node-connections"),u=require("./get-audio-param-connections"),d=require("./is-active-audio-node"),c=require("./set-internal-state-to-passive");const f=(l,q)=>{const{activeInputs:v}=(0,s.getAudioNodeConnections)(l);v.forEach(e=>e.forEach(([e])=>{q.includes(l)||f(e,[...q,l])}));const g=(0,e.isAudioBufferSourceNode)(l)?[l.playbackRate]:(0,o.isAudioWorkletNode)(l)?Array.from(l.parameters.values()):(0,r.isBiquadFilterNode)(l)?[l.Q,l.detune,l.frequency,l.gain]:(0,i.isConstantSourceNode)(l)?[l.offset]:(0,t.isGainNode)(l)?[l.gain]:(0,n.isOscillatorNode)(l)?[l.detune,l.frequency]:(0,a.isStereoPannerNode)(l)?[l.pan]:[];for(const e of g){const o=(0,u.getAudioParamConnections)(e);void 0!==o&&o.activeInputs.forEach(([e])=>f(e,q))}(0,d.isActiveAudioNode)(l)&&(0,c.setInternalStateToPassive)(l)};exports.deactivateActiveAudioNodeInputConnections=f;
},{"../guards/audio-buffer-source-node":"koWC","../guards/audio-worklet-node":"o848","../guards/biquad-filter-node":"kCBt","../guards/constant-source-node":"sRaq","../guards/gain-node":"c37I","../guards/oscillator-node":"RCh0","../guards/stereo-panner-node":"x6y6","./get-audio-node-connections":"uvM4","./get-audio-param-connections":"pZqr","./is-active-audio-node":"Zs9Z","./set-internal-state-to-passive":"MCKE"}],"K0bU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deactivateAudioGraph=void 0;var e=require("./deactivate-active-audio-node-input-connections");const t=t=>{(0,e.deactivateActiveAudioNodeInputConnections)(t.destination,[])};exports.deactivateAudioGraph=t;
},{"./deactivate-active-audio-node-input-connections":"JxnR"}],"ybOj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidLatencyHint=void 0;const e=e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e);exports.isValidLatencyHint=e;
},{}],"uohO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioContextConstructor=void 0;var t=require("../helpers/deactivate-audio-graph"),e=require("../helpers/is-valid-latency-hint");const i=(i,n,a,s,o,r,c,d,h)=>(class extends i{constructor(t={}){if(null===h)throw new Error("Missing the native AudioContext constructor.");let i;try{i=new h(t)}catch(r){if(12===r.code&&"sampleRate is not in range"===r.message)throw a();throw r}if(null===i)throw s();if(!(0,e.isValidLatencyHint)(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&i.sampleRate!==t.sampleRate)throw a();super(i,2);const{latencyHint:n}=t,{sampleRate:o}=i;if(this._baseLatency="number"==typeof i.baseLatency?i.baseLatency:"balanced"===n?512/o:"interactive"===n||void 0===n?256/o:"playback"===n?1024/o:128*Math.max(2,Math.min(128,Math.round(n*o/128)))/o,this._nativeAudioContext=i,"webkitAudioContext"===h.name?(this._nativeGainNode=i.createGain(),this._nativeOscillatorNode=i.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(i.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===i.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),i.removeEventListener("statechange",t)};i.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw n()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),(0,t.deactivateAudioGraph)(this)}))}createMediaElementSource(t){return new o(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new c(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new d(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{const i=()=>{this._nativeAudioContext.removeEventListener("statechange",i),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",i)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw n();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw n();throw t})}});exports.createAudioContextConstructor=i;
},{"../helpers/deactivate-audio-graph":"K0bU","../helpers/is-valid-latency-hint":"ybOj"}],"sBQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioDestinationNodeConstructor=void 0;const t=(t,e,n,o,i,s,a,u)=>(class extends t{constructor(t,n){const o=s(t),d=a(o),h=i(o,n,d);super(t,!1,h,d?e(u):null),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}});exports.createAudioDestinationNodeConstructor=t;
},{}],"PiX5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioDestinationNodeRenderer=void 0;const e=e=>{let t=null;return{render:(r,n,o)=>(null===t&&(t=(async(t,r,n)=>{const o=r.destination;return await e(t,r,o,n),o})(r,n,o)),t)}};exports.createAudioDestinationNodeRenderer=e;
},{}],"n1MU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioListenerFactory=void 0;var e=require("../constants");const t=(t,r,n,o,a,i,s,u)=>(c,p)=>{const l=p.listener,{forwardX:d,forwardY:f,forwardZ:T,positionX:A,positionY:m,positionZ:w,upX:h,upY:y,upZ:V}=void 0===l.forwardX?(()=>{const d=new Float32Array(1),f=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),T=s(p);let A=!1,m=[0,0,-1,0,1,0],w=[0,0,0];const h=()=>{if(A)return;A=!0;const e=o(p,256,9,0);e.onaudioprocess=(({inputBuffer:e})=>{const t=[i(e,d,0),i(e,d,1),i(e,d,2),i(e,d,3),i(e,d,4),i(e,d,5)];t.some((e,t)=>e!==m[t])&&(l.setOrientation(...t),m=t);const r=[i(e,d,6),i(e,d,7),i(e,d,8)];r.some((e,t)=>e!==w[t])&&(l.setPosition(...r),w=r)}),f.connect(e)},y=e=>t=>{t!==m[e]&&(m[e]=t,l.setOrientation(...m))},V=e=>t=>{t!==w[e]&&(w[e]=t,l.setPosition(...w))},g=(r,o,i)=>{const s=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});s.connect(f,0,r),s.start(),Object.defineProperty(s.offset,"defaultValue",{get:()=>o});const l=t({context:c},T,s.offset,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT);return u(l,"value",e=>()=>e.call(l),e=>t=>{try{e.call(l,t)}catch(r){if(9!==r.code)throw r}h(),T&&i(t)}),l.cancelAndHoldAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.cancelAndHoldAtTime),l.cancelScheduledValues=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.cancelScheduledValues),l.exponentialRampToValueAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.exponentialRampToValueAtTime),l.linearRampToValueAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.linearRampToValueAtTime),l.setTargetAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.setTargetAtTime),l.setValueAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.setValueAtTime),l.setValueCurveAtTime=(e=>T?()=>{throw a()}:(...t)=>{const r=e.apply(l,t);return h(),r})(l.setValueCurveAtTime),l};return{forwardX:g(0,0,y(0)),forwardY:g(1,0,y(1)),forwardZ:g(2,-1,y(2)),positionX:g(6,0,V(0)),positionY:g(7,0,V(1)),positionZ:g(8,0,V(2)),upX:g(3,0,y(3)),upY:g(4,1,y(4)),upZ:g(5,0,y(5))}})():l;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return T},get positionX(){return A},get positionY(){return m},get positionZ(){return w},get upX(){return h},get upY(){return y},get upZ(){return V}}};exports.createAudioListenerFactory=t;
},{"../constants":"nOFp"}],"KEnq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioNode=void 0;const e=e=>"context"in e;exports.isAudioNode=e;
},{}],"kLx1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioNodeOutputConnection=void 0;var e=require("./audio-node");const o=o=>(0,e.isAudioNode)(o[0]);exports.isAudioNodeOutputConnection=o;
},{"./audio-node":"KEnq"}],"oQJx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.insertElementInSet=void 0;const e=(e,t,r,n)=>{for(const o of e)if(r(o)){if(n)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0};exports.insertElementInSet=e;
},{}],"jg7H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addActiveInputConnectionToAudioParam=void 0;var e=require("./insert-element-in-set");const t=(t,n,[o,i],r)=>{(0,e.insertElementInSet)(t,[n,o,i],e=>e[0]===n&&e[1]===o,r)};exports.addActiveInputConnectionToAudioParam=t;
},{"./insert-element-in-set":"oQJx"}],"YkPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addPassiveInputConnectionToAudioParam=void 0;var e=require("./insert-element-in-set");const t=(t,[n,o,s],i)=>{const r=t.get(n);void 0===r?t.set(n,new Set([[o,s]])):(0,e.insertElementInSet)(r,[o,s],e=>e[0]===o,i)};exports.addPassiveInputConnectionToAudioParam=t;
},{"./insert-element-in-set":"oQJx"}],"WEGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNativeAudioNodeFaker=void 0;const e=e=>"inputs"in e;exports.isNativeAudioNodeFaker=e;
},{}],"Odu0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectNativeAudioNodeToNativeAudioNode=void 0;var e=require("../guards/native-audio-node-faker");const o=(o,t,i,d)=>{if((0,e.isNativeAudioNodeFaker)(t)){const e=t.inputs[d];return o.connect(e,i,0),[e,i,0]}return o.connect(t,i,d),[t,i,d]};exports.connectNativeAudioNodeToNativeAudioNode=o;
},{"../guards/native-audio-node-faker":"WEGB"}],"Eqsv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteActiveInputConnection=void 0;const e=(e,t,n)=>{for(const o of e)if(o[0]===t&&o[1]===n)return e.delete(o),o;return null};exports.deleteActiveInputConnection=e;
},{}],"b5Wy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteActiveInputConnectionToAudioParam=void 0;var e=require("./pick-element-from-set");const t=(t,o,r)=>(0,e.pickElementFromSet)(t,e=>e[0]===o&&e[1]===r);exports.deleteActiveInputConnectionToAudioParam=t;
},{"./pick-element-from-set":"msoE"}],"IBp6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteEventListenerOfAudioNode=void 0;var e=require("./get-event-listeners-of-audio-node");const t=(t,o)=>{if(!(0,e.getEventListenersOfAudioNode)(t).delete(o))throw new Error("Missing the expected event listener.")};exports.deleteEventListenerOfAudioNode=t;
},{"./get-event-listeners-of-audio-node":"BvJn"}],"BDdk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deletePassiveInputConnectionToAudioParam=void 0;var e=require("./get-value-for-key"),t=require("./pick-element-from-set");const o=(o,r,i)=>{const n=(0,e.getValueForKey)(o,r),s=(0,t.pickElementFromSet)(n,e=>e[0]===i);return 0===n.size&&o.delete(r),s};exports.deletePassiveInputConnectionToAudioParam=o;
},{"./get-value-for-key":"ynZW","./pick-element-from-set":"msoE"}],"X8Ls":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disconnectNativeAudioNodeFromNativeAudioNode=void 0;var e=require("../guards/native-audio-node-faker");const o=(o,i,d,t)=>{(0,e.isNativeAudioNodeFaker)(i)?o.disconnect(i.inputs[t],d,0):o.disconnect(i,d,t)};exports.disconnectNativeAudioNodeFromNativeAudioNode=o;
},{"../guards/native-audio-node-faker":"WEGB"}],"fw3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNativeAudioNode=void 0;var e=require("../globals"),o=require("./get-value-for-key");const t=t=>(0,o.getValueForKey)(e.AUDIO_NODE_STORE,t);exports.getNativeAudioNode=t;
},{"../globals":"Q1Wz","./get-value-for-key":"ynZW"}],"NQ9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNativeAudioParam=void 0;var e=require("../globals"),r=require("./get-value-for-key");const t=t=>(0,r.getValueForKey)(e.AUDIO_PARAM_STORE,t);exports.getNativeAudioParam=t;
},{"../globals":"Q1Wz","./get-value-for-key":"ynZW"}],"DJzs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPartOfACycle=void 0;var e=require("../globals");const r=r=>e.CYCLE_COUNTERS.has(r);exports.isPartOfACycle=r;
},{"../globals":"Q1Wz"}],"Rbnn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPassiveAudioNode=void 0;var e=require("../globals");const s=s=>!e.ACTIVE_AUDIO_NODE_STORE.has(s);exports.isPassiveAudioNode=s;
},{"../globals":"Q1Wz"}],"Ais4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioNodeDisconnectMethodSupport=void 0;const e=e=>new Promise(t=>{const o=e.createScriptProcessor(256,1,1),n=e.createGain(),c=e.createBuffer(1,2,44100),s=c.getChannelData(0);s[0]=1,s[1]=1;const r=e.createBufferSource();r.buffer=c,r.loop=!0,r.connect(o).connect(e.destination),r.connect(n),r.disconnect(n),o.onaudioprocess=(n=>{const c=n.inputBuffer.getChannelData(0);Array.prototype.some.call(c,e=>1===e)?t(!0):t(!1),r.stop(),o.onaudioprocess=null,r.disconnect(o),o.disconnect(e.destination)}),r.start()});exports.testAudioNodeDisconnectMethodSupport=e;
},{}],"shAh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visitEachAudioNodeOnce=void 0;const o=(o,e)=>{const t=new Map;for(const s of o)for(const o of s){const e=t.get(o);t.set(o,void 0===e?1:e+1)}t.forEach((o,t)=>e(t,o))};exports.visitEachAudioNodeOnce=o;
},{}],"Lqxx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNativeAudioNode=void 0;const e=e=>"context"in e;exports.isNativeAudioNode=e;
},{}],"t2hu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioNodeDisconnectMethod=void 0;var e=require("../guards/native-audio-node");const t=t=>{const o=new Map;t.connect=(t=>(n,i=0,u=0)=>{const s=(0,e.isNativeAudioNode)(n)?t(n,i,u):t(n,i),c=o.get(n);return void 0===c?o.set(n,[{input:u,output:i}]):c.every(e=>e.input!==u||e.output!==i)&&c.push({input:u,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(i,u,s)=>{if(n.apply(t),void 0===i)o.clear();else if("number"==typeof i)for(const[e,t]of o){const n=t.filter(e=>e.output!==i);0===n.length?o.delete(e):o.set(e,n)}else if(o.has(i))if(void 0===u)o.delete(i);else{const e=o.get(i);if(void 0!==e){const t=e.filter(e=>e.output!==u&&(e.input!==s||void 0===s));0===t.length?o.delete(i):o.set(i,t)}}for(const[n,c]of o)c.forEach(o=>{(0,e.isNativeAudioNode)(n)?t.connect(n,o.output,o.input):t.connect(n,o.output)})})(t.disconnect)};exports.wrapAudioNodeDisconnectMethod=t;
},{"../guards/native-audio-node":"Lqxx"}],"LRpc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioNodeConstructor=void 0;var e=require("../globals"),t=require("../guards/audio-node"),o=require("../guards/audio-node-output-connection"),i=require("../helpers/add-active-input-connection-to-audio-param"),n=require("../helpers/add-passive-input-connection-to-audio-param"),s=require("../helpers/connect-native-audio-node-to-native-audio-node"),u=require("../helpers/delete-active-input-connection"),d=require("../helpers/delete-active-input-connection-to-audio-param"),r=require("../helpers/delete-event-listeners-of-audio-node"),a=require("../helpers/delete-passive-input-connection-to-audio-node"),c=require("../helpers/delete-passive-input-connection-to-audio-param"),p=require("../helpers/disconnect-native-audio-node-from-native-audio-node"),h=require("../helpers/get-audio-node-connections"),l=require("../helpers/get-audio-param-connections"),v=require("../helpers/get-event-listeners-of-audio-node"),A=require("../helpers/get-native-audio-node"),N=require("../helpers/get-native-audio-param"),f=require("../helpers/insert-element-in-set"),m=require("../helpers/is-active-audio-node"),C=require("../helpers/is-part-of-a-cycle"),g=require("../helpers/is-passive-audio-node"),I=require("../helpers/set-internal-state-to-active"),O=require("../helpers/set-internal-state-to-passive-when-necessary"),q=require("../helpers/test-audio-node-disconnect-method-support"),P=require("../helpers/visit-each-audio-node-once"),_=require("../helpers/wrap-audio-node-disconnect-method");const w=(e,t,o,s)=>{const{activeInputs:u,passiveInputs:r}=(0,l.getAudioParamConnections)(t),{outputs:a}=(0,h.getAudioNodeConnections)(e),p=(0,v.getEventListenersOfAudioNode)(e),g=a=>{const p=(0,A.getNativeAudioNode)(e),h=(0,N.getNativeAudioParam)(t);if(a){const t=(0,c.deletePassiveInputConnectionToAudioParam)(r,e,o);(0,i.addActiveInputConnectionToAudioParam)(u,e,t,!1),s||(0,C.isPartOfACycle)(e)||p.connect(h,o)}else{const t=(0,d.deleteActiveInputConnectionToAudioParam)(u,e,o);(0,n.addPassiveInputConnectionToAudioParam)(r,t,!1),s||(0,C.isPartOfACycle)(e)||p.disconnect(h,o)}};return!!(0,f.insertElementInSet)(a,[t,o],e=>e[0]===t&&e[1]===o,!0)&&(p.add(g),(0,m.isActiveAudioNode)(e)?(0,i.addActiveInputConnectionToAudioParam)(u,e,[o,g],!0):(0,n.addPassiveInputConnectionToAudioParam)(r,[e,o,g],!0),!0)},T=(e,t,o,i)=>{const{activeInputs:n,passiveInputs:s}=(0,h.getAudioNodeConnections)(t),d=(0,u.deleteActiveInputConnection)(n[i],e,o);if(null===d){return[(0,a.deletePassiveInputConnectionToAudioNode)(s,e,o,i)[2],!1]}return[d[2],!0]},y=(e,t,o)=>{const{activeInputs:i,passiveInputs:n}=(0,l.getAudioParamConnections)(t),s=(0,u.deleteActiveInputConnection)(i,e,o);if(null===s){return[(0,c.deletePassiveInputConnectionToAudioParam)(n,e,o)[1],!1]}return[s[2],!0]},E=(e,t,o,i,n)=>{const[s,u]=T(e,o,i,n);if(null!==s&&((0,r.deleteEventListenerOfAudioNode)(e,s),!u||t||(0,C.isPartOfACycle)(e)||(0,p.disconnectNativeAudioNodeFromNativeAudioNode)((0,A.getNativeAudioNode)(e),(0,A.getNativeAudioNode)(o),i,n)),(0,m.isActiveAudioNode)(o)){const{activeInputs:e}=(0,h.getAudioNodeConnections)(o);(0,O.setInternalStateToPassiveWhenNecessary)(o,e)}},b=(e,t,o,i)=>{const[n,s]=y(e,o,i);null!==n&&((0,r.deleteEventListenerOfAudioNode)(e,n),!s||t||(0,C.isPartOfACycle)(e)||(0,A.getNativeAudioNode)(e).disconnect((0,N.getNativeAudioParam)(o),i))},x=(e,t)=>{const i=(0,h.getAudioNodeConnections)(e),n=[];for(const s of i.outputs)(0,o.isAudioNodeOutputConnection)(s)?E(e,t,...s):b(e,t,...s),n.push(s[0]);return i.outputs.clear(),n},S=(e,t,i)=>{const n=(0,h.getAudioNodeConnections)(e),s=[];for(const u of n.outputs)u[1]===i&&((0,o.isAudioNodeOutputConnection)(u)?E(e,t,...u):b(e,t,...u),s.push(u[0]),n.outputs.delete(u));return s},M=(e,t,i,n,s)=>{const u=(0,h.getAudioNodeConnections)(e);return Array.from(u.outputs).filter(e=>!(e[0]!==i||void 0!==n&&e[1]!==n||void 0!==s&&e[2]!==s)).map(i=>((0,o.isAudioNodeOutputConnection)(i)?E(e,t,...i):b(e,t,...i),u.outputs.delete(i),i[0]))},D=(o,i,n,u,d,r,a,c,p,h,l,v,f,m,C)=>(class extends h{constructor(t,i,s,u){super(s),this._context=t,this._nativeAudioNode=s;const d=l(t);v(d)&&!0!==n(q.testAudioNodeDisconnectMethodSupport,()=>(0,q.testAudioNodeDisconnectMethodSupport)(d))&&(0,_.wrapAudioNodeDisconnectMethod)(s),e.AUDIO_NODE_STORE.set(this,s),e.EVENT_LISTENERS.set(this,new Set),"closed"!==t.state&&i&&(0,I.setInternalStateToActive)(this),o(this,u,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,o=0,n=0){if(o<0||o>=this._nativeAudioNode.numberOfOutputs)throw d();const c=l(this._context),h=C(c);if(f(e)||m(e))throw r();if((0,t.isAudioNode)(e)){const t=(0,A.getNativeAudioNode)(e);try{const i=(0,s.connectNativeAudioNodeToNativeAudioNode)(this._nativeAudioNode,t,o,n),u=(0,g.isPassiveAudioNode)(this);(h||u)&&this._nativeAudioNode.disconnect(...i),"closed"!==this.context.state&&!u&&(0,g.isPassiveAudioNode)(e)&&(0,I.setInternalStateToActive)(e)}catch(O){if(12===O.code)throw r();throw O}if(i(this,e,o,n,h)){const t=p([this],e);(0,P.visitEachAudioNodeOnce)(t,u(h))}return e}const v=(0,N.getNativeAudioParam)(e);if("playbackRate"===v.name&&1024===v.maxValue)throw a();try{this._nativeAudioNode.connect(v,o),(h||(0,g.isPassiveAudioNode)(this))&&this._nativeAudioNode.disconnect(v,o)}catch(O){if(12===O.code)throw r();throw O}if(w(this,e,o,h)){const t=p([this],e);(0,P.visitEachAudioNodeOnce)(t,u(h))}}disconnect(e,o,i){let n;const s=l(this._context),u=C(s);if(void 0===e)n=x(this,u);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw d();n=S(this,u,e)}else{if(void 0!==o&&(o<0||o>=this.numberOfOutputs))throw d();if((0,t.isAudioNode)(e)&&void 0!==i&&(i<0||i>=e.numberOfInputs))throw d();if(0===(n=M(this,u,e,o,i)).length)throw r()}for(const t of n){const e=p([this],t);(0,P.visitEachAudioNodeOnce)(e,c)}}});exports.createAudioNodeConstructor=D;
},{"../globals":"Q1Wz","../guards/audio-node":"KEnq","../guards/audio-node-output-connection":"kLx1","../helpers/add-active-input-connection-to-audio-param":"jg7H","../helpers/add-passive-input-connection-to-audio-param":"YkPt","../helpers/connect-native-audio-node-to-native-audio-node":"Odu0","../helpers/delete-active-input-connection":"Eqsv","../helpers/delete-active-input-connection-to-audio-param":"b5Wy","../helpers/delete-event-listeners-of-audio-node":"IBp6","../helpers/delete-passive-input-connection-to-audio-node":"WRY8","../helpers/delete-passive-input-connection-to-audio-param":"BDdk","../helpers/disconnect-native-audio-node-from-native-audio-node":"X8Ls","../helpers/get-audio-node-connections":"uvM4","../helpers/get-audio-param-connections":"pZqr","../helpers/get-event-listeners-of-audio-node":"BvJn","../helpers/get-native-audio-node":"fw3X","../helpers/get-native-audio-param":"NQ9T","../helpers/insert-element-in-set":"oQJx","../helpers/is-active-audio-node":"Zs9Z","../helpers/is-part-of-a-cycle":"DJzs","../helpers/is-passive-audio-node":"Rbnn","../helpers/set-internal-state-to-active":"fI6l","../helpers/set-internal-state-to-passive-when-necessary":"UwY9","../helpers/test-audio-node-disconnect-method-support":"Ais4","../helpers/visit-each-audio-node-once":"shAh","../helpers/wrap-audio-node-disconnect-method":"t2hu"}],"uw1T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioParamFactory=void 0;var e=require("automation-events");const t=(t,l,a,u,n,r,o,i,c,m,s,d,T)=>(A,V,p,f=null,h=null)=>{const x=new e.AutomationEventList(p.defaultValue),v=V?u(x):null,y={get defaultValue(){return p.defaultValue},get maxValue(){return null===f?p.maxValue:f},get minValue(){return null===h?p.minValue:h},get value(){return p.value},set value(e){p.value=e,y.setValueAtTime(e,A.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof p.cancelAndHoldAtTime)null===v&&x.flush(A.context.currentTime),x.add(n(e)),p.cancelAndHoldAtTime(e);else{const t=Array.from(x).pop();null===v&&x.flush(A.context.currentTime),x.add(n(e));const l=Array.from(x).pop();p.cancelScheduledValues(e),t!==l&&void 0!==l&&("exponentialRampToValue"===l.type?p.exponentialRampToValueAtTime(l.value,l.endTime):"linearRampToValue"===l.type?p.linearRampToValueAtTime(l.value,l.endTime):"setValue"===l.type?p.setValueAtTime(l.value,l.startTime):"setValueCurve"===l.type&&p.setValueCurveAtTime(l.values,l.startTime,l.duration))}return y},cancelScheduledValues:e=>(null===v&&x.flush(A.context.currentTime),x.add(r(e)),p.cancelScheduledValues(e),y),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;return null===v&&x.flush(A.context.currentTime),x.add(o(e,t)),p.exponentialRampToValueAtTime(e,t),y},linearRampToValueAtTime:(e,t)=>(null===v&&x.flush(A.context.currentTime),x.add(i(e,t)),p.linearRampToValueAtTime(e,t),y),setTargetAtTime:(e,t,l)=>(null===v&&x.flush(A.context.currentTime),x.add(c(e,t,l)),p.setTargetAtTime(e,t,l),y),setValueAtTime:(e,t)=>(null===v&&x.flush(A.context.currentTime),x.add(m(e,t)),p.setValueAtTime(e,t),y),setValueCurveAtTime(e,t,l){const a=e instanceof Float32Array?e:new Float32Array(e);if(null!==d&&"webkitAudioContext"===d.name){const e=t+l,u=A.context.sampleRate,n=Math.ceil(t*u),r=Math.floor(e*u),o=r-n,i=new Float32Array(o);for(let m=0;m<o;m+=1){const e=(a.length-1)/l*((n+m)/u-t),r=Math.floor(e),o=Math.ceil(e);i[m]=r===o?a[r]:(1-(e-r))*a[r]+(1-(o-e))*a[o]}null===v&&x.flush(A.context.currentTime),x.add(s(i,t,l)),p.setValueCurveAtTime(i,t,l);const c=r/u;c<e&&T(y,i[i.length-1],c),T(y,a[a.length-1],e)}else null===v&&x.flush(A.context.currentTime),x.add(s(a,t,l)),p.setValueCurveAtTime(a,t,l);return y}};return a.set(y,p),l.set(y,A),t(y,v),y};exports.createAudioParamFactory=t;
},{"automation-events":"HRmD"}],"WTdk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioParamRenderer=void 0;const e=e=>({replay(t){for(const a of e)if("exponentialRampToValue"===a.type){const{endTime:e,value:r}=a;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===a.type){const{endTime:e,value:r}=a;t.linearRampToValueAtTime(r,e)}else if("setTarget"===a.type){const{startTime:e,target:r,timeConstant:o}=a;t.setTargetAtTime(r,e,o)}else if("setValue"===a.type){const{startTime:e,value:r}=a;t.setValueAtTime(r,e)}else{if("setValueCurve"!==a.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=a;t.setValueCurveAtTime(o,r,e)}}}});exports.createAudioParamRenderer=e;
},{}],"hfAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadOnlyMap=void 0;class e{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}exports.ReadOnlyMap=e;
},{}],"G2gP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletNodeConstructor=void 0;var e=require("../globals"),r=require("../read-only-map");const t={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},o=(o,s,n,a,i,u,l,c,p,d,h,_,v,O)=>(class extends s{constructor(s,O,m){var N;const A=c(s),k=p(A),C=h({...t,...m});v(C);const W=e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(A),f=null==W?void 0:W.get(O),g=k||"closed"!==A.state?A:null!==(N=l(A))&&void 0!==N?N:A,b=i(g,k?null:s.baseLatency,d,O,f,C);super(s,!0,b,k?a(O,C,f):null);const x=[];b.parameters.forEach((e,r)=>{const t=n(this,k,e);x.push([r,t])}),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new r.ReadOnlyMap(x),k&&o(A,this);const{activeInputs:y}=u(this);_(b,y)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const r="function"==typeof e?O(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=r;const t=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==t&&t===r?e:t}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}});exports.createAudioWorkletNodeConstructor=o;
},{"../globals":"Q1Wz","../read-only-map":"hfAY"}],"jb9C":[function(require,module,exports) {
"use strict";function e(e,t,n,o,r){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],o,r);else{const a=e.getChannelData(o);if(0===t[n].byteLength)t[n]=a.slice(r,r+128);else{const e=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyFromChannel=e;
},{}],"JNmV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyToChannel=void 0;const e=(e,o,t,n,p)=>{"function"==typeof e.copyToChannel?0!==o[t].byteLength&&e.copyToChannel(o[t],n,p):0!==o[t].byteLength&&e.getChannelData(n).set(o[t],p)};exports.copyToChannel=e;
},{}],"hfp0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNestedArrays=void 0;const e=(e,r)=>{const t=[];for(let s=0;s<e;s+=1){const e=[],o="number"==typeof r?r:r[s];for(let r=0;r<o;r+=1)e.push(new Float32Array(128));t.push(e)}return t};exports.createNestedArrays=e;
},{}],"atKv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioWorkletProcessor=void 0;var e=require("../globals"),o=require("./get-native-audio-node"),r=require("./get-value-for-key");const t=(t,u)=>{const s=(0,r.getValueForKey)(e.NODE_TO_PROCESSOR_MAPS,t),i=(0,o.getNativeAudioNode)(u);return(0,r.getValueForKey)(s,i)};exports.getAudioWorkletProcessor=t;
},{"../globals":"Q1Wz","./get-native-audio-node":"fw3X","./get-value-for-key":"ynZW"}],"a0CB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletNodeRendererFactory=void 0;var e=require("../helpers/copy-from-channel"),n=require("../helpers/copy-to-channel"),t=require("../helpers/create-nested-arrays"),r=require("../helpers/get-audio-node-connections"),o=require("../helpers/get-audio-worklet-processor"),a=require("../helpers/is-owned-by-context");const l=async(a,l,s,c,u,i,p)=>{const h=null===l?128*Math.ceil(a.context.length/128):l.length,f=c.channelCount*c.numberOfInputs,m=u.reduce((e,n)=>e+n,0),d=0===m?null:s.createBuffer(m,h,s.sampleRate);if(void 0===i)throw new Error("Missing the processor constructor.");const C=(0,r.getAudioNodeConnections)(a),y=await(0,o.getAudioWorkletProcessor)(s,a),b=(0,t.createNestedArrays)(c.numberOfInputs,c.channelCount),O=(0,t.createNestedArrays)(c.numberOfOutputs,u),w=Array.from(a.parameters.keys()).reduce((e,n)=>({...e,[n]:new Float32Array(128)}),{});for(let t=0;t<h;t+=128){if(c.numberOfInputs>0&&null!==l)for(let n=0;n<c.numberOfInputs;n+=1)for(let r=0;r<c.channelCount;r+=1)(0,e.copyFromChannel)(l,b[n],r,r,t);void 0!==i.parameterDescriptors&&null!==l&&i.parameterDescriptors.forEach(({name:n},r)=>{(0,e.copyFromChannel)(l,w,n,f+r,t)});for(let e=0;e<c.numberOfInputs;e+=1)for(let n=0;n<u[e];n+=1)0===O[e][n].byteLength&&(O[e][n]=new Float32Array(128));try{const e=b.map((e,n)=>0===C.activeInputs[n].size?[]:e),r=p(t/s.sampleRate,s.sampleRate,()=>y.process(e,O,w));if(null!==d)for(let o=0,a=0;o<c.numberOfOutputs;o+=1){for(let e=0;e<u[o];e+=1)(0,n.copyToChannel)(d,O[o],e,a+e,t);a+=u[o]}if(!r)break}catch(I){a.dispatchEvent(new ErrorEvent("processorerror",{colno:I.colno,filename:I.filename,lineno:I.lineno,message:I.message}));break}}return d},s=(e,n,t,r,o,s,c,u,i,p,h,f,m,d,C,y)=>(b,O,w)=>{const I=new WeakMap;let M=null;return{render(g,x,v){u(x,g);const A=I.get(x);return void 0!==A?Promise.resolve(A):(async(u,g,x)=>{let v=h(u),A=null;const k=(0,a.isOwnedByContext)(v,g),E=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(null===f){const e=E.reduce((e,n)=>e+n,0),t=o(g,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let n=0;n<u.numberOfOutputs;n+=1)a.push(r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:E[n]}));const l=c(g,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1});l.connect=n.bind(null,a),l.disconnect=i.bind(null,a),A=[t,a,l]}else k||(v=new f(g,b));if(I.set(g,null===A?v:A[2]),null!==A){if(null===M){if(void 0===w)throw new Error("Missing the processor constructor.");if(null===m)throw new Error("Missing the native OfflineAudioContext constructor.");const e=u.channelCount*u.numberOfInputs,n=void 0===w.parameterDescriptors?0:w.parameterDescriptors.length,t=e+n,a=async()=>{const a=new m(t,128*Math.ceil(u.context.length/128),g.sampleRate),l=[],i=[];for(let e=0;e<O.numberOfInputs;e+=1)l.push(c(a,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),i.push(o(a,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));const p=await Promise.all(Array.from(u.parameters.values()).map(async e=>{const n=s(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await d(a,e,n.offset,x),n})),h=r(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+n)});for(let e=0;e<O.numberOfInputs;e+=1){l[e].connect(i[e]);for(let n=0;n<O.channelCount;n+=1)i[e].connect(h,n,e*O.channelCount+n)}for(const[n,t]of p.entries())t.connect(h,0,e+n),t.start(0);return h.connect(a.destination),await Promise.all(l.map(e=>C(u,a,e,x))),y(a)};M=l(u,0===t?null:await a(),g,O,E,w,p)}const e=await M,n=t(g,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[a,i,h]=A;null!==e&&(n.buffer=e,n.start(0)),n.connect(a);for(let t=0,r=0;t<u.numberOfOutputs;t+=1){const e=i[t];for(let n=0;n<E[t];n+=1)a.connect(e,r+n,n);r+=E[t]}return h}if(k)for(const[n,t]of u.parameters.entries())await e(g,t,v.parameters.get(n),x);else for(const[e,n]of u.parameters.entries())await d(g,n,v.parameters.get(e),x);return await C(u,g,v,x),v})(g,x,v)}}};exports.createAudioWorkletNodeRendererFactory=s;
},{"../helpers/copy-from-channel":"jb9C","../helpers/copy-to-channel":"JNmV","../helpers/create-nested-arrays":"hfp0","../helpers/get-audio-node-connections":"uvM4","../helpers/get-audio-worklet-processor":"atKv","../helpers/is-owned-by-context":"c92a"}],"DC3E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBaseAudioContextConstructor=void 0;const e=(e,t,r,n,a,i,o,s,u,c,h,l,d,w,f,p,C,m,v,x)=>(class extends f{constructor(t,r){super(t,r),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,r)=>e(this,t,r)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(e,t,n){return new r({length:t,numberOfChannels:e,sampleRate:n})}createBufferSource(){return new n(this)}createChannelMerger(e=6){return new i(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new o(this,{numberOfOutputs:e})}createConstantSource(){return new s(this)}createConvolver(){return new u(this)}createDelay(e=1){return new h(this,{maxDelayTime:e})}createDynamicsCompressor(){return new l(this)}createGain(){return new d(this)}createIIRFilter(e,t){return new w(this,{feedback:t,feedforward:e})}createOscillator(){return new p(this)}createPanner(){return new C(this)}createPeriodicWave(e,t,r={disableNormalization:!1}){return new m(this,{...r,imag:t,real:e})}createStereoPanner(){return new v(this)}createWaveShaper(){return new x(this)}decodeAudioData(e,t,r){return c(this._nativeContext,e).then(e=>("function"==typeof t&&t(e),e),e=>{throw"function"==typeof r&&r(e),e})}});exports.createBaseAudioContextConstructor=e;
},{}],"IlZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBiquadFilterNodeConstructor=void 0;var e=require("../constants");const t={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},n=(n,r,i,s,o,a,u,_)=>(class extends n{constructor(n,s){const h=a(n),c={...t,...s},d=o(h,c),l=u(h);super(n,!1,d,l?i():null),this._Q=r(this,l,d.Q,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._detune=r(this,l,d.detune,1200*Math.log2(e.MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(e.MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=r(this,l,d.frequency,n.sampleRate/2,0),this._gain=r(this,l,d.gain,40*Math.log10(e.MOST_POSITIVE_SINGLE_FLOAT),e.MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=d,_(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(r){if(11===r.code)throw s();throw r}if(e.length!==t.length||t.length!==n.length)throw s()}});exports.createBiquadFilterNodeConstructor=n;
},{"../constants":"nOFp"}],"TP2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBiquadFilterNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,a,r,i)=>()=>{const o=new WeakMap;return{render(u,c,d){const s=o.get(c);return void 0!==s?Promise.resolve(s):(async(u,c,d)=>{let s=a(u);const l=(0,e.isOwnedByContext)(s,c);if(!l){const e={Q:s.Q.value,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,detune:s.detune.value,frequency:s.frequency.value,gain:s.gain.value,type:s.type};s=t(c,e)}return o.set(c,s),l?(await n(c,u.Q,s.Q,d),await n(c,u.detune,s.detune,d),await n(c,u.frequency,s.frequency,d),await n(c,u.gain,s.gain,d)):(await r(c,u.Q,s.Q,d),await r(c,u.detune,s.detune,d),await r(c,u.frequency,s.frequency,d),await r(c,u.gain,s.gain,d)),await i(u,c,s,d),s})(u,c,d)}}};exports.createBiquadFilterNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"c92a"}],"RNrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCacheTestResult=void 0;const e=(e,t)=>(s,r)=>{const c=t.get(s);if(void 0!==c)return c;const o=e.get(s);if(void 0!==o)return o;try{const c=r();return c instanceof Promise?(e.set(s,c),c.catch(()=>!1).then(r=>(e.delete(s),t.set(s,r),r))):(t.set(s,c),c)}catch{return t.set(s,!1),!1}};exports.createCacheTestResult=e;
},{}],"Smlw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelMergerNodeConstructor=void 0;const e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},t=(t,n,r,o,s)=>(class extends t{constructor(t,c){const u=o(t),a={...e,...c};super(t,!1,r(u,a),s(u)?n():null)}});exports.createChannelMergerNodeConstructor=t;
},{}],"VPtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelMergerNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,r,t)=>()=>{const o=new WeakMap;return{render(a,s,c){const u=o.get(s);return void 0!==u?Promise.resolve(u):(async(a,s,c)=>{let u=r(a);if(!(0,e.isOwnedByContext)(u,s)){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=n(s,e)}return o.set(s,u),await t(a,s,u,c),u})(a,s,c)}}};exports.createChannelMergerNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"c92a"}],"XmzV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelSplitterNodeConstructor=void 0;const e={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},t=(t,n,r,o,s,c)=>(class extends t{constructor(t,l){const u=o(t),a=c({...e,...l});super(t,!1,r(u,a),s(u)?n():null)}});exports.createChannelSplitterNodeConstructor=t;
},{}],"oD7U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelSplitterNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,r)=>()=>{const o=new WeakMap;return{render(a,s,c){const u=o.get(s);return void 0!==u?Promise.resolve(u):(async(a,s,c)=>{let u=n(a);if(!(0,e.isOwnedByContext)(u,s)){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=t(s,e)}return o.set(s,u),await r(a,s,u,c),u})(a,s,c)}}};exports.createChannelSplitterNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"fkdS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectAudioParam=void 0;const e=e=>(t,o,r,a)=>e(o,t,r,a);exports.createConnectAudioParam=e;
},{}],"VdxZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectMultipleOutputs=void 0;var e=require("../guards/native-audio-node");const t=t=>(o,r,n=0,u=0)=>{const i=o[n];if(void 0===i)throw t();return(0,e.isNativeAudioNode)(r)?i.connect(r,0,u):i.connect(r,0)};exports.createConnectMultipleOutputs=t;
},{"../guards/native-audio-node":"Lqxx"}],"A9R4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectedNativeAudioBufferSourceNodeFactory=void 0;const e=e=>(o,t)=>{const r=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=o.createBuffer(1,2,44100);return r.buffer=n,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}};exports.createConnectedNativeAudioBufferSourceNodeFactory=e;
},{}],"dOwk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConstantSourceNodeConstructor=void 0;var e=require("../constants"),t=require("../helpers/is-active-audio-node"),n=require("../helpers/set-internal-state-to-active"),o=require("../helpers/set-internal-state-to-passive");const s={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},r=(r,i,a,d,c,u,h)=>(class extends r{constructor(t,n){const o=c(t),r={...s,...n},h=d(o,r),l=u(o),_=l?a():null;super(t,!1,h,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=h,this._offset=i(this,l,h.offset,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?h(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){(0,n.setInternalStateToActive)(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),(0,t.isActiveAudioNode)(this)&&(0,o.setInternalStateToPassive)(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}});exports.createConstantSourceNodeConstructor=r;
},{"../constants":"nOFp","../helpers/is-active-audio-node":"Zs9Z","../helpers/set-internal-state-to-active":"fI6l","../helpers/set-internal-state-to-passive":"MCKE"}],"jUPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConstantSourceNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,o,r,s)=>()=>{const a=new WeakMap;let c=null,l=null;return{set start(e){c=e},set stop(e){l=e},render(u,f,i){const d=a.get(f);return void 0!==d?Promise.resolve(d):(async(u,f,i)=>{let d=o(u);const p=(0,e.isOwnedByContext)(d,f);if(!p){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=n(f,e),null!==c&&d.start(c),null!==l&&d.stop(l)}return a.set(f,d),p?await t(f,u.offset,d.offset,i):await r(f,u.offset,d.offset,i),await s(u,f,d,i),d})(u,f,i)}}};exports.createConstantSourceNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"enMX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvertNumberToUnsignedLong=void 0;const e=e=>o=>(e[0]=o,e[0]);exports.createConvertNumberToUnsignedLong=e;
},{}],"nUIR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvolverNodeConstructor=void 0;const e={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},o=(o,t,r,n,i,l)=>(class extends o{constructor(o,s){const u=n(o),f={...e,...s},v=r(u,f);super(o,!1,v,i(u)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=v,null!==f.buffer&&l(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,44100),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}});exports.createConvolverNodeConstructor=o;
},{}],"h55f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvolverNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),n=require("../helpers/is-owned-by-context");const r=(r,t,o)=>()=>{const a=new WeakMap;return{render(i,s,d){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s,d)=>{let c=t(i);if(!(0,n.isOwnedByContext)(c,s)){const e={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(s,e)}return a.set(s,c),(0,e.isNativeAudioNodeFaker)(c)?await o(i,s,c.inputs[0],d):await o(i,s,c,d),c})(i,s,d)}}};exports.createConvolverNodeRendererFactory=r;
},{"../guards/native-audio-node-faker":"WEGB","../helpers/is-owned-by-context":"c92a"}],"zF9t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCreateNativeOfflineAudioContext=void 0;const e=(e,t)=>(r,o,n)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(r,o,n)}catch(i){if("SyntaxError"===i.name)throw e();throw i}};exports.createCreateNativeOfflineAudioContext=e;
},{}],"lgjM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDataCloneError=void 0;const e=()=>new DOMException("","DataCloneError");exports.createDataCloneError=e;
},{}],"EDRy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detachArrayBuffer=void 0;const e=e=>{const{port1:s,port2:r}=new MessageChannel;return new Promise(o=>{const t=()=>{r.onmessage=null,s.close(),r.close(),o()};r.onmessage=(()=>t());try{s.postMessage(e,[e])}finally{t()}})};exports.detachArrayBuffer=e;
},{}],"Ji8J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDecodeAudioData=void 0;var e=require("../helpers/detach-array-buffer"),t=require("../helpers/wrap-audio-buffer-get-channel-data-method");const a=(a,r,c,o,d,n,u,h,i,s,f)=>(p,y)=>{const l=u(p)?p:n(p);if(d.has(y)){const e=c();return Promise.reject(e)}try{d.add(y)}catch{}return r(i,()=>i(l))?l.decodeAudioData(y).then(t=>((0,e.detachArrayBuffer)(y).catch(()=>{}),r(h,()=>h(t))||f(t),a.add(t),t)):new Promise((r,c)=>{const d=async()=>{try{await(0,e.detachArrayBuffer)(y)}catch{}},n=e=>{c(e),d()};try{l.decodeAudioData(y,e=>{"function"!=typeof e.copyFromChannel&&(s(e),(0,t.wrapAudioBufferGetChannelDataMethod)(e)),a.add(e),d().then(()=>r(e))},e=>{n(null===e?o():e)})}catch(u){n(u)}})};exports.createDecodeAudioData=a;
},{"../helpers/detach-array-buffer":"EDRy","../helpers/wrap-audio-buffer-get-channel-data-method":"twCl"}],"LxHQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDecrementCycleCounter=void 0;var e=require("../guards/audio-node-output-connection");const t=(t,o,c,n,r,s,i,u)=>(d,l)=>{const p=o.get(d);if(void 0===p)throw new Error("Missing the expected cycle count.");const f=s(d.context),a=u(f);if(p===l){if(o.delete(d),!a&&i(d)){const o=n(d),{outputs:s}=c(d);for(const c of s)if((0,e.isAudioNodeOutputConnection)(c)){const e=n(c[0]);t(o,e,c[1],c[2])}else{const e=r(c[0]);o.connect(e,c[1])}}}else o.set(d,p-l)};exports.createDecrementCycleCounter=t;
},{"../guards/audio-node-output-connection":"kLx1"}],"JbPv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDelayNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},t=(t,a,s,o,r,n,l)=>(class extends t{constructor(t,i){const c=r(t),d={...e,...i},m=o(c,d),u=n(c);super(t,!1,m,u?s(d.maxDelayTime):null),this._delayTime=a(this,u,m.delayTime),l(this,d.maxDelayTime)}get delayTime(){return this._delayTime}});exports.createDelayNodeConstructor=t;
},{}],"QPUv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDelayNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,a,r,o)=>i=>{const l=new WeakMap;return{render(c,d,s){const y=l.get(d);return void 0!==y?Promise.resolve(y):(async(c,d,s)=>{let y=a(c);const u=(0,e.isOwnedByContext)(y,d);if(!u){const e={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:i};y=n(d,e)}return l.set(d,y),u?await t(d,c.delayTime,y.delayTime,s):await r(d,c.delayTime,y.delayTime,s),await o(c,d,y,s),y})(c,d,s)}}};exports.createDelayNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"USW7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeleteActiveInputConnectionToAudioNode=void 0;const e=e=>(t,o,n,c)=>e(t[c],e=>e[0]===o&&e[1]===n);exports.createDeleteActiveInputConnectionToAudioNode=e;
},{}],"YAbs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeleteUnrenderedAudioWorkletNode=void 0;const e=e=>(t,r)=>{e(t).delete(r)};exports.createDeleteUnrenderedAudioWorkletNode=e;
},{}],"Icvq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDelayNode=void 0;const e=e=>"delayTime"in e;exports.isDelayNode=e;
},{}],"Jj65":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDetectCycles=void 0;var e=require("../guards/audio-node"),r=require("../guards/delay-node");const t=(t,o,u)=>(function s(c,d){const i=(0,e.isAudioNode)(d)?d:u(t,d);if((0,r.isDelayNode)(i))return[];if(c[0]===i)return[c];if(c.includes(i))return[];const{outputs:n}=o(i);return Array.from(n).map(e=>s([...c,i],e[0])).reduce((e,r)=>e.concat(r),[])});exports.createDetectCycles=t;
},{"../guards/audio-node":"KEnq","../guards/delay-node":"Icvq"}],"Rc6A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDisconnectMultipleOutputs=void 0;var e=require("../guards/native-audio-node");const o=(e,o,t)=>{const c=o[t];if(void 0===c)throw e();return c},t=t=>(c,i,n,s=0)=>void 0===i?c.forEach(e=>e.disconnect()):"number"==typeof i?o(t,c,i).disconnect():(0,e.isNativeAudioNode)(i)?void 0===n?c.forEach(e=>e.disconnect(i)):void 0===s?o(t,c,n).disconnect(i,0):o(t,c,n).disconnect(i,0,s):void 0===n?c.forEach(e=>e.disconnect(i)):o(t,c,n).disconnect(i,0);exports.createDisconnectMultipleOutputs=t;
},{"../guards/native-audio-node":"Lqxx"}],"q4Gu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDynamicsCompressorNodeConstructor=void 0;const e={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},t=(t,s,n,o,r,a,i,h)=>(class extends t{constructor(t,r){const c=a(t),u={...e,...r},d=o(c,u),l=i(c);super(t,!1,d,l?n():null),this._attack=s(this,l,d.attack),this._knee=s(this,l,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=s(this,l,d.ratio),this._release=s(this,l,d.release),this._threshold=s(this,l,d.threshold),h(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}});exports.createDynamicsCompressorNodeConstructor=t;
},{}],"vFUI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDynamicsCompressorNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,a,r,n,o)=>()=>{const s=new WeakMap;return{render(i,l,c){const d=s.get(l);return void 0!==d?Promise.resolve(d):(async(i,l,c)=>{let d=r(i);const h=(0,e.isOwnedByContext)(d,l);if(!h){const e={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=a(l,e)}return s.set(l,d),h?(await t(l,i.attack,d.attack,c),await t(l,i.knee,d.knee,c),await t(l,i.ratio,d.ratio,c),await t(l,i.release,d.release,c),await t(l,i.threshold,d.threshold,c)):(await n(l,i.attack,d.attack,c),await n(l,i.knee,d.knee,c),await n(l,i.ratio,d.ratio,c),await n(l,i.release,d.release,c),await n(l,i.threshold,d.threshold,c)),await o(i,l,d,c),d})(i,l,c)}}};exports.createDynamicsCompressorNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"hG4B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEncodingError=void 0;const e=()=>new DOMException("","EncodingError");exports.createEncodingError=e;
},{}],"n7Oi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEvaluateSource=void 0;const e=e=>r=>new Promise((o,t)=>{if(null===e)return void t(new SyntaxError);const n=e.document.head;if(null===n)t(new SyntaxError);else{const a=e.document.createElement("script"),c=new Blob([r],{type:"application/javascript"}),l=URL.createObjectURL(c),i=e.onerror,s=()=>{e.onerror=i,URL.revokeObjectURL(l)};e.onerror=((r,o,n,a,c)=>o===l||o===e.location.href&&1===n&&1===a?(s(),t(c),!1):null!==i?i(r,o,n,a,c):void 0),a.onerror=(()=>{s(),t(new SyntaxError)}),a.onload=(()=>{s(),o()}),a.src=l,a.type="module",n.appendChild(a)}});exports.createEvaluateSource=e;
},{}],"LnLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEventTargetConstructor=void 0;const e=e=>(class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,s){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=e(this,n),"function"==typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(t,r,s)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const s=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===s?null:s,n)}});exports.createEventTargetConstructor=e;
},{}],"PdBp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExposeCurrentFrameAndCurrentTime=void 0;const e=e=>(r,t,n)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(r*t)},currentTime:{configurable:!0,get:()=>r}});try{return n()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}};exports.createExposeCurrentFrameAndCurrentTime=e;
},{}],"N4Qd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFetchSource=void 0;const e=e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw e()};exports.createFetchSource=e;
},{}],"gcyU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGainNodeConstructor=void 0;var e=require("../constants");const t={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},n=(n,r,s,o,a,c)=>(class extends n{constructor(n,i){const u=a(n),_={...t,...i},l=o(u,_),d=c(u);super(n,!1,l,d?s():null),this._gain=r(this,d,l.gain,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}});exports.createGainNodeConstructor=n;
},{"../constants":"nOFp"}],"IYSC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGainNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,a,r,o)=>()=>{const i=new WeakMap;return{render(c,s,d){const l=i.get(s);return void 0!==l?Promise.resolve(l):(async(c,s,d)=>{let l=a(c);const u=(0,e.isOwnedByContext)(l,s);if(!u){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(s,e)}return i.set(s,l),u?await n(s,c.gain,l.gain,d):await r(s,c.gain,l.gain,d),await o(c,s,l,d),l})(c,s,d)}}};exports.createGainNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"c92a"}],"zNYB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetActiveAudioWorkletNodeInputs=void 0;const e=(e,t)=>o=>t(e,o);exports.createGetActiveAudioWorkletNodeInputs=e;
},{}],"Pqq9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetAudioNodeRenderer=void 0;const e=e=>r=>{const o=e(r);if(null===o.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return o.renderer};exports.createGetAudioNodeRenderer=e;
},{}],"WuDR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetAudioNodeTailTime=void 0;const e=e=>t=>{var o;return null!==(o=e.get(t))&&void 0!==o?o:0};exports.createGetAudioNodeTailTime=e;
},{}],"uN17":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetAudioParamRenderer=void 0;const e=e=>r=>{const t=e(r);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer};exports.createGetAudioParamRenderer=e;
},{}],"Rg3h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetBackupOfflineAudioContext=void 0;const e=e=>t=>e.get(t);exports.createGetBackupOfflineAudioContext=e;
},{}],"GiNw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInvalidStateError=void 0;const e=()=>new DOMException("","InvalidStateError");exports.createInvalidStateError=e;
},{}],"yRy9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetNativeContext=void 0;var e=require("./invalid-state-error");const t=t=>r=>{const o=t.get(r);if(void 0===o)throw(0,e.createInvalidStateError)();return o};exports.createGetNativeContext=t;
},{"./invalid-state-error":"GiNw"}],"wgvZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetOrCreateBackupOfflineAudioContext=void 0;const e=(e,t)=>r=>{let o=e.get(r);if(void 0!==o)return o;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return o=new t(1,1,44100),e.set(r,o),o};exports.createGetOrCreateBackupOfflineAudioContext=e;
},{}],"UGOe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetUnrenderedAudioWorkletNodes=void 0;const e=e=>o=>{const t=e.get(o);if(void 0===t)throw new Error("The context has no set of AudioWorkletNodes.");return t};exports.createGetUnrenderedAudioWorkletNodes=e;
},{}],"wX6S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInvalidAccessError=void 0;const e=()=>new DOMException("","InvalidAccessError");exports.createInvalidAccessError=e;
},{}],"EzK5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapIIRFilterNodeGetFrequencyResponseMethod=void 0;var e=require("../factories/invalid-access-error");const r=r=>{r.getFrequencyResponse=(t=>(s,o,n)=>{if(s.length!==o.length||o.length!==n.length)throw(0,e.createInvalidAccessError)();return t.call(r,s,o,n)})(r.getFrequencyResponse)};exports.wrapIIRFilterNodeGetFrequencyResponseMethod=r;
},{"../factories/invalid-access-error":"wX6S"}],"VQbf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIIRFilterNodeConstructor=void 0;var e=require("../helpers/wrap-iir-filter-node-get-frequency-response-method");const t={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},r=(r,n,o,s,c,a)=>(class extends r{constructor(r,i){const l=s(r),u=c(l),d={...t,...i},p=n(l,u?null:r.baseLatency,d);super(r,!1,p,u?o(d.feedback,d.feedforward):null),(0,e.wrapIIRFilterNodeGetFrequencyResponseMethod)(p),this._nativeIIRFilterNode=p,a(this,1)}getFrequencyResponse(e,t,r){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,r)}});exports.createIIRFilterNodeConstructor=r;
},{"../helpers/wrap-iir-filter-node-get-frequency-response-method":"EzK5"}],"UpEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterBuffer=void 0;const e=(e,t,r,o,f,l,s,n,u,c,i)=>{const p=c.length;let d=n;for(let x=0;x<p;x+=1){let n=r[0]*c[x];for(let t=1;t<f;t+=1){const o=d-t&u-1;n+=r[t]*l[o],n-=e[t]*s[o]}for(let e=f;e<o;e+=1)n+=r[e]*l[d-e&u-1];for(let r=f;r<t;r+=1)n-=e[r]*s[d-r&u-1];l[d]=c[x],s[d]=n,d=d+1&u-1,i[x]=n}return d};exports.filterBuffer=e;
},{}],"TNX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIIRFilterNodeRendererFactory=void 0;var e=require("../helpers/filter-buffer"),t=require("../helpers/is-owned-by-context");const n=(t,n,r,a)=>{const l=r instanceof Float64Array?r:new Float64Array(r),o=a instanceof Float64Array?a:new Float64Array(a),i=l.length,s=o.length,c=Math.min(i,s);if(1!==l[0]){for(let e=0;e<i;e+=1)o[e]/=l[0];for(let e=1;e<s;e+=1)l[e]/=l[0]}const u=new Float32Array(32),f=new Float32Array(32),d=n.createBuffer(t.numberOfChannels,t.length,t.sampleRate),h=t.numberOfChannels;for(let p=0;p<h;p+=1){const n=t.getChannelData(p),r=d.getChannelData(p);u.fill(0),f.fill(0),(0,e.filterBuffer)(l,i,o,s,c,u,f,0,32,n,r)}return d},r=(e,r,a,l,o)=>(i,s)=>{const c=new WeakMap;let u=null;return{render(f,d,h){const p=c.get(d);return void 0!==p?Promise.resolve(p):(async(f,d,h)=>{let p=null,w=r(f);const y=(0,t.isOwnedByContext)(w,d);if(void 0===d.createIIRFilter?p=e(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(w=d.createIIRFilter(s,i)),c.set(d,null===p?w:p),null!==p){if(null===u){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(f.context.destination.channelCount,f.context.length,d.sampleRate);u=(async()=>{await l(f,e,e.destination,h);const t=await o(e);return n(t,d,i,s)})()}const e=await u;return p.buffer=e,p.start(0),p}return await l(f,d,w,h),w})(f,d,h)}}};exports.createIIRFilterNodeRendererFactory=r;
},{"../helpers/filter-buffer":"UpEX","../helpers/is-owned-by-context":"c92a"}],"R2UW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIncrementCycleCounterFactory=void 0;var e=require("../guards/audio-node-output-connection");const t=(t,o,n,c,s,r)=>u=>(i,d)=>{const a=t.get(i);if(void 0===a){if(!u&&r(i)){const t=c(i),{outputs:r}=n(i);for(const n of r)if((0,e.isAudioNodeOutputConnection)(n)){const e=c(n[0]);o(t,e,n[1],n[2])}else{const e=s(n[0]);t.disconnect(e,n[1])}}t.set(i,d)}else t.set(i,a+d)};exports.createIncrementCycleCounterFactory=t;
},{"../guards/audio-node-output-connection":"kLx1"}],"rNOI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioContext=void 0;const e=(e,t)=>o=>{const r=e.get(o);return t(r)||t(o)};exports.createIsAnyAudioContext=e;
},{}],"jJG5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioNode=void 0;const e=(e,o)=>s=>e.has(s)||o(s);exports.createIsAnyAudioNode=e;
},{}],"OFf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioParam=void 0;const e=(e,r)=>s=>e.has(s)||r(s);exports.createIsAnyAudioParam=e;
},{}],"IJqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyOfflineAudioContext=void 0;const e=(e,t)=>o=>{const n=e.get(o);return t(n)||t(o)};exports.createIsAnyOfflineAudioContext=e;
},{}],"SNw9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioContext=void 0;const e=e=>t=>null!==e&&t instanceof e;exports.createIsNativeAudioContext=e;
},{}],"CddN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioNode=void 0;const e=e=>o=>null!==e&&"function"==typeof e.AudioNode&&o instanceof e.AudioNode;exports.createIsNativeAudioNode=e;
},{}],"N1rR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioParam=void 0;const e=e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam;exports.createIsNativeAudioParam=e;
},{}],"dkAp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeContext=void 0;const e=(e,t)=>o=>e(o)||t(o);exports.createIsNativeContext=e;
},{}],"ifKA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeOfflineAudioContext=void 0;const e=e=>t=>null!==e&&t instanceof e;exports.createIsNativeOfflineAudioContext=e;
},{}],"gGv6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsSecureContext=void 0;const e=e=>null!==e&&e.isSecureContext;exports.createIsSecureContext=e;
},{}],"A5pF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsSupportedPromise=void 0;const e=async(e,r,t,s,o,i,p,a,u,c,d,n,l,P,m,v)=>{if(e(r,r)&&e(t,t)&&e(o,o)&&e(i,i)&&e(a,a)&&e(u,u)&&e(c,c)&&e(d,d)&&e(n,n)&&e(l,l)&&e(P,P)){return(await Promise.all([e(s,s),e(p,p),e(m,m),e(v,v)])).every(e=>e)}return!1};exports.createIsSupportedPromise=e;
},{}],"V7o7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaElementAudioSourceNodeConstructor=void 0;const e=(e,t,o,r)=>(class extends e{constructor(e,d){const i=o(e),n=t(i,d);if(r(i))throw TypeError();super(e,!0,n,null),this._nativeMediaElementAudioSourceNode=n}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}});exports.createMediaElementAudioSourceNodeConstructor=e;
},{}],"deJZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamAudioDestinationNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},t=(t,o,n,r)=>(class extends t{constructor(t,i){const s=n(t);if(r(s))throw new TypeError;const a={...e,...i},d=o(s,a);super(t,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}});exports.createMediaStreamAudioDestinationNodeConstructor=t;
},{}],"SmI6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamAudioSourceNodeConstructor=void 0;const e=(e,r,t,o)=>(class extends e{constructor(e,a){const d=t(e),i=r(d,a);if(o(d))throw new TypeError;super(e,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}});exports.createMediaStreamAudioSourceNodeConstructor=e;
},{}],"gQYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamTrackAudioSourceNodeConstructor=void 0;const e=(e,r,o)=>(class extends e{constructor(e,t){const c=o(e);super(e,!0,r(c,t),null)}});exports.createMediaStreamTrackAudioSourceNodeConstructor=e;
},{}],"xnjs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalAudioContextConstructor=void 0;var t=require("../helpers/deactivate-audio-graph"),e=require("../helpers/is-valid-latency-hint");const i=(i,n,a,s,o)=>(class extends s{constructor(t={}){if(null===o)throw new Error("Missing the native AudioContext constructor.");let i;try{i=new o(t)}catch(h){if(12===h.code&&"sampleRate is not in range"===h.message)throw n();throw h}if(null===i)throw a();if(!(0,e.isValidLatencyHint)(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&i.sampleRate!==t.sampleRate)throw n();super(i,2);const{latencyHint:s}=t,{sampleRate:r}=i;if(this._baseLatency="number"==typeof i.baseLatency?i.baseLatency:"balanced"===s?512/r:"interactive"===s||void 0===s?256/r:"playback"===s?1024/r:128*Math.max(2,Math.min(128,Math.round(s*r/128)))/r,this._nativeAudioContext=i,"webkitAudioContext"===o.name?(this._nativeGainNode=i.createGain(),this._nativeOscillatorNode=i.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(i.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===i.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),i.removeEventListener("statechange",t)};i.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw i()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),(0,t.deactivateAudioGraph)(this)}))}resume(){return"suspended"===this._state?new Promise((t,e)=>{const i=()=>{this._nativeAudioContext.removeEventListener("statechange",i),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",i)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw i();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw i();throw t})}});exports.createMinimalAudioContextConstructor=i;
},{"../helpers/deactivate-audio-graph":"K0bU","../helpers/is-valid-latency-hint":"ybOj"}],"lloe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalBaseAudioContextConstructor=void 0;var t=require("../globals");const e=(e,n,s,i,a,o)=>(class extends s{constructor(s,o){super(s),this._nativeContext=s,t.CONTEXT_STORE.set(this,s),i(s)&&a.set(s,new Set),this._destination=new e(this,o),this._listener=n(this,s),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}});exports.createMinimalBaseAudioContextConstructor=e;
},{"../globals":"Q1Wz"}],"lX9q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testPromiseSupport=void 0;const t=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const r=t.decodeAudioData(e.buffer,()=>{});return void 0!==r&&(r.catch(()=>{}),!0)}catch{}return!1};exports.testPromiseSupport=t;
},{}],"YM8X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalOfflineAudioContextConstructor=void 0;var t=require("../helpers/deactivate-audio-graph"),e=require("../helpers/test-promise-support");const i={numberOfChannels:1},n=(n,s,r,o,a)=>(class extends o{constructor(t){const{length:s,numberOfChannels:o,sampleRate:a}={...i,...t},h=r(o,s,a);n(e.testPromiseSupport,()=>(0,e.testPromiseSupport)(h))||h.addEventListener("statechange",(()=>{let t=0;const e=i=>{"running"===this._state&&(t>0?(h.removeEventListener("statechange",e),i.stopImmediatePropagation(),this._waitForThePromiseToSettle(i)):t+=1)};return e})()),super(h,o),this._length=s,this._nativeOfflineAudioContext=h,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(s()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,(0,t.deactivateAudioGraph)(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}});exports.createMinimalOfflineAudioContextConstructor=n;
},{"../helpers/deactivate-audio-graph":"K0bU","../helpers/test-promise-support":"lX9q"}],"eRfd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMonitorConnections=void 0;const e=(e,o)=>(t,n,c)=>{const s=new Set;return t.connect=(c=>(i,l=0,r=0)=>{const a=0===s.size;if(o(i))return c.call(t,i,l,r),e(s,[i,l,r],e=>e[0]===i&&e[1]===l&&e[2]===r,!0),a&&n(),i;c.call(t,i,l),e(s,[i,l],e=>e[0]===i&&e[1]===l,!0),a&&n()})(t.connect),t.disconnect=(e=>(n,i,l)=>{const r=s.size>0;if(void 0===n)e.apply(t),s.clear();else if("number"==typeof n){e.call(t,n);for(const e of s)e[1]===n&&s.delete(e)}else{o(n)?e.call(t,n,i,l):e.call(t,n,i);for(const e of s)e[0]!==n||void 0!==i&&e[1]!==i||void 0!==l&&e[2]!==l||s.delete(e)}const a=0===s.size;r&&a&&c()})(t.disconnect),t};exports.createMonitorConnections=e;
},{}],"yV9N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeOption=void 0;const e=(e,o,t)=>{const i=o[t];void 0!==i&&i!==e[t]&&(e[t]=i)};exports.assignNativeAudioNodeOption=e;
},{}],"xpAH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeOptions=void 0;var e=require("./assign-native-audio-node-option");const o=(o,i)=>{(0,e.assignNativeAudioNodeOption)(o,i,"channelCount"),(0,e.assignNativeAudioNodeOption)(o,i,"channelCountMode"),(0,e.assignNativeAudioNodeOption)(o,i,"channelInterpretation")};exports.assignNativeAudioNodeOptions=o;
},{"./assign-native-audio-node-option":"yV9N"}],"AVlm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAnalyserNodeGetFloatTimeDomainDataMethodSupport=void 0;const t=t=>"function"==typeof t.getFloatTimeDomainData;exports.testAnalyserNodeGetFloatTimeDomainDataMethodSupport=t;
},{}],"IaEu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAnalyserNodeGetFloatTimeDomainDataMethod=void 0;const e=e=>{e.getFloatTimeDomainData=(t=>{const a=new Uint8Array(t.length);e.getByteTimeDomainData(a);const o=Math.max(a.length,e.fftSize);for(let e=0;e<o;e+=1)t[e]=.0078125*(a[e]-128);return t})};exports.wrapAnalyserNodeGetFloatTimeDomainDataMethod=e;
},{}],"mBw7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAnalyserNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),t=require("../helpers/assign-native-audio-node-options"),o=require("../helpers/test-analyser-node-get-float-time-domain-data-method-support"),a=require("../helpers/wrap-analyser-node-get-float-time-domain-data-method");const i=(i,s)=>(n,r)=>{const d=n.createAnalyser();if((0,t.assignNativeAudioNodeOptions)(d,r),!(r.maxDecibels>r.minDecibels))throw s();return(0,e.assignNativeAudioNodeOption)(d,r,"fftSize"),(0,e.assignNativeAudioNodeOption)(d,r,"maxDecibels"),(0,e.assignNativeAudioNodeOption)(d,r,"minDecibels"),(0,e.assignNativeAudioNodeOption)(d,r,"smoothingTimeConstant"),i(o.testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>(0,o.testAnalyserNodeGetFloatTimeDomainDataMethodSupport)(d))||(0,a.wrapAnalyserNodeGetFloatTimeDomainDataMethod)(d),d};exports.createNativeAnalyserNodeFactory=i;
},{"../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH","../helpers/test-analyser-node-get-float-time-domain-data-method-support":"AVlm","../helpers/wrap-analyser-node-get-float-time-domain-data-method":"IaEu"}],"d9j6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioBufferConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null;exports.createNativeAudioBufferConstructor=e;
},{}],"q1oh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeAudioParamValue=void 0;const e=(e,o,a)=>{const i=o[a];void 0!==i&&i!==e[a].value&&(e[a].value=i)};exports.assignNativeAudioNodeAudioParamValue=e;
},{}],"LQqQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=void 0;var e=require("../factories/invalid-state-error");const r=r=>{r.start=(t=>{let o=!1;return(a=0,s=0,i)=>{if(o)throw(0,e.createInvalidStateError)();t.call(r,a,s,i),o=!0}})(r.start)};exports.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=r;
},{"../factories/invalid-state-error":"GiNw"}],"gGRm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioScheduledSourceNodeStartMethodNegativeParameters=void 0;const e=e=>{e.start=(t=>(r=0,a=0,o)=>{if("number"==typeof o&&o<0||a<0||r<0)throw new RangeError("The parameters can't be negative.");t.call(e,r,a,o)})(e.start)};exports.wrapAudioScheduledSourceNodeStartMethodNegativeParameters=e;
},{}],"JOW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioScheduledSourceNodeStopMethodNegativeParameters=void 0;const e=e=>{e.stop=(t=>(o=0)=>{if(o<0)throw new RangeError("The parameter can't be negative.");t.call(e,o)})(e.stop)};exports.wrapAudioScheduledSourceNodeStopMethodNegativeParameters=e;
},{}],"Qbft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioBufferSourceNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-option"),a=require("../helpers/assign-native-audio-node-options"),r=require("../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls"),t=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),i=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const d=(d,u,s,n,p,c,l,v,N,h,f)=>(g,A)=>{const S=g.createBufferSource();return(0,a.assignNativeAudioNodeOptions)(S,A),(0,e.assignNativeAudioNodeAudioParamValue)(S,A,"playbackRate"),(0,o.assignNativeAudioNodeOption)(S,A,"buffer"),(0,o.assignNativeAudioNodeOption)(S,A,"loop"),(0,o.assignNativeAudioNodeOption)(S,A,"loopEnd"),(0,o.assignNativeAudioNodeOption)(S,A,"loopStart"),u(s,()=>s(g))||(0,r.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls)(S),u(n,()=>n(g))||N(S),u(p,()=>p(g))||h(S,g),u(c,()=>c(g))||(0,t.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(S),u(l,()=>l(g))||f(S,g),u(v,()=>v(g))||(0,i.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(S),d(g,S),S};exports.createNativeAudioBufferSourceNodeFactory=d;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH","../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls":"LQqQ","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"gGRm","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"JOW0"}],"Q4OH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioContextConstructor=void 0;const t=t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;exports.createNativeAudioContextConstructor=t;
},{}],"sJNH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioDestinationNodeFactory=void 0;const n=(n,e)=>(t,a,o)=>{const c=t.destination;if(c.channelCount!==a)try{c.channelCount=a}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:a});const l=n(t,{channelCount:a,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return e(l,"channelCount",n=>()=>n.call(l),n=>e=>{n.call(l,e);try{c.channelCount=e}catch(t){if(e>c.maxChannelCount)throw t}}),e(l,"channelCountMode",n=>()=>n.call(l),n=>e=>{n.call(l,e),c.channelCountMode=e}),e(l,"channelInterpretation",n=>()=>n.call(l),n=>e=>{n.call(l,e),c.channelInterpretation=e}),Object.defineProperty(l,"maxChannelCount",{get:()=>c.maxChannelCount}),l.connect(c),l};exports.createNativeAudioDestinationNodeFactory=n;
},{}],"bpDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null;exports.createNativeAudioWorkletNodeConstructor=e;
},{}],"ANKj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testClonabilityOfAudioWorkletNodeOptions=void 0;const e=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}};exports.testClonabilityOfAudioWorkletNodeOptions=e;
},{}],"Ehld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeFactory=void 0;var e=require("../helpers/test-clonability-of-audio-worklet-node-options");const t=(t,o,r,n,i)=>(c,s,l,a,u,d)=>{if(null!==l)try{const e=new l(c,a,d),o=new Map;let s=null;if(Object.defineProperties(e,{channelCount:{get:()=>d.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>s,set:t=>{"function"==typeof s&&e.removeEventListener("processorerror",s),"function"==typeof(s="function"==typeof t?t:null)&&e.addEventListener("processorerror",s)}}}),e.addEventListener=(t=>(...r)=>{if("processorerror"===r[0]){const e="function"==typeof r[1]?r[1]:"object"==typeof r[1]&&null!==r[1]&&"function"==typeof r[1].handleEvent?r[1].handleEvent:null;if(null!==e){const t=o.get(r[1]);void 0!==t?r[1]=t:(r[1]=(t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(r[0],{...t}))}),o.set(e,r[1]))}}return t.call(e,"error",r[1],r[2]),t.call(e,...r)})(e.addEventListener),e.removeEventListener=(t=>(...r)=>{if("processorerror"===r[0]){const e=o.get(r[1]);void 0!==e&&(o.delete(r[1]),r[1]=e)}return t.call(e,"error",r[1],r[2]),t.call(e,r[0],r[1],r[2])})(e.removeEventListener),0!==d.numberOfOutputs){const t=r(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(c.destination),i(e,()=>t.disconnect(),()=>t.connect(c.destination))}return e}catch(p){if(11===p.code)throw n();throw p}if(void 0===u)throw n();return(0,e.testClonabilityOfAudioWorkletNodeOptions)(d),o(c,s,u,d)};exports.createNativeAudioWorkletNodeFactory=t;
},{"../helpers/test-clonability-of-audio-worklet-node-options":"ANKj"}],"G6Dw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeBufferSize=void 0;const e=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t)))));exports.computeBufferSize=e;
},{}],"iyf6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneAudioWorkletNodeOptions=void 0;const e=e=>new Promise((o,s)=>{const{port1:t,port2:r}=new MessageChannel;t.onmessage=(({data:e})=>{t.close(),r.close(),o(e)}),t.onmessageerror=(({data:e})=>{t.close(),r.close(),s(e)}),r.postMessage(e)});exports.cloneAudioWorkletNodeOptions=e;
},{}],"DMl8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletProcessorPromise=void 0;var e=require("./clone-audio-worklet-node-options");const o=async(o,r)=>{return new o(await(0,e.cloneAudioWorkletNodeOptions)(r))};exports.createAudioWorkletProcessorPromise=o;
},{"./clone-audio-worklet-node-options":"iyf6"}],"DTyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletProcessor=void 0;var e=require("../globals"),r=require("./create-audio-worklet-processor-promise");const o=(o,t,s,c)=>{let i=e.NODE_TO_PROCESSOR_MAPS.get(o);void 0===i&&(i=new WeakMap,e.NODE_TO_PROCESSOR_MAPS.set(o,i));const a=(0,r.createAudioWorkletProcessorPromise)(s,c);return i.set(t,a),a};exports.createAudioWorkletProcessor=o;
},{"../globals":"Q1Wz","./create-audio-worklet-processor-promise":"DMl8"}],"p5Cq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeFakerFactory=void 0;var e=require("../constants"),t=require("../helpers/compute-buffer-size"),n=require("../helpers/copy-from-channel"),r=require("../helpers/copy-to-channel"),o=require("../helpers/create-audio-worklet-processor"),a=require("../helpers/create-nested-arrays"),s=require("../read-only-map");const u=(u,c,l,p,i,f,h,m,d,O,v,C,b)=>(y,g,I,E)=>{if(0===E.numberOfInputs&&0===E.numberOfOutputs)throw d();const M=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(M.some(e=>e<1))throw d();if(M.length!==E.numberOfOutputs)throw c();if("explicit"!==E.channelCountMode)throw d();const x=E.channelCount*E.numberOfInputs,L=M.reduce((e,t)=>e+t,0),w=void 0===I.parameterDescriptors?0:I.parameterDescriptors.length;if(x+w>6||L>6)throw d();const D=new MessageChannel,A=[],F=[];for(let e=0;e<E.numberOfInputs;e+=1)A.push(h(y,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),F.push(i(y,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const k=[];if(void 0!==I.parameterDescriptors)for(const{defaultValue:t,maxValue:n,minValue:r,name:o}of I.parameterDescriptors){const a=f(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==E.parameterData[o]?E.parameterData[o]:void 0===t?0:t});Object.defineProperties(a.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===n?e.MOST_POSITIVE_SINGLE_FLOAT:n},minValue:{get:()=>void 0===r?e.MOST_NEGATIVE_SINGLE_FLOAT:r}}),k.push(a)}const N=p(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,x+w)}),T=(0,t.computeBufferSize)(g,y.sampleRate),V=m(y,T,x+w,Math.max(1,L)),_=i(y,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),q=[];for(let e=0;e<E.numberOfOutputs;e+=1)q.push(p(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[e]}));for(let e=0;e<E.numberOfInputs;e+=1){A[e].connect(F[e]);for(let t=0;t<E.channelCount;t+=1)F[e].connect(N,t,e*E.channelCount+t)}const S=new s.ReadOnlyMap(void 0===I.parameterDescriptors?[]:I.parameterDescriptors.map(({name:e},t)=>{const n=k[t];return n.connect(N,0,x+t),n.start(0),[e,n.offset]}));N.connect(V);let P=E.channelInterpretation,R=null;const j=0===E.numberOfOutputs?[V]:q,z={get bufferSize(){return T},get channelCount(){return E.channelCount},set channelCount(e){throw l()},get channelCountMode(){return E.channelCountMode},set channelCountMode(e){throw l()},get channelInterpretation(){return P},set channelInterpretation(e){for(const t of A)t.channelInterpretation=e;P=e},get context(){return V.context},get inputs(){return A},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(e){"function"==typeof R&&z.removeEventListener("processorerror",R),"function"==typeof(R="function"==typeof e?e:null)&&z.addEventListener("processorerror",R)},get parameters(){return S},get port(){return D.port2},addEventListener:(...e)=>V.addEventListener(e[0],e[1],e[2]),connect:u.bind(null,j),disconnect:O.bind(null,j),dispatchEvent:(...e)=>V.dispatchEvent(e[0]),removeEventListener:(...e)=>V.removeEventListener(e[0],e[1],e[2])},B=new Map;D.port1.addEventListener=(e=>(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=B.get(t[1]);void 0!==n?t[1]=n:(t[1]=(t=>{v(y.currentTime,y.sampleRate,()=>e(t))}),B.set(e,t[1]))}}return e.call(D.port1,t[0],t[1],t[2])})(D.port1.addEventListener),D.port1.removeEventListener=(e=>(...t)=>{if("message"===t[0]){const e=B.get(t[1]);void 0!==e&&(B.delete(t[1]),t[1]=e)}return e.call(D.port1,t[0],t[1],t[2])})(D.port1.removeEventListener);let G=null;Object.defineProperty(D.port1,"onmessage",{get:()=>G,set:e=>{"function"==typeof G&&D.port1.removeEventListener("message",G),"function"==typeof(G="function"==typeof e?e:null)&&(D.port1.addEventListener("message",G),D.port1.start())}}),I.prototype.port=D.port1;let W=null;(0,o.createAudioWorkletProcessor)(y,z,I,E).then(e=>W=e);const H=(0,a.createNestedArrays)(E.numberOfInputs,E.channelCount),J=(0,a.createNestedArrays)(E.numberOfOutputs,M),K=void 0===I.parameterDescriptors?[]:I.parameterDescriptors.reduce((e,{name:t})=>({...e,[t]:new Float32Array(128)}),{});let Q=!0;const U=()=>{E.numberOfOutputs>0&&V.disconnect(_);for(let e=0,t=0;e<E.numberOfOutputs;e+=1){const n=q[e];for(let r=0;r<M[e];r+=1)_.disconnect(n,t+r,r);t+=M[e]}},X=new Map;V.onaudioprocess=(({inputBuffer:e,outputBuffer:t})=>{if(null!==W){const a=C(z);for(let s=0;s<T;s+=128){for(let t=0;t<E.numberOfInputs;t+=1)for(let r=0;r<E.channelCount;r+=1)(0,n.copyFromChannel)(e,H[t],r,r,s);void 0!==I.parameterDescriptors&&I.parameterDescriptors.forEach(({name:t},r)=>{(0,n.copyFromChannel)(e,K,t,x+r,s)});for(let e=0;e<E.numberOfInputs;e+=1)for(let t=0;t<M[e];t+=1)0===J[e][t].byteLength&&(J[e][t]=new Float32Array(128));try{const e=H.map((e,t)=>{if(a[t].size>0)return X.set(t,T/128),e;const n=X.get(t);return void 0===n?[]:(e.every(e=>e.every(e=>0===e))&&(1===n?X.delete(t):X.set(t,n-1)),e)}),n=v(y.currentTime+s/y.sampleRate,y.sampleRate,()=>W.process(e,J,K));Q=n;for(let o=0,a=0;o<E.numberOfOutputs;o+=1){for(let e=0;e<M[o];e+=1)(0,r.copyToChannel)(t,J[o],e,a+e,s);a+=M[o]}}catch(o){Q=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:o.colno,filename:o.filename,lineno:o.lineno,message:o.message}))}if(!Q){for(let e=0;e<E.numberOfInputs;e+=1){A[e].disconnect(F[e]);for(let t=0;t<E.channelCount;t+=1)F[s].disconnect(N,t,e*E.channelCount+t)}if(void 0!==I.parameterDescriptors){const e=I.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=k[t];e.disconnect(N,0,x+t),e.stop()}}N.disconnect(V),V.onaudioprocess=null,Y?U():ee();break}}}});let Y=!1;const Z=h(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$=()=>V.connect(Z).connect(y.destination),ee=()=>{V.disconnect(Z),Z.disconnect()};return $(),b(z,()=>{if(Q){ee(),E.numberOfOutputs>0&&V.connect(_);for(let e=0,t=0;e<E.numberOfOutputs;e+=1){const n=q[e];for(let r=0;r<M[e];r+=1)_.connect(n,t+r,r);t+=M[e]}}Y=!0},()=>{Q&&($(),U()),Y=!1})};exports.createNativeAudioWorkletNodeFakerFactory=u;
},{"../constants":"nOFp","../helpers/compute-buffer-size":"G6Dw","../helpers/copy-from-channel":"jb9C","../helpers/copy-to-channel":"JNmV","../helpers/create-audio-worklet-processor":"DTyE","../helpers/create-nested-arrays":"hfp0","../read-only-map":"hfAY"}],"gfnq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeBiquadFilterNode=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),i=require("../helpers/assign-native-audio-node-option"),a=require("../helpers/assign-native-audio-node-options");const o=(o,t)=>{const d=o.createBiquadFilter();return(0,a.assignNativeAudioNodeOptions)(d,t),(0,e.assignNativeAudioNodeAudioParamValue)(d,t,"Q"),(0,e.assignNativeAudioNodeAudioParamValue)(d,t,"detune"),(0,e.assignNativeAudioNodeAudioParamValue)(d,t,"frequency"),(0,e.assignNativeAudioNodeAudioParamValue)(d,t,"gain"),(0,i.assignNativeAudioNodeOption)(d,t,"type"),d};exports.createNativeBiquadFilterNode=o;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH"}],"H2dP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeChannelMergerNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=(t,r)=>(n,o)=>{const a=n.createChannelMerger(o.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&r(n,a),(0,e.assignNativeAudioNodeOptions)(a,o),a};exports.createNativeChannelMergerNodeFactory=t;
},{"../helpers/assign-native-audio-node-options":"xpAH"}],"Itdm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapChannelSplitterNode=void 0;var e=require("../factories/invalid-state-error");const t=t=>{const r=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>r,set:t=>{if(t!==r)throw(0,e.createInvalidStateError)()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw(0,e.createInvalidStateError)()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw(0,e.createInvalidStateError)()}})};exports.wrapChannelSplitterNode=t;
},{"../factories/invalid-state-error":"GiNw"}],"w9Al":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeChannelSplitterNode=void 0;var e=require("../helpers/assign-native-audio-node-options"),t=require("../helpers/wrap-channel-splitter-node");const r=(r,n)=>{const i=r.createChannelSplitter(n.numberOfOutputs);return(0,e.assignNativeAudioNodeOptions)(i,n),(0,t.wrapChannelSplitterNode)(i),i};exports.createNativeChannelSplitterNode=r;
},{"../helpers/assign-native-audio-node-options":"xpAH","../helpers/wrap-channel-splitter-node":"Itdm"}],"GZKF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConstantSourceNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-options"),r=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),t=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const a=(a,s,d,i,u)=>(n,c)=>{if(void 0===n.createConstantSource)return d(n,c);const p=n.createConstantSource();return(0,o.assignNativeAudioNodeOptions)(p,c),(0,e.assignNativeAudioNodeAudioParamValue)(p,c,"offset"),s(i,()=>i(n))||(0,r.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(p),s(u,()=>u(n))||(0,t.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(p),a(n,p),p};exports.createNativeConstantSourceNodeFactory=a;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-options":"xpAH","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"gGRm","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"JOW0"}],"GMTf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interceptConnections=void 0;const e=(e,n)=>(e.connect=n.connect.bind(n),e.disconnect=n.disconnect.bind(n),e);exports.interceptConnections=e;
},{}],"kO5z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConstantSourceNodeFakerFactory=void 0;var e=require("../helpers/intercept-connections");const t=(t,n,r,o)=>(a,{offset:c,...u})=>{const s=a.createBuffer(1,2,44100),l=n(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=r(a,{...u,gain:c}),d=s.getChannelData(0);d[0]=1,d[1]=1,l.buffer=s,l.loop=!0;const i={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return l.onended},set onended(e){l.onended=e},addEventListener:(...e)=>l.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>l.dispatchEvent(e[0]),removeEventListener:(...e)=>l.removeEventListener(e[0],e[1],e[2]),start(e=0){l.start.call(l,e)},stop(e=0){l.stop.call(l,e)}};return t(a,l),o((0,e.interceptConnections)(i,p),()=>l.connect(p),()=>l.disconnect(p))};exports.createNativeConstantSourceNodeFakerFactory=t;
},{"../helpers/intercept-connections":"GMTf"}],"Ccu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConvolverNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options");const a=(a,n)=>(t,r)=>{const i=t.createConvolver();if((0,o.assignNativeAudioNodeOptions)(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),(0,e.assignNativeAudioNodeOption)(i,r,"buffer"),r.channelCount>2)throw a();if(n(i,"channelCount",e=>()=>e.call(i),e=>o=>{if(o>2)throw a();return e.call(i,o)}),"max"===r.channelCountMode)throw a();return n(i,"channelCountMode",e=>()=>e.call(i),e=>o=>{if("max"===o)throw a();return e.call(i,o)}),i};exports.createNativeConvolverNodeFactory=a;
},{"../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH"}],"uYHx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeDelayNode=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const i=(i,o)=>{const t=i.createDelay(o.maxDelayTime);return(0,a.assignNativeAudioNodeOptions)(t,o),(0,e.assignNativeAudioNodeAudioParamValue)(t,o,"delayTime"),t};exports.createNativeDelayNode=i;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-options":"xpAH"}],"fmLa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeDynamicsCompressorNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const o=o=>(i,s)=>{const r=i.createDynamicsCompressor();if((0,a.assignNativeAudioNodeOptions)(r,s),s.channelCount>2)throw o();if("max"===s.channelCountMode)throw o();return(0,e.assignNativeAudioNodeAudioParamValue)(r,s,"attack"),(0,e.assignNativeAudioNodeAudioParamValue)(r,s,"knee"),(0,e.assignNativeAudioNodeAudioParamValue)(r,s,"ratio"),(0,e.assignNativeAudioNodeAudioParamValue)(r,s,"release"),(0,e.assignNativeAudioNodeAudioParamValue)(r,s,"threshold"),r};exports.createNativeDynamicsCompressorNodeFactory=o;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-options":"xpAH"}],"y7Pv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeGainNode=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const i=(i,o)=>{const t=i.createGain();return(0,a.assignNativeAudioNodeOptions)(t,o),(0,e.assignNativeAudioNodeAudioParamValue)(t,o,"gain"),t};exports.createNativeGainNode=i;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-options":"xpAH"}],"QrfJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeIIRFilterNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=t=>(r,o,i)=>{if(void 0===r.createIIRFilter)return t(r,o,i);const a=r.createIIRFilter(i.feedforward,i.feedback);return(0,e.assignNativeAudioNodeOptions)(a,i),a};exports.createNativeIIRFilterNodeFactory=t;
},{"../helpers/assign-native-audio-node-options":"xpAH"}],"HRXb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeIIRFilterNodeFakerFactory=void 0;var e=require("../helpers/compute-buffer-size"),t=require("../helpers/filter-buffer"),n=require("../helpers/intercept-connections");function r(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function o(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function a(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)(n=o(n,t))[0]+=e[r];return n}const u=(o,u,l,c)=>(s,i,{channelCount:h,channelCountMode:f,channelInterpretation:p,feedback:d,feedforward:g})=>{const C=(0,e.computeBufferSize)(i,s.sampleRate),v=d instanceof Float64Array?d:new Float64Array(d),F=g instanceof Float64Array?g:new Float64Array(g),I=v.length,M=F.length,m=Math.min(I,M);if(0===I||I>20)throw c();if(0===v[0])throw u();if(0===M||M>20)throw c();if(0===F[0])throw u();if(1!==v[0]){for(let e=0;e<M;e+=1)F[e]/=v[0];for(let e=1;e<I;e+=1)v[e]/=v[0]}const b=l(s,C,h,h);b.channelCount=h,b.channelCountMode=f,b.channelInterpretation=p;const w=[],y=[],O=[];for(let e=0;e<h;e+=1){w.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),y.push(e),O.push(t)}b.onaudioprocess=(e=>{const n=e.inputBuffer,r=e.outputBuffer,o=n.numberOfChannels;for(let a=0;a<o;a+=1){const e=n.getChannelData(a),o=r.getChannelData(a);w[a]=(0,t.filterBuffer)(v,I,F,M,m,y[a],O[a],w[a],32,e,o)}});const A=s.sampleRate/2,E={get bufferSize(){return C},get channelCount(){return b.channelCount},set channelCount(e){b.channelCount=e},get channelCountMode(){return b.channelCountMode},set channelCountMode(e){b.channelCountMode=e},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(e){b.channelInterpretation=e},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener:(...e)=>b.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>b.dispatchEvent(e[0]),getFrequencyResponse(e,t,n){if(e.length!==t.length||t.length!==n.length)throw o();const u=e.length;for(let o=0;o<u;o+=1){const u=-Math.PI*(e[o]/A),l=[Math.cos(u),Math.sin(u)],c=r(a(F,l),a(v,l));t[o]=Math.sqrt(c[0]*c[0]+c[1]*c[1]),n[o]=Math.atan2(c[1],c[0])}},removeEventListener:(...e)=>b.removeEventListener(e[0],e[1],e[2])};return(0,n.interceptConnections)(E,b)};exports.createNativeIIRFilterNodeFakerFactory=u;
},{"../helpers/compute-buffer-size":"G6Dw","../helpers/filter-buffer":"UpEX","../helpers/intercept-connections":"GMTf"}],"sWVC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaElementAudioSourceNode=void 0;const e=(e,t)=>e.createMediaElementSource(t.mediaElement);exports.createNativeMediaElementAudioSourceNode=e;
},{}],"Uijq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamAudioDestinationNode=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=(t,i)=>{const o=t.createMediaStreamDestination();return(0,e.assignNativeAudioNodeOptions)(o,i),1===o.numberOfOutputs&&Object.defineProperty(o,"numberOfOutputs",{get:()=>0}),o};exports.createNativeMediaStreamAudioDestinationNode=t;
},{"../helpers/assign-native-audio-node-options":"xpAH"}],"ob8K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamAudioSourceNode=void 0;const e=(e,{mediaStream:t})=>{const r=t.getAudioTracks();r.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const a=r.slice(0,1),i=e.createMediaStreamSource(new MediaStream(a));return Object.defineProperty(i,"mediaStream",{value:t}),i};exports.createNativeMediaStreamAudioSourceNode=e;
},{}],"GFXu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamTrackAudioSourceNodeFactory=void 0;const e=(e,r)=>(t,{mediaStreamTrack:a})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(a);const o=new MediaStream([a]),c=t.createMediaStreamSource(o);if("audio"!==a.kind)throw e();if(r(t))throw new TypeError;return c};exports.createNativeMediaStreamTrackAudioSourceNodeFactory=e;
},{}],"wsyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeOfflineAudioContextConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null;exports.createNativeOfflineAudioContextConstructor=e;
},{}],"lMEA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeOscillatorNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options"),r=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),i=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const t=(t,d,s,u,n,p)=>(c,v)=>{const l=c.createOscillator();return(0,o.assignNativeAudioNodeOptions)(l,v),(0,e.assignNativeAudioNodeAudioParamValue)(l,v,"detune"),(0,e.assignNativeAudioNodeAudioParamValue)(l,v,"frequency"),void 0!==v.periodicWave?l.setPeriodicWave(v.periodicWave):(0,a.assignNativeAudioNodeOption)(l,v,"type"),d(s,()=>s(c))||(0,r.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(l),d(u,()=>u(c))||p(l,c),d(n,()=>n(c))||(0,i.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(l),t(c,l),l};exports.createNativeOscillatorNodeFactory=t;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"gGRm","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"JOW0"}],"Xhhv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePannerNodeFactory=void 0;var i=require("../helpers/assign-native-audio-node-audio-param-value"),e=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options");const a=a=>(n,t)=>{const s=n.createPanner();return void 0===s.orientationX?a(n,t):((0,o.assignNativeAudioNodeOptions)(s,t),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"orientationX"),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"orientationY"),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"orientationZ"),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"positionX"),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"positionY"),(0,i.assignNativeAudioNodeAudioParamValue)(s,t,"positionZ"),(0,e.assignNativeAudioNodeOption)(s,t,"coneInnerAngle"),(0,e.assignNativeAudioNodeOption)(s,t,"coneOuterAngle"),(0,e.assignNativeAudioNodeOption)(s,t,"coneOuterGain"),(0,e.assignNativeAudioNodeOption)(s,t,"distanceModel"),(0,e.assignNativeAudioNodeOption)(s,t,"maxDistance"),(0,e.assignNativeAudioNodeOption)(s,t,"panningModel"),(0,e.assignNativeAudioNodeOption)(s,t,"refDistance"),(0,e.assignNativeAudioNodeOption)(s,t,"rolloffFactor"),s)};exports.createNativePannerNodeFactory=a;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH"}],"uDRG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePannerNodeFakerFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),n=require("../helpers/intercept-connections");const t=(t,o,r,i,a,c,s,u,l,d)=>(g,{coneInnerAngle:p,coneOuterAngle:f,coneOuterGain:h,distanceModel:O,maxDistance:v,orientationX:M,orientationY:m,orientationZ:A,panningModel:I,positionX:x,positionY:C,positionZ:D,refDistance:w,rolloffFactor:F,...b})=>{const P=g.createPanner();if(b.channelCount>2)throw s();if("max"===b.channelCountMode)throw s();(0,e.assignNativeAudioNodeOptions)(P,b);const y={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=r(g,{...y,channelInterpretation:"speakers",numberOfInputs:6}),X=i(g,{...b,gain:1}),Y=i(g,{...y,gain:1}),Z=i(g,{...y,gain:0}),G=i(g,{...y,gain:0}),j=i(g,{...y,gain:0}),N=i(g,{...y,gain:0}),V=i(g,{...y,gain:0}),L=a(g,256,6,1),k=c(g,{...y,curve:new Float32Array([1,1]),oversample:"none"});let R=[M,m,A],q=[x,C,D];const _=new Float32Array(1);L.onaudioprocess=(({inputBuffer:e})=>{const n=[l(e,_,0),l(e,_,1),l(e,_,2)];n.some((e,n)=>e!==R[n])&&(P.setOrientation(...n),R=n);const t=[l(e,_,3),l(e,_,4),l(e,_,5)];t.some((e,n)=>e!==q[n])&&(P.setPosition(...t),q=t)}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(e){if(e>2)throw s();X.channelCount=e,P.channelCount=e},get channelCountMode(){return P.channelCountMode},set channelCountMode(e){if("max"===e)throw s();X.channelCountMode=e,P.channelCountMode=e},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(e){X.channelInterpretation=e,P.channelInterpretation=e},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(e){P.coneInnerAngle=e},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(e){P.coneOuterAngle=e},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw o();P.coneOuterGain=e},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(e){P.distanceModel=e},get inputs(){return[X]},get maxDistance(){return P.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;P.maxDistance=e},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return Y.gain},get orientationY(){return Z.gain},get orientationZ(){return G.gain},get panningModel(){return P.panningModel},set panningModel(e){P.panningModel=e},get positionX(){return j.gain},get positionY(){return N.gain},get positionZ(){return V.gain},get refDistance(){return P.refDistance},set refDistance(e){if(e<0)throw new RangeError;P.refDistance=e},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;P.rolloffFactor=e},addEventListener:(...e)=>X.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>X.dispatchEvent(e[0]),removeEventListener:(...e)=>X.removeEventListener(e[0],e[1],e[2])};p!==z.coneInnerAngle&&(z.coneInnerAngle=p),f!==z.coneOuterAngle&&(z.coneOuterAngle=f),h!==z.coneOuterGain&&(z.coneOuterGain=h),O!==z.distanceModel&&(z.distanceModel=O),v!==z.maxDistance&&(z.maxDistance=v),M!==z.orientationX.value&&(z.orientationX.value=M),m!==z.orientationY.value&&(z.orientationY.value=m),A!==z.orientationZ.value&&(z.orientationZ.value=A),I!==z.panningModel&&(z.panningModel=I),x!==z.positionX.value&&(z.positionX.value=x),C!==z.positionY.value&&(z.positionY.value=C),D!==z.positionZ.value&&(z.positionZ.value=D),w!==z.refDistance&&(z.refDistance=w),F!==z.rolloffFactor&&(z.rolloffFactor=F),1===R[0]&&0===R[1]&&0===R[2]||P.setOrientation(...R),0===q[0]&&0===q[1]&&0===q[2]||P.setPosition(...q);return d((0,n.interceptConnections)(z,P),()=>{X.connect(P),t(X,k,0,0),k.connect(Y).connect(E,0,0),k.connect(Z).connect(E,0,1),k.connect(G).connect(E,0,2),k.connect(j).connect(E,0,3),k.connect(N).connect(E,0,4),k.connect(V).connect(E,0,5),E.connect(L).connect(g.destination)},()=>{X.disconnect(P),u(X,k,0,0),k.disconnect(Y),Y.disconnect(E),k.disconnect(Z),Z.disconnect(E),k.disconnect(G),G.disconnect(E),k.disconnect(j),j.disconnect(E),k.disconnect(N),N.disconnect(E),k.disconnect(V),V.disconnect(E),E.disconnect(L),L.disconnect(g.destination)})};exports.createNativePannerNodeFakerFactory=t;
},{"../helpers/assign-native-audio-node-options":"xpAH","../helpers/intercept-connections":"GMTf"}],"gkaT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePeriodicWaveFactory=void 0;const e=e=>(r,{disableNormalization:a,imag:t,real:o})=>{const i=t instanceof Float32Array?t:new Float32Array(t),c=o instanceof Float32Array?o:new Float32Array(o),n=r.createPeriodicWave(c,i,{disableNormalization:a});if(Array.from(t).length<2)throw e();return n};exports.createNativePeriodicWaveFactory=e;
},{}],"JMFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeScriptProcessorNode=void 0;const e=(e,r,t,o)=>e.createScriptProcessor(r,t,o);exports.createNativeScriptProcessorNode=e;
},{}],"kCzr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeStereoPannerNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-options");const t=(t,r)=>(a,n)=>{const i=n.channelCountMode;if("clamped-max"===i)throw r();if(void 0===a.createStereoPanner)return t(a,n);const s=a.createStereoPanner();return(0,o.assignNativeAudioNodeOptions)(s,n),(0,e.assignNativeAudioNodeAudioParamValue)(s,n,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:e=>{if(e!==i)throw r()}}),s};exports.createNativeStereoPannerNodeFactory=t;
},{"../helpers/assign-native-audio-node-audio-param-value":"q1oh","../helpers/assign-native-audio-node-options":"xpAH"}],"jN7T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeStereoPannerNodeFakerFactory=void 0;var n=require("../helpers/intercept-connections");const e=(e,t,c,o,i,r)=>{const a=new Float32Array([1,1]),s=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d={...u,oversample:"none"},p=(n,e,r,p,l)=>{if(1===e)return((n,e,t,i)=>{const r=new Float32Array(16385),p=new Float32Array(16385);for(let c=0;c<16385;c+=1){const n=c/16384*s;r[c]=Math.cos(n),p[c]=Math.sin(n)}const l=c(n,{...u,gain:0}),h=o(n,{...d,curve:r}),v=o(n,{...d,curve:a}),g=c(n,{...u,gain:0}),C=o(n,{...d,curve:p});return{connectGraph(){e.connect(l),e.connect(void 0===v.inputs?v:v.inputs[0]),e.connect(g),v.connect(t),t.connect(void 0===h.inputs?h:h.inputs[0]),t.connect(void 0===C.inputs?C:C.inputs[0]),h.connect(l.gain),C.connect(g.gain),l.connect(i,0,0),g.connect(i,0,1)},disconnectGraph(){e.disconnect(l),e.disconnect(void 0===v.inputs?v:v.inputs[0]),e.disconnect(g),v.disconnect(t),t.disconnect(void 0===h.inputs?h:h.inputs[0]),t.disconnect(void 0===C.inputs?C:C.inputs[0]),h.disconnect(l.gain),C.disconnect(g.gain),l.disconnect(i,0,0),g.disconnect(i,0,1)}}})(n,r,p,l);if(2===e)return((n,e,i,r)=>{const p=new Float32Array(16385),l=new Float32Array(16385),h=new Float32Array(16385),v=new Float32Array(16385),g=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>g){const n=(t-g)/(16384-g)*s;p[t]=Math.cos(n),l[t]=Math.sin(n),h[t]=0,v[t]=1}else{const n=t/(16384-g)*s;p[t]=1,l[t]=0,h[t]=Math.cos(n),v[t]=Math.sin(n)}const C=t(n,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),f=c(n,{...u,gain:0}),M=o(n,{...d,curve:p}),m=c(n,{...u,gain:0}),y=o(n,{...d,curve:l}),O=o(n,{...d,curve:a}),x=c(n,{...u,gain:0}),b=o(n,{...d,curve:h}),F=c(n,{...u,gain:0}),I=o(n,{...d,curve:v});return{connectGraph(){e.connect(C),e.connect(void 0===O.inputs?O:O.inputs[0]),C.connect(f,0),C.connect(m,0),C.connect(x,1),C.connect(F,1),O.connect(i),i.connect(void 0===M.inputs?M:M.inputs[0]),i.connect(void 0===y.inputs?y:y.inputs[0]),i.connect(void 0===b.inputs?b:b.inputs[0]),i.connect(void 0===I.inputs?I:I.inputs[0]),M.connect(f.gain),y.connect(m.gain),b.connect(x.gain),I.connect(F.gain),f.connect(r,0,0),x.connect(r,0,0),m.connect(r,0,1),F.connect(r,0,1)},disconnectGraph(){e.disconnect(C),e.disconnect(void 0===O.inputs?O:O.inputs[0]),C.disconnect(f,0),C.disconnect(m,0),C.disconnect(x,1),C.disconnect(F,1),O.disconnect(i),i.disconnect(void 0===M.inputs?M:M.inputs[0]),i.disconnect(void 0===y.inputs?y:y.inputs[0]),i.disconnect(void 0===b.inputs?b:b.inputs[0]),i.disconnect(void 0===I.inputs?I:I.inputs[0]),M.disconnect(f.gain),y.disconnect(m.gain),b.disconnect(x.gain),I.disconnect(F.gain),f.disconnect(r,0,0),x.disconnect(r,0,0),m.disconnect(r,0,1),F.disconnect(r,0,1)}}})(n,r,p,l);throw i()};return(t,{channelCount:o,channelCountMode:a,pan:s,...u})=>{if("max"===a)throw i();const d=e(t,{...u,channelCount:1,channelCountMode:a,numberOfInputs:2}),l=c(t,{...u,channelCount:o,channelCountMode:a,gain:1}),h=c(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:v,disconnectGraph:g}=p(t,o,l,h,d);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(n){l.channelCount!==n&&(f&&g(),({connectGraph:v,disconnectGraph:g}=p(t,n,l,h,d)),f&&v()),l.channelCount=n},get channelCountMode(){return l.channelCountMode},set channelCountMode(n){if("clamped-max"===n||"max"===n)throw i();l.channelCountMode=n},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(n){l.channelInterpretation=n},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener:(...n)=>l.addEventListener(n[0],n[1],n[2]),dispatchEvent:(...n)=>l.dispatchEvent(n[0]),removeEventListener:(...n)=>l.removeEventListener(n[0],n[1],n[2])};let f=!1;return r((0,n.interceptConnections)(C,d),()=>{v(),f=!0},()=>{g(),f=!1})}};exports.createNativeStereoPannerNodeFakerFactory=e;
},{"../helpers/intercept-connections":"GMTf"}],"e4Ej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeWaveShaperNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),a=require("../helpers/assign-native-audio-node-options");const t=(t,o,r,n,i,l,u)=>(s,v)=>{const c=s.createWaveShaper();if(null!==l&&"webkitAudioContext"===l.name&&void 0===s.createGain().gain.automationRate)return r(s,v);(0,a.assignNativeAudioNodeOptions)(c,v);const d=null===v.curve||v.curve instanceof Float32Array?v.curve:new Float32Array(v.curve);if(null!==d&&d.length<2)throw o();(0,e.assignNativeAudioNodeOption)(c,{curve:d},"curve"),(0,e.assignNativeAudioNodeOption)(c,v,"oversample");let p=null,N=!1;u(c,"curve",e=>()=>e.call(c),e=>a=>(e.call(c,a),N&&(n(a)&&null===p?p=t(s,c):n(a)||null===p||(p(),p=null)),a));return i(c,()=>{N=!0,n(c.curve)&&(p=t(s,c))},()=>{N=!1,null!==p&&(p(),p=null)})};exports.createNativeWaveShaperNodeFactory=t;
},{"../helpers/assign-native-audio-node-option":"yV9N","../helpers/assign-native-audio-node-options":"xpAH"}],"Aomt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeWaveShaperNodeFakerFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),n=require("../helpers/intercept-connections");const t=(t,r,o,a,c)=>(l,{curve:u,oversample:s,...i})=>{const h=l.createWaveShaper(),p=l.createWaveShaper();(0,e.assignNativeAudioNodeOptions)(h,i),(0,e.assignNativeAudioNodeOptions)(p,i);const v=o(l,{...i,gain:1}),d=o(l,{...i,gain:-1}),g=o(l,{...i,gain:1}),C=o(l,{...i,gain:-1});let m=null,M=!1,f=null;const I={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){v.channelCount=e,d.channelCount=e,h.channelCount=e,g.channelCount=e,p.channelCount=e,C.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){v.channelCountMode=e,d.channelCountMode=e,h.channelCountMode=e,g.channelCountMode=e,p.channelCountMode=e,C.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){v.channelInterpretation=e,d.channelInterpretation=e,h.channelInterpretation=e,g.channelInterpretation=e,p.channelInterpretation=e,C.channelInterpretation=e},get context(){return h.context},get curve(){return f},set curve(e){if(null!==e&&e.length<2)throw r();if(null===e)h.curve=e,p.curve=e;else{const n=e.length,t=new Float32Array(n+2-n%2),r=new Float32Array(n+2-n%2);t[0]=e[0],r[0]=-e[n-1];const o=Math.ceil((n+1)/2),a=(n+1)/2-1;for(let c=1;c<o;c+=1){const l=c/o*a,u=Math.floor(l),s=Math.ceil(l);t[c]=u===s?e[u]:(1-(l-u))*e[u]+(1-(s-l))*e[s],r[c]=u===s?-e[n-1-u]:-(1-(l-u))*e[n-1-u]-(1-(s-l))*e[n-1-s]}t[o]=n%2==1?e[o-1]:(e[o-2]+e[o-1])/2,h.curve=t,p.curve=r}f=e,M&&(a(f)&&null===m?m=t(l,v):null!==m&&(m(),m=null))},get inputs(){return[v]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(e){h.oversample=e,p.oversample=e},addEventListener:(...e)=>v.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>v.dispatchEvent(e[0]),removeEventListener:(...e)=>v.removeEventListener(e[0],e[1],e[2])};null!==u&&(I.curve=u instanceof Float32Array?u:new Float32Array(u)),s!==I.oversample&&(I.oversample=s);return c((0,n.interceptConnections)(I,g),()=>{v.connect(h).connect(g),v.connect(d).connect(p).connect(C).connect(g),M=!0,a(f)&&(m=t(l,v))},()=>{v.disconnect(h),h.disconnect(g),v.disconnect(d),d.disconnect(p),p.disconnect(C),C.disconnect(g),M=!1,null!==m&&(m(),m=null)})};exports.createNativeWaveShaperNodeFakerFactory=t;
},{"../helpers/assign-native-audio-node-options":"xpAH","../helpers/intercept-connections":"GMTf"}],"vcYJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNotSupportedError=void 0;const e=()=>new DOMException("","NotSupportedError");exports.createNotSupportedError=e;
},{}],"yvfX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOfflineAudioContextConstructor=void 0;var t=require("../helpers/deactivate-audio-graph"),e=require("../helpers/test-promise-support");const i={numberOfChannels:1},n=(n,s,r,o,a)=>(class extends n{constructor(t,n,r){let a;if("number"==typeof t&&void 0!==n&&void 0!==r)a={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");a=t}const{length:h,numberOfChannels:l,sampleRate:u}={...i,...a},d=o(l,h,u);s(e.testPromiseSupport,()=>(0,e.testPromiseSupport)(d))||d.addEventListener("statechange",(()=>{let t=0;const e=i=>{"running"===this._state&&(t>0?(d.removeEventListener("statechange",e),i.stopImmediatePropagation(),this._waitForThePromiseToSettle(i)):t+=1)};return e})()),super(d,l),this._length=h,this._nativeOfflineAudioContext=d,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(r()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,(0,t.deactivateAudioGraph)(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}});exports.createOfflineAudioContextConstructor=n;
},{"../helpers/deactivate-audio-graph":"K0bU","../helpers/test-promise-support":"lX9q"}],"fISz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOscillatorNodeConstructor=void 0;var e=require("../helpers/is-active-audio-node"),t=require("../helpers/set-internal-state-to-active"),o=require("../helpers/set-internal-state-to-passive");const i={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},s=(s,r,n,l,d,a,c)=>(class extends s{constructor(e,t){const o=d(e),s={...i,...t},c=n(o,s),h=a(o),u=h?l():null,v=e.sampleRate/2;super(e,!1,c,u),this._detune=r(this,h,c.detune,153600,-153600),this._frequency=r(this,h,c.frequency,v,-v),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=u,null!==this._oscillatorNodeRenderer&&void 0!==s.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=s.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?c(this,e):null;this._nativeOscillatorNode.onended=t;const o=this._nativeOscillatorNode.onended;this._onended=null!==o&&o===t?e:o}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(i=0){if(this._nativeOscillatorNode.start(i),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=i),"closed"!==this.context.state){(0,t.setInternalStateToActive)(this);const i=()=>{this._nativeOscillatorNode.removeEventListener("ended",i),(0,e.isActiveAudioNode)(this)&&(0,o.setInternalStateToPassive)(this)};this._nativeOscillatorNode.addEventListener("ended",i)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}});exports.createOscillatorNodeConstructor=s;
},{"../helpers/is-active-audio-node":"Zs9Z","../helpers/set-internal-state-to-active":"fI6l","../helpers/set-internal-state-to-passive":"MCKE"}],"k1sc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOscillatorNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,r,o,a)=>()=>{const u=new WeakMap;let l=null,c=null,s=null;return{set periodicWave(e){l=e},set start(e){c=e},set stop(e){s=e},render(i,d,p){const y=u.get(d);return void 0!==y?Promise.resolve(y):(async(i,d,p)=>{let y=r(i);const v=(0,e.isOwnedByContext)(y,d);if(!v){const e={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:null===l?void 0:l,type:y.type};y=n(d,e),null!==c&&y.start(c),null!==s&&y.stop(s)}return u.set(d,y),v?(await t(d,i.detune,y.detune,p),await t(d,i.frequency,y.frequency,p)):(await o(d,i.detune,y.detune,p),await o(d,i.frequency,y.frequency,p)),await a(i,d,y,p),y})(i,d,p)}}};exports.createOscillatorNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"c92a"}],"k2Yr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPannerNodeConstructor=void 0;var e=require("../constants");const n={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},t=(t,i,o,r,a,s,_)=>(class extends t{constructor(t,c){const O=a(t),d={...n,...c},l=o(O,d),h=s(O);super(t,!1,l,h?r():null),this._nativePannerNode=l,this._orientationX=i(this,h,l.orientationX,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=i(this,h,l.orientationY,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=i(this,h,l.orientationZ,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=i(this,h,l.positionX,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=i(this,h,l.positionY,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=i(this,h,l.positionZ,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),_(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}});exports.createPannerNodeConstructor=t;
},{"../constants":"nOFp"}],"N90f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPannerNodeRendererFactory=void 0;var n=require("../guards/native-audio-node-faker"),t=require("../helpers/is-owned-by-context");const o=(o,e,i,a,r,s,c,l,p,u)=>()=>{const d=new WeakMap;let f=null;return{render(w,h,g){const X=d.get(h);return void 0!==X?Promise.resolve(X):(async(w,h,g)=>{let X=null,Y=s(w);const Z={channelCount:Y.channelCount,channelCountMode:Y.channelCountMode,channelInterpretation:Y.channelInterpretation},v={...Z,coneInnerAngle:Y.coneInnerAngle,coneOuterAngle:Y.coneOuterAngle,coneOuterGain:Y.coneOuterGain,distanceModel:Y.distanceModel,maxDistance:Y.maxDistance,panningModel:Y.panningModel,refDistance:Y.refDistance,rolloffFactor:Y.rolloffFactor},m=(0,t.isOwnedByContext)(Y,h);if("bufferSize"in Y)X=a(h,{...Z,gain:1});else if(!m){const n={...v,orientationX:Y.orientationX.value,orientationY:Y.orientationY.value,orientationZ:Y.orientationZ.value,positionX:Y.positionX.value,positionY:Y.positionY.value,positionZ:Y.positionZ.value};Y=r(h,n)}if(d.set(h,null===X?Y:X),null!==X){if(null===f){if(null===c)throw new Error("Missing the native OfflineAudioContext constructor.");const n=new c(6,w.context.length,h.sampleRate),t=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});t.connect(n.destination),f=(async()=>{const o=await Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(async(t,o)=>{const e=i(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===o?1:0});return await l(n,t,e.offset,g),e}));for(let n=0;n<6;n+=1)o[n].connect(t,0,n),o[n].start(0);return u(n)})()}const n=await f,t=a(h,{...Z,gain:1});await p(w,h,t,g);const o=[];for(let e=0;e<n.numberOfChannels;e+=1)o.push(n.getChannelData(e));let s=[o[0][0],o[1][0],o[2][0]],d=[o[3][0],o[4][0],o[5][0]],Y=a(h,{...Z,gain:1}),m=r(h,{...v,orientationX:s[0],orientationY:s[1],orientationZ:s[2],positionX:d[0],positionY:d[1],positionZ:d[2]});t.connect(Y).connect(m.inputs[0]),m.connect(X);for(let e=128;e<n.length;e+=128){const n=[o[0][e],o[1][e],o[2][e]],i=[o[3][e],o[4][e],o[5][e]];if(n.some((n,t)=>n!==s[t])||i.some((n,t)=>n!==d[t])){s=n,d=i;const o=e/h.sampleRate;Y.gain.setValueAtTime(0,o),Y=a(h,{...Z,gain:0}),m=r(h,{...v,orientationX:s[0],orientationY:s[1],orientationZ:s[2],positionX:d[0],positionY:d[1],positionZ:d[2]}),Y.gain.setValueAtTime(1,o),t.connect(Y).connect(m.inputs[0]),m.connect(X)}}return X}return m?(await o(h,w.orientationX,Y.orientationX,g),await o(h,w.orientationY,Y.orientationY,g),await o(h,w.orientationZ,Y.orientationZ,g),await o(h,w.positionX,Y.positionX,g),await o(h,w.positionY,Y.positionY,g),await o(h,w.positionZ,Y.positionZ,g)):(await l(h,w.orientationX,Y.orientationX,g),await l(h,w.orientationY,Y.orientationY,g),await l(h,w.orientationZ,Y.orientationZ,g),await l(h,w.positionX,Y.positionX,g),await l(h,w.positionY,Y.positionY,g),await l(h,w.positionZ,Y.positionZ,g)),(0,n.isNativeAudioNodeFaker)(Y)?await p(w,h,Y.inputs[0],g):await p(w,h,Y,g),Y})(w,h,g)}}};exports.createPannerNodeRendererFactory=o;
},{"../guards/native-audio-node-faker":"WEGB","../helpers/is-owned-by-context":"c92a"}],"mYbX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPeriodicWaveConstructor=void 0;const t={disableNormalization:!1},e=(e,o,r,s)=>(class c{constructor(c,a){const n=o(c),i=s({...t,...a}),u=e(n,i);return r.add(u),u}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===c.prototype||r.has(t)}});exports.createPeriodicWaveConstructor=e;
},{}],"nS2H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderAutomation=void 0;const e=(e,t)=>(r,o,n,s)=>{return e(o).replay(n),t(o,r,n,s)};exports.createRenderAutomation=e;
},{}],"Sovb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderInputsOfAudioNode=void 0;const e=(e,t,n)=>async(o,r,s,a)=>{const c=e(o),d=[...a,o];await Promise.all(c.activeInputs.map((e,a)=>Array.from(e).filter(([e])=>!d.includes(e)).map(async([e,c])=>{const i=t(e),u=await i.render(e,r,d),p=o.context.destination;n(e)||o===p&&n(o)||u.connect(s,c,a)})).reduce((e,t)=>[...e,...t],[]))};exports.createRenderInputsOfAudioNode=e;
},{}],"pqs8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderInputsOfAudioParam=void 0;const e=(e,t,r)=>async(a,s,n,o)=>{const c=t(a);await Promise.all(Array.from(c.activeInputs).map(async([t,a])=>{const c=e(t),i=await c.render(t,s,o);r(t)||i.connect(n,a)}))};exports.createRenderInputsOfAudioParam=e;
},{}],"c6rh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderNativeOfflineAudioContext=void 0;var e=require("../helpers/test-promise-support");const t=(t,n,o,r)=>i=>t(e.testPromiseSupport,()=>(0,e.testPromiseSupport)(i))?Promise.resolve(t(r,r)).then(e=>{if(!e){const e=o(i,512,0,1);i.oncomplete=(()=>{e.onaudioprocess=null,e.disconnect()}),e.onaudioprocess=(()=>i.currentTime),e.connect(i.destination)}return i.startRendering()}):new Promise(e=>{const t=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=(n=>{t.disconnect(),e(n.renderedBuffer)}),t.connect(i.destination),i.startRendering()});exports.createRenderNativeOfflineAudioContext=t;
},{"../helpers/test-promise-support":"lX9q"}],"QbQs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetActiveAudioWorkletNodeInputs=void 0;const e=e=>(t,o)=>{e.set(t,o)};exports.createSetActiveAudioWorkletNodeInputs=e;
},{}],"ENoU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetAudioNodeTailTime=void 0;const e=e=>(t,o)=>e.set(t,o);exports.createSetAudioNodeTailTime=e;
},{}],"vg4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStartRendering=void 0;var e=require("../helpers/wrap-audio-buffer-get-channel-data-method");const r=(r,t,n,a,o,d,i,p)=>{const s=[];return(u,c)=>n(u).render(u,c,s).then(()=>Promise.all(Array.from(a(c)).map(e=>n(e).render(e,c,s)))).then(()=>o(c)).then(n=>("function"!=typeof n.copyFromChannel?(i(n),(0,e.wrapAudioBufferGetChannelDataMethod)(n)):t(d,()=>d(n))||p(n),r.add(n),n))};exports.createStartRendering=r;
},{"../helpers/wrap-audio-buffer-get-channel-data-method":"twCl"}],"WDeR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStereoPannerNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},t=(t,n,r,o,s,a)=>(class extends t{constructor(t,c){const p=s(t),u={...e,...c},i=r(p,u),l=a(p);super(t,!1,i,l?o():null),this._pan=n(this,l,i.pan)}get pan(){return this._pan}});exports.createStereoPannerNodeConstructor=t;
},{}],"LUFU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStereoPannerNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),n=require("../helpers/is-owned-by-context");const t=(t,r,a,o,i)=>()=>{const s=new WeakMap;return{render(c,d,u){const p=s.get(d);return void 0!==p?Promise.resolve(p):(async(c,d,u)=>{let p=a(c);const l=(0,n.isOwnedByContext)(p,d);if(!l){const e={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=r(d,e)}return s.set(d,p),l?await t(d,c.pan,p.pan,u):await o(d,c.pan,p.pan,u),(0,e.isNativeAudioNodeFaker)(p)?await i(c,d,p.inputs[0],u):await i(c,d,p,u),p})(c,d,u)}}};exports.createStereoPannerNodeRendererFactory=t;
},{"../guards/native-audio-node-faker":"WEGB","../helpers/is-owned-by-context":"c92a"}],"aYvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferConstructorSupport=void 0;const e=e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0};exports.createTestAudioBufferConstructorSupport=e;
},{}],"ppWx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferCopyChannelMethodsSubarraySupport=void 0;const e=e=>()=>{if(null===e)return!1;const r=new e(1,1,44100).createBuffer(1,1,44100);if(void 0===r.copyToChannel)return!0;const t=new Float32Array(2);try{r.copyFromChannel(t,0,0)}catch{return!1}return!0};exports.createTestAudioBufferCopyChannelMethodsSubarraySupport=e;
},{}],"FkYz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextCloseMethodSupport=void 0;const e=e=>()=>{if(null===e)return!1;if(void 0!==e.prototype&&void 0!==e.prototype.close)return!0;const t=new e,o=void 0!==t.close;try{t.close()}catch{}return o};exports.createTestAudioContextCloseMethodSupport=e;
},{}],"AVi2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=void 0;const e=e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);return new Promise(e=>{let o=!0;const r=r=>{o&&(o=!1,t.startRendering(),e(r instanceof TypeError))};let d;try{d=t.decodeAudioData(null,()=>{},r)}catch(n){r(n)}void 0!==d&&d.catch(r)})};exports.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=e;
},{}],"LwtG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextOptionsSupport=void 0;const t=t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0};exports.createTestAudioContextOptionsSupport=t;
},{}],"qYT0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioNodeConnectMethodSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createGain(),o=t.connect(t)===t;return t.disconnect(t),o};exports.createTestAudioNodeConnectMethodSupport=e;
},{}],"AIIB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioWorkletProcessorNoOutputsSupport=void 0;const e=(e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const s=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new MessageChannel,r=new t(1,128,44100),a=URL.createObjectURL(s);let p=!1;try{await r.audioWorklet.addModule(a);const t=new e(r,"a",{numberOfOutputs:0}),s=r.createOscillator();await new Promise(e=>{t.port.onmessage=(()=>e()),t.port.postMessage(o.port2,[o.port2])}),t.port.onmessage=(()=>p=!0),s.connect(t),s.start(0),await r.startRendering(),p=await new Promise(e=>{o.port1.onmessage=(({data:t})=>e(1===t)),o.port1.postMessage(0)})}catch{}finally{o.port1.close(),URL.revokeObjectURL(a)}return p};exports.createTestAudioWorkletProcessorNoOutputsSupport=e;
},{}],"ek51":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioWorkletProcessorPostMessageSupport=void 0;const e=(e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),o=URL.createObjectURL(r);let a=!1,c=!1;try{await s.audioWorklet.addModule(o);const t=new e(s,"a",{numberOfOutputs:0}),r=s.createOscillator();t.port.onmessage=(()=>a=!0),t.onprocessorerror=(()=>c=!0),r.connect(t),r.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return a&&!c};exports.createTestAudioWorkletProcessorPostMessageSupport=e;
},{}],"XVPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestChannelMergerNodeChannelCountSupport=void 0;const e=e=>()=>{if(null===e)return!1;const n=new e(1,1,44100).createChannelMerger();if("max"===n.channelCountMode)return!0;try{n.channelCount=2}catch{return!0}return!1};exports.createTestChannelMergerNodeChannelCountSupport=e;
},{}],"iJAC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestConstantSourceNodeAccurateSchedulingSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e(1,1,44100);return void 0===t.createConstantSource||t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY};exports.createTestConstantSourceNodeAccurateSchedulingSupport=e;
},{}],"jGkr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestConvolverNodeBufferReassignabilitySupport=void 0;const e=e=>()=>{if(null===e)return!1;const r=new e(1,1,44100),t=r.createConvolver();t.buffer=r.createBuffer(1,1,r.sampleRate);try{t.buffer=r.createBuffer(1,1,r.sampleRate)}catch{return!1}return!0};exports.createTestConvolverNodeBufferReassignabilitySupport=e;
},{}],"jcFE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestConvolverNodeChannelCountSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createConvolver();try{t.channelCount=1}catch{return!1}return!0};exports.createTestConvolverNodeChannelCountSupport=e;
},{}],"pXM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestIsSecureContextSupport=void 0;const e=e=>()=>null!==e&&e.hasOwnProperty("isSecureContext");exports.createTestIsSecureContextSupport=e;
},{}],"Ux6y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e;try{return t.createMediaStreamSource(new MediaStream),!1}catch(r){return!0}finally{t.close()}};exports.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=e;
},{}],"gRWU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestOfflineAudioContextCurrentTimeSupport=void 0;const e=(e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=(()=>{r.disconnect(),e(0!==n.currentTime)}),n.startRendering()})};exports.createTestOfflineAudioContextCurrentTimeSupport=e;
},{}],"gjIR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestStereoPannerNodeDefaultValueSupport=void 0;const e=e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);if(void 0===t.createStereoPanner)return Promise.resolve(!0);if(void 0===t.createConstantSource)return Promise.resolve(!0);const r=t.createConstantSource(),n=t.createStereoPanner();return r.channelCount=1,r.offset.value=1,n.channelCount=1,r.start(),r.connect(n).connect(t.destination),t.startRendering().then(e=>1!==e.getChannelData(0)[0])};exports.createTestStereoPannerNodeDefaultValueSupport=e;
},{}],"KJPZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnknownError=void 0;const e=()=>new DOMException("","UnknownError");exports.createUnknownError=e;
},{}],"OHG9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWaveShaperNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},t=(t,r,s,a,i,o,n)=>(class extends t{constructor(t,r){const v=i(t),l={...e,...r},u=s(v,l);super(t,!0,u,o(v)?a():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,n(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw r();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}});exports.createWaveShaperNodeConstructor=t;
},{}],"hMn1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWaveShaperNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),r=require("../helpers/is-owned-by-context");const n=(n,t,o)=>()=>{const a=new WeakMap;return{render(s,c,i){const d=a.get(c);return void 0!==d?Promise.resolve(d):(async(s,c,i)=>{let d=t(s);if(!(0,r.isOwnedByContext)(d,c)){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=n(c,e)}return a.set(c,d),(0,e.isNativeAudioNodeFaker)(d)?await o(s,c,d.inputs[0],i):await o(s,c,d,i),d})(s,c,i)}}};exports.createWaveShaperNodeRendererFactory=n;
},{"../guards/native-audio-node-faker":"WEGB","../helpers/is-owned-by-context":"c92a"}],"DTvh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWindow=void 0;const e=()=>"undefined"==typeof window?null:window;exports.createWindow=e;
},{}],"lMhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferCopyChannelMethods=void 0;const e=(e,n)=>t=>{t.copyFromChannel=((o,r,a=0)=>{const h=e(a),l=e(r);if(l>=t.numberOfChannels)throw n();const s=t.length,c=t.getChannelData(l),f=o.length;for(let e=h<0?-h:0;e+h<s&&e<f;e+=1)o[e]=c[e+h]}),t.copyToChannel=((o,r,a=0)=>{const h=e(a),l=e(r);if(l>=t.numberOfChannels)throw n();const s=t.length,c=t.getChannelData(l),f=o.length;for(let e=h<0?-h:0;e+h<s&&e<f;e+=1)c[e+h]=o[e]})};exports.createWrapAudioBufferCopyChannelMethods=e;
},{}],"TdHf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferCopyChannelMethodsOutOfBounds=void 0;const e=e=>o=>{o.copyFromChannel=(n=>(t,r,l=0)=>{const a=e(l),c=e(r);if(a<o.length)return n.call(o,t,c,a)})(o.copyFromChannel),o.copyToChannel=(n=>(t,r,l=0)=>{const a=e(l),c=e(r);if(a<o.length)return n.call(o,t,c,a)})(o.copyToChannel)};exports.createWrapAudioBufferCopyChannelMethodsOutOfBounds=e;
},{}],"oOk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=void 0;const e=e=>(r,u)=>{const f=u.createBuffer(1,1,44100);null===r.buffer&&(r.buffer=f),e(r,"buffer",e=>()=>{const u=e.call(r);return u===f?null:u},e=>u=>e.call(r,null===u?f:u))};exports.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=e;
},{}],"gHdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapChannelMergerNode=void 0;const e=(e,t)=>(n,o)=>{o.channelCount=1,o.channelCountMode="explicit",Object.defineProperty(o,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=n.createBufferSource();t(o,()=>{const e=o.numberOfInputs;for(let t=0;t<e;t+=1)r.connect(o,0,t)},()=>r.disconnect(o))};exports.createWrapChannelMergerNode=e;
},{}],"bYIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFirstSample=void 0;const e=(e,t,o)=>void 0===e.copyFromChannel?e.getChannelData(o)[0]:(e.copyFromChannel(t,o),t[0]);exports.getFirstSample=e;
},{}],"ZJIL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDCCurve=void 0;const e=e=>{if(null===e)return!1;const r=e.length;return r%2!=0?0!==e[Math.floor(r/2)]:e[r/2-1]+e[r/2]!==0};exports.isDCCurve=e;
},{}],"DS9z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.overwriteAccessors=void 0;const e=(e,t,r,o)=>{let s=e;for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:c,set:p}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:r(c),set:o(p)})};exports.overwriteAccessors=e;
},{}],"S2q7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeAudioWorkletNodeOptions=void 0;const t=t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)});exports.sanitizeAudioWorkletNodeOptions=t;
},{}],"gezG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeChannelSplitterOptions=void 0;const e=e=>({...e,channelCount:e.numberOfOutputs});exports.sanitizeChannelSplitterOptions=e;
},{}],"wI3L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizePeriodicWaveOptions=void 0;const e=e=>{const{imag:i,real:r}=e;return void 0===i?void 0===r?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(r,()=>0),real:r}:void 0===r?{...e,imag:i,real:Array.from(i,()=>0)}:{...e,imag:i,real:r}};exports.sanitizePeriodicWaveOptions=e;
},{}],"ap4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setValueAtTimeUntilPossible=void 0;const e=(t,s,i)=>{try{t.setValueAtTime(s,i)}catch(o){if(9!==o.code)throw o;e(t,s,i+1e-7)}};exports.setValueAtTimeUntilPossible=e;
},{}],"GVYI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=void 0;const t=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};exports.testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=t;
},{}],"HeHB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioBufferSourceNodeStartMethodOffsetClampingSupport=void 0;const e=e=>{const t=e.createBufferSource(),r=e.createBuffer(1,1,44100);t.buffer=r;try{t.start(0,1)}catch{return!1}return!0};exports.testAudioBufferSourceNodeStartMethodOffsetClampingSupport=e;
},{}],"hrve":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=void 0;const e=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0};exports.testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=e;
},{}],"pkcv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=void 0;const e=e=>{const t=e.createOscillator();try{t.start(-1)}catch(r){return r instanceof RangeError}return!1};exports.testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=e;
},{}],"LmRf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=void 0;const e=e=>{const t=e.createBuffer(1,1,44100),o=e.createBufferSource();o.buffer=t,o.start(),o.stop();try{return o.stop(),!0}catch{return!1}};exports.testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=e;
},{}],"h5NG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=void 0;const e=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(o){return o instanceof RangeError}return!1};exports.testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=e;
},{}],"sxNL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioWorkletNodeOptionsClonability=void 0;const e=e=>{const{port1:o,port2:t}=new MessageChannel;try{o.postMessage(e)}finally{o.close(),t.close()}};exports.testAudioWorkletNodeOptionsClonability=e;
},{}],"JMhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testDomExceptionConstructorSupport=void 0;const t=()=>{try{new DOMException}catch{return!1}return!0};exports.testDomExceptionConstructorSupport=t;
},{}],"rXEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testTransferablesSupport=void 0;const e=()=>new Promise(e=>{const s=new ArrayBuffer(0),{port1:t,port2:r}=new MessageChannel;t.onmessage=(({data:s})=>e(null!==s)),r.postMessage(s,[s])});exports.testTransferablesSupport=e;
},{}],"i6zM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferSourceNodeStartMethodOffsetClamping=void 0;const t=t=>{t.start=(e=>(o=0,r=0,a)=>{const u=t.buffer,l=null===u?r:Math.min(u.duration,r);null!==u&&l>u.duration-.5/t.context.sampleRate?e.call(t,o,0,0):e.call(t,o,l,a)})(t.start)};exports.wrapAudioBufferSourceNodeStartMethodOffsetClamping=t;
},{}],"STvl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=void 0;var e=require("./intercept-connections");const t=(t,o)=>{const n=o.createGain();t.connect(n);const c=(e=>()=>{e.call(t,n),t.removeEventListener("ended",c)})(t.disconnect);t.addEventListener("ended",c),(0,e.interceptConnections)(t,n),t.stop=(e=>{let o=!1;return(c=0)=>{if(o)try{e.call(t,c)}catch{n.gain.setValueAtTime(0,c)}else e.call(t,c),o=!0}})(t.stop)};exports.wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=t;
},{"./intercept-connections":"GMTf"}],"VYar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapEventListener=void 0;const e=(e,t)=>r=>{const n={value:e};return Object.defineProperties(r,{currentTarget:n,target:n}),"function"==typeof t?t.call(e,r):t.handleEvent.call(e,r)};exports.wrapEventListener=e;
},{}],"brg8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"hhFo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./analyser-node");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./analyser-options");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./audio-buffer");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./audio-buffer-options");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./audio-buffer-source-node");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./audio-buffer-source-node-renderer");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var i=require("./audio-buffer-source-options");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var s=require("./audio-context");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./audio-context-options");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var a=require("./audio-destination-node");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var f=require("./audio-listener");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var p=require("./audio-node");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var d=require("./audio-node-options");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var l=require("./audio-node-renderer");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var x=require("./audio-param");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});var b=require("./audio-param-descriptor");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var y=require("./audio-param-renderer");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}}))});var _=require("./audio-scheduled-source-node");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}}))});var j=require("./audio-scheduled-source-node-event-map");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===j[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}}))});var O=require("./audio-worklet");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===O[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}}))});var m=require("./audio-worklet-node");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===m[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}}))});var v=require("./audio-worklet-node-event-map");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===v[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}}))});var k=require("./audio-worklet-node-options");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===k[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}}))});var h=require("./audio-worklet-processor");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===h[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}}))});var g=require("./audio-worklet-processor-constructor");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===g[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}}))});var q=require("./automation");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===q[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}}))});var M=require("./base-audio-context");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===M[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}}))});var P=require("./biquad-filter-node");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===P[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}}))});var E=require("./biquad-filter-options");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===E[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}}))});var w=require("./channel-merger-options");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===w[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}}))});var z=require("./channel-splitter-options");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===z[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}}))});var A=require("./common-audio-context");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===A[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}}))});var B=require("./common-offline-audio-context");Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===B[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return B[e]}}))});var C=require("./constant-source-node");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===C[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}}))});var D=require("./constant-source-node-renderer");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===D[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}}))});var F=require("./constant-source-options");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===F[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}}))});var G=require("./convolver-node");Object.keys(G).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===G[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return G[e]}}))});var H=require("./convolver-options");Object.keys(H).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===H[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return H[e]}}))});var I=require("./delay-node");Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===I[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return I[e]}}))});var J=require("./delay-options");Object.keys(J).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===J[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return J[e]}}))});var K=require("./dynamics-compressor-node");Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===K[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return K[e]}}))});var L=require("./dynamics-compressor-options");Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===L[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return L[e]}}))});var N=require("./event-target");Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===N[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return N[e]}}))});var Q=require("./gain-node");Object.keys(Q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Q[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Q[e]}}))});var R=require("./gain-options");Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===R[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return R[e]}}))});var S=require("./iir-filter-node");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===S[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}}))});var T=require("./iir-filter-options");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===T[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return T[e]}}))});var U=require("./media-element-audio-source-node");Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===U[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return U[e]}}))});var V=require("./media-element-audio-source-options");Object.keys(V).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===V[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return V[e]}}))});var W=require("./media-stream-audio-destination-node");Object.keys(W).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===W[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return W[e]}}))});var X=require("./media-stream-audio-source-node");Object.keys(X).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===X[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return X[e]}}))});var Y=require("./media-stream-audio-source-options");Object.keys(Y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Y[e]}}))});var Z=require("./media-stream-track-audio-source-node");Object.keys(Z).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Z[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Z[e]}}))});var $=require("./media-stream-track-audio-source-options");Object.keys($).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $[e]}}))});var ee=require("./minimal-audio-context");Object.keys(ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ee[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ee[e]}}))});var re=require("./minimal-base-audio-context");Object.keys(re).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===re[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return re[e]}}))});var te=require("./minimal-base-audio-context-event-map");Object.keys(te).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===te[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return te[e]}}))});var oe=require("./minimal-offline-audio-context");Object.keys(oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===oe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oe[e]}}))});var ne=require("./native-audio-node-faker");Object.keys(ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ne[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ne[e]}}))});var ue=require("./native-audio-worklet-node-faker");Object.keys(ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ue[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ue[e]}}))});var ie=require("./native-constant-source-node-faker");Object.keys(ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ie[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ie[e]}}))});var se=require("./native-convolver-node-faker");Object.keys(se).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===se[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return se[e]}}))});var ce=require("./native-iir-filter-node-faker");Object.keys(ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ce[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ce[e]}}))});var ae=require("./native-panner-node-faker");Object.keys(ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ae[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ae[e]}}))});var fe=require("./native-stereo-panner-node-faker");Object.keys(fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fe[e]}}))});var pe=require("./native-wave-shaper-node-faker");Object.keys(pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pe[e]}}))});var de=require("./offline-audio-completion-event");Object.keys(de).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===de[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return de[e]}}))});var le=require("./offline-audio-context");Object.keys(le).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===le[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return le[e]}}))});var xe=require("./offline-audio-context-constructor");Object.keys(xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xe[e]}}))});var be=require("./offline-audio-context-options");Object.keys(be).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===be[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return be[e]}}))});var ye=require("./oscillator-node");Object.keys(ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ye[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ye[e]}}))});var _e=require("./oscillator-node-renderer");Object.keys(_e).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_e[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _e[e]}}))});var je=require("./oscillator-options");Object.keys(je).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===je[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return je[e]}}))});var Oe=require("./panner-node");Object.keys(Oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Oe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oe[e]}}))});var me=require("./panner-options");Object.keys(me).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===me[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return me[e]}}))});var ve=require("./periodic-wave");Object.keys(ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ve[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ve[e]}}))});var ke=require("./periodic-wave-constraints");Object.keys(ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ke[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ke[e]}}))});var he=require("./periodic-wave-options");Object.keys(he).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===he[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return he[e]}}))});var ge=require("./read-only-map");Object.keys(ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ge[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ge[e]}}))});var qe=require("./stereo-panner-node");Object.keys(qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qe[e]}}))});var Me=require("./stereo-panner-options");Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Me[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Me[e]}}))});var Pe=require("./wave-shaper-node");Object.keys(Pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pe[e]}}))});var Ee=require("./wave-shaper-options");Object.keys(Ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ee[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ee[e]}}))});var we=require("./worklet-options");Object.keys(we).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===we[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return we[e]}}))});
},{"./analyser-node":"brg8","./analyser-options":"brg8","./audio-buffer":"brg8","./audio-buffer-options":"brg8","./audio-buffer-source-node":"brg8","./audio-buffer-source-node-renderer":"brg8","./audio-buffer-source-options":"brg8","./audio-context":"brg8","./audio-context-options":"brg8","./audio-destination-node":"brg8","./audio-listener":"brg8","./audio-node":"brg8","./audio-node-options":"brg8","./audio-node-renderer":"brg8","./audio-param":"brg8","./audio-param-descriptor":"brg8","./audio-param-renderer":"brg8","./audio-scheduled-source-node":"brg8","./audio-scheduled-source-node-event-map":"brg8","./audio-worklet":"brg8","./audio-worklet-node":"brg8","./audio-worklet-node-event-map":"brg8","./audio-worklet-node-options":"brg8","./audio-worklet-processor":"brg8","./audio-worklet-processor-constructor":"brg8","./automation":"brg8","./base-audio-context":"brg8","./biquad-filter-node":"brg8","./biquad-filter-options":"brg8","./channel-merger-options":"brg8","./channel-splitter-options":"brg8","./common-audio-context":"brg8","./common-offline-audio-context":"brg8","./constant-source-node":"brg8","./constant-source-node-renderer":"brg8","./constant-source-options":"brg8","./convolver-node":"brg8","./convolver-options":"brg8","./delay-node":"brg8","./delay-options":"brg8","./dynamics-compressor-node":"brg8","./dynamics-compressor-options":"brg8","./event-target":"brg8","./gain-node":"brg8","./gain-options":"brg8","./iir-filter-node":"brg8","./iir-filter-options":"brg8","./media-element-audio-source-node":"brg8","./media-element-audio-source-options":"brg8","./media-stream-audio-destination-node":"brg8","./media-stream-audio-source-node":"brg8","./media-stream-audio-source-options":"brg8","./media-stream-track-audio-source-node":"brg8","./media-stream-track-audio-source-options":"brg8","./minimal-audio-context":"brg8","./minimal-base-audio-context":"brg8","./minimal-base-audio-context-event-map":"brg8","./minimal-offline-audio-context":"brg8","./native-audio-node-faker":"brg8","./native-audio-worklet-node-faker":"brg8","./native-constant-source-node-faker":"brg8","./native-convolver-node-faker":"brg8","./native-iir-filter-node-faker":"brg8","./native-panner-node-faker":"brg8","./native-stereo-panner-node-faker":"brg8","./native-wave-shaper-node-faker":"brg8","./offline-audio-completion-event":"brg8","./offline-audio-context":"brg8","./offline-audio-context-constructor":"brg8","./offline-audio-context-options":"brg8","./oscillator-node":"brg8","./oscillator-node-renderer":"brg8","./oscillator-options":"brg8","./panner-node":"brg8","./panner-options":"brg8","./periodic-wave":"brg8","./periodic-wave-constraints":"brg8","./periodic-wave-options":"brg8","./read-only-map":"brg8","./stereo-panner-node":"brg8","./stereo-panner-options":"brg8","./wave-shaper-node":"brg8","./wave-shaper-options":"brg8","./worklet-options":"brg8"}],"mRDb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./abort-error-factory");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./active-audio-worklet-node-inputs-store");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./active-input-connection");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./add-active-input-connection-to-audio-node-factory");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./add-active-input-connection-to-audio-node-function");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./add-audio-node-connections-factory");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var c=require("./add-audio-node-connections-function");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var i=require("./add-audio-param-connections-factory");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var a=require("./add-audio-param-connections-function");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var f=require("./add-audio-worklet-module-factory");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var s=require("./add-audio-worklet-module-function");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var d=require("./add-connection-to-audio-node-factory");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var p=require("./add-connection-to-audio-node-function");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var l=require("./add-passive-input-connection-to-audio-node-factory");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var b=require("./add-passive-input-connection-to-audio-node-function");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var x=require("./add-silent-connection-factory");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});var y=require("./add-silent-connection-function");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}}))});var _=require("./add-unrendered-audio-worklet-node-factory");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}}))});var j=require("./add-unrendered-audio-worklet-node-function");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===j[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}}))});var O=require("./analyser-node-constructor");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===O[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}}))});var v=require("./analyser-node-constructor-factory");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===v[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}}))});var m=require("./analyser-node-renderer-factory");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===m[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}}))});var k=require("./analyser-node-renderer-factory-factory");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===k[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}}))});var g=require("./any-audio-buffer");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===g[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}}))});var h=require("./any-context");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===h[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}}))});var q=require("./audio-buffer-constructor");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===q[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}}))});var M=require("./audio-buffer-constructor-factory");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===M[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}}))});var P=require("./audio-buffer-source-node-constructor");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===P[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}}))});var E=require("./audio-buffer-source-node-constructor-factory");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===E[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}}))});var w=require("./audio-buffer-source-node-renderer");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===w[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}}))});var z=require("./audio-buffer-source-node-renderer-factory");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===z[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}}))});var A=require("./audio-buffer-source-node-renderer-factory-factory");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===A[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}}))});var B=require("./audio-buffer-store");Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===B[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return B[e]}}))});var C=require("./audio-context-constructor");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===C[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}}))});var D=require("./audio-context-constructor-factory");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===D[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}}))});var F=require("./audio-context-latency-category");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===F[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}}))});var G=require("./audio-context-state");Object.keys(G).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===G[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return G[e]}}))});var H=require("./audio-destination-node-constructor");Object.keys(H).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===H[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return H[e]}}))});var I=require("./audio-destination-node-constructor-factory");Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===I[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return I[e]}}))});var J=require("./audio-destination-node-renderer-factory");Object.keys(J).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===J[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return J[e]}}))});var K=require("./audio-listener-factory");Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===K[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return K[e]}}))});var L=require("./audio-listener-factory-factory");Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===L[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return L[e]}}))});var N=require("./audio-node-connections");Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===N[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return N[e]}}))});var Q=require("./audio-node-connections-store");Object.keys(Q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Q[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Q[e]}}))});var R=require("./audio-node-constructor");Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===R[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return R[e]}}))});var S=require("./audio-node-constructor-factory");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===S[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}}))});var T=require("./audio-node-output-connection");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===T[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return T[e]}}))});var U=require("./audio-node-renderer");Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===U[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return U[e]}}))});var V=require("./audio-node-store");Object.keys(V).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===V[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return V[e]}}))});var W=require("./audio-node-tail-time-store");Object.keys(W).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===W[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return W[e]}}))});var X=require("./audio-param-audio-node-store");Object.keys(X).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===X[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return X[e]}}))});var Y=require("./audio-param-connections");Object.keys(Y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Y[e]}}))});var Z=require("./audio-param-connections-store");Object.keys(Z).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Z[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Z[e]}}))});var $=require("./audio-param-factory");Object.keys($).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $[e]}}))});var ee=require("./audio-param-factory-factory");Object.keys(ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ee[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ee[e]}}))});var re=require("./audio-param-map");Object.keys(re).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===re[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return re[e]}}))});var te=require("./audio-param-output-connection");Object.keys(te).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===te[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return te[e]}}))});var oe=require("./audio-param-renderer-factory");Object.keys(oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===oe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oe[e]}}))});var ne=require("./audio-param-store");Object.keys(ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ne[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ne[e]}}))});var ue=require("./audio-worklet-node-constructor");Object.keys(ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ue[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ue[e]}}))});var ce=require("./audio-worklet-node-constructor-factory");Object.keys(ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ce[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ce[e]}}))});var ie=require("./audio-worklet-node-renderer-factory");Object.keys(ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ie[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ie[e]}}))});var ae=require("./audio-worklet-node-renderer-factory-factory");Object.keys(ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ae[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ae[e]}}))});var fe=require("./backup-offline-audio-context-store");Object.keys(fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fe[e]}}))});var se=require("./base-audio-context-constructor");Object.keys(se).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===se[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return se[e]}}))});var de=require("./base-audio-context-constructor-factory");Object.keys(de).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===de[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return de[e]}}))});var pe=require("./biquad-filter-node-constructor");Object.keys(pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pe[e]}}))});var le=require("./biquad-filter-node-constructor-factory");Object.keys(le).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===le[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return le[e]}}))});var be=require("./biquad-filter-node-renderer-factory");Object.keys(be).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===be[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return be[e]}}))});var xe=require("./biquad-filter-node-renderer-factory-factory");Object.keys(xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xe[e]}}))});var ye=require("./biquad-filter-type");Object.keys(ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ye[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ye[e]}}))});var _e=require("./channel-count-mode");Object.keys(_e).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_e[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _e[e]}}))});var je=require("./channel-interpretation");Object.keys(je).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===je[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return je[e]}}))});var Oe=require("./channel-merger-node-constructor");Object.keys(Oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Oe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oe[e]}}))});var ve=require("./channel-merger-node-constructor-factory");Object.keys(ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ve[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ve[e]}}))});var me=require("./channel-merger-node-renderer-factory");Object.keys(me).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===me[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return me[e]}}))});var ke=require("./channel-merger-node-renderer-factory-factory");Object.keys(ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ke[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ke[e]}}))});var ge=require("./channel-splitter-node-constructor");Object.keys(ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ge[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ge[e]}}))});var he=require("./channel-splitter-node-constructor-factory");Object.keys(he).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===he[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return he[e]}}))});var qe=require("./channel-splitter-node-renderer-factory");Object.keys(qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qe[e]}}))});var Me=require("./channel-splitter-node-renderer-factory-factory");Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Me[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Me[e]}}))});var Pe=require("./cache-test-result-factory");Object.keys(Pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pe[e]}}))});var Ee=require("./cache-test-result-function");Object.keys(Ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ee[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ee[e]}}))});var we=require("./connect-audio-param-factory");Object.keys(we).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===we[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return we[e]}}))});var ze=require("./connect-audio-param-function");Object.keys(ze).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ze[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ze[e]}}))});var Ae=require("./connect-multiple-outputs-factory");Object.keys(Ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ae[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ae[e]}}))});var Be=require("./connect-multiple-outputs-function");Object.keys(Be).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Be[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Be[e]}}))});var Ce=require("./connect-native-audio-node-to-native-audio-node-function");Object.keys(Ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ce[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ce[e]}}))});var De=require("./connected-native-audio-buffer-source-node-factory");Object.keys(De).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===De[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return De[e]}}))});var Fe=require("./connected-native-audio-buffer-source-node-factory-factory");Object.keys(Fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Fe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fe[e]}}))});var Ge=require("./constant-source-node-constructor");Object.keys(Ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ge[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ge[e]}}))});var He=require("./constant-source-node-constructor-factory");Object.keys(He).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===He[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return He[e]}}))});var Ie=require("./constant-source-node-renderer");Object.keys(Ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ie[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ie[e]}}))});var Je=require("./constant-source-node-renderer-factory");Object.keys(Je).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Je[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Je[e]}}))});var Ke=require("./constant-source-node-renderer-factory-factory");Object.keys(Ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ke[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ke[e]}}))});var Le=require("./constructor");Object.keys(Le).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Le[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Le[e]}}))});var Ne=require("./context");Object.keys(Ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ne[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ne[e]}}))});var Qe=require("./context-store");Object.keys(Qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qe[e]}}))});var Re=require("./convert-number-to-unsigned-long-factory");Object.keys(Re).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Re[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Re[e]}}))});var Se=require("./convert-number-to-unsigned-long-function");Object.keys(Se).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Se[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Se[e]}}))});var Te=require("./convolver-node-constructor");Object.keys(Te).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Te[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Te[e]}}))});var Ue=require("./convolver-node-constructor-factory");Object.keys(Ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ue[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ue[e]}}))});var Ve=require("./convolver-node-renderer-factory");Object.keys(Ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ve[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ve[e]}}))});var We=require("./convolver-node-renderer-factory-factory");Object.keys(We).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===We[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return We[e]}}))});var Xe=require("./create-native-offline-audio-context-factory");Object.keys(Xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xe[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xe[e]}}))});var Ye=require("./create-native-offline-audio-context-function");Object.keys(Ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ye[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ye[e]}}))});var Ze=require("./cycle-counters");Object.keys(Ze).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ze[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ze[e]}}))});var $e=require("./data-clone-error-factory");Object.keys($e).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$e[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $e[e]}}))});var er=require("./decode-audio-data-factory");Object.keys(er).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===er[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return er[e]}}))});var rr=require("./decode-audio-data-function");Object.keys(rr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===rr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rr[e]}}))});var tr=require("./decode-error-callback");Object.keys(tr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===tr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tr[e]}}))});var or=require("./decode-success-callback");Object.keys(or).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===or[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return or[e]}}))});var nr=require("./decrement-cycle-counter-factory");Object.keys(nr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===nr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nr[e]}}))});var ur=require("./decrement-cycle-counter-function");Object.keys(ur).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ur[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ur[e]}}))});var cr=require("./delay-node-constructor");Object.keys(cr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===cr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cr[e]}}))});var ir=require("./delay-node-constructor-factory");Object.keys(ir).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ir[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ir[e]}}))});var ar=require("./delay-node-renderer-factory");Object.keys(ar).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ar[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ar[e]}}))});var fr=require("./delay-node-renderer-factory-factory");Object.keys(fr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fr[e]}}))});var sr=require("./delete-active-input-connection-to-audio-node-factory");Object.keys(sr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===sr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return sr[e]}}))});var dr=require("./delete-active-input-connection-to-audio-node-function");Object.keys(dr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===dr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dr[e]}}))});var pr=require("./delete-unrendered-audio-worklet-node-factory");Object.keys(pr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pr[e]}}))});var lr=require("./delete-unrendered-audio-worklet-node-function");Object.keys(lr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===lr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lr[e]}}))});var br=require("./detect-cycles-factory");Object.keys(br).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===br[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return br[e]}}))});var xr=require("./detect-cycles-function");Object.keys(xr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xr[e]}}))});var yr=require("./disconnect-multiple-outputs-factory");Object.keys(yr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yr[e]}}))});var _r=require("./disconnect-multiple-outputs-function");Object.keys(_r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _r[e]}}))});var jr=require("./disconnect-native-audio-node-from-native-audio-node-function");Object.keys(jr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===jr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jr[e]}}))});var Or=require("./distance-model-type");Object.keys(Or).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Or[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Or[e]}}))});var vr=require("./dynamics-compressor-node-constructor");Object.keys(vr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===vr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vr[e]}}))});var mr=require("./dynamics-compressor-node-constructor-factory");Object.keys(mr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===mr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mr[e]}}))});var kr=require("./dynamics-compressor-node-renderer-factory");Object.keys(kr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===kr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kr[e]}}))});var gr=require("./dynamics-compressor-node-renderer-factory-factory");Object.keys(gr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===gr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gr[e]}}))});var hr=require("./encoding-error-factory");Object.keys(hr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===hr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hr[e]}}))});var qr=require("./error-event-handler");Object.keys(qr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qr[e]}}))});var Mr=require("./evaluate-audio-worklet-global-scope-function");Object.keys(Mr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Mr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mr[e]}}))});var Pr=require("./evaluate-source-factory");Object.keys(Pr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pr[e]}}))});var Er=require("./evaluate-source-function");Object.keys(Er).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Er[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Er[e]}}))});var wr=require("./event-handler");Object.keys(wr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===wr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wr[e]}}))});var zr=require("./event-target-constructor");Object.keys(zr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===zr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zr[e]}}))});var Ar=require("./event-target-constructor-factory");Object.keys(Ar).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ar[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ar[e]}}))});var Br=require("./expose-current-frame-and-current-time-factory");Object.keys(Br).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Br[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Br[e]}}))});var Cr=require("./expose-current-frame-and-current-time-function");Object.keys(Cr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Cr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cr[e]}}))});var Dr=require("./fetch-source-factory");Object.keys(Dr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Dr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dr[e]}}))});var Fr=require("./fetch-source-function");Object.keys(Fr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Fr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fr[e]}}))});var Gr=require("./gain-node-constructor");Object.keys(Gr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Gr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gr[e]}}))});var Hr=require("./gain-node-constructor-factory");Object.keys(Hr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Hr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hr[e]}}))});var Ir=require("./gain-node-renderer-factory");Object.keys(Ir).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ir[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ir[e]}}))});var Jr=require("./gain-node-renderer-factory-factory");Object.keys(Jr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Jr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jr[e]}}))});var Kr=require("./get-active-audio-worklet-node-inputs-factory");Object.keys(Kr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Kr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kr[e]}}))});var Lr=require("./get-active-audio-worklet-node-inputs-function");Object.keys(Lr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Lr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lr[e]}}))});var Nr=require("./get-audio-node-connections-function");Object.keys(Nr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Nr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nr[e]}}))});var Qr=require("./get-audio-node-renderer-factory");Object.keys(Qr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qr[e]}}))});var Rr=require("./get-audio-node-renderer-function");Object.keys(Rr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Rr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rr[e]}}))});var Sr=require("./get-audio-node-tail-time-factory");Object.keys(Sr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Sr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Sr[e]}}))});var Tr=require("./get-audio-node-tail-time-function");Object.keys(Tr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Tr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tr[e]}}))});var Ur=require("./get-audio-param-connections-function");Object.keys(Ur).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ur[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ur[e]}}))});var Vr=require("./get-audio-param-renderer-factory");Object.keys(Vr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Vr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vr[e]}}))});var Wr=require("./get-audio-param-renderer-function");Object.keys(Wr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Wr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wr[e]}}))});var Xr=require("./get-backup-offline-audio-context-factory");Object.keys(Xr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xr[e]}}))});var Yr=require("./get-backup-offline-audio-context-function");Object.keys(Yr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Yr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yr[e]}}))});var Zr=require("./get-event-listeners-of-audio-node-function");Object.keys(Zr).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Zr[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zr[e]}}))});var $r=require("./get-first-sample-function");Object.keys($r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $r[e]}}))});var et=require("./get-native-audio-node-function");Object.keys(et).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===et[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return et[e]}}))});var rt=require("./get-native-audio-param-function");Object.keys(rt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===rt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rt[e]}}))});var tt=require("./get-native-context-factory");Object.keys(tt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===tt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tt[e]}}))});var ot=require("./get-native-context-function");Object.keys(ot).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ot[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ot[e]}}))});var nt=require("./get-or-create-backup-offline-audio-context-factory");Object.keys(nt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===nt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nt[e]}}))});var ut=require("./get-or-create-backup-offline-audio-context-function");Object.keys(ut).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ut[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ut[e]}}))});var ct=require("./get-unrendered-audio-worklet-nodes-factory");Object.keys(ct).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ct[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ct[e]}}))});var it=require("./get-unrendered-audio-worklet-nodes-function");Object.keys(it).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===it[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return it[e]}}))});var at=require("./get-value-for-key-function");Object.keys(at).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===at[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return at[e]}}))});var ft=require("./iir-filter-node-constructor");Object.keys(ft).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ft[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ft[e]}}))});var st=require("./iir-filter-node-constructor-factory");Object.keys(st).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===st[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return st[e]}}))});var dt=require("./iir-filter-node-renderer-factory");Object.keys(dt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===dt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dt[e]}}))});var pt=require("./iir-filter-node-renderer-factory-factory");Object.keys(pt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pt[e]}}))});var lt=require("./increment-cycle-counter-factory");Object.keys(lt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===lt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lt[e]}}))});var bt=require("./increment-cycle-counter-factory-factory");Object.keys(bt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===bt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bt[e]}}))});var xt=require("./increment-cycle-counter-function");Object.keys(xt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xt[e]}}))});var yt=require("./index-size-error-factory");Object.keys(yt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yt[e]}}))});var _t=require("./insert-element-in-set-function");Object.keys(_t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _t[e]}}))});var jt=require("./internal-state-event-listener");Object.keys(jt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===jt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jt[e]}}))});var Ot=require("./invalid-access-error-factory");Object.keys(Ot).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ot[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ot[e]}}))});var vt=require("./invalid-state-error-factory");Object.keys(vt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===vt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vt[e]}}))});var mt=require("./is-active-audio-node-function");Object.keys(mt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===mt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mt[e]}}))});var kt=require("./is-any-audio-context-factory");Object.keys(kt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===kt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kt[e]}}))});var gt=require("./is-any-audio-context-function");Object.keys(gt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===gt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gt[e]}}))});var ht=require("./is-any-audio-node-factory");Object.keys(ht).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ht[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ht[e]}}))});var qt=require("./is-any-audio-node-function");Object.keys(qt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qt[e]}}))});var Mt=require("./is-any-audio-param-factory");Object.keys(Mt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Mt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mt[e]}}))});var Pt=require("./is-any-audio-param-function");Object.keys(Pt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pt[e]}}))});var Et=require("./is-any-offline-audio-context-factory");Object.keys(Et).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Et[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Et[e]}}))});var wt=require("./is-any-offline-audio-context-function");Object.keys(wt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===wt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wt[e]}}))});var zt=require("./is-dc-curve-function");Object.keys(zt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===zt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zt[e]}}))});var At=require("./is-native-audio-context-factory");Object.keys(At).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===At[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return At[e]}}))});var Bt=require("./is-native-audio-context-function");Object.keys(Bt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Bt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bt[e]}}))});var Ct=require("./is-native-audio-node-factory");Object.keys(Ct).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ct[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ct[e]}}))});var Dt=require("./is-native-audio-node-function");Object.keys(Dt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Dt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dt[e]}}))});var Ft=require("./is-native-audio-param-factory");Object.keys(Ft).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ft[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ft[e]}}))});var Gt=require("./is-native-audio-param-function");Object.keys(Gt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Gt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gt[e]}}))});var Ht=require("./is-native-context-factory");Object.keys(Ht).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ht[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ht[e]}}))});var It=require("./is-native-context-function");Object.keys(It).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===It[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return It[e]}}))});var Jt=require("./is-native-offline-audio-context-factory");Object.keys(Jt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Jt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jt[e]}}))});var Kt=require("./is-native-offline-audio-context-function");Object.keys(Kt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Kt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kt[e]}}))});var Lt=require("./is-part-of-a-cycle-function");Object.keys(Lt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Lt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lt[e]}}))});var Nt=require("./is-passive-audio-node-function");Object.keys(Nt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Nt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nt[e]}}))});var Qt=require("./is-secure-context-factory");Object.keys(Qt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qt[e]}}))});var Rt=require("./is-supported-promise-factory");Object.keys(Rt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Rt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rt[e]}}))});var St=require("./media-element-audio-source-node-constructor");Object.keys(St).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===St[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return St[e]}}))});var Tt=require("./media-element-audio-source-node-constructor-factory");Object.keys(Tt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Tt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tt[e]}}))});var Ut=require("./media-stream-audio-destination-node-constructor");Object.keys(Ut).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ut[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ut[e]}}))});var Vt=require("./media-stream-audio-destination-node-constructor-factory");Object.keys(Vt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Vt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vt[e]}}))});var Wt=require("./media-stream-audio-source-node-constructor");Object.keys(Wt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Wt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wt[e]}}))});var Xt=require("./media-stream-audio-source-node-constructor-factory");Object.keys(Xt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xt[e]}}))});var Yt=require("./media-stream-track-audio-source-node-constructor");Object.keys(Yt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Yt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yt[e]}}))});var Zt=require("./media-stream-track-audio-source-node-constructor-factory");Object.keys(Zt).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Zt[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zt[e]}}))});var $t=require("./minimal-audio-context-constructor");Object.keys($t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $t[e]}}))});var eo=require("./minimal-audio-context-constructor-factory");Object.keys(eo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===eo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return eo[e]}}))});var ro=require("./minimal-base-audio-context-constructor");Object.keys(ro).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ro[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ro[e]}}))});var to=require("./minimal-base-audio-context-constructor-factory");Object.keys(to).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===to[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return to[e]}}))});var oo=require("./minimal-offline-audio-context-constructor");Object.keys(oo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===oo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oo[e]}}))});var no=require("./minimal-offline-audio-context-constructor-factory");Object.keys(no).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===no[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return no[e]}}))});var uo=require("./monitor-connections-factory");Object.keys(uo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===uo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uo[e]}}))});var co=require("./monitor-connections-function");Object.keys(co).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===co[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return co[e]}}))});var io=require("./native-analyser-node");Object.keys(io).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===io[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return io[e]}}))});var ao=require("./native-analyser-node-factory");Object.keys(ao).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ao[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ao[e]}}))});var fo=require("./native-analyser-node-factory-factory");Object.keys(fo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fo[e]}}))});var so=require("./native-audio-buffer");Object.keys(so).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===so[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return so[e]}}))});var po=require("./native-audio-buffer-constructor");Object.keys(po).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===po[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return po[e]}}))});var lo=require("./native-audio-buffer-constructor-factory");Object.keys(lo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===lo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lo[e]}}))});var bo=require("./native-audio-buffer-source-node");Object.keys(bo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===bo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bo[e]}}))});var xo=require("./native-audio-buffer-source-node-factory");Object.keys(xo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xo[e]}}))});var yo=require("./native-audio-buffer-source-node-factory-factory");Object.keys(yo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yo[e]}}))});var _o=require("./native-audio-context");Object.keys(_o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _o[e]}}))});var jo=require("./native-audio-context-constructor");Object.keys(jo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===jo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jo[e]}}))});var Oo=require("./native-audio-context-constructor-factory");Object.keys(Oo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Oo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oo[e]}}))});var vo=require("./native-audio-destination-node");Object.keys(vo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===vo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vo[e]}}))});var mo=require("./native-audio-destination-node-factory");Object.keys(mo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===mo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mo[e]}}))});var ko=require("./native-audio-destination-node-factory-factory");Object.keys(ko).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ko[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ko[e]}}))});var go=require("./native-audio-listener");Object.keys(go).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===go[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return go[e]}}))});var ho=require("./native-audio-node");Object.keys(ho).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ho[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ho[e]}}))});var qo=require("./native-audio-param");Object.keys(qo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qo[e]}}))});var Mo=require("./native-audio-param-map");Object.keys(Mo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Mo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mo[e]}}))});var Po=require("./native-audio-worklet");Object.keys(Po).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Po[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Po[e]}}))});var Eo=require("./native-audio-worklet-node");Object.keys(Eo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Eo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Eo[e]}}))});var wo=require("./native-audio-worklet-node-constructor");Object.keys(wo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===wo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wo[e]}}))});var zo=require("./native-audio-worklet-node-constructor-factory");Object.keys(zo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===zo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zo[e]}}))});var Ao=require("./native-audio-worklet-node-factory");Object.keys(Ao).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ao[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ao[e]}}))});var Bo=require("./native-audio-worklet-node-factory-factory");Object.keys(Bo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Bo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bo[e]}}))});var Co=require("./native-audio-worklet-node-faker-factory");Object.keys(Co).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Co[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Co[e]}}))});var Do=require("./native-audio-worklet-node-faker-factory-factory");Object.keys(Do).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Do[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Do[e]}}))});var Fo=require("./native-audio-worklet-node-options");Object.keys(Fo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Fo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fo[e]}}))});var Go=require("./native-biquad-filter-node");Object.keys(Go).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Go[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Go[e]}}))});var Ho=require("./native-biquad-filter-node-factory");Object.keys(Ho).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ho[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ho[e]}}))});var Io=require("./native-channel-merger-node");Object.keys(Io).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Io[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Io[e]}}))});var Jo=require("./native-channel-merger-node-factory");Object.keys(Jo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Jo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jo[e]}}))});var Ko=require("./native-channel-merger-node-factory-factory");Object.keys(Ko).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ko[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ko[e]}}))});var Lo=require("./native-channel-splitter-node");Object.keys(Lo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Lo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lo[e]}}))});var No=require("./native-channel-splitter-node-factory");Object.keys(No).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===No[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return No[e]}}))});var Qo=require("./native-constant-source-node");Object.keys(Qo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qo[e]}}))});var Ro=require("./native-constant-source-node-factory");Object.keys(Ro).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ro[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ro[e]}}))});var So=require("./native-constant-source-node-factory-factory");Object.keys(So).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===So[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return So[e]}}))});var To=require("./native-constant-source-node-faker-factory");Object.keys(To).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===To[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return To[e]}}))});var Uo=require("./native-constant-source-node-faker-factory-factory");Object.keys(Uo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Uo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Uo[e]}}))});var Vo=require("./native-context");Object.keys(Vo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Vo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vo[e]}}))});var Wo=require("./native-convolver-node");Object.keys(Wo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Wo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wo[e]}}))});var Xo=require("./native-convolver-node-factory");Object.keys(Xo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xo[e]}}))});var Yo=require("./native-convolver-node-factory-factory");Object.keys(Yo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Yo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yo[e]}}))});var Zo=require("./native-delay-node-factory");Object.keys(Zo).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Zo[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zo[e]}}))});var $o=require("./native-delay-node");Object.keys($o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $o[e]}}))});var en=require("./native-dynamics-compressor-node");Object.keys(en).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===en[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return en[e]}}))});var rn=require("./native-dynamics-compressor-node-factory");Object.keys(rn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===rn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rn[e]}}))});var tn=require("./native-dynamics-compressor-node-factory-factory");Object.keys(tn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===tn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tn[e]}}))});var on=require("./native-event-target");Object.keys(on).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===on[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return on[e]}}))});var nn=require("./native-gain-node");Object.keys(nn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===nn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nn[e]}}))});var un=require("./native-gain-node-factory");Object.keys(un).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===un[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return un[e]}}))});var cn=require("./native-iir-filter-node");Object.keys(cn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===cn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cn[e]}}))});var an=require("./native-iir-filter-node-factory");Object.keys(an).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===an[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return an[e]}}))});var fn=require("./native-iir-filter-node-factory-factory");Object.keys(fn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fn[e]}}))});var sn=require("./native-iir-filter-node-faker-factory");Object.keys(sn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===sn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return sn[e]}}))});var dn=require("./native-iir-filter-node-faker-factory-factory");Object.keys(dn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===dn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dn[e]}}))});var pn=require("./native-media-element-audio-source-node");Object.keys(pn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pn[e]}}))});var ln=require("./native-media-element-audio-source-node-factory");Object.keys(ln).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ln[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ln[e]}}))});var bn=require("./native-media-stream-audio-destination-node");Object.keys(bn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===bn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bn[e]}}))});var xn=require("./native-media-stream-audio-destination-node-factory");Object.keys(xn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xn[e]}}))});var yn=require("./native-media-stream-audio-source-node");Object.keys(yn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yn[e]}}))});var _n=require("./native-media-stream-audio-source-node-factory");Object.keys(_n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _n[e]}}))});var jn=require("./native-media-stream-track-audio-source-node");Object.keys(jn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===jn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jn[e]}}))});var On=require("./native-media-stream-track-audio-source-node-factory");Object.keys(On).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===On[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return On[e]}}))});var vn=require("./native-media-stream-track-audio-source-node-factory-factory");Object.keys(vn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===vn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vn[e]}}))});var mn=require("./native-offline-audio-context");Object.keys(mn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===mn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mn[e]}}))});var kn=require("./native-offline-audio-context-constructor");Object.keys(kn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===kn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kn[e]}}))});var gn=require("./native-offline-audio-context-constructor-factory");Object.keys(gn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===gn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gn[e]}}))});var hn=require("./native-oscillator-node");Object.keys(hn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===hn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hn[e]}}))});var qn=require("./native-oscillator-node-factory");Object.keys(qn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qn[e]}}))});var Mn=require("./native-oscillator-node-factory-factory");Object.keys(Mn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Mn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mn[e]}}))});var Pn=require("./native-panner-node");Object.keys(Pn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pn[e]}}))});var En=require("./native-panner-node-factory");Object.keys(En).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===En[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return En[e]}}))});var wn=require("./native-panner-node-factory-factory");Object.keys(wn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===wn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wn[e]}}))});var zn=require("./native-panner-node-faker-factory");Object.keys(zn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===zn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zn[e]}}))});var An=require("./native-panner-node-faker-factory-factory");Object.keys(An).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===An[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return An[e]}}))});var Bn=require("./native-periodic-wave");Object.keys(Bn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Bn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bn[e]}}))});var Cn=require("./native-periodic-wave-factory");Object.keys(Cn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Cn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cn[e]}}))});var Dn=require("./native-periodic-wave-factory-factory");Object.keys(Dn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Dn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dn[e]}}))});var Fn=require("./native-script-processor-node");Object.keys(Fn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Fn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fn[e]}}))});var Gn=require("./native-script-processor-node-factory");Object.keys(Gn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Gn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gn[e]}}))});var Hn=require("./native-stereo-panner-node");Object.keys(Hn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Hn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hn[e]}}))});var In=require("./native-stereo-panner-node-factory");Object.keys(In).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===In[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return In[e]}}))});var Jn=require("./native-stereo-panner-node-factory-factory");Object.keys(Jn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Jn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jn[e]}}))});var Kn=require("./native-stereo-panner-node-faker-factory");Object.keys(Kn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Kn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kn[e]}}))});var Ln=require("./native-stereo-panner-node-faker-factory-factory");Object.keys(Ln).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ln[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ln[e]}}))});var Nn=require("./native-wave-shaper-node");Object.keys(Nn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Nn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nn[e]}}))});var Qn=require("./native-wave-shaper-node-factory");Object.keys(Qn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qn[e]}}))});var Rn=require("./native-wave-shaper-node-factory-factory");Object.keys(Rn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Rn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rn[e]}}))});var Sn=require("./native-wave-shaper-node-faker-factory");Object.keys(Sn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Sn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Sn[e]}}))});var Tn=require("./native-wave-shaper-node-faker-factory-factory");Object.keys(Tn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Tn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tn[e]}}))});var Un=require("./not-supported-error-factory");Object.keys(Un).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Un[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Un[e]}}))});var Vn=require("./offline-audio-context-constructor-factory");Object.keys(Vn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Vn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vn[e]}}))});var Wn=require("./oscillator-node-constructor");Object.keys(Wn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Wn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wn[e]}}))});var Xn=require("./oscillator-node-constructor-factory");Object.keys(Xn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xn[e]}}))});var Yn=require("./oscillator-node-renderer");Object.keys(Yn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Yn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yn[e]}}))});var Zn=require("./oscillator-node-renderer-factory");Object.keys(Zn).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Zn[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zn[e]}}))});var $n=require("./oscillator-node-renderer-factory-factory");Object.keys($n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $n[e]}}))});var eu=require("./oscillator-type");Object.keys(eu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===eu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return eu[e]}}))});var ru=require("./output-connection");Object.keys(ru).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ru[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ru[e]}}))});var tu=require("./over-sample-type");Object.keys(tu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===tu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tu[e]}}))});var ou=require("./overwrite-accessors-function");Object.keys(ou).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ou[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ou[e]}}))});var nu=require("./panner-node-constructor");Object.keys(nu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===nu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nu[e]}}))});var uu=require("./panner-node-constructor-factory");Object.keys(uu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===uu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uu[e]}}))});var cu=require("./panner-node-renderer-factory");Object.keys(cu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===cu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cu[e]}}))});var iu=require("./panner-node-renderer-factory-factory");Object.keys(iu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===iu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return iu[e]}}))});var au=require("./panning-model-type");Object.keys(au).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===au[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return au[e]}}))});var fu=require("./passive-audio-node-input-connection");Object.keys(fu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fu[e]}}))});var su=require("./passive-audio-param-input-connection");Object.keys(su).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===su[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return su[e]}}))});var du=require("./periodic-wave-constructor");Object.keys(du).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===du[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return du[e]}}))});var pu=require("./periodic-wave-constructor-factory");Object.keys(pu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pu[e]}}))});var lu=require("./pick-element-from-set-function");Object.keys(lu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===lu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lu[e]}}))});var bu=require("./render-automation-factory");Object.keys(bu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===bu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bu[e]}}))});var xu=require("./render-automation-function");Object.keys(xu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xu[e]}}))});var yu=require("./render-inputs-of-audio-node-factory");Object.keys(yu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yu[e]}}))});var _u=require("./render-inputs-of-audio-node-function");Object.keys(_u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _u[e]}}))});var ju=require("./render-inputs-of-audio-param-factory");Object.keys(ju).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ju[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ju[e]}}))});var Ou=require("./render-inputs-of-audio-param-function");Object.keys(Ou).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ou[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ou[e]}}))});var vu=require("./render-native-offline-audio-context-factory");Object.keys(vu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===vu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vu[e]}}))});var mu=require("./render-native-offline-audio-context-function");Object.keys(mu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===mu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mu[e]}}))});var ku=require("./sanitize-audio-worklet-node-options-function");Object.keys(ku).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ku[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ku[e]}}))});var gu=require("./sanitize-channel-splitter-options-function");Object.keys(gu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===gu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gu[e]}}))});var hu=require("./sanitize-periodic-wave-options-function");Object.keys(hu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===hu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hu[e]}}))});var qu=require("./set-active-audio-worklet-node-inputs-factory");Object.keys(qu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===qu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qu[e]}}))});var Mu=require("./set-active-audio-worklet-node-inputs-function");Object.keys(Mu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Mu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mu[e]}}))});var Pu=require("./set-audio-node-tail-time-factory");Object.keys(Pu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Pu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pu[e]}}))});var Eu=require("./set-audio-node-tail-time-function");Object.keys(Eu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Eu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Eu[e]}}))});var wu=require("./set-value-at-time-until-possible-function");Object.keys(wu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===wu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wu[e]}}))});var zu=require("./start-rendering-factory");Object.keys(zu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===zu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zu[e]}}))});var Au=require("./start-rendering-function");Object.keys(Au).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Au[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Au[e]}}))});var Bu=require("./stereo-panner-node-constructor");Object.keys(Bu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Bu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bu[e]}}))});var Cu=require("./stereo-panner-node-constructor-factory");Object.keys(Cu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Cu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cu[e]}}))});var Du=require("./stereo-panner-node-renderer-factory-factory");Object.keys(Du).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Du[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Du[e]}}))});var Fu=require("./stereo-panner-node-renderer-factory");Object.keys(Fu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Fu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fu[e]}}))});var Gu=require("./test-audio-buffer-copy-channel-methods-subarray-support-factory");Object.keys(Gu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Gu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gu[e]}}))});var Hu=require("./test-audio-buffer-constructor-support-factory");Object.keys(Hu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Hu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hu[e]}}))});var Iu=require("./test-audio-context-close-method-support-factory");Object.keys(Iu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Iu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Iu[e]}}))});var Ju=require("./test-audio-context-decode-audio-data-method-type-error-support-factory");Object.keys(Ju).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ju[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ju[e]}}))});var Ku=require("./test-audio-context-options-support-factory");Object.keys(Ku).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ku[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ku[e]}}))});var Lu=require("./test-audio-node-connect-method-support-factory");Object.keys(Lu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Lu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lu[e]}}))});var Nu=require("./test-audio-worklet-node-options-clonability-function");Object.keys(Nu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Nu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nu[e]}}))});var Qu=require("./test-audio-worklet-processor-no-outputs-support-factory");Object.keys(Qu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Qu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qu[e]}}))});var Ru=require("./test-audio-worklet-processor-post-message-support-factory");Object.keys(Ru).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Ru[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ru[e]}}))});var Su=require("./test-channel-merger-node-channel-count-support-factory");Object.keys(Su).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Su[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Su[e]}}))});var Tu=require("./test-constant-source-node-accurate-scheduling-support-factory");Object.keys(Tu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Tu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tu[e]}}))});var Uu=require("./test-convolver-node-buffer-reassignability-support-factory");Object.keys(Uu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Uu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Uu[e]}}))});var Vu=require("./test-convolver-node-channel-count-support-factory");Object.keys(Vu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Vu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vu[e]}}))});var Wu=require("./test-is-secure-context-support-factory");Object.keys(Wu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Wu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wu[e]}}))});var Xu=require("./test-media-stream-audio-source-node-media-stream-without-audio-track-support");Object.keys(Xu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Xu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xu[e]}}))});var Yu=require("./test-offline-audio-context-current-time-support-factory");Object.keys(Yu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Yu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yu[e]}}))});var Zu=require("./test-stereo-panner-node-default-value-support-factory");Object.keys(Zu).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===Zu[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zu[e]}}))});var $u=require("./unknown-error-factory");Object.keys($u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===$u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $u[e]}}))});var ec=require("./unrendered-audio-worklet-node-store");Object.keys(ec).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ec[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ec[e]}}))});var rc=require("./unrendered-audio-worklet-nodes");Object.keys(rc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===rc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rc[e]}}))});var tc=require("./wave-shaper-node-constructor");Object.keys(tc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===tc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tc[e]}}))});var oc=require("./wave-shaper-node-constructor-factory");Object.keys(oc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===oc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oc[e]}}))});var nc=require("./wave-shaper-node-renderer-factory-factory");Object.keys(nc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===nc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nc[e]}}))});var uc=require("./wave-shaper-node-renderer-factory");Object.keys(uc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===uc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uc[e]}}))});var cc=require("./window");Object.keys(cc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===cc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cc[e]}}))});var ic=require("./window-factory");Object.keys(ic).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ic[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ic[e]}}))});var ac=require("./wrap-audio-buffer-copy-channel-methods-factory");Object.keys(ac).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===ac[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ac[e]}}))});var fc=require("./wrap-audio-buffer-copy-channel-methods-function");Object.keys(fc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===fc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fc[e]}}))});var sc=require("./wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory");Object.keys(sc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===sc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return sc[e]}}))});var dc=require("./wrap-audio-buffer-copy-channel-methods-out-of-bounds-function");Object.keys(dc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===dc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dc[e]}}))});var pc=require("./wrap-audio-buffer-source-node-start-method-offset-clamping-function");Object.keys(pc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===pc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pc[e]}}))});var lc=require("./wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory");Object.keys(lc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===lc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lc[e]}}))});var bc=require("./wrap-audio-buffer-source-node-stop-method-nullified-buffer-function");Object.keys(bc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===bc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bc[e]}}))});var xc=require("./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function");Object.keys(xc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===xc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xc[e]}}))});var yc=require("./wrap-channel-merger-node-factory");Object.keys(yc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===yc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yc[e]}}))});var _c=require("./wrap-channel-merger-node-function");Object.keys(_c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _c[e]}}))});var jc=require("./wrap-event-listener-function");Object.keys(jc).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===jc[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jc[e]}}))});
},{"./abort-error-factory":"brg8","./active-audio-worklet-node-inputs-store":"brg8","./active-input-connection":"brg8","./add-active-input-connection-to-audio-node-factory":"brg8","./add-active-input-connection-to-audio-node-function":"brg8","./add-audio-node-connections-factory":"brg8","./add-audio-node-connections-function":"brg8","./add-audio-param-connections-factory":"brg8","./add-audio-param-connections-function":"brg8","./add-audio-worklet-module-factory":"brg8","./add-audio-worklet-module-function":"brg8","./add-connection-to-audio-node-factory":"brg8","./add-connection-to-audio-node-function":"brg8","./add-passive-input-connection-to-audio-node-factory":"brg8","./add-passive-input-connection-to-audio-node-function":"brg8","./add-silent-connection-factory":"brg8","./add-silent-connection-function":"brg8","./add-unrendered-audio-worklet-node-factory":"brg8","./add-unrendered-audio-worklet-node-function":"brg8","./analyser-node-constructor":"brg8","./analyser-node-constructor-factory":"brg8","./analyser-node-renderer-factory":"brg8","./analyser-node-renderer-factory-factory":"brg8","./any-audio-buffer":"brg8","./any-context":"brg8","./audio-buffer-constructor":"brg8","./audio-buffer-constructor-factory":"brg8","./audio-buffer-source-node-constructor":"brg8","./audio-buffer-source-node-constructor-factory":"brg8","./audio-buffer-source-node-renderer":"brg8","./audio-buffer-source-node-renderer-factory":"brg8","./audio-buffer-source-node-renderer-factory-factory":"brg8","./audio-buffer-store":"brg8","./audio-context-constructor":"brg8","./audio-context-constructor-factory":"brg8","./audio-context-latency-category":"brg8","./audio-context-state":"brg8","./audio-destination-node-constructor":"brg8","./audio-destination-node-constructor-factory":"brg8","./audio-destination-node-renderer-factory":"brg8","./audio-listener-factory":"brg8","./audio-listener-factory-factory":"brg8","./audio-node-connections":"brg8","./audio-node-connections-store":"brg8","./audio-node-constructor":"brg8","./audio-node-constructor-factory":"brg8","./audio-node-output-connection":"brg8","./audio-node-renderer":"brg8","./audio-node-store":"brg8","./audio-node-tail-time-store":"brg8","./audio-param-audio-node-store":"brg8","./audio-param-connections":"brg8","./audio-param-connections-store":"brg8","./audio-param-factory":"brg8","./audio-param-factory-factory":"brg8","./audio-param-map":"brg8","./audio-param-output-connection":"brg8","./audio-param-renderer-factory":"brg8","./audio-param-store":"brg8","./audio-worklet-node-constructor":"brg8","./audio-worklet-node-constructor-factory":"brg8","./audio-worklet-node-renderer-factory":"brg8","./audio-worklet-node-renderer-factory-factory":"brg8","./backup-offline-audio-context-store":"brg8","./base-audio-context-constructor":"brg8","./base-audio-context-constructor-factory":"brg8","./biquad-filter-node-constructor":"brg8","./biquad-filter-node-constructor-factory":"brg8","./biquad-filter-node-renderer-factory":"brg8","./biquad-filter-node-renderer-factory-factory":"brg8","./biquad-filter-type":"brg8","./channel-count-mode":"brg8","./channel-interpretation":"brg8","./channel-merger-node-constructor":"brg8","./channel-merger-node-constructor-factory":"brg8","./channel-merger-node-renderer-factory":"brg8","./channel-merger-node-renderer-factory-factory":"brg8","./channel-splitter-node-constructor":"brg8","./channel-splitter-node-constructor-factory":"brg8","./channel-splitter-node-renderer-factory":"brg8","./channel-splitter-node-renderer-factory-factory":"brg8","./cache-test-result-factory":"brg8","./cache-test-result-function":"brg8","./connect-audio-param-factory":"brg8","./connect-audio-param-function":"brg8","./connect-multiple-outputs-factory":"brg8","./connect-multiple-outputs-function":"brg8","./connect-native-audio-node-to-native-audio-node-function":"brg8","./connected-native-audio-buffer-source-node-factory":"brg8","./connected-native-audio-buffer-source-node-factory-factory":"brg8","./constant-source-node-constructor":"brg8","./constant-source-node-constructor-factory":"brg8","./constant-source-node-renderer":"brg8","./constant-source-node-renderer-factory":"brg8","./constant-source-node-renderer-factory-factory":"brg8","./constructor":"brg8","./context":"brg8","./context-store":"brg8","./convert-number-to-unsigned-long-factory":"brg8","./convert-number-to-unsigned-long-function":"brg8","./convolver-node-constructor":"brg8","./convolver-node-constructor-factory":"brg8","./convolver-node-renderer-factory":"brg8","./convolver-node-renderer-factory-factory":"brg8","./create-native-offline-audio-context-factory":"brg8","./create-native-offline-audio-context-function":"brg8","./cycle-counters":"brg8","./data-clone-error-factory":"brg8","./decode-audio-data-factory":"brg8","./decode-audio-data-function":"brg8","./decode-error-callback":"brg8","./decode-success-callback":"brg8","./decrement-cycle-counter-factory":"brg8","./decrement-cycle-counter-function":"brg8","./delay-node-constructor":"brg8","./delay-node-constructor-factory":"brg8","./delay-node-renderer-factory":"brg8","./delay-node-renderer-factory-factory":"brg8","./delete-active-input-connection-to-audio-node-factory":"brg8","./delete-active-input-connection-to-audio-node-function":"brg8","./delete-unrendered-audio-worklet-node-factory":"brg8","./delete-unrendered-audio-worklet-node-function":"brg8","./detect-cycles-factory":"brg8","./detect-cycles-function":"brg8","./disconnect-multiple-outputs-factory":"brg8","./disconnect-multiple-outputs-function":"brg8","./disconnect-native-audio-node-from-native-audio-node-function":"brg8","./distance-model-type":"brg8","./dynamics-compressor-node-constructor":"brg8","./dynamics-compressor-node-constructor-factory":"brg8","./dynamics-compressor-node-renderer-factory":"brg8","./dynamics-compressor-node-renderer-factory-factory":"brg8","./encoding-error-factory":"brg8","./error-event-handler":"brg8","./evaluate-audio-worklet-global-scope-function":"brg8","./evaluate-source-factory":"brg8","./evaluate-source-function":"brg8","./event-handler":"brg8","./event-target-constructor":"brg8","./event-target-constructor-factory":"brg8","./expose-current-frame-and-current-time-factory":"brg8","./expose-current-frame-and-current-time-function":"brg8","./fetch-source-factory":"brg8","./fetch-source-function":"brg8","./gain-node-constructor":"brg8","./gain-node-constructor-factory":"brg8","./gain-node-renderer-factory":"brg8","./gain-node-renderer-factory-factory":"brg8","./get-active-audio-worklet-node-inputs-factory":"brg8","./get-active-audio-worklet-node-inputs-function":"brg8","./get-audio-node-connections-function":"brg8","./get-audio-node-renderer-factory":"brg8","./get-audio-node-renderer-function":"brg8","./get-audio-node-tail-time-factory":"brg8","./get-audio-node-tail-time-function":"brg8","./get-audio-param-connections-function":"brg8","./get-audio-param-renderer-factory":"brg8","./get-audio-param-renderer-function":"brg8","./get-backup-offline-audio-context-factory":"brg8","./get-backup-offline-audio-context-function":"brg8","./get-event-listeners-of-audio-node-function":"brg8","./get-first-sample-function":"brg8","./get-native-audio-node-function":"brg8","./get-native-audio-param-function":"brg8","./get-native-context-factory":"brg8","./get-native-context-function":"brg8","./get-or-create-backup-offline-audio-context-factory":"brg8","./get-or-create-backup-offline-audio-context-function":"brg8","./get-unrendered-audio-worklet-nodes-factory":"brg8","./get-unrendered-audio-worklet-nodes-function":"brg8","./get-value-for-key-function":"brg8","./iir-filter-node-constructor":"brg8","./iir-filter-node-constructor-factory":"brg8","./iir-filter-node-renderer-factory":"brg8","./iir-filter-node-renderer-factory-factory":"brg8","./increment-cycle-counter-factory":"brg8","./increment-cycle-counter-factory-factory":"brg8","./increment-cycle-counter-function":"brg8","./index-size-error-factory":"brg8","./insert-element-in-set-function":"brg8","./internal-state-event-listener":"brg8","./invalid-access-error-factory":"brg8","./invalid-state-error-factory":"brg8","./is-active-audio-node-function":"brg8","./is-any-audio-context-factory":"brg8","./is-any-audio-context-function":"brg8","./is-any-audio-node-factory":"brg8","./is-any-audio-node-function":"brg8","./is-any-audio-param-factory":"brg8","./is-any-audio-param-function":"brg8","./is-any-offline-audio-context-factory":"brg8","./is-any-offline-audio-context-function":"brg8","./is-dc-curve-function":"brg8","./is-native-audio-context-factory":"brg8","./is-native-audio-context-function":"brg8","./is-native-audio-node-factory":"brg8","./is-native-audio-node-function":"brg8","./is-native-audio-param-factory":"brg8","./is-native-audio-param-function":"brg8","./is-native-context-factory":"brg8","./is-native-context-function":"brg8","./is-native-offline-audio-context-factory":"brg8","./is-native-offline-audio-context-function":"brg8","./is-part-of-a-cycle-function":"brg8","./is-passive-audio-node-function":"brg8","./is-secure-context-factory":"brg8","./is-supported-promise-factory":"brg8","./media-element-audio-source-node-constructor":"brg8","./media-element-audio-source-node-constructor-factory":"brg8","./media-stream-audio-destination-node-constructor":"brg8","./media-stream-audio-destination-node-constructor-factory":"brg8","./media-stream-audio-source-node-constructor":"brg8","./media-stream-audio-source-node-constructor-factory":"brg8","./media-stream-track-audio-source-node-constructor":"brg8","./media-stream-track-audio-source-node-constructor-factory":"brg8","./minimal-audio-context-constructor":"brg8","./minimal-audio-context-constructor-factory":"brg8","./minimal-base-audio-context-constructor":"brg8","./minimal-base-audio-context-constructor-factory":"brg8","./minimal-offline-audio-context-constructor":"brg8","./minimal-offline-audio-context-constructor-factory":"brg8","./monitor-connections-factory":"brg8","./monitor-connections-function":"brg8","./native-analyser-node":"brg8","./native-analyser-node-factory":"brg8","./native-analyser-node-factory-factory":"brg8","./native-audio-buffer":"brg8","./native-audio-buffer-constructor":"brg8","./native-audio-buffer-constructor-factory":"brg8","./native-audio-buffer-source-node":"brg8","./native-audio-buffer-source-node-factory":"brg8","./native-audio-buffer-source-node-factory-factory":"brg8","./native-audio-context":"brg8","./native-audio-context-constructor":"brg8","./native-audio-context-constructor-factory":"brg8","./native-audio-destination-node":"brg8","./native-audio-destination-node-factory":"brg8","./native-audio-destination-node-factory-factory":"brg8","./native-audio-listener":"brg8","./native-audio-node":"brg8","./native-audio-param":"brg8","./native-audio-param-map":"brg8","./native-audio-worklet":"brg8","./native-audio-worklet-node":"brg8","./native-audio-worklet-node-constructor":"brg8","./native-audio-worklet-node-constructor-factory":"brg8","./native-audio-worklet-node-factory":"brg8","./native-audio-worklet-node-factory-factory":"brg8","./native-audio-worklet-node-faker-factory":"brg8","./native-audio-worklet-node-faker-factory-factory":"brg8","./native-audio-worklet-node-options":"brg8","./native-biquad-filter-node":"brg8","./native-biquad-filter-node-factory":"brg8","./native-channel-merger-node":"brg8","./native-channel-merger-node-factory":"brg8","./native-channel-merger-node-factory-factory":"brg8","./native-channel-splitter-node":"brg8","./native-channel-splitter-node-factory":"brg8","./native-constant-source-node":"brg8","./native-constant-source-node-factory":"brg8","./native-constant-source-node-factory-factory":"brg8","./native-constant-source-node-faker-factory":"brg8","./native-constant-source-node-faker-factory-factory":"brg8","./native-context":"brg8","./native-convolver-node":"brg8","./native-convolver-node-factory":"brg8","./native-convolver-node-factory-factory":"brg8","./native-delay-node-factory":"brg8","./native-delay-node":"brg8","./native-dynamics-compressor-node":"brg8","./native-dynamics-compressor-node-factory":"brg8","./native-dynamics-compressor-node-factory-factory":"brg8","./native-event-target":"brg8","./native-gain-node":"brg8","./native-gain-node-factory":"brg8","./native-iir-filter-node":"brg8","./native-iir-filter-node-factory":"brg8","./native-iir-filter-node-factory-factory":"brg8","./native-iir-filter-node-faker-factory":"brg8","./native-iir-filter-node-faker-factory-factory":"brg8","./native-media-element-audio-source-node":"brg8","./native-media-element-audio-source-node-factory":"brg8","./native-media-stream-audio-destination-node":"brg8","./native-media-stream-audio-destination-node-factory":"brg8","./native-media-stream-audio-source-node":"brg8","./native-media-stream-audio-source-node-factory":"brg8","./native-media-stream-track-audio-source-node":"brg8","./native-media-stream-track-audio-source-node-factory":"brg8","./native-media-stream-track-audio-source-node-factory-factory":"brg8","./native-offline-audio-context":"brg8","./native-offline-audio-context-constructor":"brg8","./native-offline-audio-context-constructor-factory":"brg8","./native-oscillator-node":"brg8","./native-oscillator-node-factory":"brg8","./native-oscillator-node-factory-factory":"brg8","./native-panner-node":"brg8","./native-panner-node-factory":"brg8","./native-panner-node-factory-factory":"brg8","./native-panner-node-faker-factory":"brg8","./native-panner-node-faker-factory-factory":"brg8","./native-periodic-wave":"brg8","./native-periodic-wave-factory":"brg8","./native-periodic-wave-factory-factory":"brg8","./native-script-processor-node":"brg8","./native-script-processor-node-factory":"brg8","./native-stereo-panner-node":"brg8","./native-stereo-panner-node-factory":"brg8","./native-stereo-panner-node-factory-factory":"brg8","./native-stereo-panner-node-faker-factory":"brg8","./native-stereo-panner-node-faker-factory-factory":"brg8","./native-wave-shaper-node":"brg8","./native-wave-shaper-node-factory":"brg8","./native-wave-shaper-node-factory-factory":"brg8","./native-wave-shaper-node-faker-factory":"brg8","./native-wave-shaper-node-faker-factory-factory":"brg8","./not-supported-error-factory":"brg8","./offline-audio-context-constructor-factory":"brg8","./oscillator-node-constructor":"brg8","./oscillator-node-constructor-factory":"brg8","./oscillator-node-renderer":"brg8","./oscillator-node-renderer-factory":"brg8","./oscillator-node-renderer-factory-factory":"brg8","./oscillator-type":"brg8","./output-connection":"brg8","./over-sample-type":"brg8","./overwrite-accessors-function":"brg8","./panner-node-constructor":"brg8","./panner-node-constructor-factory":"brg8","./panner-node-renderer-factory":"brg8","./panner-node-renderer-factory-factory":"brg8","./panning-model-type":"brg8","./passive-audio-node-input-connection":"brg8","./passive-audio-param-input-connection":"brg8","./periodic-wave-constructor":"brg8","./periodic-wave-constructor-factory":"brg8","./pick-element-from-set-function":"brg8","./render-automation-factory":"brg8","./render-automation-function":"brg8","./render-inputs-of-audio-node-factory":"brg8","./render-inputs-of-audio-node-function":"brg8","./render-inputs-of-audio-param-factory":"brg8","./render-inputs-of-audio-param-function":"brg8","./render-native-offline-audio-context-factory":"brg8","./render-native-offline-audio-context-function":"brg8","./sanitize-audio-worklet-node-options-function":"brg8","./sanitize-channel-splitter-options-function":"brg8","./sanitize-periodic-wave-options-function":"brg8","./set-active-audio-worklet-node-inputs-factory":"brg8","./set-active-audio-worklet-node-inputs-function":"brg8","./set-audio-node-tail-time-factory":"brg8","./set-audio-node-tail-time-function":"brg8","./set-value-at-time-until-possible-function":"brg8","./start-rendering-factory":"brg8","./start-rendering-function":"brg8","./stereo-panner-node-constructor":"brg8","./stereo-panner-node-constructor-factory":"brg8","./stereo-panner-node-renderer-factory-factory":"brg8","./stereo-panner-node-renderer-factory":"brg8","./test-audio-buffer-copy-channel-methods-subarray-support-factory":"brg8","./test-audio-buffer-constructor-support-factory":"brg8","./test-audio-context-close-method-support-factory":"brg8","./test-audio-context-decode-audio-data-method-type-error-support-factory":"brg8","./test-audio-context-options-support-factory":"brg8","./test-audio-node-connect-method-support-factory":"brg8","./test-audio-worklet-node-options-clonability-function":"brg8","./test-audio-worklet-processor-no-outputs-support-factory":"brg8","./test-audio-worklet-processor-post-message-support-factory":"brg8","./test-channel-merger-node-channel-count-support-factory":"brg8","./test-constant-source-node-accurate-scheduling-support-factory":"brg8","./test-convolver-node-buffer-reassignability-support-factory":"brg8","./test-convolver-node-channel-count-support-factory":"brg8","./test-is-secure-context-support-factory":"brg8","./test-media-stream-audio-source-node-media-stream-without-audio-track-support":"brg8","./test-offline-audio-context-current-time-support-factory":"brg8","./test-stereo-panner-node-default-value-support-factory":"brg8","./unknown-error-factory":"brg8","./unrendered-audio-worklet-node-store":"brg8","./unrendered-audio-worklet-nodes":"brg8","./wave-shaper-node-constructor":"brg8","./wave-shaper-node-constructor-factory":"brg8","./wave-shaper-node-renderer-factory-factory":"brg8","./wave-shaper-node-renderer-factory":"brg8","./window":"brg8","./window-factory":"brg8","./wrap-audio-buffer-copy-channel-methods-factory":"brg8","./wrap-audio-buffer-copy-channel-methods-function":"brg8","./wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory":"brg8","./wrap-audio-buffer-copy-channel-methods-out-of-bounds-function":"brg8","./wrap-audio-buffer-source-node-start-method-offset-clamping-function":"brg8","./wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory":"brg8","./wrap-audio-buffer-source-node-stop-method-nullified-buffer-function":"brg8","./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function":"brg8","./wrap-channel-merger-node-factory":"brg8","./wrap-channel-merger-node-function":"brg8","./wrap-event-listener-function":"brg8"}],"io7r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={AnalyserNode:!0,AudioBuffer:!0,AudioBufferSourceNode:!0,addAudioWorkletModule:!0,decodeAudioData:!0,AudioContext:!0,AudioWorkletNode:!0,BiquadFilterNode:!0,ChannelMergerNode:!0,ChannelSplitterNode:!0,ConvolverNode:!0,ConstantSourceNode:!0,DelayNode:!0,DynamicsCompressorNode:!0,GainNode:!0,IIRFilterNode:!0,MediaElementAudioSourceNode:!0,MediaStreamAudioDestinationNode:!0,MediaStreamAudioSourceNode:!0,MediaStreamTrackAudioSourceNode:!0,MinimalAudioContext:!0,MinimalOfflineAudioContext:!0,OfflineAudioContext:!0,OscillatorNode:!0,PannerNode:!0,PeriodicWave:!0,StereoPannerNode:!0,WaveShaperNode:!0,isAnyAudioContext:!0,isAnyAudioNode:!0,isAnyAudioParam:!0,isAnyOfflineAudioContext:!0,isSupported:!0};exports.isSupported=exports.isAnyOfflineAudioContext=exports.isAnyAudioParam=exports.isAnyAudioNode=exports.isAnyAudioContext=exports.WaveShaperNode=exports.StereoPannerNode=exports.PeriodicWave=exports.PannerNode=exports.OscillatorNode=exports.OfflineAudioContext=exports.MinimalOfflineAudioContext=exports.MinimalAudioContext=exports.MediaStreamTrackAudioSourceNode=exports.MediaStreamAudioSourceNode=exports.MediaStreamAudioDestinationNode=exports.MediaElementAudioSourceNode=exports.IIRFilterNode=exports.GainNode=exports.DynamicsCompressorNode=exports.DelayNode=exports.ConstantSourceNode=exports.ConvolverNode=exports.ChannelSplitterNode=exports.ChannelMergerNode=exports.BiquadFilterNode=exports.AudioWorkletNode=exports.AudioContext=exports.decodeAudioData=exports.addAudioWorkletModule=exports.AudioBufferSourceNode=exports.AudioBuffer=exports.AnalyserNode=void 0;var r=require("automation-events"),t=require("./factories/abort-error"),o=require("./factories/add-active-input-connection-to-audio-node"),a=require("./factories/add-audio-node-connections"),i=require("./factories/add-audio-param-connections"),n=require("./factories/add-audio-worklet-module"),c=require("./factories/add-connection-to-audio-node"),d=require("./factories/add-passive-input-connection-to-audio-node"),u=require("./factories/add-silent-connection"),s=require("./factories/add-unrendered-audio-worklet-node"),p=require("./factories/analyser-node-constructor"),f=require("./factories/analyser-node-renderer-factory"),l=require("./factories/audio-buffer-constructor"),N=require("./factories/audio-buffer-source-node-constructor"),v=require("./factories/audio-buffer-source-node-renderer-factory"),A=require("./factories/audio-context-constructor"),S=require("./factories/audio-destination-node-constructor"),q=require("./factories/audio-destination-node-renderer-factory"),C=require("./factories/audio-listener-factory"),m=require("./factories/audio-node-constructor"),y=require("./factories/audio-param-factory"),x=require("./factories/audio-param-renderer"),h=require("./factories/audio-worklet-node-constructor"),E=require("./factories/audio-worklet-node-renderer-factory"),g=require("./factories/base-audio-context-constructor"),M=require("./factories/biquad-filter-node-constructor"),O=require("./factories/biquad-filter-node-renderer-factory"),k=require("./factories/cache-test-result"),I=require("./factories/channel-merger-node-constructor"),F=require("./factories/channel-merger-node-renderer-factory"),w=require("./factories/channel-splitter-node-constructor"),P=require("./factories/channel-splitter-node-renderer-factory"),T=require("./factories/connect-audio-param"),b=require("./factories/connect-multiple-outputs"),W=require("./factories/connected-native-audio-buffer-source-node-factory"),R=require("./factories/constant-source-node-constructor"),D=require("./factories/constant-source-node-renderer-factory"),B=require("./factories/convert-number-to-unsigned-long"),G=require("./factories/convolver-node-constructor"),_=require("./factories/convolver-node-renderer-factory"),z=require("./factories/create-native-offline-audio-context"),U=require("./factories/data-clone-error"),L=require("./factories/decode-audio-data"),V=require("./factories/decrement-cycle-counter"),j=require("./factories/delay-node-constructor"),X=require("./factories/delay-node-renderer-factory"),K=require("./factories/delete-active-input-connection-to-audio-node"),Y=require("./factories/delete-unrendered-audio-worklet-node"),H=require("./factories/detect-cycles"),J=require("./factories/disconnect-multiple-outputs"),Q=require("./factories/dynamics-compressor-node-constructor"),Z=require("./factories/dynamics-compressor-node-renderer-factory"),$=require("./factories/encoding-error"),ee=require("./factories/evaluate-source"),re=require("./factories/event-target-constructor"),te=require("./factories/expose-current-frame-and-current-time"),oe=require("./factories/fetch-source"),ae=require("./factories/gain-node-constructor"),ie=require("./factories/gain-node-renderer-factory"),ne=require("./factories/get-active-audio-worklet-node-inputs"),ce=require("./factories/get-audio-node-renderer"),de=require("./factories/get-audio-node-tail-time"),ue=require("./factories/get-audio-param-renderer"),se=require("./factories/get-backup-offline-audio-context"),pe=require("./factories/get-native-context"),fe=require("./factories/get-or-create-backup-offline-audio-context"),le=require("./factories/get-unrendered-audio-worklet-nodes"),Ne=require("./factories/iir-filter-node-constructor"),ve=require("./factories/iir-filter-node-renderer-factory"),Ae=require("./factories/increment-cycle-counter-factory"),Se=require("./factories/index-size-error"),qe=require("./factories/invalid-access-error"),Ce=require("./factories/invalid-state-error"),me=require("./factories/is-any-audio-context"),ye=require("./factories/is-any-audio-node"),xe=require("./factories/is-any-audio-param"),he=require("./factories/is-any-offline-audio-context"),Ee=require("./factories/is-native-audio-context"),ge=require("./factories/is-native-audio-node"),Me=require("./factories/is-native-audio-param"),Oe=require("./factories/is-native-context"),ke=require("./factories/is-native-offline-audio-context"),Ie=require("./factories/is-secure-context"),Fe=require("./factories/is-supported-promise"),we=require("./factories/media-element-audio-source-node-constructor"),Pe=require("./factories/media-stream-audio-destination-node-constructor"),Te=require("./factories/media-stream-audio-source-node-constructor"),be=require("./factories/media-stream-track-audio-source-node-constructor"),We=require("./factories/minimal-audio-context-constructor"),Re=require("./factories/minimal-base-audio-context-constructor"),De=require("./factories/minimal-offline-audio-context-constructor"),Be=require("./factories/monitor-connections"),Ge=require("./factories/native-analyser-node-factory"),_e=require("./factories/native-audio-buffer-constructor"),ze=require("./factories/native-audio-buffer-source-node-factory"),Ue=require("./factories/native-audio-context-constructor"),Le=require("./factories/native-audio-destination-node"),Ve=require("./factories/native-audio-worklet-node-constructor"),je=require("./factories/native-audio-worklet-node-factory"),Xe=require("./factories/native-audio-worklet-node-faker-factory"),Ke=require("./factories/native-biquad-filter-node"),Ye=require("./factories/native-channel-merger-node-factory"),He=require("./factories/native-channel-splitter-node"),Je=require("./factories/native-constant-source-node-factory"),Qe=require("./factories/native-constant-source-node-faker-factory"),Ze=require("./factories/native-convolver-node-factory"),$e=require("./factories/native-delay-node"),er=require("./factories/native-dynamics-compressor-node-factory"),rr=require("./factories/native-gain-node"),tr=require("./factories/native-iir-filter-node-factory"),or=require("./factories/native-iir-filter-node-faker-factory"),ar=require("./factories/native-media-element-audio-source-node"),ir=require("./factories/native-media-stream-audio-destination-node"),nr=require("./factories/native-media-stream-audio-source-node"),cr=require("./factories/native-media-stream-track-audio-source-node-factory"),dr=require("./factories/native-offline-audio-context-constructor"),ur=require("./factories/native-oscillator-node-factory"),sr=require("./factories/native-panner-node-factory"),pr=require("./factories/native-panner-node-faker-factory"),fr=require("./factories/native-periodic-wave-factory"),lr=require("./factories/native-script-processor-node"),Nr=require("./factories/native-stereo-panner-node-factory"),vr=require("./factories/native-stereo-panner-node-faker-factory"),Ar=require("./factories/native-wave-shaper-node-factory"),Sr=require("./factories/native-wave-shaper-node-faker-factory"),qr=require("./factories/not-supported-error"),Cr=require("./factories/offline-audio-context-constructor"),mr=require("./factories/oscillator-node-constructor"),yr=require("./factories/oscillator-node-renderer-factory"),xr=require("./factories/panner-node-constructor"),hr=require("./factories/panner-node-renderer-factory"),Er=require("./factories/periodic-wave-constructor"),gr=require("./factories/render-automation"),Mr=require("./factories/render-inputs-of-audio-node"),Or=require("./factories/render-inputs-of-audio-param"),kr=require("./factories/render-native-offline-audio-context"),Ir=require("./factories/set-active-audio-worklet-node-inputs"),Fr=require("./factories/set-audio-node-tail-time"),wr=require("./factories/start-rendering"),Pr=require("./factories/stereo-panner-node-constructor"),Tr=require("./factories/stereo-panner-node-renderer-factory"),br=require("./factories/test-audio-buffer-constructor-support"),Wr=require("./factories/test-audio-buffer-copy-channel-methods-subarray-support"),Rr=require("./factories/test-audio-context-close-method-support"),Dr=require("./factories/test-audio-context-decode-audio-data-method-type-error-support"),Br=require("./factories/test-audio-context-options-support"),Gr=require("./factories/test-audio-node-connect-method-support"),_r=require("./factories/test-audio-worklet-processor-no-outputs-support"),zr=require("./factories/test-audio-worklet-processor-post-message-support"),Ur=require("./factories/test-channel-merger-node-channel-count-support"),Lr=require("./factories/test-constant-source-node-accurate-scheduling-support"),Vr=require("./factories/test-convolver-node-buffer-reassignability-support"),jr=require("./factories/test-convolver-node-channel-count-support"),Xr=require("./factories/test-is-secure-context-support"),Kr=require("./factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support"),Yr=require("./factories/test-offline-audio-context-current-time-support"),Hr=require("./factories/test-stereo-panner-node-default-value-support"),Jr=require("./factories/unknown-error"),Qr=require("./factories/wave-shaper-node-constructor"),Zr=require("./factories/wave-shaper-node-renderer-factory"),$r=require("./factories/window"),et=require("./factories/wrap-audio-buffer-copy-channel-methods"),rt=require("./factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds"),tt=require("./factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer"),ot=require("./factories/wrap-channel-merger-node"),at=require("./globals"),it=require("./helpers/connect-native-audio-node-to-native-audio-node"),nt=require("./helpers/disconnect-native-audio-node-from-native-audio-node"),ct=require("./helpers/get-audio-node-connections"),dt=require("./helpers/get-audio-param-connections"),ut=require("./helpers/get-event-listeners-of-audio-node"),st=require("./helpers/get-first-sample"),pt=require("./helpers/get-native-audio-node"),ft=require("./helpers/get-native-audio-param"),lt=require("./helpers/get-value-for-key"),Nt=require("./helpers/insert-element-in-set"),vt=require("./helpers/is-active-audio-node"),At=require("./helpers/is-dc-curve"),St=require("./helpers/is-part-of-a-cycle"),qt=require("./helpers/is-passive-audio-node"),Ct=require("./helpers/overwrite-accessors"),mt=require("./helpers/pick-element-from-set"),yt=require("./helpers/sanitize-audio-worklet-node-options"),xt=require("./helpers/sanitize-channel-splitter-options"),ht=require("./helpers/sanitize-periodic-wave-options"),Et=require("./helpers/set-value-at-time-until-possible"),gt=require("./helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support"),Mt=require("./helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support"),Ot=require("./helpers/test-audio-buffer-source-node-start-method-offset-clamping-support"),kt=require("./helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support"),It=require("./helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support"),Ft=require("./helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support"),wt=require("./helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support"),Pt=require("./helpers/test-audio-worklet-node-options-clonability"),Tt=require("./helpers/test-dom-exception-constructor-support"),bt=require("./helpers/test-promise-support"),Wt=require("./helpers/test-transferables-support"),Rt=require("./helpers/wrap-audio-buffer-source-node-start-method-offset-clamping"),Dt=require("./helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls"),Bt=require("./helpers/wrap-event-listener"),Gt=require("./interfaces/index");Object.keys(Gt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Gt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Gt[r]}}))});var _t=require("./types/index");Object.keys(_t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===_t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _t[r]}}))});const zt=(0,o.createAddActiveInputConnectionToAudioNode)(Nt.insertElementInSet),Ut=(0,d.createAddPassiveInputConnectionToAudioNode)(Nt.insertElementInSet),Lt=(0,K.createDeleteActiveInputConnectionToAudioNode)(mt.pickElementFromSet),Vt=new WeakMap,jt=(0,de.createGetAudioNodeTailTime)(Vt),Xt=(0,k.createCacheTestResult)(new Map,new WeakMap),Kt=(0,$r.createWindow)(),Yt=(0,Ge.createNativeAnalyserNodeFactory)(Xt,Se.createIndexSizeError),Ht=(0,ce.createGetAudioNodeRenderer)(ct.getAudioNodeConnections),Jt=(0,Mr.createRenderInputsOfAudioNode)(ct.getAudioNodeConnections,Ht,St.isPartOfACycle),Qt=(0,f.createAnalyserNodeRendererFactory)(Yt,pt.getNativeAudioNode,Jt),Zt=(0,pe.createGetNativeContext)(at.CONTEXT_STORE),$t=(0,dr.createNativeOfflineAudioContextConstructor)(Kt),eo=(0,ke.createIsNativeOfflineAudioContext)($t),ro=new WeakMap,to=(0,re.createEventTargetConstructor)(Bt.wrapEventListener),oo=(0,Ue.createNativeAudioContextConstructor)(Kt),ao=(0,Ee.createIsNativeAudioContext)(oo),io=(0,ge.createIsNativeAudioNode)(Kt),no=(0,Me.createIsNativeAudioParam)(Kt),co=(0,m.createAudioNodeConstructor)((0,a.createAddAudioNodeConnections)(at.AUDIO_NODE_CONNECTIONS_STORE),(0,c.createAddConnectionToAudioNode)(zt,Ut,it.connectNativeAudioNodeToNativeAudioNode,Lt,nt.disconnectNativeAudioNodeFromNativeAudioNode,ct.getAudioNodeConnections,jt,ut.getEventListenersOfAudioNode,pt.getNativeAudioNode,Nt.insertElementInSet,vt.isActiveAudioNode,St.isPartOfACycle,qt.isPassiveAudioNode),Xt,(0,Ae.createIncrementCycleCounterFactory)(at.CYCLE_COUNTERS,nt.disconnectNativeAudioNodeFromNativeAudioNode,ct.getAudioNodeConnections,pt.getNativeAudioNode,ft.getNativeAudioParam,vt.isActiveAudioNode),Se.createIndexSizeError,qe.createInvalidAccessError,qr.createNotSupportedError,(0,V.createDecrementCycleCounter)(it.connectNativeAudioNodeToNativeAudioNode,at.CYCLE_COUNTERS,ct.getAudioNodeConnections,pt.getNativeAudioNode,ft.getNativeAudioParam,Zt,vt.isActiveAudioNode,eo),(0,H.createDetectCycles)(ro,ct.getAudioNodeConnections,lt.getValueForKey),to,Zt,ao,io,no,eo),uo=(0,p.createAnalyserNodeConstructor)(co,Qt,Se.createIndexSizeError,Yt,Zt,eo);exports.AnalyserNode=uo;const so=new WeakSet,po=(0,_e.createNativeAudioBufferConstructor)(Kt),fo=(0,B.createConvertNumberToUnsignedLong)(new Uint32Array(1)),lo=(0,et.createWrapAudioBufferCopyChannelMethods)(fo,Se.createIndexSizeError),No=(0,rt.createWrapAudioBufferCopyChannelMethodsOutOfBounds)(fo),vo=(0,l.createAudioBufferConstructor)(so,Xt,qr.createNotSupportedError,po,$t,(0,br.createTestAudioBufferConstructorSupport)(po),lo,No);exports.AudioBuffer=vo;const Ao=(0,u.createAddSilentConnection)(rr.createNativeGainNode),So=(0,Or.createRenderInputsOfAudioParam)(Ht,dt.getAudioParamConnections,St.isPartOfACycle),qo=(0,T.createConnectAudioParam)(So),Co=(0,ze.createNativeAudioBufferSourceNodeFactory)(Ao,Xt,Mt.testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,Ot.testAudioBufferSourceNodeStartMethodOffsetClampingSupport,kt.testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,It.testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,Ft.testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,wt.testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,Rt.wrapAudioBufferSourceNodeStartMethodOffsetClamping,(0,tt.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer)(Ct.overwriteAccessors),Dt.wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),mo=(0,gr.createRenderAutomation)((0,ue.createGetAudioParamRenderer)(dt.getAudioParamConnections),So),yo=(0,v.createAudioBufferSourceNodeRendererFactory)(qo,Co,pt.getNativeAudioNode,mo,Jt),xo=(0,y.createAudioParamFactory)((0,i.createAddAudioParamConnections)(at.AUDIO_PARAM_CONNECTIONS_STORE),ro,at.AUDIO_PARAM_STORE,x.createAudioParamRenderer,r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,oo,Et.setValueAtTimeUntilPossible),ho=(0,N.createAudioBufferSourceNodeConstructor)(co,yo,xo,Ce.createInvalidStateError,Co,Zt,eo,Bt.wrapEventListener);exports.AudioBufferSourceNode=ho;const Eo=(0,S.createAudioDestinationNodeConstructor)(co,q.createAudioDestinationNodeRenderer,Se.createIndexSizeError,Ce.createInvalidStateError,(0,Le.createNativeAudioDestinationNodeFactory)(rr.createNativeGainNode,Ct.overwriteAccessors),Zt,eo,Jt),go=(0,O.createBiquadFilterNodeRendererFactory)(qo,Ke.createNativeBiquadFilterNode,pt.getNativeAudioNode,mo,Jt),Mo=(0,Fr.createSetAudioNodeTailTime)(Vt),Oo=(0,M.createBiquadFilterNodeConstructor)(co,xo,go,qe.createInvalidAccessError,Ke.createNativeBiquadFilterNode,Zt,eo,Mo);exports.BiquadFilterNode=Oo;const ko=(0,Be.createMonitorConnections)(Nt.insertElementInSet,io),Io=(0,ot.createWrapChannelMergerNode)(Ce.createInvalidStateError,ko),Fo=(0,Ye.createNativeChannelMergerNodeFactory)(oo,Io),wo=(0,F.createChannelMergerNodeRendererFactory)(Fo,pt.getNativeAudioNode,Jt),Po=(0,I.createChannelMergerNodeConstructor)(co,wo,Fo,Zt,eo);exports.ChannelMergerNode=Po;const To=(0,P.createChannelSplitterNodeRendererFactory)(He.createNativeChannelSplitterNode,pt.getNativeAudioNode,Jt),bo=(0,w.createChannelSplitterNodeConstructor)(co,To,He.createNativeChannelSplitterNode,Zt,eo,xt.sanitizeChannelSplitterOptions);exports.ChannelSplitterNode=bo;const Wo=(0,Qe.createNativeConstantSourceNodeFakerFactory)(Ao,Co,rr.createNativeGainNode,ko),Ro=(0,Je.createNativeConstantSourceNodeFactory)(Ao,Xt,Wo,It.testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,wt.testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),Do=(0,D.createConstantSourceNodeRendererFactory)(qo,Ro,pt.getNativeAudioNode,mo,Jt),Bo=(0,R.createConstantSourceNodeConstructor)(co,xo,Do,Ro,Zt,eo,Bt.wrapEventListener);exports.ConstantSourceNode=Bo;const Go=(0,Ze.createNativeConvolverNodeFactory)(qr.createNotSupportedError,Ct.overwriteAccessors),_o=(0,_.createConvolverNodeRendererFactory)(Go,pt.getNativeAudioNode,Jt),zo=(0,G.createConvolverNodeConstructor)(co,_o,Go,Zt,eo,Mo);exports.ConvolverNode=zo;const Uo=(0,X.createDelayNodeRendererFactory)(qo,$e.createNativeDelayNode,pt.getNativeAudioNode,mo,Jt),Lo=(0,j.createDelayNodeConstructor)(co,xo,Uo,$e.createNativeDelayNode,Zt,eo,Mo);exports.DelayNode=Lo;const Vo=(0,er.createNativeDynamicsCompressorNodeFactory)(qr.createNotSupportedError),jo=(0,Z.createDynamicsCompressorNodeRendererFactory)(qo,Vo,pt.getNativeAudioNode,mo,Jt),Xo=(0,Q.createDynamicsCompressorNodeConstructor)(co,xo,jo,Vo,qr.createNotSupportedError,Zt,eo,Mo);exports.DynamicsCompressorNode=Xo;const Ko=(0,ie.createGainNodeRendererFactory)(qo,rr.createNativeGainNode,pt.getNativeAudioNode,mo,Jt),Yo=(0,ae.createGainNodeConstructor)(co,xo,Ko,rr.createNativeGainNode,Zt,eo);exports.GainNode=Yo;const Ho=(0,or.createNativeIIRFilterNodeFakerFactory)(qe.createInvalidAccessError,Ce.createInvalidStateError,lr.createNativeScriptProcessorNode,qr.createNotSupportedError),Jo=(0,kr.createRenderNativeOfflineAudioContext)(Xt,rr.createNativeGainNode,lr.createNativeScriptProcessorNode,(0,Yr.createTestOfflineAudioContextCurrentTimeSupport)(rr.createNativeGainNode,$t)),Qo=(0,ve.createIIRFilterNodeRendererFactory)(Co,pt.getNativeAudioNode,$t,Jt,Jo),Zo=(0,tr.createNativeIIRFilterNodeFactory)(Ho),$o=(0,Ne.createIIRFilterNodeConstructor)(co,Zo,Qo,Zt,eo,Mo);exports.IIRFilterNode=$o;const ea=(0,C.createAudioListenerFactory)(xo,Fo,Ro,lr.createNativeScriptProcessorNode,qr.createNotSupportedError,st.getFirstSample,eo,Ct.overwriteAccessors),ra=new WeakMap,ta=(0,Re.createMinimalBaseAudioContextConstructor)(Eo,ea,to,eo,ra,Bt.wrapEventListener),oa=(0,ur.createNativeOscillatorNodeFactory)(Ao,Xt,It.testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,Ft.testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,wt.testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,Dt.wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),aa=(0,yr.createOscillatorNodeRendererFactory)(qo,oa,pt.getNativeAudioNode,mo,Jt),ia=(0,mr.createOscillatorNodeConstructor)(co,xo,oa,aa,Zt,eo,Bt.wrapEventListener);exports.OscillatorNode=ia;const na=(0,W.createConnectedNativeAudioBufferSourceNodeFactory)(Co),ca=(0,Sr.createNativeWaveShaperNodeFakerFactory)(na,Ce.createInvalidStateError,rr.createNativeGainNode,At.isDCCurve,ko),da=(0,Ar.createNativeWaveShaperNodeFactory)(na,Ce.createInvalidStateError,ca,At.isDCCurve,ko,oo,Ct.overwriteAccessors),ua=(0,pr.createNativePannerNodeFakerFactory)(it.connectNativeAudioNodeToNativeAudioNode,Ce.createInvalidStateError,Fo,rr.createNativeGainNode,lr.createNativeScriptProcessorNode,da,qr.createNotSupportedError,nt.disconnectNativeAudioNodeFromNativeAudioNode,st.getFirstSample,ko),sa=(0,sr.createNativePannerNodeFactory)(ua),pa=(0,hr.createPannerNodeRendererFactory)(qo,Fo,Ro,rr.createNativeGainNode,sa,pt.getNativeAudioNode,$t,mo,Jt,Jo),fa=(0,xr.createPannerNodeConstructor)(co,xo,sa,pa,Zt,eo,Mo);exports.PannerNode=fa;const la=(0,fr.createNativePeriodicWaveFactory)(Se.createIndexSizeError),Na=(0,Er.createPeriodicWaveConstructor)(la,Zt,new WeakSet,ht.sanitizePeriodicWaveOptions);exports.PeriodicWave=Na;const va=(0,vr.createNativeStereoPannerNodeFakerFactory)(Fo,He.createNativeChannelSplitterNode,rr.createNativeGainNode,da,qr.createNotSupportedError,ko),Aa=(0,Nr.createNativeStereoPannerNodeFactory)(va,qr.createNotSupportedError),Sa=(0,Tr.createStereoPannerNodeRendererFactory)(qo,Aa,pt.getNativeAudioNode,mo,Jt),qa=(0,Pr.createStereoPannerNodeConstructor)(co,xo,Aa,Sa,Zt,eo);exports.StereoPannerNode=qa;const Ca=(0,Zr.createWaveShaperNodeRendererFactory)(da,pt.getNativeAudioNode,Jt),ma=(0,Qr.createWaveShaperNodeConstructor)(co,Ce.createInvalidStateError,da,Ca,Zt,eo,Mo);exports.WaveShaperNode=ma;const ya=(0,Ie.createIsSecureContext)(Kt),xa=(0,te.createExposeCurrentFrameAndCurrentTime)(Kt),ha=new WeakMap,Ea=(0,fe.createGetOrCreateBackupOfflineAudioContext)(ha,$t),ga=(0,Ve.createNativeAudioWorkletNodeConstructor)(Kt),Ma=ya?(0,n.createAddAudioWorkletModule)(Xt,qr.createNotSupportedError,(0,ee.createEvaluateSource)(Kt),xa,(0,oe.createFetchSource)(t.createAbortError),Zt,Ea,eo,ga,new WeakMap,new WeakMap,(0,zr.createTestAudioWorkletProcessorPostMessageSupport)(ga,$t),Kt):void 0;exports.addAudioWorkletModule=Ma;const Oa=(0,Oe.createIsNativeContext)(ao,eo),ka=(0,L.createDecodeAudioData)(so,Xt,U.createDataCloneError,$.createEncodingError,new WeakSet,Zt,Oa,gt.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,bt.testPromiseSupport,lo,No);exports.decodeAudioData=ka;const Ia=(0,g.createBaseAudioContextConstructor)(Ma,uo,vo,ho,Oo,Po,bo,Bo,zo,ka,Lo,Xo,Yo,$o,ta,ia,fa,Na,qa,ma),Fa=(0,we.createMediaElementAudioSourceNodeConstructor)(co,ar.createNativeMediaElementAudioSourceNode,Zt,eo);exports.MediaElementAudioSourceNode=Fa;const wa=(0,Pe.createMediaStreamAudioDestinationNodeConstructor)(co,ir.createNativeMediaStreamAudioDestinationNode,Zt,eo);exports.MediaStreamAudioDestinationNode=wa;const Pa=(0,Te.createMediaStreamAudioSourceNodeConstructor)(co,nr.createNativeMediaStreamAudioSourceNode,Zt,eo);exports.MediaStreamAudioSourceNode=Pa;const Ta=(0,cr.createNativeMediaStreamTrackAudioSourceNodeFactory)(Ce.createInvalidStateError,eo),ba=(0,be.createMediaStreamTrackAudioSourceNodeConstructor)(co,Ta,Zt);exports.MediaStreamTrackAudioSourceNode=ba;const Wa=(0,A.createAudioContextConstructor)(Ia,Ce.createInvalidStateError,qr.createNotSupportedError,Jr.createUnknownError,Fa,wa,Pa,ba,oo);exports.AudioContext=Wa;const Ra=(0,le.createGetUnrenderedAudioWorkletNodes)(ra),Da=(0,s.createAddUnrenderedAudioWorkletNode)(Ra),Ba=(0,b.createConnectMultipleOutputs)(Se.createIndexSizeError),Ga=(0,Y.createDeleteUnrenderedAudioWorkletNode)(Ra),_a=(0,J.createDisconnectMultipleOutputs)(Se.createIndexSizeError),za=new WeakMap,Ua=(0,ne.createGetActiveAudioWorkletNodeInputs)(za,lt.getValueForKey),La=(0,Xe.createNativeAudioWorkletNodeFakerFactory)(Ba,Se.createIndexSizeError,Ce.createInvalidStateError,Fo,He.createNativeChannelSplitterNode,Ro,rr.createNativeGainNode,lr.createNativeScriptProcessorNode,qr.createNotSupportedError,_a,xa,Ua,ko),Va=(0,je.createNativeAudioWorkletNodeFactory)(Ce.createInvalidStateError,La,rr.createNativeGainNode,qr.createNotSupportedError,ko),ja=(0,E.createAudioWorkletNodeRendererFactory)(qo,Ba,Co,Fo,He.createNativeChannelSplitterNode,Ro,rr.createNativeGainNode,Ga,_a,xa,pt.getNativeAudioNode,ga,$t,mo,Jt,Jo),Xa=(0,se.createGetBackupOfflineAudioContext)(ha),Ka=(0,Ir.createSetActiveAudioWorkletNodeInputs)(za),Ya=ya?(0,h.createAudioWorkletNodeConstructor)(Da,co,xo,ja,Va,ct.getAudioNodeConnections,Xa,Zt,eo,ga,yt.sanitizeAudioWorkletNodeOptions,Ka,Pt.testAudioWorkletNodeOptionsClonability,Bt.wrapEventListener):void 0;exports.AudioWorkletNode=Ya;const Ha=(0,We.createMinimalAudioContextConstructor)(Ce.createInvalidStateError,qr.createNotSupportedError,Jr.createUnknownError,ta,oo);exports.MinimalAudioContext=Ha;const Ja=(0,z.createCreateNativeOfflineAudioContext)(qr.createNotSupportedError,$t),Qa=(0,wr.createStartRendering)(so,Xt,Ht,Ra,Jo,gt.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,lo,No),Za=(0,De.createMinimalOfflineAudioContextConstructor)(Xt,Ce.createInvalidStateError,Ja,ta,Qa);exports.MinimalOfflineAudioContext=Za;const $a=(0,Cr.createOfflineAudioContextConstructor)(Ia,Xt,Ce.createInvalidStateError,Ja,Qa);exports.OfflineAudioContext=$a;const ei=(0,me.createIsAnyAudioContext)(at.CONTEXT_STORE,ao);exports.isAnyAudioContext=ei;const ri=(0,ye.createIsAnyAudioNode)(at.AUDIO_NODE_STORE,io);exports.isAnyAudioNode=ri;const ti=(0,xe.createIsAnyAudioParam)(at.AUDIO_PARAM_STORE,no);exports.isAnyAudioParam=ti;const oi=(0,he.createIsAnyOfflineAudioContext)(at.CONTEXT_STORE,eo);exports.isAnyOfflineAudioContext=oi;const ai=()=>(0,Fe.createIsSupportedPromise)(Xt,(0,Wr.createTestAudioBufferCopyChannelMethodsSubarraySupport)($t),(0,Rr.createTestAudioContextCloseMethodSupport)(oo),(0,Dr.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport)($t),(0,Br.createTestAudioContextOptionsSupport)(oo),(0,Gr.createTestAudioNodeConnectMethodSupport)($t),(0,_r.createTestAudioWorkletProcessorNoOutputsSupport)(ga,$t),(0,Ur.createTestChannelMergerNodeChannelCountSupport)($t),(0,Lr.createTestConstantSourceNodeAccurateSchedulingSupport)($t),(0,Vr.createTestConvolverNodeBufferReassignabilitySupport)($t),(0,jr.createTestConvolverNodeChannelCountSupport)($t),Tt.testDomExceptionConstructorSupport,(0,Xr.createTestIsSecureContextSupport)(Kt),(0,Kr.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport)(oo),(0,Hr.createTestStereoPannerNodeDefaultValueSupport)($t),Wt.testTransferablesSupport);exports.isSupported=ai;
},{"automation-events":"HRmD","./factories/abort-error":"reNM","./factories/add-active-input-connection-to-audio-node":"iQEX","./factories/add-audio-node-connections":"wI6P","./factories/add-audio-param-connections":"YEH2","./factories/add-audio-worklet-module":"EhZ4","./factories/add-connection-to-audio-node":"rZkn","./factories/add-passive-input-connection-to-audio-node":"hh7k","./factories/add-silent-connection":"iZQe","./factories/add-unrendered-audio-worklet-node":"Nj5D","./factories/analyser-node-constructor":"A0tf","./factories/analyser-node-renderer-factory":"KjBg","./factories/audio-buffer-constructor":"buyp","./factories/audio-buffer-source-node-constructor":"Km0H","./factories/audio-buffer-source-node-renderer-factory":"LJKE","./factories/audio-context-constructor":"uohO","./factories/audio-destination-node-constructor":"sBQf","./factories/audio-destination-node-renderer-factory":"PiX5","./factories/audio-listener-factory":"n1MU","./factories/audio-node-constructor":"LRpc","./factories/audio-param-factory":"uw1T","./factories/audio-param-renderer":"WTdk","./factories/audio-worklet-node-constructor":"G2gP","./factories/audio-worklet-node-renderer-factory":"a0CB","./factories/base-audio-context-constructor":"DC3E","./factories/biquad-filter-node-constructor":"IlZU","./factories/biquad-filter-node-renderer-factory":"TP2p","./factories/cache-test-result":"RNrq","./factories/channel-merger-node-constructor":"Smlw","./factories/channel-merger-node-renderer-factory":"VPtQ","./factories/channel-splitter-node-constructor":"XmzV","./factories/channel-splitter-node-renderer-factory":"oD7U","./factories/connect-audio-param":"fkdS","./factories/connect-multiple-outputs":"VdxZ","./factories/connected-native-audio-buffer-source-node-factory":"A9R4","./factories/constant-source-node-constructor":"dOwk","./factories/constant-source-node-renderer-factory":"jUPV","./factories/convert-number-to-unsigned-long":"enMX","./factories/convolver-node-constructor":"nUIR","./factories/convolver-node-renderer-factory":"h55f","./factories/create-native-offline-audio-context":"zF9t","./factories/data-clone-error":"lgjM","./factories/decode-audio-data":"Ji8J","./factories/decrement-cycle-counter":"LxHQ","./factories/delay-node-constructor":"JbPv","./factories/delay-node-renderer-factory":"QPUv","./factories/delete-active-input-connection-to-audio-node":"USW7","./factories/delete-unrendered-audio-worklet-node":"YAbs","./factories/detect-cycles":"Jj65","./factories/disconnect-multiple-outputs":"Rc6A","./factories/dynamics-compressor-node-constructor":"q4Gu","./factories/dynamics-compressor-node-renderer-factory":"vFUI","./factories/encoding-error":"hG4B","./factories/evaluate-source":"n7Oi","./factories/event-target-constructor":"LnLl","./factories/expose-current-frame-and-current-time":"PdBp","./factories/fetch-source":"N4Qd","./factories/gain-node-constructor":"gcyU","./factories/gain-node-renderer-factory":"IYSC","./factories/get-active-audio-worklet-node-inputs":"zNYB","./factories/get-audio-node-renderer":"Pqq9","./factories/get-audio-node-tail-time":"WuDR","./factories/get-audio-param-renderer":"uN17","./factories/get-backup-offline-audio-context":"Rg3h","./factories/get-native-context":"yRy9","./factories/get-or-create-backup-offline-audio-context":"wgvZ","./factories/get-unrendered-audio-worklet-nodes":"UGOe","./factories/iir-filter-node-constructor":"VQbf","./factories/iir-filter-node-renderer-factory":"TNX6","./factories/increment-cycle-counter-factory":"R2UW","./factories/index-size-error":"i4K8","./factories/invalid-access-error":"wX6S","./factories/invalid-state-error":"GiNw","./factories/is-any-audio-context":"rNOI","./factories/is-any-audio-node":"jJG5","./factories/is-any-audio-param":"OFf9","./factories/is-any-offline-audio-context":"IJqy","./factories/is-native-audio-context":"SNw9","./factories/is-native-audio-node":"CddN","./factories/is-native-audio-param":"N1rR","./factories/is-native-context":"dkAp","./factories/is-native-offline-audio-context":"ifKA","./factories/is-secure-context":"gGv6","./factories/is-supported-promise":"A5pF","./factories/media-element-audio-source-node-constructor":"V7o7","./factories/media-stream-audio-destination-node-constructor":"deJZ","./factories/media-stream-audio-source-node-constructor":"SmI6","./factories/media-stream-track-audio-source-node-constructor":"gQYZ","./factories/minimal-audio-context-constructor":"xnjs","./factories/minimal-base-audio-context-constructor":"lloe","./factories/minimal-offline-audio-context-constructor":"YM8X","./factories/monitor-connections":"eRfd","./factories/native-analyser-node-factory":"mBw7","./factories/native-audio-buffer-constructor":"d9j6","./factories/native-audio-buffer-source-node-factory":"Qbft","./factories/native-audio-context-constructor":"Q4OH","./factories/native-audio-destination-node":"sJNH","./factories/native-audio-worklet-node-constructor":"bpDX","./factories/native-audio-worklet-node-factory":"Ehld","./factories/native-audio-worklet-node-faker-factory":"p5Cq","./factories/native-biquad-filter-node":"gfnq","./factories/native-channel-merger-node-factory":"H2dP","./factories/native-channel-splitter-node":"w9Al","./factories/native-constant-source-node-factory":"GZKF","./factories/native-constant-source-node-faker-factory":"kO5z","./factories/native-convolver-node-factory":"Ccu5","./factories/native-delay-node":"uYHx","./factories/native-dynamics-compressor-node-factory":"fmLa","./factories/native-gain-node":"y7Pv","./factories/native-iir-filter-node-factory":"QrfJ","./factories/native-iir-filter-node-faker-factory":"HRXb","./factories/native-media-element-audio-source-node":"sWVC","./factories/native-media-stream-audio-destination-node":"Uijq","./factories/native-media-stream-audio-source-node":"ob8K","./factories/native-media-stream-track-audio-source-node-factory":"GFXu","./factories/native-offline-audio-context-constructor":"wsyk","./factories/native-oscillator-node-factory":"lMEA","./factories/native-panner-node-factory":"Xhhv","./factories/native-panner-node-faker-factory":"uDRG","./factories/native-periodic-wave-factory":"gkaT","./factories/native-script-processor-node":"JMFg","./factories/native-stereo-panner-node-factory":"kCzr","./factories/native-stereo-panner-node-faker-factory":"jN7T","./factories/native-wave-shaper-node-factory":"e4Ej","./factories/native-wave-shaper-node-faker-factory":"Aomt","./factories/not-supported-error":"vcYJ","./factories/offline-audio-context-constructor":"yvfX","./factories/oscillator-node-constructor":"fISz","./factories/oscillator-node-renderer-factory":"k1sc","./factories/panner-node-constructor":"k2Yr","./factories/panner-node-renderer-factory":"N90f","./factories/periodic-wave-constructor":"mYbX","./factories/render-automation":"nS2H","./factories/render-inputs-of-audio-node":"Sovb","./factories/render-inputs-of-audio-param":"pqs8","./factories/render-native-offline-audio-context":"c6rh","./factories/set-active-audio-worklet-node-inputs":"QbQs","./factories/set-audio-node-tail-time":"ENoU","./factories/start-rendering":"vg4o","./factories/stereo-panner-node-constructor":"WDeR","./factories/stereo-panner-node-renderer-factory":"LUFU","./factories/test-audio-buffer-constructor-support":"aYvU","./factories/test-audio-buffer-copy-channel-methods-subarray-support":"ppWx","./factories/test-audio-context-close-method-support":"FkYz","./factories/test-audio-context-decode-audio-data-method-type-error-support":"AVi2","./factories/test-audio-context-options-support":"LwtG","./factories/test-audio-node-connect-method-support":"qYT0","./factories/test-audio-worklet-processor-no-outputs-support":"AIIB","./factories/test-audio-worklet-processor-post-message-support":"ek51","./factories/test-channel-merger-node-channel-count-support":"XVPl","./factories/test-constant-source-node-accurate-scheduling-support":"iJAC","./factories/test-convolver-node-buffer-reassignability-support":"jGkr","./factories/test-convolver-node-channel-count-support":"jcFE","./factories/test-is-secure-context-support":"pXM9","./factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support":"Ux6y","./factories/test-offline-audio-context-current-time-support":"gRWU","./factories/test-stereo-panner-node-default-value-support":"gjIR","./factories/unknown-error":"KJPZ","./factories/wave-shaper-node-constructor":"OHG9","./factories/wave-shaper-node-renderer-factory":"hMn1","./factories/window":"DTvh","./factories/wrap-audio-buffer-copy-channel-methods":"lMhD","./factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds":"TdHf","./factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer":"oOk7","./factories/wrap-channel-merger-node":"gHdr","./globals":"Q1Wz","./helpers/connect-native-audio-node-to-native-audio-node":"Odu0","./helpers/disconnect-native-audio-node-from-native-audio-node":"X8Ls","./helpers/get-audio-node-connections":"uvM4","./helpers/get-audio-param-connections":"pZqr","./helpers/get-event-listeners-of-audio-node":"BvJn","./helpers/get-first-sample":"bYIS","./helpers/get-native-audio-node":"fw3X","./helpers/get-native-audio-param":"NQ9T","./helpers/get-value-for-key":"ynZW","./helpers/insert-element-in-set":"oQJx","./helpers/is-active-audio-node":"Zs9Z","./helpers/is-dc-curve":"ZJIL","./helpers/is-part-of-a-cycle":"DJzs","./helpers/is-passive-audio-node":"Rbnn","./helpers/overwrite-accessors":"DS9z","./helpers/pick-element-from-set":"msoE","./helpers/sanitize-audio-worklet-node-options":"S2q7","./helpers/sanitize-channel-splitter-options":"gezG","./helpers/sanitize-periodic-wave-options":"wI3L","./helpers/set-value-at-time-until-possible":"ap4q","./helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support":"QcFX","./helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support":"GVYI","./helpers/test-audio-buffer-source-node-start-method-offset-clamping-support":"HeHB","./helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support":"hrve","./helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support":"pkcv","./helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support":"LmRf","./helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support":"h5NG","./helpers/test-audio-worklet-node-options-clonability":"sxNL","./helpers/test-dom-exception-constructor-support":"JMhK","./helpers/test-promise-support":"lX9q","./helpers/test-transferables-support":"rXEj","./helpers/wrap-audio-buffer-source-node-start-method-offset-clamping":"i6zM","./helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls":"STvl","./helpers/wrap-event-listener":"VYar","./interfaces/index":"hhFo","./types/index":"mRDb"}],"Udbo":[function(require,module,exports) {
"use strict";function t(t,e){if(!t)throw new Error(e)}function e(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function n(t){t.isOffline||"running"===t.state||i('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t,exports.assertRange=e,exports.assertContextRunning=n,exports.setLogger=r,exports.log=s,exports.warn=i;let o=console;function r(t){o=t}function s(...t){o.log(...t)}function i(...t){o.warn(...t)}
},{}],"h36b":[function(require,module,exports) {
"use strict";function t(t){return void 0===t}function e(e){return!t(e)}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function i(t){return"boolean"==typeof t}function s(t){return Array.isArray(t)}function u(t){return"string"==typeof t}function c(t){return u(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isUndef=t,exports.isDefined=e,exports.isFunction=r,exports.isNumber=n,exports.isObject=o,exports.isBoolean=i,exports.isArray=s,exports.isString=u,exports.isNote=c;
},{}],"uw8f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioContext=r,exports.createOfflineAudioContext=n,exports.createAudioWorkletNode=s,Object.defineProperty(exports,"supported",{enumerable:!0,get:function(){return e.isSupported}}),exports.hasAudioContext=exports.theWindow=void 0;var e=require("standardized-audio-context"),t=require("../util/Debug"),o=require("../util/TypeCheck");function r(t){return new e.AudioContext(t)}function n(t,o,r){return new e.OfflineAudioContext(t,o,r)}const i="object"==typeof self?self:null;exports.theWindow=i;const u=i&&(i.hasOwnProperty("AudioContext")||i.hasOwnProperty("webkitAudioContext"));function s(r,n,i){return(0,t.assert)((0,o.isDefined)(e.AudioWorkletNode),"This node only works in a secure context (https or localhost)"),new e.AudioWorkletNode(r,n,i)}exports.hasAudioContext=u;
},{"standardized-audio-context":"io7r","../util/Debug":"Udbo","../util/TypeCheck":"h36b"}],"CvJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=h,exports.__spreadArray=d,exports.__await=_,exports.__asyncGenerator=v,exports.__asyncDelegator=b,exports.__asyncValues=w,exports.__makeTemplateObject=x,exports.__importStar=O,exports.__importDefault=g,exports.__classPrivateFieldGet=j,exports.__classPrivateFieldSet=P,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function h(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function d(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var m=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return m(e,t),e}function g(t){return t&&t.__esModule?t:{default:t}}function j(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function P(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r}
},{}],"q9HE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ticker=void 0;class t{constructor(t,e,i){this._callback=t,this._type=e,this._updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}exports.Ticker=t;
},{}],"bf37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioParam=i,exports.isAudioNode=o,exports.isOfflineAudioContext=t,exports.isAudioContext=n,exports.isAudioBuffer=r;var e=require("standardized-audio-context");function i(i){return(0,e.isAnyAudioParam)(i)}function o(i){return(0,e.isAnyAudioNode)(i)}function t(i){return(0,e.isAnyOfflineAudioContext)(i)}function n(i){return(0,e.isAnyAudioContext)(i)}function r(e){return e instanceof AudioBuffer}
},{"standardized-audio-context":"io7r"}],"yCwZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepMerge=n,exports.deepEquals=s,exports.optionsFromArguments=i,exports.getDefaultsFromInstance=o,exports.defaultArg=c,exports.omitFromObject=u;var e=require("./AdvancedTypeCheck"),t=require("./TypeCheck");function r(t,r){return"value"===t||(0,e.isAudioParam)(r)||(0,e.isAudioNode)(r)||(0,e.isAudioBuffer)(r)}function n(e,...s){if(!s.length)return e;const i=s.shift();if((0,t.isObject)(e)&&(0,t.isObject)(i))for(const o in i)r(o,i[o])?e[o]=i[o]:(0,t.isObject)(i[o])?(e[o]||Object.assign(e,{[o]:{}}),n(e[o],i[o])):Object.assign(e,{[o]:i[o]});return n(e,...s)}function s(e,t){return e.length===t.length&&e.every((e,r)=>t[r]===e)}function i(e,r,s=[],i){const o={},c=Array.from(r);if((0,t.isObject)(c[0])&&i&&!Reflect.has(c[0],i)){Object.keys(c[0]).some(t=>Reflect.has(e,t))||(n(o,{[i]:c[0]}),s.splice(s.indexOf(i),1),c.shift())}if(1===c.length&&(0,t.isObject)(c[0]))n(o,c[0]);else for(let n=0;n<s.length;n++)(0,t.isDefined)(c[n])&&(o[s[n]]=c[n]);return n(e,o)}function o(e){return e.constructor.getDefaults()}function c(e,r){return(0,t.isUndef)(e)?r:e}function u(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}
},{"./AdvancedTypeCheck":"bf37","./TypeCheck":"h36b"}],"rW89":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tone=void 0;var e=require("../version"),t=require("./context/AudioContext"),s=require("./util/Debug");class i{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||t.theWindow&&this.toString()===t.theWindow.TONE_DEBUG_CLASS)&&(0,s.log)(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}exports.Tone=i,i.version=e.version;
},{"../version":"j5m7","./context/AudioContext":"uw8f","./util/Debug":"Udbo"}],"BX2C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GT=e,exports.GTE=r,exports.LT=n,exports.EQ=o,exports.clamp=u;const t=1e-6;function e(e,r){return e>r+t}function r(t,r){return e(t,r)||o(t,r)}function n(e,r){return e+t<r}function o(e,r){return Math.abs(e-r)<t}function u(t,e,r){return Math.max(Math.min(t,r),e)}
},{}],"jK7K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timeline=void 0;var e=require("../Tone"),t=require("./Defaults"),i=require("./Debug"),s=require("./Math");class n extends e.Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const e=(0,t.optionsFromArguments)(n.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if((0,i.assert)(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];(0,i.assert)((0,s.GTE)(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e,t="time"){const i=this._search(e,t);return-1!==i?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const i=this._search(e,t);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if((0,s.EQ)(this._timeline[t].time,e)){for(let i=t;i>=0&&(0,s.EQ)(this._timeline[i].time,e);i--)t=i;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&(0,s.GTE)(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(0===this._timeline.length)return-1;let i=0;const n=this._timeline.length;let h=n;if(n>0&&this._timeline[n-1][t]<=e)return n-1;for(;i<h;){let n=Math.floor(i+(h-i)/2);const r=this._timeline[n],l=this._timeline[n+1];if((0,s.EQ)(r[t],e)){for(let i=n;i<this._timeline.length;i++){const h=this._timeline[i];if(!(0,s.EQ)(h[t],e))break;n=i}return n}if((0,s.LT)(r[t],e)&&(0,s.GT)(l[t],e))return n;(0,s.GT)(r[t],e)?h=n:i=n+1}return-1}_iterate(e,t=0,i=this._timeline.length-1){this._timeline.slice(t,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const i=this._search(e);return-1!==i&&this._iterate(t,0,i),this}forEachAfter(e,t){const i=this._search(e);return this._iterate(t,i+1),this}forEachBetween(e,t,i){let s=this._search(e),n=this._search(t);return-1!==s&&-1!==n?(this._timeline[s].time!==e&&(s+=1),this._timeline[n].time===t&&(n-=1),this._iterate(i,s,n)):-1===s&&this._iterate(i,0,n),this}forEachFrom(e,t){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(t,i+1),this}forEachAtTime(e,t){const i=this._search(e);if(-1!==i&&(0,s.EQ)(this._timeline[i].time,e)){let n=i;for(let t=i;t>=0&&(0,s.EQ)(this._timeline[t].time,e);t--)n=t;this._iterate(e=>{t(e)},n,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}exports.Timeline=n;
},{"../Tone":"rW89","./Defaults":"yCwZ","./Debug":"Udbo","./Math":"BX2C"}],"ziki":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onContextInit=o,exports.initializeContext=e,exports.onContextClose=s,exports.closeContext=c;const t=[];function o(o){t.push(o)}function e(o){t.forEach(t=>t(o))}const n=[];function s(t){n.push(t)}function c(t){n.forEach(o=>o(t))}
},{}],"cYpA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Emitter=void 0;var e=require("../Tone"),t=require("./TypeCheck");class s extends e.Tone{constructor(){super(...arguments),this.name="Emitter"}on(e,s){return e.split(/\W+/).forEach(e=>{(0,t.isUndef)(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(s)}),this}once(e,t){const s=(...i)=>{t(...i),this.off(e,s)};return this.on(e,s),this}off(e,s){return e.split(/\W+/).forEach(i=>{if((0,t.isUndef)(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if((0,t.isUndef)(s))this._events[e]=[];else{const t=this._events[e];for(let e=t.length-1;e>=0;e--)t[e]===s&&t.splice(e,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let e=0,i=s.length;e<i;e++)s[e].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const i=Object.getOwnPropertyDescriptor(s.prototype,t);Object.defineProperty(e.prototype,t,i)})}dispose(){return super.dispose(),this._events=void 0,this}}exports.Emitter=s;
},{"../Tone":"rW89","./TypeCheck":"h36b"}],"FYHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseContext=void 0;var e=require("../util/Emitter");class t extends e.Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}exports.BaseContext=t;
},{"../util/Emitter":"cYpA"}],"q0ZO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Context=void 0;var t=require("tslib"),e=require("../clock/Ticker"),i=require("../util/AdvancedTypeCheck"),r=require("../util/Defaults"),n=require("../util/Timeline"),s=require("../util/TypeCheck"),a=require("./AudioContext"),o=require("./ContextInitialization"),c=require("./BaseContext"),u=require("../util/Debug");class h extends c.BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new n.Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=(0,r.optionsFromArguments)(h.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=(0,a.createAudioContext)({latencyHint:t.latencyHint}),this._ticker=new e.Ticker(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=(()=>{this.emit("statechange",this.state)}),this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||((0,o.initializeContext)(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return(0,u.assert)((0,i.isAudioContext)(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return(0,u.assert)((0,i.isAudioContext)(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return(0,u.assert)((0,i.isAudioContext)(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){(0,u.assert)(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){(0,u.assert)(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){(0,u.assert)(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){(0,u.assert)(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return(0,a.createAudioWorkletNode)(this.rawContext,t,e)}addAudioWorkletModule(e,i){return(0,t.__awaiter)(this,void 0,void 0,function*(){(0,u.assert)((0,s.isDefined)(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(i)||this._workletModules.set(i,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(i)})}workletsAreReady(){return(0,t.__awaiter)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,(0,s.isString)(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return(0,i.isAudioContext)(this._context)?this._context.resume():Promise.resolve()}close(){return(0,t.__awaiter)(this,void 0,void 0,function*(){(0,i.isAudioContext)(this._context)&&(yield this._context.close()),this._initialized&&(0,o.closeContext)(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let n=0;n<i.length;n++)i[n]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,r=()=>{const n=this.now();this._timeouts.add({callback:()=>{t(),r()},id:i,time:n+e})};return r(),i}}exports.Context=h;
},{"tslib":"CvJj","../clock/Ticker":"q9HE","../util/AdvancedTypeCheck":"bf37","../util/Defaults":"yCwZ","../util/Timeline":"jK7K","../util/TypeCheck":"h36b","./AudioContext":"uw8f","./ContextInitialization":"ziki","./BaseContext":"FYHp","../util/Debug":"Udbo"}],"CXnc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DummyContext=void 0;var e=require("tslib"),r=require("./BaseContext");class t extends r.BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,r,t){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,r){return{}}createPanner(){return{}}createPeriodicWave(e,r,t){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,r){return{}}get rawContext(){return{}}addAudioWorkletModule(r,t){return(0,e.__awaiter)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,r){return 0}clearTimeout(e){return this}setInterval(e,r){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}exports.DummyContext=t;
},{"tslib":"CvJj","./BaseContext":"FYHp"}],"FB0z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readOnly=r,exports.writable=t,exports.noOp=void 0;var e=require("./TypeCheck");function r(t,o){(0,e.isArray)(o)?o.forEach(e=>r(t,e)):Object.defineProperty(t,o,{enumerable:!0,writable:!1})}function t(r,o){(0,e.isArray)(o)?o.forEach(e=>t(r,e)):Object.defineProperty(r,o,{writable:!0})}const o=()=>{};exports.noOp=o;
},{"./TypeCheck":"h36b"}],"fM2M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioBuffer=void 0;var e=require("tslib"),t=require("../Global"),r=require("../Tone"),s=require("../util/AdvancedTypeCheck"),n=require("../util/Defaults"),o=require("../util/Interface"),i=require("../util/TypeCheck"),a=require("../util/Debug");class l extends r.Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=o.noOp;const e=(0,n.optionsFromArguments)(l.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&(0,s.isAudioBuffer)(e.url)||e.url instanceof l?this.set(e.url):(0,i.isString)(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:o.noOp,onload:o.noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:(0,t.getContext)().sampleRate}set(e){return e instanceof l?e.loaded?this._buffer=e.get():e.onload=(()=>{this.set(e),this.onload(this)}):this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=l.load(t).then(e=>{this.set(e),this.onload(this)});l.downloads.push(e);try{yield e}finally{const t=l.downloads.indexOf(e);l.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const r=(0,i.isArray)(e)&&e[0].length>0,s=r?e.length:1,n=r?e[0].length:e.length,o=(0,t.getContext)(),a=o.createBuffer(s,n,o.sampleRate),l=r||1!==s?e:[e];for(let t=0;t<s;t++)a.copyToChannel(l[t],t);return this._buffer=a,this}toMono(e){if((0,i.isNumber)(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let r=0;r<t;r++){const t=this.toArray(r);for(let r=0;r<t.length;r++)e[r]+=t[r]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if((0,i.isNumber)(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,r=this.duration){const s=Math.floor(e*this.sampleRate),n=Math.floor(r*this.sampleRate);(0,a.assert)(s<n,"The start time must be less than the end time");const o=n-s,i=(0,t.getContext)().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)i.copyToChannel(this.getChannelData(t).subarray(s,n),t);return new l(i)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new l).fromArray(e)}static fromUrl(t){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=new l;return yield e.load(t)})}static load(r){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=r.match(/\[([^\]\[]+\|.+)\]$/);if(e){const t=e[1].split("|");let s=t[0];for(const e of t)if(l.supportsType(e)){s=e;break}r=r.replace(e[0],s)}const s=""===l.baseUrl||l.baseUrl.endsWith("/")?l.baseUrl:l.baseUrl+"/",n=yield fetch(s+r);if(!n.ok)throw new Error(`could not load url: ${r}`);const o=yield n.arrayBuffer();return yield(0,t.getContext)().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+r)}static loaded(){return(0,e.__awaiter)(this,void 0,void 0,function*(){for(yield Promise.resolve();l.downloads.length;)yield l.downloads[0]})}}exports.ToneAudioBuffer=l,l.baseUrl="",l.downloads=[];
},{"tslib":"CvJj","../Global":"omdq","../Tone":"rW89","../util/AdvancedTypeCheck":"bf37","../util/Defaults":"yCwZ","../util/Interface":"FB0z","../util/TypeCheck":"h36b","../util/Debug":"Udbo"}],"t6al":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OfflineContext=void 0;var e=require("tslib"),t=require("../context/AudioContext"),i=require("../context/Context"),r=require("../util/AdvancedTypeCheck"),n=require("./ToneAudioBuffer");class o extends i.Context{constructor(){super({clockSource:"offline",context:(0,r.isOfflineAudioContext)(arguments[0])?arguments[0]:(0,t.createOfflineAudioContext)(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:(0,r.isOfflineAudioContext)(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=(0,r.isOfflineAudioContext)(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,e.__awaiter)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i==0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(t=!0){return(0,e.__awaiter)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new n.ToneAudioBuffer(e)})}close(){return Promise.resolve()}}exports.OfflineContext=o;
},{"tslib":"CvJj","../context/AudioContext":"uw8f","../context/Context":"q0ZO","../util/AdvancedTypeCheck":"bf37","./ToneAudioBuffer":"fM2M"}],"omdq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=s,exports.setContext=c,exports.start=C;var e=require("../version"),t=require("./context/AudioContext"),n=require("./context/Context"),o=require("./context/DummyContext"),r=require("./context/OfflineContext"),i=require("./util/AdvancedTypeCheck");const u=new o.DummyContext;let x=u;function s(){return x===u&&t.hasAudioContext&&c(new n.Context),x}function c(e){x=(0,i.isAudioContext)(e)?new n.Context(e):(0,i.isOfflineAudioContext)(e)?new r.OfflineContext(e):e}function C(){return x.resume()}if(t.theWindow&&!t.theWindow.TONE_SILENCE_LOGGING){let t="v";"dev"===e.version&&(t="");const n=` * Tone.js ${t}${e.version} * `;console.log(`%c${n}`,"background: #000; color: #fff")}
},{"../version":"j5m7","./context/AudioContext":"uw8f","./context/Context":"q0ZO","./context/DummyContext":"CXnc","./context/OfflineContext":"t6al","./util/AdvancedTypeCheck":"bf37"}],"obhM":[function(require,module,exports) {
"use strict";function t(t){const o=.5*Math.PI;return Math.sin(t*o)}function o(t){return Math.pow(10,t/20)}function e(t){return Math.log(t)/Math.LN10*20}function n(t){return Math.pow(2,t/12)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalPowerScale=t,exports.dbToGain=o,exports.gainToDb=e,exports.intervalToFrequencyRatio=n,exports.getA4=u,exports.setA4=a,exports.ftom=i,exports.ftomf=s,exports.mtof=c;let r=440;function u(){return r}function a(t){r=t}function i(t){return Math.round(s(t))}function s(t){return 69+12*Math.log2(t/r)}function c(t){return r*Math.pow(2,(t-69)/12)}
},{}],"Oz1J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimeBaseClass=void 0;var t=require("../Tone"),s=require("../util/TypeCheck");class e extends t.Tone{constructor(t,s,e){super(),this.defaultUnits="s",this._val=s,this._units=e,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,s)=>{const e=parseInt(t,10),i="."===s?1.5:1;return 1===e?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/e)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const s=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(s)))},regexp:/^(\d+)t$/i},tr:{method:(t,s,e)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),s&&"0"!==s&&(i+=this._beatsToUnits(parseFloat(s))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof e&&this.fromType(this._val),(0,s.isUndef)(this._val))return this._noArg();if((0,s.isString)(this._val)&&(0,s.isUndef)(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if((0,s.isObject)(this._val)){let t=0;for(const e in this._val)if((0,s.isDefined)(this._val[e])){const s=this._val[e];t+=new this.constructor(this.context,e).valueOf()*s}return t}if((0,s.isDefined)(this._units)){const t=this._expressions[this._units],s=this._val.toString().trim().match(t.regexp);return s?t.method.apply(this,s.slice(1)):t.method.call(this,this._val)}return(0,s.isString)(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}exports.TimeBaseClass=e;
},{"../Tone":"rW89","../util/TypeCheck":"h36b"}],"rZbv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Time=n,exports.TimeClass=void 0;var t=require("../Global"),e=require("./Conversions"),s=require("./TimeBase");class o extends s.TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new o(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/s)*s-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let o=1;o<9;o++){const t=Math.pow(2,o);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let s=e[0],n=new o(this.context,e[0]).toSeconds();return e.forEach(e=>{const r=new o(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(n-t)&&(s=e,n=r)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const n=o.toString();return n.length>3&&(o=parseFloat(parseFloat(n).toFixed(3))),[s,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return(0,e.ftom)(this.toFrequency())}_now(){return this.context.now()}}function n(e,s){return new o((0,t.getContext)(),e,s)}exports.TimeClass=o;
},{"../Global":"omdq","./Conversions":"obhM","./TimeBase":"Oz1J"}],"rvND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frequency=i,exports.FrequencyClass=void 0;var t=require("../Global"),e=require("./Conversions"),s=require("./Time");class r extends s.TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return(0,e.getA4)()}static set A4(t){(0,e.setA4)(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:r.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const s=n[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?s:r.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new r(this.context,this.valueOf()*(0,e.intervalToFrequencyRatio)(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return(0,e.ftom)(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/r.A4);let s=Math.round(12*e)+57;const n=Math.floor(s/12);return n<0&&(s+=-12*n),o[s%12]+n.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return(0,e.mtof)(t)}static ftom(t){return(0,e.ftom)(t)}}exports.FrequencyClass=r;const n={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function i(e,s){return new r((0,t.getContext)(),e,s)}
},{"../Global":"omdq","./Conversions":"obhM","./Time":"rZbv"}],"SI88":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportTime=t,exports.TransportTimeClass=void 0;var e=require("../Global"),r=require("./Time");class s extends r.TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function t(r,t){return new s((0,e.getContext)(),r,t)}exports.TransportTimeClass=s;
},{"../Global":"omdq","./Time":"rZbv"}],"WXkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneWithContext=void 0;var e=require("../Global"),t=require("../Tone"),s=require("../type/Frequency"),i=require("../type/Time"),r=require("../type/TransportTime"),n=require("../util/Defaults"),o=require("../util/TypeCheck");class c extends t.Tone{constructor(){super();const e=(0,n.optionsFromArguments)(c.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:(0,e.getContext)()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new i.TimeClass(this.context,e).toSeconds()}toFrequency(e){return new s.FrequencyClass(this.context,e).toFrequency()}toTicks(e){return new r.TransportTimeClass(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{(0,o.isUndef)(e[s])&&delete t[s]}),t}get(){const e=(0,n.getDefaultsFromInstance)(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];(0,o.isDefined)(s)&&(0,o.isDefined)(s.value)&&(0,o.isDefined)(s.setValueAtTime)?e[t]=s.value:s instanceof c?e[t]=s._getPartialProperties(e[t]):(0,o.isArray)(s)||(0,o.isNumber)(s)||(0,o.isString)(s)||(0,o.isBoolean)(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&(0,o.isDefined)(this[t])&&(this[t]&&(0,o.isDefined)(this[t].value)&&(0,o.isDefined)(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof c?this[t].set(e[t]):this[t]=e[t])}),this}}exports.ToneWithContext=c;
},{"../Global":"omdq","../Tone":"rW89","../type/Frequency":"rvND","../type/Time":"rZbv","../type/TransportTime":"SI88","../util/Defaults":"yCwZ","../util/TypeCheck":"h36b"}],"JZoQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateTimeline=void 0;var t=require("./Timeline"),e=require("./Debug");class i extends t.Timeline{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,i,s){return(0,e.assertRange)(i,0),this.add(Object.assign({},s,{state:t,time:i})),this}getLastState(t,e){for(let i=this._search(e);i>=0;i--){const e=this._timeline[i];if(e.state===t)return e}}getNextState(t,e){const i=this._search(e);if(-1!==i)for(let s=i;s<this._timeline.length;s++){const e=this._timeline[s];if(e.state===t)return e}}}exports.StateTimeline=i;
},{"./Timeline":"jK7K","./Debug":"Udbo"}],"LwOA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Param=void 0;var t=require("../type/Conversions"),e=require("../util/AdvancedTypeCheck"),i=require("../util/Defaults"),s=require("../util/Timeline"),a=require("../util/TypeCheck"),n=require("./ToneWithContext"),r=require("../util/Math"),l=require("../util/Debug");class u extends n.ToneWithContext{constructor(){super((0,i.optionsFromArguments)(u.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=(0,i.optionsFromArguments)(u.getDefaults(),arguments,["param","units","convert"]);for((0,l.assert)((0,a.isDefined)(t.param)&&((0,e.isAudioParam)(t.param)||t.param instanceof u),"param must be an AudioParam");!(0,e.isAudioParam)(t.param);)t.param=t.param._param;this._swappable=!!(0,a.isDefined)(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new s.Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,(0,a.isDefined)(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(n.ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return(0,a.isDefined)(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return(0,a.isDefined)(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return(0,a.isDefined)(this.maxValue)&&(0,a.isDefined)(this.minValue)&&(0,l.assertRange)(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?(0,t.dbToGain)(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?(0,t.gainToDb)(e):e}setValueAtTime(t,e){const i=this.toSeconds(e),s=this._fromType(t);return(0,l.assert)(isFinite(s)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),s=this._events.get(e);let a=this._initialValue;if(null===s)a=this._initialValue;else if("setTargetAtTime"!==s.type||null!==i&&"setValueAtTime"!==i.type)if(null===i)a=s.value;else if("linearRampToValueAtTime"===i.type||"exponentialRampToValueAtTime"===i.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}a="linearRampToValueAtTime"===i.type?this._linearInterpolate(s.time,t,i.time,i.value,e):this._exponentialInterpolate(s.time,t,i.time,i.value,e)}else a=s.value;else{const t=this._events.getBefore(s.time);let i;i=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(a=this._exponentialApproach(s.time,i,s.value,s.constant,e))}return this._toType(a)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),s=this.toSeconds(e);return(0,l.assert)(isFinite(i)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:s,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(i,s),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=(0,r.EQ)(i,0)?this._minOutput:i,this._assertRange(i);const s=this.toSeconds(e);return(0,l.assert)(isFinite(i)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(i,s),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const s=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const s=this._fromType(t);(0,l.assert)(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(e);return this._assertRange(s),(0,l.assert)(isFinite(s)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:a,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,a,i),this._param.setTargetAtTime(s,a,i),this}setValueCurveAtTime(t,e,i,s=1){i=this.toSeconds(i),e=this.toSeconds(e);const a=this._fromType(t[0])*s;this.setValueAtTime(this._toType(a),e);const n=i/(t.length-1);for(let r=1;r<t.length;r++){const i=this._fromType(t[r])*s;this.linearRampToValueAtTime(this._toType(i),e+r*n)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return(0,l.assert)(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));(0,l.assert)(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const s=this._events.get(e),a=this._events.getAfter(e);return s&&(0,r.EQ)(s.time,e)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),"linearRampToValueAtTime"===a.type?this.linearRampToValueAtTime(this._toType(i),e):"exponentialRampToValueAtTime"===a.type&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&"setTargetAtTime"===i.type){const s=this._events.getAfter(i.time),a=s?s.time:e+2,n=(a-e)/10;for(let i=e;i<a;i+=n)t.linearRampToValueAtTime(this.getValueAtTime(i),i)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){(0,l.assert)(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,s,a){return i+(e-i)*Math.exp(-(a-t)/s)}_linearInterpolate(t,e,i,s,a){return e+(a-t)/(i-t)*(s-e)}_exponentialInterpolate(t,e,i,s,a){return e*Math.pow(s/e,(a-t)/(i-t))}}exports.Param=u;
},{"../type/Conversions":"obhM","../util/AdvancedTypeCheck":"bf37","../util/Defaults":"yCwZ","../util/Timeline":"jK7K","../util/TypeCheck":"h36b","./ToneWithContext":"WXkP","../util/Math":"BX2C","../util/Debug":"Udbo"}],"aL0a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectSeries=u,exports.connect=r,exports.disconnect=a,exports.ToneAudioNode=void 0;var t=require("../util/AdvancedTypeCheck"),n=require("../util/TypeCheck"),e=require("./Param"),i=require("./ToneWithContext"),o=require("../util/Debug");class s extends i.ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return(0,n.isDefined)(this.input)?(0,t.isAudioParam)(this.input)||this.input instanceof e.Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return(0,n.isDefined)(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return(0,n.isDefined)(e)&&(e instanceof s||(0,t.isAudioNode)(e))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(n=>{n.channelCount=t.channelCount,n.channelCountMode=t.channelCountMode,n.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();(0,o.assert)(t.length>0,"ToneAudioNode does not have any internal nodes");const n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))}connect(t,n=0,e=0){return r(this,t,n,e),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return(0,o.warn)("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,n=0,e=0){return a(this,t,n,e),this}chain(...t){return u(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),(0,n.isDefined)(this.input)&&(this.input instanceof s?this.input.dispose():(0,t.isAudioNode)(this.input)&&this.input.disconnect()),(0,n.isDefined)(this.output)&&(this.output instanceof s?this.output.dispose():(0,t.isAudioNode)(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function u(...n){const e=n.shift();n.reduce((n,e)=>(n instanceof s?n.connect(e):(0,t.isAudioNode)(n)&&r(n,e),e),e)}function r(i,u,r=0,a=0){for((0,o.assert)((0,n.isDefined)(i),"Cannot connect from undefined node"),(0,o.assert)((0,n.isDefined)(u),"Cannot connect to undefined node"),(u instanceof s||(0,t.isAudioNode)(u))&&(0,o.assert)(u.numberOfInputs>0,"Cannot connect to node with no inputs"),(0,o.assert)(i.numberOfOutputs>0,"Cannot connect from node with no outputs");u instanceof s||u instanceof e.Param;)(0,n.isDefined)(u.input)&&(u=u.input);for(;i instanceof s;)(0,n.isDefined)(i.output)&&(i=i.output);(0,t.isAudioParam)(u)?i.connect(u,r):i.connect(u,r,a)}function a(e,i,o=0,u=0){if((0,n.isDefined)(i))for(;i instanceof s;)i=i.input;for(;!(0,t.isAudioNode)(e);)(0,n.isDefined)(e.output)&&(e=e.output);(0,t.isAudioParam)(i)?e.disconnect(i,o):(0,t.isAudioNode)(i)?e.disconnect(i,o,u):e.disconnect()}exports.ToneAudioNode=s;
},{"../util/AdvancedTypeCheck":"bf37","../util/TypeCheck":"h36b","./Param":"LwOA","./ToneWithContext":"WXkP","../util/Debug":"Udbo"}],"zza1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gain=void 0;var e=require("../context/Param"),t=require("../util/Defaults"),i=require("../util/Interface"),n=require("./ToneAudioNode");class s extends n.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(s.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const n=(0,t.optionsFromArguments)(s.getDefaults(),arguments,["gain","units"]);this.gain=new e.Param({context:this.context,convert:n.convert,param:this._gainNode.gain,units:n.units,value:n.gain,minValue:n.minValue,maxValue:n.maxValue}),(0,i.readOnly)(this,"gain")}static getDefaults(){return Object.assign(n.ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}exports.Gain=s;
},{"../context/Param":"LwOA","../util/Defaults":"yCwZ","../util/Interface":"FB0z","./ToneAudioNode":"aL0a"}],"acYB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneShotSource=void 0;var t=require("../core/context/Gain"),e=require("../core/context/ToneAudioNode"),i=require("../core/util/Interface"),s=require("../core/util/Debug");class o extends e.ToneAudioNode{constructor(e){super(e),this.onended=i.noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new t.Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:i.noOp})}_startGain(t,e=1){(0,s.assert)(-1===this._startTime,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){(0,s.assert)(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==i.noOp&&(this.onended(this),this.onended=i.noOp,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),(0,s.assert)(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}exports.OneShotSource=o;
},{"../core/context/Gain":"zza1","../core/context/ToneAudioNode":"aL0a","../core/util/Interface":"FB0z","../core/util/Debug":"Udbo"}],"KVPf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneConstantSource=void 0;var t=require("../core/context/ToneAudioNode"),e=require("../core/context/Param"),s=require("../core/util/Defaults"),o=require("../source/OneShotSource");class r extends o.OneShotSource{constructor(){super((0,s.optionsFromArguments)(r.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const o=(0,s.optionsFromArguments)(r.getDefaults(),arguments,["offset"]);(0,t.connect)(this._source,this._gainNode),this.offset=new e.Param({context:this.context,convert:o.convert,param:this._source.offset,units:o.units,value:o.offset,minValue:o.minValue,maxValue:o.maxValue})}static getDefaults(){return Object.assign(o.OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}exports.ToneConstantSource=r;
},{"../core/context/ToneAudioNode":"aL0a","../core/context/Param":"LwOA","../core/util/Defaults":"yCwZ","../source/OneShotSource":"acYB"}],"JkWs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectSignal=s,exports.Signal=void 0;var e=require("../core/context/Param"),t=require("../core/context/ToneAudioNode"),a=require("../core/util/AdvancedTypeCheck"),r=require("../core/util/Defaults"),i=require("./ToneConstantSource");class n extends t.ToneAudioNode{constructor(){super((0,r.optionsFromArguments)(n.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new i.ToneConstantSource({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,a=0){return s(this,e,t,a),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,a){return this._param.exponentialRampTo(e,t,a),this}linearRampTo(e,t,a){return this._param.linearRampTo(e,t,a),this}targetRampTo(e,t,a){return this._param.targetRampTo(e,t,a),this}exponentialApproachValueAtTime(e,t,a){return this._param.exponentialApproachValueAtTime(e,t,a),this}setTargetAtTime(e,t,a){return this._param.setTargetAtTime(e,t,a),this}setValueCurveAtTime(e,t,a,r){return this._param.setValueCurveAtTime(e,t,a,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,a){return this._param.rampTo(e,t,a),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function s(r,i,s,u){(i instanceof e.Param||(0,a.isAudioParam)(i)||i instanceof n&&i.override)&&(i.cancelScheduledValues(0),i.setValueAtTime(0,0),i instanceof n&&(i.overridden=!0)),(0,t.connect)(r,i,s,u)}exports.Signal=n;
},{"../core/context/Param":"LwOA","../core/context/ToneAudioNode":"aL0a","../core/util/AdvancedTypeCheck":"bf37","../core/util/Defaults":"yCwZ","./ToneConstantSource":"KVPf"}],"OhPv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickParam=void 0;var t=require("../context/Param"),e=require("../util/Defaults"),i=require("../util/Timeline"),s=require("../util/TypeCheck");class n extends t.Param{constructor(){super((0,e.optionsFromArguments)(n.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new i.Timeline(1/0),this._multiplier=1;const t=(0,e.optionsFromArguments)(n.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(t.Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),n=this._events.get(e),r=Math.round(Math.max(1/i,1));for(let u=0;u<=r;u++){const t=i*u+e,r=this._exponentialApproach(n.time,n.value,s,i,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(i),n=this._events.previousEvent(s),r=this._getTicksUntilEvent(n,i);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(i),n=this._events.previousEvent(s),r=this._getTicksUntilEvent(n,i);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),s=this._events.get(e),n=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/n;for(let u=0;u<=n;u++){const t=r*u+s.time,n=this._exponentialInterpolate(s.time,s.value,e,i,t);this.linearRampToValueAtTime(this._toType(n),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if((0,s.isUndef)(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let n=this._fromType(this.getValueAtTime(e));const r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(n=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+n)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&"linearRampToValueAtTime"===i.type&&e.value!==i.value){const s=this._fromType(this.getValueAtTime(e.time)),n=(this._fromType(this.getValueAtTime(i.time))-s)/(i.time-e.time),r=Math.sqrt(Math.pow(s,2)-2*n*(e.ticks-t)),u=(-s+r)/n,a=(-s-r)/n;return(u>0?u:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),s=this.toSeconds(t),n=this.getTicksAtTime(i);return this.getTicksAtTime(i+s)-n}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}exports.TickParam=n;
},{"../context/Param":"LwOA","../util/Defaults":"yCwZ","../util/Timeline":"jK7K","../util/TypeCheck":"h36b"}],"nfKZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickSignal=void 0;var t=require("../../signal/Signal"),e=require("../util/Defaults"),i=require("./TickParam");class r extends t.Signal{constructor(){super((0,e.optionsFromArguments)(r.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=(0,e.optionsFromArguments)(r.getDefaults(),arguments,["value"]);this.input=this._param=new i.TickParam({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(t.Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}exports.TickSignal=r;
},{"../../signal/Signal":"JkWs","../util/Defaults":"yCwZ","./TickParam":"OhPv"}],"BtLb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickSource=void 0;var t=require("../context/ToneWithContext"),e=require("../util/Defaults"),s=require("../util/Interface"),i=require("../util/StateTimeline"),c=require("../util/Timeline"),a=require("../util/TypeCheck"),n=require("./TickSignal"),r=require("../util/Math");class h extends t.ToneWithContext{constructor(){super((0,e.optionsFromArguments)(h.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new i.StateTimeline,this._tickOffset=new c.Timeline;const t=(0,e.optionsFromArguments)(h.getDefaults(),arguments,["frequency"]);this.frequency=new n.TickSignal({context:this.context,units:t.units,value:t.frequency}),(0,s.readOnly)(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},t.ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),(0,a.isDefined)(e)&&this.setTicksAtTime(e,s)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);let c=s,a=0;return this._state.forEachBetween(s.time,e+this.sampleTime,t=>{let e=c.time;const s=this._tickOffset.get(t.time);s&&s.time>=c.time&&(a=s.ticks,e=s.time),"started"===c.state&&"started"!==t.state&&(a+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),c=t}),this._state.remove(i),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let i=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,t=>{let e=i.time;const s=this._tickOffset.get(t.time);s&&s.time>=i.time&&(c=s.seconds,e=s.time),"started"===i.state&&"started"!==t.state&&(c+=t.time-e),i=t}),this._state.remove(s),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),i=this._state.get(e),c=Math.max(s.time,i.time),a=this.frequency.getTicksAtTime(c)+t-s.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(t,e,s){let i=this._state.get(t);this._state.forEachBetween(t,e,e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,s),i=e});let c=null;if(i&&"started"===i.state){const n=Math.max(i.time,t),h=this.frequency.getTicksAtTime(n),o=h-this.frequency.getTicksAtTime(i.time);let u=Math.ceil(o)-o;u=(0,r.EQ)(u,1)?0:u;let m=this.frequency.getTimeOfTick(h+u);for(;m<e;){try{s(m,Math.round(this.getTicksAtTime(m)))}catch(a){c=a;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}exports.TickSource=h;
},{"../context/ToneWithContext":"WXkP","../util/Defaults":"yCwZ","../util/Interface":"FB0z","../util/StateTimeline":"JZoQ","../util/Timeline":"jK7K","../util/TypeCheck":"h36b","./TickSignal":"nfKZ","../util/Math":"BX2C"}],"aCQS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Clock=void 0;var t=require("../context/ToneWithContext"),e=require("../util/Defaults"),s=require("../util/Emitter"),i=require("../util/Interface"),c=require("../util/StateTimeline"),o=require("./TickSource"),r=require("../util/Debug");class a extends t.ToneWithContext{constructor(){super((0,e.optionsFromArguments)(a.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=i.noOp,this._lastUpdate=0,this._state=new c.StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const t=(0,e.optionsFromArguments)(a.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new o.TickSource({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,(0,i.readOnly)(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(t.ToneWithContext.getDefaults(),{callback:i.noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){(0,r.assertContextRunning)(this.context);const s=this.toSeconds(t);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}exports.Clock=a,s.Emitter.mixin(a);
},{"../context/ToneWithContext":"WXkP","../util/Defaults":"yCwZ","../util/Emitter":"cYpA","../util/Interface":"FB0z","../util/StateTimeline":"JZoQ","./TickSource":"BtLb","../util/Debug":"Udbo"}],"QhTE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Delay=void 0;var e=require("../context/Param"),t=require("../util/Defaults"),a=require("../util/Interface"),s=require("./ToneAudioNode");class i extends s.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const s=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","maxDelay"]),o=this.toSeconds(s.maxDelay);this._maxDelay=Math.max(o,this.toSeconds(s.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(o),this.delayTime=new e.Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:s.delayTime,minValue:0,maxValue:this.maxDelay}),(0,a.readOnly)(this,"delayTime")}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}exports.Delay=i;
},{"../context/Param":"LwOA","../util/Defaults":"yCwZ","../util/Interface":"FB0z","./ToneAudioNode":"aL0a"}],"dJSC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Offline=o;var e=require("tslib"),t=require("../Global"),n=require("./OfflineContext"),r=require("./ToneAudioBuffer");function o(o,i,u=2,f=(0,t.getContext)().sampleRate){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=(0,t.getContext)(),s=new n.OfflineContext(u,i,f);(0,t.setContext)(s),yield o(s);const l=s.render();(0,t.setContext)(e);const d=yield l;return new r.ToneAudioBuffer(d)})}
},{"tslib":"CvJj","../Global":"omdq","./OfflineContext":"t6al","./ToneAudioBuffer":"fM2M"}],"K3lE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioBuffers=void 0;var e=require("../Tone"),r=require("../util/Defaults"),s=require("../util/Interface"),t=require("../util/TypeCheck"),o=require("./ToneAudioBuffer"),u=require("../util/Debug");class i extends e.Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=(0,r.optionsFromArguments)(i.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(r=>{this._loadingCount++;const s=e.urls[r];this.add(r,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:s.noOp,onload:s.noOp,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return(0,u.assert)(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,r])=>r.loaded)}add(e,r,u=s.noOp,i=s.noOp){return(0,t.isString)(r)?this._buffers.set(e.toString(),new o.ToneAudioBuffer(this.baseUrl+r,u,i)):this._buffers.set(e.toString(),new o.ToneAudioBuffer(r,u,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}exports.ToneAudioBuffers=i;
},{"../Tone":"rW89","../util/Defaults":"yCwZ","../util/Interface":"FB0z","../util/TypeCheck":"h36b","./ToneAudioBuffer":"fM2M","../util/Debug":"Udbo"}],"VVIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Midi=i,exports.MidiClass=void 0;var e=require("../Global"),t=require("./Conversions"),s=require("./Frequency");class r extends s.FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return(0,t.ftom)(super._frequencyToUnits(e))}_ticksToUnits(e){return(0,t.ftom)(super._ticksToUnits(e))}_beatsToUnits(e){return(0,t.ftom)(super._beatsToUnits(e))}_secondsToUnits(e){return(0,t.ftom)(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return(0,t.mtof)(this.toMidi())}transpose(e){return new r(this.context,this.toMidi()+e)}}function i(t,s){return new r((0,e.getContext)(),t,s)}exports.MidiClass=r;
},{"../Global":"omdq","./Conversions":"obhM","./Frequency":"rvND"}],"fIIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ticks=r,exports.TicksClass=void 0;var t=require("../Global"),s=require("./TransportTime");class e extends s.TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function r(s,r){return new e((0,t.getContext)(),s,r)}exports.TicksClass=e;
},{"../Global":"omdq","./TransportTime":"SI88"}],"bJE3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Draw=void 0;var t=require("../context/ToneWithContext"),e=require("./Timeline"),i=require("../context/ContextInitialization");class n extends t.ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new e.Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}exports.Draw=n,(0,i.onContextInit)(t=>{t.draw=new n({context:t})}),(0,i.onContextClose)(t=>{t.draw.dispose()});
},{"../context/ToneWithContext":"WXkP","./Timeline":"jK7K","../context/ContextInitialization":"ziki"}],"TP2S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntervalTimeline=void 0;var t=require("../Tone"),e=require("./TypeCheck"),i=require("./Debug");class h extends t.Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){(0,i.assert)((0,e.isDefined)(t.time),"Events must have a time property"),(0,i.assert)((0,e.isDefined)(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let h=new l(t.time,t.time+t.duration,t);for(null===this._root?this._root=h:this._root.insert(h),this._length++;null!==h;)h.updateHeight(),h.updateMax(),this._rebalance(h),h=h.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,i=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),h=t.right;h&&(t.right=h.left,h.left=t),null!==e?i?e.left=h:e.right=h:this._setRoot(h)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),h=t.left;h&&(t.left=h.right,h.right=t),null!==e?i?e.left=h:e.right=h:this._setRoot(h)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let i=1;i<e.length;i++)e[i].low>t.low&&(t=e[i]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const i=[];this._root.search(t,i),i.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){const i=[];this._root.searchAfter(t,i),i.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}exports.IntervalTimeline=h;class l{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}
},{"../Tone":"rW89","./TypeCheck":"h36b","./Debug":"Udbo"}],"fGtF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./NoteUnits");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in exports&&exports[t]===e[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}}))});
},{"./NoteUnits":"brg8"}],"gGy8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={dbToGain:!0,gainToDb:!0,intervalToFrequencyRatio:!0,ftom:!0,mtof:!0,optionsFromArguments:!0,defaultArg:!0,Unit:!0,debug:!0};Object.defineProperty(exports,"dbToGain",{enumerable:!0,get:function(){return g.dbToGain}}),Object.defineProperty(exports,"gainToDb",{enumerable:!0,get:function(){return g.gainToDb}}),Object.defineProperty(exports,"intervalToFrequencyRatio",{enumerable:!0,get:function(){return g.intervalToFrequencyRatio}}),Object.defineProperty(exports,"ftom",{enumerable:!0,get:function(){return g.ftom}}),Object.defineProperty(exports,"mtof",{enumerable:!0,get:function(){return g.mtof}}),Object.defineProperty(exports,"optionsFromArguments",{enumerable:!0,get:function(){return h.optionsFromArguments}}),Object.defineProperty(exports,"defaultArg",{enumerable:!0,get:function(){return h.defaultArg}}),exports.debug=exports.Unit=void 0;var t=require("./clock/Clock");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./context/Context");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("./context/BaseContext");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("./context/Delay");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("./context/Gain");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var c=require("./context/Offline");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===c[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var p=require("./context/OfflineContext");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===p[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var i=require("./context/Param");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===i[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var a=require("./context/ToneAudioBuffer");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var s=require("./context/ToneAudioBuffers");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===s[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var f=require("./context/ToneAudioNode");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===f[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var l=require("./type/Frequency");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===l[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var b=require("./type/Midi");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===b[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var y=require("./type/Time");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===y[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return y[t]}}))});var O=require("./type/Ticks");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===O[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var d=require("./type/TransportTime");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===d[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))}),require("./util/Draw");var x=require("./util/Emitter");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===x[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var j=require("./util/IntervalTimeline");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===j[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var P=require("./util/StateTimeline");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===P[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var m=require("./util/Timeline");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===m[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return m[t]}}))});var _=require("./util/TypeCheck");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===_[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var g=require("./type/Conversions"),h=require("./util/Defaults"),v=w(require("./type/Units"));exports.Unit=v;var q=w(require("./util/Debug"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=n?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}exports.debug=q;
},{"./clock/Clock":"aCQS","./context/Context":"q0ZO","./context/BaseContext":"FYHp","./context/Delay":"QhTE","./context/Gain":"zza1","./context/Offline":"dJSC","./context/OfflineContext":"t6al","./context/Param":"LwOA","./context/ToneAudioBuffer":"fM2M","./context/ToneAudioBuffers":"K3lE","./context/ToneAudioNode":"aL0a","./type/Frequency":"rvND","./type/Midi":"VVIA","./type/Time":"rZbv","./type/Ticks":"fIIf","./type/TransportTime":"SI88","./util/Draw":"bJE3","./util/Emitter":"cYpA","./util/IntervalTimeline":"TP2S","./util/StateTimeline":"JZoQ","./util/Timeline":"jK7K","./util/TypeCheck":"h36b","./type/Conversions":"obhM","./util/Defaults":"yCwZ","./type/Units":"fGtF","./util/Debug":"Udbo"}],"xqtY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Volume=void 0;var e=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),u=require("../../core/util/Defaults"),o=require("../../core/util/Interface");class s extends t.ToneAudioNode{constructor(){super((0,u.optionsFromArguments)(s.getDefaults(),arguments,["volume"])),this.name="Volume";const t=(0,u.optionsFromArguments)(s.getDefaults(),arguments,["volume"]);this.input=this.output=new e.Gain({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,(0,o.readOnly)(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}exports.Volume=s;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z"}],"ouZV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Destination=void 0;var t=require("../../component/channel/Volume"),e=require("../util/Defaults"),n=require("./ContextInitialization"),i=require("./Gain"),s=require("./ToneAudioNode");class o extends s.ToneAudioNode{constructor(){super((0,e.optionsFromArguments)(o.getDefaults(),arguments)),this.name="Destination",this.input=new t.Volume({context:this.context}),this.output=new i.Gain({context:this.context}),this.volume=this.input.volume;const n=(0,e.optionsFromArguments)(o.getDefaults(),arguments);(0,s.connectSeries)(this.input,this.output,this.context.rawContext.destination),this.mute=n.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),(0,s.connectSeries)(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}exports.Destination=o,(0,n.onContextInit)(t=>{t.destination=new o({context:t})}),(0,n.onContextClose)(t=>{t.destination.dispose()});
},{"../../component/channel/Volume":"xqtY","../util/Defaults":"yCwZ","./ContextInitialization":"ziki","./Gain":"zza1","./ToneAudioNode":"aL0a"}],"q9TA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimelineValue=void 0;var e=require("./Timeline"),i=require("../Tone");class t extends i.Tone{constructor(i){super(),this.name="TimelineValue",this._timeline=new e.Timeline({memory:10}),this._initialValue=i}set(e,i){return this._timeline.add({value:e,time:i}),this}get(e){const i=this._timeline.get(e);return i?i.value:this._initialValue}}exports.TimelineValue=t;
},{"./Timeline":"jK7K","../Tone":"rW89"}],"HYOZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportEvent=void 0;var t=require("../util/Interface");class e{constructor(t,s){this.id=e._eventId++;const i=Object.assign(e.getDefaults(),s);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=i.time}static getDefaults(){return{callback:t.noOp,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}exports.TransportEvent=e,e._eventId=0;
},{"../util/Interface":"FB0z"}],"lAg6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportRepeatEvent=void 0;var t=require("../type/Ticks"),s=require("./TransportEvent");class e extends s.TransportEvent{constructor(s,i){super(s,i),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(e.getDefaults(),i);this.duration=new t.TicksClass(s.context,n.duration).valueOf(),this._interval=new t.TicksClass(s.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},s.TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(s){const e=this.transport.getTicksAtTime(s);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new t.TicksClass(this.context,this._nextTick).toSeconds()))}_restart(s){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(s);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new t.TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new t.TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}exports.TransportRepeatEvent=e;
},{"../type/Ticks":"fIIf","./TransportEvent":"HYOZ"}],"h949":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transport=void 0;var t=require("../../core/type/Time"),e=require("../../core/util/TimelineValue"),i=require("../context/ContextInitialization"),s=require("../context/Gain"),n=require("../context/ToneWithContext"),o=require("../type/Ticks"),r=require("../type/TransportTime"),c=require("../util/Defaults"),h=require("../util/Emitter"),l=require("../util/Interface"),a=require("../util/IntervalTimeline"),u=require("../util/Timeline"),p=require("../util/TypeCheck"),_=require("./Clock"),m=require("./TransportEvent"),T=require("./TransportRepeatEvent");class d extends n.ToneWithContext{constructor(){super((0,c.optionsFromArguments)(d.getDefaults(),arguments)),this.name="Transport",this._loop=new e.TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new u.Timeline,this._repeatedEvents=new a.IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const t=(0,c.optionsFromArguments)(d.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new _.Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),(0,l.readOnly)(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(n.ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const i=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(i*Math.PI)*this._swingAmount;t+=new o.TicksClass(this.context,2*this._swingTicks/3).toSeconds()*s}this._timeline.forEachAtTime(e,e=>e.invoke(t))}schedule(t,e){const i=new m.TransportEvent(this,{callback:t,time:new r.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,i,s,n=1/0){const o=new T.TransportRepeatEvent(this,{callback:e,duration:new t.TimeClass(this.context,n).toTicks(),interval:new t.TimeClass(this.context,i).toTicks(),time:new r.TransportTimeClass(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(t,e){const i=new m.TransportEvent(this,{callback:t,once:!0,time:new r.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new o.TicksClass(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let i;return(0,p.isDefined)(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){(0,p.isArray)(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new t.TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new t.TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new o.TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new o.TicksClass(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const i=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),i=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){if(!e){const i=this.now();if(0!==t.getValueAtTime(i)){const s=1/(60/this.bpm.getValueAtTime(i)/this.PPQ);e=t.getValueAtTime(i)/s}else e=0}const i=new s.Gain(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),(0,l.writable)(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}exports.Transport=d,h.Emitter.mixin(d),(0,i.onContextInit)(t=>{t.transport=new d({context:t})}),(0,i.onContextClose)(t=>{t.transport.dispose()});
},{"../../core/type/Time":"rZbv","../../core/util/TimelineValue":"q9TA","../context/ContextInitialization":"ziki","../context/Gain":"zza1","../context/ToneWithContext":"WXkP","../type/Ticks":"fIIf","../type/TransportTime":"SI88","../util/Defaults":"yCwZ","../util/Emitter":"cYpA","../util/Interface":"FB0z","../util/IntervalTimeline":"TP2S","../util/Timeline":"jK7K","../util/TypeCheck":"h36b","./Clock":"aCQS","./TransportEvent":"HYOZ","./TransportRepeatEvent":"lAg6"}],"c2sY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Source=void 0;var t=require("../component/channel/Volume");require("../core/context/Destination"),require("../core/clock/Transport");var e=require("../core/context/ToneAudioNode"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),o=require("../core/util/StateTimeline"),n=require("../core/util/TypeCheck"),r=require("../core/util/Debug"),h=require("../core/util/Math");class a extends e.ToneAudioNode{constructor(e){super(e),this.input=void 0,this._state=new o.StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=i.noOp,this._syncedStop=i.noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new t.Volume({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,(0,i.readOnly)(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{mute:!1,onstop:i.noOp,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let o=(0,n.isUndef)(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const t=this._state.get(o);t&&(t.offset=this.toSeconds((0,s.defaultArg)(e,0)),t.duration=i?this.toSeconds(i):void 0);const n=this.context.transport.schedule(t=>{this._start(t,e,i)},o);this._scheduled.push(n),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else(0,r.assertContextRunning)(this.context),this._start(o,e,i);else(0,r.assert)((0,h.GT)(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,i);return this}stop(t){let e=(0,n.isUndef)(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||(0,n.isDefined)(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=((t,e)=>{if(e>0){const s=this._state.get(e);if(s&&"started"===s.state&&s.time!==e){const i=e-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-i),this._start(t,this.toSeconds(s.offset)+i,o)}}}),this._syncedStop=(t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)}),this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=i.noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}exports.Source=a;
},{"../component/channel/Volume":"xqtY","../core/context/Destination":"ouZV","../core/clock/Transport":"h949","../core/context/ToneAudioNode":"aL0a","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../core/util/StateTimeline":"JZoQ","../core/util/TypeCheck":"h36b","../core/util/Debug":"Udbo","../core/util/Math":"BX2C"}],"B9Sq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneBufferSource=void 0;var t=require("../../core/context/ToneAudioNode"),e=require("../../core/context/Param"),o=require("../../core/context/ToneAudioBuffer"),s=require("../../core/util/Defaults"),r=require("../../core/util/Interface"),i=require("../../core/util/TypeCheck"),u=require("../../core/util/Debug"),n=require("../OneShotSource"),c=require("../../core/util/Math");class h extends n.OneShotSource{constructor(){super((0,s.optionsFromArguments)(h.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const r=(0,s.optionsFromArguments)(h.getDefaults(),arguments,["url","onload"]);(0,t.connect)(this._source,this._gainNode),this._source.onended=(()=>this._stopSource()),this.playbackRate=new e.Param({context:this.context,param:this._source.playbackRate,units:"positive",value:r.playbackRate}),this.loop=r.loop,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this._buffer=new o.ToneAudioBuffer(r.url,r.onload,r.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(n.OneShotSource.getDefaults(),{url:new o.ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:r.noOp,onerror:r.noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,o,r=1){(0,u.assert)(this.buffer.loaded,"buffer is either not set or not loaded");const n=this.toSeconds(t);this._startGain(n,r),e=this.loop?(0,s.defaultArg)(e,this.loopStart):(0,s.defaultArg)(e,0);let h=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),o=t-e;(0,c.GTE)(h,t)&&(h=(h-e)%o+e),(0,c.EQ)(h,this.buffer.duration)&&(h=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,(0,c.LT)(h,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(n,h)),(0,i.isDefined)(o)){let t=this.toSeconds(o);t=Math.max(t,0),this.stop(n+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}exports.ToneBufferSource=h;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/context/Param":"LwOA","../../core/context/ToneAudioBuffer":"fM2M","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/util/TypeCheck":"h36b","../../core/util/Debug":"Udbo","../OneShotSource":"acYB","../../core/util/Math":"BX2C"}],"sH37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Noise=void 0;var t=require("../core/context/ToneAudioBuffer"),e=require("../core/util/Defaults"),s=require("../core/util/Debug"),r=require("../source/Source"),o=require("./buffer/ToneBufferSource");class a extends r.Source{constructor(){super((0,e.optionsFromArguments)(a.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=(0,e.optionsFromArguments)(a.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(r.Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if((0,s.assert)(t in c,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=c[this._type];this._source=new o.ToneBufferSource({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}exports.Noise=a;const i=220500,n=2,u={brown:null,pink:null,white:null},c={get brown(){if(!u.brown){const e=[];for(let t=0;t<2;t++){const s=new Float32Array(220500);e[t]=s;let r=0;for(let t=0;t<220500;t++){const e=2*Math.random()-1;s[t]=(r+.02*e)/1.02,r=s[t],s[t]*=3.5}}u.brown=(new t.ToneAudioBuffer).fromArray(e)}return u.brown},get pink(){if(!u.pink){const e=[];for(let t=0;t<2;t++){const s=new Float32Array(220500);let r,o,a,i,n,u,c;e[t]=s,r=o=a=i=n=u=c=0;for(let t=0;t<220500;t++){const e=2*Math.random()-1;r=.99886*r+.0555179*e,o=.99332*o+.0750759*e,a=.969*a+.153852*e,i=.8665*i+.3104856*e,n=.55*n+.5329522*e,u=-.7616*u-.016898*e,s[t]=r+o+a+i+n+u+c+.5362*e,s[t]*=.11,c=.115926*e}}u.pink=(new t.ToneAudioBuffer).fromArray(e)}return u.pink},get white(){if(!u.white){const e=[];for(let t=0;t<2;t++){const s=new Float32Array(220500);e[t]=s;for(let t=0;t<220500;t++)s[t]=2*Math.random()-1}u.white=(new t.ToneAudioBuffer).fromArray(e)}return u.white}};
},{"../core/context/ToneAudioBuffer":"fM2M","../core/util/Defaults":"yCwZ","../core/util/Debug":"Udbo","../source/Source":"c2sY","./buffer/ToneBufferSource":"B9Sq"}],"YvID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserMedia=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioNode"),i=require("../component/channel/Volume"),s=require("../core/util/Defaults"),o=require("../core/util/Debug"),r=require("../core/util/Interface"),u=require("../core/util/TypeCheck");class d extends t.ToneAudioNode{constructor(){super((0,s.optionsFromArguments)(d.getDefaults(),arguments,["volume"])),this.name="UserMedia";const e=(0,s.optionsFromArguments)(d.getDefaults(),arguments,["volume"]);this._volume=this.output=new i.Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,(0,r.readOnly)(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(i){return(0,e.__awaiter)(this,void 0,void 0,function*(){(0,o.assert)(d.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield d.enumerateDevices();(0,u.isNumber)(i)?this._device=e[i]:(this._device=e.find(e=>e.label===i||e.deviceId===i),!this._device&&e.length>0&&(this._device=e[0]),(0,o.assert)((0,u.isDefined)(this._device),`No matching device ${i}`));const s={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(s.audio.deviceId=this._device.deviceId);const r=yield navigator.mediaDevices.getUserMedia(s);if(!this._stream){this._stream=r;const e=this.context.createMediaStreamSource(r);(0,t.connect)(e,this.output),this._mediaStream=e}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return(0,e.__awaiter)(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind)})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return(0,u.isDefined)(navigator.mediaDevices)&&(0,u.isDefined)(navigator.mediaDevices.getUserMedia)}}exports.UserMedia=d;
},{"tslib":"CvJj","../core/context/ToneAudioNode":"aL0a","../component/channel/Volume":"xqtY","../core/util/Defaults":"yCwZ","../core/util/Debug":"Udbo","../core/util/Interface":"FB0z","../core/util/TypeCheck":"h36b"}],"eVjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateWaveform=n;var e=require("tslib"),t=require("../../core/context/OfflineContext");function n(n,r){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=r/n.context.sampleRate,o=new t.OfflineContext(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:o})).toDestination().start(0),(yield o.render()).getChannelData(0)})}
},{"tslib":"CvJj","../../core/context/OfflineContext":"t6al"}],"DgcC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneOscillatorNode=void 0;var t=require("../../core/context/ToneAudioNode"),e=require("../../core/context/Param"),s=require("../../core/util/Defaults"),o=require("../OneShotSource"),r=require("../../core/util/Interface");class i extends o.OneShotSource{constructor(){super((0,s.optionsFromArguments)(i.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const o=(0,s.optionsFromArguments)(i.getDefaults(),arguments,["frequency","type"]);(0,t.connect)(this._oscillator,this._gainNode),this.type=o.type,this.frequency=new e.Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:o.frequency}),this.detune=new e.Param({context:this.context,param:this._oscillator.detune,units:"cents",value:o.detune}),(0,r.readOnly)(this,["frequency","detune"])}static getDefaults(){return Object.assign(o.OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}exports.ToneOscillatorNode=i;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/context/Param":"LwOA","../../core/util/Defaults":"yCwZ","../OneShotSource":"acYB","../../core/util/Interface":"FB0z"}],"chjT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Oscillator=void 0;var t=require("tslib"),e=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),i=require("../../core/util/TypeCheck"),a=require("../../signal/Signal"),r=require("../Source"),o=require("./OscillatorInterface"),n=require("./ToneOscillatorNode"),h=require("../../core/util/Debug"),l=require("../../core/util/Math");class c extends r.Source{constructor(){super((0,e.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=(0,e.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type"]);this.frequency=new a.Signal({context:this.context,units:"frequency",value:t.frequency}),(0,s.readOnly)(this,"frequency"),this.detune=new a.Signal({context:this.context,units:"cents",value:t.detune}),(0,s.readOnly)(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(r.Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new n.ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return c._periodicWaveCache.find(t=>t.phase===this._phase&&(0,e.deepEquals)(t.partials,this._partials))}{const t=c._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if((0,i.isDefined)(e)){const{partials:t,wave:s}=e;this._wave=s,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,s]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,s);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),c._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),c._periodicWaveCache.length>100&&c._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){(0,h.assertRange)(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach((t,s)=>e[s]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let s=2048;const i=new Float32Array(s),a=new Float32Array(s);let r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,s=r,0===this._partials.length)return[i,a]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],s=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(let o=1;o<s;++o){const s=2/(o*Math.PI);let n;switch(t){case"sine":n=o<=r?1:0,this._partials[o-1]=n;break;case"square":n=1&o?2*s:0,this._partials[o-1]=n;break;case"sawtooth":n=s*(1&o?1:-1),this._partials[o-1]=n;break;case"triangle":n=1&o?s*s*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=n;break;case"custom":n=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==n?(i[o]=-n*Math.sin(e*o),a[o]=n*Math.cos(e*o)):(i[o]=0,a[o]=0)}return[i,a]}_inverseFFT(t,e,s){let i=0;const a=t.length;for(let r=0;r<a;r++)i+=t[r]*Math.cos(r*s)+e[r]*Math.sin(r*s);return i}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const i=2*Math.PI;for(let a=0;a<32;a++)s=Math.max(this._inverseFFT(t,e,a/32*i),s);return(0,l.clamp)(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,t.__awaiter)(this,void 0,void 0,function*(){return(0,o.generateWaveform)(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}exports.Oscillator=c,c._periodicWaveCache=[];
},{"tslib":"CvJj","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/util/TypeCheck":"h36b","../../signal/Signal":"JkWs","../Source":"c2sY","./OscillatorInterface":"eVjL","./ToneOscillatorNode":"DgcC","../../core/util/Debug":"Udbo","../../core/util/Math":"BX2C"}],"XYEx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignalOperator=void 0;var e=require("../core/util/Defaults"),t=require("../core/context/ToneAudioNode"),r=require("./Signal");class o extends t.ToneAudioNode{constructor(){super(Object.assign((0,e.optionsFromArguments)(o.getDefaults(),arguments,["context"])))}connect(e,t=0,o=0){return(0,r.connectSignal)(this,e,t,o),this}}exports.SignalOperator=o;
},{"../core/util/Defaults":"yCwZ","../core/context/ToneAudioNode":"aL0a","./Signal":"JkWs"}],"qAl9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaveShaper=void 0;var e=require("../core/util/Defaults"),t=require("../core/util/TypeCheck"),r=require("../core/util/Debug"),s=require("./Signal"),a=require("./SignalOperator");class i extends a.SignalOperator{constructor(){super(Object.assign((0,e.optionsFromArguments)(i.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const r=(0,e.optionsFromArguments)(i.getDefaults(),arguments,["mapping","length"]);(0,t.isArray)(r.mapping)||r.mapping instanceof Float32Array?this.curve=Float32Array.from(r.mapping):(0,t.isFunction)(r.mapping)&&this.setMap(r.mapping,r.length)}static getDefaults(){return Object.assign(s.Signal.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let s=0,a=t;s<a;s++){const t=s/(a-1)*2-1;r[s]=e(t,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(t=>t.includes(e));(0,r.assert)(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}exports.WaveShaper=i;
},{"../core/util/Defaults":"yCwZ","../core/util/TypeCheck":"h36b","../core/util/Debug":"Udbo","./Signal":"JkWs","./SignalOperator":"XYEx"}],"iGPZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioToGain=void 0;var e=require("./SignalOperator"),t=require("./WaveShaper");class i extends e.SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new t.WaveShaper({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}exports.AudioToGain=i;
},{"./SignalOperator":"XYEx","./WaveShaper":"qAl9"}],"eXoZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Multiply=void 0;var t=require("../core/context/Gain"),e=require("../core/util/Defaults"),s=require("./Signal");class i extends s.Signal{constructor(){super(Object.assign((0,e.optionsFromArguments)(i.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const s=(0,e.optionsFromArguments)(i.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new t.Gain({context:this.context,minValue:s.minValue,maxValue:s.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(s.value,0)}static getDefaults(){return Object.assign(s.Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}exports.Multiply=i;
},{"../core/context/Gain":"zza1","../core/util/Defaults":"yCwZ","./Signal":"JkWs"}],"VtcZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AMOscillator=void 0;var t=require("tslib"),e=require("../../core/context/Gain"),r=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),s=require("../../signal/AudioToGain"),a=require("../../signal/Multiply"),o=require("../Source"),n=require("./Oscillator"),u=require("./OscillatorInterface");class c extends o.Source{constructor(){super((0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new s.AudioToGain({context:this.context}),this._modulationNode=new e.Gain({context:this.context});const t=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new n.Oscillator({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new n.Oscillator({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new a.Multiply({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),(0,i.readOnly)(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(n.Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(e=1024){return(0,t.__awaiter)(this,void 0,void 0,function*(){return(0,u.generateWaveform)(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}exports.AMOscillator=c;
},{"tslib":"CvJj","../../core/context/Gain":"zza1","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/AudioToGain":"iGPZ","../../signal/Multiply":"eXoZ","../Source":"c2sY","./Oscillator":"chjT","./OscillatorInterface":"eVjL"}],"SRe7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FMOscillator=void 0;var t=require("tslib"),e=require("../../core/context/Gain"),r=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),s=require("../../signal/Multiply"),o=require("../../signal/Signal"),a=require("../Source"),n=require("./Oscillator"),u=require("./OscillatorInterface");class c extends a.Source{constructor(){super((0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new e.Gain({context:this.context,gain:0});const t=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new n.Oscillator({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new o.Signal({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new n.Oscillator({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new s.Multiply({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new s.Multiply({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),(0,i.readOnly)(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(n.Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(e=1024){return(0,t.__awaiter)(this,void 0,void 0,function*(){return(0,u.generateWaveform)(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}exports.FMOscillator=c;
},{"tslib":"CvJj","../../core/context/Gain":"zza1","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/Multiply":"eXoZ","../../signal/Signal":"JkWs","../Source":"c2sY","./Oscillator":"chjT","./OscillatorInterface":"eVjL"}],"oGiX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PulseOscillator=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),i=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),r=require("../../signal/Signal"),a=require("../../signal/WaveShaper"),n=require("../Source"),h=require("./Oscillator"),u=require("./OscillatorInterface");class o extends n.Source{constructor(){super((0,i.optionsFromArguments)(o.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new t.Gain({context:this.context,gain:0}),this._thresh=new a.WaveShaper({context:this.context,mapping:e=>e<=0?-1:1});const e=(0,i.optionsFromArguments)(o.getDefaults(),arguments,["frequency","width"]);this.width=new r.Signal({context:this.context,units:"audioRange",value:e.width}),this._triangle=new h.Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),(0,s.readOnly)(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(n.Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(t=1024){return(0,e.__awaiter)(this,void 0,void 0,function*(){return(0,u.generateWaveform)(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}exports.PulseOscillator=o;
},{"tslib":"CvJj","../../core/context/Gain":"zza1","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/Signal":"JkWs","../../signal/WaveShaper":"qAl9","../Source":"c2sY","./Oscillator":"chjT","./OscillatorInterface":"eVjL"}],"qtVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FatOscillator=void 0;var t=require("tslib"),s=require("../../core/util/Defaults"),e=require("../../core/util/Interface"),i=require("../../signal/Signal"),r=require("../Source"),a=require("./Oscillator"),o=require("./OscillatorInterface"),h=require("../../core/util/Debug");class n extends r.Source{constructor(){super((0,s.optionsFromArguments)(n.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=(0,s.optionsFromArguments)(n.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new i.Signal({context:this.context,units:"frequency",value:t.frequency}),this.detune=new i.Signal({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,(0,e.readOnly)(this,["frequency","detune"])}static getDefaults(){return Object.assign(a.Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(s=>s.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(s=>s.stop(t))}_restart(t){this._forEach(s=>s.restart(t))}_forEach(t){for(let s=0;s<this._oscillators.length;s++)t(this._oscillators[s],s)}get type(){return this._type}set type(t){this._type=t,this._forEach(s=>s.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const s=-t/2,e=t/(this._oscillators.length-1);this._forEach((t,i)=>t.detune.value=s+e*i)}}get count(){return this._oscillators.length}set count(t){if((0,h.assertRange)(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let s=0;s<t;s++){const i=new a.Oscillator({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+s/t*360,partialCount:this._partialCount,onstop:0===s?()=>this.onstop(this):e.noOp});"custom"===this.type&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[s]=i}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(s=>s.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(s=>s.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(s=>s.partialCount=t),this._type=this._oscillators[0].type}asArray(s=1024){return(0,t.__awaiter)(this,void 0,void 0,function*(){return(0,o.generateWaveform)(this,s)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}exports.FatOscillator=n;
},{"tslib":"CvJj","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/Signal":"JkWs","../Source":"c2sY","./Oscillator":"chjT","./OscillatorInterface":"eVjL","../../core/util/Debug":"Udbo"}],"BAgQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PWMOscillator=void 0;var e=require("tslib"),t=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),r=require("../../signal/Multiply"),u=require("../Source"),o=require("./Oscillator"),i=require("./OscillatorInterface"),n=require("./PulseOscillator");class a extends u.Source{constructor(){super((0,t.optionsFromArguments)(a.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new r.Multiply({context:this.context,value:2});const e=(0,t.optionsFromArguments)(a.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new n.PulseOscillator({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new o.Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),(0,s.readOnly)(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(u.Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(t=1024){return(0,e.__awaiter)(this,void 0,void 0,function*(){return(0,i.generateWaveform)(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}exports.PWMOscillator=a;
},{"tslib":"CvJj","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/Multiply":"eXoZ","../Source":"c2sY","./Oscillator":"chjT","./OscillatorInterface":"eVjL","./PulseOscillator":"oGiX"}],"v2Ma":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OmniOscillator=void 0;var t=require("tslib"),s=require("../../core/util/Defaults"),e=require("../../core/util/Interface"),i=require("../../core/util/TypeCheck"),o=require("../../signal/Signal"),l=require("../Source"),r=require("./AMOscillator"),a=require("./FatOscillator"),c=require("./FMOscillator"),h=require("./Oscillator"),u=require("./OscillatorInterface"),p=require("./PulseOscillator"),n=require("./PWMOscillator");const _={am:r.AMOscillator,fat:a.FatOscillator,fm:c.FMOscillator,oscillator:h.Oscillator,pulse:p.PulseOscillator,pwm:n.PWMOscillator};class y extends l.Source{constructor(){super((0,s.optionsFromArguments)(y.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=(0,s.optionsFromArguments)(y.getDefaults(),arguments,["frequency","type"]);this.frequency=new o.Signal({context:this.context,units:"frequency",value:t.frequency}),this.detune=new o.Signal({context:this.context,units:"cents",value:t.detune}),(0,e.readOnly)(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(h.Oscillator.getDefaults(),c.FMOscillator.getDefaults(),r.AMOscillator.getDefaults(),a.FatOscillator.getDefaults(),p.PulseOscillator.getDefaults(),n.PWMOscillator.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const s=_[t],e=this.now();if(this._oscillator){const t=this._oscillator;t.stop(e),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new s({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=(()=>this.onstop(this)),"started"===this.state&&this._oscillator.start(e)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let s="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(s=this._oscillator.type),"fm"===t?this.type="fm"+s:"am"===t?this.type="am"+s:"fat"===t?this.type="fat"+s:"oscillator"===t?this.type=s:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,s){return t instanceof _[s]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&(0,i.isNumber)(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&(0,i.isNumber)(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&(0,i.isString)(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(s=1024){return(0,t.__awaiter)(this,void 0,void 0,function*(){return(0,u.generateWaveform)(this,s)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}exports.OmniOscillator=y;
},{"tslib":"CvJj","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/util/TypeCheck":"h36b","../../signal/Signal":"JkWs","../Source":"c2sY","./AMOscillator":"VtcZ","./FatOscillator":"qtVH","./FMOscillator":"SRe7","./Oscillator":"chjT","./OscillatorInterface":"eVjL","./PulseOscillator":"oGiX","./PWMOscillator":"BAgQ"}],"zttA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Add=void 0;var e=require("../core/context/ToneAudioNode"),t=require("../core/context/Gain"),s=require("../core/util/Defaults"),i=require("./Signal");class r extends i.Signal{constructor(){super(Object.assign((0,s.optionsFromArguments)(r.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new t.Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,(0,e.connectSeries)(this._constantSource,this._sum)}static getDefaults(){return Object.assign(i.Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}exports.Add=r;
},{"../core/context/ToneAudioNode":"aL0a","../core/context/Gain":"zza1","../core/util/Defaults":"yCwZ","./Signal":"JkWs"}],"HqaJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scale=void 0;var t=require("../core/util/Defaults"),e=require("./Add"),s=require("./Multiply"),i=require("./SignalOperator");class n extends i.SignalOperator{constructor(){super(Object.assign((0,t.optionsFromArguments)(n.getDefaults(),arguments,["min","max"]))),this.name="Scale";const i=(0,t.optionsFromArguments)(n.getDefaults(),arguments,["min","max"]);this._mult=this.input=new s.Multiply({context:this.context,value:i.max-i.min}),this._add=this.output=new e.Add({context:this.context,value:i.min}),this._min=i.min,this._max=i.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(i.SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}exports.Scale=n;
},{"../core/util/Defaults":"yCwZ","./Add":"zttA","./Multiply":"eXoZ","./SignalOperator":"XYEx"}],"QbiC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Zero=void 0;var t=require("../core/context/Gain"),e=require("../core/context/ToneAudioNode"),o=require("../core/util/Defaults"),s=require("./SignalOperator");class i extends s.SignalOperator{constructor(){super(Object.assign((0,o.optionsFromArguments)(i.getDefaults(),arguments))),this.name="Zero",this._gain=new t.Gain({context:this.context}),this.output=this._gain,this.input=void 0,(0,e.connect)(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),(0,e.disconnect)(this.context.getConstant(0),this._gain),this}}exports.Zero=i;
},{"../core/context/Gain":"zza1","../core/context/ToneAudioNode":"aL0a","../core/util/Defaults":"yCwZ","./SignalOperator":"XYEx"}],"Fd5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LFO=void 0;var t=require("../../core/context/Gain"),s=require("../../core/context/Param"),e=require("../../core/context/ToneAudioNode"),i=require("../../core/util/Defaults"),a=require("../../core/util/Interface"),o=require("../../signal/AudioToGain"),n=require("../../signal/Scale"),r=require("../../signal/Signal"),l=require("../../signal/Zero"),h=require("./Oscillator");class u extends e.ToneAudioNode{constructor(){super((0,i.optionsFromArguments)(u.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=s.Param.prototype._fromType,this._toType=s.Param.prototype._toType,this._is=s.Param.prototype._is,this._clampValue=s.Param.prototype._clampValue;const e=(0,i.optionsFromArguments)(u.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new h.Oscillator(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new t.Gain({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new r.Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new l.Zero({context:this.context}),this._a2g=new o.AudioToGain({context:this.context}),this._scaler=this.output=new n.Scale({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),(0,a.readOnly)(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(h.Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const s=this.min,e=this.max;this._units=t,this.min=s,this.max=e}get state(){return this._oscillator.state}connect(t,e,i){return(t instanceof s.Param||t instanceof r.Signal)&&(this.convert=t.convert,this.units=t.units),(0,r.connectSignal)(this,t,e,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}exports.LFO=u;
},{"../../core/context/Gain":"zza1","../../core/context/Param":"LwOA","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/AudioToGain":"iGPZ","../../signal/Scale":"HqaJ","../../signal/Signal":"JkWs","../../signal/Zero":"QbiC","./Oscillator":"chjT"}],"DFdA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=t,exports.timeRange=n;var e=require("./Debug");function t(t,n=1/0){const r=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(s){(0,e.assertRange)(s,t,n),r.set(this,s)}})}}function n(t,n=1/0){const r=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(s){(0,e.assertRange)(this.toSeconds(s),t,n),r.set(this,s)}})}}
},{"./Debug":"Udbo"}],"aBL6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var t=require("tslib"),e=require("../../core/context/ToneAudioBuffer"),o=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),r=require("../../core/util/TypeCheck"),i=require("../Source"),a=require("./ToneBufferSource"),n=require("../../core/util/Debug"),h=require("../../core/util/Decorator");class u extends i.Source{constructor(){super((0,o.optionsFromArguments)(u.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=(0,o.optionsFromArguments)(u.getDefaults(),arguments,["url","onload"]);this._buffer=new e.ToneAudioBuffer({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(i.Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:s.noOp,onerror:s.noOp,playbackRate:1,reverse:!1})}load(e){return(0,t.__awaiter)(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(t=s.noOp){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,o){return super.start(t,e,o),this}_start(t,e,s){e=this._loop?(0,o.defaultArg)(e,this._loopStart):(0,o.defaultArg)(e,0);const i=this.toSeconds(e),n=s;s=(0,o.defaultArg)(s,Math.max(this._buffer.duration-i,0));let h=this.toSeconds(s);h/=this._playbackRate,t=this.toSeconds(t);const u=new a.ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+h),this._state.setStateAtTime("stopped",t+h,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&(0,r.isUndef)(n)?u.start(t,i):u.start(t,i,h-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,o){return super.restart(t,e,o),this}_restart(t,e,o){this._stop(t),this._start(t,e,o)}seek(t,e){const o=this.toSeconds(e);if("started"===this._state.getValueAtTime(o)){const e=this.toSeconds(t);this._stop(o),this._start(o,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&(0,n.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&(0,n.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),o=this._state.getNextState("stopped",e);o&&o.implicitEnd&&(this._state.cancel(o.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}exports.Player=u,(0,t.__decorate)([(0,h.timeRange)(0)],u.prototype,"fadeIn",void 0),(0,t.__decorate)([(0,h.timeRange)(0)],u.prototype,"fadeOut",void 0);
},{"tslib":"CvJj","../../core/context/ToneAudioBuffer":"fM2M","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/util/TypeCheck":"h36b","../Source":"c2sY","./ToneBufferSource":"B9Sq","../../core/util/Debug":"Udbo","../../core/util/Decorator":"DFdA"}],"qJxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Players=void 0;var e=require("../../component/channel/Volume"),t=require("../../core/context/ToneAudioBuffers"),s=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),o=require("../../core/util/Debug"),u=require("../../core/util/Interface"),a=require("../Source"),i=require("./Player");class n extends s.ToneAudioNode{constructor(){super((0,r.optionsFromArguments)(n.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const s=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new e.Volume({context:this.context,volume:s.volume}),this.volume=this._volume.volume,(0,u.readOnly)(this,"volume"),this._buffers=new t.ToneAudioBuffers({urls:s.urls,onload:s.onload,baseUrl:s.baseUrl,onerror:s.onerror}),this.mute=s.mute,this._fadeIn=s.fadeIn,this._fadeOut=s.fadeOut}static getDefaults(){return Object.assign(a.Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:u.noOp,onerror:u.noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._players.forEach(t=>{t.fadeIn=e})}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._players.forEach(t=>{t.fadeOut=e})}get state(){return Array.from(this._players).some(([e,t])=>"started"===t.state)?"started":"stopped"}has(e){return this._buffers.has(e)}player(e){if((0,o.assert)(this.has(e),`No Player with the name ${e} exists on this object`),!this._players.has(e)){const t=new i.Player({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,t)}return this._players.get(e)}get loaded(){return this._buffers.loaded}add(e,t,s){return(0,o.assert)(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,t,s),this}stopAll(e){return this._players.forEach(t=>t.stop(e)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(e=>e.dispose()),this._buffers.dispose(),this}}exports.Players=n;
},{"../../component/channel/Volume":"xqtY","../../core/context/ToneAudioBuffers":"K3lE","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Debug":"Udbo","../../core/util/Interface":"FB0z","../Source":"c2sY","./Player":"aBL6"}],"JmMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrainPlayer=void 0;var t=require("../Source"),e=require("../../core/util/Interface"),o=require("../../core/context/ToneAudioBuffer"),s=require("../../core/util/Defaults"),r=require("../../core/clock/Clock"),i=require("./ToneBufferSource"),a=require("../../core/type/Conversions"),n=require("../../core/util/Debug");class c extends t.Source{constructor(){super((0,s.optionsFromArguments)(c.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=(0,s.optionsFromArguments)(c.getDefaults(),arguments,["url","onload"]);this.buffer=new o.ToneAudioBuffer({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new r.Clock({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(t.Source.getDefaults(),{onload:e.noOp,onerror:e.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,o){e=(0,s.defaultArg)(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const r=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/r),o&&this.stop(t+this.toSeconds(o))}restart(t,e,o){return super.restart(t,e,o),this}_restart(t,e,o){this._stop(t),this._start(t,e,o)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach(e=>{e.fadeOut=0,e.stop(t)}),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),o=e*this._grainSize;if(this.log("offset",o),!this.loop&&o>this.buffer.duration)return void this.stop(t);const s=o<this._overlap?0:this._overlap,r=new i.ToneBufferSource({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:(0,a.intervalToFrequencyRatio)(this.detune/100)}).connect(this.output);r.start(t,this._grainSize*e),r.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(r),r.onended=(()=>{const t=this._activeSources.indexOf(r);-1!==t&&this._activeSources.splice(t,1)})}get playbackRate(){return this._playbackRate}set playbackRate(t){(0,n.assertRange)(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&(0,n.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&(0,n.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);(0,n.assertRange)(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(t=>t.dispose()),this}}exports.GrainPlayer=c;
},{"../Source":"c2sY","../../core/util/Interface":"FB0z","../../core/context/ToneAudioBuffer":"fM2M","../../core/util/Defaults":"yCwZ","../../core/clock/Clock":"aCQS","./ToneBufferSource":"B9Sq","../../core/type/Conversions":"obhM","../../core/util/Debug":"Udbo"}],"ieUI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Noise");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./UserMedia");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./oscillator/Oscillator");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./oscillator/AMOscillator");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./oscillator/FMOscillator");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./oscillator/PulseOscillator");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var s=require("./oscillator/FatOscillator");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var i=require("./oscillator/PWMOscillator");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var c=require("./oscillator/OmniOscillator");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var f=require("./oscillator/ToneOscillatorNode");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var l=require("./oscillator/LFO");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var a=require("./buffer/ToneBufferSource");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var p=require("./buffer/Player");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var b=require("./buffer/Players");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var d=require("./buffer/GrainPlayer");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});
},{"./Noise":"sH37","./UserMedia":"YvID","./oscillator/Oscillator":"chjT","./oscillator/AMOscillator":"VtcZ","./oscillator/FMOscillator":"SRe7","./oscillator/PulseOscillator":"oGiX","./oscillator/FatOscillator":"qtVH","./oscillator/PWMOscillator":"BAgQ","./oscillator/OmniOscillator":"v2Ma","./oscillator/ToneOscillatorNode":"DgcC","./oscillator/LFO":"Fd5C","./buffer/ToneBufferSource":"B9Sq","./buffer/Player":"aBL6","./buffer/Players":"qJxb","./buffer/GrainPlayer":"JmMx"}],"P1Xg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Abs=void 0;var s=require("./SignalOperator"),e=require("./WaveShaper");class t extends s.SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new e.WaveShaper({context:this.context,mapping:s=>Math.abs(s)<.001?0:Math.abs(s)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}exports.Abs=t;
},{"./SignalOperator":"XYEx","./WaveShaper":"qAl9"}],"ebPL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GainToAudio=void 0;var e=require("./SignalOperator"),t=require("./WaveShaper");class s extends e.SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new t.WaveShaper({context:this.context,mapping:e=>2*Math.abs(e)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}exports.GainToAudio=s;
},{"./SignalOperator":"XYEx","./WaveShaper":"qAl9"}],"zJZi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negate=void 0;var t=require("./Multiply"),e=require("./SignalOperator");class s extends e.SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new t.Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}exports.Negate=s;
},{"./Multiply":"eXoZ","./SignalOperator":"XYEx"}],"Ce3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Subtract=void 0;var e=require("../core/context/ToneAudioNode"),t=require("../core/context/Gain"),s=require("../core/util/Defaults"),i=require("../signal/Negate"),r=require("../signal/Signal");class n extends r.Signal{constructor(){super(Object.assign((0,s.optionsFromArguments)(n.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new t.Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new i.Negate({context:this.context}),this.subtrahend=this._param,(0,e.connectSeries)(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(r.Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}exports.Subtract=n;
},{"../core/context/ToneAudioNode":"aL0a","../core/context/Gain":"zza1","../core/util/Defaults":"yCwZ","../signal/Negate":"zJZi","../signal/Signal":"JkWs"}],"jiNP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GreaterThanZero=void 0;var e=require("./SignalOperator"),t=require("./Multiply"),s=require("./WaveShaper"),r=require("../core/util/Defaults");class i extends e.SignalOperator{constructor(){super(Object.assign((0,r.optionsFromArguments)(i.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new s.WaveShaper({context:this.context,length:127,mapping:e=>e<=0?0:1}),this._scale=this.input=new t.Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}exports.GreaterThanZero=i;
},{"./SignalOperator":"XYEx","./Multiply":"eXoZ","./WaveShaper":"qAl9","../core/util/Defaults":"yCwZ"}],"OI9q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GreaterThan=void 0;var t=require("../core/util/Defaults"),e=require("./Subtract"),r=require("./Signal"),s=require("./GreaterThanZero"),a=require("../core/util/Interface");class i extends r.Signal{constructor(){super(Object.assign((0,t.optionsFromArguments)(i.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const r=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["value"]);this._subtract=this.input=new e.Subtract({context:this.context,value:r.value}),this._gtz=this.output=new s.GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,(0,a.readOnly)(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(r.Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}exports.GreaterThan=i;
},{"../core/util/Defaults":"yCwZ","./Subtract":"Ce3p","./Signal":"JkWs","./GreaterThanZero":"jiNP","../core/util/Interface":"FB0z"}],"r1Ac":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pow=void 0;var e=require("./WaveShaper"),t=require("../core/util/Defaults"),s=require("./SignalOperator");class n extends s.SignalOperator{constructor(){super(Object.assign((0,t.optionsFromArguments)(n.getDefaults(),arguments,["value"]))),this.name="Pow";const s=(0,t.optionsFromArguments)(n.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new e.WaveShaper({context:this.context,mapping:this._expFunc(s.value),length:8192}),this._exponent=s.value}static getDefaults(){return Object.assign(s.SignalOperator.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}exports.Pow=n;
},{"./WaveShaper":"qAl9","../core/util/Defaults":"yCwZ","./SignalOperator":"XYEx"}],"ZTsm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScaleExp=void 0;var e=require("./Scale"),t=require("../core/util/Defaults"),s=require("./Pow");class n extends e.Scale{constructor(){super(Object.assign((0,t.optionsFromArguments)(n.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const e=(0,t.optionsFromArguments)(n.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new s.Pow({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(e.Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}exports.ScaleExp=n;
},{"./Scale":"HqaJ","../core/util/Defaults":"yCwZ","./Pow":"r1Ac"}],"Nx4M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncedSignal=void 0;var t=require("./Signal"),e=require("../core/util/Defaults"),s=require("../core/type/TransportTime"),n=require("./ToneConstantSource");class o extends t.Signal{constructor(){super((0,e.optionsFromArguments)(t.Signal.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const s=(0,e.optionsFromArguments)(t.Signal.getDefaults(),arguments,["value","units"]);this._lastVal=s.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new n.ToneConstantSource({context:this.context,offset:s.value,units:s.units}).start(0),this.setValueAtTime(s.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new s.TransportTimeClass(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new s.TransportTimeClass(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new s.TransportTimeClass(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new s.TransportTimeClass(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const o=new s.TransportTimeClass(this.context,e).toSeconds();return super.setTargetAtTime(t,o,n),this}cancelScheduledValues(t){const e=new s.TransportTimeClass(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,o){const a=new s.TransportTimeClass(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,a,n,o),this}cancelAndHoldAtTime(t){const e=new s.TransportTimeClass(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new s.TransportTimeClass(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const o=new s.TransportTimeClass(this.context,n).toSeconds();return super.exponentialRampTo(t,e,o),this}linearRampTo(t,e,n){const o=new s.TransportTimeClass(this.context,n).toSeconds();return super.linearRampTo(t,e,o),this}targetRampTo(t,e,n){const o=new s.TransportTimeClass(this.context,n).toSeconds();return super.targetRampTo(t,e,o),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}exports.SyncedSignal=o;
},{"./Signal":"JkWs","../core/util/Defaults":"yCwZ","../core/type/TransportTime":"SI88","./ToneConstantSource":"KVPf"}],"jDON":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Add");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./Abs");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./AudioToGain");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./GainToAudio");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./GreaterThan");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./GreaterThanZero");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var i=require("./Multiply");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var c=require("./Negate");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var s=require("./Pow");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var f=require("./Signal");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var a=require("./Scale");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var p=require("./ScaleExp");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var l=require("./Subtract");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var d=require("./SyncedSignal");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var b=require("./WaveShaper");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var x=require("./Zero");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});
},{"./Add":"zttA","./Abs":"P1Xg","./AudioToGain":"iGPZ","./GainToAudio":"ebPL","./GreaterThan":"OI9q","./GreaterThanZero":"jiNP","./Multiply":"eXoZ","./Negate":"zJZi","./Pow":"r1Ac","./Signal":"JkWs","./Scale":"HqaJ","./ScaleExp":"ZTsm","./Subtract":"Ce3p","./SyncedSignal":"Nx4M","./WaveShaper":"qAl9","./Zero":"QbiC"}],"RZYi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Envelope=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),s=require("../../core/util/Defaults"),i=require("../../core/util/TypeCheck"),r=require("../../signal/Signal"),a=require("../../core/context/OfflineContext"),n=require("../../core/util/Debug"),o=require("../../core/util/Decorator");class c extends t.ToneAudioNode{constructor(){super((0,s.optionsFromArguments)(c.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new r.Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=(0,s.optionsFromArguments)(c.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if((0,i.isString)(e))return e;{let s;for(s in u)if(u[s][t]===e)return s;return e}}_setCurve(e,t,s){if((0,i.isString)(s)&&Reflect.has(u,s)){const r=u[s];(0,i.isObject)(r)?"_decayCurve"!==e&&(this[e]=r[t]):this[e]=r}else{if(!(0,i.isArray)(s)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+s);this[e]=s}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){(0,n.assert)(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),r=this.getValueAtTime(e);if(r>0){s=(1-r)/(1/s)}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,s,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,s,e);else{this._sig.cancelAndHoldAtTime(e);let i=this._attackCurve;for(let e=1;e<i.length;e++)if(i[e-1]<=r&&r<=i[e]){(i=this._attackCurve.slice(e))[0]=r;break}this._sig.setValueCurveAtTime(i,e,s,t)}if(i&&this.sustain<1){const r=t*this.sustain,a=e+s;this.log("decay",a),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,i+a):this._sig.exponentialApproachValueAtTime(r,a,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,s,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,s,e):((0,n.assert)((0,i.isArray)(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return(0,r.connectSignal)(this,e,t,s),this}asArray(t=1024){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,s=new a.OfflineContext(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),n=.1*r,o=r+n,c=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(e*(i+n)/o,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}exports.Envelope=c,(0,e.__decorate)([(0,o.timeRange)(0)],c.prototype,"attack",void 0),(0,e.__decorate)([(0,o.timeRange)(0)],c.prototype,"decay",void 0),(0,e.__decorate)([(0,o.range)(0,1)],c.prototype,"sustain",void 0),(0,e.__decorate)([(0,o.timeRange)(0)],c.prototype,"release",void 0);const u=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){t=e/127;const s=Math.sin(t*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=s/10+.83*t}i[127]=1;const r=[];for(e=0;e<128;e++)r[e]=Math.ceil(e/127*5)/5;const a=[];for(e=0;e<128;e++)t=e/127,a[e]=.5*(1-Math.cos(Math.PI*t));const n=[];for(e=0;e<128;e++){t=e/127;const s=4*Math.pow(t,3)+.2,i=Math.cos(s*Math.PI*2*t);n[e]=Math.abs(i*(1-t))}function o(e){const t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=1-e[s];return t}return{bounce:{In:o(n),Out:n},cosine:{In:s,Out:function(e){return e.slice(0).reverse()}(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:o(i)},sine:{In:a,Out:o(a)},step:{In:r,Out:o(r)}}})();
},{"tslib":"CvJj","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/TypeCheck":"h36b","../../signal/Signal":"JkWs","../../core/context/OfflineContext":"t6al","../../core/util/Debug":"Udbo","../../core/util/Decorator":"DFdA"}],"GdsE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Instrument=void 0;var t=require("../component/channel/Volume"),e=require("../core/context/ToneAudioNode"),s=require("../core/util/Defaults"),i=require("../core/util/Interface");class r extends e.ToneAudioNode{constructor(){super((0,s.optionsFromArguments)(r.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=(0,s.optionsFromArguments)(r.getDefaults(),arguments);this._volume=this.output=new t.Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,(0,i.readOnly)(this,"volume")}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=((...t)=>{const i=t[e],r=this.context.transport.schedule(i=>{t[e]=i,s.apply(this,t)},i);this._scheduledEvents.push(r)})}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,s,i){const r=this.toSeconds(s),o=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}exports.Instrument=r;
},{"../component/channel/Volume":"xqtY","../core/context/ToneAudioNode":"aL0a","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z"}],"AbUg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Monophonic=void 0;var e=require("tslib"),t=require("../core/type/Frequency"),r=require("../core/util/Defaults"),o=require("../core/util/Interface"),s=require("../instrument/Instrument"),n=require("../core/util/Decorator");class i extends s.Instrument{constructor(){super((0,r.optionsFromArguments)(i.getDefaults(),arguments));const e=(0,r.optionsFromArguments)(i.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(s.Instrument.getDefaults(),{detune:0,onsilence:o.noOp,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,r){const o=this.toSeconds(r),s=e instanceof t.FrequencyClass?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(o)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,e,o)}else this.frequency.setValueAtTime(s,o);return this}}exports.Monophonic=i,(0,e.__decorate)([(0,n.timeRange)(0)],i.prototype,"portamento",void 0);
},{"tslib":"CvJj","../core/type/Frequency":"rvND","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../instrument/Instrument":"GdsE","../core/util/Decorator":"DFdA"}],"FT6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmplitudeEnvelope=void 0;var e=require("../../core/context/Gain"),t=require("../../core/util/Defaults"),i=require("./Envelope");class s extends i.Envelope{constructor(){super((0,t.optionsFromArguments)(s.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new e.Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}exports.AmplitudeEnvelope=s;
},{"../../core/context/Gain":"zza1","../../core/util/Defaults":"yCwZ","./Envelope":"RZYi"}],"blVo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Synth=void 0;var e=require("../component/envelope/AmplitudeEnvelope"),t=require("../component/envelope/Envelope"),o=require("../core/context/ToneAudioNode"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),n=require("../source/oscillator/OmniOscillator"),r=require("../source/Source"),l=require("./Monophonic");class c extends l.Monophonic{constructor(){super((0,s.optionsFromArguments)(c.getDefaults(),arguments)),this.name="Synth";const t=(0,s.optionsFromArguments)(c.getDefaults(),arguments);this.oscillator=new n.OmniOscillator(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new e.AmplitudeEnvelope(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),(0,i.readOnly)(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(l.Monophonic.getDefaults(),{envelope:Object.assign((0,s.omitFromObject)(t.Envelope.getDefaults(),Object.keys(o.ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign((0,s.omitFromObject)(n.OmniOscillator.getDefaults(),[...Object.keys(r.Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}exports.Synth=c;
},{"../component/envelope/AmplitudeEnvelope":"FT6i","../component/envelope/Envelope":"RZYi","../core/context/ToneAudioNode":"aL0a","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../source/oscillator/OmniOscillator":"v2Ma","../source/Source":"c2sY","./Monophonic":"AbUg"}],"G0GS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModulationSynth=void 0;var e=require("../signal/Signal"),t=require("../signal/Multiply"),o=require("../core/context/Gain"),i=require("../component/envelope/Envelope"),n=require("../core/context/ToneAudioNode"),s=require("./Monophonic"),r=require("../source/oscillator/OmniOscillator"),l=require("../source/Source"),a=require("./Synth"),u=require("../core/util/Interface"),c=require("../core/util/Defaults");class h extends s.Monophonic{constructor(){super((0,c.optionsFromArguments)(h.getDefaults(),arguments)),this.name="ModulationSynth";const i=(0,c.optionsFromArguments)(h.getDefaults(),arguments);this._carrier=new a.Synth({context:this.context,oscillator:i.oscillator,envelope:i.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new a.Synth({context:this.context,oscillator:i.modulation,envelope:i.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new e.Signal({context:this.context,units:"frequency"}),this.detune=new e.Signal({context:this.context,value:i.detune,units:"cents"}),this.harmonicity=new t.Multiply({context:this.context,value:i.harmonicity,minValue:0}),this._modulationNode=new o.Gain({context:this.context,gain:0}),(0,u.readOnly)(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(s.Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign((0,c.omitFromObject)(r.OmniOscillator.getDefaults(),[...Object.keys(l.Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign((0,c.omitFromObject)(i.Envelope.getDefaults(),Object.keys(n.ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign((0,c.omitFromObject)(r.OmniOscillator.getDefaults(),[...Object.keys(l.Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign((0,c.omitFromObject)(i.Envelope.getDefaults(),Object.keys(n.ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}exports.ModulationSynth=h;
},{"../signal/Signal":"JkWs","../signal/Multiply":"eXoZ","../core/context/Gain":"zza1","../component/envelope/Envelope":"RZYi","../core/context/ToneAudioNode":"aL0a","./Monophonic":"AbUg","../source/oscillator/OmniOscillator":"v2Ma","../source/Source":"c2sY","./Synth":"blVo","../core/util/Interface":"FB0z","../core/util/Defaults":"yCwZ"}],"E8dm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AMSynth=void 0;var t=require("../signal/AudioToGain"),e=require("../core/util/Defaults"),i=require("./ModulationSynth");class o extends i.ModulationSynth{constructor(){super((0,e.optionsFromArguments)(o.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new t.AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}exports.AMSynth=o;
},{"../signal/AudioToGain":"iGPZ","../core/util/Defaults":"yCwZ","./ModulationSynth":"G0GS"}],"EEQa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BiquadFilter=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("../../core/context/Param"),i=require("../../core/util/Debug");class r extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(r.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new s.Param({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new s.Param({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new s.Param({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new s.Param({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){(0,i.assert)(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let n=0;n<e;n++){const s=19980*Math.pow(n/e,2)+20;t[n]=s}const s=new Float32Array(e),i=new Float32Array(e),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(t,s,i),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}exports.BiquadFilter=r;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/context/Param":"LwOA","../../core/util/Debug":"Udbo"}],"ANuX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Filter=void 0;var e=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),i=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),n=require("../../core/util/TypeCheck"),r=require("../../signal/Signal"),o=require("../../core/util/Debug"),u=require("./BiquadFilter");class l extends t.ToneAudioNode{constructor(){super((0,i.optionsFromArguments)(l.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new e.Gain({context:this.context}),this.output=new e.Gain({context:this.context}),this._filters=[];const t=(0,i.optionsFromArguments)(l.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new r.Signal({context:this.context,units:"positive",value:t.Q}),this.frequency=new r.Signal({context:this.context,units:"frequency",value:t.frequency}),this.detune=new r.Signal({context:this.context,units:"cents",value:t.detune}),this.gain=new r.Signal({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,(0,s.readOnly)(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){(0,o.assert)(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(t=>t.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const i=(0,n.isNumber)(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(i);(0,o.assert)(-1!==r,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=i,this.input.disconnect(),this._filters.forEach(e=>e.disconnect()),this._filters=new Array(r);for(let t=0;t<r;t++){const e=new u.BiquadFilter({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,(0,t.connectSeries)(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new u.BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((e,t)=>i[t]*=e)}),t.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),(0,s.writable)(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}exports.Filter=l;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/util/TypeCheck":"h36b","../../signal/Signal":"JkWs","../../core/util/Debug":"Udbo","./BiquadFilter":"EEQa"}],"ZIde":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrequencyEnvelope=void 0;var e=require("../../core/util/Defaults"),t=require("./Envelope"),s=require("../../signal/Scale"),n=require("../../signal/Pow"),a=require("../../core/util/Debug");class i extends t.Envelope{constructor(){super((0,e.optionsFromArguments)(i.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=(0,e.optionsFromArguments)(i.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new n.Pow({context:this.context,value:t.exponent}),this._scale=this.output=new s.Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(t.Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);(0,a.assertRange)(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}exports.FrequencyEnvelope=i;
},{"../../core/util/Defaults":"yCwZ","./Envelope":"RZYi","../../signal/Scale":"HqaJ","../../signal/Pow":"r1Ac","../../core/util/Debug":"Udbo"}],"VGBU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MonoSynth=void 0;var e=require("../component/envelope/AmplitudeEnvelope"),t=require("../component/envelope/Envelope"),o=require("../component/filter/Filter"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),n=require("../instrument/Monophonic"),l=require("../source/oscillator/OmniOscillator"),r=require("../source/Source"),c=require("../component/envelope/FrequencyEnvelope"),a=require("../core/context/ToneAudioNode");class u extends n.Monophonic{constructor(){super((0,s.optionsFromArguments)(u.getDefaults(),arguments)),this.name="MonoSynth";const t=(0,s.optionsFromArguments)(u.getDefaults(),arguments);this.oscillator=new l.OmniOscillator(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new o.Filter(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new c.FrequencyEnvelope(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new e.AmplitudeEnvelope(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),(0,i.readOnly)(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(n.Monophonic.getDefaults(),{envelope:Object.assign((0,s.omitFromObject)(t.Envelope.getDefaults(),Object.keys(a.ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign((0,s.omitFromObject)(o.Filter.getDefaults(),Object.keys(a.ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign((0,s.omitFromObject)(c.FrequencyEnvelope.getDefaults(),Object.keys(a.ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign((0,s.omitFromObject)(l.OmniOscillator.getDefaults(),Object.keys(r.Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}exports.MonoSynth=u;
},{"../component/envelope/AmplitudeEnvelope":"FT6i","../component/envelope/Envelope":"RZYi","../component/filter/Filter":"ANuX","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../instrument/Monophonic":"AbUg","../source/oscillator/OmniOscillator":"v2Ma","../source/Source":"c2sY","../component/envelope/FrequencyEnvelope":"ZIde","../core/context/ToneAudioNode":"aL0a"}],"DXoo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DuoSynth=void 0;var e=require("./Monophonic"),t=require("./MonoSynth"),i=require("../signal/Signal"),o=require("../core/util/Interface"),n=require("../source/oscillator/LFO"),s=require("../core/context/Gain"),r=require("../signal/Multiply"),c=require("../core/util/Defaults");class a extends e.Monophonic{constructor(){super((0,c.optionsFromArguments)(a.getDefaults(),arguments)),this.name="DuoSynth";const e=(0,c.optionsFromArguments)(a.getDefaults(),arguments);this.voice0=new t.MonoSynth(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new t.MonoSynth(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new r.Multiply({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new n.LFO({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new s.Gain({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new i.Signal({context:this.context,units:"frequency",value:440}),this.detune=new i.Signal({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),(0,o.readOnly)(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return(0,c.deepMerge)(e.Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:(0,c.deepMerge)((0,c.omitFromObject)(t.MonoSynth.getDefaults(),Object.keys(e.Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:(0,c.deepMerge)((0,c.omitFromObject)(t.MonoSynth.getDefaults(),Object.keys(e.Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,t){this.voice0._triggerEnvelopeAttack(e,t),this.voice1._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}exports.DuoSynth=a;
},{"./Monophonic":"AbUg","./MonoSynth":"VGBU","../signal/Signal":"JkWs","../core/util/Interface":"FB0z","../source/oscillator/LFO":"Fd5C","../core/context/Gain":"zza1","../signal/Multiply":"eXoZ","../core/util/Defaults":"yCwZ"}],"nmdo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FMSynth=void 0;var t=require("../core/util/Defaults"),e=require("../signal/Multiply"),n=require("./ModulationSynth");class i extends n.ModulationSynth{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments)),this.name="FMSynth";const n=(0,t.optionsFromArguments)(i.getDefaults(),arguments);this.modulationIndex=new e.Multiply({context:this.context,value:n.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(n.ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}exports.FMSynth=i;
},{"../core/util/Defaults":"yCwZ","../signal/Multiply":"eXoZ","./ModulationSynth":"G0GS"}],"LVGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetalSynth=void 0;var e=require("../component/envelope/Envelope"),t=require("../component/filter/Filter"),s=require("../core/context/Gain"),i=require("../core/context/ToneAudioNode"),o=require("../core/util/Defaults"),n=require("../core/util/Interface"),r=require("../signal/Multiply"),a=require("../signal/Scale"),c=require("../signal/Signal"),l=require("../source/oscillator/FMOscillator"),h=require("./Monophonic");const u=[1,1.483,1.932,2.546,2.63,3.897];class p extends h.Monophonic{constructor(){super((0,o.optionsFromArguments)(p.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const i=(0,o.optionsFromArguments)(p.getDefaults(),arguments);this.detune=new c.Signal({context:this.context,units:"cents",value:i.detune}),this.frequency=new c.Signal({context:this.context,units:"frequency"}),this._amplitude=new s.Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new t.Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<u.length;e++){const t=new l.FMOscillator({context:this.context,harmonicity:i.harmonicity,modulationIndex:i.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):n.noOp,type:"square"});t.connect(this._highpass),this._oscillators[e]=t;const s=new r.Multiply({context:this.context,value:u[e]});this._freqMultipliers[e]=s,this.frequency.chain(s,t.frequency),this.detune.connect(t.detune)}this._filterFreqScaler=new a.Scale({context:this.context,max:7e3,min:this.toFrequency(i.resonance)}),this.envelope=new e.Envelope({attack:i.envelope.attack,attackCurve:"linear",context:this.context,decay:i.envelope.decay,release:i.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=i.octaves,this.octaves=i.octaves}static getDefaults(){return(0,o.deepMerge)(h.Monophonic.getDefaults(),{envelope:Object.assign((0,o.omitFromObject)(e.Envelope.getDefaults(),Object.keys(i.ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,t=1){return this.envelope.triggerAttack(e,t),this._oscillators.forEach(t=>t.start(e)),0===this.envelope.sustain&&this._oscillators.forEach(t=>{t.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}exports.MetalSynth=p;
},{"../component/envelope/Envelope":"RZYi","../component/filter/Filter":"ANuX","../core/context/Gain":"zza1","../core/context/ToneAudioNode":"aL0a","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../signal/Multiply":"eXoZ","../signal/Scale":"HqaJ","../signal/Signal":"JkWs","../source/oscillator/FMOscillator":"SRe7","./Monophonic":"AbUg"}],"N0hC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MembraneSynth=void 0;var e=require("tslib"),t=require("../core/type/Frequency"),o=require("../core/util/Defaults"),r=require("../core/util/Interface"),s=require("./Monophonic"),i=require("./Synth"),a=require("../core/util/Decorator");class c extends i.Synth{constructor(){super((0,o.optionsFromArguments)(c.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=(0,o.optionsFromArguments)(c.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,(0,r.readOnly)(this,["oscillator","envelope"])}static getDefaults(){return(0,o.deepMerge)(s.Monophonic.getDefaults(),i.Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,o){const r=this.toSeconds(o),s=this.toFrequency(e instanceof t.FrequencyClass?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}exports.MembraneSynth=c,(0,e.__decorate)([(0,a.range)(0)],c.prototype,"octaves",void 0),(0,e.__decorate)([(0,a.timeRange)(0)],c.prototype,"pitchDecay",void 0);
},{"tslib":"CvJj","../core/type/Frequency":"rvND","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","./Monophonic":"AbUg","./Synth":"blVo","../core/util/Decorator":"DFdA"}],"igvz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoiseSynth=void 0;var e=require("../component/envelope/AmplitudeEnvelope"),t=require("../core/util/Defaults"),s=require("../source/Noise"),o=require("./Instrument"),i=require("../core/context/ToneAudioNode"),n=require("../component/envelope/Envelope"),r=require("../source/Source");class c extends o.Instrument{constructor(){super((0,t.optionsFromArguments)(c.getDefaults(),arguments)),this.name="NoiseSynth";const o=(0,t.optionsFromArguments)(c.getDefaults(),arguments);this.noise=new s.Noise(Object.assign({context:this.context},o.noise)),this.envelope=new e.AmplitudeEnvelope(Object.assign({context:this.context},o.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(o.Instrument.getDefaults(),{envelope:Object.assign((0,t.omitFromObject)(n.Envelope.getDefaults(),Object.keys(i.ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign((0,t.omitFromObject)(s.Noise.getDefaults(),Object.keys(r.Source.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,s),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}exports.NoiseSynth=c;
},{"../component/envelope/AmplitudeEnvelope":"FT6i","../core/util/Defaults":"yCwZ","../source/Noise":"sH37","./Instrument":"GdsE","../core/context/ToneAudioNode":"aL0a","../component/envelope/Envelope":"RZYi","../source/Source":"c2sY"}],"oOWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addToWorklet=o,exports.registerProcessor=r,exports.getWorkletGlobalScope=t;const e=new Set;function o(o){e.add(o)}function r(o,r){const t=`registerProcessor("${o}", ${r})`;e.add(t)}function t(){return Array.from(e).join("\n")}
},{}],"F5mU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioWorklet=void 0;var e=require("../context/ToneAudioNode"),t=require("../util/Interface"),o=require("./WorkletGlobalScope");class s extends e.ToneAudioNode{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=t.noOp;const s=URL.createObjectURL(new Blob([(0,o.getWorkletGlobalScope)()],{type:"text/javascript"})),r=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(s,r).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(r,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}exports.ToneAudioWorklet=s;
},{"../context/ToneAudioNode":"aL0a","../util/Interface":"FB0z","./WorkletGlobalScope":"oOWc"}],"Ga6P":[function(require,module,exports) {
"use strict";var t=require("./WorkletGlobalScope");const e='\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n';(0,t.addToWorklet)(e);
},{"./WorkletGlobalScope":"oOWc"}],"QHTK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.singleIOProcess=void 0,require("./ToneAudioWorkletProcessor.worklet");var t=require("./WorkletGlobalScope");const e="\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n";exports.singleIOProcess=e,(0,t.addToWorklet)(e);
},{"./ToneAudioWorkletProcessor.worklet":"Ga6P","./WorkletGlobalScope":"oOWc"}],"AYGo":[function(require,module,exports) {
"use strict";var t=require("./WorkletGlobalScope");const e="\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n";(0,t.addToWorklet)(e);
},{"./WorkletGlobalScope":"oOWc"}],"JwhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.workletName=void 0,require("../../core/worklet/SingleIOProcessor.worklet"),require("../../core/worklet/DelayLine.worklet");var t=require("../../core/worklet/WorkletGlobalScope");const e="feedback-comb-filter";exports.workletName=e;const n='\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n';(0,t.registerProcessor)(e,n);
},{"../../core/worklet/SingleIOProcessor.worklet":"QHTK","../../core/worklet/DelayLine.worklet":"AYGo","../../core/worklet/WorkletGlobalScope":"oOWc"}],"PYKW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackCombFilter=void 0;var e=require("../../core/context/Gain"),t=require("../../core/context/Param"),s=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),a=require("../../core/util/Interface"),o=require("../../core/worklet/ToneAudioWorklet"),i=require("./FeedbackCombFilter.worklet");class n extends o.ToneAudioWorklet{constructor(){super((0,r.optionsFromArguments)(n.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const s=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["delayTime","resonance"]);this.input=new e.Gain({context:this.context}),this.output=new e.Gain({context:this.context}),this.delayTime=new t.Param({context:this.context,value:s.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new t.Param({context:this.context,value:s.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),(0,a.readOnly)(this,["resonance","delayTime"])}_audioWorkletName(){return i.workletName}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){(0,s.connectSeries)(this.input,e,this.output);const t=e.parameters.get("delayTime");this.delayTime.setParam(t);const r=e.parameters.get("feedback");this.resonance.setParam(r)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}exports.FeedbackCombFilter=n;
},{"../../core/context/Gain":"zza1","../../core/context/Param":"LwOA","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../core/worklet/ToneAudioWorklet":"F5mU","./FeedbackCombFilter.worklet":"JwhX"}],"x8G7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnePoleFilter=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("../../core/context/Gain");class i extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const e=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new s.Gain({context:this.context}),this.output=new s.Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,t=this.toFrequency(this._frequency),s=1/(2*Math.PI*t);if("lowpass"===this._type){const e=1/(s*this.context.sampleRate),t=e-1;this._filter=this.context.createIIRFilter([e,0],[1,t])}else{const e=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,e])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let r=0;r<e;r++){const s=19980*Math.pow(r/e,2)+20;t[r]=s}const s=new Float32Array(e),i=new Float32Array(e);return this._filter.getFrequencyResponse(t,s,i),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}exports.OnePoleFilter=i;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/context/Gain":"zza1"}],"k9To":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LowpassCombFilter=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("./FeedbackCombFilter"),o=require("./OnePoleFilter");class i extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const e=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new s.FeedbackCombFilter({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new o.OnePoleFilter({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}exports.LowpassCombFilter=i;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./FeedbackCombFilter":"PYKW","./OnePoleFilter":"x8G7"}],"CkD3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PluckSynth=void 0;var e=require("../component/filter/LowpassCombFilter"),t=require("../core/util/Defaults"),s=require("../source/Noise"),n=require("./Instrument");class i extends n.Instrument{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments)),this.name="PluckSynth";const n=(0,t.optionsFromArguments)(i.getDefaults(),arguments);this._noise=new s.Noise({context:this.context,type:"pink"}),this.attackNoise=n.attackNoise,this._lfcf=new e.LowpassCombFilter({context:this.context,dampening:n.dampening,resonance:n.resonance}),this.resonance=n.resonance,this.release=n.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return(0,t.deepMerge)(n.Instrument.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,t){const s=this.toFrequency(e);t=this.toSeconds(t);const n=1/s;return this._lfcf.delayTime.setValueAtTime(n,t),this._noise.start(t),this._noise.stop(t+n*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}exports.PluckSynth=i;
},{"../component/filter/LowpassCombFilter":"k9To","../core/util/Defaults":"yCwZ","../source/Noise":"sH37","./Instrument":"GdsE"}],"HCTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PolySynth=void 0;var e=require("../core/type/Midi"),t=require("../core/util/Defaults"),i=require("../core/util/TypeCheck"),s=require("./Instrument"),o=require("./Synth"),c=require("../core/util/Debug");class r extends s.Instrument{constructor(){super((0,t.optionsFromArguments)(r.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const e=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["voice","options"]);(0,c.assert)(!(0,i.isNumber)(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const s=e.voice.getDefaults();this.options=Object.assign(s,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const o=this._voices.indexOf(this._dummyVoice);this._voices.splice(o,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(s.Instrument.getDefaults(),{maxPolyphony:32,options:{},voice:o.Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(t=>t.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}(0,c.warn)("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(t,i,s){t.forEach(t=>{const o=new e.MidiClass(this.context,t).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(t,i,s),this._activeVoices.push({midi:o,voice:c,released:!1}),this.log("triggerAttack",t,i))})}_triggerRelease(t,i){t.forEach(t=>{const s=new e.MidiClass(this.context,t).toMidi(),o=this._activeVoices.find(({midi:e,released:t})=>e===s&&!t);o&&(o.voice.triggerRelease(i),o.released=!0,this.log("triggerRelease",t,i))})}_scheduleEvent(e,t,i,s){(0,c.assert)(!this.disposed,"Synth was already disposed"),i<=this.now()?"attack"===e?this._triggerAttack(t,i,s):this._triggerRelease(t,i):this.context.setTimeout(()=>{this._scheduleEvent(e,t,i,s)},i-this.now())}triggerAttack(e,t,i){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("attack",e,s,i),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const i=this.toSeconds(t);return this._scheduleEvent("release",e,i),this}triggerAttackRelease(e,t,s,o){const r=this.toSeconds(s);if(this.triggerAttack(e,r,o),(0,i.isArray)(t)){(0,c.assert)((0,i.isArray)(e),"If the duration is an array, the notes must also be an array"),e=e;for(let i=0;i<e.length;i++){const s=t[Math.min(i,t.length-1)],o=this.toSeconds(s);(0,c.assert)(o>0,"The duration must be greater than 0"),this.triggerRelease(e[i],r+o)}}else{const i=this.toSeconds(t);(0,c.assert)(i>0,"The duration must be greater than 0"),this.triggerRelease(e,r+i)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){const i=(0,t.omitFromObject)(e,["onsilence","context"]);return this.options=(0,t.deepMerge)(this.options,i),this._voices.forEach(e=>e.set(i)),this._dummyVoice.set(i),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:e})=>{e.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}exports.PolySynth=r;
},{"../core/type/Midi":"VVIA","../core/util/Defaults":"yCwZ","../core/util/TypeCheck":"h36b","./Instrument":"GdsE","./Synth":"blVo","../core/util/Debug":"Udbo"}],"nfkK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sampler=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioBuffers"),r=require("../core/type/Conversions"),s=require("../core/type/Frequency"),i=require("../core/util/Defaults"),o=require("../core/util/Interface"),a=require("../core/util/TypeCheck"),n=require("../instrument/Instrument"),c=require("../source/buffer/ToneBufferSource"),u=require("../core/util/Decorator"),h=require("../core/util/Debug");class l extends n.Instrument{constructor(){super((0,i.optionsFromArguments)(l.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=(0,i.optionsFromArguments)(l.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),r={};Object.keys(e.urls).forEach(t=>{const i=parseInt(t,10);if((0,h.assert)((0,a.isNote)(t)||(0,a.isNumber)(i)&&isFinite(i),`url key is neither a note or midi pitch: ${t}`),(0,a.isNote)(t)){const i=new s.FrequencyClass(this.context,t).toMidi();r[i]=e.urls[t]}else(0,a.isNumber)(i)&&isFinite(i)&&(r[i]=e.urls[i])}),this._buffers=new t.ToneAudioBuffers({urls:r,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(n.Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:o.noOp,onerror:o.noOp,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,i=1){return this.log("triggerAttack",e,t,i),Array.isArray(e)||(e=[e]),e.forEach(e=>{const o=(0,r.ftomf)(new s.FrequencyClass(this.context,e).toFrequency()),n=Math.round(o),u=o-n,h=this._findClosest(n),l=n-h,f=this._buffers.get(l),d=(0,r.intervalToFrequencyRatio)(h+u),g=new c.ToneBufferSource({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);g.start(t,0,f.duration/d,i),(0,a.isArray)(this._activeSources.get(n))||this._activeSources.set(n,[]),this._activeSources.get(n).push(g),g.onended=(()=>{if(this._activeSources&&this._activeSources.has(n)){const e=this._activeSources.get(n),t=e.indexOf(g);-1!==t&&e.splice(t,1)}})}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{const r=new s.FrequencyClass(this.context,e).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const e=this._activeSources.get(r);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;){e.shift().stop(t)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),(0,a.isArray)(t)?((0,h.assert)((0,a.isArray)(e),"notes must be an array when duration is array"),e.forEach((e,r)=>{const s=t[Math.min(r,t.length-1)];this.triggerRelease(e,i+this.toSeconds(s))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,r){if((0,h.assert)((0,a.isNote)(e)||isFinite(e),`note must be a pitch or midi: ${e}`),(0,a.isNote)(e)){const i=new s.FrequencyClass(this.context,e).toMidi();this._buffers.add(i,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}exports.Sampler=l,(0,e.__decorate)([(0,u.timeRange)(0)],l.prototype,"attack",void 0),(0,e.__decorate)([(0,u.timeRange)(0)],l.prototype,"release",void 0);
},{"tslib":"CvJj","../core/context/ToneAudioBuffers":"K3lE","../core/type/Conversions":"obhM","../core/type/Frequency":"rvND","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../core/util/TypeCheck":"h36b","../instrument/Instrument":"GdsE","../source/buffer/ToneBufferSource":"B9Sq","../core/util/Decorator":"DFdA","../core/util/Debug":"Udbo"}],"o1w8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AMSynth");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./DuoSynth");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./FMSynth");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var n=require("./MetalSynth");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var o=require("./MembraneSynth");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var u=require("./MonoSynth");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var s=require("./NoiseSynth");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./PluckSynth");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var i=require("./PolySynth");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var f=require("./Sampler");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var a=require("./Synth");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});
},{"./AMSynth":"E8dm","./DuoSynth":"DXoo","./FMSynth":"nmdo","./MetalSynth":"LVGQ","./MembraneSynth":"N0hC","./MonoSynth":"VGBU","./NoiseSynth":"igvz","./PluckSynth":"CkD3","./PolySynth":"HCTB","./Sampler":"nfkK","./Synth":"blVo"}],"MLvd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneEvent=void 0,require("../core/clock/Transport");var t=require("../core/context/ToneWithContext"),e=require("../core/type/Ticks"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),o=require("../core/util/StateTimeline"),a=require("../core/util/TypeCheck");class r extends t.ToneWithContext{constructor(){super((0,s.optionsFromArguments)(r.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new o.StateTimeline("stopped"),this._startOffset=0;const t=(0,s.optionsFromArguments)(r.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(t.ToneWithContext.getDefaults(),{callback:i.noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,t=>{let s;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const i=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||(0,a.isNumber)(this._loop)&&this._loop>1){s=1/0,(0,a.isNumber)(this._loop)&&(s=this._loop*this._getLoopDuration());const o=this._state.getAfter(i);null!==o&&(s=Math.min(s,o.time-i)),s!==1/0&&(this._state.setStateAtTime("stopped",i+s+1,{id:-1}),s=new e.TicksClass(this.context,s));const r=new e.TicksClass(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),r,new e.TicksClass(this.context,i),s)}else t.id=this.context.transport.schedule(this._tick.bind(this),new e.TicksClass(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let s=e;null!==t&&(s=t.time),this._rescheduleEvents(s)}return this}cancel(t){t=(0,s.defaultArg)(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,t=>{this.context.transport.clear(t.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;(0,a.isBoolean)(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new e.TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new e.TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const s=this._getLoopDuration();return(t-e.time)%s/s}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}exports.ToneEvent=r;
},{"../core/clock/Transport":"h949","../core/context/ToneWithContext":"WXkP","../core/type/Ticks":"fIIf","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../core/util/StateTimeline":"JZoQ","../core/util/TypeCheck":"h36b"}],"WJDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loop=void 0;var t=require("./ToneEvent"),e=require("../core/context/ToneWithContext"),i=require("../core/util/Defaults"),s=require("../core/util/Interface");class n extends e.ToneWithContext{constructor(){super((0,i.optionsFromArguments)(n.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const e=(0,i.optionsFromArguments)(n.getDefaults(),arguments,["callback","interval"]);this._event=new t.ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(e.ToneWithContext.getDefaults(),{interval:"4n",callback:s.noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}exports.Loop=n;
},{"./ToneEvent":"MLvd","../core/context/ToneWithContext":"WXkP","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z"}],"gMQ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Part=void 0;var t=require("../core/type/Ticks"),s=require("../core/type/TransportTime"),e=require("../core/util/Defaults"),i=require("../core/util/StateTimeline"),o=require("../core/util/TypeCheck"),a=require("./ToneEvent");class r extends a.ToneEvent{constructor(){super((0,e.optionsFromArguments)(r.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new i.StateTimeline("stopped"),this._events=new Set;const t=(0,e.optionsFromArguments)(r.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(t=>{(0,o.isArray)(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(a.ToneEvent.getDefaults(),{events:[]})}start(t,s){const i=this.toTicks(t);if("started"!==this._state.getValueAtTime(i)){s=(0,e.defaultArg)(s,this._loop?this._loopStart:0),s=this._loop?(0,e.defaultArg)(s,this._loopStart):(0,e.defaultArg)(s,0);const t=this.toTicks(s);this._state.add({id:-1,offset:t,state:"started",time:i}),this._forEach(s=>{this._startNote(s,i,t)})}return this}_startNote(s,e,i){e-=i,this._loop?s.startOffset>=this._loopStart&&s.startOffset<this._loopEnd?(s.startOffset<i&&(e+=this._getLoopDuration()),s.start(new t.TicksClass(this.context,e))):s.startOffset<this._loopStart&&s.startOffset>=i&&(s.loop=!1,s.start(new t.TicksClass(this.context,e))):s.startOffset>=i&&s.start(new t.TicksClass(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(t){const s=this.toTicks(t);return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._forEach(s=>{s.stop(t)}),this}at(e,i){const a=new s.TransportTimeClass(this.context,e).toTicks(),r=new t.TicksClass(this.context,1).toSeconds(),h=this._events.values();let n=h.next();for(;!n.done;){const t=n.value;if(Math.abs(a-t.startOffset)<r)return(0,o.isDefined)(i)&&(t.value=i),t;n=h.next()}return(0,o.isDefined)(i)?(this.add(e,i),this.at(e)):null}add(t,s){t instanceof Object&&Reflect.has(t,"time")&&(t=(s=t).time);const e=this.toTicks(t);let i;return s instanceof a.ToneEvent?(i=s).callback=this._tick.bind(this):i=new a.ToneEvent({callback:this._tick.bind(this),context:this.context,value:s}),i.startOffset=e,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(s){this._state.forEach(e=>{"started"===e.state?this._startNote(s,e.time,e.offset):s.stop(new t.TicksClass(this.context,e.time))})}remove(t,s){return(0,o.isObject)(t)&&t.hasOwnProperty("time")&&(t=(s=t).time),t=this.toTicks(t),this._events.forEach(e=>{e.startOffset===t&&((0,o.isUndef)(s)||(0,o.isDefined)(s)&&e.value===s)&&(this._events.delete(e),e.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(s=>s.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(s=>{s instanceof r?s._forEach(t):t(s)}),this}_setAll(t,s){this._forEach(e=>{e[t]=s})}_tick(t,s){this.mute||this.callback(t,s)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(s=>{s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.loop=t,this._testLoopBoundries(s)})}get loopEnd(){return new t.TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(s=>{s.loopEnd=t,this._testLoopBoundries(s)})}get loopStart(){return new t.TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}exports.Part=r;
},{"../core/type/Ticks":"fIIf","../core/type/TransportTime":"SI88","../core/util/Defaults":"yCwZ","../core/util/StateTimeline":"JZoQ","../core/util/TypeCheck":"h36b","./ToneEvent":"MLvd"}],"WjXt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PatternGenerator=f;var e=require("../core/util/Debug"),t=require("../core/util/Math");function*n(e){let t=0;for(;t<e.length;)t=r(t,e),yield e[t],t++}function*l(e){let t=e.length-1;for(;t>=0;)t=r(t,e),yield e[t],t--}function*o(e,t){for(;;)yield*t(e)}function r(e,n){return(0,t.clamp)(e,0,n.length-1)}function*a(e,t){let n=t?0:e.length-1;for(;;)n=r(n,e),yield e[n],t?++n>=e.length-1&&(t=!1):--n<=0&&(t=!0)}function*i(e){let t=0,n=0;for(;t<e.length;)t=r(t,e),yield e[t],t+=++n%2?2:-1}function*c(e){let t=e.length-1,n=0;for(;t>=0;)t=r(t,e),yield e[t],t+=++n%2?-2:1}function*d(e){for(;;){const t=Math.floor(Math.random()*e.length);yield e[t]}}function*h(e){const t=[];for(let n=0;n<e.length;n++)t.push(n);for(;t.length>0;){const n=r(t.splice(Math.floor(t.length*Math.random()),1)[0],e);yield e[n]}}function*u(e){let t=Math.floor(Math.random()*e.length);for(;;)0===t?t++:t===e.length-1?t--:Math.random()<.5?t--:t++,yield e[t]}function*f(t,r="up",f=0){switch((0,e.assert)(t.length>0,"The array must have more than one value in it"),r){case"up":yield*o(t,n);case"down":yield*o(t,l);case"upDown":yield*a(t,!0);case"downUp":yield*a(t,!1);case"alternateUp":yield*o(t,i);case"alternateDown":yield*o(t,c);case"random":yield*d(t);case"randomOnce":yield*o(t,h);case"randomWalk":yield*u(t)}}
},{"../core/util/Debug":"Udbo","../core/util/Math":"BX2C"}],"g2l4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pattern=void 0;var t=require("./Loop"),e=require("./PatternGenerator"),a=require("../core/util/Defaults"),s=require("../core/util/Interface");class r extends t.Loop{constructor(){super((0,a.optionsFromArguments)(r.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=(0,a.optionsFromArguments)(r.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=(0,e.PatternGenerator)(t.values,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(t.Loop.getDefaults(),{pattern:"up",values:[],callback:s.noOp})}_tick(t){const e=this._pattern.next();this._value=e.value,this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=(0,e.PatternGenerator)(this._values,this._type)}}exports.Pattern=r;
},{"./Loop":"WJDM","./PatternGenerator":"WjXt","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z"}],"KoTG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sequence=void 0;var t=require("../core/type/Ticks"),e=require("../core/util/Defaults"),s=require("../core/util/TypeCheck"),i=require("./Part"),r=require("./ToneEvent");class a extends r.ToneEvent{constructor(){super((0,e.optionsFromArguments)(a.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new i.Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=(0,e.optionsFromArguments)(a.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign((0,e.omitFromObject)(r.ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null!==e&&this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new t.TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,i)=>((0,s.isString)(e)&&isFinite(parseInt(e,10))&&(0,s.isArray)(i)?t[e]=this._createSequence(i):t[e]=i,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,i,r){e.forEach((e,a)=>{const n=a*i+r;if((0,s.isArray)(e))this._rescheduleSequence(e,i/e.length,n);else{const s=new t.TicksClass(this.context,n,"i").toSeconds();this._part.add(s,e)}})}_indexTime(e){return new t.TicksClass(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}exports.Sequence=a;
},{"../core/type/Ticks":"fIIf","../core/util/Defaults":"yCwZ","../core/util/TypeCheck":"h36b","./Part":"gMQ9","./ToneEvent":"MLvd"}],"ssrD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Loop");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./Part");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./Pattern");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./Sequence");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./ToneEvent");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});
},{"./Loop":"WJDM","./Part":"gMQ9","./Pattern":"g2l4","./Sequence":"KoTG","./ToneEvent":"MLvd"}],"G90N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CrossFade=void 0;var t=require("../../core/context/Gain"),e=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),i=require("../../signal/GainToAudio"),o=require("../../signal/Signal");class a extends e.ToneAudioNode{constructor(){super(Object.assign((0,n.optionsFromArguments)(a.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new i.GainToAudio({context:this.context}),this.a=new t.Gain({context:this.context,gain:0}),this.b=new t.Gain({context:this.context,gain:0}),this.output=new t.Gain({context:this.context}),this._internalChannels=[this.a,this.b];const r=(0,n.optionsFromArguments)(a.getDefaults(),arguments,["fade"]);this.fade=new o.Signal({context:this.context,units:"normalRange",value:r.fade}),(0,s.readOnly)(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",(0,e.connect)(this._split,this.a.gain,0),(0,e.connect)(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}exports.CrossFade=a;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/GainToAudio":"ebPL","../../signal/Signal":"JkWs"}],"hBxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Effect=void 0;var e=require("../component/channel/CrossFade"),t=require("../core/context/Gain"),s=require("../core/context/ToneAudioNode"),i=require("../core/util/Interface");class n extends s.ToneAudioNode{constructor(s){super(s),this.name="Effect",this._dryWet=new e.CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new t.Gain({context:this.context}),this.effectReturn=new t.Gain({context:this.context}),this.input=new t.Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(s.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],(0,i.readOnly)(this,"wet")}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}exports.Effect=n;
},{"../component/channel/CrossFade":"G90N","../core/context/Gain":"zza1","../core/context/ToneAudioNode":"aL0a","../core/util/Interface":"FB0z"}],"wzs3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LFOEffect=void 0;var e=require("../effect/Effect"),t=require("../source/oscillator/LFO"),s=require("../core/util/Interface");class r extends e.Effect{constructor(e){super(e),this.name="LFOEffect",this._lfo=new t.LFO({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,(0,s.readOnly)(this,["frequency","depth"])}static getDefaults(){return Object.assign(e.Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}exports.LFOEffect=r;
},{"../effect/Effect":"hBxW","../source/oscillator/LFO":"Fd5C","../core/util/Interface":"FB0z"}],"w2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoFilter=void 0;var e=require("../component/filter/Filter"),t=require("../core/util/Defaults"),s=require("./LFOEffect");class r extends s.LFOEffect{constructor(){super((0,t.optionsFromArguments)(r.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const s=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new e.Filter(Object.assign(s.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=s.octaves,this.baseFrequency=s.baseFrequency}static getDefaults(){return Object.assign(s.LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}exports.AutoFilter=r;
},{"../component/filter/Filter":"ANuX","../core/util/Defaults":"yCwZ","./LFOEffect":"wzs3"}],"Vwws":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panner=void 0;var e=require("../../core/context/Param"),n=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("../../core/util/Interface");class r extends n.ToneAudioNode{constructor(){super(Object.assign((0,t.optionsFromArguments)(r.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const n=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["pan"]);this.pan=new e.Param({context:this.context,param:this._panner.pan,value:n.pan,minValue:-1,maxValue:1}),this._panner.channelCount=n.channelCount,this._panner.channelCountMode="explicit",(0,s.readOnly)(this,"pan")}static getDefaults(){return Object.assign(n.ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}exports.Panner=r;
},{"../../core/context/Param":"LwOA","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z"}],"JCgm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoPanner=void 0;var e=require("../component/channel/Panner"),t=require("../core/util/Defaults"),n=require("./LFOEffect");class s extends n.LFOEffect{constructor(){super((0,t.optionsFromArguments)(s.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const n=(0,t.optionsFromArguments)(s.getDefaults(),arguments,["frequency"]);this._panner=new e.Panner({context:this.context,channelCount:n.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(n.LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}exports.AutoPanner=s;
},{"../component/channel/Panner":"Vwws","../core/util/Defaults":"yCwZ","./LFOEffect":"wzs3"}],"e598":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Follower=void 0;var t=require("../../core/context/ToneAudioNode"),s=require("../../core/util/Defaults"),e=require("../filter/OnePoleFilter"),o=require("../../signal/Abs");class i extends t.ToneAudioNode{constructor(){super((0,s.optionsFromArguments)(i.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=(0,s.optionsFromArguments)(i.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new o.Abs({context:this.context}),this._lowpass=this.output=new e.OnePoleFilter({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}exports.Follower=i;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../filter/OnePoleFilter":"x8G7","../../signal/Abs":"P1Xg"}],"Cad8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoWah=void 0;var e=require("./Effect"),t=require("../component/filter/Filter"),s=require("../component/analysis/Follower"),i=require("../core/util/Defaults"),n=require("../core/context/Gain"),o=require("../core/type/Conversions"),a=require("../signal/ScaleExp"),r=require("../core/util/Interface");class c extends e.Effect{constructor(){super((0,i.optionsFromArguments)(c.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const e=(0,i.optionsFromArguments)(c.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new s.Follower({context:this.context,smoothing:e.follower}),this._sweepRange=new a.ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new n.Gain({context:this.context}),this._bandpass=new t.Filter({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,(0,r.readOnly)(this,["gain","Q"])}static getDefaults(){return Object.assign(e.Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return(0,o.gainToDb)(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/(0,o.dbToGain)(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}exports.AutoWah=c;
},{"./Effect":"hBxW","../component/filter/Filter":"ANuX","../component/analysis/Follower":"e598","../core/util/Defaults":"yCwZ","../core/context/Gain":"zza1","../core/type/Conversions":"obhM","../signal/ScaleExp":"ZTsm","../core/util/Interface":"FB0z"}],"fWuU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitCrusherWorklet=exports.workletName=void 0,require("../core/worklet/SingleIOProcessor.worklet");var t=require("../core/worklet/WorkletGlobalScope");const e="bit-crusher";exports.workletName=e;const r="\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n";exports.bitCrusherWorklet=r,(0,t.registerProcessor)(e,r);
},{"../core/worklet/SingleIOProcessor.worklet":"QHTK","../core/worklet/WorkletGlobalScope":"oOWc"}],"zUEV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitCrusher=void 0;var t=require("../core/worklet/ToneAudioWorklet"),e=require("./Effect"),s=require("../core/context/Gain"),r=require("../core/util/Defaults"),i=require("../core/context/ToneAudioNode"),o=require("../core/context/Param"),u=require("./BitCrusher.worklet");class n extends e.Effect{constructor(){super((0,r.optionsFromArguments)(n.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new a({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(e.Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}exports.BitCrusher=n;class a extends t.ToneAudioWorklet{constructor(){super((0,r.optionsFromArguments)(a.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=(0,r.optionsFromArguments)(a.getDefaults(),arguments);this.input=new s.Gain({context:this.context}),this.output=new s.Gain({context:this.context}),this.bits=new o.Param({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(t.ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return u.workletName}onReady(t){(0,i.connectSeries)(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}
},{"../core/worklet/ToneAudioWorklet":"F5mU","./Effect":"hBxW","../core/context/Gain":"zza1","../core/util/Defaults":"yCwZ","../core/context/ToneAudioNode":"aL0a","../core/context/Param":"LwOA","./BitCrusher.worklet":"fWuU"}],"m9dZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chebyshev=void 0;var e=require("./Effect"),t=require("../core/util/Defaults"),s=require("../signal/WaveShaper");class r extends e.Effect{constructor(){super((0,t.optionsFromArguments)(r.getDefaults(),arguments,["order"])),this.name="Chebyshev";const e=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["order"]);this._shaper=new s.WaveShaper({context:this.context,length:4096}),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample}static getDefaults(){return Object.assign(e.Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(e,t,s){return s.has(t)?s.get(t):(0===t?s.set(t,0):1===t?s.set(t,e):s.set(t,2*e*this._getCoefficient(e,t-1,s)-this._getCoefficient(e,t-2,s)),s.get(t))}get order(){return this._order}set order(e){this._order=e,this._shaper.setMap(t=>this._getCoefficient(t,e,new Map))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}exports.Chebyshev=r;
},{"./Effect":"hBxW","../core/util/Defaults":"yCwZ","../signal/WaveShaper":"qAl9"}],"bquh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Split=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults");class s extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(s.getDefaults(),arguments,["channels"])),this.name="Split";const e=(0,t.optionsFromArguments)(s.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}exports.Split=s;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ"}],"Pm8x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Merge=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults");class s extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(s.getDefaults(),arguments,["channels"])),this.name="Merge";const e=(0,t.optionsFromArguments)(s.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}exports.Merge=s;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ"}],"WWjq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoEffect=void 0;var e=require("../core/context/ToneAudioNode"),t=require("../component/channel/CrossFade"),n=require("../component/channel/Split"),s=require("../core/context/Gain"),i=require("../component/channel/Merge"),o=require("../core/util/Interface");class c extends e.ToneAudioNode{constructor(e){super(e),this.name="StereoEffect",this.input=new s.Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new t.CrossFade({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new n.Split({context:this.context,channels:2}),this._merge=new i.Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),(0,o.readOnly)(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),(0,e.connectSeries)(...t),(0,e.connect)(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),(0,e.connectSeries)(...t),(0,e.connect)(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}exports.StereoEffect=c;
},{"../core/context/ToneAudioNode":"aL0a","../component/channel/CrossFade":"G90N","../component/channel/Split":"bquh","../core/context/Gain":"zza1","../component/channel/Merge":"Pm8x","../core/util/Interface":"FB0z"}],"j2m6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoFeedbackEffect=void 0;var e=require("./StereoEffect"),t=require("../signal/Signal"),c=require("../core/context/Gain"),i=require("../core/util/Interface"),s=require("../component/channel/Split"),n=require("../component/channel/Merge");class a extends e.StereoEffect{constructor(e){super(e),this.feedback=new t.Signal({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new c.Gain({context:this.context}),this._feedbackR=new c.Gain({context:this.context}),this._feedbackSplit=new s.Split({context:this.context,channels:2}),this._feedbackMerge=new n.Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),(0,i.readOnly)(this,["feedback"])}static getDefaults(){return Object.assign(e.StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}exports.StereoFeedbackEffect=a;
},{"./StereoEffect":"WWjq","../signal/Signal":"JkWs","../core/context/Gain":"zza1","../core/util/Interface":"FB0z","../component/channel/Split":"bquh","../component/channel/Merge":"Pm8x"}],"ZKQu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chorus=void 0;var e=require("../effect/StereoFeedbackEffect"),t=require("../core/util/Defaults"),s=require("../source/oscillator/LFO"),i=require("../core/context/Delay"),h=require("../core/util/Interface");class o extends e.StereoFeedbackEffect{constructor(){super((0,t.optionsFromArguments)(o.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const e=(0,t.optionsFromArguments)(o.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new s.LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new s.LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new i.Delay({context:this.context}),this._delayNodeR=new i.Delay({context:this.context}),this.frequency=this._lfoL.frequency,(0,h.readOnly)(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(e.StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return 1e3*this._delayTime}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}exports.Chorus=o;
},{"../effect/StereoFeedbackEffect":"j2m6","../core/util/Defaults":"yCwZ","../source/oscillator/LFO":"Fd5C","../core/context/Delay":"QhTE","../core/util/Interface":"FB0z"}],"lFUz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Distortion=void 0;var t=require("../core/util/Defaults"),e=require("../signal/WaveShaper"),s=require("./Effect");class o extends s.Effect{constructor(){super((0,t.optionsFromArguments)(o.getDefaults(),arguments,["distortion"])),this.name="Distortion";const s=(0,t.optionsFromArguments)(o.getDefaults(),arguments,["distortion"]);this._shaper=new e.WaveShaper({context:this.context,length:4096}),this._distortion=s.distortion,this.connectEffect(this._shaper),this.distortion=s.distortion,this.oversample=s.oversample}static getDefaults(){return Object.assign(s.Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,s=Math.PI/180;this._shaper.setMap(t=>Math.abs(t)<.001?0:(3+e)*t*20*s/(Math.PI+e*Math.abs(t)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}exports.Distortion=o;
},{"../core/util/Defaults":"yCwZ","../signal/WaveShaper":"qAl9","./Effect":"hBxW"}],"Q3tJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackEffect=void 0;var e=require("../core/context/Gain"),t=require("../core/util/Interface"),s=require("./Effect");class i extends s.Effect{constructor(s){super(s),this.name="FeedbackEffect",this._feedbackGain=new e.Gain({context:this.context,gain:s.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,(0,t.readOnly)(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(s.Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}exports.FeedbackEffect=i;
},{"../core/context/Gain":"zza1","../core/util/Interface":"FB0z","./Effect":"hBxW"}],"Whb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackDelay=void 0;var e=require("../core/context/Delay"),t=require("../core/util/Defaults"),a=require("../core/util/Interface"),s=require("./FeedbackEffect");class i extends s.FeedbackEffect{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const s=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new e.Delay({context:this.context,delayTime:s.delayTime,maxDelay:s.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),(0,a.readOnly)(this,"delayTime")}static getDefaults(){return Object.assign(s.FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}exports.FeedbackDelay=i;
},{"../core/context/Delay":"QhTE","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","./FeedbackEffect":"Q3tJ"}],"ylYh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhaseShiftAllpass=void 0;var t=require("../../core/context/Gain"),e=require("../../core/context/ToneAudioNode");class s extends e.ToneAudioNode{constructor(s){super(s),this.name="PhaseShiftAllpass",this.input=new t.Gain({context:this.context}),this.output=new t.Gain({context:this.context}),this.offset90=new t.Gain({context:this.context});this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),(0,e.connectSeries)(this.input,...this._bank0,this._oneSampleDelay,this.output),(0,e.connectSeries)(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map(t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(t=>t.disconnect()),this._bank1.forEach(t=>t.disconnect()),this._oneSampleDelay.disconnect(),this}}exports.PhaseShiftAllpass=s;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a"}],"af35":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrequencyShifter=void 0;var e=require("../component/filter/PhaseShiftAllpass"),t=require("../core/util/Defaults"),s=require("../effect/Effect"),i=require("../signal/Add"),n=require("../signal/Multiply"),c=require("../signal/Negate"),o=require("../signal/Signal"),r=require("../source/oscillator/Oscillator"),h=require("../source/oscillator/ToneOscillatorNode");class l extends s.Effect{constructor(){super((0,t.optionsFromArguments)(l.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const s=(0,t.optionsFromArguments)(l.getDefaults(),arguments,["frequency"]);this.frequency=new o.Signal({context:this.context,units:"frequency",value:s.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new h.ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new r.Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new n.Multiply({context:this.context}),this._cosineMultiply=new n.Multiply({context:this.context}),this._negate=new c.Negate({context:this.context}),this._add=new i.Add({context:this.context}),this._phaseShifter=new e.PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const a=this.immediate();this._sine.start(a),this._cosine.start(a)}static getDefaults(){return Object.assign(s.Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}exports.FrequencyShifter=l;
},{"../component/filter/PhaseShiftAllpass":"ylYh","../core/util/Defaults":"yCwZ","../effect/Effect":"hBxW","../signal/Add":"zttA","../signal/Multiply":"eXoZ","../signal/Negate":"zJZi","../signal/Signal":"JkWs","../source/oscillator/Oscillator":"chjT","../source/oscillator/ToneOscillatorNode":"DgcC"}],"Q8JO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Freeverb=void 0;var e=require("./StereoEffect"),t=require("../core/util/Defaults"),s=require("../core/util/Interface"),i=require("../signal/Signal"),r=require("../component/filter/LowpassCombFilter");const o=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],n=[225,556,441,341];class a extends e.StereoEffect{constructor(){super((0,t.optionsFromArguments)(a.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const e=(0,t.optionsFromArguments)(a.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new i.Signal({context:this.context,value:e.roomSize,units:"normalRange"}),this._allpassFiltersL=n.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._allpassFiltersR=n.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._combFilters=o.map((t,s)=>{const i=new r.LowpassCombFilter({context:this.context,dampening:e.dampening,delayTime:t});return s<o.length/2?this.connectEffectLeft(i,...this._allpassFiltersL):this.connectEffectRight(i,...this._allpassFiltersR),this.roomSize.connect(i.resonance),i}),(0,s.readOnly)(this,["roomSize"])}static getDefaults(){return Object.assign(e.StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(e){this._combFilters.forEach(t=>t.dampening=e)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(e=>e.disconnect()),this._allpassFiltersR.forEach(e=>e.disconnect()),this._combFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this}}exports.Freeverb=a;
},{"./StereoEffect":"WWjq","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../signal/Signal":"JkWs","../component/filter/LowpassCombFilter":"k9To"}],"YY8N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JCReverb=void 0;var e=require("./StereoEffect"),t=require("../core/util/Defaults"),s=require("../signal/Scale"),i=require("../signal/Signal"),o=require("../component/filter/FeedbackCombFilter"),r=require("../core/util/Interface");const a=[.06748,.06404,.08212,.09004],n=[.773,.802,.753,.733],c=[347,113,37];class l extends e.StereoEffect{constructor(){super((0,t.optionsFromArguments)(l.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const e=(0,t.optionsFromArguments)(l.getDefaults(),arguments,["roomSize"]);this.roomSize=new i.Signal({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new s.Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=c.map(e=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=e,t}),this._feedbackCombFilters=a.map((e,t)=>{const s=new o.FeedbackCombFilter({context:this.context,delayTime:e});return this._scaleRoomSize.connect(s.resonance),s.resonance.value=n[t],t<a.length/2?this.connectEffectLeft(...this._allpassFilters,s):this.connectEffectRight(...this._allpassFilters,s),s}),this.roomSize.connect(this._scaleRoomSize),(0,r.readOnly)(this,["roomSize"])}static getDefaults(){return Object.assign(e.StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}exports.JCReverb=l;
},{"./StereoEffect":"WWjq","../core/util/Defaults":"yCwZ","../signal/Scale":"HqaJ","../signal/Signal":"JkWs","../component/filter/FeedbackCombFilter":"PYKW","../core/util/Interface":"FB0z"}],"MycL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoXFeedbackEffect=void 0;var e=require("./StereoFeedbackEffect"),t=require("../core/util/Interface");class c extends e.StereoFeedbackEffect{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),(0,t.readOnly)(this,["feedback"])}}exports.StereoXFeedbackEffect=c;
},{"./StereoFeedbackEffect":"j2m6","../core/util/Interface":"FB0z"}],"xa2d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PingPongDelay=void 0;var e=require("./StereoXFeedbackEffect"),t=require("../core/util/Defaults"),i=require("../core/context/Delay"),a=require("../signal/Signal"),s=require("../core/util/Interface");class l extends e.StereoXFeedbackEffect{constructor(){super((0,t.optionsFromArguments)(l.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const e=(0,t.optionsFromArguments)(l.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new i.Delay({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new i.Delay({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new i.Delay({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new a.Signal({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),(0,s.readOnly)(this,["delayTime"])}static getDefaults(){return Object.assign(e.StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}exports.PingPongDelay=l;
},{"./StereoXFeedbackEffect":"MycL","../core/util/Defaults":"yCwZ","../core/context/Delay":"QhTE","../signal/Signal":"JkWs","../core/util/Interface":"FB0z"}],"oLfW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PitchShift=void 0;var e=require("./FeedbackEffect"),t=require("../core/util/Defaults"),i=require("../source/oscillator/LFO"),s=require("../core/context/Delay"),o=require("../component/channel/CrossFade"),n=require("../signal/Signal"),h=require("../core/util/Interface"),a=require("../core/type/Conversions");class c extends e.FeedbackEffect{constructor(){super((0,t.optionsFromArguments)(c.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const e=(0,t.optionsFromArguments)(c.getDefaults(),arguments,["pitch"]);this._frequency=new n.Signal({context:this.context}),this._delayA=new s.Delay({maxDelay:1,context:this.context}),this._lfoA=new i.LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new s.Delay({maxDelay:1,context:this.context}),this._lfoB=new i.LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new o.CrossFade({context:this.context}),this._crossFadeLFO=new i.LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new s.Delay({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,(0,h.readOnly)(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const a=this.now();this._lfoA.start(a),this._lfoB.start(a),this._crossFadeLFO.start(a),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(e.FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let t=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,t=(0,a.intervalToFrequencyRatio)(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,t=(0,a.intervalToFrequencyRatio)(e)-1),this._frequency.value=t*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}exports.PitchShift=c;
},{"./FeedbackEffect":"Q3tJ","../core/util/Defaults":"yCwZ","../source/oscillator/LFO":"Fd5C","../core/context/Delay":"QhTE","../component/channel/CrossFade":"G90N","../signal/Signal":"JkWs","../core/util/Interface":"FB0z","../core/type/Conversions":"obhM"}],"Q6GA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Phaser=void 0;var e=require("./StereoEffect"),t=require("../core/util/Defaults"),s=require("../source/oscillator/LFO"),i=require("../signal/Signal"),r=require("../core/util/Interface");class c extends e.StereoEffect{constructor(){super((0,t.optionsFromArguments)(c.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const e=(0,t.optionsFromArguments)(c.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new s.LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new s.LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new i.Signal({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),(0,r.readOnly)(this,["frequency","Q"])}static getDefaults(){return Object.assign(e.StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,t){const s=[];for(let i=0;i<e;i++){const e=this.context.createBiquadFilter();e.type="allpass",this.Q.connect(e.Q),t.connect(e.frequency),s.push(e)}return s}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const t=this._baseFrequency*Math.pow(2,e);this._lfoL.max=t,this._lfoR.max=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}exports.Phaser=c;
},{"./StereoEffect":"WWjq","../core/util/Defaults":"yCwZ","../source/oscillator/LFO":"Fd5C","../signal/Signal":"JkWs","../core/util/Interface":"FB0z"}],"byq8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reverb=void 0;var e=require("tslib"),t=require("../component/channel/Merge"),r=require("../core/context/Gain"),s=require("../core/util/Defaults"),n=require("../source/Noise"),i=require("./Effect"),o=require("../core/context/OfflineContext"),a=require("../core/util/Interface"),c=require("../core/util/Debug");class l extends i.Effect{constructor(){super((0,s.optionsFromArguments)(l.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=(0,s.optionsFromArguments)(l.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(i.Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),(0,c.assertRange)(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),(0,c.assertRange)(e,0),this._preDelay=e,this.generate()}generate(){return(0,e.__awaiter)(this,void 0,void 0,function*(){const e=this.ready,s=new o.OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),i=new n.Noise({context:s}),c=new n.Noise({context:s}),l=new t.Merge({context:s});i.connect(l,0,0),c.connect(l,0,1);const u=new r.Gain({context:s}).toDestination();l.connect(u),i.start(0),c.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const h=s.render();return this.ready=h.then(a.noOp),yield e,this._convolver.buffer=(yield h).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}exports.Reverb=l;
},{"tslib":"CvJj","../component/channel/Merge":"Pm8x","../core/context/Gain":"zza1","../core/util/Defaults":"yCwZ","../source/Noise":"sH37","./Effect":"hBxW","../core/context/OfflineContext":"t6al","../core/util/Interface":"FB0z","../core/util/Debug":"Udbo"}],"v3HR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideSplit=void 0;var t=require("../../core/context/ToneAudioNode"),i=require("./Split"),e=require("../../signal/Add"),s=require("../../signal/Multiply"),d=require("../../signal/Subtract"),n=require("../../core/util/Defaults");class o extends t.ToneAudioNode{constructor(){super((0,n.optionsFromArguments)(o.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new i.Split({channels:2,context:this.context}),this._midAdd=new e.Add({context:this.context}),this.mid=new s.Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new d.Subtract({context:this.context}),this.side=new s.Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}exports.MidSideSplit=o;
},{"../../core/context/ToneAudioNode":"aL0a","./Split":"bquh","../../signal/Add":"zttA","../../signal/Multiply":"eXoZ","../../signal/Subtract":"Ce3p","../../core/util/Defaults":"yCwZ"}],"ilqk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideMerge=void 0;var t=require("../../core/context/ToneAudioNode"),e=require("./Merge"),i=require("../../signal/Add"),s=require("../../signal/Multiply"),n=require("../../signal/Subtract"),o=require("../../core/context/Gain"),r=require("../../core/util/Defaults");class h extends t.ToneAudioNode{constructor(){super((0,r.optionsFromArguments)(h.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new o.Gain({context:this.context}),this.side=new o.Gain({context:this.context}),this._left=new i.Add({context:this.context}),this._leftMult=new s.Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new n.Subtract({context:this.context}),this._rightMult=new s.Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new e.Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}exports.MidSideMerge=h;
},{"../../core/context/ToneAudioNode":"aL0a","./Merge":"Pm8x","../../signal/Add":"zttA","../../signal/Multiply":"eXoZ","../../signal/Subtract":"Ce3p","../../core/context/Gain":"zza1","../../core/util/Defaults":"yCwZ"}],"jOcW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideEffect=void 0;var e=require("./Effect"),i=require("../component/channel/MidSideSplit"),t=require("../component/channel/MidSideMerge");class d extends e.Effect{constructor(e){super(e),this.name="MidSideEffect",this._midSideMerge=new t.MidSideMerge({context:this.context}),this._midSideSplit=new i.MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...e){this._midSend.chain(...e,this._midReturn)}connectEffectSide(...e){this._sideSend.chain(...e,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}exports.MidSideEffect=d;
},{"./Effect":"hBxW","../component/channel/MidSideSplit":"v3HR","../component/channel/MidSideMerge":"ilqk"}],"LIV3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoWidener=void 0;var t=require("../effect/MidSideEffect"),e=require("../signal/Signal"),i=require("../signal/Multiply"),s=require("../signal/Subtract"),n=require("../core/util/Defaults"),o=require("../core/util/Interface"),d=require("../core/context/ToneAudioNode");class h extends t.MidSideEffect{constructor(){super((0,n.optionsFromArguments)(h.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=(0,n.optionsFromArguments)(h.getDefaults(),arguments,["width"]);this.width=new e.Signal({context:this.context,value:t.width,units:"normalRange"}),(0,o.readOnly)(this,["width"]),this._twoTimesWidthMid=new i.Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new i.Multiply({context:this.context,value:2}),this._midMult=new i.Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new s.Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),(0,d.connect)(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new i.Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(t.MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}exports.StereoWidener=h;
},{"../effect/MidSideEffect":"jOcW","../signal/Signal":"JkWs","../signal/Multiply":"eXoZ","../signal/Subtract":"Ce3p","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z","../core/context/ToneAudioNode":"aL0a"}],"LFPE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tremolo=void 0;var t=require("./StereoEffect"),e=require("../source/oscillator/LFO"),s=require("../core/context/Gain"),i=require("../signal/Signal"),n=require("../core/util/Defaults"),o=require("../core/util/Interface");class r extends t.StereoEffect{constructor(){super((0,n.optionsFromArguments)(r.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=(0,n.optionsFromArguments)(r.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new e.LFO({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new e.LFO({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new s.Gain({context:this.context}),this._amplitudeR=new s.Gain({context:this.context}),this.frequency=new i.Signal({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new i.Signal({context:this.context,value:t.depth,units:"normalRange"}),(0,o.readOnly)(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(t.StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}exports.Tremolo=r;
},{"./StereoEffect":"WWjq","../source/oscillator/LFO":"Fd5C","../core/context/Gain":"zza1","../signal/Signal":"JkWs","../core/util/Defaults":"yCwZ","../core/util/Interface":"FB0z"}],"atmG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vibrato=void 0;var e=require("./Effect"),t=require("../core/util/Defaults"),s=require("../source/oscillator/LFO"),i=require("../core/context/Delay"),r=require("../core/util/Interface");class o extends e.Effect{constructor(){super((0,t.optionsFromArguments)(o.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const e=(0,t.optionsFromArguments)(o.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new i.Delay({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new s.LFO({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,(0,r.readOnly)(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(e.Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}exports.Vibrato=o;
},{"./Effect":"hBxW","../core/util/Defaults":"yCwZ","../source/oscillator/LFO":"Fd5C","../core/context/Delay":"QhTE","../core/util/Interface":"FB0z"}],"qHYS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AutoFilter");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./AutoPanner");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./AutoWah");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./BitCrusher");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./Chebyshev");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./Chorus");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var i=require("./Distortion");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var s=require("./FeedbackDelay");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./FrequencyShifter");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var f=require("./Freeverb");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var a=require("./JCReverb");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var p=require("./PingPongDelay");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var b=require("./PitchShift");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var l=require("./Phaser");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var d=require("./Reverb");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var x=require("./StereoWidener");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});var y=require("./Tremolo");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}}))});var _=require("./Vibrato");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}}))});
},{"./AutoFilter":"w2xv","./AutoPanner":"JCgm","./AutoWah":"Cad8","./BitCrusher":"zUEV","./Chebyshev":"m9dZ","./Chorus":"ZKQu","./Distortion":"lFUz","./FeedbackDelay":"Whb5","./FrequencyShifter":"af35","./Freeverb":"Q8JO","./JCReverb":"YY8N","./PingPongDelay":"xa2d","./PitchShift":"oLfW","./Phaser":"Q6GA","./Reverb":"byq8","./StereoWidener":"LIV3","./Tremolo":"LFPE","./Vibrato":"atmG"}],"YA7u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Analyser=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("../channel/Split"),n=require("../../core/context/Gain"),i=require("../../core/util/Debug");class r extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(r.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const e=(0,t.optionsFromArguments)(r.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new n.Gain({context:this.context}),this._split=new s.Split({context:this.context,channels:e.channels}),this.input.connect(this._split),(0,i.assertRange)(e.channels,1);for(let t=0;t<e.channels;t++)this._analysers[t]=this.context.createAnalyser(),this._split.connect(this._analysers[t],t,0);this.size=e.size,this.type=e.type}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,t)=>{const s=this._buffers[t];"fft"===this._type?e.getFloatFrequencyData(s):"waveform"===this._type&&e.getFloatTimeDomainData(s)}),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((t,s)=>{t.fftSize=2*e,this._buffers[s]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){(0,i.assert)("waveform"===e||"fft"===e,`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(t=>t.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}exports.Analyser=r;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../channel/Split":"bquh","../../core/context/Gain":"zza1","../../core/util/Debug":"Udbo"}],"OHpM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeterBase=void 0;var e=require("../../core/context/ToneAudioNode"),s=require("../../core/util/Defaults"),t=require("./Analyser");class r extends e.ToneAudioNode{constructor(){super((0,s.optionsFromArguments)(r.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new t.Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}exports.MeterBase=r;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./Analyser":"YA7u"}],"kImO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Meter=void 0;var e=require("../../core/type/Conversions"),t=require("../../core/util/Defaults"),s=require("./MeterBase"),r=require("../../core/util/Debug"),n=require("./Analyser");class a extends s.MeterBase{constructor(){super((0,t.optionsFromArguments)(a.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const e=(0,t.optionsFromArguments)(a.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new n.Analyser({context:this.context,size:256,type:"waveform",channels:e.channels}),this.smoothing=e.smoothing,this.normalRange=e.normalRange}static getDefaults(){return Object.assign(s.MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return(0,r.warn)("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),s=(1===this.channels?[t]:t).map(t=>{const s=t.reduce((e,t)=>e+t*t,0),r=Math.sqrt(s/t.length);return this._rms=Math.max(r,this._rms*this.smoothing),this.normalRange?this._rms:(0,e.gainToDb)(this._rms)});return 1===this.channels?s[0]:s}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}exports.Meter=a;
},{"../../core/type/Conversions":"obhM","../../core/util/Defaults":"yCwZ","./MeterBase":"OHpM","../../core/util/Debug":"Udbo","./Analyser":"YA7u"}],"Qode":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FFT=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/type/Conversions"),s=require("../../core/util/Defaults"),r=require("./MeterBase"),i=require("../../core/util/Debug");class n extends r.MeterBase{constructor(){super((0,s.optionsFromArguments)(n.getDefaults(),arguments,["size"])),this.name="FFT";const e=(0,s.optionsFromArguments)(n.getDefaults(),arguments,["size"]);this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(e=>this.normalRange?(0,t.dbToGain)(e):e)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return(0,i.assert)(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(2*this.size)}}exports.FFT=n;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/type/Conversions":"obhM","../../core/util/Defaults":"yCwZ","./MeterBase":"OHpM","../../core/util/Debug":"Udbo"}],"dQV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DCMeter=void 0;var e=require("../../core/util/Defaults"),t=require("./MeterBase");class r extends t.MeterBase{constructor(){super((0,e.optionsFromArguments)(r.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}exports.DCMeter=r;
},{"../../core/util/Defaults":"yCwZ","./MeterBase":"OHpM"}],"LSfK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Waveform=void 0;var e=require("../../core/util/Defaults"),s=require("./MeterBase");class t extends s.MeterBase{constructor(){super((0,e.optionsFromArguments)(t.getDefaults(),arguments,["size"])),this.name="Waveform";const s=(0,e.optionsFromArguments)(t.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=s.size}static getDefaults(){return Object.assign(s.MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(e){this._analyser.size=e}}exports.Waveform=t;
},{"../../core/util/Defaults":"yCwZ","./MeterBase":"OHpM"}],"QJZf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Solo=void 0;var t=require("../../core/context/Gain"),o=require("../../core/context/ToneAudioNode"),e=require("../../core/util/Defaults");class s extends o.ToneAudioNode{constructor(){super((0,e.optionsFromArguments)(s.getDefaults(),arguments,["solo"])),this.name="Solo";const o=(0,e.optionsFromArguments)(s.getDefaults(),arguments,["solo"]);this.input=this.output=new t.Gain({context:this.context}),s._allSolos.has(this.context)||s._allSolos.set(this.context,new Set),s._allSolos.get(this.context).add(this),this.solo=o.solo}static getDefaults(){return Object.assign(o.ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),s._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){s._soloed.has(this.context)||s._soloed.set(this.context,new Set),s._soloed.get(this.context).add(this)}_removeSolo(){s._soloed.has(this.context)&&s._soloed.get(this.context).delete(this)}_isSoloed(){return s._soloed.has(this.context)&&s._soloed.get(this.context).has(this)}_noSolos(){return!s._soloed.has(this.context)||s._soloed.has(this.context)&&0===s._soloed.get(this.context).size}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),s._allSolos.get(this.context).delete(this),this._removeSolo(),this}}exports.Solo=s,s._allSolos=new Map,s._soloed=new Map;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ"}],"GSIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PanVol=void 0;var e=require("../../core/util/Interface"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),n=require("./Panner"),s=require("./Volume");class u extends t.ToneAudioNode{constructor(){super((0,o.optionsFromArguments)(u.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=(0,o.optionsFromArguments)(u.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new n.Panner({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new s.Volume({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,(0,e.readOnly)(this,["pan","volume"])}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}exports.PanVol=u;
},{"../../core/util/Interface":"FB0z","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./Panner":"Vwws","./Volume":"xqtY"}],"wjTe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Channel=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),o=require("./Solo"),s=require("./PanVol"),n=require("../../core/util/Interface"),u=require("../../core/context/Gain");class i extends e.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new o.Solo({solo:e.solo,context:this.context}),this._panVol=this.output=new s.PanVol({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),(0,n.readOnly)(this,["pan","volume"])}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return i.buses.has(e)||i.buses.set(e,new u.Gain({context:this.context})),i.buses.get(e)}send(e,t=0){const o=this._getBus(e),s=new u.Gain({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(o),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}exports.Channel=i,i.buses=new Map;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./Solo":"QJZf","./PanVol":"GSIp","../../core/util/Interface":"FB0z","../../core/context/Gain":"zza1"}],"z1Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mono=void 0;var e=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),s=require("./Merge");class i extends t.ToneAudioNode{constructor(){super((0,o.optionsFromArguments)(i.getDefaults(),arguments)),this.name="Mono",this.input=new e.Gain({context:this.context}),this._merge=this.output=new s.Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}exports.Mono=i;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./Merge":"Pm8x"}],"zg1u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultibandSplit=void 0;var e=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),i=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),n=require("../../signal/Signal"),h=require("../filter/Filter");class o extends t.ToneAudioNode{constructor(){super((0,i.optionsFromArguments)(o.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new e.Gain({context:this.context}),this.output=void 0,this.low=new h.Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new h.Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new h.Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new h.Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=(0,i.optionsFromArguments)(o.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new n.Signal({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new n.Signal({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new n.Signal({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),(0,s.readOnly)(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),(0,s.writable)(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}exports.MultibandSplit=o;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../../signal/Signal":"JkWs","../filter/Filter":"ANuX"}],"qNLb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Listener=void 0;var t=require("./ToneAudioNode"),e=require("./Param"),o=require("./ContextInitialization");class s extends t.ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new e.Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new e.Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new e.Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new e.Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new e.Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new e.Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new e.Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new e.Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new e.Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}exports.Listener=s,(0,o.onContextInit)(t=>{t.listener=new s({context:t})}),(0,o.onContextClose)(t=>{t.listener.dispose()});
},{"./ToneAudioNode":"aL0a","./Param":"LwOA","./ContextInitialization":"ziki"}],"T7IC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panner3D=void 0;var e=require("../../core/context/Param"),n=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults");require("../../core/context/Listener");class i extends n.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(i.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const n=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=n.panningModel,this.maxDistance=n.maxDistance,this.distanceModel=n.distanceModel,this.coneOuterGain=n.coneOuterGain,this.coneOuterAngle=n.coneOuterAngle,this.coneInnerAngle=n.coneInnerAngle,this.refDistance=n.refDistance,this.rolloffFactor=n.rolloffFactor,this.positionX=new e.Param({context:this.context,param:this._panner.positionX,value:n.positionX}),this.positionY=new e.Param({context:this.context,param:this._panner.positionY,value:n.positionY}),this.positionZ=new e.Param({context:this.context,param:this._panner.positionZ,value:n.positionZ}),this.orientationX=new e.Param({context:this.context,param:this._panner.orientationX,value:n.orientationX}),this.orientationY=new e.Param({context:this.context,param:this._panner.orientationY,value:n.orientationY}),this.orientationZ=new e.Param({context:this.context,param:this._panner.orientationZ,value:n.orientationZ})}static getDefaults(){return Object.assign(n.ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,n,t){return this.positionX.value=e,this.positionY.value=n,this.positionZ.value=t,this}setOrientation(e,n,t){return this.orientationX.value=e,this.orientationY.value=n,this.orientationZ.value=t,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}exports.Panner3D=i;
},{"../../core/context/Param":"LwOA","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/context/Listener":"qNLb"}],"e0on":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/context/Gain"),s=require("../../core/util/Debug"),i=require("../../core/context/AudioContext"),o=require("../../core/util/Defaults");class a extends t.ToneAudioNode{constructor(){super((0,o.optionsFromArguments)(a.getDefaults(),arguments)),this.name="Recorder";const e=(0,o.optionsFromArguments)(a.getDefaults(),arguments);this.input=new r.Gain({context:this.context}),(0,s.assert)(a.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return t.ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==i.theWindow&&Reflect.has(i.theWindow,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return(0,e.__awaiter)(this,void 0,void 0,function*(){(0,s.assert)("started"!==this.state,"Recorder is already started");const e=new Promise(e=>{const t=()=>{this._recorder.removeEventListener("start",t,!1),e()};this._recorder.addEventListener("start",t,!1)});return this._recorder.start(),yield e})}stop(){return(0,e.__awaiter)(this,void 0,void 0,function*(){(0,s.assert)("stopped"!==this.state,"Recorder is not started");const e=new Promise(e=>{const t=r=>{this._recorder.removeEventListener("dataavailable",t,!1),e(r.data)};this._recorder.addEventListener("dataavailable",t,!1)});return this._recorder.stop(),yield e})}pause(){return(0,s.assert)("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}exports.Recorder=a;
},{"tslib":"CvJj","../../core/context/ToneAudioNode":"aL0a","../../core/context/Gain":"zza1","../../core/util/Debug":"Udbo","../../core/context/AudioContext":"uw8f","../../core/util/Defaults":"yCwZ"}],"RNIK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Compressor=void 0;var e=require("../../core/context/Param"),s=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),r=require("../../core/util/Interface");class o extends s.ToneAudioNode{constructor(){super((0,t.optionsFromArguments)(o.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const s=(0,t.optionsFromArguments)(o.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new e.Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:s.threshold}),this.attack=new e.Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:s.attack}),this.release=new e.Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:s.release}),this.knee=new e.Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:s.knee}),this.ratio=new e.Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:s.ratio}),(0,r.readOnly)(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(s.ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}exports.Compressor=o;
},{"../../core/context/Param":"LwOA","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z"}],"lvuC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gate=void 0;var t=require("../../core/context/ToneAudioNode"),e=require("../../signal/GreaterThan"),o=require("../../core/context/Gain"),s=require("../analysis/Follower"),i=require("../../core/util/Defaults"),n=require("../../core/type/Conversions");class r extends t.ToneAudioNode{constructor(){super(Object.assign((0,i.optionsFromArguments)(r.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=(0,i.optionsFromArguments)(r.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new s.Follower({context:this.context,smoothing:t.smoothing}),this._gt=new e.GreaterThan({context:this.context,value:(0,n.dbToGain)(t.threshold)}),this.input=new o.Gain({context:this.context}),this._gate=this.output=new o.Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return(0,n.gainToDb)(this._gt.value)}set threshold(t){this._gt.value=(0,n.dbToGain)(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}exports.Gate=r;
},{"../../core/context/ToneAudioNode":"aL0a","../../signal/GreaterThan":"OI9q","../../core/context/Gain":"zza1","../analysis/Follower":"e598","../../core/util/Defaults":"yCwZ","../../core/type/Conversions":"obhM"}],"JBsx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Limiter=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("../../core/util/Defaults"),s=require("./Compressor"),r=require("../../core/util/Interface");class o extends e.ToneAudioNode{constructor(){super(Object.assign((0,t.optionsFromArguments)(o.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const e=(0,t.optionsFromArguments)(o.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new s.Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,(0,r.readOnly)(this,"threshold")}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}exports.Limiter=o;
},{"../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","./Compressor":"RNIK","../../core/util/Interface":"FB0z"}],"ZN2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideCompressor=void 0;var e=require("../../core/context/ToneAudioNode"),i=require("./Compressor"),t=require("../../core/util/Defaults"),s=require("../channel/MidSideSplit"),d=require("../channel/MidSideMerge"),r=require("../../core/util/Interface");class o extends e.ToneAudioNode{constructor(){super(Object.assign((0,t.optionsFromArguments)(o.getDefaults(),arguments))),this.name="MidSideCompressor";const e=(0,t.optionsFromArguments)(o.getDefaults(),arguments);this._midSideSplit=this.input=new s.MidSideSplit({context:this.context}),this._midSideMerge=this.output=new d.MidSideMerge({context:this.context}),this.mid=new i.Compressor(Object.assign(e.mid,{context:this.context})),this.side=new i.Compressor(Object.assign(e.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),(0,r.readOnly)(this,["mid","side"])}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}exports.MidSideCompressor=o;
},{"../../core/context/ToneAudioNode":"aL0a","./Compressor":"RNIK","../../core/util/Defaults":"yCwZ","../channel/MidSideSplit":"v3HR","../channel/MidSideMerge":"ilqk","../../core/util/Interface":"FB0z"}],"mT7Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultibandCompressor=void 0;var e=require("../../core/context/ToneAudioNode"),t=require("./Compressor"),s=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),o=require("../channel/MultibandSplit"),r=require("../../core/context/Gain");class h extends e.ToneAudioNode{constructor(){super(Object.assign((0,s.optionsFromArguments)(h.getDefaults(),arguments))),this.name="MultibandCompressor";const e=(0,s.optionsFromArguments)(h.getDefaults(),arguments);this._splitter=this.input=new o.MultibandSplit({context:this.context,lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new r.Gain({context:this.context}),this.low=new t.Compressor(Object.assign(e.low,{context:this.context})),this.mid=new t.Compressor(Object.assign(e.mid,{context:this.context})),this.high=new t.Compressor(Object.assign(e.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),(0,i.readOnly)(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}exports.MultibandCompressor=h;
},{"../../core/context/ToneAudioNode":"aL0a","./Compressor":"RNIK","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../channel/MultibandSplit":"zg1u","../../core/context/Gain":"zza1"}],"JFVb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EQ3=void 0;var i=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),e=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),n=require("../channel/MultibandSplit");class h extends t.ToneAudioNode{constructor(){super((0,e.optionsFromArguments)(h.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new i.Gain({context:this.context}),this._internalChannels=[];const t=(0,e.optionsFromArguments)(h.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new n.MultibandSplit({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new i.Gain({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new i.Gain({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new i.Gain({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),(0,s.readOnly)(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),(0,s.writable)(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}exports.EQ3=h;
},{"../../core/context/Gain":"zza1","../../core/context/ToneAudioNode":"aL0a","../../core/util/Defaults":"yCwZ","../../core/util/Interface":"FB0z","../channel/MultibandSplit":"zg1u"}],"gF4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Convolver=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/context/ToneAudioBuffer"),r=require("../../core/util/Defaults"),i=require("../../core/context/Gain"),n=require("../../core/util/Interface");class s extends t.ToneAudioNode{constructor(){super((0,r.optionsFromArguments)(s.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const e=(0,r.optionsFromArguments)(s.getDefaults(),arguments,["url","onload"]);this._buffer=new o.ToneAudioBuffer(e.url,t=>{this.buffer=t,e.onload()}),this.input=new i.Gain({context:this.context}),this.output=new i.Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(t.ToneAudioNode.getDefaults(),{normalize:!0,onload:n.noOp})}load(t){return(0,e.__awaiter)(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(t)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const t=this._buffer.get();this._convolver.buffer=t||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}exports.Convolver=s;
},{"tslib":"CvJj","../../core/context/ToneAudioNode":"aL0a","../../core/context/ToneAudioBuffer":"fM2M","../../core/util/Defaults":"yCwZ","../../core/context/Gain":"zza1","../../core/util/Interface":"FB0z"}],"pKSL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./analysis/Analyser");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./analysis/Meter");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./analysis/FFT");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var n=require("./analysis/DCMeter");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var o=require("./analysis/Waveform");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var u=require("./analysis/Follower");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var i=require("./channel/Channel");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var s=require("./channel/CrossFade");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./channel/Merge");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var a=require("./channel/MidSideMerge");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var f=require("./channel/MidSideSplit");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var l=require("./channel/Mono");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var p=require("./channel/MultibandSplit");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var d=require("./channel/Panner");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var b=require("./channel/Panner3D");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var x=require("./channel/PanVol");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});var y=require("./channel/Recorder");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}}))});var O=require("./channel/Solo");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===O[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}}))});var _=require("./channel/Split");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}}))});var j=require("./channel/Volume");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===j[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}}))});var h=require("./dynamics/Compressor");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===h[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}}))});var m=require("./dynamics/Gate");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===m[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}}))});var M=require("./dynamics/Limiter");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===M[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}}))});var v=require("./dynamics/MidSideCompressor");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===v[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}}))});var P=require("./dynamics/MultibandCompressor");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===P[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}}))});var E=require("./envelope/AmplitudeEnvelope");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===E[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}}))});var g=require("./envelope/Envelope");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===g[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}}))});var q=require("./envelope/FrequencyEnvelope");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===q[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}}))});var k=require("./filter/EQ3");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===k[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}}))});var F=require("./filter/Filter");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===F[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}}))});var C=require("./filter/OnePoleFilter");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===C[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}}))});var S=require("./filter/FeedbackCombFilter");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===S[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}}))});var w=require("./filter/LowpassCombFilter");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===w[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}}))});var A=require("./filter/Convolver");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===A[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}}))});var D=require("./filter/BiquadFilter");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===D[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}}))});
},{"./analysis/Analyser":"YA7u","./analysis/Meter":"kImO","./analysis/FFT":"Qode","./analysis/DCMeter":"dQV2","./analysis/Waveform":"LSfK","./analysis/Follower":"e598","./channel/Channel":"wjTe","./channel/CrossFade":"G90N","./channel/Merge":"Pm8x","./channel/MidSideMerge":"ilqk","./channel/MidSideSplit":"v3HR","./channel/Mono":"z1Kb","./channel/MultibandSplit":"zg1u","./channel/Panner":"Vwws","./channel/Panner3D":"T7IC","./channel/PanVol":"GSIp","./channel/Recorder":"e0on","./channel/Solo":"QJZf","./channel/Split":"bquh","./channel/Volume":"xqtY","./dynamics/Compressor":"RNIK","./dynamics/Gate":"lvuC","./dynamics/Limiter":"JBsx","./dynamics/MidSideCompressor":"ZN2m","./dynamics/MultibandCompressor":"mT7Z","./envelope/AmplitudeEnvelope":"FT6i","./envelope/Envelope":"RZYi","./envelope/FrequencyEnvelope":"ZIde","./filter/EQ3":"JFVb","./filter/Filter":"ANuX","./filter/OnePoleFilter":"x8G7","./filter/FeedbackCombFilter":"PYKW","./filter/LowpassCombFilter":"k9To","./filter/Convolver":"gF4u","./filter/BiquadFilter":"EEQa"}],"Ss3H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core/index");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./source/index");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./signal/index");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var n=require("./instrument/index");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var o=require("./event/index");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var u=require("./effect/index");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var i=require("./component/index");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});
},{"./core/index":"gGy8","./source/index":"ieUI","./signal/index":"jDON","./instrument/index":"o1w8","./event/index":"ssrD","./effect/index":"qHYS","./component/index":"pKSL"}],"Houh":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={now:!0,immediate:!0,Transport:!0,getTransport:!0,Destination:!0,Master:!0,getDestination:!0,Listener:!0,getListener:!0,Draw:!0,getDraw:!0,context:!0,loaded:!0,Buffer:!0,Buffers:!0,BufferSource:!0,getContext:!0,setContext:!0,start:!0,supported:!0};exports.now=p,exports.immediate=x,exports.getTransport=c,exports.getDestination=g,exports.getListener=b,exports.getDraw=B,exports.loaded=O,Object.defineProperty(exports,"getContext",{enumerable:!0,get:function(){return t.getContext}}),Object.defineProperty(exports,"setContext",{enumerable:!0,get:function(){return t.setContext}}),Object.defineProperty(exports,"start",{enumerable:!0,get:function(){return t.start}}),Object.defineProperty(exports,"supported",{enumerable:!0,get:function(){return s.supported}}),exports.BufferSource=exports.Buffers=exports.Buffer=exports.context=exports.Draw=exports.Listener=exports.Master=exports.Destination=exports.Transport=void 0;var t=require("./core/Global"),r=require("./classes");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("./version");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("./core/context/ToneAudioBuffer"),s=require("./core/context/AudioContext"),u=require("./core/context/ToneAudioBuffers"),i=require("./source/buffer/ToneBufferSource");function p(){return(0,t.getContext)().now()}function x(){return(0,t.getContext)().immediate()}const f=(0,t.getContext)().transport;function c(){return(0,t.getContext)().transport}exports.Transport=f;const a=(0,t.getContext)().destination;exports.Destination=a;const d=(0,t.getContext)().destination;function g(){return(0,t.getContext)().destination}exports.Master=d;const l=(0,t.getContext)().listener;function b(){return(0,t.getContext)().listener}exports.Listener=l;const C=(0,t.getContext)().draw;function B(){return(0,t.getContext)().draw}exports.Draw=C;const y=(0,t.getContext)();function O(){return n.ToneAudioBuffer.loaded()}exports.context=y;const m=n.ToneAudioBuffer;exports.Buffer=m;const w=u.ToneAudioBuffers;exports.Buffers=w;const T=i.ToneBufferSource;exports.BufferSource=T;
},{"./core/Global":"omdq","./classes":"Ss3H","./version":"j5m7","./core/context/ToneAudioBuffer":"fM2M","./core/context/AudioContext":"uw8f","./core/context/ToneAudioBuffers":"K3lE","./source/buffer/ToneBufferSource":"B9Sq"}],"cWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Metronome=exports.MetronomeCallbackObject=void 0;var t=r(require("tone"));function e(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,i=new WeakMap;return(e=function(t){return t?i:r})(t)}function r(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=e(r);if(i&&i.has(t))return i.get(t);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var l=c?Object.getOwnPropertyDescriptor(t,a):null;l&&(l.get||l.set)?Object.defineProperty(s,a,l):s[a]=t[a]}return s.default=t,i&&i.set(t,s),s}const i=4;class s{}exports.MetronomeCallbackObject=s;class c{constructor(e,r=1){this.clicksPerQuarter=1,this.muted=!1,this.loClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.loClickNote="c5",this.hiClickNote="g5",this.ticking=!1,this.startedAt=null,this.step=-1,this.reset(),this.callbackObject=e,this.clicksPerQuarter=r}isTicking(){return this.ticking}getStartedAt(){return this.startedAt}getOffsetTime(){return t.immediate()-this.startedAt}start(e=120){this.reset(),this.ticking=!0,this.callbackObject.click||(this.callbackObject.click=(()=>{})),this.callbackObject.quarter||(this.callbackObject.quarter=(()=>{})),this.callbackObject.bar||(this.callbackObject.bar=(()=>{}));let r=0;const s=i*this.clicksPerQuarter;t.Transport.scheduleRepeat(t=>{this.startedAt||(this.startedAt=t);const e=t-this.startedAt;this.step++;const i=this.step%s,c=Math.floor(i/this.clicksPerQuarter),a=i%this.clicksPerQuarter;this.callbackObject.click(e,i),0===a&&this.callbackObject.quarter(e,c),this.muted||(0===i?this.hiClick.triggerAttack(this.hiClickNote,t,.1):this.loClick.triggerAttack(this.loClickNote,t,.1)),0===i&&(this.callbackObject.bar(e,r),r++)},`${s}n`),t.Transport.bpm.value=e,t.Transport.start()}stop(){this.ticking=!1,t.Transport.cancel(),t.Transport.stop()}reset(){this.muted=!1,this.ticking=!1,this.step=-1,this.startedAt=null}}exports.Metronome=c;
},{"tone":"Houh"}],"RM9I":[function(require,module,exports) {
function e(e){var a=new n(e),o=a.readChunk();if("MThd"!=o.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var i=t(o.data),s=[],d=0;!a.eof()&&d<i.numTracks;d++){var u=a.readChunk();if("MTrk"!=u.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+u.id+"'";var c=r(u.data);s.push(c)}return{header:i,tracks:s}}function t(e){var t=new n(e),r={format:t.readUInt16(),numTracks:t.readUInt16()},a=t.readUInt16();return 32768&a?(r.framesPerSecond=256-(a>>8),r.ticksPerFrame=255&a):r.ticksPerBeat=a,r}function r(e){for(var t,r=new n(e),a=[];!r.eof();){var o=i();a.push(o)}return a;function i(){var e={};e.deltaTime=r.readVarInt();var n=r.readUInt8();if(240==(240&n)){if(255!==n){if(240==n){e.type="sysEx";o=r.readVarInt();return e.data=r.readBytes(o),e}if(247==n){e.type="endSysEx";o=r.readVarInt();return e.data=r.readBytes(o),e}throw"Unrecognised MIDI event type byte: "+n}e.meta=!0;var a=r.readUInt8(),o=r.readVarInt();switch(a){case 0:if(e.type="sequenceNumber",2!==o)throw"Expected length for sequenceNumber event is 2, got "+o;return e.number=r.readUInt16(),e;case 1:return e.type="text",e.text=r.readString(o),e;case 2:return e.type="copyrightNotice",e.text=r.readString(o),e;case 3:return e.type="trackName",e.text=r.readString(o),e;case 4:return e.type="instrumentName",e.text=r.readString(o),e;case 5:return e.type="lyrics",e.text=r.readString(o),e;case 6:return e.type="marker",e.text=r.readString(o),e;case 7:return e.type="cuePoint",e.text=r.readString(o),e;case 32:if(e.type="channelPrefix",1!=o)throw"Expected length for channelPrefix event is 1, got "+o;return e.channel=r.readUInt8(),e;case 33:if(e.type="portPrefix",1!=o)throw"Expected length for portPrefix event is 1, got "+o;return e.port=r.readUInt8(),e;case 47:if(e.type="endOfTrack",0!=o)throw"Expected length for endOfTrack event is 0, got "+o;return e;case 81:if(e.type="setTempo",3!=o)throw"Expected length for setTempo event is 3, got "+o;return e.microsecondsPerBeat=r.readUInt24(),e;case 84:if(e.type="smpteOffset",5!=o)throw"Expected length for smpteOffset event is 5, got "+o;var i=r.readUInt8();return e.frameRate={0:24,32:25,64:29,96:30}[96&i],e.hour=31&i,e.min=r.readUInt8(),e.sec=r.readUInt8(),e.frame=r.readUInt8(),e.subFrame=r.readUInt8(),e;case 88:if(e.type="timeSignature",4!=o)throw"Expected length for timeSignature event is 4, got "+o;return e.numerator=r.readUInt8(),e.denominator=1<<r.readUInt8(),e.metronome=r.readUInt8(),e.thirtyseconds=r.readUInt8(),e;case 89:if(e.type="keySignature",2!=o)throw"Expected length for keySignature event is 2, got "+o;return e.key=r.readInt8(),e.scale=r.readUInt8(),e;case 127:return e.type="sequencerSpecific",e.data=r.readBytes(o),e;default:return e.type="unknownMeta",e.data=r.readBytes(o),e.metatypeByte=a,e}}else{var s;if(0==(128&n)){if(null===t)throw"Running status byte encountered before status byte";s=n,n=t,e.running=!0}else s=r.readUInt8(),t=n;var d=n>>4;switch(e.channel=15&n,d){case 8:return e.type="noteOff",e.noteNumber=s,e.velocity=r.readUInt8(),e;case 9:var u=r.readUInt8();return e.type=0===u?"noteOff":"noteOn",e.noteNumber=s,e.velocity=u,0===u&&(e.byte9=!0),e;case 10:return e.type="noteAftertouch",e.noteNumber=s,e.amount=r.readUInt8(),e;case 11:return e.type="controller",e.controllerType=s,e.value=r.readUInt8(),e;case 12:return e.type="programChange",e.programNumber=s,e;case 13:return e.type="channelAftertouch",e.amount=s,e;case 14:return e.type="pitchBend",e.value=s+(r.readUInt8()<<7)-8192,e;default:throw"Unrecognised MIDI event type: "+d}}}}function n(e){this.buffer=e,this.bufferLen=this.buffer.length,this.pos=0}n.prototype.eof=function(){return this.pos>=this.bufferLen},n.prototype.readUInt8=function(){var e=this.buffer[this.pos];return this.pos+=1,e},n.prototype.readInt8=function(){var e=this.readUInt8();return 128&e?e-256:e},n.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},n.prototype.readInt16=function(){var e=this.readUInt16();return 32768&e?e-65536:e},n.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},n.prototype.readInt24=function(){var e=this.readUInt24();return 8388608&e?e-16777216:e},n.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},n.prototype.readBytes=function(e){var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t},n.prototype.readString=function(e){var t=this.readBytes(e);return String.fromCharCode.apply(null,t)},n.prototype.readVarInt=function(){for(var e=0;!this.eof();){var t=this.readUInt8();if(!(128&t))return e+t;e+=127&t,e<<=7}return e},n.prototype.readChunk=function(){var e=this.readString(4),t=this.readUInt32();return{id:e,length:t,data:this.readBytes(t)}},module.exports=e;
},{}],"m6kl":[function(require,module,exports) {
function t(t,n){if("object"!=typeof t)throw"Invalid MIDI data";n=n||{};var a,w=t.header||{},I=t.tracks||[],o=I.length,U=new i;for(e(U,w,o),a=0;a<o;a++)r(U,I[a],n);return U.buffer}function e(t,e,r){var n=null==e.format?1:e.format,a=128;e.timeDivision?a=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?a=-(255&e.framesPerSecond)<<8|255&e.ticksPerFrame:e.ticksPerBeat&&(a=32767&e.ticksPerBeat);var w=new i;w.writeUInt16(n),w.writeUInt16(r),w.writeUInt16(a),t.writeChunk("MThd",w.buffer)}function r(t,e,r){var a,w=new i,I=e.length,o=null;for(a=0;a<I;a++)!1!==r.running&&(r.running||e[a].running)||(o=null),o=n(w,e[a],o,r.useByte9ForNoteOff);t.writeChunk("MTrk",w.buffer)}function n(t,e,r,n){var i=e.type,a=e.deltaTime,w=e.text||"",I=e.data||[],o=null;switch(t.writeVarInt(a),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(w.length),t.writeString(w);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(w.length),t.writeString(w);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(w.length),t.writeString(w);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(w.length),t.writeString(w);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(w.length),t.writeString(w);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(w.length),t.writeString(w);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(w.length),t.writeString(w);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var U=31&e.hour|{24:0,25:32,29:64,30:96}[e.frameRate];t.writeUInt8(U),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var s=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(s),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(I.length),t.writeBytes(I);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(I.length),t.writeBytes(I));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(I.length),t.writeBytes(I);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(I.length),t.writeBytes(I);break;case"noteOff":(o=(!1!==n&&e.byte9||n&&0==e.velocity?144:128)|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(o=144|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(o=160|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(o=176|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(o=192|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(o=208|e.channel)!==r&&t.writeUInt8(o),t.writeUInt8(e.amount);break;case"pitchBend":(o=224|e.channel)!==r&&t.writeUInt8(o);var c=8192+e.value,h=127&c,u=c>>7&127;t.writeUInt8(h),t.writeUInt8(u);break;default:throw"Unrecognized event type: "+i}return o}function i(){this.buffer=[]}i.prototype.writeUInt8=function(t){this.buffer.push(255&t)},i.prototype.writeInt8=i.prototype.writeUInt8,i.prototype.writeUInt16=function(t){var e=t>>8&255,r=255&t;this.writeUInt8(e),this.writeUInt8(r)},i.prototype.writeInt16=i.prototype.writeUInt16,i.prototype.writeUInt24=function(t){var e=t>>16&255,r=t>>8&255,n=255&t;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(n)},i.prototype.writeInt24=i.prototype.writeUInt24,i.prototype.writeUInt32=function(t){var e=t>>24&255,r=t>>16&255,n=t>>8&255,i=255&t;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(n),this.writeUInt8(i)},i.prototype.writeInt32=i.prototype.writeUInt32,i.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},i.prototype.writeString=function(t){var e,r=t.length,n=[];for(e=0;e<r;e++)n.push(t.codePointAt(e));this.writeBytes(n)},i.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,r=[];for(r.push(127&e),e>>=7;e;){var n=127&e|128;r.push(n),e>>=7}this.writeBytes(r.reverse())}},i.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},module.exports=t;
},{}],"Sm7R":[function(require,module,exports) {
exports.parseMidi=require("./lib/midi-parser"),exports.writeMidi=require("./lib/midi-writer");
},{"./lib/midi-parser":"RM9I","./lib/midi-writer":"m6kl"}],"oDKA":[function(require,module,exports) {
"use strict";function e(e,r,t){void 0===t&&(t="ticks");var i=0,n=e.length,o=n;if(n>0&&e[n-1][t]<=r)return n-1;for(;i<o;){var s=Math.floor(i+(o-i)/2),f=e[s],u=e[s+1];if(f[t]===r){for(var c=s;c<e.length;c++){e[c][t]===r&&(s=c)}return s}if(f[t]<r&&u[t]>r)return s;f[t]>r?o=s:f[t]<r&&(i=s+1)}return-1}function r(r,t,i){if(void 0===i&&(i="ticks"),r.length){var n=e(r,t[i],i);r.splice(n+1,0,t)}else r.push(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.search=e,exports.insert=r;
},{}],"l7xd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./BinarySearch"),e=new WeakMap;exports.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var i=function(){function i(t){var i=this;this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",e.set(this,480),t&&(e.set(this,t.header.ticksPerBeat),t.tracks.forEach(function(t){return t.forEach(function(t){t.meta&&("timeSignature"===t.type?i.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?i.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&i.keySignatures.push({key:exports.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))})}),t.tracks[0].forEach(function(t){t.meta&&("trackName"===t.type?i.name=t.text:"text"!==t.type&&"cuePoint"!==t.type&&"marker"!==t.type&&"lyrics"!==t.type||i.meta.push({text:t.text,ticks:t.absoluteTime,type:t.type}))}),this.update())}return i.prototype.update=function(){var t=this,e=0,i=0;this.tempos.sort(function(t,e){return t.ticks-e.ticks}),this.tempos.forEach(function(s,r){var n=r>0?t.tempos[r-1].bpm:t.tempos[0].bpm,a=s.ticks/t.ppq-i,p=60/n*a;s.time=p+e,e=s.time,i+=a}),this.timeSignatures.sort(function(t,e){return t.ticks-e.ticks}),this.timeSignatures.forEach(function(e,i){var s=i>0?t.timeSignatures[i-1]:t.timeSignatures[0],r=(e.ticks-s.ticks)/t.ppq/s.timeSignature[0]/(s.timeSignature[1]/4);s.measures=s.measures||0,e.measures=r+s.measures})},i.prototype.ticksToSeconds=function(e){var i=t.search(this.tempos,e);if(-1!==i){var s=this.tempos[i],r=s.time,n=(e-s.ticks)/this.ppq;return r+60/s.bpm*n}return.5*(e/this.ppq)},i.prototype.ticksToMeasures=function(e){var i=t.search(this.timeSignatures,e);if(-1!==i){var s=this.timeSignatures[i],r=(e-s.ticks)/this.ppq;return s.measures+r/(s.timeSignature[0]/s.timeSignature[1])/4}return e/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return e.get(this)},enumerable:!0,configurable:!0}),i.prototype.secondsToTicks=function(e){var i=t.search(this.tempos,e,"time");if(-1!==i){var s=this.tempos[i],r=(e-s.time)/(60/s.bpm);return Math.round(s.ticks+r*this.ppq)}var n=e/.5;return Math.round(n*this.ppq)},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(t){return{bpm:t.bpm,ticks:t.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map(function(t){return Object.assign({},t)}),this.timeSignatures=t.timeSignatures.map(function(t){return Object.assign({},t)}),this.keySignatures=t.keySignatures.map(function(t){return Object.assign({},t)}),this.meta=t.meta.map(function(t){return Object.assign({},t)}),e.set(this,t.ppq),this.update()},i.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},i}();exports.Header=i;
},{"./BinarySearch":"oDKA"}],"mqg4":[function(require,module,exports) {
"use strict";function r(r){if(!Array.isArray(r))throw new TypeError("Expected value to be an array");return e(r)}function e(r){return n(r,[])}function t(r,e){if(!Array.isArray(r))throw new TypeError("Expected value to be an array");return o(r,e)}function o(r,e){if("number"!=typeof e)throw new TypeError("Expected the depth to be a number");return u(r,[],e)}function n(r,e){for(var t=0;t<r.length;t++){var o=r[t];Array.isArray(o)?n(o,e):e.push(o)}return e}function u(r,e,t){t--;for(var o=0;o<r.length;o++){var n=r[o];t>-1&&Array.isArray(n)?u(n,e,t):e.push(n)}return e}module.exports=r,module.exports.from=e,module.exports.depth=t,module.exports.fromDepth=o;
},{}],"JaoI":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,a++)n[a]=i[o];return n},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("midi-file"),n=require("./Header"),a=t(require("array-flatten"));function i(e,t){return[{absoluteTime:e.ticks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(127*e.velocity)},{absoluteTime:e.ticks+e.durationTicks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(127*e.noteOffVelocity)}]}function o(e){return a.default(e.notes.map(function(t){return i(t,e.channel)}))}function u(e,t){return{absoluteTime:e.ticks,channel:t,controllerType:e.number,deltaTime:0,type:"controller",value:Math.floor(127*e.value)}}function c(e){for(var t=[],r=0;r<127;r++)e.controlChanges.hasOwnProperty(r)&&e.controlChanges[r].forEach(function(r){t.push(u(r,e.channel))});return t}function m(e,t){return{absoluteTime:e.ticks,channel:t,deltaTime:0,type:"pitchBend",value:e.value}}function l(e){var t=[];return e.pitchBends.forEach(function(r){t.push(m(r,e.channel))}),t}function s(e){return{absoluteTime:0,channel:e.channel,deltaTime:0,programNumber:e.instrument.number,type:"programChange"}}function f(e){return{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}}function d(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/e.bpm),type:"setTempo"}}function h(e){return{absoluteTime:e.ticks,deltaTime:0,denominator:e.timeSignature[1],meta:!0,metronome:24,numerator:e.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function p(e){var t=n.keySignatureKeys.indexOf(e.key);return{absoluteTime:e.ticks,deltaTime:0,key:t+7,meta:!0,scale:"major"===e.scale?0:1,type:"keySignature"}}function T(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,text:e.text,type:e.type}}function y(t){var n={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:e([e([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(e){return p(e)}),t.header.meta.map(function(e){return T(e)}),t.header.tempos.map(function(e){return d(e)}),t.header.timeSignatures.map(function(e){return h(e)}))],t.tracks.map(function(t){return e([f(t.name),s(t)],o(t),c(t),l(t))}))};return n.tracks=n.tracks.map(function(e){e=e.sort(function(e,t){return e.absoluteTime-t.absoluteTime});var t=0;return e.forEach(function(e){e.deltaTime=e.absoluteTime-t,t=e.absoluteTime,delete e.absoluteTime}),e.push({deltaTime:0,meta:!0,type:"endOfTrack"}),e}),new Uint8Array(r.writeMidi(n))}exports.encode=y;
},{"midi-file":"Sm7R","./Header":"l7xd","array-flatten":"mqg4"}],"toGK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},exports.controlChangeIds=Object.keys(exports.controlChangeNames).reduce(function(e,t){return e[exports.controlChangeNames[t]]=t,e},{});var e=new WeakMap,t=new WeakMap,o=function(){function o(o,n){e.set(this,n),t.set(this,o.controllerType),this.ticks=o.absoluteTime,this.value=o.value}return Object.defineProperty(o.prototype,"number",{get:function(){return t.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return exports.controlChangeNames[this.number]?exports.controlChangeNames[this.number]:null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return e.get(this).ticksToSeconds(this.ticks)},set:function(t){var o=e.get(this);this.ticks=o.secondsToTicks(t)},enumerable:!0,configurable:!0}),o.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},o}();exports.ControlChange=o;
},{}],"PUpz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ControlChange");function r(){return new Proxy({},{get:function(r,n){return r[n]?r[n]:e.controlChangeIds.hasOwnProperty(n)?r[e.controlChangeIds[n]]:void 0},set:function(r,n,o){return e.controlChangeIds.hasOwnProperty(n)?r[e.controlChangeIds[n]]=o:r[n]=o,!0}})}exports.createControlChanges=r;
},{"./ControlChange":"toGK"}],"CKyU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=new WeakMap,e=function(){function e(e,i){t.set(this,i),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(e.prototype,"time",{get:function(){return t.get(this).ticksToSeconds(this.ticks)},set:function(e){var i=t.get(this);this.ticks=i.secondsToTicks(e)},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},e}();exports.PitchBend=e;
},{}],"JrVk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],exports.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],exports.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};
},{}],"FO7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./InstrumentMaps"),t=new WeakMap,n=function(){function n(e,n){if(this.number=0,t.set(this,n),this.number=0,e){var r=e.find(function(e){return"programChange"===e.type});r&&(this.number=r.programNumber)}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.percussion?e.DrumKitByPatchID[this.number]:e.instrumentByPatchID[this.number]},set:function(t){var n=e.instrumentByPatchID.indexOf(t);-1!==n&&(this.number=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"family",{get:function(){return this.percussion?"drums":e.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percussion",{get:function(){return 9===t.get(this).channel},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{family:this.family,name:this.name,number:this.number}},n.prototype.fromJSON=function(e){this.number=e.number},n}();exports.Instrument=n;
},{"./InstrumentMaps":"JrVk"}],"IxL0":[function(require,module,exports) {
"use strict";function t(t){var i=Math.floor(t/12)-1;return e(t)+i.toString()}function e(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}function i(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(i){var n=t.exec(i),o=n[1],r=n[2];return e[o.toLowerCase()]+12*(parseInt(r,10)+1)}}(),o=new WeakMap,r=function(){function r(t,e,i){o.set(this,i),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(r.prototype,"name",{get:function(){return t(this.midi)},set:function(t){this.midi=n(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pitch",{get:function(){return e(this.midi)},set:function(t){this.midi=12*(this.octave+1)+i(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"duration",{get:function(){var t=o.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=o.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){return o.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=o.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bars",{get:function(){return o.get(this).ticksToMeasures(this.ticks)},enumerable:!0,configurable:!0}),r.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},r}();exports.Note=r;
},{}],"gWek":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./BinarySearch"),e=require("./ControlChange"),n=require("./ControlChanges"),i=require("./PitchBend"),r=require("./Instrument"),o=require("./Note"),s=new WeakMap,c=function(){function c(t,e){var i=this;if(this.name="",this.notes=[],this.controlChanges=n.createControlChanges(),this.pitchBends=[],s.set(this,e),t){var o=t.find(function(t){return"trackName"===t.type});this.name=o?o.text:""}if(this.instrument=new r.Instrument(t,this),this.channel=0,t){for(var c=t.filter(function(t){return"noteOn"===t.type}),a=t.filter(function(t){return"noteOff"===t.type}),h=function(){var t=c.shift();u.channel=t.channel;var e=a.findIndex(function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime});if(-1!==e){var n=a.splice(e,1)[0];u.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}},u=this;c.length;)h();t.filter(function(t){return"controller"===t.type}).forEach(function(t){i.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})}),t.filter(function(t){return"pitchBend"===t.type}).forEach(function(t){i.addPitchBend({ticks:t.absoluteTime,value:t.value/Math.pow(2,13)})});var l=t.find(function(t){return"endOfTrack"===t.type});this.endOfTrackTicks=void 0!==l?l.absoluteTime:void 0}}return c.prototype.addNote=function(e){var n=s.get(this),i=new o.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(i,e),t.insert(this.notes,i,"ticks"),this},c.prototype.addCC=function(n){var i=s.get(this),r=new e.ControlChange({controllerType:n.number},i);return delete n.number,Object.assign(r,n),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),t.insert(this.controlChanges[r.number],r,"ticks"),this},c.prototype.addPitchBend=function(e){var n=s.get(this),r=new i.PitchBend({},n);return Object.assign(r,e),t.insert(this.pitchBends,r,"ticks"),this},Object.defineProperty(c.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!0,configurable:!0}),c.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new r.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})});t.notes.forEach(function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})})},c.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(t){return t.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(t){return t.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(t){return t.toJSON()})};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},c}();exports.Track=c;
},{"./BinarySearch":"oDKA","./ControlChange":"toGK","./ControlChanges":"PUpz","./PitchBend":"CKyU","./Instrument":"FO7a","./Note":"IxL0"}],"wAUb":[function(require,module,exports) {
"use strict";var r=this&&this.__awaiter||function(r,e,t,n){return new(t||(t=Promise))(function(a,o){function i(r){try{c(n.next(r))}catch(e){o(e)}}function u(r){try{c(n.throw(r))}catch(e){o(e)}}function c(r){var e;r.done?a(r.value):(e=r.value,e instanceof t?e:new t(function(r){r(e)})).then(i,u)}c((n=n.apply(r,e||[])).next())})},e=this&&this.__generator||function(r,e){var t,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(r,i)}catch(u){o=[6,u],n=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("midi-file"),n=require("./Encode"),a=require("./Header"),o=require("./Track"),i=function(){function i(r){var e=this,n=null;r&&(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(n=t.parseMidi(r)).tracks.forEach(function(r){var e=0;r.forEach(function(r){e+=r.deltaTime,r.absoluteTime=e})}),n.tracks=s(n.tracks)),this.header=new a.Header(n),this.tracks=[],r&&(this.tracks=n.tracks.map(function(r){return new o.Track(r,e.header)}),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return i.fromUrl=function(t){return r(this,void 0,void 0,function(){var r;return e(this,function(e){switch(e.label){case 0:return[4,fetch(t)];case 1:return(r=e.sent()).ok?[4,r.arrayBuffer()]:[3,3];case 2:return[2,new i(e.sent())];case 3:throw new Error("could not load "+t)}})})},Object.defineProperty(i.prototype,"name",{get:function(){return this.header.name},set:function(r){this.header.name=r},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){var r=this.tracks.map(function(r){return r.duration});return Math.max.apply(Math,r)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"durationTicks",{get:function(){var r=this.tracks.map(function(r){return r.durationTicks});return Math.max.apply(Math,r)},enumerable:!0,configurable:!0}),i.prototype.addTrack=function(){var r=new o.Track(void 0,this.header);return this.tracks.push(r),r},i.prototype.toArray=function(){return n.encode(this)},i.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(r){return r.toJSON()})}},i.prototype.fromJSON=function(r){var e=this;this.header=new a.Header,this.header.fromJSON(r.header),this.tracks=r.tracks.map(function(r){var t=new o.Track(void 0,e.header);return t.fromJSON(r),t})},i.prototype.clone=function(){var r=new i;return r.fromJSON(this.toJSON()),r},i}();exports.Midi=i;var u=require("./Track");exports.Track=u.Track;var c=require("./Header");function s(r){for(var e=[],t=0;t<r.length;t++)for(var n=e.length,a=new Map,o=Array(16).fill(0),i=0,u=r[t];i<u.length;i++){var c=u[i],s=n,f=c.channel;if(void 0!==f){"programChange"===c.type&&(o[f]=c.programNumber);var h=o[f]+" "+f;a.has(h)?s=a.get(h):(s=n+a.size,a.set(h,s))}e[s]||e.push([]),e[s].push(c)}return e}exports.Header=c.Header;
},{"midi-file":"Sm7R","./Encode":"JaoI","./Header":"l7xd","./Track":"gWek"}],"mxp0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.midiToSequenceProto=a,exports.sequenceProtoToMidi=c,exports.urlToBlob=m,exports.blobToNoteSequence=p,exports.urlToNoteSequence=f,exports.MidiConversionError=void 0;var e=require("@tonejs/midi"),t=require("../core/compat/global"),r=require("../protobuf/index"),o=s(require("./constants")),n=s(require("./sequences"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class u extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}function a(t){const n=new e.Midi(t),i=r.NoteSequence.create();i.ticksPerQuarter=n.header.ppq,i.sourceInfo=r.NoteSequence.SourceInfo.create({parser:r.NoteSequence.SourceInfo.Parser.TONEJS_MIDI_CONVERT,encodingType:r.NoteSequence.SourceInfo.EncodingType.MIDI});for(const e of n.header.timeSignatures)i.timeSignatures.push(r.NoteSequence.TimeSignature.create({time:n.header.ticksToSeconds(e.ticks),numerator:e.timeSignature[0],denominator:e.timeSignature[1]}));i.timeSignatures.length||i.timeSignatures.push(r.NoteSequence.TimeSignature.create({time:0,numerator:4,denominator:4}));for(const e of n.header.tempos)i.tempos.push(r.NoteSequence.Tempo.create({time:e.time,qpm:e.bpm}));let s=-1;for(const e of n.tracks){e.notes.length>0&&(s+=1);for(const u of e.notes){const t=u.time,n=t+u.duration;i.notes.push(r.NoteSequence.Note.create({instrument:s,program:e.instrument.number,startTime:t,endTime:n,pitch:u.midi,velocity:Math.floor(u.velocity*o.MIDI_VELOCITIES),isDrum:e.instrument.percussion})),n>i.totalTime&&(i.totalTime=n)}const t=Object.values(e.controlChanges),n=[].concat.apply([],t);for(const u of n)i.controlChanges.push(r.NoteSequence.ControlChange.create({time:u.time,controlNumber:u.number,controlValue:Math.floor(u.value*(o.MIDI_VELOCITIES-1)),instrument:s,program:e.instrument.number,isDrum:e.instrument.percussion}))}return i}function c(t){n.isQuantizedSequence(t)&&(t=n.unquantizeSequence(t));const r=new e.Midi;r.fromJSON({header:{name:"",ppq:t.ticksPerQuarter||o.DEFAULT_TICKS_PER_QUARTER,tempos:[],timeSignatures:[],keySignatures:[],meta:[]},tracks:[]});const i=Array.from(t.tempos||[]);0===i.length&&i.push({time:0,qpm:o.DEFAULT_QUARTERS_PER_MINUTE}),i.sort((e,t)=>e.time-t.time);for(const e of i)r.header.tempos.push({ticks:r.header.secondsToTicks(e.time),bpm:e.qpm}),r.header.update();if(t.timeSignatures&&0!==t.timeSignatures.length)for(const e of t.timeSignatures)r.header.timeSignatures.push({ticks:r.header.secondsToTicks(e.time),timeSignature:[e.numerator,e.denominator]});else r.header.timeSignatures.push({ticks:0,timeSignature:[4,4]});r.header.update();const s=new Map;for(const e of t.notes){const t=e.instrument?e.instrument:0,r=void 0===e.program?o.DEFAULT_PROGRAM:e.program,n=!!e.isDrum,i=JSON.stringify([t,r,n]);s.has(i)||s.set(i,{notes:[],controlChanges:[]}),s.get(i).notes.push(e)}for(const e of t.controlChanges){const t=e.instrument?e.instrument:0,r=void 0===e.program?o.DEFAULT_PROGRAM:e.program,n=!!e.isDrum,i=JSON.stringify([t,r,n]);s.has(i)||s.set(i,{notes:[],controlChanges:[]}),s.get(i).controlChanges.push(e)}return s.forEach((e,t)=>{const[n,i]=JSON.parse(t).slice(1),s=r.addTrack();s.channel=i?o.DRUM_CHANNEL:o.NON_DRUM_CHANNELS[(r.tracks.length-1)%o.NON_DRUM_CHANNELS.length],s.instrument.number=n;for(const r of e.notes){const e=void 0===r.velocity?o.DEFAULT_VELOCITY:r.velocity;s.addNote({midi:r.pitch,time:r.startTime,duration:r.endTime-r.startTime,velocity:(e+1)/o.MIDI_VELOCITIES})}for(const r of e.controlChanges)s.addCC({number:r.controlNumber,value:r.controlValue,time:r.time})}),r.toArray()}function m(e){return new Promise((r,o)=>{(0,t.fetch)(e).then(e=>e.blob()).then(e=>{r(e)}).catch(e=>o(e))})}function p(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=(e=>{try{const e=a(o.result);t(e)}catch(n){r(n)}}),o.onerror=(e=>r(e)),o.readAsArrayBuffer(e)})}function f(e){return m(e).then(p)}exports.MidiConversionError=u;
},{"@tonejs/midi":"wAUb","../core/compat/global":"cgxr","../protobuf/index":"t75P","./constants":"kGvI","./sequences":"x6ox"}],"ibRU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SoundFont=exports.Instrument=void 0;var t=o(require("tone")),i=require("../core/compat/global"),e=o(require("./constants")),s=o(require("./logging"));function n(t){if("function"!=typeof WeakMap)return null;var i=new WeakMap,e=new WeakMap;return(n=function(t){return t?e:i})(t)}function o(t,i){if(!i&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n(i);if(e&&e.has(t))return e.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var a=o?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=t[r]}return s.default=t,e&&e.set(t,s),s}class r{constructor(i){this.FADE_SECONDS=.1,this.baseURL=i,this.buffers=new t.ToneAudioBuffers,this.sourceMap=new Map,this.initialized=!1}async initialize(){await(0,i.fetch)(`${this.baseURL}/instrument.json`).then(t=>t.json()).then(t=>{this.name=t.name,this.minPitch=t.minPitch,this.maxPitch=t.maxPitch,this.durationSeconds=t.durationSeconds,this.releaseSeconds=t.releaseSeconds,this.percussive=t.percussive,this.velocities=t.velocities,this.initialized=!0})}sampleInfoToName(t){return this.velocities?`p${t.pitch}_v${t.velocity}`:`p${t.pitch}`}sampleNameToURL(t){return`${this.baseURL}/${t}.mp3`}nearestVelocity(t){if(!this.velocities)return t;t||(t=e.DEFAULT_VELOCITY);let i=void 0,s=e.MIDI_VELOCITIES;return this.velocities.forEach(e=>{const n=Math.abs(e-t);n<s&&(i=e,s=n)}),i}async loadSamples(i){this.initialized||await this.initialize();const e=i.filter(t=>!(t.pitch<this.minPitch||t.pitch>this.maxPitch)||(s.log(`Pitch ${t.pitch} is outside the valid range for ${this.name}, ignoring.`,"SoundFont"),!1)).map(t=>this.sampleInfoToName({pitch:t.pitch,velocity:this.nearestVelocity(t.velocity)})),n=Array.from(new Set(e)).filter(t=>!this.buffers.has(t)).map(t=>({name:t,url:this.sampleNameToURL(t)}));n.length>0&&(n.forEach(t=>this.buffers.add(t.name,t.url)),await t.loaded(),s.log(`Loaded samples for ${this.name}.`,"SoundFont"))}playNote(i,e,n,o,r){const a=this.getBuffer(i,e);o>this.durationSeconds&&s.log(`Requested note duration longer than sample duration: ${o} > ${this.durationSeconds}`,"SoundFont");const h=new t.ToneBufferSource({url:a,fadeOut:this.FADE_SECONDS}).connect(r);if(h.start(n,0,void 0,1),!this.percussive&&o<this.durationSeconds){const i=new t.ToneBufferSource({url:a,fadeOut:this.FADE_SECONDS}).connect(r);h.stop(n+o+this.FADE_SECONDS),i.start(n+o,this.durationSeconds,void 0,1)}}playNoteDown(i,e,s){const n=this.getBuffer(i,e),o=new t.ToneBufferSource(n).connect(s);o.start(0,0,void 0,1),this.sourceMap.has(i)&&this.sourceMap.get(i).stop(t.now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.set(i,o)}playNoteUp(i,e,s){if(!this.sourceMap.has(i))return;const n=this.getBuffer(i,e);new t.ToneBufferSource({url:n,fadeOut:this.FADE_SECONDS}).connect(s).start(0,this.durationSeconds,void 0,1),this.sourceMap.get(i).stop(t.now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.delete(i)}getBuffer(t,i){if(!this.initialized)throw new Error("Instrument is not initialized.");if(t<this.minPitch||t>this.maxPitch)return void s.log(`Pitch ${t} is outside the valid range for ${this.name} (${this.minPitch}-${this.maxPitch})`,"SoundFont");const e=this.sampleInfoToName({pitch:t,velocity:this.nearestVelocity(i)});if(!this.buffers.has(e))throw new Error(`Buffer not found for ${this.name}: ${e}`);const n=this.buffers.get(e);if(!n.loaded)throw new Error(`Buffer not loaded for ${this.name}: ${e}`);return n}}exports.Instrument=r;class a{constructor(t){this.baseURL=t,this.instruments=new Map,this.initialized=!1}async initialize(){await(0,i.fetch)(`${this.baseURL}/soundfont.json`).then(t=>t.json()).then(t=>{this.name=t.name;for(const i in t.instruments){const e=`${this.baseURL}/${t.instruments[i]}`;this.instruments.set("drums"===i?"drums":+i,new r(e))}this.initialized=!0})}async loadSamples(t){this.initialized||await this.initialize();const i=new Map;t.forEach(t=>{t.isDrum=t.isDrum||!1,t.program=t.program||0;const e=t.isDrum?"drums":t.program,n={pitch:t.pitch,velocity:t.velocity};i.has(e)?i.get(e).push(n):this.instruments.has(e)?i.set(e,[n]):s.log(`No instrument in ${this.name} for: program=${t.program}, isDrum=${t.isDrum}`,"SoundFont")}),await Promise.all(Array.from(i.keys()).map(t=>this.instruments.get(t).loadSamples(i.get(t))))}playNote(t,i,e,n,o=0,r=!1,a){const h=r?"drums":o;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(h)?this.instruments.get(h).playNote(t,i,e,n,a):s.log(`No instrument in ${this.name} for: program=${o}, isDrum=${r}`,"SoundFont")}playNoteDown(t,i,e=0,n=!1,o){const r=n?"drums":e;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(r)?this.instruments.get(r).playNoteDown(t,i,o):s.log(`No instrument in ${this.name} for: program=${e}, isDrum=${n}`,"SoundFont")}playNoteUp(t,i,e=0,n=!1,o){const r=n?"drums":e;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(r)?this.instruments.get(r).playNoteUp(t,i,o):s.log(`No instrument in ${this.name} for: program=${e}, isDrum=${n}`,"SoundFont")}}exports.SoundFont=a;
},{"tone":"Houh","../core/compat/global":"cgxr","./constants":"kGvI","./logging":"HDYb"}],"gpT8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MIDIPlayer=exports.PlayerWithClick=exports.SoundFontPlayer=exports.Player=exports.BasePlayer=exports.BasePlayerCallback=void 0;var t=o(require("tone")),e=require("../core/compat/global"),s=require("../protobuf/index"),a=o(require("./constants")),i=o(require("./soundfont")),r=o(require("./sequences"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(n=function(t){return t?s:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=n(e);if(s&&s.has(t))return s.get(t);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=i?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=t[r]}return a.default=t,s&&s.set(t,a),a}function u(t,e){return t.quantizedStartStep<e.quantizedStartStep?-1:t.quantizedStartStep>e.quantizedStartStep?1:t.pitch<e.pitch?-1:1}class p{}exports.BasePlayerCallback=p;class h{constructor(t=!1,e){this.playClick=t,this.callbackObject=e,this.desiredQPM=void 0}setTempo(e){this.desiredQPM=e,"started"===t.Transport.state&&(t.Transport.bpm.value=e)}makeClickSequence(t){const e=r.clone(t),s=e.notes.map(t=>t.quantizedEndStep),i=Math.max(...s);for(let r=0;r<i;r+=4){const t={pitch:r%16==0?a.LO_CLICK_PITCH:a.HI_CLICK_PITCH,quantizedStartStep:r,isDrum:!0,quantizedEndStep:r+1};e.notes.push(t)}return e.notes.sort(u),e}resumeContext(){t.context.resume()}start(e,s,i=0){if("started"===this.getPlayState())throw new Error("Cannot start playback; player is already playing.");if("paused"===this.getPlayState())throw new Error("Cannot `start()` a paused player; use `resume()`.");if("stopped"!==t.Transport.state)throw new Error("Cannot start playback while `Tone.Transport` is in use.");this.resumeContext();const n=r.isQuantizedSequence(e);if(this.playClick&&n&&(e=this.makeClickSequence(e)),s?t.Transport.bpm.value=s:e.tempos&&e.tempos.length>0&&e.tempos[0].qpm>0?t.Transport.bpm.value=e.tempos[0].qpm:t.Transport.bpm.value=a.DEFAULT_QUARTERS_PER_MINUTE,n)e=r.unquantizeSequence(e,s);else if(s)throw new Error("Cannot specify a `qpm` for a non-quantized sequence.");const o=new t.Part((e,s)=>{this.currentPart===o&&((this.playClick||s.pitch!==a.LO_CLICK_PITCH&&s.pitch!==a.HI_CLICK_PITCH)&&this.playNote(e,s),this.callbackObject&&t.Draw.schedule(()=>{this.callbackObject.run(s,e)},e))},e.notes.map(t=>[t.startTime,t]));return this.currentPart=o,this.desiredQPM&&(t.Transport.bpm.value=this.desiredQPM),this.currentPart.start(void 0,i),"started"!==t.Transport.state&&t.Transport.start(),new Promise(s=>{this.scheduledStop=t.Transport.schedule(()=>{this.stop(),s(),this.callbackObject&&this.callbackObject.stop()},`+${e.totalTime}`)})}stop(){this.isPlaying()&&(this.currentPart.stop(),t.Transport.stop(),this.currentPart=null),t.Transport.clear(this.scheduledStop),this.scheduledStop=void 0,this.desiredQPM=void 0}pause(){if(!this.isPlaying())throw new Error("Cannot pause playback while the player is stopped.");t.Transport.pause()}resume(){if("paused"!==this.getPlayState())throw new Error(`Cannot resume playback while "${this.getPlayState()}".`);t.Transport.start()}seekTo(e){if(!this.isPlaying())throw new Error("Cannot seek while the player is stopped.");t.Transport.seconds=e}isPlaying(){return!!this.currentPart}getPlayState(){return this.isPlaying()?t.Transport.state:"stopped"}}exports.BasePlayer=h;class c{constructor(){this.DRUM_PITCH_TO_CLASS=new Map,this.kick=(new t.MembraneSynth).toDestination(),this.tomLow=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomMid=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomHigh=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.closedHihat=new t.MetalSynth({frequency:400,envelope:{attack:.001,decay:.1,release:.8},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.openHihat=new t.MetalSynth({frequency:400,envelope:{attack:.001,decay:.5,release:.8,sustain:1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.ride=(new t.MetalSynth).toDestination(),this.crash=new t.MetalSynth({frequency:300,envelope:{attack:.001,decay:1,release:3},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).toDestination(),this.snare=new t.NoiseSynth({noise:{type:"white"},envelope:{attack:.005,decay:.05,sustain:.1,release:.4}}).toDestination(),this.loClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.pitchPlayers=[(t,e=1)=>this.kick.triggerAttackRelease("C2","8n",t,e),(t,e=1)=>this.snare.triggerAttackRelease("16n",t,e),(t,e=1)=>this.closedHihat.triggerAttack(t,.3,e),(t,e=1)=>this.openHihat.triggerAttack(t,.3,e),(t,e=.5)=>this.tomLow.triggerAttack("G3",t,e),(t,e=.5)=>this.tomMid.triggerAttack("C4",t,e),(t,e=.5)=>this.tomHigh.triggerAttack("F4",t,e),(t,e=1)=>this.crash.triggerAttack(t,1,e),(t,e=1)=>this.ride.triggerAttack(t,.5,e),(t,e=.5)=>this.loClick.triggerAttack("G5",t,e),(t,e=.5)=>this.hiClick.triggerAttack("C6",t,e)];for(let t=0;t<a.DEFAULT_DRUM_PITCH_CLASSES.length;++t)a.DEFAULT_DRUM_PITCH_CLASSES[t].forEach(e=>{this.DRUM_PITCH_TO_CLASS.set(e,t)});this.DRUM_PITCH_TO_CLASS.set(a.LO_CLICK_PITCH,a.LO_CLICK_CLASS),this.DRUM_PITCH_TO_CLASS.set(a.HI_CLICK_PITCH,a.HI_CLICK_CLASS)}static getInstance(){return c.instance||(c.instance=new c),c.instance}playNote(t,e,s){this.pitchPlayers[this.DRUM_PITCH_TO_CLASS.get(t)](e,s)}}class l extends h{constructor(){super(...arguments),this.drumKit=c.getInstance(),this.bassSynth=new t.Synth({volume:5,oscillator:{type:"triangle"}}).toDestination(),this.polySynth=(new t.PolySynth).toDestination()}playNote(e,s){const i=s.hasOwnProperty("velocity")?s.velocity/a.MAX_MIDI_VELOCITY:void 0;if(s.isDrum)this.drumKit.playNote(s.pitch,e,i);else{const a=t.Frequency(s.pitch,"midi").toFrequency(),r=s.endTime-s.startTime;this.getSynth(s.instrument,s.program).triggerAttackRelease(a,r,e,i)}}getSynth(t,e){return void 0!==e&&e>=32&&e<=39?this.bassSynth:this.polySynth}}exports.Player=l,l.tone=t;class d extends h{constructor(e,s=t.Master,a,r,n){super(!1,n),this.soundFont=new i.SoundFont(e),this.output=s,this.programOutputs=a,this.drumOutputs=r}async loadSamples(t){await this.soundFont.loadSamples(t.notes.map(t=>({pitch:t.pitch,velocity:t.velocity,program:t.program||0,isDrum:t.isDrum||!1})))}async loadAllSamples(t=0,e=!1){const i=s.NoteSequence.create(),r=e?a.MIN_DRUM_PITCH:a.MIN_PIANO_PITCH,n=e?a.MAX_DRUM_PITCH:a.MAX_PIANO_PITCH;for(let s=r;s<=n;s++)for(let r=a.MIN_MIDI_VELOCITY;r<a.MAX_MIDI_VELOCITY;r++)i.notes.push({pitch:s,velocity:r,program:t,isDrum:e});return this.loadSamples(i)}resumeContext(){t.context.resume()}start(t,e,s=0){return this.resumeContext(),this.loadSamples(t).then(()=>super.start(t,e,s))}playNote(t,e){this.soundFont.playNote(e.pitch,e.velocity,t,e.endTime-e.startTime,e.program,e.isDrum,this.getAudioNodeOutput(e))}playNoteDown(t){this.soundFont.playNoteDown(t.pitch,t.velocity,t.program,t.isDrum,this.getAudioNodeOutput(t))}playNoteUp(t){this.soundFont.playNoteUp(t.pitch,t.velocity,t.program,t.isDrum,this.getAudioNodeOutput(t))}getAudioNodeOutput(t){let e=this.output;return this.programOutputs&&!t.isDrum?this.programOutputs.has(t.program)&&(e=this.programOutputs.get(t.program)):this.drumOutputs&&t.isDrum&&this.drumOutputs.has(t.pitch)&&(e=this.drumOutputs.get(t.pitch)),e}}exports.SoundFontPlayer=d;class y extends l{constructor(t){super(!0,t)}}exports.PlayerWithClick=y;class m extends h{constructor(t){super(!1,t),this.outputs=[],this.outputChannel=0,this.availableOutputs=[],this.NOTE_ON=144,this.NOTE_OFF=128}async requestMIDIAccess(){return navigator.requestMIDIAccess?new Promise((t,e)=>{navigator.requestMIDIAccess().then(e=>{e.addEventListener("statechange",t=>this.initOutputs(e)),t(this.initOutputs(e))},t=>console.log("Something went wrong",e(t)))}):null}initOutputs(t){const e=t.outputs.values();for(let s=e.next();s&&!s.done;s=e.next())this.availableOutputs.push(s.value);return this.availableOutputs}playNote(t,s){const a=s.velocity||100,i=1e3*(s.endTime-s.startTime),r=[this.NOTE_ON+this.outputChannel,s.pitch,a],n=[this.NOTE_OFF+this.outputChannel,s.pitch,a],o=this.outputs?this.outputs:this.availableOutputs;for(let u=0;u<o.length;u++)this.sendMessageToOutput(o[u],r),this.sendMessageToOutput(o[u],n,e.performance.now()+i)}sendMessageToOutput(t,e,s){t&&t.send(e,s)}playNoteDown(t){const e=[this.NOTE_ON,t.pitch,t.velocity],s=this.outputs?this.outputs:this.availableOutputs;for(let a=0;a<s.length;a++)this.sendMessageToOutput(s[a],e)}playNoteUp(t){const e=[this.NOTE_OFF,t.pitch,t.velocity],s=this.outputs?this.outputs:this.availableOutputs;for(let a=0;a<s.length;a++)this.sendMessageToOutput(s[a],e,t.endTime-t.startTime)}}exports.MIDIPlayer=m;
},{"tone":"Houh","../core/compat/global":"cgxr","../protobuf/index":"t75P","./constants":"kGvI","./soundfont":"ibRU","./sequences":"x6ox"}],"zlSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=exports.BaseRecorderCallback=void 0;var t=r(require("tone")),e=require("../core/compat/global"),i=require("../protobuf/index"),s=require("./constants"),o=r(require("./logging"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(n=function(t){return t?i:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=n(e);if(i&&i.has(t))return i.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var a=o?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=t[r]}return s.default=t,i&&i.set(t,s),s}class a{}exports.BaseRecorderCallback=a;class c{constructor(e={},i){this.notes=[],this.midiInputs=[],this.loClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new t.MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.config={playClick:e.playClick,qpm:e.qpm||s.DEFAULT_QUARTERS_PER_MINUTE,playCountIn:e.playCountIn,startRecordingAtFirstNote:e.startRecordingAtFirstNote||!1},this.callbackObject=i,this.recording=!1,this.onNotes=new Map}async initialize(){await navigator.requestMIDIAccess().then(t=>this.midiReady(t),t=>console.log("Something went wrong",t))}midiReady(t){o.log("Initialized Recorder","Recorder");const e=t.inputs.values();for(let i=e.next();i&&!i.done;i=e.next())this.midiInputs.push(i.value)}isRecording(){return this.recording}setTempo(e){this.config.qpm=e,"started"===t.Transport.state&&(t.Transport.bpm.value=e)}enablePlayClick(t){this.config.playClick=t}enablePlayCountIn(t){this.config.playCountIn=t}initClickLoop(){let e=0;this.clickLoop=new t.Loop(i=>{e%4==0?this.loClick.triggerAttack("G5",i):this.hiClick.triggerAttack("C6",i),e++,this.config.playCountIn&&4===e&&(t.Transport.stop(),this.clickLoop.stop())},"4n")}getMIDIInputs(){return this.midiInputs}start(e){const i=e||this.midiInputs;for(const t of i)t.onmidimessage=(t=>{this.midiMessageReceived(t)});if(this.config.playClick||this.config.playCountIn?(this.initClickLoop(),t.Transport.bpm.value=this.config.qpm,t.Transport.start(),this.clickLoop.start()):this.clickLoop=null,this.recording=!0,this.firstNoteTimestamp=void 0,this.notes=[],this.onNotes=new Map,!this.startRecordingAtFirstNote){const t=Date.now();this.firstNoteTimestamp=t}}stop(){this.recording=!1;const e=Date.now();this.onNotes.forEach((t,i)=>{this.noteOff(i,e)});for(const t of this.midiInputs)t.onmidimessage=null;return this.clickLoop&&(t.Transport.stop(),this.clickLoop.stop()),0===this.notes.length?null:this.getNoteSequence()}getNoteSequence(){return 0===this.notes.length?null:i.NoteSequence.create({notes:this.notes,totalTime:this.notes[this.notes.length-1].endTime})}reset(){const t=this.stop();return this.firstNoteTimestamp=void 0,this.notes=[],this.onNotes=new Map,t}midiMessageReceived(t){if(!this.recording)return;let i;const s=(i=void 0!==t.timeStamp&&0!==t.timeStamp?t.timeStamp:e.performance.now())+e.performance.timing.navigationStart;void 0===this.firstNoteTimestamp&&(this.firstNoteTimestamp=s);const o=t.data[0]>>4,n=t.data[1],r=t.data.length>2?t.data[2]:1,a=t.srcElement;8===o||9===o&&0===r?(this.callbackObject&&this.callbackObject.noteOff&&this.callbackObject.noteOff(n,r,a),this.noteOff(n,s),this.callbackObject&&this.callbackObject.run&&this.callbackObject.run(this.getNoteSequence())):9===o&&(this.callbackObject&&this.callbackObject.noteOn&&this.callbackObject.noteOn(n,r,a),this.noteOn(n,r,s))}noteOn(t,e,s){const o=new i.NoteSequence.Note;o.pitch=t,o.startTime=(s-this.firstNoteTimestamp)/1e3,o.velocity=e,this.onNotes.set(t,o)}noteOff(t,e){const i=this.onNotes.get(t);i&&(i.endTime=(e-this.firstNoteTimestamp)/1e3,this.notes.push(i)),this.onNotes.delete(t)}}exports.Recorder=c;
},{"tone":"Houh","../core/compat/global":"cgxr","../protobuf/index":"t75P","./constants":"kGvI","./logging":"HDYb"}],"RPS9":[function(require,module,exports) {
var define;
var t;!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof t&&t.amd?t([],i):"object"==typeof exports?exports.index=i():e.index=i()}(self,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";i.r(e),i.d(e,"SVGNS",function(){return s}),i.d(e,"drawSVGPath",function(){return n}),i.d(e,"drawSVGText",function(){return r}),i.d(e,"createSVGGroupChild",function(){return a}),i.d(e,"setFade",function(){return h});const s="http://www.w3.org/2000/svg";function n(t,e,i,n,r,a,h=1){const l=document.createElementNS(s,"path");return l.setAttributeNS(null,"d",e),l.setAttributeNS(null,"transform",`translate(${i}, ${n}) scale(${r}, ${a})`),l.setAttributeNS(null,"opacity",`${h}`),t.appendChild(l),l}function r(t,e,i,n,r,a=!1,h=1,l=1){const c=document.createElementNS(s,"text");c.setAttributeNS(null,"font-family","Times"),c.setAttributeNS(null,"font-size",r),a&&c.setAttributeNS(null,"font-weight","bold"),c.setAttributeNS(null,"transform",`translate(${i}, ${n}) scale(${h}, ${l})`);const o=document.createTextNode(e);return c.appendChild(o),t.appendChild(c),c}function a(t,e){const i=document.createElementNS(s,"g");return i.setAttribute("data-id",e),t.appendChild(i),i}function h(t,e=!1,i=1,n=0){let r=t.querySelector("animate");if(!r){(r=document.createElementNS(s,"animate")).setAttributeNS(null,"attributeName","opacity"),r.setAttributeNS(null,"dur","4s"),r.setAttributeNS(null,"fill","freeze"),r.setAttributeNS(null,"keyTimes","0; 0.25; 0.5; 0.75; 1");const t=(i+3*n)/4;r.setAttributeNS(null,"values",`${i}; ${t}; ${n}; ${t}; ${i}`)}return e?r.setAttributeNS(null,"repeatCount","indefinite"):r.setAttributeNS(null,"repeatCount","1"),t.appendChild(r),t}},function(t,e,i){"use strict";i.r(e),i.d(e,"PATH_SCALE",function(){return s}),i.d(e,"staffLinePath",function(){return r}),i.d(e,"extraLinePath",function(){return a}),i.d(e,"barPath",function(){return h}),i.d(e,"stemPath",function(){return l}),i.d(e,"singleFlagPath",function(){return c}),i.d(e,"multiFlagPath",function(){return o}),i.d(e,"tiePath",function(){return u}),i.d(e,"dotPath",function(){return d}),i.d(e,"NOTE_PATHS",function(){return g}),i.d(e,"REST_PATHS",function(){return f}),i.d(e,"CLEF_PATHS",function(){return S}),i.d(e,"ACCIDENTAL_PATHS",function(){return p});const s=100,n="M 0,10 C 0,-15 35,-50 80,-50 110,-50 125,-35 125,-10 \n125,15 90,50 45,50 15,50 0,35 0,10 Z",r="m 0,0 h 100",a="m -25,0 h 175",h="m 0,-200 v 400",l="m 0,0 v 100 h 15 v -100 z",c="M0,0 h 12 c 7,100 175,156 62,314 79,-177 -49,\n-193 -61,-200 l -13,-5 z",o="m 0,0 h 10 c 6,72 173,64 84,227 44,-120 -44,\n-123 -94,-167 z",u="M 0,25 C 10,46 30,67 50,67 69,67 90,47 100,25 94,\n65 73,89 50,89 26,89 5,63 0,25 Z",d="M 5 -20 a 20 20 0 1 0 0.00001 0 z",g={4:{path:"m 0,0 c 0,-37 49,-51 79,-51 31,0 83,13 83,51 0,39 \n-55,51 -84,51 C 49,51 0,37 0,0 Z m 111,31 c 13,-19 0,-58 -22,-68 -33,-15 \n-53,10 -39,49 9,27 48,39 61,19 z",width:150,stemVSteps:0,stemAnchor:0,flags:0},2:{path:"m 0,10 c 0,-25 35,-60 80,-60 15,0 45,4 45,40 C 125,16 \n89,50 45,50 17,50 0,36 0,10 Z m 71,7 c 17,-11 45,-34 38,-45 -7,-10 -39,1 \n-57,12 -19,11 -42,31 -36,42 6,10 37,2 55,-9 z",width:125,stemVSteps:7,stemAnchor:-10,flags:0},1:{path:n,width:125,stemVSteps:7,stemAnchor:-10,flags:0},.5:{path:n,width:125,stemVSteps:7,stemAnchor:-10,flags:1},.25:{path:n,width:125,stemVSteps:9,stemAnchor:-10,flags:2},.125:{path:n,width:125,stemVSteps:11,stemAnchor:-10,flags:3},.0625:{path:n,width:125,stemVSteps:13,stemAnchor:-10,flags:4}},f={4:"m 0,-50 h 125 v -50 H 0 Z",2:"M 0,0 H 125 V -50 H 0 Z",1:"m 0,-25 c 39,-39 37,-75 8,-120 l 6,-5 61,103 C \n40,-13 31,4 73,71 l -5,5 C 14,52 16,125 67,144 l -4,6 C -37,102 -1,22 59,60 Z",.5:"m 52,-47 c 26,-2 42,-21 48,-42 l 12,4 L 64,83 52,79 \n88,-49 c 0,0 -17,22 -57,22 -16,0 -31,-13 -31,-27 0,-18 10,-31 27,-31 17,0 \n33,15 25,38 z",.25:"m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 \nc -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 \n31,27 40,0 57,-22 57,-22 l -36,128 12,4 77,-270 z",.125:"m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 \nc -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 \n31,27 40,0 57,-22 57,-22 L 68,20 C 61,37 46,51 24,52 32,29 16,14 -1,14 c \n-17,0 -27,13 -27,31 0,14 15,27 31,27 38,0 55,-20 57,-22 l -36,128 12,4 \n105,-369 z",.0625:"m 158,-292 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -17,61 \nv 0 c -6,21 -22,40 -48,42 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 \n15,27 31,27 40,0 57,-22 57,-22 l -20,69 c -7,18 -22,33 -45,35 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 L 68,20 C \n61,37 46,51 24,52 32,29 16,14 -1,14 c -17,0 -27,13 -27,31 0,14 15,27 31,27 \n38,0 55,-20 57,-22 l -36,128 12,4 134,-469 z"},S={50:{path:"m 101,-199 c -49,0 -100,28 -100,83 0,39 58,57 82,26 15,-20 \n-4,-47 -32,-47 -23,1 -25,0 -25,-8 0,-22 40,-46 71,-41 91,16 67,208 -105,302 \n75,-27 198,-94 211,-201 6,-66 -42,-114 -102,-114 z m 143,33 c -13,0 -23,11 \n-23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 z m 2,83 c \n-13,0 -23,11 -23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 \nz",upper:-4,lower:3},71:{path:"M 139,48 C 102,57 76,120 131,151 41,128 64,24 129,2 L \n117,-57 C -32,47 26,217 166,182 Z m 12,-1 27,131 C 242,153 216,46 151,47 \nZ m -35,-177 c 34,-23 82,-117 50,-140 -23,-17 -71,33 -50,140 z m -10,10 c \n-23,-77 -20,-200 48,-213 19,-4 89,171 -26,266 l 13,66 c 120,-6 137,155 \n39,191 l 12,58 c 30,131 -137,145 -138,47 0,-29 37,-59 63,-37 21,18 25,71 \n-25,70 32,42 103,0 91,-65 L 167,193 C 56,232 -112,63 106,-120 Z",upper:-7,lower:8}},p=[null,"m -49,-121 v 52 l -29,9 v -48 h -8 v 51 l -20,6 v 29 l \n20,-6 v 70 l -20,6 v 30 l 20,-6 v 51 h 8 V 69 l 30,-8 v 50 h 8 V 58 l 20,-6 \nV 23 l -20,6 v -71 l 20,-6 v -29 l -20,6 v -50 z m 1,82 v 71 l -29,9 v -71 z","M -106,-166 V 67 c 52,-42 85,-56 85,-94 0,-47 -46,-51 \n-73,-22 v -117 z m 31,120 c 20,0 42,46 -20,91 V -7 c 0,-28 10,-39 20,-39 z","m -81,-58 v -48 H -92 V 73 l 60,-13 v 50 h 11 V -72 Z m \n50,24 v 58 l -50,11 v -58 z"]},function(t,e,i){"use strict";i.r(e),i.d(e,"MIN_RESOLUTION",function(){return s}),i.d(e,"STEM_WIDTH",function(){return n}),i.d(e,"LINE_STROKE",function(){return r}),i.d(e,"COMPACT_SPACING",function(){return a});const s=.0625,n=15,r=1,a=150},function(t,e,i){"use strict";i.r(e),i.d(e,"MAX_QUARTER_DIVISION",function(){return l}),i.d(e,"ScrollType",function(){return c}),i.d(e,"StaffSVGRender",function(){return o});var s=i(2),n=i(0),r=i(1);const a=[{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,0,1,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,0,3,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,2,0,0,2,0,2,0,0,3]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-7],accidental:[3,0,3,0,3,0,0,3,0,3,0,0]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,2,0,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,3,0,0]}],h=[{accidental:1,pitches:[]},{accidental:2,pitches:[70,75,68,73,66]},{accidental:1,pitches:[78,73]},{accidental:2,pitches:[70,75,68]},{accidental:1,pitches:[78,73,80,75]},{accidental:2,pitches:[70]},{accidental:2,pitches:[70,75,68,73,66,71]},{accidental:1,pitches:[78]},{accidental:2,pitches:[70,75,68,73]},{accidental:1,pitches:[78,73,80]},{accidental:2,pitches:[70,75]},{accidental:1,pitches:[78,73,80,75,70]}],l=16;var c;!function(t){t[t.PAGE=0]="PAGE",t[t.NOTE=1]="NOTE",t[t.BAR=2]="BAR"}(c||(c={}));class o{constructor(t,e,i){this.handleScrollEvent=(t=>{this.lastKnownScrollLeft=this.parentElement.scrollLeft,this.ticking||window.requestAnimationFrame(()=>{this.changeAndDrawSignaturesIfNeeded(this.lastKnownScrollLeft),this.ticking=!1}),this.ticking=!0}),this.scoreInfo=t,this.config={noteHeight:e.noteHeight||6,noteSpacing:e.noteSpacing||1,pixelsPerTimeStep:e.pixelsPerTimeStep||30,noteRGB:e.noteRGB||"8, 41, 64",activeNoteRGB:e.activeNoteRGB||"240, 84, 119"},this.div=i,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.key=e.defaultKey||0,this.scrollType=e.scrollType||c.PAGE,this.scale=this.config.noteHeight/r.PATH_SCALE,(void 0===e.pixelsPerTimeStep||e.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0,this.config.noteSpacing=s.COMPACT_SPACING*this.scale),this.clear(),this.redraw()}clear(){for(;this.div.lastChild;)this.div.removeChild(this.div.lastChild);this.div.style.overflow="visible",this.div.style.position="relative",this.overlaySVG=document.createElementNS(n.SVGNS,"svg"),this.overlaySVG.style.position="absolute",this.div.appendChild(this.overlaySVG),this.overlayG=Object(n.createSVGGroupChild)(this.overlaySVG,"overlay"),this.signaturesBlinking=!1,this.signaturesQuarters=0,this.parentElement=document.createElement("div"),this.parentElement.style.overflow="auto",this.div.appendChild(this.parentElement),this.ticking=!1,this.lastKnownScrollLeft=0,this.parentElement.addEventListener("scroll",this.handleScrollEvent),this.staffSVG=document.createElementNS(n.SVGNS,"svg"),this.parentElement.appendChild(this.staffSVG),this.staffG=Object(n.createSVGGroupChild)(this.staffSVG,"staff"),this.linesG=Object(n.createSVGGroupChild)(this.staffSVG,"lines"),this.setStroke(this.linesG),this.staffG.appendChild(this.linesG),this.musicG=Object(n.createSVGGroupChild)(this.staffSVG,"music"),this.setFill(this.musicG),this.setStroke(this.musicG,0),this.staffG.appendChild(this.musicG),this.signaturesG=Object(n.createSVGGroupChild)(this.staffSVG,"signatures"),this.staffG.appendChild(this.signaturesG);let t=0,e=0;this.scoreInfo.notes.forEach(i=>{t+=i.pitch,++e});const i=t/e;this.clef=i<60?50:71,this.signaturesList=[{x:0,q:0}],this.signatureCurrent=0,this.signatureNext=0,this.changeKeySignatureIfNeeded(0),this.changeTimeSignatureIfNeeded(0),this.vStepSize=this.config.noteHeight/2,this.hStepSize=this.config.pixelsPerTimeStep,this.staffOffset=0,this.height=0,this.width=0,this.musicBlockMap=new Map,this.playingNotes=[],this.lastBar=0,this.barAccidentals={},this.lastQ=-1}isPaintingActiveNote(t,e){const i=t.start===e.start,s=t.start<=e.start&&t.start+t.length>=e.start+e.length;return i||s}redraw(t,e){let i=-1;const s=0===this.config.pixelsPerTimeStep;if(t){const r=[];this.playingNotes.forEach(e=>{this.isPaintingActiveNote(e,t)?r.push(e):this.highlightElement(this.getGroup(e),!1)}),this.playingNotes=r;const a=this.getGroup(t);if(a){this.playingNotes.push(t),this.highlightElement(a,!0),i=a.getBoundingClientRect().left-this.staffSVG.getBoundingClientRect().left;const r=t.start,h=a.getAttribute("data-is-bar-beginning");(this.scrollType!==c.BAR||h)&&this.scrollIntoViewIfNeeded(e,i),!s&&this.signaturesBlinking&&r>=this.signaturesQuarters&&(this.signaturesBlinking=!1,Object(n.setFade)(this.overlayG,this.signaturesBlinking))}}else{this.setDetails();const t=-1===this.lastQ;let e=0,i=0;t?(i=this.drawSignatures(this.overlayG,e,!0,!0,!0),s&&(this.width=0,i+=this.config.noteSpacing),i+=this.drawRests(this.initialRest,e+i)):e=this.width,this.musicBlockMap.forEach((t,n)=>{s||(e=this.quartersToTime(n)*this.hStepSize),n>this.lastQ?(i+=this.drawMusicBlock(t,e+i),this.lastQ=n):n===this.lastQ&&(i+=this.drawRests(t,e+i))});const n=this.staffSVG.getBoundingClientRect(),r=this.musicG.getBoundingClientRect();if(this.updateVerticalBoundaries(r.top-n.top,r.bottom-n.top),s)this.width+=i;else{const t=this.musicBlockMap.get(this.lastQ),e=this.quartersToTime(this.lastQ+t.notes[0].length);this.width=e*this.config.pixelsPerTimeStep}this.staffSVG.setAttributeNS(null,"width",`${this.width}`),this.redrawStaff(this.linesG,0,this.width)}return i}drawMusicBlock(t,e){const i=t.notes[0].start;let a=this.drawBarIfNeeded(i,e);a+=this.drawSignaturesIfNeeded(i,e+a);let h=0;for(let n=4;n>=s.MIN_RESOLUTION&&!h;n/=2)n<=t.notes[0].length&&(h=n);if(0===h){const e=0===t.notes[0].length?"[infinite]":`${4/t.notes[0].length}`;console.warn(" StaffRender ","background:orange; color:white","StaffRender does not handle notes shorther than "+`1/${4/s.MIN_RESOLUTION}th, and this score tries to draw a `+`1/${e}th. Shortest possible note will be drawn instead.`),h=s.MIN_RESOLUTION}const l=r.NOTE_PATHS[h];let c;if(l.stemAnchor&&(c=Object(n.createSVGGroupChild)(this.musicG,"stem")),t.notes.forEach(i=>{const s=i.vSteps*this.vStepSize,c=2*(i.vSteps>0?Math.floor(i.vSteps/2):Math.ceil(i.vSteps/2)),o=i.vSteps>0?-2:2;for(let t=c;Math.abs(t)>4;t+=o)Object(n.drawSVGPath)(this.linesG,r.extraLinePath,e+a,t*this.vStepSize,this.scale,1);if(i.g=i.tiedFrom?i.tiedFrom.g:Object(n.createSVGGroupChild)(this.musicG,`${i.start}-${i.pitch}`),t.isBarBeginning&&i.g.setAttribute("data-is-bar-beginning","true"),i.tiedFrom){const t=e+a-i.tiedFrom.xHeadRight;Object(n.drawSVGPath)(i.g,r.tiePath,i.tiedFrom.xHeadRight,s,t/r.PATH_SCALE,this.scale*(i.vSteps<0?-1:1),i.opacity)}Object(n.drawSVGPath)(i.g,l.path,e+a,s,this.scale,this.scale,i.opacity),i.xHeadRight=e+a+l.width*this.scale,1.5*h<=i.length&&Object(n.drawSVGPath)(i.g,r.dotPath,e+a+l.width*this.scale+this.vStepSize/2,s-this.vStepSize/2,this.scale,this.scale,i.opacity),0!==i.accidental&&Object(n.drawSVGPath)(i.g,r.ACCIDENTAL_PATHS[i.accidental],e+a,s,this.scale,this.scale,i.opacity)}),l.stemAnchor){let i,h,o=e+a;const u=l.stemAnchor*this.scale,d=t.minVStep+t.maxVStep<0,g=l.flags>2?2*(l.flags-2):0;if(d?(i=t.maxVStep*this.vStepSize-u,h=(t.minVStep+7+g)*this.vStepSize):(o+=(l.width-s.STEM_WIDTH)*this.scale,i=t.minVStep*this.vStepSize+u,h=(t.maxVStep-7-g)*this.vStepSize),Object(n.drawSVGPath)(c,r.stemPath,o,i,this.scale,(h-i)/r.PATH_SCALE),1===l.flags)Object(n.drawSVGPath)(c,r.singleFlagPath,o,h,this.scale,this.scale*(d?-1:1),1);else if(l.flags>1)for(let t=0;t<l.flags;++t)Object(n.drawSVGPath)(c,r.multiFlagPath,o,h,this.scale,this.scale*(d?-1:1),1),h+=(d?-2:2)*this.vStepSize}return 0===this.config.pixelsPerTimeStep&&(a+=l.width*this.scale,c&&(a+=c.getBoundingClientRect().width),a+=this.config.noteSpacing),a+=this.drawRests(t,e+a)}drawBarIfNeeded(t,e){let i=0;const s=this.lastBar+this.getBarLength();return 0!==t&&t>=s&&(this.config.pixelsPerTimeStep>0?e-=this.config.noteSpacing:i=this.config.noteSpacing,Object(n.drawSVGPath)(this.linesG,r.barPath,e,0,1,this.scale),this.lastBar=s),i}drawRests(t,e){let i=0,a=t.restToNextLength;if(a){this.config.pixelsPerTimeStep>0&&(e+=this.quartersToTime(t.notes[0].length)*this.hStepSize);let h=t.notes[0].start+t.notes[0].length,l=0;const c=this.lastBar+this.getBarLength()-h;let o;for(a>c&&(l=a-c,a=c),o=4;o>this.getBarLength()&&o>=s.MIN_RESOLUTION;o/=2);let u=o;for(;(a||l)&&u>=s.MIN_RESOLUTION;){if(u<=a){i+=this.drawBarIfNeeded(h,e+i),i+=this.drawSignaturesIfNeeded(h,e+i);const t=Object(n.drawSVGPath)(this.musicG,r.REST_PATHS[u],e+i,0,this.scale,this.scale);this.config.pixelsPerTimeStep>0?e+=this.quartersToTime(u)*this.hStepSize:(i+=t.getBoundingClientRect().width,i+=this.config.noteSpacing),h+=u,a-=u}if(l&&a<=0){const t=this.getBarLength();for(l>t?(a=t,l-=t):(a=l,l=0),o=4;o>this.getBarLength()&&o>=s.MIN_RESOLUTION;o/=2);u=o}a<u&&(u/=2)}}return i}redrawStaff(t,e,i){let s=t.querySelector('g[data-id="staff-five-lines"]');if(s)s.setAttributeNS(null,"transform",`scale(${i/r.PATH_SCALE}, 1)`);else{s=Object(n.createSVGGroupChild)(t,"staff-five-lines");const a=0;for(let t=-4;t<=4;t+=2)Object(n.drawSVGPath)(s,r.staffLinePath,e,a+t*this.vStepSize,i/r.PATH_SCALE,1)}return s}clearSignatureOverlay(){for(;this.overlayG.lastChild;)this.overlayG.removeChild(this.overlayG.lastChild)}drawSignaturesIfNeeded(t,e){let i=0;const r=this.changeKeySignatureIfNeeded(t),a=this.changeTimeSignatureIfNeeded(t);if(r||a){const h=s.COMPACT_SPACING*this.scale*(this.config.pixelsPerTimeStep>0?3:2);this.signaturesList.push({x:e-h,q:t}),null===this.signatureNext&&(this.signatureNext=e);const l=t>0?Object(n.createSVGGroupChild)(this.signaturesG,"signatures"):this.overlayG;i+=this.drawSignatures(l,e+i,!1,r,a)}return 0===this.config.pixelsPerTimeStep?i:0}drawSignatures(t,e,i,a,l){const c=s.COMPACT_SPACING*this.scale;let o,u=c;const d=t===this.overlayG||this.config.pixelsPerTimeStep>0;if(d){(o=document.createElementNS(n.SVGNS,"rect")).setAttributeNS(null,"x",`${e}`),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1"),o.setAttributeNS(null,"height","1"),o.setAttribute("data-id","background"),t.appendChild(o);const i=document.defaultView.getComputedStyle(this.div.parentElement);o.setAttributeNS(null,"fill",i.getPropertyValue("background-color"))}if(i){const i=Object(n.drawSVGPath)(t,r.CLEF_PATHS[this.clef].path,e+u,0,this.scale,this.scale);this.setFill(i),u+=3*c}if(a){const i=h[this.key].accidental,s=71===this.clef?0:14;h[this.key].pitches.forEach(a=>{const h=this.getPitchDetails(a).vSteps,l=Object(n.drawSVGPath)(t,r.ACCIDENTAL_PATHS[i],e+u,(s+h)*this.vStepSize,this.scale,this.scale);this.setFill(l),u+=l.getBoundingClientRect().width})}if(l){const i=Object(n.createSVGGroupChild)(t,"time-key"),s=`${2.85*this.config.noteHeight}px`;Object(n.drawSVGText)(i,`${this.timeSignatureNumerator}`,e+u,-.5,s,!0),Object(n.drawSVGText)(i,`${this.timeSignatureDenominator}`,e+u,4*this.vStepSize-.5,s,!0),this.setFill(i),u+=i.getBoundingClientRect().width+c}const g=this.redrawStaff(t,e,u);this.setStroke(g);const f=this.div.getBoundingClientRect(),S=t.getBoundingClientRect();if(this.updateVerticalBoundaries(S.top-f.top,S.bottom-f.top),d&&(o.setAttributeNS(null,"y",`${-this.staffOffset}`),o.setAttributeNS(null,"height",`${this.height}`),o.setAttributeNS(null,"width",`${u}`)),t===this.overlayG){this.overlaySVG.setAttributeNS(null,"width",`${u+5}`);for(let e=0;e<5;++e){const i=Object(n.drawSVGPath)(t,r.stemPath,u+e,e*e-this.staffOffset,1/s.STEM_WIDTH,(this.height-2*e*e)/r.PATH_SCALE,(e-5)*(e-5)*2/r.PATH_SCALE);this.setFill(i)}}if(this.config.pixelsPerTimeStep>0){const i=0===this.signaturesQuarters;return i&&(this.signaturesQuarters=this.timeToQuarters(u/this.hStepSize)),(i||e>0)&&(this.signaturesBlinking=!0,Object(n.setFade)(t,this.signaturesBlinking)),0}return u}changeKeySignatureIfNeeded(t){if(this.scoreInfo.keySignatures){let e=this.key;for(let i=0;i<this.scoreInfo.keySignatures.length&&this.scoreInfo.keySignatures[i].start<=t;++i)e=this.scoreInfo.keySignatures[i].key;if(e!==this.key)return this.key=e,!0}return!1}changeTimeSignatureIfNeeded(t){if(this.scoreInfo.timeSignatures){let e=this.timeSignatureNumerator,i=this.timeSignatureDenominator;for(let s=0;s<this.scoreInfo.timeSignatures.length&&this.scoreInfo.timeSignatures[s].start<=t;++s)e=this.scoreInfo.timeSignatures[s].numerator,i=this.scoreInfo.timeSignatures[s].denominator;if(e!==this.timeSignatureNumerator||i!==this.timeSignatureDenominator)return this.timeSignatureNumerator=e,this.timeSignatureDenominator=i,!0}return!1}changeAndDrawSignaturesIfNeeded(t){let e;if(t<this.signatureCurrent||null!==this.signatureNext&&this.signatureNext<=t){e=this.signaturesList[0].q,this.signatureNext=null;for(let i=0;i<this.signaturesList.length;++i){if(t<this.signaturesList[i].x){this.signatureNext=this.signaturesList[i].x;break}this.signatureCurrent=this.signaturesList[i].x,e=this.signaturesList[i].q}}if(void 0!==e){const t=this.key,i=this.timeSignatureNumerator,s=this.timeSignatureDenominator;this.changeKeySignatureIfNeeded(e),this.changeTimeSignatureIfNeeded(e),this.clearSignatureOverlay(),this.drawSignatures(this.overlayG,0,!0,!0,!0),this.key=t,this.timeSignatureNumerator=i,this.timeSignatureDenominator=s}this.config.pixelsPerTimeStep>0&&0===t&&(this.signatureNext=0,this.signaturesBlinking=!0,Object(n.setFade)(this.overlayG,this.signaturesBlinking))}getBarLength(){return 4*this.timeSignatureNumerator/this.timeSignatureDenominator}scrollIntoViewIfNeeded(t,e){if(t)if(this.scrollType===c.PAGE){const t=this.parentElement.getBoundingClientRect().width;e>this.parentElement.scrollLeft+t&&(this.parentElement.scrollLeft=e-20)}else{const t=this.parentElement.getBoundingClientRect().width;this.parentElement.scrollLeft=e-.5*t}}updateVerticalBoundaries(t,e){let i=0;if(t<0){this.staffOffset-=t;const e=`translate(0, ${this.staffOffset})`;this.overlayG.setAttributeNS(null,"transform",e),this.staffG.setAttributeNS(null,"transform",e),i=this.height-t}if((i=Math.max(i,e-t))>this.height){this.height=i,this.overlaySVG.setAttributeNS(null,"height",`${this.height}`),this.staffSVG.setAttributeNS(null,"height",`${this.height}`);const t=this.div.querySelectorAll('rect[data-id="background"]');for(let e=0;e<t.length;++e){const i=t[e];i.setAttributeNS(null,"y",`${-this.staffOffset}`),i.setAttributeNS(null,"height",`${this.height}`)}}}setFill(t,e=!1){t.setAttributeNS(null,"fill",this.getColor(e))}setStroke(t,e=s.LINE_STROKE,i=!1){t.setAttributeNS(null,"stroke",this.getColor(i)),t.setAttributeNS(null,"stroke-width",`${e}`)}getColor(t){return`rgb(${t?this.config.activeNoteRGB:this.config.noteRGB})`}getOpacity(t){return t?t/127*.8+.2:1}getGroup(t){const e=t.start,i=t.pitch;return this.staffSVG.querySelector(`g[data-id="${e}-${i}"]`)}highlightElement(t,e){t.setAttribute("fill",this.getColor(e)),t.setAttribute("stroke",this.getColor(e))}getBarBeginnings(){const t=new Set;let e=0;this.scoreInfo.notes.forEach(t=>{t.start+t.length>e&&(e=t.start+t.length)});const i=this.scoreInfo.timeSignatures?this.scoreInfo.timeSignatures.slice(0):[{start:0,numerator:4,denominator:4}];i.sort((t,e)=>t.start-e.start);let s=0;for(let n=0;n<i.length;++n){const r=n===i.length-1?e:i[n].start,a=4*i[n].numerator/i[n].denominator;for(;s<r;s+=a)t.add(s)}return t}quartersToTime(t){return t/this.scoreInfo.tempos[0].qpm*60}timeToQuarters(t){return t*this.scoreInfo.tempos[0].qpm/60}setDetails(){let t=new Map;const e=this.getBarBeginnings(),i=new Set(e);this.scoreInfo.notes.slice().sort((t,e)=>t.start-e.start).forEach(e=>{const s=this.getQNote(e);i.add(s.start),i.add(s.start+s.length),t.has(s.start)?t.get(s.start).push(s):t.set(s.start,[s])}),Array.from(i).sort((t,e)=>t-e).forEach(e=>{const i=[];t.forEach(t=>{t.forEach(t=>{const s=this.splitQNote(t,e);s&&i.push(s)})}),i.forEach(e=>{t.has(e.start)?t.get(e.start).push(e):t.set(e.start,[e])})}),t=new Map(Array.from(t).sort((t,e)=>t[0]-e[0]));const s=this.key;let n=null,r=0;const a=e[Symbol.iterator]();let h=a.next();t.forEach((t,e)=>{const i={maxVStep:Number.MAX_SAFE_INTEGER,minVStep:Number.MIN_SAFE_INTEGER,restToNextLength:0,isBarBeginning:!1,notes:[]};this.changeKeySignatureIfNeeded(e);const s=h.value+this.getBarLength();!h.done&&e>=s&&(h=a.next(),this.barAccidentals={},i.isBarBeginning=!0),t.forEach(t=>{this.analyzePitch(t,e),i.minVStep=Math.max(t.vSteps,i.minVStep),i.maxVStep=Math.min(t.vSteps,i.maxVStep),i.notes.push(t)}),n&&(n.restToNextLength=e-r),this.musicBlockMap.set(e,i),n=i,r=e+i.notes[0].length}),this.initialRest={maxVStep:0,minVStep:0,restToNextLength:this.musicBlockMap.values().next().value.notes[0].start,isBarBeginning:!0,notes:[{start:0,length:0,vSteps:0,accidental:0,opacity:0,pitch:0,xHeadRight:0}]},this.key=s}getQNote(t){return{start:t.start,length:t.length,vSteps:0,accidental:0,opacity:this.getOpacity(t.intensity),pitch:t.pitch,xHeadRight:0}}splitQNote(t,e){const i=t.start+t.length-e;return e>t.start&&i>0?(t.length-=i,{start:e,length:i,vSteps:t.vSteps,accidental:t.accidental,opacity:t.opacity,pitch:t.pitch,xHeadRight:0,tiedFrom:t}):null}analyzePitch(t,e){const i=this.getPitchDetails(t.pitch);i.vSteps in this.barAccidentals?i.accidental===this.barAccidentals[i.vSteps]?i.accidental=0:(3===this.barAccidentals[i.vSteps]?i.accidental=i.keyAccidental:0===i.accidental&&(i.accidental=3),this.barAccidentals[i.vSteps]=i.accidental):(t.tiedFrom&&(i.accidental=0),this.barAccidentals[i.vSteps]=i.accidental),t.vSteps=i.vSteps,t.accidental=i.accidental}getPitchDetails(t){const e=t-60,i=Math.floor(e/12),s=e-12*i,n=a[this.key].steps[s],r=71===this.clef?6:-6,l=1===h[this.key].accidental?69+(s+3)%12:64+(s+8)%12;return{vSteps:r-7*i+n,accidental:a[this.key].accidental[s],keyAccidental:h[this.key].pitches.indexOf(l)>-1?h[this.key].accidental:0}}}},function(t,e,i){"use strict";i.r(e);var s=i(3);i.d(e,"MAX_QUARTER_DIVISION",function(){return s.MAX_QUARTER_DIVISION}),i.d(e,"ScrollType",function(){return s.ScrollType}),i.d(e,"StaffSVGRender",function(){return s.StaffSVGRender})}])});
},{}],"e0SP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaffSVGVisualizer=exports.ScrollType=exports.WaterfallSVGVisualizer=exports.PianoRollSVGVisualizer=exports.BaseSVGVisualizer=exports.Visualizer=exports.PianoRollCanvasVisualizer=exports.BaseVisualizer=void 0;var t=r(require("staffrender")),e=require("./constants"),i=r(require("./logging")),s=r(require("./sequences"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(n=function(t){return t?i:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=n(e);if(i&&i.has(t))return i.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&Object.prototype.hasOwnProperty.call(t,h)){var o=r?Object.getOwnPropertyDescriptor(t,h):null;o&&(o.get||o.set)?Object.defineProperty(s,h,o):s[h]=t[h]}return s.default=t,i&&i.set(t,s),s}const h=1;class o{constructor(t,e={}){this.noteSequence=t,this.sequenceIsQuantized=s.isQuantizedSequence(this.noteSequence);if(this.config={noteHeight:e.noteHeight||6,noteSpacing:e.noteSpacing||1,pixelsPerTimeStep:e.pixelsPerTimeStep||30,noteRGB:e.noteRGB||"8, 41, 64",activeNoteRGB:e.activeNoteRGB||"240, 84, 119",minPitch:e.minPitch,maxPitch:e.maxPitch},this.sequenceIsQuantized){const e=t.quantizationInfo.stepsPerQuarter;this.config.pixelsPerTimeStep=e?this.config.pixelsPerTimeStep/e:7}const i=this.getSize();this.width=i.width,this.height=i.height}updateMinMaxPitches(t=!1){if(!this.config.minPitch||!this.config.maxPitch){void 0===this.config.minPitch&&(this.config.minPitch=e.MAX_MIDI_PITCH),void 0===this.config.maxPitch&&(this.config.maxPitch=e.MIN_MIDI_PITCH);for(const t of this.noteSequence.notes)this.config.minPitch=Math.min(t.pitch,this.config.minPitch),this.config.maxPitch=Math.max(t.pitch,this.config.maxPitch);t||(this.config.minPitch-=2,this.config.maxPitch+=2)}}getSize(){this.updateMinMaxPitches();const t=(this.config.maxPitch-this.config.minPitch)*this.config.noteHeight,e=this.sequenceIsQuantized?this.noteSequence.totalQuantizedSteps:this.noteSequence.totalTime;if(!e)throw new Error("The sequence you are using with the visualizer does not have a "+(this.sequenceIsQuantized?"totalQuantizedSteps":"totalTime")+" field set, so the visualizer can't be horizontally sized correctly.");return{width:e*this.config.pixelsPerTimeStep,height:t}}getNotePosition(t,e){const i=this.getNoteEndTime(t)-this.getNoteStartTime(t),s=this.getNoteStartTime(t)*this.config.pixelsPerTimeStep,n=Math.max(this.config.pixelsPerTimeStep*i-this.config.noteSpacing,h);return{x:s,y:this.height-(t.pitch-this.config.minPitch)*this.config.noteHeight,w:n,h:this.config.noteHeight}}scrollIntoViewIfNeeded(t,e){if(t&&this.parentElement){const t=this.parentElement.getBoundingClientRect().width;e>this.parentElement.scrollLeft+t&&(this.parentElement.scrollLeft=e-20)}}getNoteStartTime(t){return this.sequenceIsQuantized?t.quantizedStartStep:Math.round(1e8*t.startTime)/1e8}getNoteEndTime(t){return this.sequenceIsQuantized?t.quantizedEndStep:Math.round(1e8*t.endTime)/1e8}isPaintingActiveNote(t,e){const i=this.getNoteStartTime(t)===this.getNoteStartTime(e),s=this.getNoteStartTime(t)<=this.getNoteStartTime(e)&&this.getNoteEndTime(t)>=this.getNoteEndTime(e);return i||s}}exports.BaseVisualizer=o;class a extends o{constructor(t,e,i={}){super(t,i),this.ctx=e.getContext("2d"),this.parentElement=e.parentElement;const s=window.devicePixelRatio||1;this.ctx&&(this.ctx.canvas.width=s*this.width,this.ctx.canvas.height=s*this.height,e.style.width=`${this.width}px`,e.style.height=`${this.height}px`,this.ctx.scale(s,s)),this.redraw()}redraw(t,e){let i;this.clear();for(let s=0;s<this.noteSequence.notes.length;s++){const e=this.noteSequence.notes[s],n=this.getNotePosition(e,s),r=.2,h=e.velocity?e.velocity/100+r:1,o=t&&this.isPaintingActiveNote(e,t),a=`rgba(${o?this.config.activeNoteRGB:this.config.noteRGB},\n  ${h})`;this.redrawNote(n.x,n.y,n.w,n.h,a),o&&e===t&&(i=n.x)}return this.scrollIntoViewIfNeeded(e,i),i}clear(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}clearActiveNotes(){this.redraw()}redrawNote(t,e,i,s,n){this.ctx.fillStyle=n,this.ctx.fillRect(Math.round(t),Math.round(e),Math.round(i),Math.round(s))}}exports.PianoRollCanvasVisualizer=a;class c extends a{constructor(t,e,s={}){super(t,e,s),i.log("mm.Visualizer is deprecated, and will be removed in a future          version. Please use mm.PianoRollCanvasVisualizer instead","mm.Visualizer",5)}}exports.Visualizer=c;class l extends o{constructor(t,e={}){super(t,e),this.drawn=!1}redraw(t,e){if(this.drawn||this.draw(),!t)return null;let i;this.unfillActiveRect(this.svg);for(let s=0;s<this.noteSequence.notes.length;s++){const e=this.noteSequence.notes[s];if(!(t&&this.isPaintingActiveNote(e,t)))continue;const n=this.svg.querySelector(`rect[data-index="${s}"]`);this.fillActiveRect(n,e),e===t&&(i=parseFloat(n.getAttribute("x")))}return this.scrollIntoViewIfNeeded(e,i),i}fillActiveRect(t,e){t.setAttribute("fill",this.getNoteFillColor(e,!0)),t.classList.add("active")}unfillActiveRect(t){const e=t.querySelectorAll("rect.active");for(let i=0;i<e.length;++i){const t=e[i],s=this.getNoteFillColor(this.noteSequence.notes[parseInt(t.getAttribute("data-index"),10)],!1);t.setAttribute("fill",s),t.classList.remove("active")}}draw(){for(let t=0;t<this.noteSequence.notes.length;t++){const e=this.noteSequence.notes[t],i=this.getNotePosition(e,t),s=this.getNoteFillColor(e,!1),n=[["index",t],["instrument",e.instrument],["program",e.program],["isDrum",!0===e.isDrum],["pitch",e.pitch]],r=[["--midi-velocity",String(void 0!==e.velocity?e.velocity:127)]];this.drawNote(i.x,i.y,i.w,i.h,s,n,r)}this.drawn=!0}getNoteFillColor(t,e){const i=t.velocity?t.velocity/100+.2:1;return`rgba(${e?this.config.activeNoteRGB:this.config.noteRGB},\n  ${i})`}drawNote(t,e,i,s,n,r,h){if(!this.svg)return;const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.classList.add("note"),o.setAttribute("fill",n),o.setAttribute("x",`${Math.round(t)}`),o.setAttribute("y",`${Math.round(e)}`),o.setAttribute("width",`${Math.round(i)}`),o.setAttribute("height",`${Math.round(s)}`),r.forEach(([t,e])=>{void 0!==e&&(o.dataset[t]=`${e}`)}),h.forEach(([t,e])=>{o.style.setProperty(t,e)}),this.svg.appendChild(o)}clear(){this.svg.innerHTML="",this.drawn=!1}clearActiveNotes(){this.unfillActiveRect(this.svg)}}exports.BaseSVGVisualizer=l;class u extends l{constructor(t,e,i={}){if(super(t,i),!(e instanceof SVGSVGElement))throw new Error("This visualizer requires an <svg> element to display the visualization");this.svg=e,this.parentElement=e.parentElement;const s=this.getSize();this.width=s.width,this.height=s.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.clear(),this.draw()}}exports.PianoRollSVGVisualizer=u;class g extends l{constructor(t,e,i={}){if(super(t,i),this.NOTES_PER_OCTAVE=12,this.WHITE_NOTES_PER_OCTAVE=7,this.LOW_C=24,this.firstDrawnOctave=0,this.lastDrawnOctave=6,!(e instanceof HTMLDivElement))throw new Error("This visualizer requires a <div> element to display the visualization");this.config.whiteNoteWidth=i.whiteNoteWidth||20,this.config.blackNoteWidth=i.blackNoteWidth||2*this.config.whiteNoteWidth/3,this.config.whiteNoteHeight=i.whiteNoteHeight||70,this.config.blackNoteHeight=i.blackNoteHeight||140/3,this.config.showOnlyOctavesUsed=i.showOnlyOctavesUsed,this.setupDOM(e);const s=this.getSize();this.width=s.width,this.height=s.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.svgPiano.style.width=`${this.width}px`,this.svgPiano.style.height=`${this.config.whiteNoteHeight}px`,this.parentElement.style.width=`${this.width+this.config.whiteNoteWidth}px`,this.parentElement.scrollTop=this.parentElement.scrollHeight,this.clear(),this.drawPiano(),this.draw()}setupDOM(t){this.parentElement=document.createElement("div"),this.parentElement.classList.add("waterfall-notes-container");const e=Math.max(t.getBoundingClientRect().height,200);this.parentElement.style.paddingTop=`${e-this.config.whiteNoteHeight}px`,this.parentElement.style.height=`${e-this.config.whiteNoteHeight}px`,this.parentElement.style.boxSizing="border-box",this.parentElement.style.overflowX="hidden",this.parentElement.style.overflowY="auto",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgPiano=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("waterfall-notes"),this.svgPiano.classList.add("waterfall-piano"),this.parentElement.appendChild(this.svg),t.innerHTML="",t.appendChild(this.parentElement),t.appendChild(this.svgPiano)}redraw(t,e){if(this.drawn||this.draw(),!t)return null;this.clearActiveNotes(),this.parentElement.style.paddingTop=this.parentElement.style.height;for(let i=0;i<this.noteSequence.notes.length;i++){const e=this.noteSequence.notes[i];if(!(t&&this.isPaintingActiveNote(e,t)))continue;const s=this.svg.querySelector(`rect[data-index="${i}"]`);this.fillActiveRect(s,e);const n=this.svgPiano.querySelector(`rect[data-pitch="${e.pitch}"]`);if(this.fillActiveRect(n,e),e===t){const t=parseFloat(s.getAttribute("y")),e=parseFloat(s.getAttribute("height"));return t<this.parentElement.scrollTop-e&&(this.parentElement.scrollTop=t+e),t}}return null}getSize(){this.updateMinMaxPitches(!0);let t=52;if(this.config.showOnlyOctavesUsed){let e=!1,i=!1;for(let t=1;t<7;t++){const s=this.LOW_C+this.NOTES_PER_OCTAVE*t;!e&&s>this.config.minPitch&&(this.firstDrawnOctave=t-1,e=!0),!i&&s>this.config.maxPitch&&(this.lastDrawnOctave=t-1,i=!0)}t=(this.lastDrawnOctave-this.firstDrawnOctave+1)*this.WHITE_NOTES_PER_OCTAVE}const e=t*this.config.whiteNoteWidth,i=this.sequenceIsQuantized?this.noteSequence.totalQuantizedSteps:this.noteSequence.totalTime;if(!i)throw new Error("The sequence you are using with the visualizer does not have a "+(this.sequenceIsQuantized?"totalQuantizedSteps":"totalTime")+" field set, so the visualizer can't be horizontally sized correctly.");return{width:e,height:Math.max(i*this.config.pixelsPerTimeStep,h)}}getNotePosition(t,e){const i=this.svgPiano.querySelector(`rect[data-pitch="${t.pitch}"]`);if(!i)return null;const s=this.getNoteEndTime(t)-this.getNoteStartTime(t),n=Number(i.getAttribute("x")),r=Number(i.getAttribute("width")),o=Math.max(this.config.pixelsPerTimeStep*s-this.config.noteSpacing,h);return{x:n,y:this.height-this.getNoteStartTime(t)*this.config.pixelsPerTimeStep-o,w:r,h:o}}drawPiano(){this.svgPiano.innerHTML="";const t=this.config.whiteNoteWidth-this.config.blackNoteWidth/2,e=[1,3,6,8,10];let i=0,s=0;this.config.showOnlyOctavesUsed?s=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C:(s=this.LOW_C-3,this.drawWhiteKey(s,i),this.drawWhiteKey(s+2,this.config.whiteNoteWidth),s+=3,i=2*this.config.whiteNoteWidth);for(let n=this.firstDrawnOctave;n<=this.lastDrawnOctave;n++)for(let t=0;t<this.NOTES_PER_OCTAVE;t++)-1===e.indexOf(t)&&(this.drawWhiteKey(s,i),i+=this.config.whiteNoteWidth),s++;this.config.showOnlyOctavesUsed?(s=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C,i=-this.config.whiteNoteWidth):(this.drawWhiteKey(s,i),s=this.LOW_C-3,this.drawBlackKey(s+1,t),s+=3,i=this.config.whiteNoteWidth);for(let n=this.firstDrawnOctave;n<=this.lastDrawnOctave;n++)for(let r=0;r<this.NOTES_PER_OCTAVE;r++)-1!==e.indexOf(r)?this.drawBlackKey(s,i+t):i+=this.config.whiteNoteWidth,s++}drawWhiteKey(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.dataset.pitch=String(t),i.setAttribute("x",String(e)),i.setAttribute("y","0"),i.setAttribute("width",String(this.config.whiteNoteWidth)),i.setAttribute("height",String(this.config.whiteNoteHeight)),i.setAttribute("fill","white"),i.setAttribute("original-fill","white"),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","3px"),i.classList.add("white"),this.svgPiano.appendChild(i),i}drawBlackKey(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.dataset.pitch=String(t),i.setAttribute("x",String(e)),i.setAttribute("y","0"),i.setAttribute("width",String(this.config.blackNoteWidth)),i.setAttribute("height",String(this.config.blackNoteHeight)),i.setAttribute("fill","black"),i.setAttribute("original-fill","black"),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","3px"),i.classList.add("black"),this.svgPiano.appendChild(i),i}clearActiveNotes(){super.unfillActiveRect(this.svg);const t=this.svgPiano.querySelectorAll("rect.active");for(let e=0;e<t.length;++e){const i=t[e];i.setAttribute("fill",i.getAttribute("original-fill")),i.classList.remove("active")}}}var d;exports.WaterfallSVGVisualizer=g,exports.ScrollType=d,function(t){t[t.PAGE=0]="PAGE",t[t.NOTE=1]="NOTE",t[t.BAR=2]="BAR"}(d||(exports.ScrollType=d={}));class p extends o{constructor(e,i,s={}){super(e,s),(void 0===s.pixelsPerTimeStep||s.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0),this.instruments=s.instruments||[],this.render=new t.StaffSVGRender(this.getScoreInfo(e),{noteHeight:this.config.noteHeight,noteSpacing:this.config.noteSpacing,pixelsPerTimeStep:this.config.pixelsPerTimeStep,noteRGB:this.config.noteRGB,activeNoteRGB:this.config.activeNoteRGB,defaultKey:s.defaultKey||0,scrollType:s.scrollType||d.PAGE},i),this.drawnNotes=e.notes.length,this.clear(),this.redraw()}clear(){this.render.clear()}redraw(t,e){this.drawnNotes!==this.noteSequence.notes.length&&(this.render.scoreInfo=this.getScoreInfo(this.noteSequence));const i=t?this.getNoteInfo(t):void 0;return this.render.redraw(i,e)}isNoteInInstruments(t){return void 0===t.instrument||0===this.instruments.length||this.instruments.indexOf(t.instrument)>=0}timeToQuarters(t){const e=t*this.noteSequence.tempos[0].qpm/60;return Math.round(16*e)/16}quantizedStepsToQuarters(t){const e=t/this.noteSequence.quantizationInfo.stepsPerQuarter;return Math.round(16*e)/16}getNoteInfo(t){const e=this.sequenceIsQuantized?this.quantizedStepsToQuarters(t.quantizedStartStep):this.timeToQuarters(t.startTime);return{start:e,length:(this.sequenceIsQuantized?this.quantizedStepsToQuarters(t.quantizedEndStep):this.timeToQuarters(t.endTime))-e,pitch:t.pitch,intensity:t.velocity}}getScoreInfo(t){const e=[];return t.notes.forEach(t=>{this.isNoteInInstruments(t)&&e.push(this.getNoteInfo(t))}),{notes:e,tempos:t.tempos?t.tempos.map(t=>({start:this.timeToQuarters(t.time),qpm:t.qpm})):[],keySignatures:t.keySignatures?t.keySignatures.map(t=>({start:this.timeToQuarters(t.time),key:t.key})):[],timeSignatures:t.timeSignatures?t.timeSignatures.map(t=>({start:this.timeToQuarters(t.time),numerator:t.numerator,denominator:t.denominator})):[]}}clearActiveNotes(){this.redraw()}}exports.StaffSVGVisualizer=p;
},{"staffrender":"RPS9","./constants":"kGvI","./logging":"HDYb","./sequences":"x6ox"}],"Wc47":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={aux_inputs:!0,chords:!0,constants:!0,data:!0,logging:!0,melodies:!0,performance:!0,sequences:!0};exports.sequences=exports.performance=exports.melodies=exports.logging=exports.data=exports.constants=exports.chords=exports.aux_inputs=void 0;var r=y(require("./aux_inputs"));exports.aux_inputs=r;var t=y(require("./chords"));exports.chords=t;var o=y(require("./constants"));exports.constants=o;var n=y(require("./data"));exports.data=n;var s=y(require("./logging"));exports.logging=s;var a=y(require("./melodies"));exports.melodies=a;var u=y(require("./performance"));exports.performance=u;var p=y(require("./sequences"));exports.sequences=p;var c=require("./metronome");Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===c[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return c[r]}}))});var i=require("./midi_io");Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===i[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return i[r]}}))});var f=require("./player");Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===f[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return f[r]}}))});var l=require("./recorder");Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===l[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return l[r]}}))});var d=require("./visualizer");function x(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(x=function(e){return e?t:r})(e)}function y(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}Object.keys(d).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===d[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return d[r]}}))});
},{"./aux_inputs":"rohI","./chords":"AqtQ","./constants":"kGvI","./data":"Zl09","./logging":"HDYb","./melodies":"Kde6","./performance":"KrkV","./sequences":"x6ox","./metronome":"cWZI","./midi_io":"mxp0","./player":"gpT8","./recorder":"zlSM","./visualizer":"e0SP"}],"ky2Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core/index");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./core/index":"Wc47"}],"VqGJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisualizerElement=exports.PlayerElement=void 0;var t=require("@magenta/music/esm/core.js"),e='<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">\n <path d="m4.4979 3.175-2.1167 1.5875v-3.175z" stroke-width=".70201"/>\n</svg>\n',i='<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">\n <path d="m1.8521 1.5875v3.175h0.92604v-3.175zm1.7198 0v3.175h0.92604v-3.175z" stroke-width=".24153"/>\n</svg>\n',n='<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">\n <path transform="scale(.26458)" d="m12 3.5a8.4993 8.4993 0 0 0-8.5 8.5 8.4993 8.4993 0 0 0 8.5 8.5 8.4993 8.4993 0 0 0 8.5-8.5 8.4993 8.4993 0 0 0-8.5-8.5zm-1.4062 3.5h3v6h-3v-6zm0 8h3v2h-3v-2z"/>\n</svg>\n',s=":host {\n  display: inline-block;\n  width: 300px;\n  margin: 3px;\n  vertical-align: bottom;\n  font-family: sans-serif;\n  font-size: 14px;\n}\n\n:focus:not(.focus-visible) {\n  outline: none;\n}\n\n.controls {\n  width: inherit;\n  height: inherit;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  overflow: hidden;\n  align-items: center;\n  border-radius: 100px;\n  background: #f2f5f6;\n  padding: 0 0.25em;\n  user-select: none;\n}\n.controls > * {\n  margin: 0.8em 0.45em;\n}\n.controls input, .controls button {\n  cursor: pointer;\n}\n.controls input:disabled, .controls button:disabled {\n  cursor: inherit;\n}\n.controls button {\n  text-align: center;\n  background: rgba(204, 204, 204, 0);\n  border: none;\n  width: 32px;\n  height: 32px;\n  border-radius: 100%;\n  transition: background-color 0.25s ease 0s;\n  padding: 0;\n}\n.controls button:not(:disabled):hover {\n  background: rgba(204, 204, 204, 0.3);\n}\n.controls button:not(:disabled):active {\n  background: rgba(204, 204, 204, 0.6);\n}\n.controls button .icon {\n  display: none;\n}\n.controls button .icon, .controls button .icon svg {\n  vertical-align: middle;\n}\n.controls button .icon svg {\n  fill: currentColor;\n}\n.controls .seek-bar {\n  flex: 1;\n  min-width: 0;\n  margin-right: 1.1em;\n  background: transparent;\n}\n.controls .seek-bar::-moz-range-track {\n  background-color: #555;\n}\n.controls.stopped .play-icon, .controls.playing .stop-icon, .controls.error .error-icon {\n  display: inherit;\n}\n.controls.frozen > div, .controls > button:disabled .icon {\n  opacity: 0.5;\n}\n.controls .overlay {\n  z-index: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  box-sizing: border-box;\n  display: none;\n  opacity: 1;\n}\n.controls.loading .loading-overlay {\n  display: block;\n  background: linear-gradient(110deg, #92929200 5%, #92929288 25%, #92929200 45%);\n  background-size: 250% 100%;\n  background-repeat: repeat-y;\n  animation: shimmer 1.5s linear infinite;\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: 125% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}",r=":host {\n  display: block;\n}\n\n::slotted(.piano-roll-visualizer) {\n  overflow-x: auto;\n}";const o=document.createElement("template");o.innerHTML=`\n<style>\n${s}\n</style>\n<div class="controls stopped frozen" part="control-panel">\n  <button class="play" part="play-button" disabled>\n    <span class="icon play-icon">${e}</span>\n    <span class="icon stop-icon">${i}</span>\n    <span class="icon error-icon">${n}</span>\n  </button>\n  <div part="time"><span class="current-time" part="current-time">0:00</span> / <span class="total-time" part="total-time">0:00</span></div>\n  <input type="range" min="0" max="0" value="0" step="any" class="seek-bar" part="seek-bar" disabled>\n  <div class="overlay loading-overlay" part="loading-overlay"></div>\n</div>\n`;const a=document.createElement("template");function l(t){const e=t<0,i=(t=Math.floor(Math.abs(t||0)))%60,n=(t-i)/60,s=(t-i-60*n)/3600;return(e?"-":"")+(s?`${s}:`:"")+(n>9||!s?`${n}:`:`0${n}:`)+(i>9?`${i}`:`0${i}`)}a.innerHTML=`\n<style>\n${r}\n</style>\n<slot>\n</slot>\n`;const h=["piano-roll","waterfall","staff"];class c extends HTMLElement{constructor(){super(...arguments),this.domInitialized=!1,this.ns=null,this._config={}}static get observedAttributes(){return["src","type"]}connectedCallback(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(a.content.cloneNode(!0)),this.domInitialized||(this.domInitialized=!0,this.wrapper=document.createElement("div"),this.appendChild(this.wrapper),this.initVisualizerNow())}attributeChangedCallback(t,e,i){"src"!==t&&"type"!==t||this.initVisualizer()}initVisualizer(){null==this.initTimeout&&(this.initTimeout=window.setTimeout(()=>this.initVisualizerNow()))}async initVisualizerNow(){if(this.initTimeout=null,this.domInitialized&&(this.src&&(this.ns=null,this.ns=await(0,t.urlToNoteSequence)(this.src)),this.wrapper.innerHTML="",this.ns))if("piano-roll"===this.type){this.wrapper.classList.add("piano-roll-visualizer");const e=document.createElementNS("http://www.w3.org/2000/svg","svg");this.wrapper.appendChild(e),this.visualizer=new t.PianoRollSVGVisualizer(this.ns,e,this._config)}else if("waterfall"===this.type)this.wrapper.classList.add("waterfall-visualizer"),this.visualizer=new t.WaterfallSVGVisualizer(this.ns,this.wrapper,this._config);else if("staff"===this.type){this.wrapper.classList.add("staff-visualizer");const e=document.createElement("div");this.wrapper.appendChild(e),this.visualizer=new t.StaffSVGVisualizer(this.ns,e,this._config)}}redraw(t){this.visualizer&&this.visualizer.redraw(t,null!=t)}clearActiveNotes(){this.visualizer&&this.visualizer.clearActiveNotes()}get noteSequence(){return this.ns}set noteSequence(t){this.ns=t,this.removeAttribute("src"),this.initVisualizer()}get src(){return this.getAttribute("src")}set src(t){this.ns=null,this.setOrRemoveAttribute("src",t),this.initVisualizer()}get type(){let t=this.getAttribute("type");return h.indexOf(t)<0&&(t="piano-roll"),t}set type(t){if(null!=t&&h.indexOf(t)<0)throw new Error(`Unknown visualizer type ${t}. Allowed values: ${h.join(", ")}`);this.setOrRemoveAttribute("type",t)}get config(){return this._config}set config(t){this._config=t,this.initVisualizer()}setOrRemoveAttribute(t,e){null==e?this.removeAttribute(t):this.setAttribute(t,e)}}exports.VisualizerElement=c;const d=["start","stop","note"],u="https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus";let p=null;class m extends HTMLElement{constructor(){super(),this.domInitialized=!1,this.needInitNs=!1,this.visualizerListeners=new Map,this.ns=null,this._playing=!1,this.seeking=!1,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(o.content.cloneNode(!0)),this.controlPanel=this.shadowRoot.querySelector(".controls"),this.playButton=this.controlPanel.querySelector(".play"),this.currentTimeLabel=this.controlPanel.querySelector(".current-time"),this.totalTimeLabel=this.controlPanel.querySelector(".total-time"),this.seekBar=this.controlPanel.querySelector(".seek-bar")}static get observedAttributes(){return["sound-font","src","visualizer"]}connectedCallback(){if(this.domInitialized)return;this.domInitialized=!0;const t=window.applyFocusVisiblePolyfill;null!=t&&t(this.shadowRoot),this.playButton.addEventListener("click",()=>{this.player.isPlaying()?this.stop():this.start()}),this.seekBar.addEventListener("input",()=>{this.seeking=!0,this.player&&"started"===this.player.getPlayState()&&this.player.pause()}),this.seekBar.addEventListener("change",()=>{const t=this.currentTime;this.currentTimeLabel.textContent=l(t),this.player&&this.player.isPlaying()&&(this.player.seekTo(t),"paused"===this.player.getPlayState()&&this.player.resume()),this.seeking=!1}),this.initPlayerNow()}attributeChangedCallback(t,e,i){if(this.hasAttribute(t)||(i=null),"sound-font"===t||"src"===t)this.initPlayer();else if("visualizer"===t){const t=()=>{this.setVisualizerSelector(i)};"loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t()}}initPlayer(t=!0){this.needInitNs=this.needInitNs||t,null==this.initTimeout&&(this.stop(),this.setLoading(),this.initTimeout=window.setTimeout(()=>this.initPlayerNow(this.needInitNs)))}async initPlayerNow(e=!0){if(this.initTimeout=null,this.needInitNs=!1,this.domInitialized)try{let n=null;if(e&&(this.src&&(this.ns=null,this.ns=await(0,t.urlToNoteSequence)(this.src)),this.currentTime=0,this.ns||this.setError("No content loaded")),!(n=this.ns))return this.seekBar.max="0",void(this.totalTimeLabel.textContent=l(0));this.seekBar.max=String(n.totalTime),this.totalTimeLabel.textContent=l(n.totalTime);let s=this.soundFont;const r={run:t=>this.ns===n&&this.noteCallback(t),stop:()=>{}};if(null===s?this.player=new t.Player(!1,r):(""===s&&(s=u),this.player=new t.SoundFontPlayer(s,void 0,void 0,void 0,r),await this.player.loadSamples(n)),this.ns!==n)return;this.setLoaded(),this.dispatchEvent(new CustomEvent("load"))}catch(i){throw this.setError(String(i)),i}}start(){(async()=>{if(this.player)if("stopped"==this.player.getPlayState()){p&&p.playing&&p.stop(),p=this,this._playing=!0;let e=this.currentTime;0==this.ns.notes.filter(t=>t.startTime>e).length&&(e=0),this.currentTime=e,this.controlPanel.classList.remove("stopped"),this.controlPanel.classList.add("playing");try{const i=this.player.start(this.ns,void 0,e);this.dispatchEvent(new CustomEvent("start")),await i,this.handleStop(!0)}catch(t){throw this.handleStop(),t}}else"paused"==this.player.getPlayState()&&this.player.resume()})()}stop(){this.player&&this.player.isPlaying()&&this.player.stop(),this.handleStop(!1)}addVisualizer(t){const e={start:()=>{t.noteSequence=this.noteSequence},stop:()=>{t.clearActiveNotes()},note:e=>{t.redraw(e.detail.note)}};for(const i of d)this.addEventListener(i,e[i]);this.visualizerListeners.set(t,e)}removeVisualizer(t){const e=this.visualizerListeners.get(t);for(const i of d)this.removeEventListener(i,e[i]);this.visualizerListeners.delete(t)}noteCallback(t){this.playing&&(this.dispatchEvent(new CustomEvent("note",{detail:{note:t}})),this.seeking||(this.seekBar.value=String(t.startTime),this.currentTimeLabel.textContent=l(t.startTime)))}handleStop(t=!1){t&&(this.currentTime=this.duration),this.controlPanel.classList.remove("playing"),this.controlPanel.classList.add("stopped"),this._playing&&(this._playing=!1,this.dispatchEvent(new CustomEvent("stop",{detail:{finished:t}})))}setVisualizerSelector(t){for(const e of this.visualizerListeners.values())for(const t of d)this.removeEventListener(t,e[t]);if(this.visualizerListeners.clear(),null!=t)for(const e of document.querySelectorAll(t))e instanceof c?this.addVisualizer(e):console.warn(`Selector ${t} matched non-visualizer element`,e)}setLoading(){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("error"),this.controlPanel.classList.add("loading","frozen"),this.controlPanel.removeAttribute("title")}setLoaded(){this.controlPanel.classList.remove("loading","frozen"),this.playButton.disabled=!1,this.seekBar.disabled=!1}setError(t){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("loading","stopped","playing"),this.controlPanel.classList.add("error","frozen"),this.controlPanel.title=t}get noteSequence(){return this.ns}set noteSequence(t){this.ns=t,this.removeAttribute("src"),this.initPlayer()}get src(){return this.getAttribute("src")}set src(t){this.ns=null,this.setOrRemoveAttribute("src",t),this.initPlayer()}get soundFont(){return this.getAttribute("sound-font")}set soundFont(t){this.setOrRemoveAttribute("sound-font",t)}get currentTime(){return parseFloat(this.seekBar.value)}set currentTime(t){this.seekBar.value=String(t),this.currentTimeLabel.textContent=l(this.currentTime),this.player&&this.player.isPlaying()&&this.player.seekTo(t)}get duration(){return parseFloat(this.seekBar.max)}get playing(){return this._playing}setOrRemoveAttribute(t,e){null==e?this.removeAttribute(t):this.setAttribute(t,e)}}exports.PlayerElement=m,window.customElements.define("midi-player",m),window.customElements.define("midi-visualizer",c);
},{"@magenta/music/esm/core.js":"ky2Z"}],"tI8j":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof t&&t.amd?t(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).noUiSlider={})}(this,function(t){"use strict";var e,r;function n(t){return"object"==typeof t&&"function"==typeof t.to}function i(t){t.parentElement.removeChild(t)}function o(t){return null!=t}function s(t){t.preventDefault()}function a(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function l(t,e,r){r>0&&(f(t,e),setTimeout(function(){d(t,e)},r))}function u(t){return Math.max(Math.min(t,100),0)}function c(t){return Array.isArray(t)?t:[t]}function p(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function f(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function d(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function m(t,e){return 100/(e-t)}function g(t,e,r){return 100*e/(t[r+1]-t[r])}function v(t,e){for(var r=1;t>=e[r];)r+=1;return r}function b(t,e,r){if(r>=t.slice(-1)[0])return 100;var n=v(r,t),i=t[n-1],o=t[n],s=e[n-1],a=e[n];return s+function(t,e){return g(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}([i,o],r)/m(s,a)}function S(t,e,r,n){if(100===n)return n;var i=v(n,t),o=t[i-1],s=t[i];return r?n-o>(s-o)/2?s:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(n-t[i-1],e[i-1]):n}t.PipsMode=void 0,(e=t.PipsMode||(t.PipsMode={})).Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values",t.PipsType=void 0,(r=t.PipsType||(t.PipsType={}))[r.None=-1]="None",r[r.NoValue=0]="NoValue",r[r.LargeValue=1]="LargeValue",r[r.SmallValue=2]="SmallValue";var x=function(){function t(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=e;var i=[];for(Object.keys(t).forEach(function(e){i.push([c(t[e]),e])}),i.sort(function(t,e){return t[0][0]-e[0][0]}),n=0;n<i.length;n++)this.handleEntryPoint(i[n][1],i[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}return t.prototype.getDistance=function(t){for(var e=[],r=0;r<this.xNumSteps.length-1;r++)e[r]=g(this.xVal,t,r);return e},t.prototype.getAbsoluteDistance=function(t,e,r){var n,i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);r||t!==this.xPct[i+1]||i++,null===e&&(e=[]);var o=1,s=e[i],a=0,l=0,u=0,c=0;for(n=r?(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);s>0;)a=this.xPct[i+1+c]-this.xPct[i+c],e[i+c]*o+100-100*n>100?(l=a*n,o=(s-100*n)/e[i+c],n=1):(l=e[i+c]*a/100*o,o=0),r?(u-=l,this.xPct.length+c>=1&&c--):(u+=l,this.xPct.length-c>=1&&c++),s=e[i+c]*o;return t+u},t.prototype.toStepping=function(t){return t=b(this.xVal,this.xPct,t)},t.prototype.fromStepping=function(t){return function(t,e,r){if(r>=100)return t.slice(-1)[0];var n=v(r,e),i=t[n-1],o=t[n],s=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(r-s)*m(s,e[n]))}(this.xVal,this.xPct,t)},t.prototype.getStep=function(t){return t=S(this.xPct,this.xSteps,this.snap,t)},t.prototype.getDefaultStep=function(t,e,r){var n=v(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},t.prototype.getNearbySteps=function(t){var e=v(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},t.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(p);return Math.max.apply(null,t)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(t){return this.getStep(this.toStepping(t))},t.prototype.handleEntryPoint=function(t,e){var r;if(!a(r="min"===t?0:"max"===t?100:parseFloat(t))||!a(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(r),this.xVal.push(e[0]);var n=Number(e[1]);r?this.xSteps.push(!isNaN(n)&&n):isNaN(n)||(this.xSteps[0]=n),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(t,e){if(e)if(this.xVal[t]!==this.xVal[t+1]){this.xSteps[t]=g([this.xVal[t],this.xVal[t+1]],e,0)/m(this.xPct[t],this.xPct[t+1]);var r=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],n=Math.ceil(Number(r.toFixed(3))-1),i=this.xVal[t]+this.xNumSteps[t]*n;this.xHighestCompleteStep[t]=i}else this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t]},t}(),y={to:function(t){return void 0===t?"":t.toFixed(2)},from:Number},w={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},E={tooltips:".__tooltips",aria:".__aria"};function P(t,e){if(!a(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function C(t,e){if(!a(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function N(t,e){if(!a(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function V(t,e){if(!a(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function k(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new x(e,t.snap||!1,t.singleStep)}function M(t,e){if(e=c(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function A(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function U(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function D(t,e){if("number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function O(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function L(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function T(t,e){if(!a(e))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==e&&(t.margin=t.spectrum.getDistance(e))}function j(t,e){if(!a(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function z(t,e){var r;if(!a(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!a(e[0])&&!a(e[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],r=0;r<t.spectrum.xNumSteps.length-1;r++)if(t.padding[0][r]<0||t.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=e[0]+e[1],i=t.spectrum.xVal[0];if(n/(t.spectrum.xVal[t.spectrum.xVal.length-1]-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function H(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function F(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0;if(i){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");T(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,dragAll:l,fixed:i,snap:o,hover:s,unconstrained:a}}function R(t,e){if(!1!==e)if(!0===e||n(e)){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(e)}else{if((e=c(e)).length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(t){if("boolean"!=typeof t&&!n(t))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function _(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function B(t,e){if(!n(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function q(t,e){if(!function(t){return n(t)&&"function"==typeof t.from}(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function X(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Y(t,e){t.documentElement=e}function I(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function W(t,e){if("object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(e).forEach(function(r){t.cssClasses[r]=t.cssPrefix+e[r]})):t.cssClasses=e}function $(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:y,format:y},r={step:{r:!1,t:P},keyboardPageMultiplier:{r:!1,t:C},keyboardMultiplier:{r:!1,t:N},keyboardDefaultStep:{r:!1,t:V},start:{r:!0,t:M},connect:{r:!0,t:O},direction:{r:!0,t:H},snap:{r:!1,t:A},animate:{r:!1,t:U},animationDuration:{r:!1,t:D},range:{r:!0,t:k},orientation:{r:!1,t:L},margin:{r:!1,t:T},limit:{r:!1,t:j},padding:{r:!1,t:z},behaviour:{r:!0,t:F},ariaFormat:{r:!1,t:B},format:{r:!1,t:q},tooltips:{r:!1,t:R},keyboardSupport:{r:!0,t:X},documentElement:{r:!1,t:Y},cssPrefix:{r:!0,t:I},cssClasses:{r:!0,t:W},handleAttributes:{r:!1,t:_}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:w,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(r).forEach(function(i){if(o(t[i])||void 0!==n[i])r[i].t(e,o(t[i])?t[i]:n[i]);else if(r[i].r)throw new Error("noUiSlider: '"+i+"' is required.")}),e.pips=t.pips;var i=document.createElement("div"),s=void 0!==i.style.msTransform,a=void 0!==i.style.transform;e.transformRule=a?"transform":s?"msTransform":"webkitTransform";return e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function G(e,r,n){var a,p,m,g,v,b,S,x=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},y=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(r){}return t}(),w=e,P=r.spectrum,C=[],N=[],V=[],k=0,M={},A=e.ownerDocument,U=r.documentElement||A.documentElement,D=A.body,O="rtl"===A.dir||1===r.ort?0:100;function L(t,e){var r=A.createElement("div");return e&&f(r,e),t.appendChild(r),r}function T(t,e){var n=L(t,r.cssClasses.origin),i=L(n,r.cssClasses.handle);if(L(i,r.cssClasses.touchArea),i.setAttribute("data-handle",String(e)),r.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",function(t){return function(t,e){if(H()||F(e))return!1;var n=["Left","Right"],i=["Down","Up"],o=["PageDown","PageUp"],s=["Home","End"];r.dir&&!r.ort?n.reverse():r.ort&&!r.dir&&(i.reverse(),o.reverse());var a,l=t.key.replace("Arrow",""),u=l===o[0],c=l===o[1],p=l===i[0]||l===n[0]||u,f=l===i[1]||l===n[1]||c,d=l===s[0],h=l===s[1];if(!(p||f||d||h))return!0;if(t.preventDefault(),f||p){var m=p?0:1,g=gt(e),v=g[m];if(null===v)return!1;!1===v&&(v=P.getDefaultStep(N[e],p,r.keyboardDefaultStep)),v*=c||u?r.keyboardPageMultiplier:r.keyboardMultiplier,v=Math.max(v,1e-7),v*=p?-1:1,a=C[e]+v}else a=h?r.spectrum.xVal[r.spectrum.xVal.length-1]:r.spectrum.xVal[0];return pt(e,P.toStepping(a),!0,!0),ot("slide",e),ot("update",e),ot("change",e),ot("set",e),!1}(t,e)})),void 0!==r.handleAttributes){var o=r.handleAttributes[e];Object.keys(o).forEach(function(t){i.setAttribute(t,o[t])})}return i.setAttribute("role","slider"),i.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===e?f(i,r.cssClasses.handleLower):e===r.handles-1&&f(i,r.cssClasses.handleUpper),n}function j(t,e){return!!e&&L(t,r.cssClasses.connect)}function z(t,e){return!(!r.tooltips||!r.tooltips[e])&&L(t.firstChild,r.cssClasses.tooltip)}function H(){return w.hasAttribute("disabled")}function F(t){return p[t].hasAttribute("disabled")}function R(){v&&(it("update"+E.tooltips),v.forEach(function(t){t&&i(t)}),v=null)}function _(){R(),v=p.map(z),nt("update"+E.tooltips,function(t,e,n){if(v&&r.tooltips&&!1!==v[e]){var i=t[e];!0!==r.tooltips[e]&&(i=r.tooltips[e].to(n[e])),v[e].innerHTML=i}})}function B(t,e){return t.map(function(t){return P.fromStepping(e?P.getStep(t):t)})}function q(e){var r,n=function(e){if(e.mode===t.PipsMode.Range||e.mode===t.PipsMode.Steps)return P.xVal;if(e.mode===t.PipsMode.Count){if(e.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var r=e.values-1,n=100/r,i=[];r--;)i[r]=r*n;return i.push(100),B(i,e.stepped)}return e.mode===t.PipsMode.Positions?B(e.values,e.stepped):e.mode===t.PipsMode.Values?e.stepped?e.values.map(function(t){return P.fromStepping(P.getStep(P.toStepping(t)))}):e.values:[]}(e),i={},o=P.xVal[0],s=P.xVal[P.xVal.length-1],a=!1,l=!1,u=0;return r=n.slice().sort(function(t,e){return t-e}),(n=r.filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==o&&(n.unshift(o),a=!0),n[n.length-1]!==s&&(n.push(s),l=!0),n.forEach(function(r,o){var s,c,p,f,d,h,m,g,v,b,S=r,x=n[o+1],y=e.mode===t.PipsMode.Steps;for(y&&(s=P.xNumSteps[o]),s||(s=x-S),void 0===x&&(x=S),s=Math.max(s,1e-7),c=S;c<=x;c=Number((c+s).toFixed(7))){for(g=(d=(f=P.toStepping(c))-u)/(e.density||1),b=d/(v=Math.round(g)),p=1;p<=v;p+=1)i[(h=u+p*b).toFixed(5)]=[P.fromStepping(h),0];m=n.indexOf(c)>-1?t.PipsType.LargeValue:y?t.PipsType.SmallValue:t.PipsType.NoValue,!o&&a&&c!==x&&(m=0),c===x&&l||(i[f.toFixed(5)]=[c,m]),u=f}}),i}function X(e,n,i){var o,s,a=A.createElement("div"),l=((o={})[t.PipsType.None]="",o[t.PipsType.NoValue]=r.cssClasses.valueNormal,o[t.PipsType.LargeValue]=r.cssClasses.valueLarge,o[t.PipsType.SmallValue]=r.cssClasses.valueSub,o),u=((s={})[t.PipsType.None]="",s[t.PipsType.NoValue]=r.cssClasses.markerNormal,s[t.PipsType.LargeValue]=r.cssClasses.markerLarge,s[t.PipsType.SmallValue]=r.cssClasses.markerSub,s),c=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],p=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function d(t,e){var n=e===r.cssClasses.value,i=n?l:u;return e+" "+(n?c:p)[r.ort]+" "+i[t]}return f(a,r.cssClasses.pips),f(a,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(e).forEach(function(o){!function(e,o,s){if((s=n?n(o,s):s)!==t.PipsType.None){var l=L(a,!1);l.className=d(s,r.cssClasses.marker),l.style[r.style]=e+"%",s>t.PipsType.NoValue&&((l=L(a,!1)).className=d(s,r.cssClasses.value),l.setAttribute("data-value",String(o)),l.style[r.style]=e+"%",l.innerHTML=String(i.to(o)))}}(o,e[o][0],e[o][1])}),a}function Y(){g&&(i(g),g=null)}function I(t){Y();var e=q(t),r=t.filter,n=t.format||{to:function(t){return String(Math.round(t))}};return g=w.appendChild(X(e,r,n))}function W(){var t=a.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||a[e]:t.height||a[e]}function G(t,e,n,i){var o=function(o){var s,a,l=function(t,e,r){var n=0===t.type.indexOf("touch"),i=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),s=0,a=0;0===t.type.indexOf("MSPointer")&&(o=!0);if("mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(n){var l=function(e){var n=e.target;return n===r||r.contains(n)||t.composed&&t.composedPath().shift()===r};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(u.length>1)return!1;s=u[0].pageX,a=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;s=c.pageX,a=c.pageY}}e=e||h(A),(i||o)&&(s=t.clientX+e.x,a=t.clientY+e.y);return t.pageOffset=e,t.points=[s,a],t.cursor=i||o,t}(o,i.pageOffset,i.target||e);return!!l&&(!(H()&&!i.doNotReject)&&(s=w,a=r.cssClasses.tap,!((s.classList?s.classList.contains(a):new RegExp("\\b"+a+"\\b").test(s.className))&&!i.doNotReject)&&(!(t===x.start&&void 0!==l.buttons&&l.buttons>1)&&((!i.hover||!l.buttons)&&(y||l.preventDefault(),l.calcPoint=l.points[r.ort],void n(l,i))))))},s=[];return t.split(" ").forEach(function(t){e.addEventListener(t,o,!!y&&{passive:!0}),s.push([t,o])}),s}function J(t){var e,n,i,o,s,l,c=100*(t-(e=a,n=r.ort,i=e.getBoundingClientRect(),o=e.ownerDocument,s=o.documentElement,l=h(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),n?i.top+l.y-s.clientTop:i.left+l.x-s.clientLeft))/W();return c=u(c),r.dir?100-c:c}function K(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&Z(t,e)}function Q(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return Z(t,e);var n=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint);lt(n>0,100*n/e.baseSize,e.locations,e.handleNumbers,e.connect)}function Z(t,e){e.handle&&(d(e.handle,r.cssClasses.active),k-=1),e.listeners.forEach(function(t){U.removeEventListener(t[0],t[1])}),0===k&&(d(w,r.cssClasses.drag),ct(),t.cursor&&(D.style.cursor="",D.removeEventListener("selectstart",s))),e.handleNumbers.forEach(function(t){ot("change",t),ot("set",t),ot("end",t)})}function tt(t,e){if(!e.handleNumbers.some(F)){var n;if(1===e.handleNumbers.length)n=p[e.handleNumbers[0]].children[0],k+=1,f(n,r.cssClasses.active);t.stopPropagation();var i=[],o=G(x.move,U,Q,{target:t.target,handle:n,connect:e.connect,listeners:i,startCalcPoint:t.calcPoint,baseSize:W(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:N.slice()}),a=G(x.end,U,Z,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers}),l=G("mouseout",U,K,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers});i.push.apply(i,o.concat(a,l)),t.cursor&&(D.style.cursor=getComputedStyle(t.target).cursor,p.length>1&&f(w,r.cssClasses.drag),D.addEventListener("selectstart",s,!1)),e.handleNumbers.forEach(function(t){ot("start",t)})}}function et(t){t.stopPropagation();var e=J(t.calcPoint),n=function(t){var e=100,r=!1;return p.forEach(function(n,i){if(!F(i)){var o=N[i],s=Math.abs(o-t);(s<e||s<=e&&t>o||100===s&&100===e)&&(r=i,e=s)}}),r}(e);!1!==n&&(r.events.snap||l(w,r.cssClasses.tap,r.animationDuration),pt(n,e,!0,!0),ct(),ot("slide",n,!0),ot("update",n,!0),r.events.snap?tt(t,{handleNumbers:[n]}):(ot("change",n,!0),ot("set",n,!0)))}function rt(t){var e=J(t.calcPoint),r=P.getStep(e),n=P.fromStepping(r);Object.keys(M).forEach(function(t){"hover"===t.split(".")[0]&&M[t].forEach(function(t){t.call(vt,n)})})}function nt(t,e){M[t]=M[t]||[],M[t].push(e),"update"===t.split(".")[0]&&p.forEach(function(t,e){ot("update",e)})}function it(t){var e=t&&t.split(".")[0],r=e?t.substring(e.length):t;Object.keys(M).forEach(function(t){var n=t.split(".")[0],i=t.substring(n.length);e&&e!==n||r&&r!==i||function(t){return t===E.aria||t===E.tooltips}(i)&&r!==i||delete M[t]})}function ot(t,e,n){Object.keys(M).forEach(function(i){var o=i.split(".")[0];t===o&&M[i].forEach(function(t){t.call(vt,C.map(r.format.to),e,C.slice(),n||!1,N.slice(),vt)})})}function st(t,e,n,i,o,s){var a;return p.length>1&&!r.events.unconstrained&&(i&&e>0&&(a=P.getAbsoluteDistance(t[e-1],r.margin,!1),n=Math.max(n,a)),o&&e<p.length-1&&(a=P.getAbsoluteDistance(t[e+1],r.margin,!0),n=Math.min(n,a))),p.length>1&&r.limit&&(i&&e>0&&(a=P.getAbsoluteDistance(t[e-1],r.limit,!1),n=Math.min(n,a)),o&&e<p.length-1&&(a=P.getAbsoluteDistance(t[e+1],r.limit,!0),n=Math.max(n,a))),r.padding&&(0===e&&(a=P.getAbsoluteDistance(0,r.padding[0],!1),n=Math.max(n,a)),e===p.length-1&&(a=P.getAbsoluteDistance(100,r.padding[1],!0),n=Math.min(n,a))),!((n=u(n=P.getStep(n)))===t[e]&&!s)&&n}function at(t,e){var n=r.ort;return(n?e:t)+", "+(n?t:e)}function lt(t,e,r,n,i){var o=r.slice(),s=n[0],a=[!t,t],l=[t,!t];n=n.slice(),t&&n.reverse(),n.length>1?n.forEach(function(t,r){var n=st(o,t,o[t]+e,a[r],l[r],!1);!1===n?e=0:(e=n-o[t],o[t]=n)}):a=l=[!0];var u=!1;n.forEach(function(t,n){u=pt(t,r[t]+e,a[n],l[n])||u}),u&&(n.forEach(function(t){ot("update",t),ot("slide",t)}),null!=i&&ot("drag",s))}function ut(t,e){return r.dir?100-t-e:t}function ct(){V.forEach(function(t){var e=N[t]>50?-1:1,r=3+(p.length+e*t);p[t].style.zIndex=String(r)})}function pt(t,e,n,i,o){return o||(e=st(N,t,e,n,i,!1)),!1!==e&&(function(t,e){N[t]=e,C[t]=P.fromStepping(e);var n="translate("+at(ut(e,0)-O+"%","0")+")";p[t].style[r.transformRule]=n,ft(t),ft(t+1)}(t,e),!0)}function ft(t){if(m[t]){var e=0,n=100;0!==t&&(e=N[t-1]),t!==m.length-1&&(n=N[t]);var i=n-e,o="translate("+at(ut(e,i)+"%","0")+")",s="scale("+at(i/100,"1")+")";m[t].style[r.transformRule]=o+" "+s}}function dt(t,e){return null===t||!1===t||void 0===t?N[e]:("number"==typeof t&&(t=String(t)),!1!==(t=r.format.from(t))&&(t=P.toStepping(t)),!1===t||isNaN(t)?N[e]:t)}function ht(t,e,n){var i=c(t),o=void 0===N[0];e=void 0===e||e,r.animate&&!o&&l(w,r.cssClasses.tap,r.animationDuration),V.forEach(function(t){pt(t,dt(i[t],t),!0,!1,n)});var s=1===V.length?0:1;if(o&&P.hasNoSize()&&(n=!0,N[0]=0,V.length>1)){var a=100/(V.length-1);V.forEach(function(t){N[t]=t*a})}for(;s<V.length;++s)V.forEach(function(t){pt(t,N[t],!0,!0,n)});ct(),V.forEach(function(t){ot("update",t),null!==i[t]&&e&&ot("set",t)})}function mt(t){if(void 0===t&&(t=!1),t)return 1===C.length?C[0]:C.slice(0);var e=C.map(r.format.to);return 1===e.length?e[0]:e}function gt(t){var e=N[t],n=P.getNearbySteps(e),i=C[t],o=n.thisStep.step,s=null;if(r.snap)return[i-n.stepBefore.startValue||null,n.stepAfter.startValue-i||null];!1!==o&&i+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-i),s=i>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&i-n.stepBefore.highestStep,100===e?o=null:0===e&&(s=null);var a=P.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==s&&!1!==s&&(s=Number(s.toFixed(a))),[s,o]}f(b=w,r.cssClasses.target),0===r.dir?f(b,r.cssClasses.ltr):f(b,r.cssClasses.rtl),0===r.ort?f(b,r.cssClasses.horizontal):f(b,r.cssClasses.vertical),f(b,"rtl"===getComputedStyle(b).direction?r.cssClasses.textDirectionRtl:r.cssClasses.textDirectionLtr),a=L(b,r.cssClasses.base),function(t,e){var n=L(e,r.cssClasses.connects);p=[],(m=[]).push(j(n,t[0]));for(var i=0;i<r.handles;i++)p.push(T(e,i)),V[i]=i,m.push(j(n,t[i+1]))}(r.connect,a),(S=r.events).fixed||p.forEach(function(t,e){G(x.start,t.children[0],tt,{handleNumbers:[e]})}),S.tap&&G(x.start,a,et,{}),S.hover&&G(x.move,a,rt,{hover:!0}),S.drag&&m.forEach(function(t,e){if(!1!==t&&0!==e&&e!==m.length-1){var n=p[e-1],i=p[e],o=[t],s=[n,i],a=[e-1,e];f(t,r.cssClasses.draggable),S.fixed&&(o.push(n.children[0]),o.push(i.children[0])),S.dragAll&&(s=p,a=V),o.forEach(function(e){G(x.start,e,tt,{handles:s,handleNumbers:a,connect:t})})}}),ht(r.start),r.pips&&I(r.pips),r.tooltips&&_(),it("update"+E.aria),nt("update"+E.aria,function(t,e,n,i,o){V.forEach(function(t){var e=p[t],i=st(N,t,0,!0,!0,!0),s=st(N,t,100,!0,!0,!0),a=o[t],l=String(r.ariaFormat.to(n[t]));i=P.fromStepping(i).toFixed(1),s=P.fromStepping(s).toFixed(1),a=P.fromStepping(a).toFixed(1),e.children[0].setAttribute("aria-valuemin",i),e.children[0].setAttribute("aria-valuemax",s),e.children[0].setAttribute("aria-valuenow",a),e.children[0].setAttribute("aria-valuetext",l)})});var vt={destroy:function(){for(it(E.aria),it(E.tooltips),Object.keys(r.cssClasses).forEach(function(t){d(w,r.cssClasses[t])});w.firstChild;)w.removeChild(w.firstChild);delete w.noUiSlider},steps:function(){return V.map(gt)},on:nt,off:it,get:mt,set:ht,setHandle:function(t,e,r,n){if(!((t=Number(t))>=0&&t<V.length))throw new Error("noUiSlider: invalid handle number, got: "+t);pt(t,dt(e,t),!0,!0,n),ot("update",t),r&&ot("set",t)},reset:function(t){ht(r.start,t)},__moveHandles:function(t,e,r){lt(t,e,N,r)},options:n,updateOptions:function(t,e){var i=mt(),s=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];s.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])});var a=$(n);s.forEach(function(e){void 0!==t[e]&&(r[e]=a[e])}),P=a.spectrum,r.margin=a.margin,r.limit=a.limit,r.padding=a.padding,r.pips?I(r.pips):Y(),r.tooltips?_():R(),N=[],ht(o(t.start)?t.start:i,e)},target:w,removePips:Y,removeTooltips:R,getPositions:function(){return N.slice()},getTooltips:function(){return v},getOrigins:function(){return p},pips:I};return vt}function J(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=G(t,$(e),e);return t.noUiSlider=r,r}var K={__spectrum:x,cssClasses:w,create:J};t.create=J,t.cssClasses=w,t.default=K,Object.defineProperty(t,"__esModule",{value:!0})});
},{}],"H99C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectMIDIIn=ee,exports.initializeMidi=ie;var e=require("./midi");require("babel-polyfill"),require("html-midi-player");var t=i(require("nouislider"));require("nouislider/dist/nouislider.css");var n=require("./chord-display/events"),o=require("./chord-display/ui"),r=require("./chord-display/settings");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){d=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(d)throw i}}}}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var s=function(e,t,n){return{id:e,name:t,path:n}},u=["mpk","key","piano"],c=8,p=9,m=10,f=11,v=14,y=1,g=11,h=!0,b="https://pianolessonwithwarren.com/dev_site";b="http://localhost:8888/pianolesson";var S="dev";function I(){console.log("load synth")}var q=[s(0,"Pass Me Not - Advanced","../assets/midi/Lord You're Holy - Test.mid")],w=window.chrome,A=window.navigator,L=A.vendor,M=void 0!==window.opr,x=A.userAgent.indexOf("Edg")>-1,k=A.userAgent.match("CriOS");k||null!=w&&"Google Inc."===L&&!1===M&&!1===x||alert("Please use Google Chrome for the best experience.");var E="https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FatBoy/bright_acoustic_piano-mp3.js",C=function(e){var t=document.querySelector("#play-piece"),n=document.querySelector("#stop-piece"),o=document.querySelector("#loop-piece"),r=document.querySelector("#start-loop"),i=document.querySelector("#end-loop");document.querySelector("#musical-pieces");e?(t.setAttribute("disabled",!0),n.setAttribute("disabled",!0),o.setAttribute("disabled",!0),r.setAttribute("disabled",!0),i.setAttribute("disabled",!0)):(t.removeAttribute("disabled"),n.removeAttribute("disabled"),o.removeAttribute("disabled"),r.removeAttribute("disabled"),i.removeAttribute("disabled"))},T=document.getElementById("noslider");t.default.create(T,{start:[0,100],connect:!0,range:{min:0,max:100}});var D=document.getElementById("noslider2");t.default.create(D,{start:[0,10,90],connect:!0,range:{min:0,max:100}});var P=D.getElementsByClassName("noUi-origin");P[0].setAttribute("disabled",!0);for(var B=D.querySelectorAll(".noUi-connect"),O=["c-1-color","c-2-color","c-3-color"],U=0;U<B.length;U++)B[U].classList.add(O[U]);function _(e,t,n,o,r,i){N.movePlayhead(e[1])}D.noUiSlider.on("change",_),D.noUiSlider.on("change",_);var j=document.getElementById("noslider3");t.default.create(j,{start:50,animate:!1,range:{min:-45,max:100}});var H=document.getElementById("noslider4");t.default.create(H,{start:0,animate:!1,range:{min:-12,max:12}});var N=new e.FancyMidiPlayer(document);function F(e){e.preventDefault()}function z(e){if(e.preventDefault(),e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var n=e.dataTransfer.items[t].getAsFile(),o=n.name;o.toLowerCase().includes(".mid")||o.toLowerCase().includes(".midi")?(R.style.marginBottom="8px",R.style.height="15px",R.innerHTML=o,W(n)):(R.style.marginBottom="8px",R.style.height="15px",R.innerHTML="Invalid file type")}}else for(t=0;t<e.dataTransfer.files.length;t++);}C(!0),N.setInstrument(E).then(function(){var e=document.querySelector("#play-piece"),t=document.querySelector("#stop-piece"),n=document.querySelector("#loop-piece"),o=document.querySelector("#start-loop"),r=document.querySelector("#end-loop");e.addEventListener("click",s,!0),e.addEventListener("keyup",s,!0);var i=document.querySelector("#nav-icon"),a=document.querySelector("#loop-icon"),l=document.querySelector("#info-container"),d=document.querySelector("#midi-container");function s(e){e.preventDefault(),32===e.keyCode||N.playBtnClicked()}i.addEventListener("click",function(e){e.preventDefault(),"flex"==l.style.display?l.style.display="none":l.style.display="flex"},!0),a.addEventListener("click",function(e){e.preventDefault(),"visible"==d.style.visibility?d.style.visibility="hidden":d.style.visibility="visible"},!0),j.noUiSlider.on("update",function(e,t,n,o,r,i){N.updateTempoInput(parseInt(e))}),j.noUiSlider.on("change",function(e,t,n,o,r,i){N.setSliderTempo(parseInt(e))}),H.noUiSlider.on("update",function(e,t,n,o,r,i){N.updatePitchSlider(parseInt(e))}),H.noUiSlider.on("change",function(e,t,n,o,r,i){N.updatePitchSlider(parseInt(e))}),t.onclick=N.stopMidi.bind(N),n.onclick=N.manageLoop.bind(N),o.onclick=N.setStartLoop.bind(N),r.onclick=N.setEndLoop.bind(N);var u=document.querySelector("#fileDiv");u&&(u.ondrop=z,u.ondragover=F),G(0)});var G=function(e){C(!0),N.stopMidi(),N.setMidi(q[e].path).then(function(){return C(!1)})};document.querySelector("#progressSlider").addEventListener("input",function(e){N.movePlayhead(e.target.value)}),document.querySelector("#tempo").addEventListener("change",function(e){N.setTempoInput(e.target.value)}),document.querySelector("#accidentalSwitch").addEventListener("change",function(e){N.setAccidental(e.target.value)}),document.body.onkeyup=function(e){32==e.keyCode?N.keyboardSpaceClicked():37==e.keyCode?N.movePlayheadBwd():39==e.keyCode&&N.movePlayheadFwd()};var R=document.querySelector("#file-name");document.querySelector("#musical-piece").addEventListener("change",function(e){var t=this.files[0];R.style.marginBottom="8px",R.style.height="15px",R.innerHTML=t.name,console.log("the file: ",t),t&&W(t)},!1);var W=function(e){var t=new FormData;t.append("afile",e);var n=new XMLHttpRequest;n.open("POST",b+"/PLMidi/upload.php",!0),n.upload.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t+"% uploaded")}},n.onload=function(){if(200==this.status){var e=JSON.parse(this.response);"media upload"==e.data.uploadData.status&&X(e.data.uploadData.filename)}},n.send(t)},X=function(e){console.log("path b4: "+e);var t=b+"/PLMidi/uploads/"+e;console.log("download path: "+t);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=s(99,"New Track",t);C(!0),N.stopMidi(),console.log("current selected path: "+e.path),N.setMidi(e.path).then(function(){return C(!1)})}},n.open("GET",t),n.send()},Y=!1;function J(e){var t=e.data[0]>>4,o=15&e.data[0],r=e.data[1],i=e.data[2];t==g&&N.handleSustain({number:64,value:e.data[2]}),9!==o&&(t===c||t===p&&0===i?((0,n.noteOff)(r),K(r)):t===p?h&&((0,n.noteOn)(r,i/127),$(r,i/127)):t===f?r===y?(0,n.modWheel)(i/127):(0,n.controller)(r,i/127):t===v?(0,n.pitchWheel)((128*i+r-8192)/8192):t===m&&(0,n.polyPressure)(r,i/127))}function K(e){N.instrument&&N.stopInstrumentMidiNote(e)}function $(e,t){N.instrument&&N.playKeyboardInstrumentMidiNote(t,e)}!Y&&h&&(ie(),Y=!0);var Q=null,V=null,Z=null;function ee(e){Z&&(Z.onmidimessage=null);var t=e.target[e.target.selectedIndex].value;(Z="function"==typeof V.inputs?V.inputs()[e.target.selectedIndex]:V.inputs.get(t))&&(Z.onmidimessage=J),(0,r.setSetting)("midiIn",Z.name.toString())}function te(){var e=(0,r.getSetting)("midiIn");Q.options.length=0,Z&&"disconnected"==Z.state&&(Z=null);for(var t=null,n=V.inputs.values(),o=n.next();o&&!o.done;o=n.next()){var i=(o=o.value).name.toString();t||(t=o);var l=!1;Z&&Z===o&&(l=!0),!Z&&e&&-1!==i.toLowerCase().indexOf(e.toLowerCase())&&(l=!0);var d,s=a(u);try{for(s.s();!(d=s.n()).done;){var c=d.value;Z||-1===i.toLowerCase().indexOf(c)||(l=!0)}}catch(p){s.e(p)}finally{s.f()}Q.appendChild(new Option(o.name,o.id,l,l)),l&&((Z=o).onmidimessage=J)}Z||(Z=t)&&(Z.onmidimessage=J)}function ne(e){te()}function oe(e){V=e,(0,o.setAppLoaded)(),Q=document.getElementById("midiIn"),e.onstatechange=ne,te()}function re(e){(0,o.setAppError)("Cannot initialize MIDI"),console.log("MIDI not initialized - error encountered: ".concat(e.code))}function ie(){navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(oe,re):(0,o.setAppError)("Your browser has no MIDI features.")}
},{"./midi":"BGra","babel-polyfill":"JIy0","html-midi-player":"VqGJ","nouislider":"tI8j","nouislider/dist/nouislider.css":"sC8V","./chord-display/events":"mXtH","./chord-display/ui":"S5Fz","./chord-display/settings":"aXpz"}]},{},["H99C"], null)
//# sourceMappingURL=/src.01515f12.js.map